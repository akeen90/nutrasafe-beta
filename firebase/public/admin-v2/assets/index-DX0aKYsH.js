var J7=Object.defineProperty;var lM=e=>{throw TypeError(e)};var eq=(e,t,r)=>t in e?J7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ME=(e,t,r)=>eq(e,typeof t!="symbol"?t+"":t,r),OE=(e,t,r)=>t.has(e)||lM("Cannot "+r);var Ee=(e,t,r)=>(OE(e,t,"read from private field"),r?r.call(e):t.get(e)),$t=(e,t,r)=>t.has(e)?lM("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Tt=(e,t,r,n)=>(OE(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),ei=(e,t,r)=>(OE(e,t,"access private method"),r);var tC=(e,t,r,n)=>({set _(i){Tt(e,t,i,r)},get _(){return Ee(e,t,n)}});function tq(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var rq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lV={exports:{}},aS={},cV={exports:{}},zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv=Symbol.for("react.element"),nq=Symbol.for("react.portal"),iq=Symbol.for("react.fragment"),sq=Symbol.for("react.strict_mode"),oq=Symbol.for("react.profiler"),aq=Symbol.for("react.provider"),lq=Symbol.for("react.context"),cq=Symbol.for("react.forward_ref"),uq=Symbol.for("react.suspense"),dq=Symbol.for("react.memo"),hq=Symbol.for("react.lazy"),cM=Symbol.iterator;function pq(e){return e===null||typeof e!="object"?null:(e=cM&&e[cM]||e["@@iterator"],typeof e=="function"?e:null)}var uV={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dV=Object.assign,hV={};function mf(e,t,r){this.props=e,this.context=t,this.refs=hV,this.updater=r||uV}mf.prototype.isReactComponent={};mf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};mf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function pV(){}pV.prototype=mf.prototype;function N_(e,t,r){this.props=e,this.context=t,this.refs=hV,this.updater=r||uV}var M_=N_.prototype=new pV;M_.constructor=N_;dV(M_,mf.prototype);M_.isPureReactComponent=!0;var uM=Array.isArray,fV=Object.prototype.hasOwnProperty,O_={current:null},gV={key:!0,ref:!0,__self:!0,__source:!0};function mV(e,t,r){var n,i={},s=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)fV.call(t,n)&&!gV.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Kv,type:e,key:s,ref:o,props:i,_owner:O_.current}}function fq(e,t){return{$$typeof:Kv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function F_(e){return typeof e=="object"&&e!==null&&e.$$typeof===Kv}function gq(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var dM=/\/+/g;function FE(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gq(""+e.key):t.toString(36)}function qC(e,t,r,n,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Kv:case nq:o=!0}}if(o)return o=e,i=i(o),e=n===""?"."+FE(o,0):n,uM(i)?(r="",e!=null&&(r=e.replace(dM,"$&/")+"/"),qC(i,t,r,"",function(c){return c})):i!=null&&(F_(i)&&(i=fq(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(dM,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=n===""?".":n+":",uM(e))for(var a=0;a<e.length;a++){s=e[a];var l=n+FE(s,a);o+=qC(s,t,r,l,i)}else if(l=pq(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=n+FE(s,a++),o+=qC(s,t,r,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function rC(e,t,r){if(e==null)return e;var n=[],i=0;return qC(e,n,"","",function(s){return t.call(r,s,i++)}),n}function mq(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ki={current:null},YC={transition:null},vq={ReactCurrentDispatcher:ki,ReactCurrentBatchConfig:YC,ReactCurrentOwner:O_};function vV(){throw Error("act(...) is not supported in production builds of React.")}zt.Children={map:rC,forEach:function(e,t,r){rC(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return rC(e,function(){t++}),t},toArray:function(e){return rC(e,function(t){return t})||[]},only:function(e){if(!F_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};zt.Component=mf;zt.Fragment=iq;zt.Profiler=oq;zt.PureComponent=N_;zt.StrictMode=sq;zt.Suspense=uq;zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vq;zt.act=vV;zt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=dV({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=O_.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)fV.call(t,l)&&!gV.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Kv,type:e.type,key:i,ref:s,props:n,_owner:o}};zt.createContext=function(e){return e={$$typeof:lq,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:aq,_context:e},e.Consumer=e};zt.createElement=mV;zt.createFactory=function(e){var t=mV.bind(null,e);return t.type=e,t};zt.createRef=function(){return{current:null}};zt.forwardRef=function(e){return{$$typeof:cq,render:e}};zt.isValidElement=F_;zt.lazy=function(e){return{$$typeof:hq,_payload:{_status:-1,_result:e},_init:mq}};zt.memo=function(e,t){return{$$typeof:dq,type:e,compare:t===void 0?null:t}};zt.startTransition=function(e){var t=YC.transition;YC.transition={};try{e()}finally{YC.transition=t}};zt.unstable_act=vV;zt.useCallback=function(e,t){return ki.current.useCallback(e,t)};zt.useContext=function(e){return ki.current.useContext(e)};zt.useDebugValue=function(){};zt.useDeferredValue=function(e){return ki.current.useDeferredValue(e)};zt.useEffect=function(e,t){return ki.current.useEffect(e,t)};zt.useId=function(){return ki.current.useId()};zt.useImperativeHandle=function(e,t,r){return ki.current.useImperativeHandle(e,t,r)};zt.useInsertionEffect=function(e,t){return ki.current.useInsertionEffect(e,t)};zt.useLayoutEffect=function(e,t){return ki.current.useLayoutEffect(e,t)};zt.useMemo=function(e,t){return ki.current.useMemo(e,t)};zt.useReducer=function(e,t,r){return ki.current.useReducer(e,t,r)};zt.useRef=function(e){return ki.current.useRef(e)};zt.useState=function(e){return ki.current.useState(e)};zt.useSyncExternalStore=function(e,t,r){return ki.current.useSyncExternalStore(e,t,r)};zt.useTransition=function(){return ki.current.useTransition()};zt.version="18.3.1";cV.exports=zt;var v=cV.exports;const Ne=lo(v),yq=tq({__proto__:null,default:Ne},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cq=v,wq=Symbol.for("react.element"),bq=Symbol.for("react.fragment"),Sq=Object.prototype.hasOwnProperty,xq=Cq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Eq={key:!0,ref:!0,__self:!0,__source:!0};function yV(e,t,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Sq.call(t,n)&&!Eq.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:wq,type:e,key:s,ref:o,props:i,_owner:xq.current}}aS.Fragment=bq;aS.jsx=yV;aS.jsxs=yV;lV.exports=aS;var h=lV.exports,SR={},CV={exports:{}},ks={},wV={exports:{}},bV={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ne,J){var ye=ne.length;ne.push(J);e:for(;0<ye;){var Pe=ye-1>>>1,ue=ne[Pe];if(0<i(ue,J))ne[Pe]=J,ne[ye]=ue,ye=Pe;else break e}}function r(ne){return ne.length===0?null:ne[0]}function n(ne){if(ne.length===0)return null;var J=ne[0],ye=ne.pop();if(ye!==J){ne[0]=ye;e:for(var Pe=0,ue=ne.length,Z=ue>>>1;Pe<Z;){var Ve=2*(Pe+1)-1,ve=ne[Ve],Ze=Ve+1,je=ne[Ze];if(0>i(ve,ye))Ze<ue&&0>i(je,ve)?(ne[Pe]=je,ne[Ze]=ye,Pe=Ze):(ne[Pe]=ve,ne[Ve]=ye,Pe=Ve);else if(Ze<ue&&0>i(je,ye))ne[Pe]=je,ne[Ze]=ye,Pe=Ze;else break e}}return J}function i(ne,J){var ye=ne.sortIndex-J.sortIndex;return ye!==0?ye:ne.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,f=!1,m=!1,y=!1,C=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(ne){for(var J=r(c);J!==null;){if(J.callback===null)n(c);else if(J.startTime<=ne)n(c),J.sortIndex=J.expirationTime,t(l,J);else break;J=r(c)}}function E(ne){if(y=!1,x(ne),!m)if(r(l)!==null)m=!0,B(I);else{var J=r(c);J!==null&&W(E,J.startTime-ne)}}function I(ne,J){m=!1,y&&(y=!1,w(A),A=-1),f=!0;var ye=p;try{for(x(J),d=r(l);d!==null&&(!(d.expirationTime>J)||ne&&!M());){var Pe=d.callback;if(typeof Pe=="function"){d.callback=null,p=d.priorityLevel;var ue=Pe(d.expirationTime<=J);J=e.unstable_now(),typeof ue=="function"?d.callback=ue:d===r(l)&&n(l),x(J)}else n(l);d=r(l)}if(d!==null)var Z=!0;else{var Ve=r(c);Ve!==null&&W(E,Ve.startTime-J),Z=!1}return Z}finally{d=null,p=ye,f=!1}}var k=!1,P=null,A=-1,D=5,L=-1;function M(){return!(e.unstable_now()-L<D)}function T(){if(P!==null){var ne=e.unstable_now();L=ne;var J=!0;try{J=P(!0,ne)}finally{J?O():(k=!1,P=null)}}else k=!1}var O;if(typeof b=="function")O=function(){b(T)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,X=Q.port2;Q.port1.onmessage=T,O=function(){X.postMessage(null)}}else O=function(){C(T,0)};function B(ne){P=ne,k||(k=!0,O())}function W(ne,J){A=C(function(){ne(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_continueExecution=function(){m||f||(m=!0,B(I))},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(ne){switch(p){case 1:case 2:case 3:var J=3;break;default:J=p}var ye=p;p=J;try{return ne()}finally{p=ye}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ne,J){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ye=p;p=ne;try{return J()}finally{p=ye}},e.unstable_scheduleCallback=function(ne,J,ye){var Pe=e.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Pe+ye:Pe):ye=Pe,ne){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=ye+ue,ne={id:u++,callback:J,priorityLevel:ne,startTime:ye,expirationTime:ue,sortIndex:-1},ye>Pe?(ne.sortIndex=ye,t(c,ne),r(l)===null&&ne===r(c)&&(y?(w(A),A=-1):y=!0,W(E,ye-Pe))):(ne.sortIndex=ue,t(l,ne),m||f||(m=!0,B(I))),ne},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(ne){var J=p;return function(){var ye=p;p=J;try{return ne.apply(this,arguments)}finally{p=ye}}}})(bV);wV.exports=bV;var Pq=wV.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rq=v,Ts=Pq;function Le(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var SV=new Set,pm={};function ih(e,t){Ip(e,t),Ip(e+"Capture",t)}function Ip(e,t){for(pm[e]=t,e=0;e<t.length;e++)SV.add(t[e])}var yl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xR=Object.prototype.hasOwnProperty,Tq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hM={},pM={};function Aq(e){return xR.call(pM,e)?!0:xR.call(hM,e)?!1:Tq.test(e)?pM[e]=!0:(hM[e]=!0,!1)}function _q(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Dq(e,t,r,n){if(t===null||typeof t>"u"||_q(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ii(e,t,r,n,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Kn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Kn[e]=new Ii(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Kn[t]=new Ii(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Kn[e]=new Ii(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Kn[e]=new Ii(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Kn[e]=new Ii(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Kn[e]=new Ii(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Kn[e]=new Ii(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Kn[e]=new Ii(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Kn[e]=new Ii(e,5,!1,e.toLowerCase(),null,!1,!1)});var L_=/[\-:]([a-z])/g;function G_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(L_,G_);Kn[t]=new Ii(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(L_,G_);Kn[t]=new Ii(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(L_,G_);Kn[t]=new Ii(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Kn[e]=new Ii(e,1,!1,e.toLowerCase(),null,!1,!1)});Kn.xlinkHref=new Ii("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Kn[e]=new Ii(e,1,!1,e.toLowerCase(),null,!0,!0)});function j_(e,t,r,n){var i=Kn.hasOwnProperty(t)?Kn[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Dq(t,r,i,n)&&(r=null),n||i===null?Aq(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ll=Rq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nC=Symbol.for("react.element"),Hh=Symbol.for("react.portal"),zh=Symbol.for("react.fragment"),B_=Symbol.for("react.strict_mode"),ER=Symbol.for("react.profiler"),xV=Symbol.for("react.provider"),EV=Symbol.for("react.context"),V_=Symbol.for("react.forward_ref"),PR=Symbol.for("react.suspense"),RR=Symbol.for("react.suspense_list"),H_=Symbol.for("react.memo"),hc=Symbol.for("react.lazy"),PV=Symbol.for("react.offscreen"),fM=Symbol.iterator;function sg(e){return e===null||typeof e!="object"?null:(e=fM&&e[fM]||e["@@iterator"],typeof e=="function"?e:null)}var $r=Object.assign,LE;function Tg(e){if(LE===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);LE=t&&t[1]||""}return`
`+LE+e}var GE=!1;function jE(e,t){if(!e||GE)return"";GE=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{GE=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Tg(e):""}function kq(e){switch(e.tag){case 5:return Tg(e.type);case 16:return Tg("Lazy");case 13:return Tg("Suspense");case 19:return Tg("SuspenseList");case 0:case 2:case 15:return e=jE(e.type,!1),e;case 11:return e=jE(e.type.render,!1),e;case 1:return e=jE(e.type,!0),e;default:return""}}function TR(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zh:return"Fragment";case Hh:return"Portal";case ER:return"Profiler";case B_:return"StrictMode";case PR:return"Suspense";case RR:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case EV:return(e.displayName||"Context")+".Consumer";case xV:return(e._context.displayName||"Context")+".Provider";case V_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case H_:return t=e.displayName||null,t!==null?t:TR(e.type)||"Memo";case hc:t=e._payload,e=e._init;try{return TR(e(t))}catch{}}return null}function Iq(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return TR(t);case 8:return t===B_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Qc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function RV(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Nq(e){var t=RV(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function iC(e){e._valueTracker||(e._valueTracker=Nq(e))}function TV(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=RV(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function G0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function AR(e,t){var r=t.checked;return $r({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function gM(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Qc(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function AV(e,t){t=t.checked,t!=null&&j_(e,"checked",t,!1)}function _R(e,t){AV(e,t);var r=Qc(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?DR(e,t.type,r):t.hasOwnProperty("defaultValue")&&DR(e,t.type,Qc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mM(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function DR(e,t,r){(t!=="number"||G0(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ag=Array.isArray;function ap(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Qc(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function kR(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Le(91));return $r({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vM(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Le(92));if(Ag(r)){if(1<r.length)throw Error(Le(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Qc(r)}}function _V(e,t){var r=Qc(t.value),n=Qc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function yM(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function DV(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function IR(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?DV(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var sC,kV=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(sC=sC||document.createElement("div"),sC.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=sC.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function fm(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Qg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mq=["Webkit","ms","Moz","O"];Object.keys(Qg).forEach(function(e){Mq.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qg[t]=Qg[e]})});function IV(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Qg.hasOwnProperty(e)&&Qg[e]?(""+t).trim():t+"px"}function NV(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=IV(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var Oq=$r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function NR(e,t){if(t){if(Oq[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Le(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Le(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Le(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Le(62))}}function MR(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var OR=null;function z_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var FR=null,lp=null,cp=null;function CM(e){if(e=Qv(e)){if(typeof FR!="function")throw Error(Le(280));var t=e.stateNode;t&&(t=hS(t),FR(e.stateNode,e.type,t))}}function MV(e){lp?cp?cp.push(e):cp=[e]:lp=e}function OV(){if(lp){var e=lp,t=cp;if(cp=lp=null,CM(e),t)for(e=0;e<t.length;e++)CM(t[e])}}function FV(e,t){return e(t)}function LV(){}var BE=!1;function GV(e,t,r){if(BE)return e(t,r);BE=!0;try{return FV(e,t,r)}finally{BE=!1,(lp!==null||cp!==null)&&(LV(),OV())}}function gm(e,t){var r=e.stateNode;if(r===null)return null;var n=hS(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Le(231,t,typeof r));return r}var LR=!1;if(yl)try{var og={};Object.defineProperty(og,"passive",{get:function(){LR=!0}}),window.addEventListener("test",og,og),window.removeEventListener("test",og,og)}catch{LR=!1}function Fq(e,t,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var Xg=!1,j0=null,B0=!1,GR=null,Lq={onError:function(e){Xg=!0,j0=e}};function Gq(e,t,r,n,i,s,o,a,l){Xg=!1,j0=null,Fq.apply(Lq,arguments)}function jq(e,t,r,n,i,s,o,a,l){if(Gq.apply(this,arguments),Xg){if(Xg){var c=j0;Xg=!1,j0=null}else throw Error(Le(198));B0||(B0=!0,GR=c)}}function sh(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function jV(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wM(e){if(sh(e)!==e)throw Error(Le(188))}function Bq(e){var t=e.alternate;if(!t){if(t=sh(e),t===null)throw Error(Le(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return wM(i),e;if(s===n)return wM(i),t;s=s.sibling}throw Error(Le(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(Le(189))}}if(r.alternate!==n)throw Error(Le(190))}if(r.tag!==3)throw Error(Le(188));return r.stateNode.current===r?e:t}function BV(e){return e=Bq(e),e!==null?VV(e):null}function VV(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=VV(e);if(t!==null)return t;e=e.sibling}return null}var HV=Ts.unstable_scheduleCallback,bM=Ts.unstable_cancelCallback,Vq=Ts.unstable_shouldYield,Hq=Ts.unstable_requestPaint,nn=Ts.unstable_now,zq=Ts.unstable_getCurrentPriorityLevel,$_=Ts.unstable_ImmediatePriority,zV=Ts.unstable_UserBlockingPriority,V0=Ts.unstable_NormalPriority,$q=Ts.unstable_LowPriority,$V=Ts.unstable_IdlePriority,lS=null,Ea=null;function Uq(e){if(Ea&&typeof Ea.onCommitFiberRoot=="function")try{Ea.onCommitFiberRoot(lS,e,void 0,(e.current.flags&128)===128)}catch{}}var Ho=Math.clz32?Math.clz32:qq,Wq=Math.log,Kq=Math.LN2;function qq(e){return e>>>=0,e===0?32:31-(Wq(e)/Kq|0)|0}var oC=64,aC=4194304;function _g(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function H0(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=_g(a):(s&=o,s!==0&&(n=_g(s)))}else o=r&~i,o!==0?n=_g(o):s!==0&&(n=_g(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ho(t),i=1<<r,n|=e[r],t&=~i;return n}function Yq(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qq(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Ho(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=Yq(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function jR(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function UV(){var e=oC;return oC<<=1,!(oC&4194240)&&(oC=64),e}function VE(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function qv(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ho(t),e[t]=r}function Xq(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Ho(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}function U_(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ho(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var cr=0;function WV(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var KV,W_,qV,YV,QV,BR=!1,lC=[],Oc=null,Fc=null,Lc=null,mm=new Map,vm=new Map,mc=[],Zq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function SM(e,t){switch(e){case"focusin":case"focusout":Oc=null;break;case"dragenter":case"dragleave":Fc=null;break;case"mouseover":case"mouseout":Lc=null;break;case"pointerover":case"pointerout":mm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vm.delete(t.pointerId)}}function ag(e,t,r,n,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Qv(t),t!==null&&W_(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Jq(e,t,r,n,i){switch(t){case"focusin":return Oc=ag(Oc,e,t,r,n,i),!0;case"dragenter":return Fc=ag(Fc,e,t,r,n,i),!0;case"mouseover":return Lc=ag(Lc,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return mm.set(s,ag(mm.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,vm.set(s,ag(vm.get(s)||null,e,t,r,n,i)),!0}return!1}function XV(e){var t=Xu(e.target);if(t!==null){var r=sh(t);if(r!==null){if(t=r.tag,t===13){if(t=jV(r),t!==null){e.blockedOn=t,QV(e.priority,function(){qV(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function QC(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=VR(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);OR=n,r.target.dispatchEvent(n),OR=null}else return t=Qv(r),t!==null&&W_(t),e.blockedOn=r,!1;t.shift()}return!0}function xM(e,t,r){QC(e)&&r.delete(t)}function eY(){BR=!1,Oc!==null&&QC(Oc)&&(Oc=null),Fc!==null&&QC(Fc)&&(Fc=null),Lc!==null&&QC(Lc)&&(Lc=null),mm.forEach(xM),vm.forEach(xM)}function lg(e,t){e.blockedOn===t&&(e.blockedOn=null,BR||(BR=!0,Ts.unstable_scheduleCallback(Ts.unstable_NormalPriority,eY)))}function ym(e){function t(i){return lg(i,e)}if(0<lC.length){lg(lC[0],e);for(var r=1;r<lC.length;r++){var n=lC[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Oc!==null&&lg(Oc,e),Fc!==null&&lg(Fc,e),Lc!==null&&lg(Lc,e),mm.forEach(t),vm.forEach(t),r=0;r<mc.length;r++)n=mc[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<mc.length&&(r=mc[0],r.blockedOn===null);)XV(r),r.blockedOn===null&&mc.shift()}var up=Ll.ReactCurrentBatchConfig,z0=!0;function tY(e,t,r,n){var i=cr,s=up.transition;up.transition=null;try{cr=1,K_(e,t,r,n)}finally{cr=i,up.transition=s}}function rY(e,t,r,n){var i=cr,s=up.transition;up.transition=null;try{cr=4,K_(e,t,r,n)}finally{cr=i,up.transition=s}}function K_(e,t,r,n){if(z0){var i=VR(e,t,r,n);if(i===null)XE(e,t,n,$0,r),SM(e,n);else if(Jq(i,e,t,r,n))n.stopPropagation();else if(SM(e,n),t&4&&-1<Zq.indexOf(e)){for(;i!==null;){var s=Qv(i);if(s!==null&&KV(s),s=VR(e,t,r,n),s===null&&XE(e,t,n,$0,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else XE(e,t,n,null,r)}}var $0=null;function VR(e,t,r,n){if($0=null,e=z_(n),e=Xu(e),e!==null)if(t=sh(e),t===null)e=null;else if(r=t.tag,r===13){if(e=jV(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $0=e,null}function ZV(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zq()){case $_:return 1;case zV:return 4;case V0:case $q:return 16;case $V:return 536870912;default:return 16}default:return 16}}var Dc=null,q_=null,XC=null;function JV(){if(XC)return XC;var e,t=q_,r=t.length,n,i="value"in Dc?Dc.value:Dc.textContent,s=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===i[s-n];n++);return XC=i.slice(e,1<n?1-n:void 0)}function ZC(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function cC(){return!0}function EM(){return!1}function Is(e){function t(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cC:EM,this.isPropagationStopped=EM,this}return $r(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=cC)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=cC)},persist:function(){},isPersistent:cC}),t}var vf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Y_=Is(vf),Yv=$r({},vf,{view:0,detail:0}),nY=Is(Yv),HE,zE,cg,cS=$r({},Yv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Q_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cg&&(cg&&e.type==="mousemove"?(HE=e.screenX-cg.screenX,zE=e.screenY-cg.screenY):zE=HE=0,cg=e),HE)},movementY:function(e){return"movementY"in e?e.movementY:zE}}),PM=Is(cS),iY=$r({},cS,{dataTransfer:0}),sY=Is(iY),oY=$r({},Yv,{relatedTarget:0}),$E=Is(oY),aY=$r({},vf,{animationName:0,elapsedTime:0,pseudoElement:0}),lY=Is(aY),cY=$r({},vf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uY=Is(cY),dY=$r({},vf,{data:0}),RM=Is(dY),hY={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pY={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fY={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gY(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fY[e])?!!t[e]:!1}function Q_(){return gY}var mY=$r({},Yv,{key:function(e){if(e.key){var t=hY[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ZC(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pY[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Q_,charCode:function(e){return e.type==="keypress"?ZC(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ZC(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vY=Is(mY),yY=$r({},cS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),TM=Is(yY),CY=$r({},Yv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Q_}),wY=Is(CY),bY=$r({},vf,{propertyName:0,elapsedTime:0,pseudoElement:0}),SY=Is(bY),xY=$r({},cS,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),EY=Is(xY),PY=[9,13,27,32],X_=yl&&"CompositionEvent"in window,Zg=null;yl&&"documentMode"in document&&(Zg=document.documentMode);var RY=yl&&"TextEvent"in window&&!Zg,eH=yl&&(!X_||Zg&&8<Zg&&11>=Zg),AM=" ",_M=!1;function tH(e,t){switch(e){case"keyup":return PY.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rH(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $h=!1;function TY(e,t){switch(e){case"compositionend":return rH(t);case"keypress":return t.which!==32?null:(_M=!0,AM);case"textInput":return e=t.data,e===AM&&_M?null:e;default:return null}}function AY(e,t){if($h)return e==="compositionend"||!X_&&tH(e,t)?(e=JV(),XC=q_=Dc=null,$h=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return eH&&t.locale!=="ko"?null:t.data;default:return null}}var _Y={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function DM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_Y[e.type]:t==="textarea"}function nH(e,t,r,n){MV(n),t=U0(t,"onChange"),0<t.length&&(r=new Y_("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Jg=null,Cm=null;function DY(e){fH(e,0)}function uS(e){var t=Kh(e);if(TV(t))return e}function kY(e,t){if(e==="change")return t}var iH=!1;if(yl){var UE;if(yl){var WE="oninput"in document;if(!WE){var kM=document.createElement("div");kM.setAttribute("oninput","return;"),WE=typeof kM.oninput=="function"}UE=WE}else UE=!1;iH=UE&&(!document.documentMode||9<document.documentMode)}function IM(){Jg&&(Jg.detachEvent("onpropertychange",sH),Cm=Jg=null)}function sH(e){if(e.propertyName==="value"&&uS(Cm)){var t=[];nH(t,Cm,e,z_(e)),GV(DY,t)}}function IY(e,t,r){e==="focusin"?(IM(),Jg=t,Cm=r,Jg.attachEvent("onpropertychange",sH)):e==="focusout"&&IM()}function NY(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uS(Cm)}function MY(e,t){if(e==="click")return uS(t)}function OY(e,t){if(e==="input"||e==="change")return uS(t)}function FY(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ko=typeof Object.is=="function"?Object.is:FY;function wm(e,t){if(Ko(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!xR.call(t,i)||!Ko(e[i],t[i]))return!1}return!0}function NM(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function MM(e,t){var r=NM(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=NM(r)}}function oH(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?oH(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function aH(){for(var e=window,t=G0();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=G0(e.document)}return t}function Z_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function LY(e){var t=aH(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&oH(r.ownerDocument.documentElement,r)){if(n!==null&&Z_(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=MM(r,s);var o=MM(r,n);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var GY=yl&&"documentMode"in document&&11>=document.documentMode,Uh=null,HR=null,em=null,zR=!1;function OM(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;zR||Uh==null||Uh!==G0(n)||(n=Uh,"selectionStart"in n&&Z_(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),em&&wm(em,n)||(em=n,n=U0(HR,"onSelect"),0<n.length&&(t=new Y_("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Uh)))}function uC(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Wh={animationend:uC("Animation","AnimationEnd"),animationiteration:uC("Animation","AnimationIteration"),animationstart:uC("Animation","AnimationStart"),transitionend:uC("Transition","TransitionEnd")},KE={},lH={};yl&&(lH=document.createElement("div").style,"AnimationEvent"in window||(delete Wh.animationend.animation,delete Wh.animationiteration.animation,delete Wh.animationstart.animation),"TransitionEvent"in window||delete Wh.transitionend.transition);function dS(e){if(KE[e])return KE[e];if(!Wh[e])return e;var t=Wh[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in lH)return KE[e]=t[r];return e}var cH=dS("animationend"),uH=dS("animationiteration"),dH=dS("animationstart"),hH=dS("transitionend"),pH=new Map,FM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function du(e,t){pH.set(e,t),ih(t,[e])}for(var qE=0;qE<FM.length;qE++){var YE=FM[qE],jY=YE.toLowerCase(),BY=YE[0].toUpperCase()+YE.slice(1);du(jY,"on"+BY)}du(cH,"onAnimationEnd");du(uH,"onAnimationIteration");du(dH,"onAnimationStart");du("dblclick","onDoubleClick");du("focusin","onFocus");du("focusout","onBlur");du(hH,"onTransitionEnd");Ip("onMouseEnter",["mouseout","mouseover"]);Ip("onMouseLeave",["mouseout","mouseover"]);Ip("onPointerEnter",["pointerout","pointerover"]);Ip("onPointerLeave",["pointerout","pointerover"]);ih("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ih("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ih("onBeforeInput",["compositionend","keypress","textInput","paste"]);ih("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ih("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ih("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VY=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dg));function LM(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,jq(n,t,void 0,e),e.currentTarget=null}function fH(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;LM(i,a,c),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;LM(i,a,c),s=l}}}if(B0)throw e=GR,B0=!1,GR=null,e}function Rr(e,t){var r=t[qR];r===void 0&&(r=t[qR]=new Set);var n=e+"__bubble";r.has(n)||(gH(t,e,2,!1),r.add(n))}function QE(e,t,r){var n=0;t&&(n|=4),gH(r,e,n,t)}var dC="_reactListening"+Math.random().toString(36).slice(2);function bm(e){if(!e[dC]){e[dC]=!0,SV.forEach(function(r){r!=="selectionchange"&&(VY.has(r)||QE(r,!1,e),QE(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[dC]||(t[dC]=!0,QE("selectionchange",!1,t))}}function gH(e,t,r,n){switch(ZV(t)){case 1:var i=tY;break;case 4:i=rY;break;default:i=K_}r=i.bind(null,t,r,e),i=void 0,!LR||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function XE(e,t,r,n,i){var s=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Xu(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}GV(function(){var c=s,u=z_(r),d=[];e:{var p=pH.get(e);if(p!==void 0){var f=Y_,m=e;switch(e){case"keypress":if(ZC(r)===0)break e;case"keydown":case"keyup":f=vY;break;case"focusin":m="focus",f=$E;break;case"focusout":m="blur",f=$E;break;case"beforeblur":case"afterblur":f=$E;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=PM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=sY;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=wY;break;case cH:case uH:case dH:f=lY;break;case hH:f=SY;break;case"scroll":f=nY;break;case"wheel":f=EY;break;case"copy":case"cut":case"paste":f=uY;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=TM}var y=(t&4)!==0,C=!y&&e==="scroll",w=y?p!==null?p+"Capture":null:p;y=[];for(var b=c,x;b!==null;){x=b;var E=x.stateNode;if(x.tag===5&&E!==null&&(x=E,w!==null&&(E=gm(b,w),E!=null&&y.push(Sm(b,E,x)))),C)break;b=b.return}0<y.length&&(p=new f(p,m,null,r,u),d.push({event:p,listeners:y}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",p&&r!==OR&&(m=r.relatedTarget||r.fromElement)&&(Xu(m)||m[Cl]))break e;if((f||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,f?(m=r.relatedTarget||r.toElement,f=c,m=m?Xu(m):null,m!==null&&(C=sh(m),m!==C||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=c),f!==m)){if(y=PM,E="onMouseLeave",w="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(y=TM,E="onPointerLeave",w="onPointerEnter",b="pointer"),C=f==null?p:Kh(f),x=m==null?p:Kh(m),p=new y(E,b+"leave",f,r,u),p.target=C,p.relatedTarget=x,E=null,Xu(u)===c&&(y=new y(w,b+"enter",m,r,u),y.target=x,y.relatedTarget=C,E=y),C=E,f&&m)t:{for(y=f,w=m,b=0,x=y;x;x=_h(x))b++;for(x=0,E=w;E;E=_h(E))x++;for(;0<b-x;)y=_h(y),b--;for(;0<x-b;)w=_h(w),x--;for(;b--;){if(y===w||w!==null&&y===w.alternate)break t;y=_h(y),w=_h(w)}y=null}else y=null;f!==null&&GM(d,p,f,y,!1),m!==null&&C!==null&&GM(d,C,m,y,!0)}}e:{if(p=c?Kh(c):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var I=kY;else if(DM(p))if(iH)I=OY;else{I=NY;var k=IY}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(I=MY);if(I&&(I=I(e,c))){nH(d,I,r,u);break e}k&&k(e,p,c),e==="focusout"&&(k=p._wrapperState)&&k.controlled&&p.type==="number"&&DR(p,"number",p.value)}switch(k=c?Kh(c):window,e){case"focusin":(DM(k)||k.contentEditable==="true")&&(Uh=k,HR=c,em=null);break;case"focusout":em=HR=Uh=null;break;case"mousedown":zR=!0;break;case"contextmenu":case"mouseup":case"dragend":zR=!1,OM(d,r,u);break;case"selectionchange":if(GY)break;case"keydown":case"keyup":OM(d,r,u)}var P;if(X_)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else $h?tH(e,r)&&(A="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&(eH&&r.locale!=="ko"&&($h||A!=="onCompositionStart"?A==="onCompositionEnd"&&$h&&(P=JV()):(Dc=u,q_="value"in Dc?Dc.value:Dc.textContent,$h=!0)),k=U0(c,A),0<k.length&&(A=new RM(A,e,null,r,u),d.push({event:A,listeners:k}),P?A.data=P:(P=rH(r),P!==null&&(A.data=P)))),(P=RY?TY(e,r):AY(e,r))&&(c=U0(c,"onBeforeInput"),0<c.length&&(u=new RM("onBeforeInput","beforeinput",null,r,u),d.push({event:u,listeners:c}),u.data=P))}fH(d,t)})}function Sm(e,t,r){return{instance:e,listener:t,currentTarget:r}}function U0(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=gm(e,r),s!=null&&n.unshift(Sm(e,s,i)),s=gm(e,t),s!=null&&n.push(Sm(e,s,i))),e=e.return}return n}function _h(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function GM(e,t,r,n,i){for(var s=t._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=gm(r,s),l!=null&&o.unshift(Sm(r,l,a))):i||(l=gm(r,s),l!=null&&o.push(Sm(r,l,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var HY=/\r\n?/g,zY=/\u0000|\uFFFD/g;function jM(e){return(typeof e=="string"?e:""+e).replace(HY,`
`).replace(zY,"")}function hC(e,t,r){if(t=jM(t),jM(e)!==t&&r)throw Error(Le(425))}function W0(){}var $R=null,UR=null;function WR(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var KR=typeof setTimeout=="function"?setTimeout:void 0,$Y=typeof clearTimeout=="function"?clearTimeout:void 0,BM=typeof Promise=="function"?Promise:void 0,UY=typeof queueMicrotask=="function"?queueMicrotask:typeof BM<"u"?function(e){return BM.resolve(null).then(e).catch(WY)}:KR;function WY(e){setTimeout(function(){throw e})}function ZE(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),ym(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);ym(t)}function Gc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function VM(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var yf=Math.random().toString(36).slice(2),ya="__reactFiber$"+yf,xm="__reactProps$"+yf,Cl="__reactContainer$"+yf,qR="__reactEvents$"+yf,KY="__reactListeners$"+yf,qY="__reactHandles$"+yf;function Xu(e){var t=e[ya];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Cl]||r[ya]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=VM(e);e!==null;){if(r=e[ya])return r;e=VM(e)}return t}e=r,r=e.parentNode}return null}function Qv(e){return e=e[ya]||e[Cl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Kh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Le(33))}function hS(e){return e[xm]||null}var YR=[],qh=-1;function hu(e){return{current:e}}function Dr(e){0>qh||(e.current=YR[qh],YR[qh]=null,qh--)}function br(e,t){qh++,YR[qh]=e.current,e.current=t}var Xc={},li=hu(Xc),es=hu(!1),_d=Xc;function Np(e,t){var r=e.type.contextTypes;if(!r)return Xc;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ts(e){return e=e.childContextTypes,e!=null}function K0(){Dr(es),Dr(li)}function HM(e,t,r){if(li.current!==Xc)throw Error(Le(168));br(li,t),br(es,r)}function mH(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Le(108,Iq(e)||"Unknown",i));return $r({},r,n)}function q0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xc,_d=li.current,br(li,e),br(es,es.current),!0}function zM(e,t,r){var n=e.stateNode;if(!n)throw Error(Le(169));r?(e=mH(e,t,_d),n.__reactInternalMemoizedMergedChildContext=e,Dr(es),Dr(li),br(li,e)):Dr(es),br(es,r)}var Ja=null,pS=!1,JE=!1;function vH(e){Ja===null?Ja=[e]:Ja.push(e)}function YY(e){pS=!0,vH(e)}function pu(){if(!JE&&Ja!==null){JE=!0;var e=0,t=cr;try{var r=Ja;for(cr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ja=null,pS=!1}catch(i){throw Ja!==null&&(Ja=Ja.slice(e+1)),HV($_,pu),i}finally{cr=t,JE=!1}}return null}var Yh=[],Qh=0,Y0=null,Q0=0,Us=[],Ws=0,Dd=null,sl=1,ol="";function Lu(e,t){Yh[Qh++]=Q0,Yh[Qh++]=Y0,Y0=e,Q0=t}function yH(e,t,r){Us[Ws++]=sl,Us[Ws++]=ol,Us[Ws++]=Dd,Dd=e;var n=sl;e=ol;var i=32-Ho(n)-1;n&=~(1<<i),r+=1;var s=32-Ho(t)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,sl=1<<32-Ho(t)+i|r<<i|n,ol=s+e}else sl=1<<s|r<<i|n,ol=e}function J_(e){e.return!==null&&(Lu(e,1),yH(e,1,0))}function eD(e){for(;e===Y0;)Y0=Yh[--Qh],Yh[Qh]=null,Q0=Yh[--Qh],Yh[Qh]=null;for(;e===Dd;)Dd=Us[--Ws],Us[Ws]=null,ol=Us[--Ws],Us[Ws]=null,sl=Us[--Ws],Us[Ws]=null}var Es=null,Ss=null,Lr=!1,Mo=null;function CH(e,t){var r=qs(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function $M(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Es=e,Ss=Gc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Es=e,Ss=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Dd!==null?{id:sl,overflow:ol}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=qs(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Es=e,Ss=null,!0):!1;default:return!1}}function QR(e){return(e.mode&1)!==0&&(e.flags&128)===0}function XR(e){if(Lr){var t=Ss;if(t){var r=t;if(!$M(e,t)){if(QR(e))throw Error(Le(418));t=Gc(r.nextSibling);var n=Es;t&&$M(e,t)?CH(n,r):(e.flags=e.flags&-4097|2,Lr=!1,Es=e)}}else{if(QR(e))throw Error(Le(418));e.flags=e.flags&-4097|2,Lr=!1,Es=e}}}function UM(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Es=e}function pC(e){if(e!==Es)return!1;if(!Lr)return UM(e),Lr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!WR(e.type,e.memoizedProps)),t&&(t=Ss)){if(QR(e))throw wH(),Error(Le(418));for(;t;)CH(e,t),t=Gc(t.nextSibling)}if(UM(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Le(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ss=Gc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ss=null}}else Ss=Es?Gc(e.stateNode.nextSibling):null;return!0}function wH(){for(var e=Ss;e;)e=Gc(e.nextSibling)}function Mp(){Ss=Es=null,Lr=!1}function tD(e){Mo===null?Mo=[e]:Mo.push(e)}var QY=Ll.ReactCurrentBatchConfig;function ug(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Le(309));var n=r.stateNode}if(!n)throw Error(Le(147,e));var i=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(Le(284));if(!r._owner)throw Error(Le(290,e))}return e}function fC(e,t){throw e=Object.prototype.toString.call(t),Error(Le(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function WM(e){var t=e._init;return t(e._payload)}function bH(e){function t(w,b){if(e){var x=w.deletions;x===null?(w.deletions=[b],w.flags|=16):x.push(b)}}function r(w,b){if(!e)return null;for(;b!==null;)t(w,b),b=b.sibling;return null}function n(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function i(w,b){return w=Hc(w,b),w.index=0,w.sibling=null,w}function s(w,b,x){return w.index=x,e?(x=w.alternate,x!==null?(x=x.index,x<b?(w.flags|=2,b):x):(w.flags|=2,b)):(w.flags|=1048576,b)}function o(w){return e&&w.alternate===null&&(w.flags|=2),w}function a(w,b,x,E){return b===null||b.tag!==6?(b=oP(x,w.mode,E),b.return=w,b):(b=i(b,x),b.return=w,b)}function l(w,b,x,E){var I=x.type;return I===zh?u(w,b,x.props.children,E,x.key):b!==null&&(b.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===hc&&WM(I)===b.type)?(E=i(b,x.props),E.ref=ug(w,b,x),E.return=w,E):(E=s0(x.type,x.key,x.props,null,w.mode,E),E.ref=ug(w,b,x),E.return=w,E)}function c(w,b,x,E){return b===null||b.tag!==4||b.stateNode.containerInfo!==x.containerInfo||b.stateNode.implementation!==x.implementation?(b=aP(x,w.mode,E),b.return=w,b):(b=i(b,x.children||[]),b.return=w,b)}function u(w,b,x,E,I){return b===null||b.tag!==7?(b=gd(x,w.mode,E,I),b.return=w,b):(b=i(b,x),b.return=w,b)}function d(w,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return b=oP(""+b,w.mode,x),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case nC:return x=s0(b.type,b.key,b.props,null,w.mode,x),x.ref=ug(w,null,b),x.return=w,x;case Hh:return b=aP(b,w.mode,x),b.return=w,b;case hc:var E=b._init;return d(w,E(b._payload),x)}if(Ag(b)||sg(b))return b=gd(b,w.mode,x,null),b.return=w,b;fC(w,b)}return null}function p(w,b,x,E){var I=b!==null?b.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return I!==null?null:a(w,b,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case nC:return x.key===I?l(w,b,x,E):null;case Hh:return x.key===I?c(w,b,x,E):null;case hc:return I=x._init,p(w,b,I(x._payload),E)}if(Ag(x)||sg(x))return I!==null?null:u(w,b,x,E,null);fC(w,x)}return null}function f(w,b,x,E,I){if(typeof E=="string"&&E!==""||typeof E=="number")return w=w.get(x)||null,a(b,w,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case nC:return w=w.get(E.key===null?x:E.key)||null,l(b,w,E,I);case Hh:return w=w.get(E.key===null?x:E.key)||null,c(b,w,E,I);case hc:var k=E._init;return f(w,b,x,k(E._payload),I)}if(Ag(E)||sg(E))return w=w.get(x)||null,u(b,w,E,I,null);fC(b,E)}return null}function m(w,b,x,E){for(var I=null,k=null,P=b,A=b=0,D=null;P!==null&&A<x.length;A++){P.index>A?(D=P,P=null):D=P.sibling;var L=p(w,P,x[A],E);if(L===null){P===null&&(P=D);break}e&&P&&L.alternate===null&&t(w,P),b=s(L,b,A),k===null?I=L:k.sibling=L,k=L,P=D}if(A===x.length)return r(w,P),Lr&&Lu(w,A),I;if(P===null){for(;A<x.length;A++)P=d(w,x[A],E),P!==null&&(b=s(P,b,A),k===null?I=P:k.sibling=P,k=P);return Lr&&Lu(w,A),I}for(P=n(w,P);A<x.length;A++)D=f(P,w,A,x[A],E),D!==null&&(e&&D.alternate!==null&&P.delete(D.key===null?A:D.key),b=s(D,b,A),k===null?I=D:k.sibling=D,k=D);return e&&P.forEach(function(M){return t(w,M)}),Lr&&Lu(w,A),I}function y(w,b,x,E){var I=sg(x);if(typeof I!="function")throw Error(Le(150));if(x=I.call(x),x==null)throw Error(Le(151));for(var k=I=null,P=b,A=b=0,D=null,L=x.next();P!==null&&!L.done;A++,L=x.next()){P.index>A?(D=P,P=null):D=P.sibling;var M=p(w,P,L.value,E);if(M===null){P===null&&(P=D);break}e&&P&&M.alternate===null&&t(w,P),b=s(M,b,A),k===null?I=M:k.sibling=M,k=M,P=D}if(L.done)return r(w,P),Lr&&Lu(w,A),I;if(P===null){for(;!L.done;A++,L=x.next())L=d(w,L.value,E),L!==null&&(b=s(L,b,A),k===null?I=L:k.sibling=L,k=L);return Lr&&Lu(w,A),I}for(P=n(w,P);!L.done;A++,L=x.next())L=f(P,w,A,L.value,E),L!==null&&(e&&L.alternate!==null&&P.delete(L.key===null?A:L.key),b=s(L,b,A),k===null?I=L:k.sibling=L,k=L);return e&&P.forEach(function(T){return t(w,T)}),Lr&&Lu(w,A),I}function C(w,b,x,E){if(typeof x=="object"&&x!==null&&x.type===zh&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case nC:e:{for(var I=x.key,k=b;k!==null;){if(k.key===I){if(I=x.type,I===zh){if(k.tag===7){r(w,k.sibling),b=i(k,x.props.children),b.return=w,w=b;break e}}else if(k.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===hc&&WM(I)===k.type){r(w,k.sibling),b=i(k,x.props),b.ref=ug(w,k,x),b.return=w,w=b;break e}r(w,k);break}else t(w,k);k=k.sibling}x.type===zh?(b=gd(x.props.children,w.mode,E,x.key),b.return=w,w=b):(E=s0(x.type,x.key,x.props,null,w.mode,E),E.ref=ug(w,b,x),E.return=w,w=E)}return o(w);case Hh:e:{for(k=x.key;b!==null;){if(b.key===k)if(b.tag===4&&b.stateNode.containerInfo===x.containerInfo&&b.stateNode.implementation===x.implementation){r(w,b.sibling),b=i(b,x.children||[]),b.return=w,w=b;break e}else{r(w,b);break}else t(w,b);b=b.sibling}b=aP(x,w.mode,E),b.return=w,w=b}return o(w);case hc:return k=x._init,C(w,b,k(x._payload),E)}if(Ag(x))return m(w,b,x,E);if(sg(x))return y(w,b,x,E);fC(w,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,b!==null&&b.tag===6?(r(w,b.sibling),b=i(b,x),b.return=w,w=b):(r(w,b),b=oP(x,w.mode,E),b.return=w,w=b),o(w)):r(w,b)}return C}var Op=bH(!0),SH=bH(!1),X0=hu(null),Z0=null,Xh=null,rD=null;function nD(){rD=Xh=Z0=null}function iD(e){var t=X0.current;Dr(X0),e._currentValue=t}function ZR(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function dp(e,t){Z0=e,rD=Xh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ki=!0),e.firstContext=null)}function to(e){var t=e._currentValue;if(rD!==e)if(e={context:e,memoizedValue:t,next:null},Xh===null){if(Z0===null)throw Error(Le(308));Xh=e,Z0.dependencies={lanes:0,firstContext:e}}else Xh=Xh.next=e;return t}var Zu=null;function sD(e){Zu===null?Zu=[e]:Zu.push(e)}function xH(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,sD(t)):(r.next=i.next,i.next=r),t.interleaved=r,wl(e,n)}function wl(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var pc=!1;function oD(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function EH(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function pl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function jc(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Xt&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,wl(e,r)}return i=n.interleaved,i===null?(t.next=t,sD(n)):(t.next=i.next,i.next=t),n.interleaved=t,wl(e,r)}function JC(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,U_(e,r)}}function KM(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=t:s=s.next=t}else i=s=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function J0(e,t,r,n){var i=e.updateQueue;pc=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,f=a.eventTime;if((n&p)===p){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=e,y=a;switch(p=t,f=r,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(f,d,p);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,p=typeof m=="function"?m.call(f,d,p):m,p==null)break e;d=$r({},d,p);break e;case 2:pc=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else f={eventTime:f,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Id|=o,e.lanes=o,e.memoizedState=d}}function qM(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Le(191,i));i.call(n)}}}var Xv={},Pa=hu(Xv),Em=hu(Xv),Pm=hu(Xv);function Ju(e){if(e===Xv)throw Error(Le(174));return e}function aD(e,t){switch(br(Pm,t),br(Em,e),br(Pa,Xv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:IR(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=IR(t,e)}Dr(Pa),br(Pa,t)}function Fp(){Dr(Pa),Dr(Em),Dr(Pm)}function PH(e){Ju(Pm.current);var t=Ju(Pa.current),r=IR(t,e.type);t!==r&&(br(Em,e),br(Pa,r))}function lD(e){Em.current===e&&(Dr(Pa),Dr(Em))}var Hr=hu(0);function ew(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var eP=[];function cD(){for(var e=0;e<eP.length;e++)eP[e]._workInProgressVersionPrimary=null;eP.length=0}var e0=Ll.ReactCurrentDispatcher,tP=Ll.ReactCurrentBatchConfig,kd=0,zr=null,yn=null,Dn=null,tw=!1,tm=!1,Rm=0,XY=0;function ti(){throw Error(Le(321))}function uD(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ko(e[r],t[r]))return!1;return!0}function dD(e,t,r,n,i,s){if(kd=s,zr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,e0.current=e===null||e.memoizedState===null?tQ:rQ,e=r(n,i),tm){s=0;do{if(tm=!1,Rm=0,25<=s)throw Error(Le(301));s+=1,Dn=yn=null,t.updateQueue=null,e0.current=nQ,e=r(n,i)}while(tm)}if(e0.current=rw,t=yn!==null&&yn.next!==null,kd=0,Dn=yn=zr=null,tw=!1,t)throw Error(Le(300));return e}function hD(){var e=Rm!==0;return Rm=0,e}function fa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?zr.memoizedState=Dn=e:Dn=Dn.next=e,Dn}function ro(){if(yn===null){var e=zr.alternate;e=e!==null?e.memoizedState:null}else e=yn.next;var t=Dn===null?zr.memoizedState:Dn.next;if(t!==null)Dn=t,yn=e;else{if(e===null)throw Error(Le(310));yn=e,e={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},Dn===null?zr.memoizedState=Dn=e:Dn=Dn.next=e}return Dn}function Tm(e,t){return typeof t=="function"?t(e):t}function rP(e){var t=ro(),r=t.queue;if(r===null)throw Error(Le(311));r.lastRenderedReducer=e;var n=yn,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((kd&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=n):l=l.next=d,zr.lanes|=u,Id|=u}c=c.next}while(c!==null&&c!==s);l===null?o=n:l.next=a,Ko(n,t.memoizedState)||(Ki=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do s=i.lane,zr.lanes|=s,Id|=s,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function nP(e){var t=ro(),r=t.queue;if(r===null)throw Error(Le(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Ko(s,t.memoizedState)||(Ki=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function RH(){}function TH(e,t){var r=zr,n=ro(),i=t(),s=!Ko(n.memoizedState,i);if(s&&(n.memoizedState=i,Ki=!0),n=n.queue,pD(DH.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||Dn!==null&&Dn.memoizedState.tag&1){if(r.flags|=2048,Am(9,_H.bind(null,r,n,i,t),void 0,null),Nn===null)throw Error(Le(349));kd&30||AH(r,t,i)}return i}function AH(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=zr.updateQueue,t===null?(t={lastEffect:null,stores:null},zr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function _H(e,t,r,n){t.value=r,t.getSnapshot=n,kH(t)&&IH(e)}function DH(e,t,r){return r(function(){kH(t)&&IH(e)})}function kH(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ko(e,r)}catch{return!0}}function IH(e){var t=wl(e,1);t!==null&&zo(t,e,1,-1)}function YM(e){var t=fa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tm,lastRenderedState:e},t.queue=e,e=e.dispatch=eQ.bind(null,zr,e),[t.memoizedState,e]}function Am(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=zr.updateQueue,t===null?(t={lastEffect:null,stores:null},zr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function NH(){return ro().memoizedState}function t0(e,t,r,n){var i=fa();zr.flags|=e,i.memoizedState=Am(1|t,r,void 0,n===void 0?null:n)}function fS(e,t,r,n){var i=ro();n=n===void 0?null:n;var s=void 0;if(yn!==null){var o=yn.memoizedState;if(s=o.destroy,n!==null&&uD(n,o.deps)){i.memoizedState=Am(t,r,s,n);return}}zr.flags|=e,i.memoizedState=Am(1|t,r,s,n)}function QM(e,t){return t0(8390656,8,e,t)}function pD(e,t){return fS(2048,8,e,t)}function MH(e,t){return fS(4,2,e,t)}function OH(e,t){return fS(4,4,e,t)}function FH(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function LH(e,t,r){return r=r!=null?r.concat([e]):null,fS(4,4,FH.bind(null,t,e),r)}function fD(){}function GH(e,t){var r=ro();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&uD(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function jH(e,t){var r=ro();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&uD(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function BH(e,t,r){return kd&21?(Ko(r,t)||(r=UV(),zr.lanes|=r,Id|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ki=!0),e.memoizedState=r)}function ZY(e,t){var r=cr;cr=r!==0&&4>r?r:4,e(!0);var n=tP.transition;tP.transition={};try{e(!1),t()}finally{cr=r,tP.transition=n}}function VH(){return ro().memoizedState}function JY(e,t,r){var n=Vc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},HH(e))zH(t,r);else if(r=xH(e,t,r,n),r!==null){var i=xi();zo(r,e,n,i),$H(r,t,n)}}function eQ(e,t,r){var n=Vc(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(HH(e))zH(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,Ko(a,o)){var l=t.interleaved;l===null?(i.next=i,sD(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=xH(e,t,i,n),r!==null&&(i=xi(),zo(r,e,n,i),$H(r,t,n))}}function HH(e){var t=e.alternate;return e===zr||t!==null&&t===zr}function zH(e,t){tm=tw=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function $H(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,U_(e,r)}}var rw={readContext:to,useCallback:ti,useContext:ti,useEffect:ti,useImperativeHandle:ti,useInsertionEffect:ti,useLayoutEffect:ti,useMemo:ti,useReducer:ti,useRef:ti,useState:ti,useDebugValue:ti,useDeferredValue:ti,useTransition:ti,useMutableSource:ti,useSyncExternalStore:ti,useId:ti,unstable_isNewReconciler:!1},tQ={readContext:to,useCallback:function(e,t){return fa().memoizedState=[e,t===void 0?null:t],e},useContext:to,useEffect:QM,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,t0(4194308,4,FH.bind(null,t,e),r)},useLayoutEffect:function(e,t){return t0(4194308,4,e,t)},useInsertionEffect:function(e,t){return t0(4,2,e,t)},useMemo:function(e,t){var r=fa();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=fa();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=JY.bind(null,zr,e),[n.memoizedState,e]},useRef:function(e){var t=fa();return e={current:e},t.memoizedState=e},useState:YM,useDebugValue:fD,useDeferredValue:function(e){return fa().memoizedState=e},useTransition:function(){var e=YM(!1),t=e[0];return e=ZY.bind(null,e[1]),fa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=zr,i=fa();if(Lr){if(r===void 0)throw Error(Le(407));r=r()}else{if(r=t(),Nn===null)throw Error(Le(349));kd&30||AH(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,QM(DH.bind(null,n,s,e),[e]),n.flags|=2048,Am(9,_H.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=fa(),t=Nn.identifierPrefix;if(Lr){var r=ol,n=sl;r=(n&~(1<<32-Ho(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Rm++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=XY++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rQ={readContext:to,useCallback:GH,useContext:to,useEffect:pD,useImperativeHandle:LH,useInsertionEffect:MH,useLayoutEffect:OH,useMemo:jH,useReducer:rP,useRef:NH,useState:function(){return rP(Tm)},useDebugValue:fD,useDeferredValue:function(e){var t=ro();return BH(t,yn.memoizedState,e)},useTransition:function(){var e=rP(Tm)[0],t=ro().memoizedState;return[e,t]},useMutableSource:RH,useSyncExternalStore:TH,useId:VH,unstable_isNewReconciler:!1},nQ={readContext:to,useCallback:GH,useContext:to,useEffect:pD,useImperativeHandle:LH,useInsertionEffect:MH,useLayoutEffect:OH,useMemo:jH,useReducer:nP,useRef:NH,useState:function(){return nP(Tm)},useDebugValue:fD,useDeferredValue:function(e){var t=ro();return yn===null?t.memoizedState=e:BH(t,yn.memoizedState,e)},useTransition:function(){var e=nP(Tm)[0],t=ro().memoizedState;return[e,t]},useMutableSource:RH,useSyncExternalStore:TH,useId:VH,unstable_isNewReconciler:!1};function To(e,t){if(e&&e.defaultProps){t=$r({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function JR(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:$r({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var gS={isMounted:function(e){return(e=e._reactInternals)?sh(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=xi(),i=Vc(e),s=pl(n,i);s.payload=t,r!=null&&(s.callback=r),t=jc(e,s,i),t!==null&&(zo(t,e,i,n),JC(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=xi(),i=Vc(e),s=pl(n,i);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=jc(e,s,i),t!==null&&(zo(t,e,i,n),JC(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=xi(),n=Vc(e),i=pl(r,n);i.tag=2,t!=null&&(i.callback=t),t=jc(e,i,n),t!==null&&(zo(t,e,n,r),JC(t,e,n))}};function XM(e,t,r,n,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,o):t.prototype&&t.prototype.isPureReactComponent?!wm(r,n)||!wm(i,s):!0}function UH(e,t,r){var n=!1,i=Xc,s=t.contextType;return typeof s=="object"&&s!==null?s=to(s):(i=ts(t)?_d:li.current,n=t.contextTypes,s=(n=n!=null)?Np(e,i):Xc),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gS,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ZM(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&gS.enqueueReplaceState(t,t.state,null)}function eT(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},oD(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=to(s):(s=ts(t)?_d:li.current,i.context=Np(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(JR(e,t,s,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&gS.enqueueReplaceState(i,i.state,null),J0(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Lp(e,t){try{var r="",n=t;do r+=kq(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function iP(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function tT(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var iQ=typeof WeakMap=="function"?WeakMap:Map;function WH(e,t,r){r=pl(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){iw||(iw=!0,dT=n),tT(e,t)},r}function KH(e,t,r){r=pl(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){tT(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){tT(e,t),typeof n!="function"&&(Bc===null?Bc=new Set([this]):Bc.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function JM(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new iQ;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=yQ.bind(null,e,t,r),t.then(e,e))}function eO(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tO(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=pl(-1,1),t.tag=2,jc(r,t,1))),r.lanes|=1),e)}var sQ=Ll.ReactCurrentOwner,Ki=!1;function mi(e,t,r,n){t.child=e===null?SH(t,null,r,n):Op(t,e.child,r,n)}function rO(e,t,r,n,i){r=r.render;var s=t.ref;return dp(t,i),n=dD(e,t,r,n,s,i),r=hD(),e!==null&&!Ki?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,bl(e,t,i)):(Lr&&r&&J_(t),t.flags|=1,mi(e,t,n,i),t.child)}function nO(e,t,r,n,i){if(e===null){var s=r.type;return typeof s=="function"&&!SD(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,qH(e,t,s,n,i)):(e=s0(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:wm,r(o,n)&&e.ref===t.ref)return bl(e,t,i)}return t.flags|=1,e=Hc(s,n),e.ref=t.ref,e.return=t,t.child=e}function qH(e,t,r,n,i){if(e!==null){var s=e.memoizedProps;if(wm(s,n)&&e.ref===t.ref)if(Ki=!1,t.pendingProps=n=s,(e.lanes&i)!==0)e.flags&131072&&(Ki=!0);else return t.lanes=e.lanes,bl(e,t,i)}return rT(e,t,r,n,i)}function YH(e,t,r){var n=t.pendingProps,i=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},br(Jh,gs),gs|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,br(Jh,gs),gs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,br(Jh,gs),gs|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,br(Jh,gs),gs|=n;return mi(e,t,i,r),t.child}function QH(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function rT(e,t,r,n,i){var s=ts(r)?_d:li.current;return s=Np(t,s),dp(t,i),r=dD(e,t,r,n,s,i),n=hD(),e!==null&&!Ki?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,bl(e,t,i)):(Lr&&n&&J_(t),t.flags|=1,mi(e,t,r,i),t.child)}function iO(e,t,r,n,i){if(ts(r)){var s=!0;q0(t)}else s=!1;if(dp(t,i),t.stateNode===null)r0(e,t),UH(t,r,n),eT(t,r,n,i),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=to(c):(c=ts(r)?_d:li.current,c=Np(t,c));var u=r.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&ZM(t,o,n,c),pc=!1;var p=t.memoizedState;o.state=p,J0(t,n,o,i),l=t.memoizedState,a!==n||p!==l||es.current||pc?(typeof u=="function"&&(JR(t,r,u,n),l=t.memoizedState),(a=pc||XM(t,r,a,n,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,EH(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:To(t.type,a),o.props=c,d=t.pendingProps,p=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=to(l):(l=ts(r)?_d:li.current,l=Np(t,l));var f=r.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&ZM(t,o,n,l),pc=!1,p=t.memoizedState,o.state=p,J0(t,n,o,i);var m=t.memoizedState;a!==d||p!==m||es.current||pc?(typeof f=="function"&&(JR(t,r,f,n),m=t.memoizedState),(c=pc||XM(t,r,c,n,p,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),o.props=n,o.state=m,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return nT(e,t,r,n,s,i)}function nT(e,t,r,n,i,s){QH(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&zM(t,r,!1),bl(e,t,s);n=t.stateNode,sQ.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Op(t,e.child,null,s),t.child=Op(t,null,a,s)):mi(e,t,a,s),t.memoizedState=n.state,i&&zM(t,r,!0),t.child}function XH(e){var t=e.stateNode;t.pendingContext?HM(e,t.pendingContext,t.pendingContext!==t.context):t.context&&HM(e,t.context,!1),aD(e,t.containerInfo)}function sO(e,t,r,n,i){return Mp(),tD(i),t.flags|=256,mi(e,t,r,n),t.child}var iT={dehydrated:null,treeContext:null,retryLane:0};function sT(e){return{baseLanes:e,cachePool:null,transitions:null}}function ZH(e,t,r){var n=t.pendingProps,i=Hr.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),br(Hr,i&1),e===null)return XR(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,s?(n=t.mode,s=t.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=yS(o,n,0,null),e=gd(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=sT(r),t.memoizedState=iT,e):gD(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return oQ(e,t,o,n,a,i,r);if(s){s=n.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Hc(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Hc(a,s):(s=gd(s,o,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,o=e.child.memoizedState,o=o===null?sT(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=iT,n}return s=e.child,e=s.sibling,n=Hc(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function gD(e,t){return t=yS({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function gC(e,t,r,n){return n!==null&&tD(n),Op(t,e.child,null,r),e=gD(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function oQ(e,t,r,n,i,s,o){if(r)return t.flags&256?(t.flags&=-257,n=iP(Error(Le(422))),gC(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=yS({mode:"visible",children:n.children},i,0,null),s=gd(s,i,o,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&Op(t,e.child,null,o),t.child.memoizedState=sT(o),t.memoizedState=iT,s);if(!(t.mode&1))return gC(e,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(Le(419)),n=iP(s,n,void 0),gC(e,t,o,n)}if(a=(o&e.childLanes)!==0,Ki||a){if(n=Nn,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,wl(e,i),zo(n,e,i,-1))}return bD(),n=iP(Error(Le(421))),gC(e,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=CQ.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Ss=Gc(i.nextSibling),Es=t,Lr=!0,Mo=null,e!==null&&(Us[Ws++]=sl,Us[Ws++]=ol,Us[Ws++]=Dd,sl=e.id,ol=e.overflow,Dd=t),t=gD(t,n.children),t.flags|=4096,t)}function oO(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ZR(e.return,t,r)}function sP(e,t,r,n,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function JH(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(mi(e,t,n.children,r),n=Hr.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&oO(e,r,t);else if(e.tag===19)oO(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(br(Hr,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&ew(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),sP(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&ew(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}sP(t,!0,r,null,s);break;case"together":sP(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function r0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function bl(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Id|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Le(153));if(t.child!==null){for(e=t.child,r=Hc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Hc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function aQ(e,t,r){switch(t.tag){case 3:XH(t),Mp();break;case 5:PH(t);break;case 1:ts(t.type)&&q0(t);break;case 4:aD(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;br(X0,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(br(Hr,Hr.current&1),t.flags|=128,null):r&t.child.childLanes?ZH(e,t,r):(br(Hr,Hr.current&1),e=bl(e,t,r),e!==null?e.sibling:null);br(Hr,Hr.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return JH(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),br(Hr,Hr.current),n)break;return null;case 22:case 23:return t.lanes=0,YH(e,t,r)}return bl(e,t,r)}var e4,oT,t4,r4;e4=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};oT=function(){};t4=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Ju(Pa.current);var s=null;switch(r){case"input":i=AR(e,i),n=AR(e,n),s=[];break;case"select":i=$r({},i,{value:void 0}),n=$r({},n,{value:void 0}),s=[];break;case"textarea":i=kR(e,i),n=kR(e,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=W0)}NR(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(pm.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(pm.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Rr("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};r4=function(e,t,r,n){r!==n&&(t.flags|=4)};function dg(e,t){if(!Lr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ri(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function lQ(e,t,r){var n=t.pendingProps;switch(eD(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ri(t),null;case 1:return ts(t.type)&&K0(),ri(t),null;case 3:return n=t.stateNode,Fp(),Dr(es),Dr(li),cD(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(pC(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mo!==null&&(fT(Mo),Mo=null))),oT(e,t),ri(t),null;case 5:lD(t);var i=Ju(Pm.current);if(r=t.type,e!==null&&t.stateNode!=null)t4(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Le(166));return ri(t),null}if(e=Ju(Pa.current),pC(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[ya]=t,n[xm]=s,e=(t.mode&1)!==0,r){case"dialog":Rr("cancel",n),Rr("close",n);break;case"iframe":case"object":case"embed":Rr("load",n);break;case"video":case"audio":for(i=0;i<Dg.length;i++)Rr(Dg[i],n);break;case"source":Rr("error",n);break;case"img":case"image":case"link":Rr("error",n),Rr("load",n);break;case"details":Rr("toggle",n);break;case"input":gM(n,s),Rr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Rr("invalid",n);break;case"textarea":vM(n,s),Rr("invalid",n)}NR(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&hC(n.textContent,a,e),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&hC(n.textContent,a,e),i=["children",""+a]):pm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Rr("scroll",n)}switch(r){case"input":iC(n),mM(n,s,!0);break;case"textarea":iC(n),yM(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=W0)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=DV(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ya]=t,e[xm]=n,e4(e,t,!1,!1),t.stateNode=e;e:{switch(o=MR(r,n),r){case"dialog":Rr("cancel",e),Rr("close",e),i=n;break;case"iframe":case"object":case"embed":Rr("load",e),i=n;break;case"video":case"audio":for(i=0;i<Dg.length;i++)Rr(Dg[i],e);i=n;break;case"source":Rr("error",e),i=n;break;case"img":case"image":case"link":Rr("error",e),Rr("load",e),i=n;break;case"details":Rr("toggle",e),i=n;break;case"input":gM(e,n),i=AR(e,n),Rr("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=$r({},n,{value:void 0}),Rr("invalid",e);break;case"textarea":vM(e,n),i=kR(e,n),Rr("invalid",e);break;default:i=n}NR(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?NV(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&kV(e,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&fm(e,l):typeof l=="number"&&fm(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(pm.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Rr("scroll",e):l!=null&&j_(e,s,l,o))}switch(r){case"input":iC(e),mM(e,n,!1);break;case"textarea":iC(e),yM(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Qc(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?ap(e,!!n.multiple,s,!1):n.defaultValue!=null&&ap(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=W0)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ri(t),null;case 6:if(e&&t.stateNode!=null)r4(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Le(166));if(r=Ju(Pm.current),Ju(Pa.current),pC(t)){if(n=t.stateNode,r=t.memoizedProps,n[ya]=t,(s=n.nodeValue!==r)&&(e=Es,e!==null))switch(e.tag){case 3:hC(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hC(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ya]=t,t.stateNode=n}return ri(t),null;case 13:if(Dr(Hr),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Lr&&Ss!==null&&t.mode&1&&!(t.flags&128))wH(),Mp(),t.flags|=98560,s=!1;else if(s=pC(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(Le(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Le(317));s[ya]=t}else Mp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ri(t),s=!1}else Mo!==null&&(fT(Mo),Mo=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Hr.current&1?bn===0&&(bn=3):bD())),t.updateQueue!==null&&(t.flags|=4),ri(t),null);case 4:return Fp(),oT(e,t),e===null&&bm(t.stateNode.containerInfo),ri(t),null;case 10:return iD(t.type._context),ri(t),null;case 17:return ts(t.type)&&K0(),ri(t),null;case 19:if(Dr(Hr),s=t.memoizedState,s===null)return ri(t),null;if(n=(t.flags&128)!==0,o=s.rendering,o===null)if(n)dg(s,!1);else{if(bn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ew(e),o!==null){for(t.flags|=128,dg(s,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return br(Hr,Hr.current&1|2),t.child}e=e.sibling}s.tail!==null&&nn()>Gp&&(t.flags|=128,n=!0,dg(s,!1),t.lanes=4194304)}else{if(!n)if(e=ew(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),dg(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Lr)return ri(t),null}else 2*nn()-s.renderingStartTime>Gp&&r!==1073741824&&(t.flags|=128,n=!0,dg(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=nn(),t.sibling=null,r=Hr.current,br(Hr,n?r&1|2:r&1),t):(ri(t),null);case 22:case 23:return wD(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?gs&1073741824&&(ri(t),t.subtreeFlags&6&&(t.flags|=8192)):ri(t),null;case 24:return null;case 25:return null}throw Error(Le(156,t.tag))}function cQ(e,t){switch(eD(t),t.tag){case 1:return ts(t.type)&&K0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fp(),Dr(es),Dr(li),cD(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return lD(t),null;case 13:if(Dr(Hr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Le(340));Mp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Dr(Hr),null;case 4:return Fp(),null;case 10:return iD(t.type._context),null;case 22:case 23:return wD(),null;case 24:return null;default:return null}}var mC=!1,ii=!1,uQ=typeof WeakSet=="function"?WeakSet:Set,et=null;function Zh(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Qr(e,t,n)}else r.current=null}function aT(e,t,r){try{r()}catch(n){Qr(e,t,n)}}var aO=!1;function dQ(e,t){if($R=z0,e=aH(),Z_(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=e,p=null;t:for(;;){for(var f;d!==r||i!==0&&d.nodeType!==3||(a=o+i),d!==s||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)p=d,d=f;for(;;){if(d===e)break t;if(p===r&&++c===i&&(a=o),p===s&&++u===n&&(l=o),(f=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=f}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(UR={focusedElem:e,selectionRange:r},z0=!1,et=t;et!==null;)if(t=et,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,et=e;else for(;et!==null;){t=et;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,C=m.memoizedState,w=t.stateNode,b=w.getSnapshotBeforeUpdate(t.elementType===t.type?y:To(t.type,y),C);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Le(163))}}catch(E){Qr(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,et=e;break}et=t.return}return m=aO,aO=!1,m}function rm(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&aT(t,r,s)}i=i.next}while(i!==n)}}function mS(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function lT(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function n4(e){var t=e.alternate;t!==null&&(e.alternate=null,n4(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ya],delete t[xm],delete t[qR],delete t[KY],delete t[qY])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function i4(e){return e.tag===5||e.tag===3||e.tag===4}function lO(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||i4(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cT(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=W0));else if(n!==4&&(e=e.child,e!==null))for(cT(e,t,r),e=e.sibling;e!==null;)cT(e,t,r),e=e.sibling}function uT(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(uT(e,t,r),e=e.sibling;e!==null;)uT(e,t,r),e=e.sibling}var Hn=null,ko=!1;function tc(e,t,r){for(r=r.child;r!==null;)s4(e,t,r),r=r.sibling}function s4(e,t,r){if(Ea&&typeof Ea.onCommitFiberUnmount=="function")try{Ea.onCommitFiberUnmount(lS,r)}catch{}switch(r.tag){case 5:ii||Zh(r,t);case 6:var n=Hn,i=ko;Hn=null,tc(e,t,r),Hn=n,ko=i,Hn!==null&&(ko?(e=Hn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Hn.removeChild(r.stateNode));break;case 18:Hn!==null&&(ko?(e=Hn,r=r.stateNode,e.nodeType===8?ZE(e.parentNode,r):e.nodeType===1&&ZE(e,r),ym(e)):ZE(Hn,r.stateNode));break;case 4:n=Hn,i=ko,Hn=r.stateNode.containerInfo,ko=!0,tc(e,t,r),Hn=n,ko=i;break;case 0:case 11:case 14:case 15:if(!ii&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&aT(r,t,o),i=i.next}while(i!==n)}tc(e,t,r);break;case 1:if(!ii&&(Zh(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Qr(r,t,a)}tc(e,t,r);break;case 21:tc(e,t,r);break;case 22:r.mode&1?(ii=(n=ii)||r.memoizedState!==null,tc(e,t,r),ii=n):tc(e,t,r);break;default:tc(e,t,r)}}function cO(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new uQ),t.forEach(function(n){var i=wQ.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function So(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Hn=a.stateNode,ko=!1;break e;case 3:Hn=a.stateNode.containerInfo,ko=!0;break e;case 4:Hn=a.stateNode.containerInfo,ko=!0;break e}a=a.return}if(Hn===null)throw Error(Le(160));s4(s,o,i),Hn=null,ko=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Qr(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)o4(t,e),t=t.sibling}function o4(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(So(t,e),ia(e),n&4){try{rm(3,e,e.return),mS(3,e)}catch(y){Qr(e,e.return,y)}try{rm(5,e,e.return)}catch(y){Qr(e,e.return,y)}}break;case 1:So(t,e),ia(e),n&512&&r!==null&&Zh(r,r.return);break;case 5:if(So(t,e),ia(e),n&512&&r!==null&&Zh(r,r.return),e.flags&32){var i=e.stateNode;try{fm(i,"")}catch(y){Qr(e,e.return,y)}}if(n&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&AV(i,s),MR(a,o);var c=MR(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?NV(i,d):u==="dangerouslySetInnerHTML"?kV(i,d):u==="children"?fm(i,d):j_(i,u,d,c)}switch(a){case"input":_R(i,s);break;case"textarea":_V(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?ap(i,!!s.multiple,f,!1):p!==!!s.multiple&&(s.defaultValue!=null?ap(i,!!s.multiple,s.defaultValue,!0):ap(i,!!s.multiple,s.multiple?[]:"",!1))}i[xm]=s}catch(y){Qr(e,e.return,y)}}break;case 6:if(So(t,e),ia(e),n&4){if(e.stateNode===null)throw Error(Le(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(y){Qr(e,e.return,y)}}break;case 3:if(So(t,e),ia(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ym(t.containerInfo)}catch(y){Qr(e,e.return,y)}break;case 4:So(t,e),ia(e);break;case 13:So(t,e),ia(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(yD=nn())),n&4&&cO(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(ii=(c=ii)||u,So(t,e),ii=c):So(t,e),ia(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(et=e,u=e.child;u!==null;){for(d=et=u;et!==null;){switch(p=et,f=p.child,p.tag){case 0:case 11:case 14:case 15:rm(4,p,p.return);break;case 1:Zh(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(y){Qr(n,r,y)}}break;case 5:Zh(p,p.return);break;case 22:if(p.memoizedState!==null){dO(d);continue}}f!==null?(f.return=p,et=f):dO(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=IV("display",o))}catch(y){Qr(e,e.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){Qr(e,e.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:So(t,e),ia(e),n&4&&cO(e);break;case 21:break;default:So(t,e),ia(e)}}function ia(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(i4(r)){var n=r;break e}r=r.return}throw Error(Le(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(fm(i,""),n.flags&=-33);var s=lO(e);uT(e,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=lO(e);cT(e,a,o);break;default:throw Error(Le(161))}}catch(l){Qr(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hQ(e,t,r){et=e,a4(e)}function a4(e,t,r){for(var n=(e.mode&1)!==0;et!==null;){var i=et,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||mC;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ii;a=mC;var c=ii;if(mC=o,(ii=l)&&!c)for(et=i;et!==null;)o=et,l=o.child,o.tag===22&&o.memoizedState!==null?hO(i):l!==null?(l.return=o,et=l):hO(i);for(;s!==null;)et=s,a4(s),s=s.sibling;et=i,mC=a,ii=c}uO(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,et=s):uO(e)}}function uO(e){for(;et!==null;){var t=et;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ii||mS(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ii)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:To(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&qM(t,s,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}qM(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&ym(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Le(163))}ii||t.flags&512&&lT(t)}catch(p){Qr(t,t.return,p)}}if(t===e){et=null;break}if(r=t.sibling,r!==null){r.return=t.return,et=r;break}et=t.return}}function dO(e){for(;et!==null;){var t=et;if(t===e){et=null;break}var r=t.sibling;if(r!==null){r.return=t.return,et=r;break}et=t.return}}function hO(e){for(;et!==null;){var t=et;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{mS(4,t)}catch(l){Qr(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){Qr(t,i,l)}}var s=t.return;try{lT(t)}catch(l){Qr(t,s,l)}break;case 5:var o=t.return;try{lT(t)}catch(l){Qr(t,o,l)}}}catch(l){Qr(t,t.return,l)}if(t===e){et=null;break}var a=t.sibling;if(a!==null){a.return=t.return,et=a;break}et=t.return}}var pQ=Math.ceil,nw=Ll.ReactCurrentDispatcher,mD=Ll.ReactCurrentOwner,Zs=Ll.ReactCurrentBatchConfig,Xt=0,Nn=null,dn=null,Un=0,gs=0,Jh=hu(0),bn=0,_m=null,Id=0,vS=0,vD=0,nm=null,$i=null,yD=0,Gp=1/0,Za=null,iw=!1,dT=null,Bc=null,vC=!1,kc=null,sw=0,im=0,hT=null,n0=-1,i0=0;function xi(){return Xt&6?nn():n0!==-1?n0:n0=nn()}function Vc(e){return e.mode&1?Xt&2&&Un!==0?Un&-Un:QY.transition!==null?(i0===0&&(i0=UV()),i0):(e=cr,e!==0||(e=window.event,e=e===void 0?16:ZV(e.type)),e):1}function zo(e,t,r,n){if(50<im)throw im=0,hT=null,Error(Le(185));qv(e,r,n),(!(Xt&2)||e!==Nn)&&(e===Nn&&(!(Xt&2)&&(vS|=r),bn===4&&vc(e,Un)),rs(e,n),r===1&&Xt===0&&!(t.mode&1)&&(Gp=nn()+500,pS&&pu()))}function rs(e,t){var r=e.callbackNode;Qq(e,t);var n=H0(e,e===Nn?Un:0);if(n===0)r!==null&&bM(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&bM(r),t===1)e.tag===0?YY(pO.bind(null,e)):vH(pO.bind(null,e)),UY(function(){!(Xt&6)&&pu()}),r=null;else{switch(WV(n)){case 1:r=$_;break;case 4:r=zV;break;case 16:r=V0;break;case 536870912:r=$V;break;default:r=V0}r=g4(r,l4.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function l4(e,t){if(n0=-1,i0=0,Xt&6)throw Error(Le(327));var r=e.callbackNode;if(hp()&&e.callbackNode!==r)return null;var n=H0(e,e===Nn?Un:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ow(e,n);else{t=n;var i=Xt;Xt|=2;var s=u4();(Nn!==e||Un!==t)&&(Za=null,Gp=nn()+500,fd(e,t));do try{mQ();break}catch(a){c4(e,a)}while(!0);nD(),nw.current=s,Xt=i,dn!==null?t=0:(Nn=null,Un=0,t=bn)}if(t!==0){if(t===2&&(i=jR(e),i!==0&&(n=i,t=pT(e,i))),t===1)throw r=_m,fd(e,0),vc(e,n),rs(e,nn()),r;if(t===6)vc(e,n);else{if(i=e.current.alternate,!(n&30)&&!fQ(i)&&(t=ow(e,n),t===2&&(s=jR(e),s!==0&&(n=s,t=pT(e,s))),t===1))throw r=_m,fd(e,0),vc(e,n),rs(e,nn()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(Le(345));case 2:Gu(e,$i,Za);break;case 3:if(vc(e,n),(n&130023424)===n&&(t=yD+500-nn(),10<t)){if(H0(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){xi(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=KR(Gu.bind(null,e,$i,Za),t);break}Gu(e,$i,Za);break;case 4:if(vc(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-Ho(n);s=1<<o,o=t[o],o>i&&(i=o),n&=~s}if(n=i,n=nn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*pQ(n/1960))-n,10<n){e.timeoutHandle=KR(Gu.bind(null,e,$i,Za),n);break}Gu(e,$i,Za);break;case 5:Gu(e,$i,Za);break;default:throw Error(Le(329))}}}return rs(e,nn()),e.callbackNode===r?l4.bind(null,e):null}function pT(e,t){var r=nm;return e.current.memoizedState.isDehydrated&&(fd(e,t).flags|=256),e=ow(e,t),e!==2&&(t=$i,$i=r,t!==null&&fT(t)),e}function fT(e){$i===null?$i=e:$i.push.apply($i,e)}function fQ(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Ko(s(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vc(e,t){for(t&=~vD,t&=~vS,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ho(t),n=1<<r;e[r]=-1,t&=~n}}function pO(e){if(Xt&6)throw Error(Le(327));hp();var t=H0(e,0);if(!(t&1))return rs(e,nn()),null;var r=ow(e,t);if(e.tag!==0&&r===2){var n=jR(e);n!==0&&(t=n,r=pT(e,n))}if(r===1)throw r=_m,fd(e,0),vc(e,t),rs(e,nn()),r;if(r===6)throw Error(Le(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gu(e,$i,Za),rs(e,nn()),null}function CD(e,t){var r=Xt;Xt|=1;try{return e(t)}finally{Xt=r,Xt===0&&(Gp=nn()+500,pS&&pu())}}function Nd(e){kc!==null&&kc.tag===0&&!(Xt&6)&&hp();var t=Xt;Xt|=1;var r=Zs.transition,n=cr;try{if(Zs.transition=null,cr=1,e)return e()}finally{cr=n,Zs.transition=r,Xt=t,!(Xt&6)&&pu()}}function wD(){gs=Jh.current,Dr(Jh)}function fd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,$Y(r)),dn!==null)for(r=dn.return;r!==null;){var n=r;switch(eD(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&K0();break;case 3:Fp(),Dr(es),Dr(li),cD();break;case 5:lD(n);break;case 4:Fp();break;case 13:Dr(Hr);break;case 19:Dr(Hr);break;case 10:iD(n.type._context);break;case 22:case 23:wD()}r=r.return}if(Nn=e,dn=e=Hc(e.current,null),Un=gs=t,bn=0,_m=null,vD=vS=Id=0,$i=nm=null,Zu!==null){for(t=0;t<Zu.length;t++)if(r=Zu[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Zu=null}return e}function c4(e,t){do{var r=dn;try{if(nD(),e0.current=rw,tw){for(var n=zr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}tw=!1}if(kd=0,Dn=yn=zr=null,tm=!1,Rm=0,mD.current=null,r===null||r.return===null){bn=1,_m=t,dn=null;break}e:{var s=e,o=r.return,a=r,l=t;if(t=Un,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=eO(o);if(f!==null){f.flags&=-257,tO(f,o,a,s,t),f.mode&1&&JM(s,c,t),t=f,l=c;var m=t.updateQueue;if(m===null){var y=new Set;y.add(l),t.updateQueue=y}else m.add(l);break e}else{if(!(t&1)){JM(s,c,t),bD();break e}l=Error(Le(426))}}else if(Lr&&a.mode&1){var C=eO(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),tO(C,o,a,s,t),tD(Lp(l,a));break e}}s=l=Lp(l,a),bn!==4&&(bn=2),nm===null?nm=[s]:nm.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var w=WH(s,l,t);KM(s,w);break e;case 1:a=l;var b=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Bc===null||!Bc.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var E=KH(s,a,t);KM(s,E);break e}}s=s.return}while(s!==null)}h4(r)}catch(I){t=I,dn===r&&r!==null&&(dn=r=r.return);continue}break}while(!0)}function u4(){var e=nw.current;return nw.current=rw,e===null?rw:e}function bD(){(bn===0||bn===3||bn===2)&&(bn=4),Nn===null||!(Id&268435455)&&!(vS&268435455)||vc(Nn,Un)}function ow(e,t){var r=Xt;Xt|=2;var n=u4();(Nn!==e||Un!==t)&&(Za=null,fd(e,t));do try{gQ();break}catch(i){c4(e,i)}while(!0);if(nD(),Xt=r,nw.current=n,dn!==null)throw Error(Le(261));return Nn=null,Un=0,bn}function gQ(){for(;dn!==null;)d4(dn)}function mQ(){for(;dn!==null&&!Vq();)d4(dn)}function d4(e){var t=f4(e.alternate,e,gs);e.memoizedProps=e.pendingProps,t===null?h4(e):dn=t,mD.current=null}function h4(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=cQ(r,t),r!==null){r.flags&=32767,dn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{bn=6,dn=null;return}}else if(r=lQ(r,t,gs),r!==null){dn=r;return}if(t=t.sibling,t!==null){dn=t;return}dn=t=e}while(t!==null);bn===0&&(bn=5)}function Gu(e,t,r){var n=cr,i=Zs.transition;try{Zs.transition=null,cr=1,vQ(e,t,r,n)}finally{Zs.transition=i,cr=n}return null}function vQ(e,t,r,n){do hp();while(kc!==null);if(Xt&6)throw Error(Le(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Le(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(Xq(e,s),e===Nn&&(dn=Nn=null,Un=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||vC||(vC=!0,g4(V0,function(){return hp(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Zs.transition,Zs.transition=null;var o=cr;cr=1;var a=Xt;Xt|=4,mD.current=null,dQ(e,r),o4(r,e),LY(UR),z0=!!$R,UR=$R=null,e.current=r,hQ(r),Hq(),Xt=a,cr=o,Zs.transition=s}else e.current=r;if(vC&&(vC=!1,kc=e,sw=i),s=e.pendingLanes,s===0&&(Bc=null),Uq(r.stateNode),rs(e,nn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(iw)throw iw=!1,e=dT,dT=null,e;return sw&1&&e.tag!==0&&hp(),s=e.pendingLanes,s&1?e===hT?im++:(im=0,hT=e):im=0,pu(),null}function hp(){if(kc!==null){var e=WV(sw),t=Zs.transition,r=cr;try{if(Zs.transition=null,cr=16>e?16:e,kc===null)var n=!1;else{if(e=kc,kc=null,sw=0,Xt&6)throw Error(Le(331));var i=Xt;for(Xt|=4,et=e.current;et!==null;){var s=et,o=s.child;if(et.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(et=c;et!==null;){var u=et;switch(u.tag){case 0:case 11:case 15:rm(8,u,s)}var d=u.child;if(d!==null)d.return=u,et=d;else for(;et!==null;){u=et;var p=u.sibling,f=u.return;if(n4(u),u===c){et=null;break}if(p!==null){p.return=f,et=p;break}et=f}}}var m=s.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var C=y.sibling;y.sibling=null,y=C}while(y!==null)}}et=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,et=o;else e:for(;et!==null;){if(s=et,s.flags&2048)switch(s.tag){case 0:case 11:case 15:rm(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,et=w;break e}et=s.return}}var b=e.current;for(et=b;et!==null;){o=et;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,et=x;else e:for(o=b;et!==null;){if(a=et,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:mS(9,a)}}catch(I){Qr(a,a.return,I)}if(a===o){et=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,et=E;break e}et=a.return}}if(Xt=i,pu(),Ea&&typeof Ea.onPostCommitFiberRoot=="function")try{Ea.onPostCommitFiberRoot(lS,e)}catch{}n=!0}return n}finally{cr=r,Zs.transition=t}}return!1}function fO(e,t,r){t=Lp(r,t),t=WH(e,t,1),e=jc(e,t,1),t=xi(),e!==null&&(qv(e,1,t),rs(e,t))}function Qr(e,t,r){if(e.tag===3)fO(e,e,r);else for(;t!==null;){if(t.tag===3){fO(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Bc===null||!Bc.has(n))){e=Lp(r,e),e=KH(t,e,1),t=jc(t,e,1),e=xi(),t!==null&&(qv(t,1,e),rs(t,e));break}}t=t.return}}function yQ(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=xi(),e.pingedLanes|=e.suspendedLanes&r,Nn===e&&(Un&r)===r&&(bn===4||bn===3&&(Un&130023424)===Un&&500>nn()-yD?fd(e,0):vD|=r),rs(e,t)}function p4(e,t){t===0&&(e.mode&1?(t=aC,aC<<=1,!(aC&130023424)&&(aC=4194304)):t=1);var r=xi();e=wl(e,t),e!==null&&(qv(e,t,r),rs(e,r))}function CQ(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),p4(e,r)}function wQ(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Le(314))}n!==null&&n.delete(t),p4(e,r)}var f4;f4=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||es.current)Ki=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ki=!1,aQ(e,t,r);Ki=!!(e.flags&131072)}else Ki=!1,Lr&&t.flags&1048576&&yH(t,Q0,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;r0(e,t),e=t.pendingProps;var i=Np(t,li.current);dp(t,r),i=dD(null,t,n,e,i,r);var s=hD();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ts(n)?(s=!0,q0(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,oD(t),i.updater=gS,t.stateNode=i,i._reactInternals=t,eT(t,n,e,r),t=nT(null,t,n,!0,s,r)):(t.tag=0,Lr&&s&&J_(t),mi(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(r0(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=SQ(n),e=To(n,e),i){case 0:t=rT(null,t,n,e,r);break e;case 1:t=iO(null,t,n,e,r);break e;case 11:t=rO(null,t,n,e,r);break e;case 14:t=nO(null,t,n,To(n.type,e),r);break e}throw Error(Le(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:To(n,i),rT(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:To(n,i),iO(e,t,n,i,r);case 3:e:{if(XH(t),e===null)throw Error(Le(387));n=t.pendingProps,s=t.memoizedState,i=s.element,EH(e,t),J0(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Lp(Error(Le(423)),t),t=sO(e,t,n,r,i);break e}else if(n!==i){i=Lp(Error(Le(424)),t),t=sO(e,t,n,r,i);break e}else for(Ss=Gc(t.stateNode.containerInfo.firstChild),Es=t,Lr=!0,Mo=null,r=SH(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Mp(),n===i){t=bl(e,t,r);break e}mi(e,t,n,r)}t=t.child}return t;case 5:return PH(t),e===null&&XR(t),n=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,WR(n,i)?o=null:s!==null&&WR(n,s)&&(t.flags|=32),QH(e,t),mi(e,t,o,r),t.child;case 6:return e===null&&XR(t),null;case 13:return ZH(e,t,r);case 4:return aD(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Op(t,null,n,r):mi(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:To(n,i),rO(e,t,n,i,r);case 7:return mi(e,t,t.pendingProps,r),t.child;case 8:return mi(e,t,t.pendingProps.children,r),t.child;case 12:return mi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,br(X0,n._currentValue),n._currentValue=o,s!==null)if(Ko(s.value,o)){if(s.children===i.children&&!es.current){t=bl(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=pl(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),ZR(s.return,r,t),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Le(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),ZR(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}mi(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,dp(t,r),i=to(i),n=n(i),t.flags|=1,mi(e,t,n,r),t.child;case 14:return n=t.type,i=To(n,t.pendingProps),i=To(n.type,i),nO(e,t,n,i,r);case 15:return qH(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:To(n,i),r0(e,t),t.tag=1,ts(n)?(e=!0,q0(t)):e=!1,dp(t,r),UH(t,n,i),eT(t,n,i,r),nT(null,t,n,!0,e,r);case 19:return JH(e,t,r);case 22:return YH(e,t,r)}throw Error(Le(156,t.tag))};function g4(e,t){return HV(e,t)}function bQ(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qs(e,t,r,n){return new bQ(e,t,r,n)}function SD(e){return e=e.prototype,!(!e||!e.isReactComponent)}function SQ(e){if(typeof e=="function")return SD(e)?1:0;if(e!=null){if(e=e.$$typeof,e===V_)return 11;if(e===H_)return 14}return 2}function Hc(e,t){var r=e.alternate;return r===null?(r=qs(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function s0(e,t,r,n,i,s){var o=2;if(n=e,typeof e=="function")SD(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case zh:return gd(r.children,i,s,t);case B_:o=8,i|=8;break;case ER:return e=qs(12,r,t,i|2),e.elementType=ER,e.lanes=s,e;case PR:return e=qs(13,r,t,i),e.elementType=PR,e.lanes=s,e;case RR:return e=qs(19,r,t,i),e.elementType=RR,e.lanes=s,e;case PV:return yS(r,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xV:o=10;break e;case EV:o=9;break e;case V_:o=11;break e;case H_:o=14;break e;case hc:o=16,n=null;break e}throw Error(Le(130,e==null?e:typeof e,""))}return t=qs(o,r,t,i),t.elementType=e,t.type=n,t.lanes=s,t}function gd(e,t,r,n){return e=qs(7,e,n,t),e.lanes=r,e}function yS(e,t,r,n){return e=qs(22,e,n,t),e.elementType=PV,e.lanes=r,e.stateNode={isHidden:!1},e}function oP(e,t,r){return e=qs(6,e,null,t),e.lanes=r,e}function aP(e,t,r){return t=qs(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function xQ(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=VE(0),this.expirationTimes=VE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=VE(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function xD(e,t,r,n,i,s,o,a,l){return e=new xQ(e,t,r,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=qs(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},oD(s),e}function EQ(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hh,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function m4(e){if(!e)return Xc;e=e._reactInternals;e:{if(sh(e)!==e||e.tag!==1)throw Error(Le(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ts(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Le(171))}if(e.tag===1){var r=e.type;if(ts(r))return mH(e,r,t)}return t}function v4(e,t,r,n,i,s,o,a,l){return e=xD(r,n,!0,e,i,s,o,a,l),e.context=m4(null),r=e.current,n=xi(),i=Vc(r),s=pl(n,i),s.callback=t??null,jc(r,s,i),e.current.lanes=i,qv(e,i,n),rs(e,n),e}function CS(e,t,r,n){var i=t.current,s=xi(),o=Vc(i);return r=m4(r),t.context===null?t.context=r:t.pendingContext=r,t=pl(s,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=jc(i,t,o),e!==null&&(zo(e,i,o,s),JC(e,i,o)),o}function aw(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function gO(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ED(e,t){gO(e,t),(e=e.alternate)&&gO(e,t)}function PQ(){return null}var y4=typeof reportError=="function"?reportError:function(e){console.error(e)};function PD(e){this._internalRoot=e}wS.prototype.render=PD.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Le(409));CS(e,t,null,null)};wS.prototype.unmount=PD.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Nd(function(){CS(null,e,null,null)}),t[Cl]=null}};function wS(e){this._internalRoot=e}wS.prototype.unstable_scheduleHydration=function(e){if(e){var t=YV();e={blockedOn:null,target:e,priority:t};for(var r=0;r<mc.length&&t!==0&&t<mc[r].priority;r++);mc.splice(r,0,e),r===0&&XV(e)}};function RD(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mO(){}function RQ(e,t,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=aw(o);s.call(c)}}var o=v4(t,n,e,0,null,!1,!1,"",mO);return e._reactRootContainer=o,e[Cl]=o.current,bm(e.nodeType===8?e.parentNode:e),Nd(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=aw(l);a.call(c)}}var l=xD(e,0,!1,null,null,!1,!1,"",mO);return e._reactRootContainer=l,e[Cl]=l.current,bm(e.nodeType===8?e.parentNode:e),Nd(function(){CS(t,l,r,n)}),l}function SS(e,t,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=aw(o);a.call(l)}}CS(t,o,e,i)}else o=RQ(r,t,e,i,n);return aw(o)}KV=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=_g(t.pendingLanes);r!==0&&(U_(t,r|1),rs(t,nn()),!(Xt&6)&&(Gp=nn()+500,pu()))}break;case 13:Nd(function(){var n=wl(e,1);if(n!==null){var i=xi();zo(n,e,1,i)}}),ED(e,1)}};W_=function(e){if(e.tag===13){var t=wl(e,134217728);if(t!==null){var r=xi();zo(t,e,134217728,r)}ED(e,134217728)}};qV=function(e){if(e.tag===13){var t=Vc(e),r=wl(e,t);if(r!==null){var n=xi();zo(r,e,t,n)}ED(e,t)}};YV=function(){return cr};QV=function(e,t){var r=cr;try{return cr=e,t()}finally{cr=r}};FR=function(e,t,r){switch(t){case"input":if(_R(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=hS(n);if(!i)throw Error(Le(90));TV(n),_R(n,i)}}}break;case"textarea":_V(e,r);break;case"select":t=r.value,t!=null&&ap(e,!!r.multiple,t,!1)}};FV=CD;LV=Nd;var TQ={usingClientEntryPoint:!1,Events:[Qv,Kh,hS,MV,OV,CD]},hg={findFiberByHostInstance:Xu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AQ={bundleType:hg.bundleType,version:hg.version,rendererPackageName:hg.rendererPackageName,rendererConfig:hg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ll.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=BV(e),e===null?null:e.stateNode},findFiberByHostInstance:hg.findFiberByHostInstance||PQ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yC.isDisabled&&yC.supportsFiber)try{lS=yC.inject(AQ),Ea=yC}catch{}}ks.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TQ;ks.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!RD(t))throw Error(Le(200));return EQ(e,t,null,r)};ks.createRoot=function(e,t){if(!RD(e))throw Error(Le(299));var r=!1,n="",i=y4;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=xD(e,1,!1,null,null,r,!1,n,i),e[Cl]=t.current,bm(e.nodeType===8?e.parentNode:e),new PD(t)};ks.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Le(188)):(e=Object.keys(e).join(","),Error(Le(268,e)));return e=BV(t),e=e===null?null:e.stateNode,e};ks.flushSync=function(e){return Nd(e)};ks.hydrate=function(e,t,r){if(!bS(t))throw Error(Le(200));return SS(null,e,t,!0,r)};ks.hydrateRoot=function(e,t,r){if(!RD(e))throw Error(Le(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=y4;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=v4(t,null,e,1,r??null,i,!1,s,o),e[Cl]=t.current,bm(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new wS(t)};ks.render=function(e,t,r){if(!bS(t))throw Error(Le(200));return SS(null,e,t,!1,r)};ks.unmountComponentAtNode=function(e){if(!bS(e))throw Error(Le(40));return e._reactRootContainer?(Nd(function(){SS(null,null,e,!1,function(){e._reactRootContainer=null,e[Cl]=null})}),!0):!1};ks.unstable_batchedUpdates=CD;ks.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!bS(r))throw Error(Le(200));if(e==null||e._reactInternals===void 0)throw Error(Le(38));return SS(e,t,r,!1,n)};ks.version="18.3.1-next-f1338f8080-20240426";function C4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(C4)}catch(e){console.error(e)}}C4(),CV.exports=ks;var oh=CV.exports;const gT=lo(oh);var vO=oh;SR.createRoot=vO.createRoot,SR.hydrateRoot=vO.hydrateRoot;var xS=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_Q={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Ec,I_,JB,DQ=(JB=class{constructor(){$t(this,Ec,_Q);$t(this,I_,!1)}setTimeoutProvider(e){Tt(this,Ec,e)}setTimeout(e,t){return Ee(this,Ec).setTimeout(e,t)}clearTimeout(e){Ee(this,Ec).clearTimeout(e)}setInterval(e,t){return Ee(this,Ec).setInterval(e,t)}clearInterval(e){Ee(this,Ec).clearInterval(e)}},Ec=new WeakMap,I_=new WeakMap,JB),mT=new DQ;function kQ(e){setTimeout(e,0)}var ES=typeof window>"u"||"Deno"in globalThis;function Ao(){}function IQ(e,t){return typeof e=="function"?e(t):e}function NQ(e){return typeof e=="number"&&e>=0&&e!==1/0}function MQ(e,t){return Math.max(e+(t||0)-Date.now(),0)}function vT(e,t){return typeof e=="function"?e(t):e}function OQ(e,t){return typeof e=="function"?e(t):e}function yO(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=e;if(o){if(n){if(t.queryHash!==TD(o,t.options))return!1}else if(!km(t.queryKey,o))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||i&&i!==t.state.fetchStatus||s&&!s(t))}function CO(e,t){const{exact:r,status:n,predicate:i,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(r){if(Dm(t.options.mutationKey)!==Dm(s))return!1}else if(!km(t.options.mutationKey,s))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function TD(e,t){return((t==null?void 0:t.queryKeyHashFn)||Dm)(e)}function Dm(e){return JSON.stringify(e,(t,r)=>yT(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function km(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>km(e[r],t[r])):!1}var FQ=Object.prototype.hasOwnProperty;function w4(e,t,r=0){if(e===t)return e;if(r>500)return t;const n=wO(e)&&wO(t);if(!n&&!(yT(e)&&yT(t)))return t;const s=(n?e:Object.keys(e)).length,o=n?t:Object.keys(t),a=o.length,l=n?new Array(a):{};let c=0;for(let u=0;u<a;u++){const d=n?u:o[u],p=e[d],f=t[d];if(p===f){l[d]=p,(n?u<s:FQ.call(e,d))&&c++;continue}if(p===null||f===null||typeof p!="object"||typeof f!="object"){l[d]=f;continue}const m=w4(p,f,r+1);l[d]=m,m===p&&c++}return s===a&&c===s?e:l}function wO(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function yT(e){if(!bO(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!bO(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function bO(e){return Object.prototype.toString.call(e)==="[object Object]"}function LQ(e){return new Promise(t=>{mT.setTimeout(t,e)})}function GQ(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?w4(e,t):t}function jQ(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function BQ(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var AD=Symbol();function b4(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===AD?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function VQ(e,t,r){let n=!1,i;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(i??(i=t()),n||(n=!0,i.aborted?r():i.addEventListener("abort",r,{once:!0})),i)}),e}var ld,Pc,Ep,eV,HQ=(eV=class extends xS{constructor(){super();$t(this,ld);$t(this,Pc);$t(this,Ep);Tt(this,Ep,t=>{if(!ES&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Ee(this,Pc)||this.setEventListener(Ee(this,Ep))}onUnsubscribe(){var t;this.hasListeners()||((t=Ee(this,Pc))==null||t.call(this),Tt(this,Pc,void 0))}setEventListener(t){var r;Tt(this,Ep,t),(r=Ee(this,Pc))==null||r.call(this),Tt(this,Pc,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){Ee(this,ld)!==t&&(Tt(this,ld,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Ee(this,ld)=="boolean"?Ee(this,ld):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ld=new WeakMap,Pc=new WeakMap,Ep=new WeakMap,eV),S4=new HQ;function zQ(){let e,t;const r=new Promise((i,s)=>{e=i,t=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}var $Q=kQ;function UQ(){let e=[],t=0,r=a=>{a()},n=a=>{a()},i=$Q;const s=a=>{t?e.push(a):i(()=>{r(a)})},o=()=>{const a=e;e=[],a.length&&i(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var yi=UQ(),Pp,Rc,Rp,tV,WQ=(tV=class extends xS{constructor(){super();$t(this,Pp,!0);$t(this,Rc);$t(this,Rp);Tt(this,Rp,t=>{if(!ES&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Ee(this,Rc)||this.setEventListener(Ee(this,Rp))}onUnsubscribe(){var t;this.hasListeners()||((t=Ee(this,Rc))==null||t.call(this),Tt(this,Rc,void 0))}setEventListener(t){var r;Tt(this,Rp,t),(r=Ee(this,Rc))==null||r.call(this),Tt(this,Rc,t(this.setOnline.bind(this)))}setOnline(t){Ee(this,Pp)!==t&&(Tt(this,Pp,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return Ee(this,Pp)}},Pp=new WeakMap,Rc=new WeakMap,Rp=new WeakMap,tV),lw=new WQ;function KQ(e){return Math.min(1e3*2**e,3e4)}function x4(e){return(e??"online")==="online"?lw.isOnline():!0}var CT=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function E4(e){let t=!1,r=0,n;const i=zQ(),s=()=>i.status!=="pending",o=y=>{var C;if(!s()){const w=new CT(y);p(w),(C=e.onCancel)==null||C.call(e,w)}},a=()=>{t=!0},l=()=>{t=!1},c=()=>S4.isFocused()&&(e.networkMode==="always"||lw.isOnline())&&e.canRun(),u=()=>x4(e.networkMode)&&e.canRun(),d=y=>{s()||(n==null||n(),i.resolve(y))},p=y=>{s()||(n==null||n(),i.reject(y))},f=()=>new Promise(y=>{var C;n=w=>{(s()||c())&&y(w)},(C=e.onPause)==null||C.call(e)}).then(()=>{var y;n=void 0,s()||(y=e.onContinue)==null||y.call(e)}),m=()=>{if(s())return;let y;const C=r===0?e.initialPromise:void 0;try{y=C??e.fn()}catch(w){y=Promise.reject(w)}Promise.resolve(y).then(d).catch(w=>{var k;if(s())return;const b=e.retry??(ES?0:3),x=e.retryDelay??KQ,E=typeof x=="function"?x(r,w):x,I=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,w);if(t||!I){p(w);return}r++,(k=e.onFail)==null||k.call(e,r,w),LQ(E).then(()=>c()?void 0:f()).then(()=>{t?p(w):m()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?m():f().then(m),i)}}var cd,rV,P4=(rV=class{constructor(){$t(this,cd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),NQ(this.gcTime)&&Tt(this,cd,mT.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ES?1/0:5*60*1e3))}clearGcTimeout(){Ee(this,cd)&&(mT.clearTimeout(Ee(this,cd)),Tt(this,cd,void 0))}},cd=new WeakMap,rV),ud,Tp,$s,dd,An,$v,hd,_o,Qa,nV,qQ=(nV=class extends P4{constructor(t){super();$t(this,_o);$t(this,ud);$t(this,Tp);$t(this,$s);$t(this,dd);$t(this,An);$t(this,$v);$t(this,hd);Tt(this,hd,!1),Tt(this,$v,t.defaultOptions),this.setOptions(t.options),this.observers=[],Tt(this,dd,t.client),Tt(this,$s,Ee(this,dd).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Tt(this,ud,xO(this.options)),this.state=t.state??Ee(this,ud),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Ee(this,An))==null?void 0:t.promise}setOptions(t){if(this.options={...Ee(this,$v),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=xO(this.options);r.data!==void 0&&(this.setState(SO(r.data,r.dataUpdatedAt)),Tt(this,ud,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ee(this,$s).remove(this)}setData(t,r){const n=GQ(this.state.data,t,this.options);return ei(this,_o,Qa).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){ei(this,_o,Qa).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,i;const r=(n=Ee(this,An))==null?void 0:n.promise;return(i=Ee(this,An))==null||i.cancel(t),r?r.then(Ao).catch(Ao):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ee(this,ud))}isActive(){return this.observers.some(t=>OQ(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===AD||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>vT(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!MQ(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Ee(this,An))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Ee(this,An))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Ee(this,$s).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Ee(this,An)&&(Ee(this,hd)?Ee(this,An).cancel({revert:!0}):Ee(this,An).cancelRetry()),this.scheduleGc()),Ee(this,$s).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ei(this,_o,Qa).call(this,{type:"invalidate"})}async fetch(t,r){var l,c,u,d,p,f,m,y,C,w,b,x;if(this.state.fetchStatus!=="idle"&&((l=Ee(this,An))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Ee(this,An))return Ee(this,An).continueRetry(),Ee(this,An).promise}if(t&&this.setOptions(t),!this.options.queryFn){const E=this.observers.find(I=>I.options.queryFn);E&&this.setOptions(E.options)}const n=new AbortController,i=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(Tt(this,hd,!0),n.signal)})},s=()=>{const E=b4(this.options,r),k=(()=>{const P={client:Ee(this,dd),queryKey:this.queryKey,meta:this.meta};return i(P),P})();return Tt(this,hd,!1),this.options.persister?this.options.persister(E,k,this):E(k)},a=(()=>{const E={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Ee(this,dd),state:this.state,fetchFn:s};return i(E),E})();(c=this.options.behavior)==null||c.onFetch(a,this),Tt(this,Tp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&ei(this,_o,Qa).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta}),Tt(this,An,E4({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,onCancel:E=>{E instanceof CT&&E.revert&&this.setState({...Ee(this,Tp),fetchStatus:"idle"}),n.abort()},onFail:(E,I)=>{ei(this,_o,Qa).call(this,{type:"failed",failureCount:E,error:I})},onPause:()=>{ei(this,_o,Qa).call(this,{type:"pause"})},onContinue:()=>{ei(this,_o,Qa).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const E=await Ee(this,An).start();if(E===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(E),(f=(p=Ee(this,$s).config).onSuccess)==null||f.call(p,E,this),(y=(m=Ee(this,$s).config).onSettled)==null||y.call(m,E,this.state.error,this),E}catch(E){if(E instanceof CT){if(E.silent)return Ee(this,An).promise;if(E.revert){if(this.state.data===void 0)throw E;return this.state.data}}throw ei(this,_o,Qa).call(this,{type:"error",error:E}),(w=(C=Ee(this,$s).config).onError)==null||w.call(C,E,this),(x=(b=Ee(this,$s).config).onSettled)==null||x.call(b,this.state.data,E,this),E}finally{this.scheduleGc()}}},ud=new WeakMap,Tp=new WeakMap,$s=new WeakMap,dd=new WeakMap,An=new WeakMap,$v=new WeakMap,hd=new WeakMap,_o=new WeakSet,Qa=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...YQ(n.data,this.options),fetchMeta:t.meta??null};case"success":const i={...n,...SO(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Tt(this,Tp,t.manual?i:void 0),i;case"error":const s=t.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),yi.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Ee(this,$s).notify({query:this,type:"updated",action:t})})},nV);function YQ(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:x4(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function SO(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function xO(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function EO(e){return{onFetch:(t,r)=>{var u,d,p,f,m;const n=t.options,i=(p=(d=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:p.direction,s=((f=t.state.data)==null?void 0:f.pages)||[],o=((m=t.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let y=!1;const C=x=>{VQ(x,()=>t.signal,()=>y=!0)},w=b4(t.options,t.fetchOptions),b=async(x,E,I)=>{if(y)return Promise.reject();if(E==null&&x.pages.length)return Promise.resolve(x);const P=(()=>{const M={client:t.client,queryKey:t.queryKey,pageParam:E,direction:I?"backward":"forward",meta:t.options.meta};return C(M),M})(),A=await w(P),{maxPages:D}=t.options,L=I?BQ:jQ;return{pages:L(x.pages,A,D),pageParams:L(x.pageParams,E,D)}};if(i&&s.length){const x=i==="backward",E=x?QQ:PO,I={pages:s,pageParams:o},k=E(n,I);a=await b(I,k,x)}else{const x=e??s.length;do{const E=l===0?o[0]??n.initialPageParam:PO(n,a);if(l>0&&E==null)break;a=await b(a,E),l++}while(l<x)}return a};t.options.persister?t.fetchFn=()=>{var y,C;return(C=(y=t.options).persister)==null?void 0:C.call(y,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=c}}}function PO(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function QQ(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Uv,ga,gi,pd,ma,lc,iV,XQ=(iV=class extends P4{constructor(t){super();$t(this,ma);$t(this,Uv);$t(this,ga);$t(this,gi);$t(this,pd);Tt(this,Uv,t.client),this.mutationId=t.mutationId,Tt(this,gi,t.mutationCache),Tt(this,ga,[]),this.state=t.state||ZQ(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Ee(this,ga).includes(t)||(Ee(this,ga).push(t),this.clearGcTimeout(),Ee(this,gi).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Tt(this,ga,Ee(this,ga).filter(r=>r!==t)),this.scheduleGc(),Ee(this,gi).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Ee(this,ga).length||(this.state.status==="pending"?this.scheduleGc():Ee(this,gi).remove(this))}continue(){var t;return((t=Ee(this,pd))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,a,l,c,u,d,p,f,m,y,C,w,b,x,E,I,k,P,A,D;const r=()=>{ei(this,ma,lc).call(this,{type:"continue"})},n={client:Ee(this,Uv),meta:this.options.meta,mutationKey:this.options.mutationKey};Tt(this,pd,E4({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(L,M)=>{ei(this,ma,lc).call(this,{type:"failed",failureCount:L,error:M})},onPause:()=>{ei(this,ma,lc).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ee(this,gi).canRun(this)}));const i=this.state.status==="pending",s=!Ee(this,pd).canStart();try{if(i)r();else{ei(this,ma,lc).call(this,{type:"pending",variables:t,isPaused:s}),await((a=(o=Ee(this,gi).config).onMutate)==null?void 0:a.call(o,t,this,n));const M=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t,n));M!==this.state.context&&ei(this,ma,lc).call(this,{type:"pending",context:M,variables:t,isPaused:s})}const L=await Ee(this,pd).start();return await((d=(u=Ee(this,gi).config).onSuccess)==null?void 0:d.call(u,L,t,this.state.context,this,n)),await((f=(p=this.options).onSuccess)==null?void 0:f.call(p,L,t,this.state.context,n)),await((y=(m=Ee(this,gi).config).onSettled)==null?void 0:y.call(m,L,null,this.state.variables,this.state.context,this,n)),await((w=(C=this.options).onSettled)==null?void 0:w.call(C,L,null,t,this.state.context,n)),ei(this,ma,lc).call(this,{type:"success",data:L}),L}catch(L){try{await((x=(b=Ee(this,gi).config).onError)==null?void 0:x.call(b,L,t,this.state.context,this,n))}catch(M){Promise.reject(M)}try{await((I=(E=this.options).onError)==null?void 0:I.call(E,L,t,this.state.context,n))}catch(M){Promise.reject(M)}try{await((P=(k=Ee(this,gi).config).onSettled)==null?void 0:P.call(k,void 0,L,this.state.variables,this.state.context,this,n))}catch(M){Promise.reject(M)}try{await((D=(A=this.options).onSettled)==null?void 0:D.call(A,void 0,L,t,this.state.context,n))}catch(M){Promise.reject(M)}throw ei(this,ma,lc).call(this,{type:"error",error:L}),L}finally{Ee(this,gi).runNext(this)}}},Uv=new WeakMap,ga=new WeakMap,gi=new WeakMap,pd=new WeakMap,ma=new WeakSet,lc=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),yi.batch(()=>{Ee(this,ga).forEach(n=>{n.onMutationUpdate(t)}),Ee(this,gi).notify({mutation:this,type:"updated",action:t})})},iV);function ZQ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var nl,Do,Wv,sV,JQ=(sV=class extends xS{constructor(t={}){super();$t(this,nl);$t(this,Do);$t(this,Wv);this.config=t,Tt(this,nl,new Set),Tt(this,Do,new Map),Tt(this,Wv,0)}build(t,r,n){const i=new XQ({client:t,mutationCache:this,mutationId:++tC(this,Wv)._,options:t.defaultMutationOptions(r),state:n});return this.add(i),i}add(t){Ee(this,nl).add(t);const r=CC(t);if(typeof r=="string"){const n=Ee(this,Do).get(r);n?n.push(t):Ee(this,Do).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Ee(this,nl).delete(t)){const r=CC(t);if(typeof r=="string"){const n=Ee(this,Do).get(r);if(n)if(n.length>1){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}else n[0]===t&&Ee(this,Do).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=CC(t);if(typeof r=="string"){const n=Ee(this,Do).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===t}else return!0}runNext(t){var n;const r=CC(t);if(typeof r=="string"){const i=(n=Ee(this,Do).get(r))==null?void 0:n.find(s=>s!==t&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){yi.batch(()=>{Ee(this,nl).forEach(t=>{this.notify({type:"removed",mutation:t})}),Ee(this,nl).clear(),Ee(this,Do).clear()})}getAll(){return Array.from(Ee(this,nl))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>CO(r,n))}findAll(t={}){return this.getAll().filter(r=>CO(t,r))}notify(t){yi.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return yi.batch(()=>Promise.all(t.map(r=>r.continue().catch(Ao))))}},nl=new WeakMap,Do=new WeakMap,Wv=new WeakMap,sV);function CC(e){var t;return(t=e.options.scope)==null?void 0:t.id}var va,oV,eX=(oV=class extends xS{constructor(t={}){super();$t(this,va);this.config=t,Tt(this,va,new Map)}build(t,r,n){const i=r.queryKey,s=r.queryHash??TD(i,r);let o=this.get(s);return o||(o=new qQ({client:t,queryKey:i,queryHash:s,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){Ee(this,va).has(t.queryHash)||(Ee(this,va).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Ee(this,va).get(t.queryHash);r&&(t.destroy(),r===t&&Ee(this,va).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){yi.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Ee(this,va).get(t)}getAll(){return[...Ee(this,va).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>yO(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>yO(t,n)):r}notify(t){yi.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){yi.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){yi.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},va=new WeakMap,oV),Kr,Tc,Ac,Ap,_p,_c,Dp,kp,aV,tX=(aV=class{constructor(e={}){$t(this,Kr);$t(this,Tc);$t(this,Ac);$t(this,Ap);$t(this,_p);$t(this,_c);$t(this,Dp);$t(this,kp);Tt(this,Kr,e.queryCache||new eX),Tt(this,Tc,e.mutationCache||new JQ),Tt(this,Ac,e.defaultOptions||{}),Tt(this,Ap,new Map),Tt(this,_p,new Map),Tt(this,_c,0)}mount(){tC(this,_c)._++,Ee(this,_c)===1&&(Tt(this,Dp,S4.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ee(this,Kr).onFocus())})),Tt(this,kp,lw.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ee(this,Kr).onOnline())})))}unmount(){var e,t;tC(this,_c)._--,Ee(this,_c)===0&&((e=Ee(this,Dp))==null||e.call(this),Tt(this,Dp,void 0),(t=Ee(this,kp))==null||t.call(this),Tt(this,kp,void 0))}isFetching(e){return Ee(this,Kr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ee(this,Tc).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ee(this,Kr).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Ee(this,Kr).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(vT(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Ee(this,Kr).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=Ee(this,Kr).get(n.queryHash),s=i==null?void 0:i.state.data,o=IQ(t,s);if(o!==void 0)return Ee(this,Kr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return yi.batch(()=>Ee(this,Kr).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ee(this,Kr).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Ee(this,Kr);yi.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Ee(this,Kr);return yi.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=yi.batch(()=>Ee(this,Kr).findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(Ao).catch(Ao)}invalidateQueries(e,t={}){return yi.batch(()=>(Ee(this,Kr).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=yi.batch(()=>Ee(this,Kr).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(Ao)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(Ao)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Ee(this,Kr).build(this,t);return r.isStaleByTime(vT(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ao).catch(Ao)}fetchInfiniteQuery(e){return e.behavior=EO(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ao).catch(Ao)}ensureInfiniteQueryData(e){return e.behavior=EO(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return lw.isOnline()?Ee(this,Tc).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ee(this,Kr)}getMutationCache(){return Ee(this,Tc)}getDefaultOptions(){return Ee(this,Ac)}setDefaultOptions(e){Tt(this,Ac,e)}setQueryDefaults(e,t){Ee(this,Ap).set(Dm(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ee(this,Ap).values()],r={};return t.forEach(n=>{km(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){Ee(this,_p).set(Dm(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ee(this,_p).values()],r={};return t.forEach(n=>{km(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Ee(this,Ac).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=TD(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===AD&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Ee(this,Ac).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ee(this,Kr).clear(),Ee(this,Tc).clear()}},Kr=new WeakMap,Tc=new WeakMap,Ac=new WeakMap,Ap=new WeakMap,_p=new WeakMap,_c=new WeakMap,Dp=new WeakMap,kp=new WeakMap,aV),rX=v.createContext(void 0),nX=({client:e,children:t})=>(v.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),h.jsx(rX.Provider,{value:e,children:t})),_D=Object.defineProperty,iX=Object.defineProperties,sX=Object.getOwnPropertyDescriptor,oX=Object.getOwnPropertyDescriptors,cw=Object.getOwnPropertySymbols,R4=Object.prototype.hasOwnProperty,T4=Object.prototype.propertyIsEnumerable,RO=(e,t,r)=>t in e?_D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,tt=(e,t)=>{for(var r in t||(t={}))R4.call(t,r)&&RO(e,r,t[r]);if(cw)for(var r of cw(t))T4.call(t,r)&&RO(e,r,t[r]);return e},Sr=(e,t)=>iX(e,oX(t)),aX=(e,t)=>{var r={};for(var n in e)R4.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&cw)for(var n of cw(e))t.indexOf(n)<0&&T4.call(e,n)&&(r[n]=e[n]);return r},On=(e,t)=>{for(var r in t)_D(e,r,{get:t[r],enumerable:!0})},S=(e,t,r,n)=>{for(var i=n>1?void 0:n?sX(t,r):t,s=e.length-1,o;s>=0;s--)(o=e[s])&&(i=(n?o(t,r,i):o(i))||i);return n&&i&&_D(t,r,i),i},Go=(e,t)=>(r,n)=>t(r,n,e),A4={};On(A4,{attrToBoolean:()=>uw,attrToNumber:()=>zc,attrToString:()=>lX,defaultComparator:()=>cX,exists:()=>xe,jsonEquals:()=>wT,makeNull:()=>Ra,missing:()=>gt,missingOrEmpty:()=>Ks,toStringOrNull:()=>Im,values:()=>md});function Ra(e){return e==null||e===""?null:e}function xe(e,t=!1){return e!=null&&(e!==""||t)}function gt(e){return!xe(e)}function Ks(e){return e==null||e.length===0}function Im(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function zc(e){if(e===void 0)return;if(e===null||e==="")return null;if(typeof e=="number")return isNaN(e)?void 0:e;const t=parseInt(e,10);return isNaN(t)?void 0:t}function uw(e){if(e!==void 0)return e===null||e===""?!1:typeof e=="boolean"?e:/true/i.test(e)}function lX(e){if(!(e==null||e===""))return e}function wT(e,t){const r=e?JSON.stringify(e):null,n=t?JSON.stringify(t):null;return r===n}function cX(e,t,r=!1){const n=e==null,i=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),n&&i)return 0;if(n)return-1;if(i)return 1;function s(o,a){return o>a?1:o<a?-1:0}if(typeof e!="string"||!r)return s(e,t);try{return e.localeCompare(t)}catch{return s(e,t)}}function md(e){if(e instanceof Set||e instanceof Map){const t=[];return e.forEach(r=>t.push(r)),t}return Object.values(e)}var uX=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=Im(e);let r=0;for(;;){let n;if(e?(n=e,r!==0&&(n+="_"+r)):t?(n=t,r!==0&&(n+="_"+r)):n=r,!this.existingKeys[n])return this.existingKeys[n]=!0,String(n);r++}}},_4={};On(_4,{SKIP_JS_BUILTINS:()=>PS,cloneObject:()=>DD,deepCloneDefinition:()=>dw,getAllValuesInObject:()=>Zc,getValueUsingField:()=>pp,isNonNullObject:()=>hw,iterateObject:()=>oi,mergeDeep:()=>qi,removeAllReferences:()=>D4});var PS=new Set(["__proto__","constructor","prototype"]);function oi(e,t){if(e!=null){if(Array.isArray(e)){for(let r=0;r<e.length;r++)t(r.toString(),e[r]);return}for(const[r,n]of Object.entries(e))t(r,n)}}function DD(e){const t={},r=Object.keys(e);for(let n=0;n<r.length;n++){if(PS.has(r[n]))continue;const i=r[n],s=e[i];t[i]=s}return t}function dw(e,t){if(!e)return;const r=e,n={};return Object.keys(r).forEach(i=>{if(t&&t.indexOf(i)>=0||PS.has(i))return;const s=r[i];hw(s)&&s.constructor===Object?n[i]=dw(s):n[i]=s}),n}function Zc(e){if(!e)return[];const t=Object;if(typeof t.values=="function")return t.values(e);const r=[];for(const n in e)e.hasOwnProperty(n)&&e.propertyIsEnumerable(n)&&r.push(e[n]);return r}function qi(e,t,r=!0,n=!1){xe(t)&&oi(t,(i,s)=>{if(PS.has(i))return;let o=e[i];o!==s&&(n&&o==null&&s!=null&&typeof s=="object"&&s.constructor===Object&&(o={},e[i]=o),hw(s)&&hw(o)&&!Array.isArray(o)?qi(o,s,r,n):(r||s!==void 0)&&(e[i]=s))})}function pp(e,t,r){if(!t||!e)return;if(!r)return e[t];const n=t.split(".");let i=e;for(let s=0;s<n.length;s++){if(i==null)return;i=i[n[s]]}return i}function D4(e,t=[],r){Object.keys(e).forEach(o=>{typeof e[o]=="object"&&!t.includes(o)&&(e[o]=void 0)});const n=Object.getPrototypeOf(e),i={},s=o=>`AG Grid: Grid API function ${o}() cannot be called as the grid has been destroyed.
    It is recommended to remove local references to the grid api. Alternatively, check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
    To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${r}`;Object.getOwnPropertyNames(n).forEach(o=>{if(typeof n[o]=="function"&&!t.includes(o)){const l=()=>{console.warn(s(o))};i[o]={value:l,writable:!0}}}),Object.defineProperties(e,i)}function hw(e){return typeof e=="object"&&e!==null}var k4={};On(k4,{compose:()=>dX,debounce:()=>bi,doOnce:()=>jp,errorOnce:()=>ed,executeAfter:()=>N4,executeInAWhile:()=>I4,executeNextVMTurn:()=>bT,getFunctionName:()=>RS,isFunction:()=>TS,noop:()=>hX,throttle:()=>ST,waitUntil:()=>kD,warnOnce:()=>ot});var TO={};function jp(e,t){TO[t]||(e(),TO[t]=!0)}function ot(e){jp(()=>console.warn("AG Grid: "+e),e)}function ed(e){jp(()=>console.error("AG Grid: "+e),e)}function RS(e){if(e.name)return e.name;const t=/function\s+([^\(]+)/.exec(e.toString());return t&&t.length===2?t[1].trim():null}function TS(e){return!!(e&&e.constructor&&e.call&&e.apply)}function I4(e){N4(e,400)}var lP=[],cP=!1;function bT(e){lP.push(e),!cP&&(cP=!0,window.setTimeout(()=>{const t=lP.slice();lP.length=0,cP=!1,t.forEach(r=>r())},0))}function N4(e,t=0){e.length>0&&window.setTimeout(()=>e.forEach(r=>r()),t)}function bi(e,t){let r;return function(...n){const i=this;window.clearTimeout(r),r=window.setTimeout(function(){e.apply(i,n)},t)}}function ST(e,t){let r=0;return function(...n){const i=this,s=new Date().getTime();s-r<t||(r=s,e.apply(i,n))}}function kD(e,t,r=100,n){const i=new Date().getTime();let s=null,o=!1;const a=()=>{const l=new Date().getTime()-i>r;(e()||l)&&(t(),o=!0,s!=null&&(window.clearInterval(s),s=null),l&&n&&console.warn(n))};a(),o||(s=window.setInterval(a,10))}function dX(...e){return t=>e.reduce((r,n)=>n(r),t)}var hX=()=>{},M4=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(M4||{}),AS=class ir{static register(t){ir.__register(t,!0,void 0)}static registerModules(t){ir.__registerModules(t,!0,void 0)}static __register(t,r,n){ir.runVersionChecks(t),n!==void 0?(ir.areGridScopedModules=!0,ir.gridModulesMap[n]===void 0&&(ir.gridModulesMap[n]={}),ir.gridModulesMap[n][t.moduleName]=t):ir.globalModulesMap[t.moduleName]=t,ir.setModuleBased(r)}static __unRegisterGridModules(t){delete ir.gridModulesMap[t]}static __registerModules(t,r,n){ir.setModuleBased(r),t&&t.forEach(i=>ir.__register(i,r,n))}static isValidModuleVersion(t){const[r,n]=t.version.split(".")||[],[i,s]=ir.currentModuleVersion.split(".")||[];return r===i&&n===s}static runVersionChecks(t){if(ir.currentModuleVersion||(ir.currentModuleVersion=t.version),t.version?ir.isValidModuleVersion(t)||console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${t.moduleName}' is version ${t.version} but the other modules are version ${this.currentModuleVersion}. Please update all modules to the same version.`):console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${t.moduleName}' is incompatible. Please update all modules to the same version.`),t.validate){const r=t.validate();r.isValid||console.error(`AG Grid: ${r.message}`)}}static setModuleBased(t){ir.moduleBased===void 0?ir.moduleBased=t:ir.moduleBased!==t&&jp(()=>{console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information.")},"ModulePackageCheck")}static __setIsBundled(){ir.isBundled=!0}static __assertRegistered(t,r,n){var i;if(this.__isRegistered(t,n))return!0;const s=r+t;let o;if(ir.isBundled)o=`AG Grid: unable to use ${r} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(ir.moduleBased||ir.moduleBased===void 0){let a=(i=Object.entries(M4).find(([l,c])=>c===t))==null?void 0:i[0];o=`AG Grid: unable to use ${r} as the ${a} is not registered${ir.areGridScopedModules?` for gridId: ${n}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${a} } from '${t}';
    
    ModuleRegistry.registerModules([ ${a} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else o=`AG Grid: unable to use ${r} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return jp(()=>{console.warn(o)},s),!1}static __isRegistered(t,r){var n;return!!ir.globalModulesMap[t]||!!((n=ir.gridModulesMap[r])!=null&&n[t])}static __getRegisteredModules(t){return[...md(ir.globalModulesMap),...md(ir.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){var r;return md((r=ir.gridModulesMap[t])!=null?r:{})||[]}static __isPackageBased(){return!ir.moduleBased}};AS.globalModulesMap={};AS.gridModulesMap={};AS.areGridScopedModules=!1;var Yt=AS,pX=class{constructor(e,t){if(this.beanWrappers={},this.destroyed=!1,!e||!e.beanClasses)return;this.contextParams=e,this.logger=t,this.logger.log(">> creating ag-Application Context"),this.createBeans();const r=this.getBeanInstances();this.wireBeans(r),this.logger.log(">> ag-Application Context ready - component is alive")}getBeanInstances(){return md(this.beanWrappers).map(e=>e.beanInstance)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.wireBeans([e],t),e}wireBeans(e,t){this.autoWireBeans(e),this.methodWireBeans(e),this.callLifeCycleMethods(e,"preConstructMethods"),xe(t)&&e.forEach(t),this.callLifeCycleMethods(e,"postConstructMethods")}createBeans(){this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),oi(this.beanWrappers,(t,r)=>{let n;r.bean.__agBeanMetaData&&r.bean.__agBeanMetaData.autowireMethods&&r.bean.__agBeanMetaData.autowireMethods.agConstructor&&(n=r.bean.__agBeanMetaData.autowireMethods.agConstructor);const i=this.getBeansForParameters(n,r.bean.name),s=new(r.bean.bind.apply(r.bean,[null,...i]));r.beanInstance=s});const e=Object.keys(this.beanWrappers).join(", ");this.logger.log(`created beans: ${e}`)}createBeanWrapper(e){const t=e.__agBeanMetaData;if(!t){let n;e.prototype.constructor?n=RS(e.prototype.constructor):n=""+e,console.error(`Context item ${n} is not a bean`);return}const r={bean:e,beanInstance:null,beanName:t.beanName};this.beanWrappers[t.beanName]=r}autoWireBeans(e){e.forEach(t=>{this.forEachMetaDataInHierarchy(t,(r,n)=>{const i=r.agClassAttributes;i&&i.forEach(s=>{const o=this.lookupBeanInstance(n,s.beanName,s.optional);t[s.attributeName]=o})})})}methodWireBeans(e){e.forEach(t=>{this.forEachMetaDataInHierarchy(t,(r,n)=>{oi(r.autowireMethods,(i,s)=>{if(i==="agConstructor")return;const o=this.getBeansForParameters(s,n);t[i].apply(t,o)})})})}forEachMetaDataInHierarchy(e,t){let r=Object.getPrototypeOf(e);for(;r!=null;){const n=r.constructor;if(n.hasOwnProperty("__agBeanMetaData")){const i=n.__agBeanMetaData,s=this.getBeanName(n);t(i,s)}r=Object.getPrototypeOf(r)}}getBeanName(e){if(e.__agBeanMetaData&&e.__agBeanMetaData.beanName)return e.__agBeanMetaData.beanName;const t=e.toString();return t.substring(9,t.indexOf("("))}getBeansForParameters(e,t){const r=[];return e&&oi(e,(n,i)=>{const s=this.lookupBeanInstance(t,i);r[Number(n)]=s}),r}lookupBeanInstance(e,t,r=!1){if(this.destroyed)return this.logger.log(`AG Grid: bean reference ${t} is used after the grid is destroyed!`),null;if(t==="context")return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(t))return this.contextParams.providedBeanInstances[t];const n=this.beanWrappers[t];return n?n.beanInstance:(r||console.error(`AG Grid: unable to find bean reference ${t} while initialising ${e}`),null)}callLifeCycleMethods(e,t){e.forEach(r=>this.callLifeCycleMethodsOnBean(r,t))}callLifeCycleMethodsOnBean(e,t,r){const n={};this.forEachMetaDataInHierarchy(e,s=>{const o=s[t];o&&o.forEach(a=>{a!=r&&(n[a]=!0)})}),Object.keys(n).forEach(s=>e[s]())}getBean(e){return this.lookupBeanInstance("getBean",e,!0)}destroy(){if(this.destroyed)return;this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");const e=this.getBeanInstances();this.destroyBeans(e),this.contextParams.providedBeanInstances=null,Yt.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}destroyBean(e){e&&this.destroyBeans([e])}destroyBeans(e){return e?(e.forEach(t=>{this.callLifeCycleMethodsOnBean(t,"preDestroyMethods","destroy");const r=t;typeof r.destroy=="function"&&r.destroy()}),[]):[]}isDestroyed(){return this.destroyed}getGridId(){return this.contextParams.gridId}};function O4(e,t,r){const n=Md(e.constructor);n.preConstructMethods||(n.preConstructMethods=[]),n.preConstructMethods.push(t)}function _e(e,t,r){const n=Md(e.constructor);n.postConstructMethods||(n.postConstructMethods=[]),n.postConstructMethods.push(t)}function Ni(e,t,r){const n=Md(e.constructor);n.preDestroyMethods||(n.preDestroyMethods=[]),n.preDestroyMethods.push(t)}function $e(e){return t=>{const r=Md(t);r.beanName=e}}function F(e){return(t,r,n)=>{F4(t,e,!1,t,r)}}function rr(e){return(t,r,n)=>{F4(t,e,!0,t,r)}}function F4(e,t,r,n,i,s){if(t===null){console.error("AG Grid: Autowired name should not be null");return}const o=Md(e.constructor);o.agClassAttributes||(o.agClassAttributes=[]),o.agClassAttributes.push({attributeName:i,beanName:t,optional:r})}function Ys(e){return(t,r,n)=>{const i=typeof t=="function"?t:t.constructor;let s;if(typeof n=="number"){let o;r?(s=Md(i),o=r):(s=Md(i),o="agConstructor"),s.autowireMethods||(s.autowireMethods={}),s.autowireMethods[o]||(s.autowireMethods[o]={}),s.autowireMethods[o][n]=e}}}function Md(e){return e.hasOwnProperty("__agBeanMetaData")||(e.__agBeanMetaData={}),e.__agBeanMetaData}var qo=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setBeans(e,t,r=null,n=null){if(this.frameworkOverrides=t,this.gos=e,r){const i=e.useAsyncEvents();this.addGlobalListener(r,i)}n&&this.addGlobalListener(n,!1)}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,r){const n=t?this.allAsyncListeners:this.allSyncListeners;let i=n.get(e);return!i&&r&&(i=new Set,n.set(e,i)),i}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,r=!1){this.getListeners(e,r,!0).add(t)}removeEventListener(e,t,r=!1){const n=this.getListeners(e,r,!1);n&&(n.delete(t),n.size===0&&(r?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){let t=e;this.gos&&this.gos.addGridCommonParams(t),this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){var r;const n=e.type;if(t&&"event"in e){const l=e.event;l instanceof Event&&(e.eventPath=l.composedPath())}const i=(l,c)=>l.forEach(u=>{if(!c.has(u))return;const d=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>u(e)):()=>u(e);t?this.dispatchAsync(d):d()}),s=(r=this.getListeners(n,t,!1))!=null?r:new Set,o=new Set(s);o.size>0&&i(o,s),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(l=>{const c=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>l(n,e)):()=>l(n,e);t?this.dispatchAsync(c):c()})}dispatchAsync(e){this.asyncFunctionsQueue.push(e),this.scheduled||(this.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)}),this.scheduled=!0)}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}};S([Go(0,Ys("gridOptionsService")),Go(1,Ys("frameworkOverrides")),Go(2,Ys("globalEventListener")),Go(3,Ys("globalSyncEventListener"))],qo.prototype,"setBeans",1);qo=S([$e("eventService")],qo);var ID=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=r=>{this.frameworkOverrides.wrapOutgoing(()=>e(r))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(r,n)=>{this.frameworkOverrides.wrapOutgoing(()=>e(r,n))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){var t;return(t=this.wrappedListeners.get(e))!=null?t:e}unwrapGlobal(e){var t;return(t=this.wrappedGlobalListeners.get(e))!=null?t:e}},fX={resizable:!0,sortable:!0},gX=0;function L4(){return gX++}var ln=class G4{constructor(t,r,n,i){this.instanceId=L4(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new qo,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=t,this.userProvidedColDef=r,this.colId=n,this.primary=i,this.setState(t)}getInstanceId(){return this.instanceId}setState(t){t.sort!==void 0?(t.sort==="asc"||t.sort==="desc")&&(this.sort=t.sort):(t.initialSort==="asc"||t.initialSort==="desc")&&(this.sort=t.initialSort);const r=t.sortIndex,n=t.initialSortIndex;r!==void 0?r!==null&&(this.sortIndex=r):n!==null&&(this.sortIndex=n);const i=t.hide,s=t.initialHide;i!==void 0?this.visible=!i:this.visible=!s,t.pinned!==void 0?this.setPinned(t.pinned):this.setPinned(t.initialPinned);const o=t.flex,a=t.initialFlex;o!==void 0?this.flex=o:a!==void 0&&(this.flex=a)}setColDef(t,r,n){this.colDef=t,this.userProvidedColDef=r,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged",n))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(t){this.parent=t}getParent(){return this.parent}setOriginalParent(t){this.originalParent=t}getOriginalParent(){return this.originalParent}initialise(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const t=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=xe(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!t,this.tooltipFieldContainsDots=xe(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!t}initMinAndMaxWidths(){var t,r;const n=this.colDef;this.minWidth=(t=n.minWidth)!=null?t:this.environment.getMinColWidth(),this.maxWidth=(r=n.maxWidth)!=null?r:Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=xe(this.colDef.tooltipField)||xe(this.colDef.tooltipValueGetter)||xe(this.colDef.tooltipComponent)}resetActualWidth(t){const r=this.calculateColInitialWidth(this.colDef);this.setActualWidth(r,t,!0)}calculateColInitialWidth(t){var r,n;const i=(r=t.minWidth)!=null?r:this.environment.getMinColWidth(),s=(n=t.maxWidth)!=null?n:Number.MAX_SAFE_INTEGER;let o;const a=zc(t.width),l=zc(t.initialWidth);return a!=null?o=a:l!=null?o=l:o=200,Math.max(Math.min(o,s),i)}isEmptyGroup(){return!1}isRowGroupDisplayed(t){if(gt(this.colDef)||gt(this.colDef.showRowGroup))return!1;const r=this.colDef.showRowGroup===!0,n=this.colDef.showRowGroup===t;return r||n}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}addEventListener(t,r){var n,i;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new ID(this.frameworkOverrides));const s=(i=(n=this.frameworkEventListenerService)==null?void 0:n.wrap(r))!=null?i:r;this.eventService.addEventListener(t,s)}removeEventListener(t,r){var n,i;const s=(i=(n=this.frameworkEventListenerService)==null?void 0:n.unwrap(r))!=null?i:r;this.eventService.removeEventListener(t,s)}createColumnFunctionCallbackParams(t){return this.gos.addGridCommonParams({node:t,data:t.data,column:this,colDef:this.colDef})}isSuppressNavigable(t){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){const r=this.createColumnFunctionCallbackParams(t),n=this.colDef.suppressNavigable;return n(r)}return!1}isCellEditable(t){return t.group&&!this.gos.get("enableGroupEdit")?!1:this.isColumnFunc(t,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(t){return this.isColumnFunc(t,this.colDef.rowDrag)}isDndSource(t){return this.isColumnFunc(t,this.colDef.dndSource)}isCellCheckboxSelection(t){return this.isColumnFunc(t,this.colDef.checkboxSelection)}isSuppressPaste(t){return this.isColumnFunc(t,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(t){var r;return(r=this.colDef[t])!=null?r:fX[t]}isColumnFunc(t,r){if(typeof r=="boolean")return r;if(typeof r=="function"){const n=this.createColumnFunctionCallbackParams(t);return r(n)}return!1}setMoving(t,r){this.moving=t,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",r))}createColumnEvent(t,r){return this.gos.addGridCommonParams({type:t,column:this,columns:[this],source:r})}isMoving(){return this.moving}getSort(){return this.sort}setSort(t,r){this.sort!==t&&(this.sort=t,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",r))),this.dispatchStateUpdatedEvent("sort")}setMenuVisible(t,r){this.menuVisible!==t&&(this.menuVisible=t,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",r)))}isMenuVisible(){return this.menuVisible}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return gt(this.sort)}isSorting(){return xe(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(t){this.sortIndex=t,this.dispatchStateUpdatedEvent("sortIndex")}setAggFunc(t){this.aggFunc=t,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(t,r){this.oldLeft=this.left,this.left!==t&&(this.left=t,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",r)))}isFilterActive(){return this.filterActive}setFilterActive(t,r,n){this.filterActive!==t&&(this.filterActive=t,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",r)));const i=this.createColumnEvent("filterChanged",r);n&&qi(i,n),this.eventService.dispatchEvent(i)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(t){t===!0||t==="left"?this.pinned="left":t==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(t,r){this.firstRightPinned!==t&&(this.firstRightPinned=t,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",r)))}setLastLeftPinned(t,r){this.lastLeftPinned!==t&&(this.lastLeftPinned=t,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",r)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(t,r){const n=t===!0;this.visible!==n&&(this.visible=n,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",r))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){const t=this.getColDef();return!t.suppressSpanHeaderHeight&&!t.autoHeaderHeight}getColumnGroupPaddingInfo(){let t=this.getParent();if(!t||!t.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const r=t.getPaddingLevel()+1;let n=!0;for(;t;){if(!t.isPadding()){n=!1;break}t=t.getParent()}return{numberOfParents:r,isSpanningTotal:n}}getColDef(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getDefinition(){return this.colDef}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(t){const r=t!==this.autoHeaderHeight;return this.autoHeaderHeight=t,r}createBaseColDefParams(t){return this.gos.addGridCommonParams({node:t,data:t.data,colDef:this.colDef,column:this})}getColSpan(t){if(gt(this.colDef.colSpan))return 1;const r=this.createBaseColDefParams(t),n=this.colDef.colSpan(r);return Math.max(n,1)}getRowSpan(t){if(gt(this.colDef.rowSpan))return 1;const r=this.createBaseColDefParams(t),n=this.colDef.rowSpan(r);return Math.max(n,1)}setActualWidth(t,r,n=!1){this.minWidth!=null&&(t=Math.max(t,this.minWidth)),this.maxWidth!=null&&(t=Math.min(t,this.maxWidth)),this.actualWidth!==t&&(this.actualWidth=t,this.flex&&r!=="flex"&&r!=="gridInitializing"&&(this.flex=null),n||this.fireColumnWidthChangedEvent(r)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(t){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",t))}isGreaterThanMax(t){return this.maxWidth!=null?t>this.maxWidth:!1}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(t){this.flex!==t&&(this.flex=t),this.dispatchStateUpdatedEvent("flex")}setMinimum(t){xe(this.minWidth)&&this.setActualWidth(this.minWidth,t)}setRowGroupActive(t,r){this.rowGroupActive!==t&&(this.rowGroupActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",r))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(t,r){this.pivotActive!==t&&(this.pivotActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",r))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(t,r){this.aggregationActive!==t&&(this.aggregationActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",r)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}getMenuTabs(t){ot("As of v31.1, 'getMenuTabs' is deprecated. Use 'getColDef().menuTabs ?? defaultValues' instead.");let r=this.getColDef().menuTabs;return r==null&&(r=t),r}dispatchStateUpdatedEvent(t){this.eventService.dispatchEvent({type:G4.EVENT_STATE_UPDATED,key:t})}};ln.EVENT_MOVING_CHANGED="movingChanged";ln.EVENT_LEFT_CHANGED="leftChanged";ln.EVENT_WIDTH_CHANGED="widthChanged";ln.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged";ln.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged";ln.EVENT_VISIBLE_CHANGED="visibleChanged";ln.EVENT_FILTER_CHANGED="filterChanged";ln.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged";ln.EVENT_SORT_CHANGED="sortChanged";ln.EVENT_COL_DEF_CHANGED="colDefChanged";ln.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged";ln.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged";ln.EVENT_PIVOT_CHANGED="columnPivotChanged";ln.EVENT_VALUE_CHANGED="columnValueChanged";ln.EVENT_STATE_UPDATED="columnStateUpdated";S([F("gridOptionsService")],ln.prototype,"gos",2);S([F("environment")],ln.prototype,"environment",2);S([F("columnHoverService")],ln.prototype,"columnHoverService",2);S([F("frameworkOverrides")],ln.prototype,"frameworkOverrides",2);S([_e],ln.prototype,"initialise",1);var ar=ln,_S=class kg{constructor(t,r,n,i){this.localEventService=new qo,this.expandable=!1,this.instanceId=L4(),this.expandableListenerRemoveCallback=null,this.colGroupDef=t,this.groupId=r,this.expanded=!!t&&!!t.openByDefault,this.padding=n,this.level=i}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)}reset(t,r){this.colGroupDef=t,this.level=r,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(t){this.originalParent=t}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(t=>t.isVisible()):!1}isPadding(){return this.padding}setExpanded(t){this.expanded=t===void 0?!1:t;const r={type:kg.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(r)}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(t){this.children=t}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const t=[];return this.addLeafColumns(t),t}addLeafColumns(t){this.children&&this.children.forEach(r=>{r instanceof ar?t.push(r):r instanceof kg&&r.addLeafColumns(t)})}getColumnGroupShow(){const t=this.colGroupDef;if(t)return t.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const t=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(r=>r.addEventListener("visibleChanged",t)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(r=>r.removeEventListener("visibleChanged",t)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let t=!1,r=!1,n=!1;const i=this.findChildrenRemovingPadding();for(let o=0,a=i.length;o<a;o++){const l=i[o];if(!l.isVisible())continue;const c=l.getColumnGroupShow();c==="open"?(t=!0,n=!0):c==="closed"?(r=!0,n=!0):(t=!0,r=!0)}const s=t&&r&&n;if(this.expandable!==s){this.expandable=s;const o={type:kg.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(o)}}findChildrenRemovingPadding(){const t=[],r=n=>{n.forEach(i=>{i instanceof kg&&i.isPadding()?r(i.children):t.push(i)})};return r(this.children),t}onColumnVisibilityChanged(){this.setExpandable()}addEventListener(t,r){this.localEventService.addEventListener(t,r)}removeEventListener(t,r){this.localEventService.removeEventListener(t,r)}};_S.EVENT_EXPANDED_CHANGED="expandedChanged";_S.EVENT_EXPANDABLE_CHANGED="expandableChanged";S([Ni],_S.prototype,"destroy",1);var rn=_S,mX={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},j4={};On(j4,{addSafePassiveEventListener:()=>Y4,createEventPath:()=>K4,getCtrlForEventTarget:()=>pw,getEventPath:()=>q4,isElementInEventPath:()=>fw,isEventSupported:()=>MD,isStopPropagationForAgGrid:()=>$o,stopPropagationForAgGrid:()=>Yo});var B4={};On(B4,{areEqual:()=>Ca,existsAndNotEmpty:()=>V4,flatten:()=>U4,forEachReverse:()=>wX,includes:()=>Ps,insertArrayIntoArray:()=>xT,insertIntoArray:()=>Nm,last:()=>Wt,moveInArray:()=>ET,pushAll:()=>PT,removeAllFromArray:()=>$4,removeAllFromUnorderedArray:()=>z4,removeFromArray:()=>zi,removeFromUnorderedArray:()=>ND,removeRepeatsFromArray:()=>yX,shallowCompare:()=>vX,sortNumerically:()=>H4,toStrings:()=>CX});function V4(e){return e!=null&&e.length>0}function Wt(e){if(!(!e||!e.length))return e[e.length-1]}function Ca(e,t,r){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((n,i)=>r?r(n,t[i]):t[i]===n)}function vX(e,t){return Ca(e,t)}function H4(e){return e.sort((t,r)=>t-r)}function yX(e,t){if(e)for(let r=e.length-2;r>=0;r--){const n=e[r]===t,i=e[r+1]===t;n&&i&&e.splice(r+1,1)}}function ND(e,t){const r=e.indexOf(t);r>=0&&(e[r]=e[e.length-1],e.pop())}function zi(e,t){const r=e.indexOf(t);r>=0&&e.splice(r,1)}function z4(e,t){for(let r=0;r<t.length;r++)ND(e,t[r])}function $4(e,t){for(let r=0;r<t.length;r++)zi(e,t[r])}function Nm(e,t,r){e.splice(r,0,t)}function xT(e,t,r){if(!(e==null||t==null))for(let n=t.length-1;n>=0;n--){const i=t[n];Nm(e,i,r)}}function ET(e,t,r){$4(e,t),t.slice().reverse().forEach(n=>Nm(e,n,r))}function Ps(e,t){return e.indexOf(t)>-1}function U4(e){return[].concat.apply([],e)}function PT(e,t){t==null||e==null||t.forEach(r=>e.push(r))}function CX(e){return e.map(Im)}function wX(e,t){if(e!=null)for(let r=e.length-1;r>=0;r--)t(e[r],r)}var W4="__ag_Grid_Stop_Propagation",bX=["touchstart","touchend","touchmove","touchcancel","scroll"],uP={};function Yo(e){e[W4]=!0}function $o(e){return e[W4]===!0}var MD=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return r=>{if(typeof uP[r]=="boolean")return uP[r];const n=document.createElement(e[r]||"div");return r="on"+r,uP[r]=r in n}})();function pw(e,t,r){let n=t;for(;n;){const i=e.getDomData(n,r);if(i)return i;n=n.parentElement}return null}function fw(e,t){return!t||!e?!1:q4(t).indexOf(e)>=0}function K4(e){const t=[];let r=e.target;for(;r;)t.push(r),r=r.parentElement;return t}function q4(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():K4(t)}function Y4(e,t,r,n){const s=Ps(bX,r)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,r,n,s)}var Gl=class Q4{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=()=>!this.destroyed}getFrameworkOverrides(){return this.frameworkOverrides}getContext(){return this.context}destroy(){for(let t=0;t<this.destroyFunctions.length;t++)this.destroyFunctions[t]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:Q4.EVENT_DESTROYED})}addEventListener(t,r){this.localEventService||(this.localEventService=new qo),this.localEventService.addEventListener(t,r)}removeEventListener(t,r){this.localEventService&&this.localEventService.removeEventListener(t,r)}dispatchEvent(t){this.localEventService&&this.localEventService.dispatchEvent(t)}addManagedListener(t,r,n){if(this.destroyed)return;t instanceof HTMLElement?Y4(this.getFrameworkOverrides(),t,r,n):t.addEventListener(r,n);const i=()=>(t.removeEventListener(r,n),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==i),null)}setupGridOptionListener(t,r){this.gos.addEventListener(t,r);const n=()=>(this.gos.removeEventListener(t,r),null);return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter(i=>i!==n),null)}addManagedPropertyListener(t,r){return this.destroyed?()=>null:this.setupGridOptionListener(t,r)}addManagedPropertyListeners(t,r){if(this.destroyed)return;const n=t.join("-")+this.propertyListenerId++,i=s=>{if(s.changeSet){if(s.changeSet&&s.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=s.changeSet.id}const o={type:"gridPropertyChanged",changeSet:s.changeSet,source:s.source};r(o)};t.forEach(s=>this.setupGridOptionListener(s,i))}addDestroyFunc(t){this.isAlive()?this.destroyFunctions.push(t):t()}createManagedBean(t,r){const n=this.createBean(t,r);return this.addDestroyFunc(this.destroyBean.bind(this,t,r)),n}createBean(t,r,n){return(r||this.getContext()).createBean(t,n)}destroyBean(t,r){return(r||this.getContext()).destroyBean(t)}destroyBeans(t,r){if(t)for(let n=0;n<t.length;n++)this.destroyBean(t[n],r);return[]}};Gl.EVENT_DESTROYED="destroyed";S([F("frameworkOverrides")],Gl.prototype,"frameworkOverrides",2);S([F("context")],Gl.prototype,"context",2);S([F("eventService")],Gl.prototype,"eventService",2);S([F("gridOptionsService")],Gl.prototype,"gos",2);S([F("localeService")],Gl.prototype,"localeService",2);S([F("environment")],Gl.prototype,"environment",2);S([Ni],Gl.prototype,"destroy",1);var Ae=Gl,Mm=class extends Ae{setBeans(e){this.logger=e.create("ColumnFactory")}createColumnTree(e,t,r,n){const i=new uX,{existingCols:s,existingGroups:o,existingColKeys:a}=this.extractExistingTreeData(r);i.addExistingKeys(a);const l=this.recursivelyCreateColumns(e,0,t,s,i,o,n),c=this.findMaxDept(l,0);this.logger.log("Number of levels for grouped columns is "+c);const u=this.balanceColumnTree(l,0,c,i);return el(null,u,(p,f)=>{p instanceof rn&&p.setupExpandable(),p.setOriginalParent(f)}),{columnTree:u,treeDept:c}}extractExistingTreeData(e){const t=[],r=[],n=[];return e&&el(null,e,i=>{if(i instanceof rn){const s=i;r.push(s)}else{const s=i;n.push(s.getId()),t.push(s)}}),{existingCols:t,existingGroups:r,existingColKeys:n}}createForAutoGroups(e,t){return e.map(r=>this.createAutoGroupTreeItem(t,r))}createAutoGroupTreeItem(e,t){const r=this.findDepth(e);let n=t;for(let i=r-1;i>=0;i--){const s=new rn(null,`FAKE_PATH_${t.getId()}}_${i}`,!0,i);this.createBean(s),s.setChildren([n]),n.setOriginalParent(s),n=s}return r===0&&t.setOriginalParent(null),n}findDepth(e){let t=0,r=e;for(;r&&r[0]&&r[0]instanceof rn;)t++,r=r[0].getChildren();return t}balanceColumnTree(e,t,r,n){const i=[];for(let s=0;s<e.length;s++){const o=e[s];if(o instanceof rn){const a=o,l=this.balanceColumnTree(a.getChildren(),t+1,r,n);a.setChildren(l),i.push(a)}else{let a,l;for(let c=r-1;c>=t;c--){const u=n.getUniqueKey(null,null),d=this.createMergedColGroupDef(null),p=new rn(d,u,!0,t);this.createBean(p),l&&l.setChildren([p]),l=p,a||(a=l)}if(a&&l)if(i.push(a),e.some(u=>u instanceof rn)){l.setChildren([o]);continue}else{l.setChildren(e);break}i.push(o)}}return i}findMaxDept(e,t){let r=t;for(let n=0;n<e.length;n++){const i=e[n];if(i instanceof rn){const s=i,o=this.findMaxDept(s.getChildren(),t+1);r<o&&(r=o)}}return r}recursivelyCreateColumns(e,t,r,n,i,s,o){if(!e)return[];const a=new Array(e.length);for(let l=0;l<a.length;l++){const c=e[l];this.isColumnGroup(c)?a[l]=this.createColumnGroup(r,c,t,n,i,s,o):a[l]=this.createColumn(r,c,n,i,o)}return a}createColumnGroup(e,t,r,n,i,s,o){const a=this.createMergedColGroupDef(t),l=i.getUniqueKey(a.groupId||null,null),c=new rn(a,l,!1,r);this.createBean(c);const u=this.findExistingGroup(t,s);u&&s.splice(u.idx,1);let d=u==null?void 0:u.group;d&&c.setExpanded(d.isExpanded());const p=this.recursivelyCreateColumns(a.children,r+1,e,n,i,s,o);return c.setChildren(p),c}createMergedColGroupDef(e){const t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,r,n,i){const s=this.findExistingColumn(t,r);s&&(r==null||r.splice(s.idx,1));let o=s==null?void 0:s.column;if(o){const a=this.addColumnDefaultAndTypes(t,o.getColId());o.setColDef(a,t,i),this.applyColumnState(o,a,i)}else{const a=n.getUniqueKey(t.colId,t.field),l=this.addColumnDefaultAndTypes(t,a);o=new ar(l,t,a,e),this.context.createBean(o)}return this.dataTypeService.addColumnListeners(o),o}applyColumnState(e,t,r){const n=zc(t.flex);if(n!==void 0&&e.setFlex(n),e.getFlex()<=0){const a=zc(t.width);if(a!=null)e.setActualWidth(a,r);else{const l=e.getActualWidth();e.setActualWidth(l,r)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort,r):e.setSort(void 0,r));const s=zc(t.sortIndex);s!==void 0&&e.setSortIndex(s);const o=uw(t.hide);o!==void 0&&e.setVisible(!o,r),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let r=0;r<t.length;r++){const n=t[r].getUserProvidedColDef();if(!n)continue;if(e.colId!=null){if(t[r].getId()===e.colId)return{idx:r,column:t[r]};continue}if(e.field!=null){if(n.field===e.field)return{idx:r,column:t[r]};continue}if(n===e)return{idx:r,column:t[r]}}}findExistingGroup(e,t){if(e.groupId!=null)for(let n=0;n<t.length;n++){const i=t[n];if(i.getColGroupDef()&&i.getId()===e.groupId)return{idx:n,group:i}}}addColumnDefaultAndTypes(e,t){const r={},n=this.gos.get("defaultColDef");qi(r,n,!1,!0);const i=this.dataTypeService.updateColDefAndGetColumnType(r,e,t);i&&this.assignColumnTypes(i,r),qi(r,e,!1,!0);const s=this.gos.get("autoGroupColumnDef"),o=this.gos.isColumnsSortingCoupledToGroup();return e.rowGroup&&s&&o&&qi(r,{sort:s.sort,initialSort:s.initialSort},!1,!0),this.dataTypeService.validateColDef(r),r}assignColumnTypes(e,t){if(!e.length)return;const r=Object.assign({},mX),n=this.gos.get("columnTypes")||{};oi(n,(i,s)=>{i in r?console.warn(`AG Grid: the column type '${i}' is a default column type and cannot be overridden.`):(s.type&&ot("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),r[i]=s)}),e.forEach(i=>{const s=r[i.trim()];s?qi(t,s,!1,!0):console.warn("AG Grid: colDef.type '"+i+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};S([F("dataTypeService")],Mm.prototype,"dataTypeService",2);S([Go(0,Ys("loggerFactory"))],Mm.prototype,"setBeans",1);Mm=S([$e("columnFactory")],Mm);function el(e,t,r){if(t)for(let n=0;n<t.length;n++){const i=t[n];i instanceof rn&&el(i,i.getChildren(),r),r(i,e)}}var DS=class la{constructor(t,r,n,i){this.displayedChildren=[],this.localEventService=new qo,this.groupId=r,this.partId=n,this.providedColumnGroup=t,this.pinned=i}static createUniqueId(t,r){return t+"_"+r}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(t){this.parent=t}getUniqueId(){return la.createUniqueId(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const t=this.getProvidedColumnGroup().getLeafColumns();return!t||t.length===0?!1:t.every(r=>r.isMoving())}checkLeft(){if(this.displayedChildren.forEach(t=>{t instanceof la&&t.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const r=Wt(this.displayedChildren).getLeft();this.setLeft(r)}else{const t=this.displayedChildren[0].getLeft();this.setLeft(t)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(t){this.oldLeft=this.left,this.left!==t&&(this.left=t,this.localEventService.dispatchEvent(this.createAgEvent(la.EVENT_LEFT_CHANGED)))}getPinned(){return this.pinned}createAgEvent(t){return{type:t}}addEventListener(t,r){this.localEventService.addEventListener(t,r)}removeEventListener(t,r){this.localEventService.removeEventListener(t,r)}getGroupId(){return this.groupId}getPartId(){return this.partId}isChildInThisGroupDeepSearch(t){let r=!1;return this.children.forEach(n=>{t===n&&(r=!0),n instanceof la&&n.isChildInThisGroupDeepSearch(t)&&(r=!0)}),r}getActualWidth(){let t=0;return this.displayedChildren&&this.displayedChildren.forEach(r=>{t+=r.getActualWidth()}),t}isResizable(){if(!this.displayedChildren)return!1;let t=!1;return this.displayedChildren.forEach(r=>{r.isResizable()&&(t=!0)}),t}getMinWidth(){let t=0;return this.displayedChildren.forEach(r=>{t+=r.getMinWidth()||0}),t}addChild(t){this.children||(this.children=[]),this.children.push(t)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const t=[];return this.addLeafColumns(t),t}getDisplayedLeafColumns(){const t=[];return this.addDisplayedLeafColumns(t),t}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(t){this.providedColumnGroup.setExpanded(t)}addDisplayedLeafColumns(t){this.displayedChildren.forEach(r=>{r instanceof ar?t.push(r):r instanceof la&&r.addDisplayedLeafColumns(t)})}addLeafColumns(t){this.children.forEach(r=>{r instanceof ar?t.push(r):r instanceof la&&r.addLeafColumns(t)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const t=this.getParent();return!this.isPadding()||!t||!t.isPadding()?0:1+t.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let t=this;for(;t!=null&&t.isPadding();)t=t.getParent();if(!(t?t.providedColumnGroup.isExpandable():!1)){this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(la.EVENT_DISPLAYED_CHILDREN_CHANGED));return}this.children.forEach(n=>{if(n instanceof la&&(!n.displayedChildren||!n.displayedChildren.length))return;switch(n.getColumnGroupShow()){case"open":t.providedColumnGroup.isExpanded()&&this.displayedChildren.push(n);break;case"closed":t.providedColumnGroup.isExpanded()||this.displayedChildren.push(n);break;default:this.displayedChildren.push(n);break}}),this.localEventService.dispatchEvent(this.createAgEvent(la.EVENT_DISPLAYED_CHILDREN_CHANGED))}};DS.EVENT_LEFT_CHANGED="leftChanged";DS.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged";S([F("gridOptionsService")],DS.prototype,"gos",2);var wn=DS,_=class{};_.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged";_.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded";_.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged";_.EVENT_PIVOT_MAX_COLUMNS_EXCEEDED="pivotMaxColumnsExceeded";_.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged";_.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll";_.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged";_.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged";_.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged";_.EVENT_COLUMN_MOVED="columnMoved";_.EVENT_COLUMN_VISIBLE="columnVisible";_.EVENT_COLUMN_PINNED="columnPinned";_.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened";_.EVENT_COLUMN_RESIZED="columnResized";_.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged";_.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED="suppressMovableColumns";_.EVENT_SUPPRESS_MENU_HIDE_CHANGED="suppressMenuHide";_.EVENT_SUPPRESS_FIELD_DOT_NOTATION="suppressFieldDotNotation";_.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged";_.EVENT_COLUMN_HEADER_MOUSE_OVER="columnHeaderMouseOver";_.EVENT_COLUMN_HEADER_MOUSE_LEAVE="columnHeaderMouseLeave";_.EVENT_COLUMN_HEADER_CLICKED="columnHeaderClicked";_.EVENT_COLUMN_HEADER_CONTEXT_MENU="columnHeaderContextMenu";_.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed";_.EVENT_ROW_GROUP_OPENED="rowGroupOpened";_.EVENT_ROW_DATA_UPDATED="rowDataUpdated";_.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged";_.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged";_.EVENT_CHART_CREATED="chartCreated";_.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged";_.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged";_.EVENT_CHART_DESTROYED="chartDestroyed";_.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged";_.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged";_.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart";_.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd";_.EVENT_MODEL_UPDATED="modelUpdated";_.EVENT_CUT_START="cutStart";_.EVENT_CUT_END="cutEnd";_.EVENT_PASTE_START="pasteStart";_.EVENT_PASTE_END="pasteEnd";_.EVENT_FILL_START="fillStart";_.EVENT_FILL_END="fillEnd";_.EVENT_RANGE_DELETE_START="rangeDeleteStart";_.EVENT_RANGE_DELETE_END="rangeDeleteEnd";_.EVENT_UNDO_STARTED="undoStarted";_.EVENT_UNDO_ENDED="undoEnded";_.EVENT_REDO_STARTED="redoStarted";_.EVENT_REDO_ENDED="redoEnded";_.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart";_.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd";_.EVENT_CELL_CLICKED="cellClicked";_.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked";_.EVENT_CELL_MOUSE_DOWN="cellMouseDown";_.EVENT_CELL_CONTEXT_MENU="cellContextMenu";_.EVENT_CELL_VALUE_CHANGED="cellValueChanged";_.EVENT_CELL_EDIT_REQUEST="cellEditRequest";_.EVENT_ROW_VALUE_CHANGED="rowValueChanged";_.EVENT_CELL_FOCUSED="cellFocused";_.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared";_.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused";_.EVENT_ROW_SELECTED="rowSelected";_.EVENT_SELECTION_CHANGED="selectionChanged";_.EVENT_TOOLTIP_SHOW="tooltipShow";_.EVENT_TOOLTIP_HIDE="tooltipHide";_.EVENT_CELL_KEY_DOWN="cellKeyDown";_.EVENT_CELL_MOUSE_OVER="cellMouseOver";_.EVENT_CELL_MOUSE_OUT="cellMouseOut";_.EVENT_FILTER_CHANGED="filterChanged";_.EVENT_FILTER_MODIFIED="filterModified";_.EVENT_FILTER_OPENED="filterOpened";_.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged";_.EVENT_SORT_CHANGED="sortChanged";_.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved";_.EVENT_ROW_CLICKED="rowClicked";_.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked";_.EVENT_GRID_READY="gridReady";_.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed";_.EVENT_GRID_SIZE_CHANGED="gridSizeChanged";_.EVENT_VIEWPORT_CHANGED="viewportChanged";_.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged";_.EVENT_FIRST_DATA_RENDERED="firstDataRendered";_.EVENT_DRAG_STARTED="dragStarted";_.EVENT_DRAG_STOPPED="dragStopped";_.EVENT_CHECKBOX_CHANGED="checkboxChanged";_.EVENT_ROW_EDITING_STARTED="rowEditingStarted";_.EVENT_ROW_EDITING_STOPPED="rowEditingStopped";_.EVENT_CELL_EDITING_STARTED="cellEditingStarted";_.EVENT_CELL_EDITING_STOPPED="cellEditingStopped";_.EVENT_BODY_SCROLL="bodyScroll";_.EVENT_BODY_SCROLL_END="bodyScrollEnd";_.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged";_.EVENT_PAGINATION_CHANGED="paginationChanged";_.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged";_.EVENT_STORE_REFRESHED="storeRefreshed";_.EVENT_STATE_UPDATED="stateUpdated";_.EVENT_COLUMN_MENU_VISIBLE_CHANGED="columnMenuVisibleChanged";_.EVENT_CONTEXT_MENU_VISIBLE_CHANGED="contextMenuVisibleChanged";_.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged";_.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED="columnContainerWidthChanged";_.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged";_.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged";_.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged";_.EVENT_FLASH_CELLS="flashCells";_.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged";_.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged";_.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged";_.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged";_.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged";_.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged";_.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged";_.EVENT_ROW_DRAG_ENTER="rowDragEnter";_.EVENT_ROW_DRAG_MOVE="rowDragMove";_.EVENT_ROW_DRAG_LEAVE="rowDragLeave";_.EVENT_ROW_DRAG_END="rowDragEnd";_.EVENT_GRID_STYLES_CHANGED="gridStylesChanged";_.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest";_.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest";_.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest";_.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest";_.EVENT_STORE_UPDATED="storeUpdated";_.EVENT_FILTER_DESTROYED="filterDestroyed";_.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted";_.EVENT_ROW_COUNT_READY="rowCountReady";_.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged";_.EVENT_DATA_TYPES_INFERRED="dataTypesInferred";_.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged";_.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected";_.EVENT_SIDE_BAR_UPDATED="sideBarUpdated";var o0=new Set([_.EVENT_GRID_PRE_DESTROYED,_.EVENT_FILL_START]),X4=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let r;return typeof t!="number"?r=0:r=t+1,this.existingIds[e]=r,r}},Bp="ag-Grid-AutoColumn",Om=class extends Ae{createAutoGroupColumns(e){const t=[],r=this.gos.get("treeData");let n=this.gos.isGroupMultiAutoColumn();return r&&n&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),n=!1),n?e.forEach((i,s)=>{t.push(this.createOneAutoGroupColumn(i,s))}):t.push(this.createOneAutoGroupColumn()),t}updateAutoGroupColumns(e,t){e.forEach((r,n)=>this.updateOneAutoGroupColumn(r,n,t))}createOneAutoGroupColumn(e,t){let r;e?r=`${Bp}-${e.getId()}`:r=Bp;const n=this.createAutoGroupColDef(r,e,t);n.colId=r;const i=new ar(n,null,r,!0);return this.context.createBean(i),i}updateOneAutoGroupColumn(e,t,r){const n=e.getColDef(),i=typeof n.showRowGroup=="string"?n.showRowGroup:void 0,s=i!=null?this.columnModel.getPrimaryColumn(i):void 0,o=this.createAutoGroupColDef(e.getId(),s??void 0,t);e.setColDef(o,null,r),this.columnFactory.applyColumnState(e,o,r)}createAutoGroupColDef(e,t,r){let n=this.createBaseColDef(t);const i=this.gos.get("autoGroupColumnDef");qi(n,i),n=this.columnFactory.addColumnDefaultAndTypes(n,e),this.gos.get("treeData")||gt(n.field)&&gt(n.valueGetter)&&gt(n.filterValueGetter)&&n.filter!=="agGroupColumnFilter"&&(n.filter=!1),r&&r>0&&(n.headerCheckboxSelection=!1);const s=this.gos.isColumnsSortingCoupledToGroup(),o=n.valueGetter||n.field!=null;return s&&!o&&(n.sortIndex=void 0,n.initialSort=void 0),n}createBaseColDef(e){const t=this.gos.get("autoGroupColumnDef"),n={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(t&&(t.cellRenderer||t.cellRendererSelector)||(n.cellRenderer="agGroupCellRenderer"),e){const s=e.getColDef();Object.assign(n,{headerName:this.columnModel.getDisplayNameForColumn(e,"header"),headerValueGetter:s.headerValueGetter}),s.cellRenderer&&Object.assign(n,{cellRendererParams:{innerRenderer:s.cellRenderer,innerRendererParams:s.cellRendererParams}}),n.showRowGroup=e.getColId()}else n.showRowGroup=!0;return n}};S([F("columnModel")],Om.prototype,"columnModel",2);S([F("columnFactory")],Om.prototype,"columnFactory",2);Om=S([$e("autoGroupColService")],Om);var Z4={};On(Z4,{camelCaseToHumanText:()=>J4,camelCaseToHyphenated:()=>ez,capitalise:()=>PX,escapeString:()=>sn,utf8_encode:()=>EX});var SX=/[&<>"']/g,xX={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function EX(e){const t=String.fromCharCode;function r(d){const p=[];if(!d)return[];const f=d.length;let m=0,y,C;for(;m<f;)y=d.charCodeAt(m++),y>=55296&&y<=56319&&m<f?(C=d.charCodeAt(m++),(C&64512)==56320?p.push(((y&1023)<<10)+(C&1023)+65536):(p.push(y),m--)):p.push(y);return p}function n(d){if(d>=55296&&d<=57343)throw Error("Lone surrogate U+"+d.toString(16).toUpperCase()+" is not a scalar value")}function i(d,p){return t(d>>p&63|128)}function s(d){if(d>=0&&d<=31&&d!==10)return`_x${d.toString(16).toUpperCase().padStart(4,"0")}_`;if(!(d&4294967168))return t(d);let p="";return d&4294965248?d&4294901760?d&4292870144||(p=t(d>>18&7|240),p+=i(d,12),p+=i(d,6)):(n(d),p=t(d>>12&15|224),p+=i(d,6)):p=t(d>>6&31|192),p+=t(d&63|128),p}const o=r(e),a=o.length;let l=-1,c,u="";for(;++l<a;)c=o[l],u+=s(c);return u}function PX(e){return e[0].toUpperCase()+e.substring(1).toLowerCase()}function sn(e,t){if(e==null)return null;const r=e.toString().toString();return t?r:r.replace(SX,n=>xX[n])}function J4(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,r=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(r,"$1 $2$3").replace(/\./g," ").split(" ").map(i=>i.substring(0,1).toUpperCase()+(i.length>1?i.substring(1,i.length):"")).join(" ")}function ez(e){return e.replace(/[A-Z]/g,t=>`-${t.toLocaleLowerCase()}`)}var tz={};On(tz,{convertToMap:()=>yc,keys:()=>TX,mapById:()=>RX});function yc(e){const t=new Map;return e.forEach(r=>t.set(r[0],r[1])),t}function RX(e,t){const r=new Map;return e.forEach(n=>r.set(t(n),n)),r}function TX(e){const t=[];return e.forEach((r,n)=>t.push(n)),t}var Mn=class extends Ae{constructor(){super(...arguments),this.primaryHeaderRowCount=0,this.secondaryHeaderRowCount=0,this.gridHeaderRowCount=0,this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.displayedColumnsAndGroupsMap={},this.viewportColumns=[],this.viewportColumnsHash="",this.headerViewportColumns=[],this.viewportColumnsCenter=[],this.headerViewportColumnsCenter=[],this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.autoHeightActiveAtLeastOnce=!1,this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[],this.ready=!1,this.changeEventsDispatching=!1,this.autoGroupsNeedBuilding=!1,this.forceRecreateAutoGroups=!1,this.pivotMode=!1,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}init(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation");const e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.buildAutoGroupColumns(ep(t.source))),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged(ep(t.source))),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],t=>this.onSharedColDefChanged(ep(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gos.get("pivotMode"),ep(t.source))),this.addManagedListener(this.eventService,_.EVENT_FIRST_DATA_RENDERED,()=>this.onFirstDataRendered())}buildAutoGroupColumns(e){this.columnDefs&&(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns(e))}onAutoGroupColumnDefChanged(e){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,e)}onSharedColDefChanged(e){this.gridColumns&&(this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,e),this.createColumnsFromColumnDefs(!0,e))}setColumnDefs(e,t){const r=!!this.columnDefs;this.columnDefs=e,this.createColumnsFromColumnDefs(r,t)}recreateColumnDefs(e){this.onSharedColDefChanged(e)}destroyOldColumns(e,t){const r={};if(!e)return;el(null,e,i=>{r[i.getInstanceId()]=i}),t&&el(null,t,i=>{r[i.getInstanceId()]=null});const n=Object.values(r).filter(i=>i!=null);this.destroyBeans(n)}destroyColumns(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)}createColumnsFromColumnDefs(e,t){const r=e?this.compareColumnStatesAndDispatchEvents(t):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;const n=this.primaryColumns,i=this.primaryColumnTree,s=this.columnFactory.createColumnTree(this.columnDefs,!0,i,t);this.destroyOldColumns(this.primaryColumnTree,s.columnTree),this.primaryColumnTree=s.columnTree,this.primaryHeaderRowCount=s.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(l=>this.primaryColumnsMap[l.getId()]=l),this.extractRowGroupColumns(t,n),this.extractPivotColumns(t,n),this.extractValueColumns(t,n),this.ready=!0;const o=this.gridColsArePrimary===void 0;(this.gridColsArePrimary||o||this.autoGroupsNeedBuilding)&&(this.updateGridColumns(),e&&this.gridColsArePrimary&&!this.gos.get("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(t),this.checkViewportColumns()),this.dispatchEverythingChanged(t),this.changeEventsDispatching=!0,r&&r(),this.changeEventsDispatching=!1,this.dispatchNewColumnsLoaded(t)}shouldRowModelIgnoreRefresh(){return this.changeEventsDispatching}dispatchNewColumnsLoaded(e){const t={type:_.EVENT_NEW_COLUMNS_LOADED,source:e};this.eventService.dispatchEvent(t),e==="gridInitializing"&&this.onColumnsReady()}dispatchEverythingChanged(e){const t={type:_.EVENT_COLUMN_EVERYTHING_CHANGED,source:e};this.eventService.dispatchEvent(t)}orderGridColumnsLikePrimary(){const e=this.primaryColumns;if(!e)return;const t=e.filter(n=>this.gridColumns.indexOf(n)>=0),r=this.gridColumns.filter(n=>t.indexOf(n)<0);this.gridColumns=[...r,...t],this.gridColumns=this.placeLockedColumns(this.gridColumns)}getAllDisplayedAutoHeightCols(){return this.displayedAutoHeightCols}setViewport(){this.gos.get("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)}checkViewportColumns(e=!1){if(this.displayedColumnsCenter==null||!this.extractViewport())return;const r={type:_.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll:e};this.eventService.dispatchEvent(r)}setViewportPosition(e,t,r=!1){(e!==this.scrollWidth||t!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=e,this.scrollPosition=t,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(r))}isPivotMode(){return this.pivotMode}isPivotSettingAllowed(e){return e&&this.gos.get("treeData")?(ot("Pivot mode not available with treeData."),!1):!0}setPivotMode(e,t){if(e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=e,!this.gridColumns))return;this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(t);const r={type:_.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(r)}getSecondaryPivotColumn(e,t){if(gt(this.secondaryColumns))return null;const r=this.getPrimaryColumn(t);let n=null;return this.secondaryColumns.forEach(i=>{const s=i.getColDef().pivotKeys,o=i.getColDef().pivotValueColumn;Ca(s,e)&&o===r&&(n=i)}),n}setBeans(e){this.logger=e.create("columnModel")}setFirstRightAndLastLeftPinned(e){let t,r;this.gos.get("enableRtl")?(t=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,r=this.displayedColumnsRight?Wt(this.displayedColumnsRight):null):(t=this.displayedColumnsLeft?Wt(this.displayedColumnsLeft):null,r=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(n=>{n.setLastLeftPinned(n===t,e),n.setFirstRightPinned(n===r,e)})}autoSizeColumns(e){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeColumns(e));return}const{columns:t,skipHeader:r,skipHeaderGroups:n,stopAtGroup:i,source:s="api"}=e;this.animationFrameService.flushAllFrames();const o=[];let a=-1;const l=r??this.gos.get("skipHeaderOnAutoSize"),c=n??l;for(;a!==0;)a=0,this.actionOnGridColumns(t,u=>{if(o.indexOf(u)>=0)return!1;const d=this.autoWidthCalculator.getPreferredWidthForColumn(u,l);if(d>0){const p=this.normaliseColumnWidth(u,d);u.setActualWidth(p,s),o.push(u),a++}return!0},s);c||this.autoSizeColumnGroupsByColumns(t,s,i),this.dispatchColumnResizedEvent(o,!0,"autosizeColumns")}dispatchColumnResizedEvent(e,t,r,n=null){if(e&&e.length){const i={type:_.EVENT_COLUMN_RESIZED,columns:e,column:e.length===1?e[0]:null,flexColumns:n,finished:t,source:r};this.eventService.dispatchEvent(i)}}dispatchColumnChangedEvent(e,t,r){const n={type:e,columns:t,column:t&&t.length==1?t[0]:null,source:r};this.eventService.dispatchEvent(n)}dispatchColumnMovedEvent(e){const{movedColumns:t,source:r,toIndex:n,finished:i}=e,s={type:_.EVENT_COLUMN_MOVED,columns:t,column:t&&t.length===1?t[0]:null,toIndex:n,finished:i,source:r};this.eventService.dispatchEvent(s)}dispatchColumnPinnedEvent(e,t){if(!e.length)return;const r=e.length===1?e[0]:null,n=this.getCommonValue(e,s=>s.getPinned()),i={type:_.EVENT_COLUMN_PINNED,pinned:n??null,columns:e,column:r,source:t};this.eventService.dispatchEvent(i)}dispatchColumnVisibleEvent(e,t){if(!e.length)return;const r=e.length===1?e[0]:null,n=this.getCommonValue(e,s=>s.isVisible()),i={type:_.EVENT_COLUMN_VISIBLE,visible:n,columns:e,column:r,source:t};this.eventService.dispatchEvent(i)}autoSizeColumn(e,t,r){e&&this.autoSizeColumns({columns:[e],skipHeader:r,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,r){const n=new Set;this.getGridColumns(e).forEach(a=>{let l=a.getParent();for(;l&&l!=r;)l.isPadding()||n.add(l),l=l.getParent()});let s;const o=[];for(const a of n){for(const l of this.ctrlsService.getHeaderRowContainerCtrls())if(s=l.getHeaderCtrlForColumn(a),s)break;s&&s.resizeLeafColumnsToFit(t)}return o}autoSizeAllColumns(e,t){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeAllColumns(e,t));return}const r=this.getAllDisplayedColumns();this.autoSizeColumns({columns:r,skipHeader:t,source:e})}getColumnsFromTree(e){const t=[],r=n=>{for(let i=0;i<n.length;i++){const s=n[i];s instanceof ar?t.push(s):s instanceof rn&&r(s.getChildren())}};return r(e),t}getAllDisplayedTrees(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null}getPrimaryColumnTree(){return this.primaryColumnTree}getHeaderRowCount(){return this.gridHeaderRowCount}getDisplayedTreeLeft(){return this.displayedTreeLeft}getDisplayedTreeRight(){return this.displayedTreeRight}getDisplayedTreeCentre(){return this.displayedTreeCentre}isColumnDisplayed(e){return this.getAllDisplayedColumns().indexOf(e)>=0}getAllDisplayedColumns(){return this.displayedColumns}getViewportColumns(){return this.viewportColumns}getDisplayedLeftColumnsForRow(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsLeft):this.displayedColumnsLeft}getDisplayedRightColumnsForRow(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsRight):this.displayedColumnsRight}isColSpanActive(){return this.colSpanActive}getDisplayedColumnsForRow(e,t,r,n){const i=[];let s=null;for(let o=0;o<t.length;o++){const a=t[o],l=t.length-o,c=Math.min(a.getColSpan(e),l),u=[a];if(c>1){const p=c-1;for(let f=1;f<=p;f++)u.push(t[o+f]);o+=p}let d;r?(d=!1,u.forEach(p=>{r(p)&&(d=!0)})):d=!0,d&&(i.length===0&&s&&(n&&n(a))&&i.push(s),i.push(a)),s=a}return i}getViewportCenterColumnsForRow(e){if(!this.colSpanActive)return this.viewportColumnsCenter;const t=n=>{const i=n.getLeft();return xe(i)&&i>this.viewportLeft},r=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(e,this.displayedColumnsCenter,r,t)}isColumnAtEdge(e,t){const r=this.getAllDisplayedColumns();if(!r.length)return!1;const n=t==="first";let i;if(e instanceof wn){const s=e.getDisplayedLeafColumns();if(!s.length)return!1;i=n?s[0]:Wt(s)}else i=e;return(n?r[0]:Wt(r))===i}getAriaColumnIndex(e){let t;return e instanceof wn?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,r=t+e.getActualWidth(),n=this.viewportLeft-200,i=this.viewportRight+200,s=t<n&&r<n,o=t>i&&r>i;return!s&&!o}getDisplayedColumnsLeftWidth(){return this.getWidthOfColsInList(this.displayedColumnsLeft)}getDisplayedColumnsRightWidth(){return this.getWidthOfColsInList(this.displayedColumnsRight)}updatePrimaryColumnList(e,t,r,n,i,s){if(!e||Ks(e))return;let o=!1;if(e.forEach(l=>{if(!l)return;const c=this.getPrimaryColumn(l);if(c){if(r){if(t.indexOf(c)>=0)return;t.push(c)}else{if(t.indexOf(c)<0)return;zi(t,c)}n(c),o=!0}}),!o)return;this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(s);const a={type:i,columns:t,column:t.length===1?t[0]:null,source:s};this.eventService.dispatchEvent(a)}setRowGroupColumns(e,t){this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(e,this.rowGroupColumns,_.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),t)}setRowGroupActive(e,t,r){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,r),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.setColumnsVisible([t],!1,r),!e&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnsVisible([t],!0,r))}addRowGroupColumns(e,t){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),_.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}removeRowGroupColumns(e,t){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),_.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}addPivotColumns(e,t){this.updatePrimaryColumnList(e,this.pivotColumns,!0,r=>r.setPivotActive(!0,t),_.EVENT_COLUMN_PIVOT_CHANGED,t)}setPivotColumns(e,t){this.setPrimaryColumnList(e,this.pivotColumns,_.EVENT_COLUMN_PIVOT_CHANGED,!0,(r,n)=>{n.setPivotActive(r,t)},t)}removePivotColumns(e,t){this.updatePrimaryColumnList(e,this.pivotColumns,!1,r=>r.setPivotActive(!1,t),_.EVENT_COLUMN_PIVOT_CHANGED,t)}setPrimaryColumnList(e,t,r,n,i,s){if(!this.gridColumns)return;const o=new Map;t.forEach((a,l)=>o.set(a,l)),t.length=0,xe(e)&&e.forEach(a=>{const l=this.getPrimaryColumn(a);l&&t.push(l)}),t.forEach((a,l)=>{const c=o.get(a);if(c===void 0){o.set(a,0);return}n&&c!==l||o.delete(a)}),(this.primaryColumns||[]).forEach(a=>{const l=t.indexOf(a)>=0;i(l,a)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(s),this.dispatchColumnChangedEvent(r,[...o.keys()],s)}setValueColumns(e,t){this.setPrimaryColumnList(e,this.valueColumns,_.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),t)}setValueActive(e,t,r){if(e!==t.isValueActive()&&(t.setValueActive(e,r),e&&!t.getAggFunc()&&this.aggFuncService)){const n=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(n)}}addValueColumns(e,t){this.updatePrimaryColumnList(e,this.valueColumns,!0,this.setValueActive.bind(this,!0),_.EVENT_COLUMN_VALUE_CHANGED,t)}removeValueColumns(e,t){this.updatePrimaryColumnList(e,this.valueColumns,!1,this.setValueActive.bind(this,!1),_.EVENT_COLUMN_VALUE_CHANGED,t)}normaliseColumnWidth(e,t){const r=e.getMinWidth();xe(r)&&t<r&&(t=r);const n=e.getMaxWidth();return xe(n)&&e.isGreaterThanMax(t)&&(t=n),t}getPrimaryOrGridColumn(e){return this.getPrimaryColumn(e)||this.getGridColumn(e)}setColumnWidths(e,t,r,n){const i=[];e.forEach(s=>{const o=this.getPrimaryOrGridColumn(s.key);if(!o)return;if(i.push({width:s.newWidth,ratios:[1],columns:[o]}),this.gos.get("colResizeDefault")==="shift"&&(t=!t),t){const l=this.getDisplayedColAfter(o);if(!l)return;const c=o.getActualWidth()-s.newWidth,u=l.getActualWidth()+c;i.push({width:u,ratios:[1],columns:[l]})}}),i.length!==0&&this.resizeColumnSets({resizeSets:i,finished:r,source:n})}checkMinAndMaxWidthsForSet(e){const{columns:t,width:r}=e;let n=0,i=0,s=!0;t.forEach(l=>{const c=l.getMinWidth();n+=c||0;const u=l.getMaxWidth();xe(u)&&u>0?i+=u:s=!1});const o=r>=n,a=!s||r<=i;return o&&a}resizeColumnSets(e){const{resizeSets:t,finished:r,source:n}=e;if(!(!t||t.every(u=>this.checkMinAndMaxWidthsForSet(u)))){if(r){const u=t&&t.length>0?t[0].columns:null;this.dispatchColumnResizedEvent(u,r,n)}return}const s=[],o=[];t.forEach(u=>{const{width:d,columns:p,ratios:f}=u,m={},y={};p.forEach(b=>o.push(b));let C=!0,w=0;for(;C;){if(w++,w>1e3){console.error("AG Grid: infinite loop in resizeColumnSets");break}C=!1;const b=[];let x=0,E=d;p.forEach((k,P)=>{if(y[k.getId()])E-=m[k.getId()];else{b.push(k);const D=f[P];x+=D}});const I=1/x;b.forEach((k,P)=>{const A=P===b.length-1;let D;A?D=E:(D=Math.round(f[P]*d*I),E-=D);const L=k.getMinWidth(),M=k.getMaxWidth();xe(L)&&D<L?(D=L,y[k.getId()]=!0,C=!0):xe(M)&&M>0&&D>M&&(D=M,y[k.getId()]=!0,C=!0),m[k.getId()]=D})}p.forEach(b=>{const x=m[b.getId()];b.getActualWidth()!==x&&(b.setActualWidth(x,n),s.push(b))})});const a=s.length>0;let l=[];a&&(l=this.refreshFlexedColumns({resizingCols:o,skipSetLeft:!0}),this.setLeftValues(n),this.updateBodyWidths(),this.checkViewportColumns());const c=o.concat(l);(a||r)&&this.dispatchColumnResizedEvent(c,r,n,l)}setColumnAggFunc(e,t,r){if(!e)return;const n=this.getPrimaryColumn(e);n&&(n.setAggFunc(t),this.dispatchColumnChangedEvent(_.EVENT_COLUMN_VALUE_CHANGED,[n],r))}moveRowGroupColumn(e,t,r){if(this.isRowGroupEmpty())return;const n=this.rowGroupColumns[e],i=this.rowGroupColumns.slice(e,t);this.rowGroupColumns.splice(e,1),this.rowGroupColumns.splice(t,0,n);const s={type:_.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:i,column:i.length===1?i[0]:null,source:r};this.eventService.dispatchEvent(s)}moveColumns(e,t,r,n=!0){if(!this.gridColumns)return;if(this.columnAnimationService.start(),t>this.gridColumns.length-e.length){console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+t),console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");return}const i=this.getGridColumns(e);this.doesMovePassRules(i,t)&&(ET(this.gridColumns,i,t),this.updateDisplayedColumns(r),this.dispatchColumnMovedEvent({movedColumns:i,source:r,toIndex:t,finished:n}),this.columnAnimationService.finish())}doesMovePassRules(e,t){const r=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(r)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){const r=this.gridColumns.slice();return ET(r,e,t),r}sortColumnsLikeGridColumns(e){!e||e.length<=1||e.filter(r=>this.gridColumns.indexOf(r)<0).length>0||e.sort((r,n)=>{const i=this.gridColumns.indexOf(r),s=this.gridColumns.indexOf(n);return i-s})}doesMovePassLockedPositions(e){let t=0,r=!0;const n=i=>i?i===!0||i==="left"?0:2:1;return e.forEach(i=>{const s=n(i.getColDef().lockPosition);s<t&&(r=!1),t=s}),r}doesMovePassMarryChildren(e){let t=!0;return el(null,this.gridBalancedTree,r=>{if(!(r instanceof rn))return;const n=r,i=n.getColGroupDef();if(!(i&&i.marryChildren))return;const o=[];n.getLeafColumns().forEach(d=>{const p=e.indexOf(d);o.push(p)});const a=Math.max.apply(Math,o),l=Math.min.apply(Math,o),c=a-l,u=n.getLeafColumns().length-1;c>u&&(t=!1)}),t}moveColumnByIndex(e,t,r){if(!this.gridColumns)return;const n=this.gridColumns[e];this.moveColumns([n],t,r)}getColumnDefs(){if(!this.primaryColumns)return;const e=this.primaryColumns.slice();return this.gridColsArePrimary?e.sort((t,r)=>this.gridColumns.indexOf(t)-this.gridColumns.indexOf(r)):this.lastPrimaryOrder&&e.sort((t,r)=>this.lastPrimaryOrder.indexOf(t)-this.lastPrimaryOrder.indexOf(r)),this.columnDefFactory.buildColumnDefs(e,this.rowGroupColumns,this.pivotColumns)}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}updateBodyWidths(){const e=this.getWidthOfColsInList(this.displayedColumnsCenter),t=this.getWidthOfColsInList(this.displayedColumnsLeft),r=this.getWidthOfColsInList(this.displayedColumnsRight);if(this.bodyWidthDirty=this.bodyWidth!==e,this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==r){this.bodyWidth=e,this.leftWidth=t,this.rightWidth=r;const i={type:_.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED};this.eventService.dispatchEvent(i);const s={type:_.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(s)}}getValueColumns(){return this.valueColumns?this.valueColumns:[]}getPivotColumns(){return this.pivotColumns?this.pivotColumns:[]}isPivotActive(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode}getRowGroupColumns(){return this.rowGroupColumns?this.rowGroupColumns:[]}getDisplayedCenterColumns(){return this.displayedColumnsCenter}getDisplayedLeftColumns(){return this.displayedColumnsLeft}getDisplayedRightColumns(){return this.displayedColumnsRight}getAllPrimaryColumns(){return this.primaryColumns?this.primaryColumns:null}getSecondaryColumns(){return this.secondaryColumns?this.secondaryColumns:null}getAllColumnsForQuickFilter(){return this.columnsForQuickFilter}getAllGridColumns(){var e;return(e=this.gridColumns)!=null?e:[]}isRowGroupEmpty(){return Ks(this.rowGroupColumns)}setColumnsVisible(e,t=!1,r){this.applyColumnState({state:e.map(n=>({colId:typeof n=="string"?n:n.getColId(),hide:!t}))},r)}setColumnsPinned(e,t,r){if(!this.gridColumns)return;if(this.gos.isDomLayout("print")){console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let n;t===!0||t==="left"?n="left":t==="right"?n="right":n=null,this.actionOnGridColumns(e,i=>i.getPinned()!==n?(i.setPinned(n),!0):!1,r,()=>({type:_.EVENT_COLUMN_PINNED,pinned:n,column:null,columns:null,source:r})),this.columnAnimationService.finish()}actionOnGridColumns(e,t,r,n){if(Ks(e))return;const i=[];if(e.forEach(s=>{if(!s)return;const o=this.getGridColumn(s);if(!o)return;t(o)!==!1&&i.push(o)}),!!i.length&&(this.updateDisplayedColumns(r),xe(n)&&n)){const s=n();s.columns=i,s.column=i.length===1?i[0]:null,this.eventService.dispatchEvent(s)}}getDisplayedColBefore(e){const t=this.getAllDisplayedColumns(),r=t.indexOf(e);return r>0?t[r-1]:null}getDisplayedColAfter(e){const t=this.getAllDisplayedColumns(),r=t.indexOf(e);return r<t.length-1?t[r+1]:null}getDisplayedGroupAtDirection(e,t){const r=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),n=e.getDisplayedLeafColumns(),i=t==="After"?Wt(n):n[0],s=`getDisplayedCol${t}`;for(;;){const o=this[s](i);if(!o)return null;const a=this.getColumnGroupAtLevel(o,r);if(a!==e)return a}}getColumnGroupAtLevel(e,t){let r=e.getParent(),n,i;for(;n=r.getProvidedColumnGroup().getLevel(),i=r.getPaddingLevel(),!(n+i<=t);)r=r.getParent();return r}isPinningLeft(){return this.displayedColumnsLeft.length>0}isPinningRight(){return this.displayedColumnsRight.length>0}getPrimaryAndSecondaryAndAutoColumns(){return[].concat(this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[])}createStateItemFromColumn(e){const t=e.isRowGroupActive()?this.rowGroupColumns.indexOf(e):null,r=e.isPivotActive()?this.pivotColumns.indexOf(e):null,n=e.isValueActive()?e.getAggFunc():null,i=e.getSort()!=null?e.getSort():null,s=e.getSortIndex()!=null?e.getSortIndex():null,o=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:i,sortIndex:s,aggFunc:n,rowGroup:e.isRowGroupActive(),rowGroupIndex:t,pivot:e.isPivotActive(),pivotIndex:r,flex:o}}getColumnState(){if(gt(this.primaryColumns)||!this.isAlive())return[];const t=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(t),t}orderColumnStateList(e){const t=yc(this.gridColumns.map((r,n)=>[r.getColId(),n]));e.sort((r,n)=>{const i=t.has(r.colId)?t.get(r.colId):-1,s=t.has(n.colId)?t.get(n.colId):-1;return i-s})}resetColumnState(e){if(Ks(this.primaryColumns))return;const t=this.getColumnsFromTree(this.primaryColumnTree),r=[];let n=1e3,i=1e3,s=[];this.groupAutoColumns&&(s=s.concat(this.groupAutoColumns)),t&&(s=s.concat(t)),s.forEach(o=>{const a=this.getColumnStateFromColDef(o);gt(a.rowGroupIndex)&&a.rowGroup&&(a.rowGroupIndex=n++),gt(a.pivotIndex)&&a.pivot&&(a.pivotIndex=i++),r.push(a)}),this.applyColumnState({state:r,applyOrder:!0},e)}getColumnStateFromColDef(e){const t=(m,y)=>m??y??null,r=e.getColDef(),n=t(r.sort,r.initialSort),i=t(r.sortIndex,r.initialSortIndex),s=t(r.hide,r.initialHide),o=t(r.pinned,r.initialPinned),a=t(r.width,r.initialWidth),l=t(r.flex,r.initialFlex);let c=t(r.rowGroupIndex,r.initialRowGroupIndex),u=t(r.rowGroup,r.initialRowGroup);c==null&&(u==null||u==!1)&&(c=null,u=null);let d=t(r.pivotIndex,r.initialPivotIndex),p=t(r.pivot,r.initialPivot);d==null&&(p==null||p==!1)&&(d=null,p=null);const f=t(r.aggFunc,r.initialAggFunc);return{colId:e.getColId(),sort:n,sortIndex:i,hide:s,pinned:o,width:a,flex:l,rowGroup:u,rowGroupIndex:c,pivot:p,pivotIndex:d,aggFunc:f}}applyColumnState(e,t){if(Ks(this.primaryColumns))return!1;if(e&&e.state&&!e.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const r=(s,o,a)=>{const l=this.compareColumnStatesAndDispatchEvents(t);this.autoGroupsNeedBuilding=!0;const c=o.slice(),u={},d={},p=[],f=[];let m=0;const y=this.rowGroupColumns.slice(),C=this.pivotColumns.slice();s.forEach(E=>{const I=E.colId||"";if(I.startsWith(Bp)){p.push(E),f.push(E);return}const P=a(I);P?(this.syncColumnWithStateItem(P,E,e.defaultState,u,d,!1,t),zi(c,P)):(f.push(E),m+=1)});const w=E=>this.syncColumnWithStateItem(E,null,e.defaultState,u,d,!1,t);c.forEach(w);const b=(E,I,k,P)=>{const A=E[k.getId()],D=E[P.getId()],L=A!=null,M=D!=null;if(L&&M)return A-D;if(L)return-1;if(M)return 1;const T=I.indexOf(k),O=I.indexOf(P),Q=T>=0,X=O>=0;return Q&&X?T-O:Q?-1:1};this.rowGroupColumns.sort(b.bind(this,u,y)),this.pivotColumns.sort(b.bind(this,d,C)),this.updateGridColumns();const x=this.groupAutoColumns?this.groupAutoColumns.slice():[];return p.forEach(E=>{const I=this.getAutoColumn(E.colId);zi(x,I),this.syncColumnWithStateItem(I,E,e.defaultState,null,null,!0,t)}),x.forEach(w),this.applyOrderAfterApplyState(e),this.updateDisplayedColumns(t),this.dispatchEverythingChanged(t),l(),{unmatchedAndAutoStates:f,unmatchedCount:m}};this.columnAnimationService.start();let{unmatchedAndAutoStates:n,unmatchedCount:i}=r(e.state||[],this.primaryColumns||[],s=>this.getPrimaryColumn(s));return(n.length>0||xe(e.defaultState))&&(i=r(n,this.secondaryColumns||[],s=>this.getSecondaryColumn(s)).unmatchedCount),this.columnAnimationService.finish(),i===0}applyOrderAfterApplyState(e){if(!e.applyOrder||!e.state)return;let t=[];const r={};e.state.forEach(i=>{if(!i.colId||r[i.colId])return;const s=this.gridColumnsMap[i.colId];s&&(t.push(s),r[i.colId]=!0)});let n=0;if(this.gridColumns.forEach(i=>{const s=i.getColId();if(r[s]!=null)return;s.startsWith(Bp)?Nm(t,i,n++):t.push(i)}),t=this.placeLockedColumns(t),!this.doesMovePassMarryChildren(t)){console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.gridColumns=t}compareColumnStatesAndDispatchEvents(e){const t={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},r=this.getColumnState(),n={};return r.forEach(i=>{n[i.colId]=i}),()=>{const i=this.getPrimaryAndSecondaryAndAutoColumns(),s=(y,C,w,b)=>{const x=C.map(b),E=w.map(b);if(Ca(x,E))return;const k=new Set(C);w.forEach(D=>{k.delete(D)||k.add(D)});const P=[...k],A={type:y,columns:P,column:P.length===1?P[0]:null,source:e};this.eventService.dispatchEvent(A)},o=y=>{const C=[];return i.forEach(w=>{const b=n[w.getColId()];b&&y(b,w)&&C.push(w)}),C},a=y=>y.getColId();s(_.EVENT_COLUMN_ROW_GROUP_CHANGED,t.rowGroupColumns,this.rowGroupColumns,a),s(_.EVENT_COLUMN_PIVOT_CHANGED,t.pivotColumns,this.pivotColumns,a);const c=o((y,C)=>{const w=y.aggFunc!=null,b=w!=C.isValueActive(),x=w&&y.aggFunc!=C.getAggFunc();return b||x});c.length>0&&this.dispatchColumnChangedEvent(_.EVENT_COLUMN_VALUE_CHANGED,c,e);const u=(y,C)=>y.width!=C.getActualWidth();this.dispatchColumnResizedEvent(o(u),!0,e);const d=(y,C)=>y.pinned!=C.getPinned();this.dispatchColumnPinnedEvent(o(d),e);const p=(y,C)=>y.hide==C.isVisible();this.dispatchColumnVisibleEvent(o(p),e);const m=o((y,C)=>y.sort!=C.getSort()||y.sortIndex!=C.getSortIndex());m.length>0&&this.sortController.dispatchSortChangedEvents(e,m),this.normaliseColumnMovedEventForColumnState(r,e)}}getCommonValue(e,t){if(!e||e.length==0)return;const r=t(e[0]);for(let n=1;n<e.length;n++)if(r!==t(e[n]))return;return r}normaliseColumnMovedEventForColumnState(e,t){const r=this.getColumnState(),n={};r.forEach(l=>n[l.colId]=l);const i={};e.forEach(l=>{n[l.colId]&&(i[l.colId]=!0)});const s=e.filter(l=>i[l.colId]),o=r.filter(l=>i[l.colId]),a=[];o.forEach((l,c)=>{const u=s&&s[c];if(u&&u.colId!==l.colId){const d=this.getGridColumn(u.colId);d&&a.push(d)}}),a.length&&this.dispatchColumnMovedEvent({movedColumns:a,source:t,finished:!0})}syncColumnWithStateItem(e,t,r,n,i,s,o){var a;if(!e)return;const l=(E,I)=>{const k={value1:void 0,value2:void 0};let P=!1;return t&&(t[E]!==void 0&&(k.value1=t[E],P=!0),xe(I)&&t[I]!==void 0&&(k.value2=t[I],P=!0)),!P&&r&&(r[E]!==void 0&&(k.value1=r[E]),xe(I)&&r[I]!==void 0&&(k.value2=r[I])),k},c=l("hide").value1;c!==void 0&&e.setVisible(!c,o);const u=l("pinned").value1;u!==void 0&&e.setPinned(u);const d=(a=e.getColDef().minWidth)!=null?a:this.environment.getMinColWidth(),p=l("flex").value1;if(p!==void 0&&e.setFlex(p),p==null){const E=l("width").value1;E!=null&&d!=null&&E>=d&&e.setActualWidth(E,o)}const f=l("sort").value1;f!==void 0&&(f==="desc"||f==="asc"?e.setSort(f,o):e.setSort(void 0,o));const m=l("sortIndex").value1;if(m!==void 0&&e.setSortIndex(m),s||!e.isPrimary())return;const y=l("aggFunc").value1;y!==void 0&&(typeof y=="string"?(e.setAggFunc(y),e.isValueActive()||(e.setValueActive(!0,o),this.valueColumns.push(e))):(xe(y)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,o),zi(this.valueColumns,e))));const{value1:C,value2:w}=l("rowGroup","rowGroupIndex");(C!==void 0||w!==void 0)&&(typeof w=="number"||C?(e.isRowGroupActive()||(e.setRowGroupActive(!0,o),this.rowGroupColumns.push(e)),n&&typeof w=="number"&&(n[e.getId()]=w)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,o),zi(this.rowGroupColumns,e)));const{value1:b,value2:x}=l("pivot","pivotIndex");(b!==void 0||x!==void 0)&&(typeof x=="number"||b?(e.isPivotActive()||(e.setPivotActive(!0,o),this.pivotColumns.push(e)),i&&typeof x=="number"&&(i[e.getId()]=x)):e.isPivotActive()&&(e.setPivotActive(!1,o),zi(this.pivotColumns,e)))}getGridColumns(e){return this.getColumns(e,this.getGridColumn.bind(this))}getColumns(e,t){const r=[];return e&&e.forEach(n=>{const i=t(n);i&&r.push(i)}),r}getColumnWithValidation(e){if(e==null)return null;const t=this.getGridColumn(e);return t||console.warn("AG Grid: could not find column "+e),t}getPrimaryColumn(e){return this.primaryColumns?this.getColumn(e,this.primaryColumns,this.primaryColumnsMap):null}getGridColumn(e){return this.getColumn(e,this.gridColumns,this.gridColumnsMap)}lookupGridColumn(e){return this.gridColumnsMap[e]}getSecondaryColumn(e){return this.secondaryColumns?this.getColumn(e,this.secondaryColumns,this.secondaryColumnsMap):null}getColumn(e,t,r){if(!e||!r)return null;if(typeof e=="string"&&r[e])return r[e];for(let n=0;n<t.length;n++)if(this.columnsMatch(t[n],e))return t[n];return this.getAutoColumn(e)}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupColumns.slice(0);const r=this.getPrimaryColumn(t);return r?[r]:null}getAutoColumn(e){return!this.groupAutoColumns||!xe(this.groupAutoColumns)||gt(this.groupAutoColumns)?null:this.groupAutoColumns.find(t=>this.columnsMatch(t,e))||null}columnsMatch(e,t){const r=e===t,n=e.getColDef()===t,i=e.getColId()==t;return r||n||i}getDisplayNameForColumn(e,t,r=!1){if(!e)return null;const n=this.getHeaderName(e.getColDef(),e,null,null,t);return r?this.wrapHeaderNameWithAggFunc(e,n):n}getDisplayNameForProvidedColumnGroup(e,t,r){const n=t?t.getColGroupDef():null;return n?this.getHeaderName(n,null,e,t,r):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,r,n,i){const s=e.headerValueGetter;if(s){const o=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:r,providedColumnGroup:n,location:i});return typeof s=="function"?s(o):typeof s=="string"?this.expressionService.evaluate(s,o):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return J4(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;const r=e.getColDef().pivotValueColumn,n=xe(r);let i=null,s;if(n){const o=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&this.valueColumns.length===1,a=e.getColDef().pivotTotalColumnIds!==void 0;if(o&&!a)return t;i=r?r.getAggFunc():null,s=!0}else{const o=e.isValueActive(),a=this.pivotMode||!this.isRowGroupEmpty();o&&a?(i=e.getAggFunc(),s=!0):s=!1}if(s){const o=typeof i=="string"?i:"func";return`${this.localeService.getLocaleTextFunc()(o,o)}(${t})`}return t}getColumnGroup(e,t){if(!e)return null;if(e instanceof wn)return e;const r=this.getAllDisplayedTrees(),n=typeof t=="number";let i=null;return ju(r,!1,s=>{if(s instanceof wn){const o=s;let a;n?a=e===o.getGroupId()&&t===o.getPartId():a=e===o.getGroupId(),a&&(i=o)}}),i}isReady(){return this.ready}extractValueColumns(e,t){this.valueColumns=this.extractColumns(t,this.valueColumns,(r,n)=>r.setValueActive(n,e),()=>{},()=>{},r=>{const n=r.aggFunc;if(n===null||n==="")return null;if(n!==void 0)return!!n},r=>r.initialAggFunc!=null&&r.initialAggFunc!=""),this.valueColumns.forEach(r=>{const n=r.getColDef();n.aggFunc!=null&&n.aggFunc!=""?r.setAggFunc(n.aggFunc):r.getAggFunc()||r.setAggFunc(n.initialAggFunc)})}extractRowGroupColumns(e,t){this.rowGroupColumns=this.extractColumns(t,this.rowGroupColumns,(r,n)=>r.setRowGroupActive(n,e),r=>r.rowGroupIndex,r=>r.initialRowGroupIndex,r=>r.rowGroup,r=>r.initialRowGroup)}extractColumns(e=[],t=[],r,n,i,s,o){const a=[],l=[];(this.primaryColumns||[]).forEach(d=>{const p=e.indexOf(d)<0,f=d.getColDef(),m=uw(s(f)),y=uw(o(f)),C=zc(n(f)),w=zc(i(f));let b;m!==void 0?b=m:C!==void 0?C===null?b=!1:b=C>=0:p?y!==void 0?b=y:w!==void 0?b=w!=null&&w>=0:b=!1:b=t.indexOf(d)>=0,b&&((p?C!=null||w!=null:C!=null)?a.push(d):l.push(d))});const c=d=>{const p=n(d.getColDef()),f=i(d.getColDef());return p??f};a.sort((d,p)=>{const f=c(d),m=c(p);return f===m?0:f<m?-1:1});const u=[].concat(a);return t.forEach(d=>{l.indexOf(d)>=0&&u.push(d)}),l.forEach(d=>{u.indexOf(d)<0&&u.push(d)}),t.forEach(d=>{u.indexOf(d)<0&&r(d,!1)}),u.forEach(d=>{t.indexOf(d)<0&&r(d,!0)}),u}extractPivotColumns(e,t){this.pivotColumns=this.extractColumns(t,this.pivotColumns,(r,n)=>r.setPivotActive(n,e),r=>r.pivotIndex,r=>r.initialPivotIndex,r=>r.pivot,r=>r.initialPivot)}resetColumnGroupState(e){if(!this.primaryColumnTree)return;const t=[];el(null,this.primaryColumnTree,r=>{if(r instanceof rn){const n=r.getColGroupDef(),i={groupId:r.getGroupId(),open:n?n.openByDefault:void 0};t.push(i)}}),this.setColumnGroupState(t,e)}getColumnGroupState(){const e=[];return el(null,this.gridBalancedTree,t=>{t instanceof rn&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})}),e}setColumnGroupState(e,t){if(!this.gridBalancedTree)return;this.columnAnimationService.start();const r=[];if(e.forEach(n=>{const i=n.groupId,s=n.open,o=this.getProvidedColumnGroup(i);o&&o.isExpanded()!==s&&(this.logger.log("columnGroupOpened("+o.getGroupId()+","+s+")"),o.setExpanded(s),r.push(o))}),this.updateGroupsAndDisplayedColumns(t),this.setFirstRightAndLastLeftPinned(t),r.length){const n={type:_.EVENT_COLUMN_GROUP_OPENED,columnGroup:rn.length===1?r[0]:void 0,columnGroups:r};this.eventService.dispatchEvent(n)}this.columnAnimationService.finish()}setColumnGroupOpened(e,t,r){let n;e instanceof rn?n=e.getId():n=e||"",this.setColumnGroupState([{groupId:n,open:t}],r)}getProvidedColumnGroup(e){typeof e!="string"&&console.error("AG Grid: group key must be a string");let t=null;return el(null,this.gridBalancedTree,r=>{r instanceof rn&&r.getId()===e&&(t=r)}),t}calculateColumnsForDisplay(){let e;return this.pivotMode&&gt(this.secondaryColumns)?e=this.gridColumns.filter(t=>{const r=this.groupAutoColumns&&Ps(this.groupAutoColumns,t),n=this.valueColumns&&Ps(this.valueColumns,t);return r||n}):e=this.gridColumns.filter(t=>this.groupAutoColumns&&Ps(this.groupAutoColumns,t)||t.isVisible()),e}checkColSpanActiveInCols(e){let t=!1;return e.forEach(r=>{xe(r.getColDef().colSpan)&&(t=!0)}),t}calculateColumnsForGroupDisplay(){this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};const e=t=>{const r=t.getColDef(),n=r.showRowGroup;r&&xe(n)&&(this.groupDisplayColumns.push(t),typeof n=="string"?this.groupDisplayColumnsMap[n]=t:n===!0&&this.getRowGroupColumns().forEach(i=>{this.groupDisplayColumnsMap[i.getId()]=t}))};this.gridColumns.forEach(e)}getGroupDisplayColumns(){return this.groupDisplayColumns}getGroupDisplayColumnForGroup(e){return this.groupDisplayColumnsMap[e]}updateDisplayedColumns(e){const t=this.calculateColumnsForDisplay();this.buildDisplayedTrees(t),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e)}isSecondaryColumnsPresent(){return xe(this.secondaryColumns)}setSecondaryColumns(e,t){if(!this.gridColumns)return;const r=e;if(!(!r&&gt(this.secondaryColumns))){if(r){this.processSecondaryColumnDefinitions(e);const n=this.columnFactory.createColumnTree(e,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0,t);this.destroyOldColumns(this.secondaryBalancedTree,n.columnTree),this.secondaryBalancedTree=n.columnTree,this.secondaryHeaderRowCount=n.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(i=>this.secondaryColumnsMap[i.getId()]=i),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(t)}}processSecondaryColumnDefinitions(e){const t=this.gos.get("processPivotResultColDef"),r=this.gos.get("processPivotResultColGroupDef");if(!t&&!r)return;const n=i=>{i.forEach(s=>{if(xe(s.children)){const a=s;r&&r(a),n(a.children)}else t&&t(s)})};e&&n(e)}updateGridColumns(){const e=this.gridBalancedTree;if(this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns,this.createGroupAutoColumnsIfNeeded()){const n=yc(this.groupAutoColumns.map(i=>[i,!0]));this.lastPrimaryOrder&&(this.lastPrimaryOrder=this.lastPrimaryOrder.filter(i=>!n.has(i)),this.lastPrimaryOrder=[...this.groupAutoColumns,...this.lastPrimaryOrder]),this.lastSecondaryOrder&&(this.lastSecondaryOrder=this.lastSecondaryOrder.filter(i=>!n.has(i)),this.lastSecondaryOrder=[...this.groupAutoColumns,...this.lastSecondaryOrder])}let r;if(this.secondaryColumns&&this.secondaryBalancedTree){const n=this.secondaryColumns.some(i=>this.gridColumnsMap[i.getColId()]!==void 0);this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,n&&(r=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,r=this.lastPrimaryOrder);if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(r),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(n=>this.gridColumnsMap[n.getId()]=n),this.setAutoHeightActive(),!Ca(e,this.gridBalancedTree)){const n={type:_.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(n)}}setAutoHeightActive(){this.autoHeightActive=this.gridColumns.filter(e=>e.isAutoHeight()).length>0,this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,this.gos.isRowModelType("clientSide")||this.gos.isRowModelType("serverSide")||ot("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}orderGridColsLike(e){if(gt(e))return;const t=yc(e.map((l,c)=>[l,c]));let r=!0;if(this.gridColumns.forEach(l=>{t.has(l)&&(r=!1)}),r)return;const n=yc(this.gridColumns.map(l=>[l,!0])),i=e.filter(l=>n.has(l)),s=yc(i.map(l=>[l,!0])),o=this.gridColumns.filter(l=>!s.has(l)),a=i.slice();o.forEach(l=>{let c=l.getOriginalParent();if(!c){a.push(l);return}const u=[];for(;!u.length&&c;)c.getLeafColumns().forEach(m=>{const y=a.indexOf(m)>=0,C=u.indexOf(m)<0;y&&C&&u.push(m)}),c=c.getOriginalParent();if(!u.length){a.push(l);return}const d=u.map(f=>a.indexOf(f)),p=Math.max(...d);Nm(a,l,p+1)}),this.gridColumns=a}isPrimaryColumnGroupsPresent(){return this.primaryHeaderRowCount>1}refreshQuickFilterColumns(){var e;let t=(e=this.isPivotMode()&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.secondaryColumns:this.primaryColumns)!=null?e:[];this.groupAutoColumns&&(t=t.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?t:t.filter(r=>r.isVisible()||r.isRowGroupActive())}placeLockedColumns(e){const t=[],r=[],n=[];return e.forEach(i=>{const s=i.getColDef().lockPosition;s==="right"?n.push(i):s==="left"||s===!0?t.push(i):r.push(i)}),[...t,...r,...n]}addAutoGroupToGridColumns(){if(gt(this.groupAutoColumns)){this.destroyOldColumns(this.groupAutoColsBalancedTree),this.groupAutoColsBalancedTree=null;return}this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;const e=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,e),this.groupAutoColsBalancedTree=e,this.gridBalancedTree=e.concat(this.gridBalancedTree)}clearDisplayedAndViewportColumns(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.ariaOrderColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""}updateGroupsAndDisplayedColumns(e){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(e),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();const t={type:_.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(t)}deriveDisplayedColumns(e){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinColumnsAriaOrder(),this.joinDisplayedColumns(),this.setLeftValues(e),this.displayedAutoHeightCols=this.displayedColumns.filter(t=>t.isAutoHeight())}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}joinColumnsAriaOrder(){const e=this.getAllGridColumns(),t=[],r=[],n=[];for(const i of e){const s=i.getPinned();s?s===!0||s==="left"?t.push(i):n.push(i):r.push(i)}this.ariaOrderColumns=t.concat(r).concat(n)}joinDisplayedColumns(){this.gos.get("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)}setLeftValues(e){this.setLeftValuesOfColumns(e),this.setLeftValuesOfGroups()}setLeftValuesOfColumns(e){if(!this.primaryColumns)return;const t=this.getPrimaryAndSecondaryAndAutoColumns().slice(0),r=this.gos.get("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(n=>{if(r){let i=this.getWidthOfColsInList(n);n.forEach(s=>{i-=s.getActualWidth(),s.setLeft(i,e)})}else{let i=0;n.forEach(s=>{s.setLeft(i,e),i+=s.getActualWidth()})}z4(t,n)}),t.forEach(n=>{n.setLeft(null,e)})}setLeftValuesOfGroups(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(e=>{e.forEach(t=>{t instanceof wn&&t.checkLeft()})})}derivedDisplayedColumnsFromDisplayedTree(e,t){t.length=0,ju(e,!0,r=>{r instanceof ar&&t.push(r)})}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}extractViewportColumns(){this.isColumnVirtualisationSuppressed()?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)}getVirtualHeaderGroupRow(e,t){let r;switch(e){case"left":r=this.viewportRowLeft[t];break;case"right":r=this.viewportRowRight[t];break;default:r=this.viewportRowCenter[t];break}return gt(r)&&(r=[]),r}calculateHeaderRows(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};const e={};this.headerViewportColumns.forEach(r=>e[r.getId()]=!0);const t=(r,n,i)=>{let s=!1;for(let o=0;o<r.length;o++){const a=r[o];let l=!1;if(a instanceof ar)l=e[a.getId()]===!0;else{const u=a.getDisplayedChildren();u&&(l=t(u,n,i+1))}l&&(s=!0,n[i]||(n[i]=[]),n[i].push(a))}return s};t(this.displayedTreeLeft,this.viewportRowLeft,0),t(this.displayedTreeRight,this.viewportRowRight,0),t(this.displayedTreeCentre,this.viewportRowCenter,0)}extractViewport(){const e=n=>`${n.getId()}-${n.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.viewportColumns.map(e).join("#"),r=this.viewportColumnsHash!==t;return r&&(this.viewportColumnsHash=t,this.calculateHeaderRows()),r}refreshFlexedColumns(e={}){var t;const r=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];let n=-1;if(e.resizingCols){const p=new Set(e.resizingCols);let f=this.displayedColumnsCenter;for(let m=f.length-1;m>=0;m--)if(p.has(f[m])){n=m;break}}let i=0,s=[],o=0,a=0;for(let p=0;p<this.displayedColumnsCenter.length;p++)this.displayedColumnsCenter[p].getFlex()&&p>n?(s.push(this.displayedColumnsCenter[p]),a+=this.displayedColumnsCenter[p].getFlex(),o+=(t=this.displayedColumnsCenter[p].getMinWidth())!=null?t:0):i+=this.displayedColumnsCenter[p].getActualWidth();if(!s.length)return[];let l=[];i+o>this.flexViewportWidth&&(s.forEach(p=>{var f;return p.setActualWidth((f=p.getMinWidth())!=null?f:0,r)}),l=s,s=[]);const c=[];let u;e:for(;;){u=this.flexViewportWidth-i;const p=u/a;for(let f=0;f<s.length;f++){const m=s[f],y=p*m.getFlex();let C=0;const w=m.getMinWidth(),b=m.getMaxWidth();if(xe(w)&&y<w?C=w:xe(b)&&y>b&&(C=b),C){m.setActualWidth(C,r),ND(s,m),a-=m.getFlex(),l.push(m),i+=m.getActualWidth();continue e}c[f]=Math.round(y)}break}let d=u;return s.forEach((p,f)=>{p.setActualWidth(Math.min(c[f],d),r),l.push(p),d-=c[f]}),e.skipSetLeft||this.setLeftValues(r),e.updateBodyWidths&&this.updateBodyWidths(),e.fireResizedEvent&&this.dispatchColumnResizedEvent(l,!0,r,s),s}sizeColumnsToFit(e,t="sizeColumnsToFit",r,n){var i,s,o,a,l;if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.sizeColumnsToFit(e,t,r,n));return}const c={};n&&((i=n==null?void 0:n.columnLimits)==null||i.forEach(w=>{var b=w,{key:x}=b,E=aX(b,["key"]);c[typeof x=="string"?x:x.getColId()]=E}));const u=this.getAllDisplayedColumns(),d=e===this.getWidthOfColsInList(u);if(e<=0||!u.length||d)return;const p=[],f=[];u.forEach(w=>{w.getColDef().suppressSizeToFit===!0?f.push(w):p.push(w)});const m=p.slice(0);let y=!1;const C=w=>{zi(p,w),f.push(w)};for(p.forEach(w=>{var b,x;w.resetActualWidth(t);const E=c==null?void 0:c[w.getId()],I=(b=E==null?void 0:E.minWidth)!=null?b:n==null?void 0:n.defaultMinWidth,k=(x=E==null?void 0:E.maxWidth)!=null?x:n==null?void 0:n.defaultMaxWidth,P=w.getActualWidth();typeof I=="number"&&P<I?w.setActualWidth(I,t,!0):typeof k=="number"&&P>k&&w.setActualWidth(k,t,!0)});!y;){y=!0;const w=e-this.getWidthOfColsInList(f);if(w<=0)p.forEach(b=>{var x,E;const I=(E=(x=c==null?void 0:c[b.getId()])==null?void 0:x.minWidth)!=null?E:n==null?void 0:n.defaultMinWidth;if(typeof I=="number"){b.setActualWidth(I,t,!0);return}b.setMinimum(t)});else{const b=w/this.getWidthOfColsInList(p);let x=w;for(let E=p.length-1;E>=0;E--){const I=p[E],k=c==null?void 0:c[I.getId()],P=(s=k==null?void 0:k.minWidth)!=null?s:n==null?void 0:n.defaultMinWidth,A=(o=k==null?void 0:k.maxWidth)!=null?o:n==null?void 0:n.defaultMaxWidth,D=(a=I.getMinWidth())!=null?a:0,L=(l=I.getMaxWidth())!=null?l:Number.MAX_VALUE,M=typeof P=="number"&&P>D?P:I.getMinWidth(),T=typeof A=="number"&&A<L?A:I.getMaxWidth();let O=Math.round(I.getActualWidth()*b);xe(M)&&O<M?(O=M,C(I),y=!1):xe(T)&&O>T?(O=T,C(I),y=!1):E===0&&(O=x),I.setActualWidth(O,t,!0),x-=O}}}m.forEach(w=>{w.fireColumnWidthChangedEvent(t)}),this.setLeftValues(t),this.updateBodyWidths(),!r&&this.dispatchColumnResizedEvent(m,!0,t)}buildDisplayedTrees(e){const t=[],r=[],n=[];e.forEach(s=>{switch(s.getPinned()){case"left":t.push(s);break;case"right":r.push(s);break;default:n.push(s);break}});const i=new X4;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(t,i,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(r,i,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(n,i,null,this.displayedTreeCentre),this.updateDisplayedMap()}updateDisplayedMap(){this.displayedColumnsAndGroupsMap={};const e=t=>{this.displayedColumnsAndGroupsMap[t.getUniqueId()]=t};ju(this.displayedTreeCentre,!1,e),ju(this.displayedTreeLeft,!1,e),ju(this.displayedTreeRight,!1,e)}isDisplayed(e){return this.displayedColumnsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){const e=this.getAllDisplayedTrees();ju(e,!1,t=>{t instanceof wn&&t.calculateDisplayedColumns()})}getGroupAutoColumns(){return this.groupAutoColumns}createGroupAutoColumnsIfNeeded(){const e=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;const t=this.gos.isGroupUseEntireRow(this.pivotMode),r=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if((this.rowGroupColumns.length>0||this.gos.get("treeData"))&&!r&&!t){const s=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);if(!this.autoColsEqual(s,this.groupAutoColumns)||e)return this.groupAutoColumns=s,!0}else this.groupAutoColumns=null;return!1}isGroupSuppressAutoColumn(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}autoColsEqual(e,t){return Ca(e,t,(r,n)=>r.getColId()===n.getColId())}getWidthOfColsInList(e){return e.reduce((t,r)=>t+r.getActualWidth(),0)}getFirstDisplayedColumn(){const e=this.gos.get("enableRtl"),t=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];e&&t.reverse();for(let r=0;r<t.length;r++){const n=this[t[r]]();if(n.length)return e?Wt(n):n[0]}return null}setColumnHeaderHeight(e,t){if(e.setAutoHeaderHeight(t)){const n={type:_.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:e,columns:[e],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(n)}}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),t=this.getAllDisplayedColumns().filter(r=>r.isAutoHeaderHeight()).map(r=>r.getAutoHeaderHeight()||0);return Math.max(e,...t)}getHeaderHeight(){var e;return(e=this.gos.get("headerHeight"))!=null?e:this.environment.getFromTheme(25,"headerHeight")}getFloatingFiltersHeight(){var e;return(e=this.gos.get("floatingFiltersHeight"))!=null?e:this.getHeaderHeight()}getGroupHeaderHeight(){var e;return(e=this.gos.get("groupHeaderHeight"))!=null?e:this.getHeaderHeight()}getPivotHeaderHeight(){var e;return(e=this.gos.get("pivotHeaderHeight"))!=null?e:this.getHeaderHeight()}getPivotGroupHeaderHeight(){var e;return(e=this.gos.get("pivotGroupHeaderHeight"))!=null?e:this.getGroupHeaderHeight()}queueResizeOperations(){this.shouldQueueResizeOperations=!0}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}resetColumnDefIntoColumn(e,t){const r=e.getUserProvidedColDef();if(!r)return!1;const n=this.columnFactory.addColumnDefaultAndTypes(r,e.getColId());return e.setColDef(n,r,t),!0}isColumnGroupingLocked(e){const t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||t===0)return!1;if(t===-1)return!0;const r=this.rowGroupColumns.findIndex(n=>n.getColId()===e.getColId());return t>r}generateColumnStateForRowGroupAndPivotIndexes(e,t){let r={};const n=(i,s,o,a,l,c)=>{if(!s.length||!this.primaryColumns)return[];const u=Object.keys(i),d=new Set(u),p=new Set(u),f=new Set(s.map(I=>{const k=I.getColId();return p.delete(k),k}).concat(u)),m=[],y={};let C=0;for(let I=0;I<this.primaryColumns.length;I++){const k=this.primaryColumns[I].getColId();f.has(k)&&(m.push(k),y[k]=C++)}let w=1e3,b=!1,x=0;const E=I=>{const k=y[I];for(let P=x;P<k;P++){const A=m[P];p.has(A)&&(i[A][l]=w++,p.delete(A))}x=k};s.forEach(I=>{const k=I.getColId();if(d.has(k))E(k),i[k][l]=w++;else{const P=I.getColDef();(P[l]===null||P[l]===void 0&&P[c]==null)&&(b||(P[o]||P[o]===void 0&&P[a]?E(k):(p.forEach(L=>{i[L][l]=w+y[L]}),w+=m.length,b=!0)),r[k]||(r[k]={colId:k}),r[k][l]=w++)}})};return n(e,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),n(t,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(r)}onColumnsReady(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){const{columnLimits:r,defaultMinWidth:n,defaultMaxWidth:i}=e,s=r==null?void 0:r.map(({colId:o,minWidth:a,maxWidth:l})=>({key:o,minWidth:a,maxWidth:l}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:n,defaultMaxWidth:i,columnLimits:s})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if((e==null?void 0:e.type)!=="fitCellContents")return;const{colIds:t,skipHeader:r}=e;setTimeout(()=>{t?this.autoSizeColumns({columns:t,skipHeader:r,source:"autosizeColumns"}):this.autoSizeAllColumns("autosizeColumns",r)})}};S([F("expressionService")],Mn.prototype,"expressionService",2);S([F("columnFactory")],Mn.prototype,"columnFactory",2);S([F("displayedGroupCreator")],Mn.prototype,"displayedGroupCreator",2);S([F("ctrlsService")],Mn.prototype,"ctrlsService",2);S([F("autoWidthCalculator")],Mn.prototype,"autoWidthCalculator",2);S([F("columnAnimationService")],Mn.prototype,"columnAnimationService",2);S([F("autoGroupColService")],Mn.prototype,"autoGroupColService",2);S([F("valueCache")],Mn.prototype,"valueCache",2);S([F("animationFrameService")],Mn.prototype,"animationFrameService",2);S([F("sortController")],Mn.prototype,"sortController",2);S([F("columnDefFactory")],Mn.prototype,"columnDefFactory",2);S([rr("aggFuncService")],Mn.prototype,"aggFuncService",2);S([_e],Mn.prototype,"init",1);S([Ni],Mn.prototype,"destroyColumns",1);S([Go(0,Ys("loggerFactory"))],Mn.prototype,"setBeans",1);Mn=S([$e("columnModel")],Mn);function ep(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function ju(e,t,r){if(e)for(let n=0;n<e.length;n++){const i=e[n];if(i instanceof wn){const s=t?i.getDisplayedChildren():i.getChildren();ju(s,t,r)}r(i)}}var RT=class extends Ae{createDisplayedGroups(e,t,r,n){const i=this.mapOldGroupsById(n),s=[];let o=e;for(;o.length;){const a=o;o=[];let l=0;const c=u=>{const d=l;l=u;const p=a[d],m=(p instanceof wn?p.getProvidedColumnGroup():p).getOriginalParent();if(m==null){for(let C=d;C<u;C++)s.push(a[C]);return}const y=this.createColumnGroup(m,t,i,r);for(let C=d;C<u;C++)y.addChild(a[C]);o.push(y)};for(let u=1;u<a.length;u++){const d=a[u],f=(d instanceof wn?d.getProvidedColumnGroup():d).getOriginalParent(),m=a[l],C=(m instanceof wn?m.getProvidedColumnGroup():m).getOriginalParent();f!==C&&c(u)}l<a.length&&c(a.length)}return this.setupParentsIntoColumns(s,null),s}createColumnGroup(e,t,r,n){const i=e.getGroupId(),s=t.getInstanceIdForKey(i),o=wn.createUniqueId(i,s);let a=r[o];return a&&a.getProvidedColumnGroup()!==e&&(a=null),xe(a)?a.reset():(a=new wn(e,i,s,n),this.context.createBean(a)),a}mapOldGroupsById(e){const t={},r=n=>{n.forEach(i=>{if(i instanceof wn){const s=i;t[i.getUniqueId()]=s,r(s.getChildren())}})};return e&&r(e),t}setupParentsIntoColumns(e,t){e.forEach(r=>{if(r.setParent(t),r instanceof wn){const n=r;this.setupParentsIntoColumns(n.getChildren(),n)}})}};RT=S([$e("displayedGroupCreator")],RT);var AX={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,excludeHiddenColumnsFromQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,enableChartToolPanelsButton:!0,suppressChartToolPanelsButton:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressParentsInRowNodes:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,suppressAggAtRootLevel:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,functionsPassive:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0},un=class{};un.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];un.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"];un.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];un.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];un.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilterAllLevels","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval"];un.OTHER_PROPERTIES=["suppressStickyTotalRow"];un.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"];un.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];un.FUNCTION_PROPERTIES=[...un.FUNCTIONAL_PROPERTIES,...un.CALLBACK_PROPERTIES];un.ALL_PROPERTIES=[...un.ARRAY_PROPERTIES,...un.OBJECT_PROPERTIES,...un.STRING_PROPERTIES,...un.NUMBER_PROPERTIES,...un.FUNCTION_PROPERTIES,...un.BOOLEAN_PROPERTIES,...un.OTHER_PROPERTIES];var Fm=un,Wn=class a0{static getCallbackForEvent(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}static getGridOptionKeys(){return this.ALL_PROPERTIES_AND_CALLBACKS}static combineAttributesAndGridOptions(t,r){typeof t!="object"&&(t={});const n=tt({},t);return a0.getGridOptionKeys().forEach(s=>{const o=r[s];typeof o<"u"&&o!==a0.VUE_OMITTED_PROPERTY&&(n[s]=o)}),n}static processOnChange(t,r,n){if(!t)return;const i={};let s=!1;if(Object.keys(t).filter(a=>a0.ALL_PROPERTIES_AND_CALLBACKS_SET.has(a)).forEach(a=>{i[a]=t[a],s=!0}),!s)return;r.__internalUpdateGridOptions(i,!0);const o={type:_.EVENT_COMPONENT_STATE_CHANGED};oi(i,(a,l)=>{o[a]=l}),r.dispatchEvent(o)}};Wn.EVENTS=md(_);Wn.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";Wn.EXCLUDED_INTERNAL_EVENTS=[_.EVENT_SCROLLBAR_WIDTH_CHANGED,_.EVENT_CHECKBOX_CHANGED,_.EVENT_HEIGHT_SCALE_CHANGED,_.EVENT_BODY_HEIGHT_CHANGED,_.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,_.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,_.EVENT_SCROLL_VISIBILITY_CHANGED,_.EVENT_COLUMN_HOVER_CHANGED,_.EVENT_FLASH_CELLS,_.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,_.EVENT_DISPLAYED_ROWS_CHANGED,_.EVENT_LEFT_PINNED_WIDTH_CHANGED,_.EVENT_RIGHT_PINNED_WIDTH_CHANGED,_.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,_.EVENT_STORE_UPDATED,_.EVENT_COLUMN_PANEL_ITEM_DRAG_START,_.EVENT_COLUMN_PANEL_ITEM_DRAG_END,_.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,_.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,_.EVENT_FULL_WIDTH_ROW_FOCUSED,_.EVENT_HEADER_HEIGHT_CHANGED,_.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,_.EVENT_CELL_FOCUS_CLEARED,_.EVENT_GRID_STYLES_CHANGED,_.EVENT_FILTER_DESTROYED,_.EVENT_ROW_DATA_UPDATE_STARTED,_.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,_.EVENT_DATA_TYPES_INFERRED,_.EVENT_FIELD_VALUE_CHANGED,_.EVENT_FIELD_PICKER_VALUE_SELECTED,_.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,_.EVENT_SUPPRESS_MENU_HIDE_CHANGED,_.EVENT_SUPPRESS_FIELD_DOT_NOTATION,_.EVENT_ROW_COUNT_READY,_.EVENT_SIDE_BAR_UPDATED];Wn.PUBLIC_EVENTS=Wn.EVENTS.filter(e=>!Ps(Wn.EXCLUDED_INTERNAL_EVENTS,e));Wn.EVENT_CALLBACKS=Wn.EVENTS.map(e=>Wn.getCallbackForEvent(e));Wn.BOOLEAN_PROPERTIES=Fm.BOOLEAN_PROPERTIES;Wn.ALL_PROPERTIES=Fm.ALL_PROPERTIES;Wn.ALL_PROPERTIES_AND_CALLBACKS=[...Wn.ALL_PROPERTIES,...Wn.EVENT_CALLBACKS];Wn.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(Wn.ALL_PROPERTIES_AND_CALLBACKS);var gw=Wn,TT=class extends Ae{constructor(){super(...arguments),this.componentsMappedByName={}}setupComponents(e){e&&e.forEach(t=>this.addComponent(t))}addComponent(e){const r=e.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[r]=e.componentClass}getComponentClass(e){return this.componentsMappedByName[e]}};TT=S([$e("agStackComponentsRegistry")],TT);var rz={};On(rz,{getAriaCheckboxStateName:()=>NS,getAriaLabel:()=>oz,getAriaLevel:()=>_X,getAriaPosInSet:()=>sz,getAriaSortState:()=>iz,removeAriaExpanded:()=>uz,removeAriaSort:()=>mz,setAriaActiveDescendant:()=>GD,setAriaAtomic:()=>az,setAriaChecked:()=>kX,setAriaColCount:()=>pz,setAriaColIndex:()=>BD,setAriaColSpan:()=>fz,setAriaControls:()=>VD,setAriaDescribedBy:()=>DX,setAriaDisabled:()=>LD,setAriaExpanded:()=>Sl,setAriaHidden:()=>Zv,setAriaLabel:()=>As,setAriaLabelledBy:()=>Vp,setAriaLevel:()=>cz,setAriaLive:()=>FD,setAriaMultiSelectable:()=>dz,setAriaPosInSet:()=>IS,setAriaRelevant:()=>lz,setAriaRole:()=>Gr,setAriaRowCount:()=>hz,setAriaRowIndex:()=>jD,setAriaSelected:()=>Hp,setAriaSetSize:()=>kS,setAriaSort:()=>gz});function co(e,t,r){r==null||typeof r=="string"&&r==""?OD(e,t):uo(e,t,r)}function uo(e,t,r){e.setAttribute(nz(t),r.toString())}function OD(e,t){e.removeAttribute(nz(t))}function nz(e){return`aria-${e}`}function Gr(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function iz(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function _X(e){return parseInt(e.getAttribute("aria-level"),10)}function sz(e){return parseInt(e.getAttribute("aria-posinset"),10)}function oz(e){return e.getAttribute("aria-label")}function As(e,t){co(e,"label",t)}function Vp(e,t){co(e,"labelledby",t)}function DX(e,t){co(e,"describedby",t)}function FD(e,t){co(e,"live",t)}function az(e,t){co(e,"atomic",t)}function lz(e,t){co(e,"relevant",t)}function cz(e,t){co(e,"level",t)}function LD(e,t){co(e,"disabled",t)}function Zv(e,t){co(e,"hidden",t)}function GD(e,t){co(e,"activedescendant",t)}function Sl(e,t){uo(e,"expanded",t)}function uz(e){OD(e,"expanded")}function kS(e,t){uo(e,"setsize",t)}function IS(e,t){uo(e,"posinset",t)}function dz(e,t){uo(e,"multiselectable",t)}function hz(e,t){uo(e,"rowcount",t)}function jD(e,t){uo(e,"rowindex",t)}function pz(e,t){uo(e,"colcount",t)}function BD(e,t){uo(e,"colindex",t)}function fz(e,t){uo(e,"colspan",t)}function gz(e,t){uo(e,"sort",t)}function mz(e){OD(e,"sort")}function Hp(e,t){co(e,"selected",t)}function kX(e,t){uo(e,"checked",t===void 0?"mixed":t)}function VD(e,t){co(e,"controls",t.id),Vp(t,e.id)}function NS(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var vz={};On(vz,{browserSupportsPreventScroll:()=>UD,getBodyHeight:()=>wz,getBodyWidth:()=>Cz,getMaxDivHeight:()=>yz,getSafariVersion:()=>HD,getScrollbarWidth:()=>bz,getTabIndex:()=>mw,isBrowserChrome:()=>MS,isBrowserFirefox:()=>zD,isBrowserSafari:()=>Na,isIOSUserAgent:()=>jl,isInvisibleScrollbar:()=>WD,isMacOsUserAgent:()=>$D});var dP,wC,hP,pP,fP,gP,AT,_T;function Na(){return dP===void 0&&(dP=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),dP}function HD(){if(wC===void 0)if(Na()){const e=navigator.userAgent.match(/version\/(\d+)/i);e&&(wC=e[1]!=null?parseFloat(e[1]):0)}else wC=0;return wC}function MS(){if(hP===void 0){const e=window;hP=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return hP}function zD(){return pP===void 0&&(pP=/(firefox)/i.test(navigator.userAgent)),pP}function $D(){return fP===void 0&&(fP=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),fP}function jl(){return gP===void 0&&(gP=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),gP}function UD(){return!Na()||HD()>=15}function mw(e){if(!e)return null;const t=e.tabIndex,r=e.getAttribute("tabIndex");return t===-1&&(r===null||r===""&&!zD())?null:t.toString()}function yz(){if(!document.body)return-1;let e=1e6;const t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,r=document.createElement("div");for(document.body.appendChild(r);;){const n=e*2;if(r.style.height=n+"px",n>t||r.clientHeight!==n)break;e=n}return document.body.removeChild(r),e}function Cz(){var e,t,r;return(r=(e=document.body)==null?void 0:e.clientWidth)!=null?r:window.innerHeight||((t=document.documentElement)==null?void 0:t.clientWidth)||-1}function wz(){var e,t,r;return(r=(e=document.body)==null?void 0:e.clientHeight)!=null?r:window.innerHeight||((t=document.documentElement)==null?void 0:t.clientHeight)||-1}function bz(){return _T==null&&Sz(),_T}function Sz(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let r=t.offsetWidth-t.clientWidth;r===0&&t.clientWidth===0&&(r=null),t.parentNode&&t.parentNode.removeChild(t),r!=null&&(_T=r,AT=r===0)}function WD(){return AT==null&&Sz(),AT}var xz={};On(xz,{dateToFormattedString:()=>gp,parseDateTimeFromString:()=>Yi,serialiseDate:()=>Js});var Ez={};On(Ez,{cleanNumber:()=>IX,createArrayOfNumbers:()=>Pz,decToHex:()=>NX,formatNumberCommas:()=>KD,formatNumberTwoDecimalPlacesAndCommas:()=>MX,padStartWidthZeros:()=>fp,sum:()=>OX});function fp(e,t){return e.toString().padStart(t,"0")}function Pz(e,t){const r=[];for(let n=e;n<=t;n++)r.push(n);return r}function IX(e){return typeof e=="string"&&(e=parseInt(e,10)),typeof e=="number"?Math.floor(e):null}function NX(e,t){let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e&255),e>>>=8;return r}function MX(e,t,r){return typeof e!="number"?"":KD(Math.round(e*100)/100,t,r)}function KD(e,t,r){return typeof e!="number"?"":e.toString().replace(".",r).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function OX(e){return e==null?null:e.reduce((t,r)=>t+r,0)}function Js(e,t=!0,r="-"){if(!e)return null;let n=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(i=>fp(i,2)).join(r);return t&&(n+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(i=>fp(i,2)).join(":")),n}var mP=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function gp(e,t="YYYY-MM-DD"){const r=fp(e.getFullYear(),4),n=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s={YYYY:()=>r.slice(r.length-4,r.length),YY:()=>r.slice(r.length-2,r.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>n[e.getMonth()],MMM:()=>n[e.getMonth()].slice(0,3),MM:()=>fp(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${mP(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${mP(e.getDate())}`,DD:()=>fp(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>i[e.getDay()],ddd:()=>i[e.getDay()].slice(0,3),dd:()=>i[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${mP(e.getDay())}`,d:()=>`${e.getDay()}`},o=new RegExp(Object.keys(s).join("|"),"g");return t.replace(o,a=>a in s?s[a]():a)}function Yi(e){if(!e)return null;const[t,r]=e.split(" ");if(!t)return null;const n=t.split("-").map(d=>parseInt(d,10));if(n.filter(d=>!isNaN(d)).length!==3)return null;const[i,s,o]=n,a=new Date(i,s-1,o);if(a.getFullYear()!==i||a.getMonth()!==s-1||a.getDate()!==o)return null;if(!r||r==="00:00:00")return a;const[l,c,u]=r.split(":").map(d=>parseInt(d,10));return l>=0&&l<24&&a.setHours(l),c>=0&&c<60&&a.setMinutes(c),u>=0&&u<60&&a.setSeconds(u),a}var Rz={};On(Rz,{FOCUSABLE_EXCLUDE:()=>qD,FOCUSABLE_SELECTOR:()=>Tz,addOrRemoveAttribute:()=>Ta,addStylesToElement:()=>tk,bindCellRendererToHtmlElement:()=>nk,clearElement:()=>Zr,copyNodeList:()=>Iz,ensureDomOrder:()=>JD,formatSize:()=>OS,getAbsoluteHeight:()=>QD,getAbsoluteWidth:()=>Lm,getElementRectWithOffset:()=>XD,getElementSize:()=>fu,getInnerHeight:()=>Jv,getInnerWidth:()=>ah,getScrollLeft:()=>jm,insertWithDomOrder:()=>_z,isElementChildOfClass:()=>vd,isFocusableFormField:()=>YD,isHorizontalScrollShowing:()=>Dz,isInDOM:()=>ZD,isNodeOrElement:()=>ey,isRtlNegativeScroll:()=>Gm,isVerticalScrollShowing:()=>kz,isVisible:()=>ns,iterateNamedNodeMap:()=>Nz,loadTemplate:()=>Qi,nodeListForEach:()=>rk,radioCssClass:()=>DT,removeFromParent:()=>jo,setDisabled:()=>zp,setDisplayed:()=>jt,setDomChildOrder:()=>ek,setElementHeight:()=>FX,setElementWidth:()=>Vm,setFixedHeight:()=>yd,setFixedWidth:()=>eo,setScrollLeft:()=>Bm,setVisible:()=>Az});var bC;function DT(e,t,r){const n=e.parentElement;let i=n&&n.firstChild;for(;i;)t&&i.classList.toggle(t,i===e),r&&i.classList.toggle(r,i!==e),i=i.nextSibling}var Tz="[tabindex], input, select, button, textarea, [href]",qD="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function YD(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,n=t.call(e,"input, select, button, textarea"),i=t.call(e,qD),s=ns(e);return n&&!i&&s}function jt(e,t,r={}){const{skipAriaHidden:n}=r;e.classList.toggle("ag-hidden",!t),n||Zv(e,!t)}function Az(e,t,r={}){const{skipAriaHidden:n}=r;e.classList.toggle("ag-invisible",!t),n||Zv(e,!t)}function zp(e,t){const r="disabled",n=t?i=>i.setAttribute(r,""):i=>i.removeAttribute(r);n(e),rk(e.querySelectorAll("input"),i=>n(i))}function vd(e,t,r){let n=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof r=="number"){if(++n>r)break}else if(e===r)break}return!1}function fu(e){const{height:t,width:r,borderTopWidth:n,borderRightWidth:i,borderBottomWidth:s,borderLeftWidth:o,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:u,marginTop:d,marginRight:p,marginBottom:f,marginLeft:m,boxSizing:y}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(r||"0"),borderTopWidth:parseFloat(n||"0"),borderRightWidth:parseFloat(i||"0"),borderBottomWidth:parseFloat(s||"0"),borderLeftWidth:parseFloat(o||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(u||"0"),marginTop:parseFloat(d||"0"),marginRight:parseFloat(p||"0"),marginBottom:parseFloat(f||"0"),marginLeft:parseFloat(m||"0"),boxSizing:y}}function Jv(e){const t=fu(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function ah(e){const t=fu(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function QD(e){const t=fu(e),r=t.marginBottom+t.marginTop;return Math.ceil(e.offsetHeight+r)}function Lm(e){const t=fu(e),r=t.marginLeft+t.marginRight;return Math.ceil(e.offsetWidth+r)}function XD(e){const t=e.getBoundingClientRect(),{borderTopWidth:r,borderLeftWidth:n,borderRightWidth:i,borderBottomWidth:s}=fu(e);return{top:t.top+(r||0),left:t.left+(n||0),right:t.right+(i||0),bottom:t.bottom+(s||0)}}function Gm(){if(typeof bC=="boolean")return bC;const e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(e),e.scrollLeft=1,bC=Math.floor(e.scrollLeft)===0,document.body.removeChild(e),bC}function jm(e,t){let r=e.scrollLeft;return t&&(r=Math.abs(r),MS()&&!Gm()&&(r=e.scrollWidth-e.clientWidth-r)),r}function Bm(e,t,r){r&&(Gm()?t*=-1:(Na()||MS())&&(t=e.scrollWidth-e.clientWidth-t)),e.scrollLeft=t}function Zr(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function jo(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ZD(e){return!!e.offsetParent}function ns(e){const t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!ZD(e)||window.getComputedStyle(e).visibility!=="visible")}function Qi(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function JD(e,t,r){r&&r.nextSibling===t||(r?r.nextSibling?e.insertBefore(t,r.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t))}function ek(e,t){for(let r=0;r<t.length;r++){const n=t[r],i=e.children[r];i!==n&&e.insertBefore(n,i)}}function _z(e,t,r){r?r.insertAdjacentElement("afterend",t):e.firstChild?e.insertAdjacentElement("afterbegin",t):e.appendChild(t)}function tk(e,t){if(t)for(const[r,n]of Object.entries(t)){if(!r||!r.length||n==null)continue;const i=ez(r),s=n.toString(),o=s.replace(/\s*!important/g,""),a=o.length!=s.length?"important":void 0;e.style.setProperty(i,o,a)}}function Dz(e){return e.clientWidth<e.scrollWidth}function kz(e){return e.clientHeight<e.scrollHeight}function Vm(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):eo(e,t)}function eo(e,t){t=OS(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function FX(e,t){t==="flex"?(e.style.removeProperty("height"),e.style.removeProperty("minHeight"),e.style.removeProperty("maxHeight"),e.style.flex="1 1 auto"):yd(e,t)}function yd(e,t){t=OS(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function OS(e){return typeof e=="number"?`${e}px`:e}function ey(e){return e instanceof Node||e instanceof HTMLElement}function Iz(e){if(e==null)return[];const t=[];return rk(e,r=>t.push(r)),t}function Nz(e,t){if(e)for(let r=0;r<e.length;r++){const n=e[r];t(n.name,n.value)}}function Ta(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r.toString())}function rk(e,t){if(e!=null)for(let r=0;r<e.length;r++)t(e[r])}function nk(e,t){e.then(r=>{const n=r.getGui();n!=null&&(typeof n=="object"?t.appendChild(n):t.innerHTML=n)})}var Mz={};On(Mz,{fuzzyCheckStrings:()=>Oz,fuzzySuggestions:()=>ty});function Oz(e,t,r){const n={},i=e.filter(s=>!t.some(o=>o===s));return i.length>0&&i.forEach(s=>n[s]=ty(s,r).values),n}function ty(e,t,r,n){let i=t.map((a,l)=>({value:a,relevance:LX(e.toLowerCase(),a.toLocaleLowerCase()),idx:l}));if(i.sort((a,l)=>l.relevance-a.relevance),r&&(i=i.filter(a=>a.relevance!==0)),i.length>0&&n&&n>0){const l=i[0].relevance*n;i=i.filter(c=>l-c.relevance<0)}const s=[],o=[];for(const a of i)s.push(a.value),o.push(a.idx);return{values:s,indices:o}}function LX(e,t){const r=e.replace(/\s/g,""),n=t.replace(/\s/g,"");let i=0,s=-1;for(let o=0;o<r.length;o++){const a=n.indexOf(r[o],s+1);a!==-1&&(s=a,i+=100-s*100/1e4*100)}return i}var Fz={};On(Fz,{createIcon:()=>zs,createIconNoSpan:()=>kr,iconNameClassMap:()=>Lz});var Lz={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus"};function zs(e,t,r){const n=kr(e,t,r);if(n){const{className:s}=n;if(typeof s=="string"&&s.indexOf("ag-icon")>-1||typeof s=="object"&&s["ag-icon"])return n}const i=document.createElement("span");return i.appendChild(n),i}function kr(e,t,r,n){let i=null;const s=r&&r.getColDef().icons;if(s&&(i=s[e]),t&&!i){const o=t.get("icons");o&&(i=o[e])}if(i){let o;if(typeof i=="function")o=i();else if(typeof i=="string")o=i;else throw new Error("icon from grid options needs to be a string or a function");if(typeof o=="string")return Qi(o);if(ey(o))return o;console.warn("AG Grid: iconRenderer should return back a string or a dom object")}else{const o=document.createElement("span");let a=Lz[e];return a||(n?a=e:(console.warn(`AG Grid: Did not find icon ${e}`),a="")),o.setAttribute("class",`ag-icon ag-icon-${a}`),o.setAttribute("unselectable","on"),Gr(o,"presentation"),o}}var Gz={};On(Gz,{isDeleteKey:()=>Vz,isEventFromPrintableCharacter:()=>FS,isUserSuppressingHeaderKeyboardEvent:()=>jz,isUserSuppressingKeyboardEvent:()=>vw,normaliseQwertyAzerty:()=>Bz});var Y=class{};Y.BACKSPACE="Backspace";Y.TAB="Tab";Y.ENTER="Enter";Y.ESCAPE="Escape";Y.SPACE=" ";Y.LEFT="ArrowLeft";Y.UP="ArrowUp";Y.RIGHT="ArrowRight";Y.DOWN="ArrowDown";Y.DELETE="Delete";Y.F2="F2";Y.PAGE_UP="PageUp";Y.PAGE_DOWN="PageDown";Y.PAGE_HOME="Home";Y.PAGE_END="End";Y.A="KeyA";Y.C="KeyC";Y.D="KeyD";Y.V="KeyV";Y.X="KeyX";Y.Y="KeyY";Y.Z="KeyZ";var GX=65,jX=67,BX=86,VX=68,HX=90,zX=89;function FS(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key.length===1}function vw(e,t,r,n,i){const s=n?n.getColDef().suppressKeyboardEvent:void 0;if(!s)return!1;const o=e.addGridCommonParams({event:t,editing:i,column:n,node:r,data:r.data,colDef:n.getColDef()});return!!(s&&s(o))}function jz(e,t,r,n){const i=n.getDefinition(),s=i&&i.suppressHeaderKeyboardEvent;if(!xe(s))return!1;const o=e.addGridCommonParams({colDef:i,column:n,headerRowIndex:r,event:t});return!!s(o)}function Bz(e){const{keyCode:t}=e;let r;switch(t){case GX:r=Y.A;break;case jX:r=Y.C;break;case BX:r=Y.V;break;case VX:r=Y.D;break;case HX:r=Y.Z;break;case zX:r=Y.Y;break;default:r=e.code}return r}function Vz(e,t=!1){return e===Y.DELETE?!0:!t&&e===Y.BACKSPACE?$D():!1}var Hz={};On(Hz,{areEventsNear:()=>ik});function ik(e,t,r){if(r===0)return!1;const n=Math.abs(e.clientX-t.clientX),i=Math.abs(e.clientY-t.clientY);return Math.max(n,i)<=r}var zz={};On(zz,{sortRowNodesByOrder:()=>$X});function $X(e,t){if(!e)return!1;const r=(o,a)=>{const l=t[o.id],c=t[a.id],u=l!==void 0,d=c!==void 0,p=u&&d,f=!u&&!d;return p?l-c:f?o.__objectId-a.__objectId:u?1:-1};let n,i,s=!1;for(let o=0;o<e.length-1;o++)if(n=e[o],i=e[o+1],r(n,i)>0){s=!0;break}return s?(e.sort(r),!0):!1}var $z={};On($z,{convertToSet:()=>sk});function sk(e){const t=new Set;return e.forEach(r=>t.add(r)),t}var UX=tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt({},rz),B4),vz),xz),Rz),j4),k4),Mz),A4),Fz),Gz),tz),Hz),Ez),_4),zz),$z),Z4),pt=UX,$p=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},on=class l0{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(r=>this.onDone(r),r=>this.onReject(r))}static all(t){return new l0(r=>{let n=t.length;const i=new Array(n);t.forEach((s,o)=>{s.then(a=>{i[o]=a,n--,n===0&&r(i)})})})}static resolve(t=null){return new l0(r=>r(t))}then(t){return new l0(r=>{this.status===1?r(t(this.resolution)):this.waiters.push(n=>r(t(n)))})}resolveNow(t,r){return this.status===1?r(this.resolution):t}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(r=>r(t))}onReject(t){console.warn("TBI")}},ry=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(n=>this.addCssClass(n));return}if(this.cssClassStates[e]!==!0&&e.length){const n=this.getGui();n&&n.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(n=>this.removeCssClass(n));return}if(this.cssClassStates[e]!==!1&&e.length){const n=this.getGui();n&&n.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){const n=(e||"").split(" ");if(n.length>1){n.forEach(i=>this.addOrRemoveCssClass(i,t));return}}if(this.cssClassStates[e]!==t&&e.length){const n=this.getGui();n&&n.classList.toggle(e,t),this.cssClassStates[e]=t}}},ny=class Bu extends Ae{constructor(t,r,n,i){super(),this.parentComp=t,this.tooltipShowDelayOverride=r,this.tooltipHideDelayOverride=n,this.shouldDisplayTooltip=i,this.SHOW_QUICK_TOOLTIP_DIFF=1e3,this.FADE_OUT_TOOLTIP_TIMEOUT=1e3,this.INTERACTIVE_HIDE_DELAY=100,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const t=this.parentComp.getGui();this.tooltipTrigger===0&&(this.addManagedListener(t,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(t,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===1&&(this.addManagedListener(t,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(t,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(t,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(t,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(t,"keydown",this.onKeyDown.bind(this)))}getGridOptionsTooltipDelay(t){const r=this.gos.get(t);return r<0&&ot(`${t} should not be lower than 0`),Math.max(200,r)}getTooltipDelay(t){var r,n;return t==="show"?(r=this.tooltipShowDelayOverride)!=null?r:this.getGridOptionsTooltipDelay("tooltipShowDelay"):(n=this.tooltipHideDelayOverride)!=null?n:this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const t=this.gos.get("tooltipTrigger");return!t||t==="hover"?0:1}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!jl()&&(Bu.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(t)},this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(t))}onMouseMove(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(t){var r;const n=t.relatedTarget,i=this.parentComp.getGui(),s=(r=this.tooltipComp)==null?void 0:r.getGui();this.isInteractingWithTooltip||i.contains(n)||this.interactionEnabled&&(s!=null&&s.contains(n))||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(t){if(this.state!=0||Bu.isLocked)return;let r=0;t&&(r=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),r),this.state=1}isLastTooltipHiddenRecently(){const t=new Date().getTime(),r=Bu.lastTooltipHideTime;return t-r<this.SHOW_QUICK_TOOLTIP_DIFF}setToDoNothing(){this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const t=tt({},this.parentComp.getTooltipParams());if(!xe(t.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;const r=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(t).newAgStackInstance().then(r)}hideTooltip(t){if(!t&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),Bu.lastTooltipHideTime=new Date().getTime());const r={type:_.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(r),this.state=0}newTooltipComponentCallback(t,r){if(this.state!==2||this.tooltipInstanceCount!==t){this.getContext().destroyBean(r);return}const i=r.getGui();this.tooltipComp=r,i.classList.contains("ag-tooltip")||i.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&i.classList.add("ag-tooltip-animate"),this.interactionEnabled&&i.classList.add("ag-tooltip-interactive");const s=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({eChild:i,ariaLabel:s("ariaLabelTooltip","Tooltip")});o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,_.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,_.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===0?(this.tooltipMouseEnterListener=this.addManagedListener(i,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(i,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(i,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(i,"focusout",this.onTooltipFocusOut.bind(this))||null));const a={type:_.EVENT_TOOLTIP_SHOW,tooltipGui:i,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(a),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(t){var r;const n=this.parentComp.getGui(),i=(r=this.tooltipComp)==null?void 0:r.getGui(),s=t.relatedTarget;i!=null&&i.contains(s)||(this.isInteractingWithTooltip=!1,n.contains(s)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(Sr(tt({},t),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(Sr(tt({},t),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const t=this.tooltipPopupDestroyFunc,r=this.tooltipComp,n=this.tooltipTrigger===0?this.FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout(()=>{t(),this.getContext().destroyBean(r)},n),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(t=>{t&&t()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){Bu.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},this.INTERACTIVE_HIDE_DELAY)}unlockService(){Bu.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};ny.isLocked=!1;S([F("popupService")],ny.prototype,"popupService",2);S([F("userComponentFactory")],ny.prototype,"userComponentFactory",2);S([_e],ny.prototype,"postConstruct",1);var WX=ny,Bl=class extends Ae{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){const t="title",r=this.ctrl.getGui();r&&(e!=null&&e!=""?r.setAttribute(t,e):r.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var e,t,r,n;if(this.tooltipManager!=null)return;const i={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new WX(i,(t=(e=this.ctrl).getTooltipShowDelayOverride)==null?void 0:t.call(e),(n=(r=this.ctrl).getTooltipHideDelayOverride)==null?void 0:n.call(r),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){const e=this.ctrl,t=e.getColumn?e.getColumn():void 0,r=e.getColDef?e.getColDef():void 0,n=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:r,column:t,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:n,data:n?n.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0,hideTooltipCallback:()=>{var i;return(i=this.tooltipManager)==null?void 0:i.hideTooltip(!0)}}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}};S([F("beans")],Bl.prototype,"beans",2);S([_e],Bl.prototype,"postConstruct",1);var KX=new $p,iy=class kT extends Ae{constructor(t){super(),this.displayed=!0,this.visible=!0,this.compId=KX.next(),this.cssClassManager=new ry(()=>this.eGui),t&&this.setTemplate(t)}preConstructOnComponent(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips")}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(t){const{newTooltipText:r,showDelayOverride:n,hideDelayOverride:i,location:s,shouldDisplayTooltip:o}=t||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==r&&(this.tooltipText=r);const a=()=>this.tooltipText;r!=null&&(this.tooltipFeature=this.createBean(new Bl({getTooltipValue:a,getGui:()=>this.getGui(),getLocation:()=>s??"UNKNOWN",getColDef:t==null?void 0:t.getColDef,getColumn:t==null?void 0:t.getColumn,getTooltipShowDelayOverride:n!=null?()=>n:void 0,getTooltipHideDelayOverride:i!=null?()=>i:void 0,shouldDisplayTooltip:o})))}createChildComponentsFromTags(t,r){Iz(t.childNodes).forEach(i=>{if(!(i instanceof HTMLElement))return;const s=this.createComponentFromElement(i,o=>{o.getGui()&&this.copyAttributesFromNode(i,o.getGui())},r);if(s){if(s.addItems&&i.children.length){this.createChildComponentsFromTags(i,r);const o=Array.prototype.slice.call(i.children);s.addItems(o)}this.swapComponentForNode(s,t,i)}else i.childNodes&&this.createChildComponentsFromTags(i,r)})}createComponentFromElement(t,r,n){const i=t.nodeName,s=n?n[t.getAttribute("ref")]:void 0,o=this.agStackComponentsRegistry.getComponentClass(i);if(o){kT.elementGettingCreated=t;const a=new o(s);return a.setParentComponent(this),this.createBean(a,null,r),a}return null}copyAttributesFromNode(t,r){Nz(t.attributes,(n,i)=>r.setAttribute(n,i))}swapComponentForNode(t,r,n){const i=t.getGui();r.replaceChild(i,n),r.insertBefore(document.createComment(n.nodeName),i),this.addDestroyFunc(this.destroyBean.bind(this,t)),this.swapInComponentForQuerySelectors(t,n)}swapInComponentForQuerySelectors(t,r){const n=this;this.iterateOverQuerySelectors(i=>{n[i.attributeName]===r&&(n[i.attributeName]=t)})}iterateOverQuerySelectors(t){let r=Object.getPrototypeOf(this);for(;r!=null;){const n=r.__agComponentMetaData,i=RS(r.constructor);n&&n[i]&&n[i].querySelectors&&n[i].querySelectors.forEach(s=>t(s)),r=Object.getPrototypeOf(r)}}activateTabIndex(t){const r=this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(n=>n.setAttribute("tabindex",r.toString()))}setTemplate(t,r){const n=Qi(t);this.setTemplateFromElement(n,r)}setTemplateFromElement(t,r){this.eGui=t,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),r)}createChildComponentsPreConstruct(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())}wireQuerySelectors(){if(!this.eGui)return;const t=this;this.iterateOverQuerySelectors(r=>{const n=s=>t[r.attributeName]=s;if(r.refSelector&&this.getAttribute("ref")===r.refSelector)n(this.eGui);else{const s=this.eGui.querySelector(r.querySelector);s&&n(s.__agComponent||s)}})}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}queryForHtmlInputElement(t){return this.eGui.querySelector(t)}appendChild(t,r){if(t!=null)if(r||(r=this.eGui),ey(t))r.appendChild(t);else{const n=t;r.appendChild(n.getGui())}}isDisplayed(){return this.displayed}setVisible(t,r={}){if(t!==this.visible){this.visible=t;const{skipAriaHidden:n}=r;Az(this.eGui,t,{skipAriaHidden:n})}}setDisplayed(t,r={}){if(t!==this.displayed){this.displayed=t;const{skipAriaHidden:n}=r;jt(this.eGui,t,{skipAriaHidden:n});const i={type:kT.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(i)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const t=this.eGui;t&&t.__agComponent&&(t.__agComponent=void 0),super.destroy()}addGuiEventListener(t,r,n){this.eGui.addEventListener(t,r,n),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,r))}addCssClass(t){this.cssClassManager.addCssClass(t)}removeCssClass(t){this.cssClassManager.removeCssClass(t)}containsCssClass(t){return this.cssClassManager.containsCssClass(t)}addOrRemoveCssClass(t,r){this.cssClassManager.addOrRemoveCssClass(t,r)}getAttribute(t){const{eGui:r}=this;return r?r.getAttribute(t):null}getRefElement(t){return this.queryForHtmlElement(`[ref="${t}"]`)}};iy.EVENT_DISPLAYED_CHANGED="displayedChanged";S([F("agStackComponentsRegistry")],iy.prototype,"agStackComponentsRegistry",2);S([O4],iy.prototype,"preConstructOnComponent",1);S([O4],iy.prototype,"createChildComponentsPreConstruct",1);var mt=iy;function Me(e){return qX.bind(this,`[ref=${e}]`,e)}function qX(e,t,r,n,i){if(e===null){console.error("AG Grid: QuerySelector selector should not be null");return}if(typeof i=="number"){console.error("AG Grid: QuerySelector should be on an attribute");return}YX(r,"querySelectors",{attributeName:n,querySelector:e,refSelector:t})}function YX(e,t,r){const n=QX(e,RS(e.constructor));n[t]||(n[t]=[]),n[t].push(r)}function QX(e,t){return e.__agComponentMetaData||(e.__agComponentMetaData={}),e.__agComponentMetaData[t]||(e.__agComponentMetaData[t]={}),e.__agComponentMetaData[t]}var ok=class extends mt{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(e){this.params=e;const t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),r=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${r("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const r=t.getModelAsString(e);this.eFloatingFilterText.setValue(r)}})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}};S([Me("eFloatingFilterText")],ok.prototype,"eFloatingFilterText",2);S([F("columnModel")],ok.prototype,"columnModel",2);var Uz=class{constructor(e,t,r,n,i){this.alive=!0,this.context=e,this.eParent=n,t.getDateCompDetails(r).newAgStackInstance().then(a=>{if(!this.alive){e.destroyBean(a);return}this.dateComp=a,a&&(n.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),i==null||i(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){jt(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){var t,r;let n=!1;(t=this.dateComp)!=null&&t.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(e)!==null&&(n=!0),!n&&((r=this.dateComp)!=null&&r.onParamsUpdated)&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)!==null&&ot("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}},Wz=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;const t=[["displayKey"],["displayName"],["predicate","test"]],r=n=>n.some(i=>e[i]!=null)?!0:(console.warn(`AG Grid: ignoring FilterOptionDef as it doesn't contain one of '${n}'`),!1);if(!t.every(r)){this.filterOptions=this.filterOptions.filter(n=>n===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},Kz={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},LS=class qz extends Ae{constructor(t,r={}){super(),this.eFocusableElement=t,this.callbacks=r,this.callbacks=tt({shouldStopEventPropagation:()=>!1,onTabKeyDown:n=>{if(n.defaultPrevented)return;const i=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,n.shiftKey);i&&(i.focus(),n.preventDefault())}},r)}postConstruct(){this.eFocusableElement.classList.add(qz.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)}addKeyDownListeners(t){this.addManagedListener(t,"keydown",r=>{if(!(r.defaultPrevented||$o(r))){if(this.callbacks.shouldStopEventPropagation(r)){Yo(r);return}r.key===Y.TAB?this.callbacks.onTabKeyDown(r):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(r)}})}};LS.FOCUS_MANAGED_CLASS="ag-focus-managed";S([F("focusService")],LS.prototype,"focusService",2);S([_e],LS.prototype,"postConstruct",1);var gu=LS,Yz="ag-resizer-wrapper",XX=`<div class="${Yz}">
        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`,Cf=class extends Ae{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,r=t/2-this.getWidth()/2,n=e/2-this.getHeight()/2;this.offsetElement(r,n)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:r,width:n,minHeight:i,height:s,x:o,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,c=0;const u=ns(this.element);if(u){const d=this.findBoundaryElement(),p=window.getComputedStyle(d);if(p.minWidth!=null){const f=d.offsetWidth-this.element.offsetWidth;c=parseInt(p.minWidth,10)-f}if(p.minHeight!=null){const f=d.offsetHeight-this.element.offsetHeight;l=parseInt(p.minHeight,10)-f}}if(this.minHeight=i||l,this.minWidth=r||c,n&&this.setWidth(n),s&&this.setHeight(s),(!n||!s)&&this.refreshSize(),e)this.center();else if(o||a)this.offsetElement(o,a);else if(u&&t){let d=this.boundaryEl,p=!0;if(d||(d=this.findBoundaryElement(),p=!1),d){const f=parseFloat(d.style.top),m=parseFloat(d.style.left);p?this.offsetElement(isNaN(m)?0:m,isNaN(f)?0:f):this.setPosition(m,f)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const r=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(r),this.moveElementDragListener=r):(this.dragService.removeDragSource(r),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{const n=!!e[t],i=this.getResizerElement(t),s={dragStartPixels:0,eElement:i,onDragStart:o=>this.onResizeStart(o,t),onDragging:this.onResize.bind(this),onDragStop:o=>this.onResizeEnd(o,t)};(n||!this.isAlive()&&!n)&&(n?(this.dragService.addDragSource(s),this.resizeListeners.push(s),i.style.pointerEvents="all"):i.style.pointerEvents="none",this.resizable[t]=n)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,r=this.element;let n=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)yd(r,e),e=QD(r),n=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const i=this.getAvailableHeight();i&&e>i&&(e=i)}this.getHeight()!==e&&(n?(r.style.maxHeight="unset",r.style.minHeight="unset"):t?yd(r,e):(r.style.height=`${e}px`,r.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:r}=this.offsetParent;if(!r)return null;const n=this.element.getBoundingClientRect(),i=this.offsetParent.getBoundingClientRect(),s=e?this.position.y:n.top,o=e?0:i.top;let a=0;if(t){const c=this.element.parentElement;if(c){const{bottom:u}=c.getBoundingClientRect();a=u-n.bottom}}return r+o-s-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:r}=this.config;let n=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)eo(t,e),e=Lm(t),n=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:i}=this.offsetParent,s=r?this.position.x:this.element.getBoundingClientRect().left;i&&e+s>i&&(e=i-s)}this.getWidth()!==e&&(n?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?eo(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){const{forcePopupParentAsOffsetParent:r}=this.config,n=r?this.boundaryEl:this.element;n&&(this.popupService.positionPopup({ePopup:n,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(n.style.left),parseFloat(n.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const r=this.getAvailableHeight();this.element.style.setProperty("max-height",`${r}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:r,isTop:n,anywhereWithin:i,topBuffer:s}=e,o=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,l=this.shouldSkipX(t,!!r,!!i,o)?0:o,c=this.shouldSkipY(t,!!n,s,a)?0:a;return{movementX:l,movementY:c}}shouldSkipX(e,t,r,n){const i=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:i.left;let l=a<=0&&s.left>=e.clientX||s.right<=e.clientX&&s.right<=o.right;return l?!0:(t?l=n<0&&e.clientX>a+s.left||n>0&&e.clientX<a+s.left:r?l=n<0&&e.clientX>o.right||n>0&&e.clientX<a+s.left:l=n<0&&e.clientX>o.right||n>0&&e.clientX<o.right,l)}shouldSkipY(e,t,r=0,n){const i=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:i.top;let l=a<=0&&s.top>=e.clientY||s.bottom<=e.clientY&&s.bottom<=o.bottom;return l?!0:(t?l=n<0&&e.clientY>a+s.top+r||n>0&&e.clientY<a+s.top:l=n<0&&e.clientY>o.bottom||n>0&&e.clientY<o.bottom,l)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[ref=eTopLeftResizer]")},top:{element:e.querySelector("[ref=eTopResizer]")},topRight:{element:e.querySelector("[ref=eTopRightResizer]")},right:{element:e.querySelector("[ref=eRightResizer]")},bottomRight:{element:e.querySelector("[ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[ref=eBottomLeftResizer]")},left:{element:e.querySelector("[ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const r=new DOMParser().parseFromString(XX,"text/html").body;e.appendChild(r.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${Yz}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:r,forcePopupParentAsOffsetParent:n}=this.config;!r&&!n&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(r=>!r.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,r=0;for(let n=0;n<e.length;n++){const i=e[n],s=!!i.style.flex&&i.style.flex!=="0 0 auto";if(i===this.element)continue;let o=this.minHeight||0,a=this.minWidth||0;if(s){const l=window.getComputedStyle(i);l.minHeight&&(o=parseInt(l.minHeight,10)),l.minWidth&&(a=parseInt(l.minWidth,10))}else o=i.offsetHeight,a=i.offsetWidth;t+=o,r+=a}return{height:t,width:r}}applySizeToSiblings(e){let t=null;const r=this.getSiblings();if(r){for(let n=0;n<r.length;n++){const i=r[n];i!==t&&(e?i.style.height=`${i.offsetHeight}px`:i.style.width=`${i.offsetWidth}px`,i.style.flex="0 0 auto",i===this.element&&(t=r[n+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:r}=this.config,{isTop:n,isRight:i,isBottom:s,isLeft:o}=this.currentResizer,a=i||o,l=s||n,{movementX:c,movementY:u}=this.calculateMouseMovement({e,isLeft:o,isTop:n}),d=this.position.x,p=this.position.y;let f=0,m=0;if(a&&c){const y=o?-1:1,C=this.getWidth(),w=C+c*y;let b=!1;o&&(f=C-w,(d+f<=0||w<=this.minWidth)&&(b=!0,f=0)),b||this.setWidth(w)}if(l&&u){const y=n?-1:1,C=this.getHeight(),w=C+u*y;let b=!1;n?(m=C-w,(p+m<=0||w<=this.minHeight)&&(b=!0,m=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&C<w&&this.getMinSizeOfSiblings().height+w>this.element.parentElement.offsetHeight&&(b=!0),b||this.setHeight(w)}this.updateDragStartPosition(e.clientX,e.clientY),((t||r)&&f||m)&&this.offsetElement(d+f,p+m)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;const r={type:"resize"};this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchEvent(r)}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:r}=this.position;let n;this.config.calculateTopBuffer&&(n=this.config.calculateTopBuffer());const{movementX:i,movementY:s}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:n});this.offsetElement(t+i,r+s),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}};S([F("popupService")],Cf.prototype,"popupService",2);S([F("resizeObserverService")],Cf.prototype,"resizeObserverService",2);S([F("dragService")],Cf.prototype,"dragService",2);var GS=class Ig extends mt{constructor(t){super(),this.filterNameKey=t,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.buttonListeners=[]}postConstruct(){this.resetTemplate(),this.createManagedBean(new gu(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new Cf(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(t){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(t){let r=this.getGui();r&&r.removeEventListener("submit",this.onFormSubmit);const n=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(n,t),r=this.getGui(),r&&r.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(t){this.setParams(t),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(t){this.providedFilterParams=t,this.applyActive=Ig.isUseApplyButton(t),this.resetButtonsPanel()}updateParams(t){this.providedFilterParams=t,this.applyActive=Ig.isUseApplyButton(t),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(){const{buttons:t}=this.providedFilterParams,r=t&&t.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(Zr(this.eButtonsPanel),this.buttonListeners.forEach(s=>s==null?void 0:s()),this.buttonListeners=[]):r&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!r){this.eButtonsPanel&&jo(this.eButtonsPanel);return}const n=document.createDocumentFragment(),i=s=>{let o,a;switch(s){case"apply":o=this.translate("applyFilter"),a=u=>this.onBtApply(!1,!1,u);break;case"clear":o=this.translate("clearFilter"),a=()=>this.onBtClear();break;case"reset":o=this.translate("resetFilter"),a=()=>this.onBtReset();break;case"cancel":o=this.translate("cancelFilter"),a=u=>{this.onBtCancel(u)};break;default:console.warn("AG Grid: Unknown button type specified");return}const c=Qi(`<button
                    type="${s==="apply"?"submit":"button"}"
                    ref="${s}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${o}
                </button>`);this.buttonListeners.push(this.addManagedListener(c,"click",a)),n.append(c)};sk(t).forEach(s=>i(s)),this.eButtonsPanel.append(n),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const t=Ig.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),r=bi(this.checkApplyDebounce.bind(this),t);this.onBtApplyDebounce=()=>{this.debouncePending=!0,r()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(t){return(t!=null?this.setModelIntoUi(t):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(t){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(t)})}handleCancelEnd(t){this.providedFilterParams.closeOnApply&&this.close(t)}resetUiToActiveModel(t,r){const n=()=>{this.onUiChanged(!1,"prevent"),r==null||r()};t!=null?this.setModelIntoUi(t).then(n):this.resetUiToDefaults().then(n)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(t="api"){const r=this.getModelFromUi();if(!this.isModelValid(r))return!1;const n=this.appliedModel;return this.appliedModel=r,!this.areModelsEqual(n,r)}isModelValid(t){return!0}onFormSubmit(t){t.preventDefault()}onBtApply(t=!1,r=!1,n){n&&n.preventDefault(),this.applyModel(r?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:t,afterDataChange:r,source:"columnFilter"});const{closeOnApply:i}=this.providedFilterParams;i&&this.applyActive&&!t&&!r&&this.close(n)}onNewRowsLoaded(){}close(t){if(!this.hidePopup)return;const r=t,n=r&&r.key;let i;(n==="Enter"||n==="Space")&&(i={keyboardEvent:r}),this.hidePopup(i),this.hidePopup=null}onUiChanged(t=!1,r){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const n=this.isModelValid(this.getModelFromUi()),i=this.getRefElement("applyFilterButton");i&&zp(i,!n)}t&&!r||r==="immediately"?this.onBtApply(t):(!this.applyActive&&!r||r==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(t){t&&(this.hidePopup=t.hidePopup),this.refreshFilterResizer(t==null?void 0:t.container)}refreshFilterResizer(t){if(!this.positionableFeature||t==="toolPanel")return;const r=t==="floatingFilter"||t==="columnFilter",{positionableFeature:n,gos:i}=this;r?(n.restoreLastSize(),n.setResizable(i.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}static getDebounceMs(t,r){return Ig.isUseApplyButton(t)?(t.debounceMs!=null&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):t.debounceMs!=null?t.debounceMs:r}static isUseApplyButton(t){return!!t.buttons&&t.buttons.indexOf("apply")>=0}refresh(t){return this.providedFilterParams=t,!0}destroy(){const t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(t){return this.localeService.getLocaleTextFunc()(t,Kz[t])}getCellValue(t){return this.providedFilterParams.getValue(t)}getPositionableElement(){return this.eFilterBody}};S([F("rowModel")],GS.prototype,"rowModel",2);S([Me("eFilterBody")],GS.prototype,"eFilterBody",2);S([_e],GS.prototype,"postConstruct",1);var yw=GS,ak=class extends mt{constructor(e,t){super(t),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:r,labelAlignment:n,disabled:i}=this.config;i!=null&&this.setDisabled(i),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),r!=null&&this.setLabelWidth(r),this.setLabelAlignment(n||this.labelAlignment),this.refreshLabel()}refreshLabel(){Zr(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(jt(this.eLabel,!1),Gr(this.eLabel,"presentation")):(jt(this.eLabel,!0),Gr(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const r=this.getGui().classList;return r.toggle("ag-label-align-left",e==="left"),r.toggle("ag-label-align-right",e==="right"),r.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(Vm(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return zp(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}};S([_e],ak.prototype,"postConstruct",1);var Qz=class extends ak{constructor(e,t,r){super(e,t),this.className=r}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:r}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),r!=null&&this.onValueChange(r),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId();oz(e)!==null?Vp(e,""):Vp(e,t??"")}setAriaLabel(e){return As(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListener(this,_.EVENT_FIELD_VALUE_CHANGED,()=>e(this.getValue())),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return eo(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchEvent({type:_.EVENT_FIELD_VALUE_CHANGED}),this)}},ZX=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,lh=class extends Qz{constructor(e){if(super(e,(e==null?void 0:e.template)||ZX,e==null?void 0:e.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.ariaRole=e==null?void 0:e.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:r,variableWidth:n,minPickerWidth:i,maxPickerWidth:s}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!n,r!=null&&this.setPickerMaxHeight(r),i!=null&&this.setPickerMinWidth(i),s!=null&&this.setPickerMaxWidth(s)}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedListener(t,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"mousedown",this.onLabelOrWrapperMouseDown.bind(this)),this.addManagedListener(this.eWrapper,"mousedown",this.onLabelOrWrapperMouseDown.bind(this));const{pickerIcon:r,inputWidth:n}=this.config;if(r){const i=kr(r,this.gos);i&&this.eIcon.appendChild(i)}n!=null&&this.setInputWidth(n)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),Sl(e,!1),this.ariaRole&&Gr(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&(e==null?void 0:e.target)===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case Y.UP:case Y.DOWN:case Y.ENTER:case Y.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case Y.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.gos.getDocument(),t=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(this.eventService,_.EVENT_BODY_SCROLL,()=>{this.hidePicker()}));const r=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:n,pickerAriaLabelValue:i,modalPicker:s=!0}=this.config,o={modal:s,eChild:t,closeOnEsc:!0,closedCallback:()=>{const f=this.gos.getActiveDomElement(),m=!f||f===e.body;this.beforeHidePicker(),m&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:r(n,i)},a=this.popupService.addPopup(o),{maxPickerHeight:l,minPickerWidth:c,maxPickerWidth:u,variableWidth:d}=this;d?(c&&(t.style.minWidth=c),t.style.width=OS(Lm(this.eWrapper)),u&&(t.style.maxWidth=u)):Vm(t,u??Lm(this.eWrapper));const p=l??`${Jv(this.popupService.getPopupParent())}px`;return t.style.setProperty("max-height",p),t.style.position="absolute",this.alignPickerToComponent(),a.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:e}=this.config,{pickerGap:t}=this,r=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:r,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();Sl(t,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;(t=this.pickerComponent)!=null&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return Vm(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}};S([F("popupService")],lh.prototype,"popupService",2);S([Me("eLabel")],lh.prototype,"eLabel",2);S([Me("eWrapper")],lh.prototype,"eWrapper",2);S([Me("eDisplayField")],lh.prototype,"eDisplayField",2);S([Me("eIcon")],lh.prototype,"eIcon",2);var jS=class c0 extends mt{constructor(t="default",r=!1){super(`<div class="ag-list ag-${t}-list" role="listbox"></div>`),this.cssIdentifier=t,this.unFocusable=r,this.options=[],this.itemEls=[]}init(){const t=this.getGui();this.addManagedListener(t,"mouseleave",()=>this.clearHighlighted()),!this.unFocusable&&this.addManagedListener(t,"keydown",this.handleKeyDown.bind(this))}handleKeyDown(t){const r=t.key;switch(r){case Y.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const n=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(n)}break;case Y.DOWN:case Y.UP:t.preventDefault(),this.navigate(r);break;case Y.PAGE_DOWN:case Y.PAGE_UP:case Y.PAGE_HOME:case Y.PAGE_END:t.preventDefault(),this.navigateToPage(r);break}}navigate(t){const r=t===Y.DOWN;let n;if(!this.highlightedEl)n=this.itemEls[r?0:this.itemEls.length-1];else{let s=this.itemEls.indexOf(this.highlightedEl)+(r?1:-1);s=Math.min(Math.max(s,0),this.itemEls.length-1),n=this.itemEls[s]}this.highlightItem(n)}navigateToPage(t){if(!this.highlightedEl||this.itemEls.length===0)return;const r=this.itemEls.indexOf(this.highlightedEl),n=this.options.length-1,i=this.itemEls[0].clientHeight,s=Math.floor(this.getGui().clientHeight/i);let o=-1;t===Y.PAGE_HOME?o=0:t===Y.PAGE_END?o=n:t===Y.PAGE_DOWN?o=Math.min(r+s,n):t===Y.PAGE_UP&&(o=Math.max(r-s,0)),o!==-1&&this.highlightItem(this.itemEls[o])}addOptions(t){return t.forEach(r=>this.addOption(r)),this}addOption(t){const{value:r,text:n}=t,i=n||r;return this.options.push({value:r,text:i}),this.renderOption(r,i),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(t=>{jo(t)}),this.itemEls=[]}updateIndices(){const t=this.getGui().querySelectorAll(".ag-list-item");t.forEach((r,n)=>{IS(r,n+1),kS(r,t.length)})}renderOption(t,r){const n=this.gos.getDocument(),i=n.createElement("div");Gr(i,"option"),i.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const s=n.createElement("span");i.appendChild(s),s.textContent=r,this.unFocusable||(i.tabIndex=-1),this.itemEls.push(i),this.addManagedListener(i,"mousemove",()=>this.highlightItem(i)),this.addManagedListener(i,"mousedown",o=>{o.preventDefault(),this.setValue(t)}),this.createManagedBean(new Bl({getTooltipValue:()=>r,getGui:()=>i,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>s.scrollWidth>s.clientWidth})),this.getGui().appendChild(i)}setValue(t,r){if(this.value===t)return this.fireItemSelected(),this;if(t==null)return this.reset(r),this;const n=this.options.findIndex(i=>i.value===t);if(n!==-1){const i=this.options[n];this.value=i.value,this.displayValue=i.text,this.highlightItem(this.itemEls[n]),r||this.fireChangeEvent()}return this}setValueByIndex(t){return this.setValue(this.options[t].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const t=this.options.findIndex(r=>r.value===this.value);t!==-1&&this.highlightItem(this.itemEls[t])}reset(t){this.value=null,this.displayValue=null,this.clearHighlighted(),t||this.fireChangeEvent()}highlightItem(t){if(!ns(t))return;this.clearHighlighted(),this.highlightedEl=t,this.highlightedEl.classList.add(c0.ACTIVE_CLASS),Hp(this.highlightedEl,!0);const r=this.getGui(),{scrollTop:n,clientHeight:i}=r,{offsetTop:s,offsetHeight:o}=t;(s+o>n+i||s<n)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!ns(this.highlightedEl)||(this.highlightedEl.classList.remove(c0.ACTIVE_CLASS),Hp(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchEvent({type:_.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()}fireItemSelected(){this.dispatchEvent({type:c0.EVENT_ITEM_SELECTED})}};jS.EVENT_ITEM_SELECTED="selectedItem";jS.ACTIVE_CLASS="ag-active-item";S([_e],jS.prototype,"init",1);var AO=jS,Xz=class Zz extends lh{constructor(t){super(tt({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},t))}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:t,value:r,placeholder:n}=this.config;t!=null&&this.addOptions(t),r!=null&&this.setValue(r,!0),n&&r==null&&(this.eDisplayField.textContent=n),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}onWrapperFocusOut(t){this.eWrapper.contains(t.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new AO("select",!0)),this.listComponent.setParentComponent(this);const t=this.listComponent.getAriaElement(),r=`ag-select-list-${this.listComponent.getCompId()}`;t.setAttribute("id",r),VD(this.getAriaElement(),t),this.listComponent.addManagedListener(this.listComponent,AO.EVENT_ITEM_SELECTED,()=>{this.hidePicker(),this.dispatchEvent({type:Zz.EVENT_ITEM_SELECTED})}),this.listComponent.addManagedListener(this.listComponent,_.EVENT_FIELD_VALUE_CHANGED,()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())})}createPickerComponent(){return this.listComponent}onKeyDown(t){var r;const{key:n}=t;switch(n===Y.TAB&&this.hidePicker(),n){case Y.ENTER:case Y.UP:case Y.DOWN:case Y.PAGE_UP:case Y.PAGE_DOWN:case Y.PAGE_HOME:case Y.PAGE_END:t.preventDefault(),this.isPickerDisplayed?(r=this.listComponent)==null||r.handleKeyDown(t):super.onKeyDown(t);break;case Y.ESCAPE:super.onKeyDown(t);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(t){return t.forEach(r=>this.addOption(r)),this}addOption(t){return this.listComponent.addOption(t),this}clearOptions(){var t;return(t=this.listComponent)==null||t.clearOptions(),this}setValue(t,r,n){if(this.value===t||!this.listComponent)return this;if(n||this.listComponent.setValue(t,!0),this.listComponent.getValue()===this.getValue())return this;let s=this.listComponent.getDisplayValue();return s==null&&this.config.placeholder&&(s=this.config.placeholder),this.eDisplayField.textContent=s,this.setTooltip({newTooltipText:s??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(t,r)}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),super.destroy()}};Xz.EVENT_ITEM_SELECTED="selectedItem";var BS=Xz,Bo=class extends Qz{constructor(e,t,r="text",n="input"){super(e,`
            <div role="presentation">
                <div ref="eLabel" class="ag-input-field-label"></div>
                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${n} ref="eInput" class="ag-input-field-input"></${n}>
                </div>
            </div>`,t),this.inputType=r,this.displayFieldTag=n}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{inputName:e,inputWidth:t}=this.config;e!=null&&this.setInputName(e),t!=null&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedListener(this.eInput,"input",e=>this.setValue(e.target.value))}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return Vm(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return Ta(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return As(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return zp(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)Ta(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";Ta(this.eInput,"autocomplete",t)}return this}};S([Me("eLabel")],Bo.prototype,"eLabel",2);S([Me("eWrapper")],Bo.prototype,"eWrapper",2);S([Me("eInput")],Bo.prototype,"eInput",2);var VS=class extends Bo{constructor(e,t="ag-checkbox",r="checkbox"){super(e,t,r),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,r){this.dispatchEvent({type:_.EVENT_FIELD_VALUE_CHANGED,selected:e,previousValue:t,event:r});const n=this.getInputElement(),i={type:_.EVENT_CHECKBOX_CHANGED,id:n.id,name:n.name,selected:e,previousValue:t};this.eventService.dispatchEvent(i)}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),r=this.selected=e.target.checked;this.refreshSelectedClass(r),this.dispatchChange(r,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}},Jz=class extends VS{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedListener(this.eventService,_.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},lk=class{constructor(e,t,r){this.localeService=e,this.optionsFactory=t,this.valueFormatter=r}getModelAsString(e){if(!e)return null;const t=e.operator!=null,r=this.localeService.getLocaleTextFunc();if(t){const n=e;let{conditions:i}=n;if(!i){const{condition1:a,condition2:l}=n;i=[a,l]}const s=i.map(a=>this.getModelAsString(a)),o=n.operator==="AND"?"andCondition":"orCondition";return s.join(` ${r(o,Kz[o])} `)}else{if(e.type===Fr.BLANK||e.type===Fr.NOT_BLANK)return r(e.type,e.type);{const n=e,i=this.optionsFactory.getCustomOption(n.type),{displayKey:s,displayName:o,numberOfInputs:a}=i||{};return s&&o&&a===0?(r(s,o),o):this.conditionToString(n,i)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){var t;return this.valueFormatter?(t=this.valueFormatter(e??null))!=null?t:"":String(e)}},Mi=class Oh extends yw{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(t){const r=this.optionsFactory.getCustomOption(t);if(r){const{numberOfInputs:i}=r;return i??1}const n=[Oh.EMPTY,Oh.NOT_BLANK,Oh.BLANK];return t&&n.indexOf(t)>=0?0:t===Oh.IN_RANGE?2:1}onFloatingFilterChanged(t,r){this.setTypeFromFloatingFilter(t),this.setValueFromFloatingFilter(r),this.onUiChanged(!0)}setTypeFromFloatingFilter(t){this.eTypes.forEach((r,n)=>{n===0?r.setValue(t,!0):r.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){const t=this.getUiCompleteConditions();return t.length===0?null:this.maxNumConditions>1&&t.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:t[0],condition2:t[1],conditions:t}:t[0]}getConditionTypes(){return this.eTypes.map(t=>t.getValue())}getConditionType(t){return this.eTypes[t].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(t,r){if(!t&&!r)return!0;if(!t&&r||t&&!r)return!1;const n=!t.operator,i=!r.operator;if(!n&&i||n&&!i)return!1;let o;if(n){const a=t,l=r;o=this.areSimpleModelsEqual(a,l)}else{const a=t,l=r;o=a.operator===l.operator&&Ca(a.conditions,l.conditions,(c,u)=>this.areSimpleModelsEqual(c,u))}return o}shouldRefresh(t){var r,n,i;const s=this.getModel(),o=s?(r=s.conditions)!=null?r:[s]:null,a=(i=(n=t.filterOptions)==null?void 0:n.map(c=>typeof c=="string"?c:c.displayKey))!=null?i:this.getDefaultFilterOptions();return!(!(!o||o.every(c=>a.find(u=>u===c.type)!==void 0))||typeof t.maxNumConditions=="number"&&o&&o.length>t.maxNumConditions)}refresh(t){return!this.shouldRefresh(t)||!super.refresh(t)?!1:(this.setParams(t),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(t){if(t.operator){let n=t;n.conditions||(n.conditions=[n.condition1,n.condition2]);const i=this.validateAndUpdateConditions(n.conditions),s=this.getNumConditions();if(i<s)this.removeConditionsAndOperators(i);else if(i>s)for(let a=s;a<i;a++)this.createJoinOperatorPanel(),this.createOption();const o=n.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!o,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(o,!0)),n.conditions.forEach((a,l)=>{this.eTypes[l].setValue(a.type,!0),this.setConditionIntoUi(a,l)})}else{const n=t;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(n.type,!0),this.setConditionIntoUi(n,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),on.resolve()}validateAndUpdateConditions(t){let r=t.length;return r>this.maxNumConditions&&(t.splice(this.maxNumConditions),ot('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),r=this.maxNumConditions),r}doesFilterPass(t){var r;const n=this.getModel();if(n==null)return!0;const{operator:i}=n,s=[];if(i){const a=n;s.push(...(r=a.conditions)!=null?r:[])}else s.push(n);return s[i&&i==="OR"?"some":"every"](a=>this.individualConditionPasses(t,a))}setParams(t){super.setParams(t),this.setNumConditions(t),this.defaultJoinOperator=this.getDefaultJoinOperator(t.defaultJoinOperator),this.filterPlaceholder=t.filterPlaceholder,this.optionsFactory=new Wz,this.optionsFactory.init(t,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(t){var r,n;t.suppressAndOrCondition!=null&&ot('Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.'),t.alwaysShowBothConditions!=null&&ot('Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.'),this.maxNumConditions=(r=t.maxNumConditions)!=null?r:t.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(ot('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=(n=t.numAlwaysVisibleConditions)!=null?n:t.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(ot('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(ot('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const t=this.createManagedBean(new BS);this.eTypes.push(t),t.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(t.getGui());const r=this.createValueElement();this.eConditionBodies.push(r),this.eFilterBody.appendChild(r),this.putOptionsIntoDropdown(t),this.resetType(t);const n=this.getNumConditions()-1;this.forEachPositionInput(n,i=>this.resetInput(i)),this.addChangedListeners(t,n)}createJoinOperatorPanel(){const t=document.createElement("div");this.eJoinOperatorPanels.push(t),t.classList.add("ag-filter-condition");const r=this.createJoinOperator(this.eJoinOperatorsAnd,t,"and"),n=this.createJoinOperator(this.eJoinOperatorsOr,t,"or");this.eFilterBody.appendChild(t);const i=this.eJoinOperatorPanels.length-1,s=this.joinOperatorId++;this.resetJoinOperatorAnd(r,i,s),this.resetJoinOperatorOr(n,i,s),this.isReadOnly()||(r.onValueChange(this.listener),n.onValueChange(this.listener))}createJoinOperator(t,r,n){const i=this.createManagedBean(new Jz);return t.push(i),i.addCssClass("ag-filter-condition-operator"),i.addCssClass(`ag-filter-condition-operator-${n}`),r.appendChild(i.getGui()),i}getDefaultJoinOperator(t){return t==="AND"||t==="OR"?t:"AND"}createFilterListOptions(){const t=this.optionsFactory.getFilterOptions();this.filterListOptions=t.map(r=>typeof r=="string"?this.createBoilerplateListOption(r):this.createCustomListOption(r))}putOptionsIntoDropdown(t){this.filterListOptions.forEach(r=>{t.addOption(r)}),t.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(t){return{value:t,text:this.translate(t)}}createCustomListOption(t){const{displayKey:r}=t,n=this.optionsFactory.getCustomOption(t.displayKey);return{value:r,text:n?this.localeService.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(r)}}isAllowTwoConditions(){return this.maxNumConditions>=2}createBodyTemplate(){return""}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const t=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,t)}updateNumConditions(){var t;let r=-1,n=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?r=i:n=!1;if(this.shouldAddNewConditionAtEnd(n))this.createJoinOperatorPanel(),this.createOption();else{const i=(t=this.lastUiCompletePosition)!=null?t:this.getNumConditions()-2;if(r<i){this.removeConditionsAndOperators(i+1);const s=r+1,o=i-s;o>0&&this.removeConditionsAndOperators(s,o),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=r}updateConditionStatusesAndValues(t,r){this.eTypes.forEach((i,s)=>{const o=this.isConditionDisabled(s,t);i.setDisabled(o||this.filterListOptions.length<=1),s===1&&(zp(this.eJoinOperatorPanels[0],o),this.eJoinOperatorsAnd[0].setDisabled(o),this.eJoinOperatorsOr[0].setDisabled(o))}),this.eConditionBodies.forEach((i,s)=>{jt(i,this.isConditionBodyVisible(s))});const n=(r??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach((i,s)=>{i.setValue(!n,!0)}),this.eJoinOperatorsOr.forEach((i,s)=>{i.setValue(n,!0)}),this.forEachInput((i,s,o,a)=>{this.setElementDisplayed(i,s<a),this.setElementDisabled(i,this.isConditionDisabled(o,t))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(t){return t&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(t,r){if(t>=this.getNumConditions())return;this.removeComponents(this.eTypes,t,r),this.removeElements(this.eConditionBodies,t,r),this.removeValueElements(t,r);const n=Math.max(t-1,0);this.removeElements(this.eJoinOperatorPanels,n,r),this.removeComponents(this.eJoinOperatorsAnd,n,r),this.removeComponents(this.eJoinOperatorsOr,n,r)}removeElements(t,r,n){this.removeItems(t,r,n).forEach(s=>jo(s))}removeComponents(t,r,n){this.removeItems(t,r,n).forEach(s=>{jo(s.getGui()),this.destroyBean(s)})}removeItems(t,r,n){return n==null?t.splice(r):t.splice(r,n)}afterGuiAttached(t){if(super.afterGuiAttached(t),this.resetPlaceholder(),!(t!=null&&t.suppressFocus))if(this.isReadOnly())this.eFilterBody.focus();else{const r=this.getInputs(0)[0];if(!r)return;r instanceof Bo&&r.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const t=this.getModel();this.resetUiToActiveModel(t);let r=-1,n=-1,i=!1;const s=this.getJoinOperator();for(let a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))r===-1&&(r=a,n=a);else{const l=a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1),c=a<r;(l||c)&&(this.removeConditionsAndOperators(a,1),i=!0,c&&n--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(n,s),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getPlaceholderText(t,r){let n=this.translate(t);if(TS(this.filterPlaceholder)){const i=this.filterPlaceholder,s=this.eTypes[r].getValue(),o=this.translate(s);n=i({filterOptionKey:s,filterOption:o,placeholder:n})}else typeof this.filterPlaceholder=="string"&&(n=this.filterPlaceholder);return n}resetPlaceholder(){const t=this.localeService.getLocaleTextFunc();this.forEachInput((r,n,i,s)=>{if(!(r instanceof Bo))return;const o=n===0&&s>1?"inRangeStart":n===0?"filterOoo":"inRangeEnd",a=n===0&&s>1?t("ariaFilterFromValue","Filter from value"):n===0?t("ariaFilterValue","Filter Value"):t("ariaFilterToValue","Filter to Value");r.setInputPlaceholder(this.getPlaceholderText(o,i)),r.setInputAriaLabel(a)})}setElementValue(t,r,n){t instanceof Bo&&t.setValue(r!=null?String(r):null,!0)}setElementDisplayed(t,r){t instanceof mt&&jt(t.getGui(),r)}setElementDisabled(t,r){t instanceof mt&&zp(t.getGui(),r)}attachElementOnChange(t,r){t instanceof Bo&&t.onValueChange(r)}forEachInput(t){this.getConditionTypes().forEach((r,n)=>{this.forEachPositionTypeInput(n,r,t)})}forEachPositionInput(t,r){const n=this.getConditionType(t);this.forEachPositionTypeInput(t,n,r)}forEachPositionTypeInput(t,r,n){const i=this.getNumberOfInputs(r),s=this.getInputs(t);for(let o=0;o<s.length;o++){const a=s[o];a!=null&&n(a,o,t,i)}}isConditionDisabled(t,r){return this.isReadOnly()?!0:t===0?!1:t>r+1}isConditionBodyVisible(t){const r=this.getConditionType(t);return this.getNumberOfInputs(r)>0}isConditionUiComplete(t){return!(t>=this.getNumConditions()||this.getConditionType(t)===Oh.EMPTY||this.getValues(t).some(n=>n==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const t=[];for(let r=0;r<this.getNumConditions();r++)this.isConditionUiComplete(r)&&t.push(this.createCondition(r));return t}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let t=this.getNumConditions();t<this.numAlwaysVisibleConditions;t++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(t){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(r=>this.resetType(r)),this.eJoinOperatorsAnd.forEach((r,n)=>this.resetJoinOperatorAnd(r,n,this.joinOperatorId+n)),this.eJoinOperatorsOr.forEach((r,n)=>this.resetJoinOperatorOr(r,n,this.joinOperatorId+n)),this.joinOperatorId++,this.forEachInput(r=>this.resetInput(r)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,t||this.onUiChanged(),on.resolve()}resetType(t){const n=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");t.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(n).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(t,r,n){this.resetJoinOperator(t,r,this.isDefaultOperator("AND"),this.translate("andCondition"),n)}resetJoinOperatorOr(t,r,n){this.resetJoinOperator(t,r,this.isDefaultOperator("OR"),this.translate("orCondition"),n)}resetJoinOperator(t,r,n,i,s){this.updateJoinOperatorDisabled(t.setValue(n,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${s}`).setLabel(i),r)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((t,r)=>this.updateJoinOperatorDisabled(t,r)),this.eJoinOperatorsOr.forEach((t,r)=>this.updateJoinOperatorDisabled(t,r))}updateJoinOperatorDisabled(t,r){t.setDisabled(this.isReadOnly()||r>0)}resetInput(t){this.setElementValue(t,null),this.setElementDisabled(t,this.isReadOnly())}setConditionIntoUi(t,r){const n=this.mapValuesFromModel(t);this.forEachInput((i,s,o,a)=>{o===r&&this.setElementValue(i,n[s]!=null?n[s]:null)})}setValueFromFloatingFilter(t){this.forEachInput((r,n,i,s)=>{this.setElementValue(r,n===0&&i===0?t:null,!0)})}isDefaultOperator(t){return t===this.defaultJoinOperator}addChangedListeners(t,r){this.isReadOnly()||(t.onValueChange(this.listener),this.forEachPositionInput(r,n=>{this.attachElementOnChange(n,this.listener)}))}individualConditionPasses(t,r){const n=this.getCellValue(t.node),i=this.mapValuesFromModel(r),s=this.optionsFactory.getCustomOption(r.type),o=this.evaluateCustomFilter(s,i,n);return o??(n==null?this.evaluateNullValue(r.type):this.evaluateNonNullValue(i,n,r,t))}evaluateCustomFilter(t,r,n){if(t==null)return;const{predicate:i}=t;if(i!=null&&!r.some(s=>s==null))return i(r,n)}isBlank(t){return t==null||typeof t=="string"&&t.trim().length===0}hasInvalidInputs(){return!1}};Mi.EMPTY="empty";Mi.BLANK="blank";Mi.NOT_BLANK="notBlank";Mi.EQUALS="equals";Mi.NOT_EQUAL="notEqual";Mi.LESS_THAN="lessThan";Mi.LESS_THAN_OR_EQUAL="lessThanOrEqual";Mi.GREATER_THAN="greaterThan";Mi.GREATER_THAN_OR_EQUAL="greaterThanOrEqual";Mi.IN_RANGE="inRange";Mi.CONTAINS="contains";Mi.NOT_CONTAINS="notContains";Mi.STARTS_WITH="startsWith";Mi.ENDS_WITH="endsWith";var Fr=Mi,cn=class vn extends Fr{setParams(t){super.setParams(t),this.scalarFilterParams=t}evaluateNullValue(t){switch(t){case vn.EQUALS:case vn.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case vn.GREATER_THAN:case vn.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case vn.LESS_THAN:case vn.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case vn.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case vn.BLANK:return!0;case vn.NOT_BLANK:return!1}return!1}evaluateNonNullValue(t,r,n){const i=this.comparator(),s=t[0]!=null?i(t[0],r):0;switch(n.type){case vn.EQUALS:return s===0;case vn.NOT_EQUAL:return s!==0;case vn.GREATER_THAN:return s>0;case vn.GREATER_THAN_OR_EQUAL:return s>=0;case vn.LESS_THAN:return s<0;case vn.LESS_THAN_OR_EQUAL:return s<=0;case vn.IN_RANGE:{const o=i(t[1],r);return this.scalarFilterParams.inRangeInclusive?s>=0&&o<=0:s>0&&o<0}case vn.BLANK:return this.isBlank(r);case vn.NOT_BLANK:return!this.isBlank(r);default:return console.warn('AG Grid: Unexpected type of filter "'+n.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},_O=1e3,DO=1/0,e$=class extends lk{constructor(e,t,r){super(t,r),this.dateFilterParams=e}conditionToString(e,t){const{type:r}=e,{numberOfInputs:n}=t||{},i=r==Fr.IN_RANGE||n===2,s=Yi(e.dateFrom),o=Yi(e.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(i){const l=s!==null?gp(s,a):"null",c=o!==null?gp(o,a):"null";return`${l}-${c}`}return s!=null?gp(s,a):`${r}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},ck=class t$ extends cn{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=_O,this.maxValidYear=DO,this.minValidDate=null,this.maxValidDate=null}afterGuiAttached(t){super.afterGuiAttached(t),this.dateConditionFromComps[0].afterGuiAttached(t)}mapValuesFromModel(t){const{dateFrom:r,dateTo:n,type:i}=t||{};return[r&&Yi(r)||null,n&&Yi(n)||null].slice(0,this.getNumberOfInputs(i))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(t,r){const n=r;return r==null||n<t?-1:n>t?1:0}setParams(t){this.dateFilterParams=t,super.setParams(t);const r=(n,i)=>{if(t[n]!=null)if(isNaN(t[n]))console.warn(`AG Grid: DateFilter ${n} is not a number`);else return t[n]==null?i:Number(t[n]);return i};this.minValidYear=r("minValidYear",_O),this.maxValidYear=r("maxValidYear",DO),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),t.minValidDate?this.minValidDate=t.minValidDate instanceof Date?t.minValidDate:Yi(t.minValidDate):this.minValidDate=null,t.maxValidDate?this.maxValidDate=t.maxValidDate instanceof Date?t.maxValidDate:Yi(t.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&console.warn("AG Grid: DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new e$(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(t){const r=new Uz(this.getContext(),this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},t);return this.addDestroyFunc(()=>r.destroy()),r}setElementValue(t,r){t.setDate(r)}setElementDisplayed(t,r){t.setDisplayed(r)}setElementDisabled(t,r){t.setDisabled(r)}getDefaultFilterOptions(){return t$.DEFAULT_FILTER_OPTIONS}createValueElement(){const r=this.gos.getDocument().createElement("div");return r.classList.add("ag-filter-body"),this.createFromToElement(r,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(r,this.eConditionPanelsTo,this.dateConditionToComps,"to"),r}createFromToElement(t,r,n,i){const o=this.gos.getDocument().createElement("div");o.classList.add(`ag-filter-${i}`),o.classList.add(`ag-filter-date-${i}`),r.push(o),t.appendChild(o),n.push(this.createDateCompWrapper(o))}removeValueElements(t,r){this.removeDateComps(this.dateConditionFromComps,t,r),this.removeDateComps(this.dateConditionToComps,t,r),this.removeItems(this.eConditionPanelsFrom,t,r),this.removeItems(this.eConditionPanelsTo,t,r)}removeDateComps(t,r,n){this.removeItems(t,r,n).forEach(s=>s.destroy())}isValidDateValue(t){if(t===null)return!1;if(this.minValidDate){if(t<this.minValidDate)return!1}else if(t.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(t>this.maxValidDate)return!1}else if(t.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(t){if(!super.isConditionUiComplete(t))return!1;let r=!0;return this.forEachInput((n,i,s,o)=>{s!==t||!r||i>=o||(r=r&&this.isValidDateValue(n.getDate()))}),r}areSimpleModelsEqual(t,r){return t.dateFrom===r.dateFrom&&t.dateTo===r.dateTo&&t.type===r.type}getFilterType(){return"date"}createCondition(t){const r=this.getConditionType(t),n={},i=this.getValues(t);return i.length>0&&(n.dateFrom=Js(i[0])),i.length>1&&(n.dateTo=Js(i[1])),tt({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:r},n)}resetPlaceholder(){const t=this.localeService.getLocaleTextFunc(),r=this.translate("dateFormatOoo"),n=t("ariaFilterValue","Filter Value");this.forEachInput(i=>{i.setInputPlaceholder(r),i.setInputAriaLabel(n)})}getInputs(t){return t>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[t],this.dateConditionToComps[t]]}getValues(t){const r=[];return this.forEachPositionInput(t,(n,i,s,o)=>{i<o&&r.push(n.getDate())}),r}translate(t){return t===cn.LESS_THAN?super.translate("before"):t===cn.GREATER_THAN?super.translate("after"):super.translate(t)}getModelAsString(t){var r;return(r=this.filterModelFormatter.getModelAsString(t))!=null?r:""}};ck.DEFAULT_FILTER_OPTIONS=[cn.EQUALS,cn.NOT_EQUAL,cn.LESS_THAN,cn.GREATER_THAN,cn.IN_RANGE,cn.BLANK,cn.NOT_BLANK];S([F("userComponentFactory")],ck.prototype,"userComponentFactory",2);var r$=ck,uk=class extends mt{getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e==null?void 0:e.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}const t=e.operator;let r;t?r=e.conditions[0]:r=e,this.lastType=r.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const r=e;return this.isTypeEditable(r.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){this.optionsFactory=new Wz,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;const r=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(r)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){const t=this.optionsFactory.getCustomOption(e),{numberOfInputs:r}=t||{};return r==null||r==1}isTypeEditable(e){const t=[Fr.IN_RANGE,Fr.EMPTY,Fr.BLANK,Fr.NOT_BLANK];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){const t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),r=this.localeService.getLocaleTextFunc();return`${t} ${r("ariaFilterInput","Filter Input")}`}};S([F("columnModel")],uk.prototype,"columnModel",2);var HS=class extends uk{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>
                <div ref="eDateWrapper" style="display: flex;"></div>
            </div>`)}getDefaultFilterOptions(){return r$.DEFAULT_FILTER_OPTIONS}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new e$(this.filterParams,this.localeService,this.optionsFactory);const t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){const r=e;this.dateComp.setDate(Yi(r.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){jt(this.eDateWrapper,e),jt(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const e=this.dateComp.getDate(),t=Js(e);this.params.parentFilterInstance(r=>{if(r){const n=Yi(t);r.onFloatingFilterChanged(this.getLastType()||null,n)}})}getDateComponentParams(){const e=yw.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:bi(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new Uz(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){const e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}};S([F("userComponentFactory")],HS.prototype,"userComponentFactory",2);S([Me("eReadOnlyText")],HS.prototype,"eReadOnlyText",2);S([Me("eDateWrapper")],HS.prototype,"eDateWrapper",2);var n$=class extends mt{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListener(t,"mousedown",()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()}),this.addManagedListener(t,"input",r=>{r.target===this.gos.getActiveDomElement()&&(this.eDateInput.isDisabled()||this.params.onDateChanged())})}setParams(e){const t=this.eDateInput.getInputElement(),r=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=r&&Na(),t.type=r?"date":"text";const{minValidYear:n,maxValidYear:i,minValidDate:s,maxValidDate:o}=e.filterParams||{};if(s&&n&&ot("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),o&&i&&ot("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),s&&o){const[a,l]=[s,o].map(c=>c instanceof Date?c:Yi(c));a&&l&&a.getTime()>l.getTime()&&ot("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}s?s instanceof Date?t.min=gp(s):t.min=s:n&&(t.min=`${n}-01-01`),o?o instanceof Date?t.max=gp(o):t.max=o:i&&(t.max=`${i}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return Yi(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(Js(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:MS()||zD()||Na()&&HD()>=14.1}};S([Me("eDateInput")],n$.prototype,"eDateInput",2);var ch=class extends Bo{constructor(e,t="ag-text-field",r="text"){super(e,t,r)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=xe(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=r=>{FS(r)&&r.key&&!e.test(r.key)&&r.preventDefault()};this.addManagedListener(this.eInput,"keydown",t),this.addManagedListener(this.eInput,"paste",r=>{var n;const i=(n=r.clipboardData)==null?void 0:n.getData("text");i&&i.split("").some(s=>!e.test(s))&&r.preventDefault()})}},dk=class extends ch{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"blur",()=>{const i=parseFloat(this.eInput.value),s=isNaN(i)?"":this.normalizeValue(i.toString());this.value!==s&&this.setValue(s)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any";const{precision:e,min:t,max:r,step:n}=this.config;typeof e=="number"&&this.setPrecision(e),typeof t=="number"&&this.setMin(t),typeof r=="number"&&this.setMax(r),typeof n=="number"&&this.setStep(n)}onWheel(e){this.gos.getActiveDomElement()===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));const t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(this.precision==null)return e;if(t){const n=parseFloat(e).toFixed(this.precision);return parseFloat(n).toString()}const r=String(e).split(".");if(r.length>1){if(r[1].length<=this.precision)return e;if(this.precision>0)return`${r[0]}.${r[1].slice(0,this.precision)}`}return r[0]}setMin(e){return this.min===e?this:(this.min=e,Ta(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,Ta(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,Ta(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(r=>super.setValue(r,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,r){if(xe(r)){let n=this.isScientificNotation(r);if(n&&this.eInput.validity.valid)return e(r);if(!n){r=this.adjustPrecision(r);const i=this.normalizeValue(r);n=r!=i}if(n)return t(r)}return e(r)}getValue(){if(!this.eInput.validity.valid)return;const e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},i$=class extends lk{conditionToString(e,t){const{numberOfInputs:r}=t||{};return e.type==Fr.IN_RANGE||r===2?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:e.filter!=null?this.formatValue(e.filter):`${e.type}`}};function IT(e){const{allowedCharPattern:t}=e??{};return t??null}var s$=class o$ extends cn{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(t){return this.numberFilterParams.allowedCharPattern!==t.allowedCharPattern?!1:super.refresh(t)}mapValuesFromModel(t){const{filter:r,filterTo:n,type:i}=t||{};return[this.processValue(r),this.processValue(n)].slice(0,this.getNumberOfInputs(i))}getDefaultDebounceMs(){return 500}comparator(){return(t,r)=>t===r?0:t<r?1:-1}setParams(t){this.numberFilterParams=t,super.setParams(t),this.filterModelFormatter=new i$(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return o$.DEFAULT_FILTER_OPTIONS}setElementValue(t,r,n){const i=!n&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(r??null):r;super.setElementValue(t,i)}createValueElement(){const t=IT(this.numberFilterParams),r=document.createElement("div");return r.classList.add("ag-filter-body"),Gr(r,"presentation"),this.createFromToElement(r,this.eValuesFrom,"from",t),this.createFromToElement(r,this.eValuesTo,"to",t),r}createFromToElement(t,r,n,i){const s=this.createManagedBean(i?new ch({allowedCharPattern:i}):new dk);s.addCssClass(`ag-filter-${n}`),s.addCssClass("ag-filter-filter"),r.push(s),t.appendChild(s.getGui())}removeValueElements(t,r){this.removeComponents(this.eValuesFrom,t,r),this.removeComponents(this.eValuesTo,t,r)}getValues(t){const r=[];return this.forEachPositionInput(t,(n,i,s,o)=>{i<o&&r.push(this.processValue(this.stringToFloat(n.getValue())))}),r}areSimpleModelsEqual(t,r){return t.filter===r.filter&&t.filterTo===r.filterTo&&t.type===r.type}getFilterType(){return"number"}processValue(t){return t==null||isNaN(t)?null:t}stringToFloat(t){if(typeof t=="number")return t;let r=Ra(t);return r!=null&&r.trim()===""&&(r=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(r):r==null||r.trim()==="-"?null:parseFloat(r)}createCondition(t){const r=this.getConditionType(t),n={filterType:this.getFilterType(),type:r},i=this.getValues(t);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}getInputs(t){return t>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[t],this.eValuesTo[t]]}getModelAsString(t){var r;return(r=this.filterModelFormatter.getModelAsString(t))!=null?r:""}hasInvalidInputs(){let t=!1;return this.forEachInput(r=>{if(!r.getInputElement().validity.valid){t=!0;return}}),t}};s$.DEFAULT_FILTER_OPTIONS=[cn.EQUALS,cn.NOT_EQUAL,cn.GREATER_THAN,cn.GREATER_THAN_OR_EQUAL,cn.LESS_THAN,cn.LESS_THAN_OR_EQUAL,cn.IN_RANGE,cn.BLANK,cn.NOT_BLANK];var a$=s$,l$=class extends lk{conditionToString(e,t){const{numberOfInputs:r}=t||{};return e.type==Fr.IN_RANGE||r===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}},Io=class Fh extends Fr{constructor(){super("textFilter"),this.eValuesFrom=[],this.eValuesTo=[]}static trimInput(t){const r=t&&t.trim();return r===""?t:r}getDefaultDebounceMs(){return 500}setParams(t){this.textFilterParams=t,super.setParams(t),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?Fh.DEFAULT_FORMATTER:Fh.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new l$(this.localeService,this.optionsFactory)}getTextMatcher(){const t=this.textFilterParams.textCustomComparator;return t?(pt.warnOnce("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:r,value:n,filterText:i})=>t(r,n,i)):this.textFilterParams.textMatcher||Fh.DEFAULT_MATCHER}createCondition(t){const r=this.getConditionType(t),n={filterType:this.getFilterType(),type:r},i=this.getValuesWithSideEffects(t,!0);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}getFilterType(){return"text"}areSimpleModelsEqual(t,r){return t.filter===r.filter&&t.filterTo===r.filterTo&&t.type===r.type}getInputs(t){return t>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[t],this.eValuesTo[t]]}getValues(t){return this.getValuesWithSideEffects(t,!1)}getValuesWithSideEffects(t,r){const n=[];return this.forEachPositionInput(t,(i,s,o,a)=>{var l;if(s<a){let c=Ra(i.getValue());r&&this.textFilterParams.trimInput&&(c=(l=Fh.trimInput(c))!=null?l:null,i.setValue(c,!0)),n.push(c)}}),n}getDefaultFilterOptions(){return Fh.DEFAULT_FILTER_OPTIONS}createValueElement(){const t=document.createElement("div");return t.classList.add("ag-filter-body"),Gr(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from"),this.createFromToElement(t,this.eValuesTo,"to"),t}createFromToElement(t,r,n){const i=this.createManagedBean(new ch);i.addCssClass(`ag-filter-${n}`),i.addCssClass("ag-filter-filter"),r.push(i),t.appendChild(i.getGui())}removeValueElements(t,r){this.removeComponents(this.eValuesFrom,t,r),this.removeComponents(this.eValuesTo,t,r)}mapValuesFromModel(t){const{filter:r,filterTo:n,type:i}=t||{};return[r||null,n||null].slice(0,this.getNumberOfInputs(i))}evaluateNullValue(t){const r=[Fr.NOT_EQUAL,Fr.NOT_CONTAINS,Fr.BLANK];return t?r.indexOf(t)>=0:!1}evaluateNonNullValue(t,r,n,i){const s=t.map(m=>this.formatter(m))||[],o=this.formatter(r),{api:a,colDef:l,column:c,columnApi:u,context:d,textFormatter:p}=this.textFilterParams;if(n.type===Fr.BLANK)return this.isBlank(r);if(n.type===Fr.NOT_BLANK)return!this.isBlank(r);const f={api:a,colDef:l,column:c,columnApi:u,context:d,node:i.node,data:i.data,filterOption:n.type,value:o,textFormatter:p};return s.some(m=>this.matcher(Sr(tt({},f),{filterText:m})))}getModelAsString(t){var r;return(r=this.filterModelFormatter.getModelAsString(t))!=null?r:""}};Io.DEFAULT_FILTER_OPTIONS=[Fr.CONTAINS,Fr.NOT_CONTAINS,Fr.EQUALS,Fr.NOT_EQUAL,Fr.STARTS_WITH,Fr.ENDS_WITH,Fr.BLANK,Fr.NOT_BLANK];Io.DEFAULT_FORMATTER=e=>e;Io.DEFAULT_LOWERCASE_FORMATTER=e=>e==null?null:e.toString().toLowerCase();Io.DEFAULT_MATCHER=({filterOption:e,value:t,filterText:r})=>{if(r==null)return!1;switch(e){case Io.CONTAINS:return t.indexOf(r)>=0;case Io.NOT_CONTAINS:return t.indexOf(r)<0;case Io.EQUALS:return t===r;case Io.NOT_EQUAL:return t!=r;case Io.STARTS_WITH:return t.indexOf(r)===0;case Io.ENDS_WITH:const n=t.lastIndexOf(r);return n>=0&&n===t.length-r.length;default:return!1}};var hk=Io,c$=class extends Ae{constructor(e){super(),this.params=e,this.valueChangedListener=()=>{}}setupGui(e){var t;this.eFloatingFilterTextInput=this.createManagedBean(new ch((t=this.params)==null?void 0:t.config));const r=this.eFloatingFilterTextInput.getGui();e.appendChild(r),this.addManagedListener(r,"input",n=>this.valueChangedListener(n)),this.addManagedListener(r,"keydown",n=>this.valueChangedListener(n))}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},zS=class extends uk{postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){var t;this.params=e;const r=(t=e.browserAutoComplete)!=null?t:!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:r}),this.applyActive=yw.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){const n=yw.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),i=bi(this.syncUpWithParentFilter.bind(this),n);this.floatingFilterInputService.setValueChangedListener(i)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const t=this.floatingFilterInputService.getValue();Zr(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){const t=e.key===Y.ENTER;if(this.applyActive&&!t)return;let r=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(r=hk.trimInput(r),this.floatingFilterInputService.setValue(r,!0)),this.params.parentFilterInstance(n=>{n&&n.onFloatingFilterChanged(this.getLastType()||null,r||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}};S([Me("eFloatingFilterInputContainer")],zS.prototype,"eFloatingFilterInputContainer",2);S([_e],zS.prototype,"postConstruct",1);var JX=class extends Ae{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new dk),this.eFloatingFilterTextInput=this.createManagedBean(new ch),this.eFloatingFilterTextInput.setDisabled(!0);const t=this.eFloatingFilterNumberInput.getGui(),r=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(r),this.setupListeners(t,n=>this.valueChangedListener(n)),this.setupListeners(r,n=>this.valueChangedListener(n))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListener(e,"input",t),this.addManagedListener(e,"keydown",t)}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},eZ=class extends zS{init(e){var t;super.init(e),this.filterModelFormatter=new i$(this.localeService,this.optionsFactory,(t=e.filterParams)==null?void 0:t.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){IT(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return a$.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=IT(e.filterParams),this.allowedCharPattern?this.createManagedBean(new c$({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new JX)}},tZ=class extends zS{init(e){super.init(e),this.filterModelFormatter=new l$(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return hk.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new c$)}},sy=class Ng{constructor(t,r=!1){this.destroyFuncs=[],this.touching=!1,this.eventService=new qo,this.eElement=t,this.preventMouseClick=r;const n=this.onTouchStart.bind(this),i=this.onTouchMove.bind(this),s=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",n,{passive:!0}),this.eElement.addEventListener("touchmove",i,{passive:!0}),this.eElement.addEventListener("touchend",s,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",n,{passive:!0}),this.eElement.removeEventListener("touchmove",i,{passive:!0}),this.eElement.removeEventListener("touchend",s,{passive:!1})})}getActiveTouch(t){for(let r=0;r<t.length;r++)if(t[r].identifier===this.touchStart.identifier)return t[r];return null}addEventListener(t,r){this.eventService.addEventListener(t,r)}removeEventListener(t,r){this.eventService.removeEventListener(t,r)}onTouchStart(t){if(this.touching)return;this.touchStart=t.touches[0],this.touching=!0,this.moved=!1;const r=this.touchStart;window.setTimeout(()=>{const n=this.touchStart===r;if(this.touching&&n&&!this.moved){this.moved=!0;const i={type:Ng.EVENT_LONG_TAP,touchStart:this.touchStart,touchEvent:t};this.eventService.dispatchEvent(i)}},500)}onTouchMove(t){if(!this.touching)return;const r=this.getActiveTouch(t.touches);if(!r)return;!ik(r,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(t){if(this.touching){if(!this.moved){const r={type:Ng.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(r),this.checkForDoubleTap()}this.preventMouseClick&&t.cancelable&&t.preventDefault(),this.touching=!1}}checkForDoubleTap(){const t=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(t-this.lastTapTime>Ng.DOUBLE_TAP_MILLIS){const n={type:Ng.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(n),this.lastTapTime=null}else this.lastTapTime=t;else this.lastTapTime=t}destroy(){this.destroyFuncs.forEach(t=>t())}};sy.EVENT_TAP="tap";sy.EVENT_DOUBLE_TAP="doubleTap";sy.EVENT_LONG_TAP="longTap";sy.DOUBLE_TAP_MILLIS=500;var kn=sy,Vl=class u$ extends mt{constructor(t){super(),t||this.setTemplate(u$.TEMPLATE)}attachCustomElements(t,r,n,i,s){this.eSortOrder=t,this.eSortAsc=r,this.eSortDesc=n,this.eSortMixed=i,this.eSortNone=s}setupSort(t,r=!1){this.column=t,this.suppressOrder=r,this.setupMultiSortIndicator(),!(!this.column.isSortable()&&!this.column.getColDef().showRowGroup)&&(this.addInIcon("sortAscending",this.eSortAsc,t),this.addInIcon("sortDescending",this.eSortDesc,t),this.addInIcon("sortUnSort",this.eSortNone,t),this.addManagedPropertyListener("unSortIcon",()=>this.updateIcons()),this.addManagedListener(this.eventService,_.EVENT_NEW_COLUMNS_LOADED,()=>this.updateIcons()),this.addManagedListener(this.eventService,_.EVENT_SORT_CHANGED,()=>this.onSortChanged()),this.addManagedListener(this.eventService,_.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onSortChanged()),this.onSortChanged())}addInIcon(t,r,n){if(r==null)return;const i=kr(t,this.gos,n);i&&r.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const t=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const r=t==="asc";jt(this.eSortAsc,r,{skipAriaHidden:!0})}if(this.eSortDesc){const r=t==="desc";jt(this.eSortDesc,r,{skipAriaHidden:!0})}if(this.eSortNone){const r=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),n=t==null;jt(this.eSortNone,!r&&n,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const t=this.column.getColDef().showRowGroup;this.gos.isColumnsSortingCoupledToGroup()&&t&&(this.addManagedListener(this.eventService,_.EVENT_SORT_CHANGED,()=>this.updateMultiSortIndicator()),this.addManagedListener(this.eventService,_.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateMultiSortIndicator()),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const t=this.sortController.getDisplaySortForColumn(this.column)==="mixed";jt(this.eSortMixed,t,{skipAriaHidden:!0})}}updateSortOrder(){var t;if(!this.eSortOrder)return;const r=this.sortController.getColumnsWithSortingOrdered(),n=(t=this.sortController.getDisplaySortIndexForColumn(this.column))!=null?t:-1,i=r.some(o=>{var a;return(a=this.sortController.getDisplaySortIndexForColumn(o))!=null?a:!1}),s=n>=0&&i;jt(this.eSortOrder,s,{skipAriaHidden:!0}),n>=0?this.eSortOrder.textContent=(n+1).toString():Zr(this.eSortOrder)}};Vl.TEMPLATE=`<span class="ag-sort-indicator-container">
            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
        </span>`;S([Me("eSortOrder")],Vl.prototype,"eSortOrder",2);S([Me("eSortAsc")],Vl.prototype,"eSortAsc",2);S([Me("eSortDesc")],Vl.prototype,"eSortDesc",2);S([Me("eSortMixed")],Vl.prototype,"eSortMixed",2);S([Me("eSortNone")],Vl.prototype,"eSortNone",2);S([F("columnModel")],Vl.prototype,"columnModel",2);S([F("sortController")],Vl.prototype,"sortController",2);var pk=Vl,ui=class d$ extends mt{constructor(){super(...arguments),this.lastMovingChanged=0}destroy(){super.destroy()}refresh(t){const r=this.params;return this.params=t,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||r.enableFilterButton!=t.enableFilterButton||r.enableFilterIcon!=t.enableFilterIcon?!1:(this.setDisplayName(t),!0)}workOutTemplate(){var t;let r=(t=this.params.template)!=null?t:d$.TEMPLATE;return r=r&&r.trim?r.trim():r,r}init(t){this.params=t,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(t)}setDisplayName(t){if(this.currentDisplayName!=t.displayName){this.currentDisplayName=t.displayName;const r=sn(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=r)}}addInIcon(t,r,n){if(r==null)return;const i=kr(t,this.gos,n);i&&r.appendChild(i)}setupTap(){const{gos:t}=this;if(t.get("suppressTouch"))return;const r=new kn(this.getGui(),!0),n=this.shouldSuppressMenuHide(),i=n&&xe(this.eMenu),s=i?new kn(this.eMenu,!0):r;if(this.params.enableMenu){const o=i?"EVENT_TAP":"EVENT_LONG_TAP",a=l=>this.params.showColumnMenuAfterMouseClick(l.touchStart);this.addManagedListener(s,kn[o],a)}if(this.params.enableSorting){const o=a=>{var l,c;const u=a.touchStart.target;n&&((l=this.eMenu)!=null&&l.contains(u)||(c=this.eFilterButton)!=null&&c.contains(u))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListener(r,kn.EVENT_TAP,o)}if(this.params.enableFilterButton){const o=new kn(this.eFilterButton,!0);this.addManagedListener(o,"tap",()=>this.params.showFilter(this.eFilterButton)),this.addDestroyFunc(()=>o.destroy())}this.addDestroyFunc(()=>r.destroy()),i&&this.addDestroyFunc(()=>s.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){jo(this.eMenu),this.eMenu=void 0;return}const t=this.menuService.isLegacyMenuEnabled();this.addInIcon(t?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!t),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedListener(this.eMenu,"click",()=>this.params.showColumnMenu(this.eMenu)),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(t){var r,n,i,s;const{column:o}=this.params,a=this.menuService.isLegacyMenuEnabled();if(t&&!a){if(this.menuService.isFilterMenuInHeaderEnabled(o))return this.params.showFilter((n=(r=this.eFilterButton)!=null?r:this.eMenu)!=null?n:this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu((s=(i=this.eMenu)!=null?i:this.eFilterButton)!=null?s:this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new pk(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListener(this.params.column,ar.EVENT_MOVING_CHANGED,()=>{this.lastMovingChanged=new Date().getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",r=>{const n=this.params.column.isMoving(),s=new Date().getTime()-this.lastMovingChanged<50;if(!(n||s)){const l=this.gos.get("multiSortKey")==="ctrl"?r.ctrlKey||r.metaKey:r.shiftKey;this.params.progressSort(l)}});const t=()=>{if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",this.params.column.isSortAscending()),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",this.params.column.isSortDescending()),this.addOrRemoveCssClass("ag-header-cell-sorted-none",this.params.column.isSortNone()),this.params.column.getColDef().showRowGroup){const r=this.columnModel.getSourceColumnsForGroupColumn(this.params.column),i=!(r==null?void 0:r.every(s=>this.params.column.getSort()==s.getSort()));this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",i)}};this.addManagedListener(this.eventService,_.EVENT_SORT_CHANGED,t),this.addManagedListener(this.eventService,_.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedListener(this.eFilterButton,"click",()=>this.params.showFilter(this.eFilterButton)):this.eFilterButton=void 0}configureFilter(t,r,n){if(!t)return jo(r),!1;const{column:i}=this.params;return this.addInIcon("filter",r,i),this.addManagedListener(i,ar.EVENT_FILTER_CHANGED,n),n(),!0}onFilterChangedIcon(){const t=this.params.column.isFilterActive();jt(this.eFilter,t,{skipAriaHidden:!0})}onFilterChangedButton(){const t=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",t)}getAnchorElementForMenu(t){var r,n,i,s;return t?(n=(r=this.eFilterButton)!=null?r:this.eMenu)!=null?n:this.getGui():(s=(i=this.eMenu)!=null?i:this.eFilterButton)!=null?s:this.getGui()}};ui.TEMPLATE=`<div class="ag-cell-label-container" role="presentation">
            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
            <span ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
            <div ref="eLabel" class="ag-header-cell-label" role="presentation">
                <span ref="eText" class="ag-header-cell-text"></span>
                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
            </div>
        </div>`;S([F("sortController")],ui.prototype,"sortController",2);S([F("menuService")],ui.prototype,"menuService",2);S([F("columnModel")],ui.prototype,"columnModel",2);S([Me("eFilter")],ui.prototype,"eFilter",2);S([Me("eFilterButton")],ui.prototype,"eFilterButton",2);S([Me("eSortIndicator")],ui.prototype,"eSortIndicator",2);S([Me("eMenu")],ui.prototype,"eMenu",2);S([Me("eLabel")],ui.prototype,"eLabel",2);S([Me("eText")],ui.prototype,"eText",2);S([Me("eSortOrder")],ui.prototype,"eSortOrder",2);S([Me("eSortAsc")],ui.prototype,"eSortAsc",2);S([Me("eSortDesc")],ui.prototype,"eSortDesc",2);S([Me("eSortMixed")],ui.prototype,"eSortMixed",2);S([Me("eSortNone")],ui.prototype,"eSortNone",2);var NT=ui,oy=class h$ extends mt{constructor(){super(h$.TEMPLATE)}destroy(){super.destroy()}init(t){this.params=t,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&ot("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");const t=i=>{if($o(i))return;const s=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),s,"uiColumnExpanded")};this.addTouchAndClickListeners(this.eCloseIcon,t),this.addTouchAndClickListeners(this.eOpenIcon,t);const r=i=>{Yo(i)};this.addManagedListener(this.eCloseIcon,"dblclick",r),this.addManagedListener(this.eOpenIcon,"dblclick",r),this.addManagedListener(this.getGui(),"dblclick",t),this.updateIconVisibility();const n=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(n,rn.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(n,rn.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))}addTouchAndClickListeners(t,r){const n=new kn(t,!0);this.addManagedListener(n,kn.EVENT_TAP,r),this.addDestroyFunc(()=>n.destroy()),this.addManagedListener(t,"click",r)}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const r=this.params.columnGroup.isExpanded();jt(this.eOpenIcon,r),jt(this.eCloseIcon,!r)}else jt(this.eOpenIcon,!1),jt(this.eCloseIcon,!1)}addInIcon(t,r){const n=kr(t,this.gos,null);n&&this.getRefElement(r).appendChild(n)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){jt(this.eOpenIcon,!1),jt(this.eCloseIcon,!1);return}}setupLabel(){var t;const{displayName:r,columnGroup:n}=this.params;if(xe(r)){const i=sn(r,!0);this.getRefElement("agLabel").textContent=i}this.addOrRemoveCssClass("ag-sticky-label",!((t=n.getColGroupDef())!=null&&t.suppressStickyLabel))}};oy.TEMPLATE=`<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">
            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`;S([F("columnModel")],oy.prototype,"columnModel",2);S([Me("agOpened")],oy.prototype,"eOpenIcon",2);S([Me("agClosed")],oy.prototype,"eCloseIcon",2);var rZ=oy,uh=class extends mt{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},fk=class p$ extends uh{constructor(){super(p$.TEMPLATE)}init(t){this.params=t,this.focusAfterAttached=t.cellStartedEdit,this.eTextArea.setMaxLength(t.maxLength||200).setCols(t.cols||60).setRows(t.rows||10),xe(t.value,!0)&&this.eTextArea.setValue(t.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(t){const r=t.key;(r===Y.LEFT||r===Y.UP||r===Y.RIGHT||r===Y.DOWN||t.shiftKey&&r===Y.ENTER)&&t.stopPropagation()}afterGuiAttached(){const t=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(t("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const t=this.eTextArea.getValue();return!xe(t)&&!xe(this.params.value)?this.params.value:this.params.parseValue(t)}};fk.TEMPLATE=`<div class="ag-large-text">
            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`;S([Me("eTextArea")],fk.prototype,"eTextArea",2);var nZ=fk,gk=class extends uh{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>
            </div>`),this.startedByEnter=!1}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueService:r,gos:n}=this,{values:i,value:s,eventKey:o}=e;if(gt(i)){console.warn("AG Grid: no values found for select cellEditor");return}this.startedByEnter=o!=null?o===Y.ENTER:!1;let a=!1;i.forEach(d=>{const p={value:d},f=r.formatValue(e.column,null,d),m=f!=null;p.text=m?f:d,t.addOption(p),a=a||s===d}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:u}=e;l!=null&&t.setPickerGap(l),u!=null&&t.setPickerMaxHeight(u),c!=null&&t.setPickerMaxWidth(c),n.get("editType")!=="fullRow"&&this.addManagedListener(this.eSelect,BS.EVENT_ITEM_SELECTED,()=>e.stopEditing())}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}};S([F("valueService")],gk.prototype,"valueService",2);S([Me("eSelect")],gk.prototype,"eSelect",2);var ay=class extends uh{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`),this.cellEditorInput=e}init(e){this.params=e;const t=this.eInput;this.cellEditorInput.init(t,e);let r;if(e.cellStartedEdit){this.focusAfterAttached=!0;const n=e.eventKey;n===Y.BACKSPACE||e.eventKey===Y.DELETE?r="":n&&n.length===1?r=n:(r=this.cellEditorInput.getStartValue(),n!==Y.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,r=this.cellEditorInput.getStartValue();r!=null&&t.setStartValue(r),this.addManagedListener(t.getGui(),"keydown",n=>{const{key:i}=n;(i===Y.PAGE_UP||i===Y.PAGE_DOWN)&&n.preventDefault()})}afterGuiAttached(){var e,t;const r=this.localeService.getLocaleTextFunc(),n=this.eInput;if(n.setInputAriaLabel(r("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Na()||n.getFocusableElement().focus();const i=n.getInputElement();this.highlightAllOnFocus?i.select():(t=(e=this.cellEditorInput).setCaret)==null||t.call(e)}focusIn(){const e=this.eInput,t=e.getFocusableElement(),r=e.getInputElement();t.focus(),r.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}};S([Me("eInput")],ay.prototype,"eInput",2);var iZ=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'}init(e,t){this.eInput=e,this.params=t,t.maxLength!=null&&e.setMaxLength(t.maxLength)}getValue(){const e=this.eInput.getValue();return!xe(e)&&!xe(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const e=this.eInput.getValue(),t=xe(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},kO=class extends ay{constructor(){super(new iZ)}},sZ="",oZ="",f$=class extends mt{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");const r=document.createElement("span");r.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(r),this.setTemplateFromElement(e)}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){const r=Math.abs(t),n=e.formatValue(r),i=xe(n)?n:r,s=t>=0;s?this.eDelta.textContent=sZ+i:this.eDelta.textContent=oZ+i,this.eDelta.classList.toggle("ag-value-change-delta-up",s),this.eDelta.classList.toggle("ag-value-change-delta-down",!s)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),Zr(this.eDelta)}refresh(e,t=!1){const r=e.value;if(r===this.lastValue||(xe(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:xe(e.value)?this.eValue.textContent=r:Zr(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof r=="number"&&typeof this.lastValue=="number"){const n=r-this.lastValue;this.showDelta(e,n)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=r,!0}};S([F("filterManager")],f$.prototype,"filterManager",2);var g$=class extends mt{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let r=e.value;return gt(r)&&(r=""),r===this.lastValue||this.filterManager.isSuppressFlashingCellsBecauseFiltering()?!1:(t||this.addSlideAnimation(),this.lastValue=r,xe(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:xe(e.value)?this.eCurrent.textContent=r:Zr(this.eCurrent),!0)}};S([F("filterManager")],g$.prototype,"filterManager",2);var xr=class dr{constructor(t){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=dr.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(t){this.setDataCommon(t,!1)}updateData(t){this.setDataCommon(t,!0)}setDataCommon(t,r){const n=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const i=this.createDataChangedEvent(t,n,r);this.dispatchLocalEvent(i)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,r,n){return{type:dr.EVENT_DATA_CHANGED,node:this,oldData:r,newData:t,update:n}}createLocalRowEvent(t){return{type:t,node:this}}getRowIndexString(){return this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const t=new dr(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(t,r){const n=xe(this.id)?this.createDaemonNode():null,i=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(r),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,n);const s=this.createDataChangedEvent(t,i,!1);this.dispatchLocalEvent(s)}checkRowSelectable(){const t=this.beans.gos.get("isRowSelectable");this.setRowSelectable(t?t(this):!0)}setRowSelectable(t,r){if(this.selectable!==t){if(this.selectable=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(dr.EVENT_SELECTABLE_CHANGED)),r)return;if(this.beans.gos.get("groupSelectsChildren")){const i=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:i??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){const r=this.beans.gos.getCallback("getRowId");if(r)if(this.data){const n=this.getGroupKeys(!0);this.id=r({data:this.data,parentKeys:n.length>0?n:void 0,level:this.level}),this.id!==null&&typeof this.id=="string"&&this.id.startsWith(dr.ID_PREFIX_ROW_GROUP)&&console.error(`AG Grid: Row IDs cannot start with ${dr.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`),this.id!==null&&typeof this.id!="string"&&(this.id=""+this.id)}else this.id=void 0;else this.id=t}getGroupKeys(t=!1){const r=[];let n=this;for(t&&(n=n.parent);n&&n.level>=0;)r.push(n.key),n=n.parent;return r.reverse(),r}isPixelInRange(t){return!xe(this.rowTop)||!xe(this.rowHeight)?!1:t>=this.rowTop&&t<this.rowTop+this.rowHeight}setFirstChild(t){this.firstChild!==t&&(this.firstChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(dr.EVENT_FIRST_CHILD_CHANGED)))}setLastChild(t){this.lastChild!==t&&(this.lastChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(dr.EVENT_LAST_CHILD_CHANGED)))}setChildIndex(t){this.childIndex!==t&&(this.childIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(dr.EVENT_CHILD_INDEX_CHANGED)))}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(dr.EVENT_TOP_CHANGED)),this.setDisplayed(t!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(t){this.displayed!==t&&(this.displayed=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(dr.EVENT_DISPLAYED_CHANGED)))}setDragging(t){this.dragging!==t&&(this.dragging=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(dr.EVENT_DRAGGING_CHANGED)))}setHighlighted(t){t!==this.highlighted&&(this.highlighted=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(dr.EVENT_HIGHLIGHT_CHANGED)))}setHovered(t){this.hovered!==t&&(this.hovered=t)}isHovered(){return this.hovered}setAllChildrenCount(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(dr.EVENT_ALL_CHILDREN_COUNT_CHANGED)))}setMaster(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(dr.EVENT_MASTER_CHANGED)))}setGroup(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(dr.EVENT_GROUP_CHANGED)))}setRowHeight(t,r=!1){this.rowHeight=t,this.rowHeightEstimated=r,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(dr.EVENT_HEIGHT_CHANGED))}setRowAutoHeight(t,r){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[r.getId()]=t,t!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=bi(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let t=!1,r=!0,n=0;const i=this.__autoHeights;if(i==null||(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(a=>{let l=i[a.getId()];if(l==null)if(this.beans.columnModel.isColSpanActive()){let c=[];switch(a.getPinned()){case"left":c=this.beans.columnModel.getDisplayedLeftColumnsForRow(this);break;case"right":c=this.beans.columnModel.getDisplayedRightColumnsForRow(this);break;case null:c=this.beans.columnModel.getViewportCenterColumnsForRow(this);break}if(c.includes(a)){t=!0;return}l=-1}else{t=!0;return}else r=!1;l>n&&(n=l)}),t)||((r||n<10)&&(n=this.beans.gos.getRowHeightForNode(this).height),n==this.rowHeight))return;this.setRowHeight(n);const o=this.beans.rowModel;o.onRowHeightChangedDebounced&&o.onRowHeightChangedDebounced()}setRowIndex(t){this.rowIndex!==t&&(this.rowIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(dr.EVENT_ROW_INDEX_CHANGED)))}setUiLevel(t){this.uiLevel!==t&&(this.uiLevel=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(dr.EVENT_UI_LEVEL_CHANGED)))}setExpanded(t,r,n){if(this.expanded===t)return;this.expanded=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(dr.EVENT_EXPANDED_CHANGED));const i=Object.assign({},this.createGlobalRowEvent(_.EVENT_ROW_GROUP_OPENED),{expanded:t,event:r||null});this.beans.rowNodeEventThrottle.dispatchExpanded(i,n),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(t){return this.beans.gos.addGridCommonParams({type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}dispatchLocalEvent(t){this.eventService&&this.eventService.dispatchEvent(t)}setDataValue(t,r,n){const s=(()=>{var l;return typeof t!="string"?t:(l=this.beans.columnModel.getGridColumn(t))!=null?l:this.beans.columnModel.getPrimaryColumn(t)})(),o=this.getValueFromValueService(s);if(this.beans.gos.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(s,o,r,n),!1;const a=this.beans.valueService.setValue(this,s,r,n);return this.dispatchCellChangedEvent(s,r,o),this.checkRowSelectable(),a}getValueFromValueService(t){var r,n;const i=this.leafGroup&&this.beans.columnModel.isPivotMode(),s=this.group&&this.expanded&&!this.footer&&!i;let o=!1;const a=(r=this.beans.gos.get("groupTotalRow"))!=null?r:this.beans.gos.get("groupIncludeFooter");typeof a!="function"?o=!!a:o=!!((n=this.beans.gos.getCallback("groupTotalRow"))!=null?n:this.beans.gos.getCallback("groupIncludeFooter"))({node:this});const l=this.beans.gos.get("groupSuppressBlankHeader"),c=s&&o&&!l;return this.beans.valueService.getValue(t,this,!1,c)}dispatchEventForSaveValueReadOnly(t,r,n,i){const s=this.beans.gos.addGridCommonParams({type:_.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:t,colDef:t.getColDef(),data:this.data,node:this,oldValue:r,newValue:n,value:n,source:i});this.beans.eventService.dispatchEvent(s)}setGroupValue(t,r){const n=this.beans.columnModel.getGridColumn(t);gt(this.groupData)&&(this.groupData={});const i=n.getColId(),s=this.groupData[i];s!==r&&(this.groupData[i]=r,this.dispatchCellChangedEvent(n,r,s))}setAggData(t){const r=this.aggData;if(this.aggData=t,this.eventService){const n=i=>{const s=this.aggData?this.aggData[i]:void 0,o=r?r[i]:void 0;if(s===o)return;const a=this.beans.columnModel.lookupGridColumn(i);a&&this.dispatchCellChangedEvent(a,s,o)};for(const i in this.aggData)n(i);for(const i in t)i in this.aggData||n(i)}}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gos.isRowModelType("serverSide")){const n=this.beans.gos.get("treeData"),i=this.beans.gos.get("isServerSideGroup");t=!this.stub&&!this.footer&&(n?!!i&&i(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(dr.EVENT_HAS_CHILDREN_CHANGED)))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){return this.group&&Ks(this.childrenAfterGroup)}dispatchCellChangedEvent(t,r,n){const i={type:dr.EVENT_CELL_CHANGED,node:this,column:t,newValue:r,oldValue:n};this.dispatchLocalEvent(i)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(r=>r.depthFirstSearch(t)),t(this)}calculateSelectedFromChildren(){var t;let r=!1,n=!1,i=!1;if(!((t=this.childrenAfterGroup)!=null&&t.length))return this.selectable?this.selected:null;for(let s=0;s<this.childrenAfterGroup.length;s++){const o=this.childrenAfterGroup[s];let a=o.isSelected();if(!o.selectable){const l=o.calculateSelectedFromChildren();if(l===null)continue;a=l}switch(a){case!0:r=!0;break;case!1:n=!0;break;default:i=!0;break}}if(!(i||r&&n))return r?!0:n?!1:this.selectable?this.selected:null}setSelectedInitialValue(t){this.selected=t}selectThisNode(t,r,n="api"){const i=!this.selectable&&t,s=this.selected===t;if(i||s)return!1;this.selected=t,this.eventService&&this.dispatchLocalEvent(this.createLocalRowEvent(dr.EVENT_ROW_SELECTED));const o=this.sibling;o&&o.footer&&o.eventService&&o.dispatchLocalEvent(o.createLocalRowEvent(dr.EVENT_ROW_SELECTED));const a=Sr(tt({},this.createGlobalRowEvent(_.EVENT_ROW_SELECTED)),{event:r||null,source:n});return this.beans.eventService.dispatchEvent(a),!0}setSelected(t,r=!1,n="api"){if(typeof n=="boolean"){console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:t,clearSelection:r,rangeSelect:!1,source:n})}setSelectedParams(t){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):this.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(Sr(tt({},t),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return this.rowPinned==="top"||this.rowPinned==="bottom"}isParentOfNode(t){let r=this.parent;for(;r;){if(r===t)return!0;r=r.parent}return!1}addEventListener(t,r){var n,i;this.eventService||(this.eventService=new qo),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new ID(this.beans.frameworkOverrides));const s=(i=(n=this.frameworkEventListenerService)==null?void 0:n.wrap(r))!=null?i:r;this.eventService.addEventListener(t,s)}removeEventListener(t,r){var n,i;if(!this.eventService)return;const s=(i=(n=this.frameworkEventListenerService)==null?void 0:n.unwrap(r))!=null?i:r;this.eventService.removeEventListener(t,s),this.eventService.noRegisteredListenersExist()&&(this.eventService=null)}onMouseEnter(){this.dispatchLocalEvent(this.createLocalRowEvent(dr.EVENT_MOUSE_ENTER))}onMouseLeave(){this.dispatchLocalEvent(this.createLocalRowEvent(dr.EVENT_MOUSE_LEAVE))}getFirstChildOfFirstChild(t){let r=this,n=!0,i=!1,s=null;for(;n&&!i;){const o=r.parent;xe(o)&&r.firstChild?o.rowGroupColumn===t&&(i=!0,s=o):n=!1,r=o}return i?s:null}isFullWidthCell(){if(this.detail)return!0;const t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this}):!1}getRoute(){if(this.key==null)return;const t=[];let r=this;for(;r.key!=null;)t.push(r.key),r=r.parent;return t.reverse()}createFooter(){if(this.sibling)return;const t=new Set(["eventService","__objectId","sticky"]),r=new dr(this.beans);Object.keys(this).forEach(n=>{t.has(n)||(r[n]=this[n])}),r.footer=!0,r.setRowTop(null),r.setRowIndex(null),r.oldRowTop=null,r.id="rowGroupFooter_"+this.id,r.sibling=this,this.sibling=r}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}};xr.ID_PREFIX_ROW_GROUP="row-group-";xr.ID_PREFIX_TOP_PINNED="t-";xr.ID_PREFIX_BOTTOM_PINNED="b-";xr.OBJECT_ID_SEQUENCE=0;xr.EVENT_ROW_SELECTED="rowSelected";xr.EVENT_DATA_CHANGED="dataChanged";xr.EVENT_CELL_CHANGED="cellChanged";xr.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged";xr.EVENT_MASTER_CHANGED="masterChanged";xr.EVENT_GROUP_CHANGED="groupChanged";xr.EVENT_MOUSE_ENTER="mouseEnter";xr.EVENT_MOUSE_LEAVE="mouseLeave";xr.EVENT_HEIGHT_CHANGED="heightChanged";xr.EVENT_TOP_CHANGED="topChanged";xr.EVENT_DISPLAYED_CHANGED="displayedChanged";xr.EVENT_FIRST_CHILD_CHANGED="firstChildChanged";xr.EVENT_LAST_CHILD_CHANGED="lastChildChanged";xr.EVENT_CHILD_INDEX_CHANGED="childIndexChanged";xr.EVENT_ROW_INDEX_CHANGED="rowIndexChanged";xr.EVENT_EXPANDED_CHANGED="expandedChanged";xr.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged";xr.EVENT_SELECTABLE_CHANGED="selectableChanged";xr.EVENT_UI_LEVEL_CHANGED="uiLevelChanged";xr.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged";xr.EVENT_DRAGGING_CHANGED="draggingChanged";var Dt=xr,$S=class extends mt{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),r=NS(e,t),[n,i]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],s=e(n,i);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${s} (${r})`)}onClicked(e,t,r){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:r.shiftKey,groupSelectsFiltered:t,event:r,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",n=>{Yo(n)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",n=>{Yo(n);const i=this.gos.get("groupSelectsFiltered"),s=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(s,i)?this.onClicked(!0,i,n||{})===0&&this.onClicked(!1,i,n):s?this.onClicked(!1,i,n):this.onClicked(!0,i,n||{})}),this.addManagedListener(this.rowNode,Dt.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,Dt.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,Dt.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gos.get("isRowSelectable")||typeof this.getIsVisible()=="function"){const n=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_CHANGED,n),this.addManagedListener(this.rowNode,Dt.EVENT_DATA_CHANGED,n),this.addManagedListener(this.rowNode,Dt.EVENT_CELL_CHANGED,n),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&this.gos.isRowModelType("clientSide")}showOrHideSelect(){var e,t,r;let n=this.rowNode.selectable;const i=this.getIsVisible();if(n)if(typeof i=="function"){const o=(e=this.overrides)==null?void 0:e.callbackParams;if(!this.column)n=i(Sr(tt({},o),{node:this.rowNode,data:this.rowNode.data}));else{const a=this.column.createColumnFunctionCallbackParams(this.rowNode);n=i(tt(tt({},o),a))}}else n=i??!1;if((t=this.column)==null?void 0:t.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!n),this.setVisible(!0),this.setDisplayed(!0);return}if((r=this.overrides)!=null&&r.removeHidden){this.setDisplayed(n);return}this.setVisible(n)}getIsVisible(){var e,t;return this.overrides?this.overrides.isVisible:(t=(e=this.column)==null?void 0:e.getColDef())==null?void 0:t.checkboxSelection}};S([Me("eCheckbox")],$S.prototype,"eCheckbox",2);S([_e],$S.prototype,"postConstruct",1);var m$=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(m$||{}),Ct=class extends Ae{constructor(){super(...arguments),this.dragSourceAndParamsList=[],this.dropTargets=[]}init(){this.ePinnedIcon=zs("columnMovePin",this.gos,null),this.eHideIcon=zs("columnMoveHide",this.gos,null),this.eMoveIcon=zs("columnMoveMove",this.gos,null),this.eLeftIcon=zs("columnMoveLeft",this.gos,null),this.eRightIcon=zs("columnMoveRight",this.gos,null),this.eGroupIcon=zs("columnMoveGroup",this.gos,null),this.eAggregateIcon=zs("columnMoveValue",this.gos,null),this.ePivotIcon=zs("columnMovePivot",this.gos,null),this.eDropNotAllowedIcon=zs("dropNotAllowed",this.gos,null)}addDragSource(e,t=!1){const r={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:r,dragSource:e}),this.dragService.addDragSource(r)}removeDragSource(e){const t=this.dragSourceAndParamsList.find(r=>r.dragSource===e);t&&(this.dragService.removeDragSource(t.params),zi(this.dragSourceAndParamsList,t))}clearDragSourceParamsList(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=void 0,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(e){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){const t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()}onDragging(e,t){var r,n,i,s;const o=this.getHorizontalDirection(e),a=this.getVerticalDirection(e);this.eventLastTime=e,this.positionGhost(e);const l=this.dropTargets.filter(u=>this.isMouseOnDropTarget(e,u)),c=this.findCurrentDropTarget(e,l);if(c!==this.lastDropTarget)this.leaveLastTargetIfExists(e,o,a,t),this.lastDropTarget!==null&&c===null&&((n=(r=this.dragSource).onGridExit)==null||n.call(r,this.dragItem)),this.lastDropTarget===null&&c!==null&&((s=(i=this.dragSource).onGridEnter)==null||s.call(i,this.dragItem)),this.enterDragTargetIfExists(c,e,o,a,t),this.lastDropTarget=c;else if(c&&c.onDragging){const u=this.createDropTargetEvent(c,e,o,a,t);c.onDragging(u)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,r=[[e.getContainer()]];return t?r.concat(t):r}allContainersIntersect(e,t){for(const r of t){const n=r.getBoundingClientRect();if(n.width===0||n.height===0)return!1;const i=e.clientX>=n.left&&e.clientX<n.right,s=e.clientY>=n.top&&e.clientY<n.bottom;if(!i||!s)return!1}return!0}isMouseOnDropTarget(e,t){const r=this.getAllContainersFromDropTarget(t);let n=!1;for(const i of r)if(this.allContainersIntersect(e,i)){n=!0;break}return t.targetContainsSource&&!t.getContainer().contains(this.dragSource.eElement)?!1:n&&t.isInterestedIn(this.dragSource.type,this.dragSource.eElement)}findCurrentDropTarget(e,t){const r=t.length;if(r===0)return null;if(r===1)return t[0];const i=this.gos.getRootNode().elementsFromPoint(e.clientX,e.clientY);for(const s of i)for(const o of t)if(U4(this.getAllContainersFromDropTarget(o)).indexOf(s)!==-1)return o;return null}enterDragTargetIfExists(e,t,r,n,i){if(e){if(e.onDragEnter){const s=this.createDropTargetEvent(e,t,r,n,i);e.onDragEnter(s)}this.setGhostIcon(e.getIconName?e.getIconName():null)}}leaveLastTargetIfExists(e,t,r,n){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){const i=this.createDropTargetEvent(this.lastDropTarget,e,t,r,n);this.lastDropTarget.onDragLeave(i)}this.setGhostIcon(null)}}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(r=>r.external).find(r=>r.getContainer()===e.getContainer())||null}getHorizontalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientX,r=e.clientX;return t===r?null:t>r?0:1}getVerticalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientY,r=e.clientY;return t===r?null:t>r?0:1}createDropTargetEvent(e,t,r,n,i){const s=e.getContainer(),o=s.getBoundingClientRect(),{gridApi:a,columnApi:l,dragItem:c,dragSource:u}=this,d=t.clientX-o.left,p=t.clientY-o.top;return{event:t,x:d,y:p,vDirection:n,hDirection:r,dragSource:u,fromNudge:i,dragItem:c,api:a,columnApi:l,dropZoneTarget:s}}positionGhost(e){const t=this.eGhost;if(!t)return;const n=t.getBoundingClientRect().height,i=Cz()-2,s=wz()-2,o=XD(t.offsetParent),{clientY:a,clientX:l}=e;let c=a-o.top-n/2,u=l-o.left-10;const d=this.gos.getDocument(),p=d.defaultView||window,f=p.pageYOffset||d.documentElement.scrollTop,m=p.pageXOffset||d.documentElement.scrollLeft;i>0&&u+t.clientWidth>i+m&&(u=i+m-t.clientWidth),u<0&&(u=0),s>0&&c+t.clientHeight>s+f&&(c=s+f-t.clientHeight),c<0&&(c=0),t.style.left=`${u}px`,t.style.top=`${c}px`}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=Qi(Ct.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);const{theme:e}=this.environment.getTheme();e&&this.eGhost.classList.add(e),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);const t=this.eGhost.querySelector(".ag-dnd-ghost-label");let r=this.dragSource.dragItemName;TS(r)&&(r=r()),t.innerHTML=sn(r)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";const n=this.gos.getDocument();let i=null,s=null;try{i=n.fullscreenElement}catch{}finally{i||(i=this.gos.getRootNode());const o=i.querySelector("body");o?s=o:i instanceof ShadowRoot?s=i:i instanceof Document?s=i==null?void 0:i.documentElement:s=i}this.eGhostParent=s,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")}setGhostIcon(e,t=!1){Zr(this.eGhostIcon);let r=null;switch(e||(e=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():Ct.ICON_NOT_ALLOWED),e){case Ct.ICON_PINNED:r=this.ePinnedIcon;break;case Ct.ICON_MOVE:r=this.eMoveIcon;break;case Ct.ICON_LEFT:r=this.eLeftIcon;break;case Ct.ICON_RIGHT:r=this.eRightIcon;break;case Ct.ICON_GROUP:r=this.eGroupIcon;break;case Ct.ICON_AGGREGATE:r=this.eAggregateIcon;break;case Ct.ICON_PIVOT:r=this.ePivotIcon;break;case Ct.ICON_NOT_ALLOWED:r=this.eDropNotAllowedIcon;break;case Ct.ICON_HIDE:r=this.eHideIcon;break}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",t),!(r===this.eHideIcon&&this.gos.get("suppressDragLeaveHidesColumns"))&&r&&this.eGhostIcon.appendChild(r)}};Ct.ICON_PINNED="pinned";Ct.ICON_MOVE="move";Ct.ICON_LEFT="left";Ct.ICON_RIGHT="right";Ct.ICON_GROUP="group";Ct.ICON_AGGREGATE="aggregate";Ct.ICON_PIVOT="pivot";Ct.ICON_NOT_ALLOWED="notAllowed";Ct.ICON_HIDE="hide";Ct.GHOST_TEMPLATE=`<div class="ag-dnd-ghost ag-unselectable">
            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
            <div class="ag-dnd-ghost-label"></div>
        </div>`;S([F("dragService")],Ct.prototype,"dragService",2);S([F("mouseEventService")],Ct.prototype,"mouseEventService",2);S([F("columnApi")],Ct.prototype,"columnApi",2);S([F("gridApi")],Ct.prototype,"gridApi",2);S([_e],Ct.prototype,"init",1);S([Ni],Ct.prototype,"clearDragSourceParamsList",1);Ct=S([$e("dragAndDropService")],Ct);var Od=class extends mt{constructor(e,t,r,n,i,s){super(),this.cellValueFn=e,this.rowNode=t,this.column=r,this.customGui=n,this.dragStartPixels=i,this.suppressVisibilityChange=s,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(kr("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const e=this.gos.get("rowDragManaged")?new C$(this,this.beans,this.rowNode,this.column):new y$(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];const t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){const e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&ot("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();const t=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:this.getGui(),dragItemName:()=>{var r;const n=this.getDragItem(),i=((r=n.rowNodes)==null?void 0:r.length)||1,s=this.getRowDragText(this.column);return s?s(n,i):i===1?this.cellValueFn():`${i} ${t("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}removeDragSource(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null}};S([F("beans")],Od.prototype,"beans",2);S([_e],Od.prototype,"postConstruct",1);S([Ni],Od.prototype,"removeDragSource",1);var v$=class extends Ae{constructor(e,t,r){super(),this.parent=e,this.rowNode=t,this.column=r}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let r=!0,n=!1;this.column&&(r=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),n=TS(this.column.getColDef().rowDrag)),n?(this.parent.setDisplayed(!0,t),this.parent.setVisible(r,t)):(this.parent.setDisplayed(r,t),this.parent.setVisible(!0,t))}}},y$=class extends v${constructor(e,t,r,n){super(e,r,n),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,Dt.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Dt.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Dt.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,_.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}};S([_e],y$.prototype,"postConstruct",1);var C$=class extends v${constructor(e,t,r,n){super(e,r,n),this.beans=t}postConstruct(){this.addManagedListener(this.beans.eventService,_.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,_.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,_.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,_.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Dt.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Dt.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),r=t&&t.shouldPreventRowMove(),n=this.gos.get("suppressRowDrag"),i=this.beans.dragAndDropService.hasExternalDropZones(),s=r&&!i||n;this.setDisplayedOrVisible(s)}};S([_e],C$.prototype,"postConstruct",1);var dh=class extends Ae{init(e,t,r,n,i,s,o){var a,l,c,u;this.params=o,this.eGui=t,this.eCheckbox=r,this.eExpanded=n,this.eContracted=i,this.comp=e,this.compClass=s;const{node:d,value:p,colDef:f}=o,m=this.isTopLevelFooter();if(!m){if(this.isEmbeddedRowMismatch())return;if(d.footer&&this.gos.get("groupHideOpenParents")){const C=f&&f.showRowGroup,w=d.rowGroupColumn&&d.rowGroupColumn.getColId();if(C!==w)return}}if(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),!m){const y=o.node.footer&&o.node.rowGroupIndex===this.columnModel.getRowGroupColumns().findIndex(k=>{var P;return k.getColId()===((P=o.colDef)==null?void 0:P.showRowGroup)}),w=this.gos.get("groupDisplayType")!="multipleColumns"||this.gos.get("treeData")||this.gos.get("showOpenedGroup")&&!o.node.footer&&(!o.node.group||o.node.rowGroupIndex!=null&&o.node.rowGroupIndex>this.columnModel.getRowGroupColumns().findIndex(k=>{var P;return k.getColId()===((P=o.colDef)==null?void 0:P.showRowGroup)})),b=!d.group&&(((a=this.params.colDef)==null?void 0:a.field)||((l=this.params.colDef)==null?void 0:l.valueGetter)),x=this.isExpandable(),E=this.columnModel.isPivotMode()&&d.leafGroup&&((c=d.rowGroupColumn)==null?void 0:c.getColId())===((u=o.column)==null?void 0:u.getColDef().showRowGroup);if(!this.showingValueForOpenedParent&&!x&&!b&&!w&&!y&&!E)return}this.addExpandAndContract(),this.addFullWidthRowDraggerIfNeeded(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()}getCellAriaRole(){var e,t;const r=(e=this.params.colDef)==null?void 0:e.cellAriaRole,n=(t=this.params.column)==null?void 0:t.getColDef().cellAriaRole;return r||n||"gridcell"}destroy(){super.destroy(),this.expandListener=null}refreshAriaExpanded(){const{node:e,eGridCell:t}=this.params;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable()){uz(t);return}const r=()=>{Sl(t,!!e.expanded)};this.expandListener=this.addManagedListener(e,Dt.EVENT_EXPANDED_CHANGED,r)||null,r()}isTopLevelFooter(){if(!this.gos.getGrandTotalRow()||this.params.value!=null||this.params.node.level!=-1)return!1;const t=this.params.colDef;if(t==null||t.showRowGroup===!0)return!0;const n=this.columnModel.getRowGroupColumns();return!n||n.length===0?!0:n[0].getId()===t.showRowGroup}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gos.get("embedFullWidthRows"))return!1;const e=this.params.pinned==="left",t=this.params.pinned==="right",r=!e&&!t;return this.gos.get("enableRtl")?this.columnModel.isPinningLeft()?!t:!r:this.columnModel.isPinningLeft()?!e:!r}findDisplayedGroupNode(){const e=this.params.column,t=this.params.node;if(this.showingValueForOpenedParent){let r=t.parent;for(;r!=null;){if(r.rowGroupColumn&&e.isRowGroupDisplayed(r.rowGroupColumn.getId())){this.displayedGroupNode=r;break}r=r.parent}}gt(this.displayedGroupNode)&&(this.displayedGroupNode=t)}setupShowingValueForOpenedParent(){const e=this.params.node,t=this.params.column;if(!this.gos.get("groupHideOpenParents")){this.showingValueForOpenedParent=!1;return}if(!e.groupData){this.showingValueForOpenedParent=!1;return}if(e.rowGroupColumn!=null){const i=e.rowGroupColumn.getId();if(t.isRowGroupDisplayed(i)){this.showingValueForOpenedParent=!1;return}}const n=e.groupData[t.getId()]!=null;this.showingValueForOpenedParent=n}addValueElement(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())}addGroupValue(){var e;const t=this.adjustParamsWithDetailsFromRelatedColumn(),r=this.getInnerCompDetails(t),{valueFormatted:n,value:i}=t;let s=n;if(s==null){const o=this.displayedGroupNode.rowGroupColumn&&((e=this.params.column)==null?void 0:e.isRowGroupDisplayed(this.displayedGroupNode.rowGroupColumn.getId()));this.displayedGroupNode.key===""&&this.displayedGroupNode.group&&o?s=this.localeService.getLocaleTextFunc()("blanks","(Blanks)"):s=i??null}this.comp.setInnerRenderer(r,s)}adjustParamsWithDetailsFromRelatedColumn(){const e=this.displayedGroupNode.rowGroupColumn,t=this.params.column;if(!e)return this.params;if(t!=null&&!t.isRowGroupDisplayed(e.getId()))return this.params;const n=this.params,{value:i,node:s}=this.params,o=this.valueService.formatValue(e,s,i);return Sr(tt({},n),{valueFormatted:o})}addFooterValue(){let e=this.params.totalValueGetter;if(!e){const n=this.params.footerValueGetter;n&&(e=n,ot("As of v31.3, footerValueGetter is deprecated. Use `totalValueGetter` instead."))}let t="";if(e){const n=DD(this.params);n.value=this.params.value,typeof e=="function"?t=e(n):typeof e=="string"?t=this.expressionService.evaluate(e,n):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else t=this.localeService.getLocaleTextFunc()("footerTotal","Total")+" "+(this.params.value!=null?this.params.value:"");const r=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(r,t)}getInnerCompDetails(e){if(e.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gos.get("groupRowRendererParams"),e);const t=this.userComponentFactory.getInnerRendererDetails(e,e),r=o=>o&&o.componentClass==this.compClass;if(t&&!r(t))return t;const n=this.displayedGroupNode.rowGroupColumn,i=n?n.getColDef():void 0;if(!i)return;const s=this.userComponentFactory.getCellRendererDetails(i,e);if(s&&!r(s))return s;if(r(s)&&i.cellRendererParams&&i.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(i.cellRendererParams,e)}addChildCount(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,Dt.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())}updateChildCount(){const e=this.displayedGroupNode.allChildrenCount,n=this.isShowRowGroupForThisRow()&&e!=null&&e>=0?`(${e})`:"";this.comp.setChildCount(n)}isShowRowGroupForThisRow(){if(this.gos.get("treeData"))return!0;const e=this.displayedGroupNode.rowGroupColumn;if(!e)return!1;const t=this.params.column;return t==null||t.isRowGroupDisplayed(e.getId())}addExpandAndContract(){var e;const t=this.params,r=kr("groupExpanded",this.gos,null),n=kr("groupContracted",this.gos,null);r&&this.eExpanded.appendChild(r),n&&this.eContracted.appendChild(n);const i=t.eGridCell;!(((e=this.params.column)==null?void 0:e.isCellEditable(t.node))&&this.gos.get("enableGroupEdit"))&&this.isExpandable()&&!t.suppressDoubleClickExpand&&this.addManagedListener(i,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(i,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(t.node,Dt.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();const o=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,Dt.EVENT_ALL_CHILDREN_COUNT_CHANGED,o),this.addManagedListener(this.displayedGroupNode,Dt.EVENT_MASTER_CHANGED,o),this.addManagedListener(this.displayedGroupNode,Dt.EVENT_GROUP_CHANGED,o),this.addManagedListener(this.displayedGroupNode,Dt.EVENT_HAS_CHILDREN_CHANGED,o)}onExpandClicked(e){$o(e)||(Yo(e),this.onExpandOrContract(e))}onExpandOrContract(e){const t=this.displayedGroupNode,r=!t.expanded;!r&&t.sticky&&this.scrollToStickyNode(t),t.setExpanded(r,e)}scrollToStickyNode(e){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(e.rowTop-e.stickyRowTop)}isExpandable(){if(this.showingValueForOpenedParent)return!0;const e=this.displayedGroupNode,t=this.columnModel.isPivotMode()&&e.leafGroup;if(!(e.isExpandable()&&!e.footer&&!t))return!1;const n=this.params.column;return n!=null&&typeof n.getColDef().showRowGroup=="string"?this.isShowRowGroupForThisRow():!0}showExpandAndContractIcons(){const{params:e,displayedGroupNode:t,columnModel:r}=this,{node:n}=e,i=this.isExpandable();if(i){const c=this.showingValueForOpenedParent?!0:n.expanded;this.comp.setExpandedDisplayed(c),this.comp.setContractedDisplayed(!c)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);const s=r.isPivotMode(),o=s&&t.leafGroup,a=i&&!o,l=n.footer&&n.level===-1;this.comp.addOrRemoveCssClass("ag-cell-expandable",a),this.comp.addOrRemoveCssClass("ag-row-group",a),s?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",o):l||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!a)}onRowNodeIsExpandableChanged(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()}setupIndent(){const e=this.params.node;this.params.suppressPadding||(this.addManagedListener(e,Dt.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())}setIndent(){if(this.gos.get("groupHideOpenParents"))return;const e=this.params,t=e.node,r=!!e.colDef,n=this.gos.get("treeData"),s=!r||n||e.colDef.showRowGroup===!0?t.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+s,this.comp.addOrRemoveCssClass(this.indentClass,!0)}addFullWidthRowDraggerIfNeeded(){if(!this.params.fullWidth||!this.params.rowDrag)return;const e=new Od(()=>this.params.value,this.params.node);this.createManagedBean(e,this.context),this.eGui.insertAdjacentElement("afterbegin",e.getGui())}isUserWantsSelected(){const e=this.params.checkbox;return typeof e=="function"||e===!0}addCheckboxIfNeeded(){const e=this.displayedGroupNode,t=this.isUserWantsSelected()&&!e.footer&&!e.rowPinned&&!e.detail;if(t){const r=new $S;this.getContext().createBean(r),r.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(r.getGui()),this.addDestroyFunc(()=>this.getContext().destroyBean(r))}this.comp.setCheckboxVisible(t)}onKeyDown(e){!(e.key===Y.ENTER)||this.params.suppressEnterExpand||this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(e)}onCellDblClicked(e){if($o(e))return;fw(this.eExpanded,e)||fw(this.eContracted,e)||this.onExpandOrContract(e)}};S([F("expressionService")],dh.prototype,"expressionService",2);S([F("valueService")],dh.prototype,"valueService",2);S([F("columnModel")],dh.prototype,"columnModel",2);S([F("userComponentFactory")],dh.prototype,"userComponentFactory",2);S([F("ctrlsService")],dh.prototype,"ctrlsService",2);var hh=class w$ extends mt{constructor(){super(w$.TEMPLATE)}init(t){const r={setInnerRenderer:(o,a)=>this.setRenderDetails(o,a),setChildCount:o=>this.eChildCount.textContent=o,addOrRemoveCssClass:(o,a)=>this.addOrRemoveCssClass(o,a),setContractedDisplayed:o=>jt(this.eContracted,o),setExpandedDisplayed:o=>jt(this.eExpanded,o),setCheckboxVisible:o=>this.eCheckbox.classList.toggle("ag-invisible",!o)},n=this.createManagedBean(new dh),i=!t.colDef,s=this.getGui();n.init(r,s,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,t),i&&Gr(s,n.getCellAriaRole())}setRenderDetails(t,r){if(t){const n=t.newAgStackInstance();if(!n)return;n.then(i=>{if(!i)return;const s=()=>this.context.destroyBean(i);this.isAlive()?(this.eValue.appendChild(i.getGui()),this.addDestroyFunc(s)):s()})}else this.eValue.innerText=r}destroy(){this.getContext().destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}};hh.TEMPLATE=`<span class="ag-cell-wrapper">
            <span class="ag-group-expanded" ref="eExpanded"></span>
            <span class="ag-group-contracted" ref="eContracted"></span>
            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>
            <span class="ag-group-value" ref="eValue"></span>
            <span class="ag-group-child-count" ref="eChildCount"></span>
        </span>`;S([Me("eExpanded")],hh.prototype,"eExpanded",2);S([Me("eContracted")],hh.prototype,"eContracted",2);S([Me("eCheckbox")],hh.prototype,"eCheckbox",2);S([Me("eValue")],hh.prototype,"eValue",2);S([Me("eChildCount")],hh.prototype,"eChildCount",2);var IO=hh,US=class b$ extends mt{constructor(){super(b$.TEMPLATE)}init(t){t.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingError","ERR")}setupLoading(){const t=kr("groupLoading",this.gos,null);t&&this.eLoadingIcon.appendChild(t);const r=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=r("loadingOoo","Loading")}refresh(t){return!1}destroy(){super.destroy()}};US.TEMPLATE=`<div class="ag-loading">
            <span class="ag-loading-icon" ref="eLoadingIcon"></span>
            <span class="ag-loading-text" ref="eLoadingText"></span>
        </div>`;S([Me("eLoadingIcon")],US.prototype,"eLoadingIcon",2);S([Me("eLoadingText")],US.prototype,"eLoadingText",2);var aZ=US,S$=class x$ extends mt{constructor(){super(x$.TEMPLATE)}init(t){const r=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",r),this.addDestroyFunc(()=>Vp(t.eParentOfValue)),Vp(t.eParentOfValue,r),t.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const t=this.localeService.getLocaleTextFunc();this.getGui().innerText=t("loadingError","ERR");const r=t("ariaSkeletonCellLoadingFailed","Row failed to load");As(this.getGui(),r)}setupLoading(){const r=this.gos.getDocument().createElement("div");r.classList.add("ag-skeleton-effect"),this.getGui().appendChild(r);const i=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");As(this.getGui(),i)}refresh(t){return!1}destroy(){super.destroy()}};S$.TEMPLATE='<div class="ag-skeleton-container"></div>';var lZ=S$,E$=class P$ extends mt{constructor(){super()}destroy(){super.destroy()}init(t){const r=this.gos.get("overlayLoadingTemplate");if(this.setTemplate(r??P$.DEFAULT_LOADING_OVERLAY_TEMPLATE),!r){const n=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=n("loadingOoo","Loading...")})}}};E$.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>';var cZ=E$,R$=class T$ extends mt{constructor(){super()}destroy(){super.destroy()}init(t){const r=this.gos.get("overlayNoRowsTemplate");if(this.setTemplate(r??T$.DEFAULT_NO_ROWS_TEMPLATE),!r){const n=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=n("noRowsToShow","No Rows To Show")})}}};R$.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center"></span>';var uZ=R$,dZ=class extends uh{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().textContent=sn(t,!0)}},hZ=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'}init(e,t){this.eInput=e,this.params=t,t.max!=null&&e.setMax(t.max),t.min!=null&&e.setMin(t.min),t.precision!=null&&e.setPrecision(t.precision),t.step!=null&&e.setStep(t.step);const r=e.getInputElement();t.preventStepping?e.addManagedListener(r,"keydown",this.preventStepping):t.showStepperButtons&&r.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===Y.UP||e.key===Y.DOWN)&&e.preventDefault()}getValue(){const e=this.eInput.getValue();if(!xe(e)&&!xe(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}},pZ=class extends ay{constructor(){super(new hZ)}},fZ=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.eInput.getDate();return!xe(e)&&!xe(this.params.value)?this.params.value:e??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return Js(e,!1)}},gZ=class extends ay{constructor(){super(new fZ)}},mZ=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.formatDate(this.eInput.getDate());return!xe(e)&&!xe(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){var e,t;return Js((t=this.parseDate((e=this.params.value)!=null?e:void 0))!=null?t:null,!1)}parseDate(e){return this.getDataTypeService().getDateParserFunction(this.params.column)(e)}formatDate(e){return this.getDataTypeService().getDateFormatterFunction(this.params.column)(e)}},A$=class extends ay{constructor(){super(new mZ(()=>this.dataTypeService))}};S([F("dataTypeService")],A$.prototype,"dataTypeService",2);var mk=class _$ extends mt{constructor(){super(_$.TEMPLATE)}init(t){this.params=t,this.updateCheckbox(t);const r=this.eCheckbox.getInputElement();r.setAttribute("tabindex","-1"),FD(r,"polite"),this.addManagedListener(r,"click",n=>{if(Yo(n),this.eCheckbox.isDisabled())return;const i=this.eCheckbox.getValue();this.onCheckboxChanged(i)}),this.addManagedListener(r,"dblclick",n=>{Yo(n)}),this.addManagedListener(this.params.eGridCell,"keydown",n=>{if(n.key===Y.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===this.gos.getActiveDomElement()&&this.eCheckbox.toggle();const i=this.eCheckbox.getValue();this.onCheckboxChanged(i),n.preventDefault()}})}refresh(t){return this.params=t,this.updateCheckbox(t),!0}updateCheckbox(t){var r,n,i;let s,o=!0;if(t.node.group&&t.column){const d=t.column.getColId();d.startsWith(Bp)?s=t.value==null||t.value===""?void 0:t.value==="true":t.node.aggData&&t.node.aggData[d]!==void 0?s=(r=t.value)!=null?r:void 0:o=!1}else s=(n=t.value)!=null?n:void 0;if(!o){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(s);const a=t.disabled!=null?t.disabled:!((i=t.column)!=null&&i.isCellEditable(t.node));this.eCheckbox.setDisabled(a);const l=this.localeService.getLocaleTextFunc(),c=NS(l,s),u=a?c:`${l("ariaToggleCellValue","Press SPACE to toggle cell value")} (${c})`;this.eCheckbox.setInputAriaLabel(u)}onCheckboxChanged(t){const{column:r,node:n,rowIndex:i,value:s}=this.params,o={type:_.EVENT_CELL_EDITING_STARTED,column:r,colDef:r==null?void 0:r.getColDef(),data:n.data,node:n,rowIndex:i,rowPinned:n.rowPinned,value:s};this.eventService.dispatchEvent(o);const a=this.params.node.setDataValue(this.params.column,t,"edit"),l={type:_.EVENT_CELL_EDITING_STOPPED,column:r,colDef:r==null?void 0:r.getColDef(),data:n.data,node:n,rowIndex:i,rowPinned:n.rowPinned,value:s,oldValue:s,newValue:t,valueChanged:a};this.eventService.dispatchEvent(l)}};mk.TEMPLATE=`
        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
        </div>`;S([Me("eCheckbox")],mk.prototype,"eCheckbox",2);var vZ=mk,D$=class extends uh{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}init(e){var t;this.params=e;const r=(t=e.value)!=null?t:void 0;this.eCheckbox.setValue(r),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(r),this.addManagedListener(this.eCheckbox,_.EVENT_FIELD_VALUE_CHANGED,i=>this.setAriaLabel(i.selected))}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.localeService.getLocaleTextFunc(),r=NS(t,e),n=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${n} (${r})`)}};S([Me("eCheckbox")],D$.prototype,"eCheckbox",2);var yZ=class extends mt{constructor(){super(),this.setTemplate("<div></div>")}init(e){var t;this.params=e,this.cssClassPrefix=(t=this.params.cssClassPrefix)!=null?t:"ag-menu-option",this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()}configureDefaults(){return!0}addIcon(){if(this.params.isCompact)return;const e=Qi(`<span ref="eIcon" class="${this.getClassName("part")} ${this.getClassName("icon")}" role="presentation"></span>`);this.params.checked?e.appendChild(kr("check",this.gos)):this.params.icon&&(ey(this.params.icon)?e.appendChild(this.params.icon):typeof this.params.icon=="string"?e.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(e)}addName(){const e=Qi(`<span ref="eName" class="${this.getClassName("part")} ${this.getClassName("text")}">${this.params.name||""}</span>`);this.getGui().appendChild(e)}addShortcut(){if(this.params.isCompact)return;const e=Qi(`<span ref="eShortcut" class="${this.getClassName("part")} ${this.getClassName("shortcut")}">${this.params.shortcut||""}</span>`);this.getGui().appendChild(e)}addSubMenu(){const e=Qi(`<span ref="ePopupPointer" class="${this.getClassName("part")} ${this.getClassName("popup-pointer")}"></span>`),t=this.getGui();if(this.params.subMenu){const r=this.gos.get("enableRtl")?"smallLeft":"smallRight";Sl(t,!1),e.appendChild(kr(r,this.gos))}t.appendChild(e)}getClassName(e){return`${this.cssClassPrefix}-${e}`}destroy(){super.destroy()}},Cw=class extends Ae{constructor(){super(...arguments),this.agGridDefaults={agDateInput:n$,agColumnHeader:NT,agColumnGroupHeader:rZ,agSortIndicator:pk,agTextColumnFloatingFilter:tZ,agNumberColumnFloatingFilter:eZ,agDateColumnFloatingFilter:HS,agReadOnlyFloatingFilter:ok,agAnimateShowChangeCellRenderer:f$,agAnimateSlideCellRenderer:g$,agGroupCellRenderer:IO,agGroupRowRenderer:IO,agLoadingCellRenderer:aZ,agSkeletonCellRenderer:lZ,agCheckboxCellRenderer:vZ,agCellEditor:kO,agTextCellEditor:kO,agNumberCellEditor:pZ,agDateCellEditor:gZ,agDateStringCellEditor:A$,agSelectCellEditor:gk,agLargeTextCellEditor:nZ,agCheckboxCellEditor:D$,agTextColumnFilter:hk,agNumberColumnFilter:a$,agDateColumnFilter:r$,agLoadingOverlay:cZ,agNoRowsOverlay:uZ,agTooltipComponent:dZ,agMenuItem:yZ},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}init(){const e=this.gos.get("components");e!=null&&oi(e,(t,r)=>this.registerJsComponent(t,r))}registerDefaultComponent(e,t){if(this.agGridDefaults[e]){console.error("Trying to overwrite a default component. You should call registerComponent");return}this.agGridDefaults[e]=t}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){const r=(a,l)=>({componentFromFramework:l,component:a}),n=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(n!=null)return r(n,!0);const i=this.jsComps[t];if(i){const a=this.getFrameworkOverrides().isFrameworkComponent(i);return r(i,a)}const s=this.agGridDefaults[t];if(s)return r(s,!1);const o=this.enterpriseAgDefaultCompsModule[t];return o?Yt.__assertRegistered(o,`AG Grid '${e}' component: ${t}`,this.context.getGridId()):jp(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){const r=[...Object.keys(this.agGridDefaults).filter(i=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(i)),...Object.keys(this.jsComps)],n=ty(t,r,!0,.8).values;console.warn(`AG Grid: Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),n.length>0&&console.warn(`         Did you mean: [${n.slice(0,3)}]?`),console.warn(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}};S([_e],Cw.prototype,"init",1);Cw=S([$e("userComponentRegistry")],Cw);var CZ={propertyName:"dateComponent",cellRenderer:!1},wZ={propertyName:"headerComponent",cellRenderer:!1},bZ={propertyName:"headerGroupComponent",cellRenderer:!1},NO={propertyName:"cellRenderer",cellRenderer:!0},SZ={propertyName:"loadingCellRenderer",cellRenderer:!0},xZ={propertyName:"cellEditor",cellRenderer:!1},MO={propertyName:"innerRenderer",cellRenderer:!0},EZ={propertyName:"loadingOverlayComponent",cellRenderer:!1},PZ={propertyName:"noRowsOverlayComponent",cellRenderer:!1},RZ={propertyName:"tooltipComponent",cellRenderer:!1},MT={propertyName:"filter",cellRenderer:!1},TZ={propertyName:"floatingFilterComponent",cellRenderer:!1},AZ={propertyName:"toolPanel",cellRenderer:!1},_Z={propertyName:"statusPanel",cellRenderer:!1},DZ={propertyName:"fullWidthCellRenderer",cellRenderer:!0},kZ={propertyName:"loadingCellRenderer",cellRenderer:!0},IZ={propertyName:"groupRowRenderer",cellRenderer:!0},NZ={propertyName:"detailCellRenderer",cellRenderer:!0},MZ={propertyName:"menuItem",cellRenderer:!1},k$=class{static getFloatingFilterType(e){return this.filterToFloatingFilterMapping[e]}};k$.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"};var Jc=class extends Ae{getHeaderCompDetails(e,t){return this.getCompDetails(e,wZ,"agColumnHeader",t)}getHeaderGroupCompDetails(e){const t=e.columnGroup.getColGroupDef();return this.getCompDetails(t,bZ,"agColumnGroupHeader",e)}getFullWidthCellRendererDetails(e){return this.getCompDetails(this.gridOptions,DZ,null,e,!0)}getFullWidthLoadingCellRendererDetails(e){return this.getCompDetails(this.gridOptions,kZ,"agLoadingCellRenderer",e,!0)}getFullWidthGroupCellRendererDetails(e){return this.getCompDetails(this.gridOptions,IZ,"agGroupRowRenderer",e,!0)}getFullWidthDetailCellRendererDetails(e){return this.getCompDetails(this.gridOptions,NZ,"agDetailCellRenderer",e,!0)}getInnerRendererDetails(e,t){return this.getCompDetails(e,MO,null,t)}getFullWidthGroupRowInnerCellRenderer(e,t){return this.getCompDetails(e,MO,null,t)}getCellRendererDetails(e,t){return this.getCompDetails(e,NO,null,t)}getLoadingCellRendererDetails(e,t){return this.getCompDetails(e,SZ,"agSkeletonCellRenderer",t,!0)}getCellEditorDetails(e,t){return this.getCompDetails(e,xZ,"agCellEditor",t,!0)}getFilterDetails(e,t,r){return this.getCompDetails(e,MT,r,t,!0)}getDateCompDetails(e){return this.getCompDetails(this.gridOptions,CZ,"agDateInput",e,!0)}getLoadingOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,EZ,"agLoadingOverlay",e,!0)}getNoRowsOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,PZ,"agNoRowsOverlay",e,!0)}getTooltipCompDetails(e){return this.getCompDetails(e.colDef,RZ,"agTooltipComponent",e,!0)}getSetFilterCellRendererDetails(e,t){return this.getCompDetails(e,NO,null,t)}getFloatingFilterCompDetails(e,t,r){return this.getCompDetails(e,TZ,r,t)}getToolPanelCompDetails(e,t){return this.getCompDetails(e,AZ,null,t,!0)}getStatusPanelCompDetails(e,t){return this.getCompDetails(e,_Z,null,t,!0)}getMenuItemCompDetails(e,t){return this.getCompDetails(e,MZ,"agMenuItem",t,!0)}getCompDetails(e,t,r,n,i=!1){const{propertyName:s,cellRenderer:o}=t;let{compName:a,jsComp:l,fwComp:c,paramsFromSelector:u,popupFromSelector:d,popupPositionFromSelector:p}=this.getCompKeys(e,t,n);const f=w=>{const b=this.userComponentRegistry.retrieve(s,w);b&&(l=b.componentFromFramework?void 0:b.component,c=b.componentFromFramework?b.component:void 0)};if(a!=null&&f(a),l==null&&c==null&&r!=null&&f(r),l&&o&&!this.agComponentUtils.doesImplementIComponent(l)&&(l=this.agComponentUtils.adaptFunction(s,l)),!l&&!c){i&&console.error(`AG Grid: Could not find component ${a}, did you forget to configure this component?`);return}const m=this.mergeParamsWithApplicationProvidedParams(e,t,n,u),y=l==null,C=l||c;return{componentFromFramework:y,componentClass:C,params:m,type:t,popupFromSelector:d,popupPositionFromSelector:p,newAgStackInstance:()=>this.newAgStackInstance(C,y,m,t)}}getCompKeys(e,t,r){const{propertyName:n}=t;let i,s,o,a,l,c;if(e){const u=e,d=u[n+"Selector"],p=d?d(r):null,f=m=>{typeof m=="string"?i=m:m!=null&&m!==!0&&(this.getFrameworkOverrides().isFrameworkComponent(m)?o=m:s=m)};p?(f(p.component),a=p.params,l=p.popup,c=p.popupPosition):f(u[n])}return{compName:i,jsComp:s,fwComp:o,paramsFromSelector:a,popupFromSelector:l,popupPositionFromSelector:c}}newAgStackInstance(e,t,r,n){const i=n.propertyName,s=!t;let o;if(s)o=new e;else{const l=this.componentMetadataProvider.retrieve(i);o=this.frameworkComponentWrapper.wrap(e,l.mandatoryMethodList,l.optionalMethodList,n)}const a=this.initComponent(o,r);return a==null?on.resolve(o):a.then(()=>o)}mergeParamsWithApplicationProvidedParams(e,t,r,n=null){const i=this.gos.getGridCommonParams();qi(i,r);const s=e,o=s&&s[t.propertyName+"Params"];if(typeof o=="function"){const a=o(r);qi(i,a)}else typeof o=="object"&&qi(i,o);return qi(i,n),i}initComponent(e,t){if(this.context.createBean(e),e.init!=null)return e.init(t)}getDefaultFloatingFilterType(e,t){if(e==null)return null;let r=null,{compName:n,jsComp:i,fwComp:s}=this.getCompKeys(e,MT);return n?r=k$.getFloatingFilterType(n):i==null&&s==null&&e.filter===!0&&(r=t()),r}};S([F("gridOptions")],Jc.prototype,"gridOptions",2);S([F("agComponentUtils")],Jc.prototype,"agComponentUtils",2);S([F("componentMetadataProvider")],Jc.prototype,"componentMetadataProvider",2);S([F("userComponentRegistry")],Jc.prototype,"userComponentRegistry",2);S([rr("frameworkComponentWrapper")],Jc.prototype,"frameworkComponentWrapper",2);Jc=S([$e("userComponentFactory")],Jc);var I$=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const r=t||this.shouldSkipVerticalScroll();if(r&&this.shouldSkipHorizontalScroll())return;const n=this.scrollContainer.getBoundingClientRect(),i=this.scrollByTick;this.tickLeft=e.clientX<n.left+i,this.tickRight=e.clientX>n.right-i,this.tickUp=e.clientY<n.top+i&&!r,this.tickDown=e.clientY>n.bottom-i&&!r,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let e;if(e=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},Ns=class extends Ae{constructor(e){super(),this.eContainer=e}postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(e=>{const t=e.gridBodyCtrl;this.autoScrollService=new I$({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:r=>t.getScrollFeature().setVerticalScrollPosition(r),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?Ct.ICON_NOT_ALLOWED:Ct.ICON_MOVE}shouldPreventRowMove(){return!!(this.columnModel.getRowGroupColumns().length||this.filterManager.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const n=[...this.selectionService.getSelectedNodes()].sort((i,s)=>i.rowIndex==null||s.rowIndex==null?0:this.getRowIndexNumber(i)-this.getRowIndexNumber(s));if(n.indexOf(t)!==-1)return n}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent(_.EVENT_ROW_DRAG_ENTER,e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}isDropZoneWithinThisGrid(e){const r=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:n}=e;return!r.contains(n)}onEnterOrDragging(e){this.dispatchGridEvent(_.EVENT_ROW_DRAG_MOVE,e),this.lastDraggingEvent=e;const t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const r=this.isFromThisGrid(e),n=this.gos.get("rowDragManaged"),i=e.dragItem.rowNodes;n&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!r?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(i[0],t):this.moveRows(i,t))}getRowIndexNumber(e){return parseInt(Wt(e.getRowIndexString().split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel.getLastHighlightedRowNode(),r=t&&t.highlighted===1,n=this.mouseEventService.getNormalisedPosition(e).y,i=e.dragItem.rowNodes;let s=r?1:0;if(this.isFromThisGrid(e))i.forEach(o=>{o.rowTop<n&&(s-=1)}),this.moveRows(i,n,s);else{const o=this.gos.getCallback("getRowId");let a=this.clientSideRowModel.getRowIndexAtPixel(n)+1;this.clientSideRowModel.getHighlightPosition(n)===0&&a--,this.clientSideRowModel.updateRowData({add:i.map(l=>l.data).filter(l=>!this.clientSideRowModel.getRowNode(o?o({data:l,level:0}):l.id)),addIndex:a})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,r=0){var n;this.clientSideRowModel.ensureRowsAtPixel(e,t,r)&&(this.focusService.clearFocusedCell(),(n=this.rangeService)==null||n.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){ot("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(e)){console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=r=>{e.onDragEnter(this.draggingToRowDragEvent(_.EVENT_ROW_DRAG_ENTER,r))}),e.onDragLeave&&(t.onDragLeave=r=>{e.onDragLeave(this.draggingToRowDragEvent(_.EVENT_ROW_DRAG_LEAVE,r))}),e.onDragging&&(t.onDragging=r=>{e.onDragging(this.draggingToRowDragEvent(_.EVENT_ROW_DRAG_MOVE,r))}),e.onDragStop&&(t.onDragStop=r=>{e.onDragStop(this.draggingToRowDragEvent(_.EVENT_ROW_DRAG_END,r))})),this.dragAndDropService.addDropTarget(tt({isInterestedIn:r=>r===2,getIconName:()=>Ct.ICON_MOVE,external:!0},t))}getRowDropZone(e){const t=this.getContainer.bind(this),r=this.onDragEnter.bind(this),n=this.onDragLeave.bind(this),i=this.onDragging.bind(this),s=this.onDragStop.bind(this);return e?{getContainer:t,onDragEnter:e.onDragEnter?o=>{r(o),e.onDragEnter(this.draggingToRowDragEvent(_.EVENT_ROW_DRAG_ENTER,o))}:r,onDragLeave:e.onDragLeave?o=>{n(o),e.onDragLeave(this.draggingToRowDragEvent(_.EVENT_ROW_DRAG_LEAVE,o))}:n,onDragging:e.onDragging?o=>{i(o),e.onDragging(this.draggingToRowDragEvent(_.EVENT_ROW_DRAG_MOVE,o))}:i,onDragStop:e.onDragStop?o=>{s(o),e.onDragStop(this.draggingToRowDragEvent(_.EVENT_ROW_DRAG_END,o))}:s,fromGrid:!0}:{getContainer:t,onDragEnter:r,onDragLeave:n,onDragging:i,onDragStop:s,fromGrid:!0}}draggingToRowDragEvent(e,t){const r=this.mouseEventService.getNormalisedPosition(t).y,n=r>this.paginationProxy.getCurrentPageHeight();let i=-1,s;n||(i=this.rowModel.getRowIndexAtPixel(r),s=this.rowModel.getRow(i));let o;switch(t.vDirection){case 1:o="down";break;case 0:o="up";break;default:o=null;break}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:i,overNode:s,y:r,vDirection:o})}dispatchGridEvent(e,t){const r=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(r)}onDragLeave(e){this.dispatchGridEvent(_.EVENT_ROW_DRAG_LEAVE,e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent(_.EVENT_ROW_DRAG_END,e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&!this.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}};S([F("dragAndDropService")],Ns.prototype,"dragAndDropService",2);S([F("rowModel")],Ns.prototype,"rowModel",2);S([F("paginationProxy")],Ns.prototype,"paginationProxy",2);S([F("columnModel")],Ns.prototype,"columnModel",2);S([F("focusService")],Ns.prototype,"focusService",2);S([F("sortController")],Ns.prototype,"sortController",2);S([F("filterManager")],Ns.prototype,"filterManager",2);S([F("selectionService")],Ns.prototype,"selectionService",2);S([F("mouseEventService")],Ns.prototype,"mouseEventService",2);S([F("ctrlsService")],Ns.prototype,"ctrlsService",2);S([rr("rangeService")],Ns.prototype,"rangeService",2);S([_e],Ns.prototype,"postConstruct",1);var Hm=class extends Ae{constructor(){super(...arguments),this.dragEndFunctions=[],this.dragSources=[]}removeAllListeners(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0}removeListener(e){const t=e.dragSource.eElement,r=e.mouseDownListener;if(t.removeEventListener("mousedown",r),e.touchEnabled){const n=e.touchStartListener;t.removeEventListener("touchstart",n,{passive:!0})}}removeDragSource(e){const t=this.dragSources.find(r=>r.dragSource===e);t&&(this.removeListener(t),zi(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:r,includeTouch:n,stopPropagationForTouch:i}=e;r.addEventListener("mousedown",t);let s=null;const o=this.gos.get("suppressTouch");n&&!o&&(s=a=>{YD(a.target)||(a.cancelable&&(a.preventDefault(),i&&a.stopPropagation()),this.onTouchStart(e,a))},r.addEventListener("touchstart",s,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:s,touchEnabled:!!n})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const r=t.touches[0];this.touchLastTime=r,this.touchStart=r;const n=l=>this.onTouchMove(l,e.eElement),i=l=>this.onTouchUp(l,e.eElement),s=l=>{l.cancelable&&l.preventDefault()},o=t.target,a=[{target:this.gos.getRootNode(),type:"touchmove",listener:s,options:{passive:!1}},{target:o,type:"touchmove",listener:n,options:{passive:!0}},{target:o,type:"touchend",listener:i,options:{passive:!0}},{target:o,type:"touchcancel",listener:i,options:{passive:!0}}];this.addTemporaryEvents(a),e.dragStartPixels===0&&this.onCommonMove(r,this.touchStart,e.eElement)}onMouseDown(e,t){const r=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||r._alreadyProcessedByDragService||(r._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const n=l=>this.onMouseMove(l,e.eElement),i=l=>this.onMouseUp(l,e.eElement),s=l=>l.preventDefault(),o=this.gos.getRootNode(),a=[{target:o,type:"mousemove",listener:n},{target:o,type:"mouseup",listener:i},{target:o,type:"contextmenu",listener:s}];this.addTemporaryEvents(a),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{const{target:r,type:n,listener:i,options:s}=t;r.addEventListener(n,i,s)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{const{target:r,type:n,listener:i,options:s}=t;r.removeEventListener(n,i,s)})})}isEventNearStartEvent(e,t){const{dragStartPixels:r}=this.currentDragParams,n=xe(r)?r:4;return ik(e,t,n)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,r){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,t))return;this.dragging=!0;const n={type:_.EVENT_DRAG_STARTED,target:r};this.eventService.dispatchEvent(n),this.currentDragParams.onDragStart(t),this.currentDragParams.onDragging(t)}this.currentDragParams.onDragging(e)}onTouchMove(e,t){const r=this.getFirstActiveTouch(e.touches);r&&this.onCommonMove(r,this.touchStart,t)}onMouseMove(e,t){var r;Na()&&((r=this.gos.getDocument().getSelection())==null||r.removeAllRanges()),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const t=this.gos.get("enableCellTextSelection"),r=e.type==="mousemove";return t&&r&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){const t=e.target,r=t==null?void 0:t.tagName.toLocaleLowerCase();return!!(r!=null&&r.match("^a$|textarea|input|select|button"))}onTouchUp(e,t){let r=this.getFirstActiveTouch(e.changedTouches);r||(r=this.touchLastTime),this.onUpCommon(r,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(e);const r={type:_.EVENT_DRAG_STOPPED,target:t};this.eventService.dispatchEvent(r)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(r=>r()),this.dragEndFunctions.length=0}};S([F("mouseEventService")],Hm.prototype,"mouseEventService",2);S([Ni],Hm.prototype,"removeAllListeners",1);Hm=S([$e("dragService")],Hm);var vP="ag-list-item-hovered",N$=class extends Ae{constructor(e,t,r){super(),this.comp=e,this.virtualList=t,this.params=r,this.currentDragValue=null,this.lastHoveredListItem=null}postConstruct(){this.addManagedListener(this.params.eventSource,this.params.listItemDragStartEvent,this.listItemDragStart.bind(this)),this.addManagedListener(this.params.eventSource,this.params.listItemDragEndEvent,this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()}listItemDragStart(e){this.currentDragValue=this.params.getCurrentDragValue(e),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)}listItemDragEnd(){window.setTimeout(()=>{this.currentDragValue=null,this.moveBlocked=!1},10)}createDropTarget(){const e={isInterestedIn:t=>t===this.params.dragSourceType,getIconName:()=>this.moveBlocked?Ct.ICON_PINNED:Ct.ICON_MOVE,getContainer:()=>this.comp.getGui(),onDragging:t=>this.onDragging(t),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave()};this.dragAndDropService.addDropTarget(e)}createAutoScrollService(){const e=this.virtualList.getGui();this.autoScrollService=new I$({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:t=>e.scrollTop=t})}onDragging(e){if(!this.currentDragValue||this.moveBlocked)return;const t=this.getListDragItem(e),r=this.virtualList.getComponentAt(t.rowIndex);if(!r)return;const n=r.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===t.rowIndex&&this.lastHoveredListItem.position===t.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredListItem=t,DT(n,vP),DT(n,`ag-item-highlight-${t.position}`))}getListDragItem(e){const t=this.virtualList.getGui(),r=parseFloat(window.getComputedStyle(t).paddingTop),n=this.virtualList.getRowHeight(),i=this.virtualList.getScrollTop(),s=Math.max(0,(e.y-r+i)/n),o=this.params.getNumRows(this.comp)-1,a=Math.min(o,s)|0;return{rowIndex:a,position:Math.round(s)>s||s>o?"bottom":"top",component:this.virtualList.getComponentAt(a)}}onDragStop(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())}onDragLeave(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){this.virtualList.getGui().querySelectorAll(`.${vP}`).forEach(t=>{[vP,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(r=>{t.classList.remove(r)})}),this.lastHoveredListItem=null}};S([F("dragAndDropService")],N$.prototype,"dragAndDropService",2);S([_e],N$.prototype,"postConstruct",1);function td(e){const t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var Ft=class{constructor(){this.detailGridInfoMap={},this.destroyCalled=!1}init(){switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel;break}this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl})}__getAlignedGridService(){return this.alignedGridsService}getGridId(){return this.context.getGridId()}addDetailGridInfo(e,t){this.detailGridInfoMap[e]=t}removeDetailGridInfo(e){delete this.detailGridInfoMap[e]}getDetailGridInfo(e){return this.detailGridInfoMap[e]}forEachDetailGridInfo(e){let t=0;oi(this.detailGridInfoMap,(r,n)=>{xe(n)&&(e(n,t),t++)})}getDataAsCsv(e){if(Yt.__assertRegistered("@ag-grid-community/csv-export","api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(e)}exportDataAsCsv(e){Yt.__assertRegistered("@ag-grid-community/csv-export","api.exportDataAsCsv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(e)}assertNotExcelMultiSheet(e,t){return Yt.__assertRegistered("@ag-grid-enterprise/excel-export","api."+e,this.context.getGridId())?this.excelCreator.getFactoryMode()===1?(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1):!0:!1}getDataAsExcel(e){if(this.assertNotExcelMultiSheet("getDataAsExcel",e))return this.excelCreator.getDataAsExcel(e)}exportDataAsExcel(e){this.assertNotExcelMultiSheet("exportDataAsExcel",e)&&this.excelCreator.exportDataAsExcel(e)}getSheetDataForExcel(e){if(Yt.__assertRegistered("@ag-grid-enterprise/excel-export","api.getSheetDataForExcel",this.context.getGridId()))return this.excelCreator.setFactoryMode(1),this.excelCreator.getSheetDataForExcel(e)}getMultipleSheetsAsExcel(e){if(Yt.__assertRegistered("@ag-grid-enterprise/excel-export","api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(e)}exportMultipleSheetsAsExcel(e){Yt.__assertRegistered("@ag-grid-enterprise/excel-export","api.exportMultipleSheetsAsExcel",this.context.getGridId())&&this.excelCreator.exportMultipleSheetsAsExcel(e)}setGridAriaProperty(e,t){if(!e)return;const r=this.ctrlsService.getGridBodyCtrl().getGui(),n=`aria-${e}`;t===null?r.removeAttribute(n):r.setAttribute(n,t)}logMissingRowModel(e,...t){console.error(`AG Grid: api.${e} can only be called when gridOptions.rowModelType is ${t.join(" or ")}`)}logDeprecation(e,t,r,n){ot(`Since ${e} api.${t} is deprecated. Please use ${r} instead. ${n??""}`)}getPinnedTopRowCount(){return this.pinnedRowModel.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.pinnedRowModel.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.pinnedRowModel.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.pinnedRowModel.getPinnedBottomRow(e)}expireValueCache(){this.valueCache.expire()}getVerticalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()}getHorizontalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()}refreshCells(e={}){this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.refreshCells(e))}flashCells(e={}){const t=r=>ot(`Since v31.1 api.flashCells parameter '${r}Delay' is deprecated. Please use '${r}Duration' instead.`);xe(e.fadeDelay)&&t("fade"),xe(e.flashDelay)&&t("flash"),this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.flashCells(e))}redrawRows(e={}){const t=e?e.rowNodes:void 0;this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.redrawRows(t))}refreshHeader(){this.frameworkOverrides.wrapIncoming(()=>this.ctrlsService.getHeaderRowContainerCtrls().forEach(e=>e.refresh()))}isAnyFilterPresent(){return this.filterManager.isAnyFilterPresent()}isColumnFilterPresent(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()}isQuickFilterPresent(){return this.filterManager.isQuickFilterPresent()}getModel(){return ot("Since v31.1 getModel() is deprecated. Please use the appropriate grid API methods instead."),this.rowModel}setRowNodeExpanded(e,t,r,n){this.expansionService.setRowNodeExpanded(e,t,r,n)}onGroupExpandedOrCollapsed(){if(gt(this.clientSideRowModel)){this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide");return}this.expansionService.onGroupExpandedOrCollapsed()}refreshClientSideRowModel(e){if(gt(this.clientSideRowModel)){this.logMissingRowModel("refreshClientSideRowModel","clientSide");return}this.clientSideRowModel.refreshModel(e)}isAnimationFrameQueueEmpty(){return this.animationFrameService.isQueueEmpty()}flushAllAnimationFrames(){this.animationFrameService.flushAllFrames()}getRowNode(e){return this.rowModel.getRowNode(e)}getSizesForCurrentTheme(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}}expandAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")}collapseAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!1):this.logMissingRowModel("collapseAll","clientSide","serverSide")}addRenderedRowListener(e,t,r){this.rowRenderer.addRenderedRowListener(e,t,r)}getQuickFilter(){return this.gos.get("quickFilterText")}getAdvancedFilterModel(){return Yt.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null}setAdvancedFilterModel(e){this.filterManager.setAdvancedFilterModel(e)}showAdvancedFilterBuilder(){Yt.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.showAdvancedFilterBuilder("api")}setNodesSelected(e){if(!e.nodes.every(o=>o.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):o.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),!1):!0))return;const{nodes:r,source:n,newValue:i}=e,s=r;this.selectionService.setNodesSelected({nodes:s,source:n??"api",newValue:i})}selectAll(e="apiSelectAll"){this.selectionService.selectAllRowNodes({source:e})}deselectAll(e="apiSelectAll"){this.selectionService.deselectAllRowNodes({source:e})}selectAllFiltered(e="apiSelectAllFiltered"){this.selectionService.selectAllRowNodes({source:e,justFiltered:!0})}deselectAllFiltered(e="apiSelectAllFiltered"){this.selectionService.deselectAllRowNodes({source:e,justFiltered:!0})}getServerSideSelectionState(){return gt(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getSelectionState()}setServerSideSelectionState(e){if(gt(this.serverSideRowModel)){this.logMissingRowModel("setServerSideSelectionState","serverSide");return}this.selectionService.setSelectionState(e,"api")}selectAllOnCurrentPage(e="apiSelectAllCurrentPage"){this.selectionService.selectAllRowNodes({source:e,justCurrentPage:!0})}deselectAllOnCurrentPage(e="apiSelectAllCurrentPage"){this.selectionService.deselectAllRowNodes({source:e,justCurrentPage:!0})}showLoadingOverlay(){this.overlayService.showLoadingOverlay()}showNoRowsOverlay(){this.overlayService.showNoRowsOverlay()}hideOverlay(){this.overlayService.hideOverlay()}getSelectedNodes(){return this.selectionService.getSelectedNodes()}getSelectedRows(){return this.selectionService.getSelectedRows()}getBestCostNodeSelection(){if(gt(this.clientSideRowModel)){this.logMissingRowModel("getBestCostNodeSelection","clientSide");return}return this.selectionService.getBestCostNodeSelection()}getRenderedNodes(){return this.rowRenderer.getRenderedNodes()}ensureColumnVisible(e,t="auto"){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(e,t),"ensureVisible")}ensureIndexVisible(e,t){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(e,t),"ensureVisible")}ensureNodeVisible(e,t=null){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(e,t),"ensureVisible")}forEachLeafNode(e){if(gt(this.clientSideRowModel)){this.logMissingRowModel("forEachLeafNode","clientSide");return}this.clientSideRowModel.forEachLeafNode(e)}forEachNode(e,t){this.rowModel.forEachNode(e,t)}forEachNodeAfterFilter(e){if(gt(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilter","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilter(e)}forEachNodeAfterFilterAndSort(e){if(gt(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilterAndSort(e)}getFilterInstance(e,t){return ot("'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."),this.filterManager.getFilterInstance(e,t)}getColumnFilterInstance(e){return this.filterManager.getColumnFilterInstance(e)}destroyFilter(e){const t=this.columnModel.getPrimaryColumn(e);if(t)return this.filterManager.destroyFilter(t,"api")}getStatusPanel(e){if(!Yt.__assertRegistered("@ag-grid-enterprise/status-bar","api.getStatusPanel",this.context.getGridId()))return;const t=this.statusBarService.getStatusPanel(e);return td(t)}getColumnDef(e){const t=this.columnModel.getPrimaryColumn(e);return t?t.getColDef():null}getColumnDefs(){return this.columnModel.getColumnDefs()}onFilterChanged(e="api"){this.filterManager.onFilterChanged({source:e})}onSortChanged(){this.sortController.onSortChanged("api")}setFilterModel(e){this.frameworkOverrides.wrapIncoming(()=>this.filterManager.setFilterModel(e))}getFilterModel(){return this.filterManager.getFilterModel()}getColumnFilterModel(e){return this.filterManager.getColumnFilterModel(e)}setColumnFilterModel(e,t){return this.filterManager.setColumnFilterModel(e,t)}getFocusedCell(){return this.focusService.getFocusedCell()}clearFocusedCell(){return this.focusService.clearFocusedCell()}setFocusedCell(e,t,r){this.focusService.setFocusedCell({rowIndex:e,column:t,rowPinned:r,forceBrowserFocus:!0})}addRowDropZone(e){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(e)}removeRowDropZone(e){const t=this.dragAndDropService.findExternalZone(e);t&&this.dragAndDropService.removeDropTarget(t)}getRowDropZoneParams(e){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(e)}assertSideBarLoaded(e){return Yt.__assertRegistered("@ag-grid-enterprise/side-bar","api."+e,this.context.getGridId())}isSideBarVisible(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarService.getSideBarComp().isDisplayed()}setSideBarVisible(e){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarService.getSideBarComp().setDisplayed(e)}setSideBarPosition(e){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarService.getSideBarComp().setSideBarPosition(e)}openToolPanel(e){this.assertSideBarLoaded("openToolPanel")&&this.sideBarService.getSideBarComp().openToolPanel(e,"api")}closeToolPanel(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarService.getSideBarComp().close("api")}getOpenedToolPanel(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarService.getSideBarComp().openedItem():null}refreshToolPanel(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarService.getSideBarComp().refresh()}isToolPanelShowing(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarService.getSideBarComp().isToolPanelShowing()}getToolPanelInstance(e){if(this.assertSideBarLoaded("getToolPanelInstance")){const t=this.sideBarService.getSideBarComp().getToolPanelInstance(e);return td(t)}}getSideBar(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarService.getSideBarComp().getDef()}resetRowHeights(){if(xe(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive()){console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}this.clientSideRowModel.resetRowHeights()}}setRowCount(e,t){if(this.serverSideRowModel){if(this.columnModel.isRowGroupEmpty()){this.serverSideRowModel.setRowCount(e,t);return}console.error("AG Grid: setRowCount cannot be used while using row grouping.");return}if(this.infiniteRowModel){this.infiniteRowModel.setRowCount(e,t);return}this.logMissingRowModel("setRowCount","infinite","serverSide")}onRowHeightChanged(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()}getValue(e,t){return this.logDeprecation("31.3","getValue","getCellValue"),this.getCellValue({colKey:e,rowNode:t})}getCellValue(e){var t;const{colKey:r,rowNode:n,useFormatter:i}=e;let s=(t=this.columnModel.getPrimaryColumn(r))!=null?t:this.columnModel.getGridColumn(r);if(gt(s))return null;const o=this.valueService.getValue(s,n);if(i){const a=this.valueService.formatValue(s,n,o);return a??sn(o,!0)}return o}addEventListener(e,t){this.apiEventService.addEventListener(e,t)}addGlobalListener(e){this.apiEventService.addGlobalListener(e)}removeEventListener(e,t){this.apiEventService.removeEventListener(e,t)}removeGlobalListener(e){this.apiEventService.removeGlobalListener(e)}dispatchEvent(e){this.eventService.dispatchEvent(e)}destroy(){var e;const t=`See ${this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}`;if(this.destroyCalled)return;const r={type:_.EVENT_GRID_PRE_DESTROYED,state:this.getState()};this.dispatchEvent(r),this.destroyCalled=!0,(e=this.ctrlsService.get("gridCtrl"))==null||e.destroyGridUi(),this.context.destroy(),this.detailGridInfoMap={},D4(this,["isDestroyed"],t)}isDestroyed(){return this.destroyCalled}resetQuickFilter(){this.filterManager.resetQuickFilterCache()}getCellRanges(){return this.rangeService?this.rangeService.getCellRanges():(Yt.__assertRegistered("@ag-grid-enterprise/range-selection","api.getCellRanges",this.context.getGridId()),null)}addCellRange(e){if(this.rangeService){this.rangeService.addCellRange(e);return}Yt.__assertRegistered("@ag-grid-enterprise/range-selection","api.addCellRange",this.context.getGridId())}clearRangeSelection(){this.rangeService&&this.rangeService.removeAllCellRanges(),Yt.__assertRegistered("@ag-grid-enterprise/range-selection","gridApi.clearRangeSelection",this.context.getGridId())}undoCellEditing(){this.undoRedoService.undo("api")}redoCellEditing(){this.undoRedoService.redo("api")}getCurrentUndoSize(){return this.undoRedoService.getCurrentUndoStackSize()}getCurrentRedoSize(){return this.undoRedoService.getCurrentRedoStackSize()}assertChart(e,t){if(Yt.__assertRegistered("@ag-grid-enterprise/charts","api."+e,this.context.getGridId()))return this.frameworkOverrides.wrapIncoming(()=>t())}getChartModels(){return this.assertChart("getChartModels",()=>this.chartService.getChartModels())}getChartRef(e){return this.assertChart("getChartRef",()=>this.chartService.getChartRef(e))}getChartImageDataURL(e){return this.assertChart("getChartImageDataURL",()=>this.chartService.getChartImageDataURL(e))}downloadChart(e){return this.assertChart("downloadChart",()=>this.chartService.downloadChart(e))}openChartToolPanel(e){return this.assertChart("openChartToolPanel",()=>this.chartService.openChartToolPanel(e))}closeChartToolPanel(e){return this.assertChart("closeChartToolPanel",()=>this.chartService.closeChartToolPanel(e.chartId))}createRangeChart(e){return this.assertChart("createRangeChart",()=>this.chartService.createRangeChart(e))}createPivotChart(e){return this.assertChart("createPivotChart",()=>this.chartService.createPivotChart(e))}createCrossFilterChart(e){return this.assertChart("createCrossFilterChart",()=>this.chartService.createCrossFilterChart(e))}updateChart(e){return this.assertChart("updateChart",()=>this.chartService.updateChart(e))}restoreChart(e,t){return this.assertChart("restoreChart",()=>this.chartService.restoreChart(e,t))}assertClipboard(e,t){Yt.__assertRegistered("@ag-grid-enterprise/clipboard","api"+e,this.context.getGridId())&&t()}copyToClipboard(e){this.assertClipboard("copyToClipboard",()=>this.clipboardService.copyToClipboard(e))}cutToClipboard(e){this.assertClipboard("cutToClipboard",()=>this.clipboardService.cutToClipboard(e))}copySelectedRowsToClipboard(e){this.assertClipboard("copySelectedRowsToClipboard",()=>this.clipboardService.copySelectedRowsToClipboard(e))}copySelectedRangeToClipboard(e){this.assertClipboard("copySelectedRangeToClipboard",()=>this.clipboardService.copySelectedRangeToClipboard(e))}copySelectedRangeDown(){this.assertClipboard("copySelectedRangeDown",()=>this.clipboardService.copyRangeDown())}pasteFromClipboard(){this.assertClipboard("pasteFromClipboard",()=>this.clipboardService.pasteFromClipboard())}showColumnMenuAfterButtonClick(e,t){ot("'showColumnMenuAfterButtonClick' is deprecated. Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere.");const r=this.columnModel.getGridColumn(e);this.menuService.showColumnMenu({column:r,buttonElement:t,positionBy:"button"})}showColumnMenuAfterMouseClick(e,t){ot("'showColumnMenuAfterMouseClick' is deprecated. Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere.");let r=this.columnModel.getGridColumn(e);if(r||(r=this.columnModel.getPrimaryColumn(e)),!r){console.error(`AG Grid: column '${e}' not found`);return}this.menuService.showColumnMenu({column:r,mouseEvent:t,positionBy:"mouse"})}showContextMenu(e){const{rowNode:t,column:r,value:n,x:i,y:s}=e||{};let{x:o,y:a}=this.menuService.getContextMenuPosition(t,r);i!=null&&(o=i),s!=null&&(a=s),this.menuService.showContextMenu({mouseEvent:new MouseEvent("mousedown",{clientX:o,clientY:a}),rowNode:t,column:r,value:n})}showColumnChooser(e){this.menuService.showColumnChooser({chooserParams:e})}showColumnFilter(e){const t=this.columnModel.getGridColumn(e);if(!t){console.error(`AG Grid: column '${e}' not found`);return}this.menuService.showFilterMenu({column:t,containerType:"columnFilter",positionBy:"auto"})}showColumnMenu(e){const t=this.columnModel.getGridColumn(e);if(!t){console.error(`AG Grid: column '${e}' not found`);return}this.menuService.showColumnMenu({column:t,positionBy:"auto"})}hidePopupMenu(){this.menuService.hidePopupMenu()}hideColumnChooser(){this.menuService.hideColumnChooser()}tabToNextCell(e){return this.navigationService.tabToNextCell(!1,e)}tabToPreviousCell(e){return this.navigationService.tabToNextCell(!0,e)}getCellRendererInstances(e={}){return this.rowRenderer.getCellRendererInstances(e).map(td)}getCellEditorInstances(e={}){return this.rowRenderer.getCellEditorInstances(e).map(td)}getEditingCells(){return this.rowRenderer.getEditingCells()}stopEditing(e=!1){this.rowRenderer.stopEditing(e)}startEditingCell(e){const t=this.columnModel.getGridColumn(e.colKey);if(!t){console.warn(`AG Grid: no column found for ${e.colKey}`);return}const r={rowIndex:e.rowIndex,rowPinned:e.rowPinned||null,column:t};e.rowPinned==null&&this.ensureIndexVisible(e.rowIndex),this.ensureColumnVisible(e.colKey);const i=this.navigationService.getCellByPosition(r);i&&(this.focusService.isCellFocused(r)||this.focusService.setFocusedCell(r),i.startRowOrCellEdit(e.key))}addAggFunc(e,t){this.logDeprecation("v31.1","addAggFunc(key, func)","addAggFuncs({ key: func })"),this.aggFuncService&&this.aggFuncService.addAggFuncs({key:t})}addAggFuncs(e){this.aggFuncService&&this.aggFuncService.addAggFuncs(e)}clearAggFuncs(){this.aggFuncService&&this.aggFuncService.clear()}applyServerSideTransaction(e){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransaction","serverSide");return}return this.serverSideTransactionManager.applyTransaction(e)}applyServerSideTransactionAsync(e,t){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransactionAsync","serverSide");return}return this.serverSideTransactionManager.applyTransactionAsync(e,t)}applyServerSideRowData(e){var t,r;const n=(t=e.startRow)!=null?t:0,i=(r=e.route)!=null?r:[];if(n<0){console.warn(`AG Grid: invalid value ${e.startRow} for startRow, the value should be >= 0`);return}this.serverSideRowModel?this.serverSideRowModel.applyRowData(e.successParams,n,i):this.logMissingRowModel("setServerSideDatasource","serverSide")}retryServerSideLoads(){if(!this.serverSideRowModel){this.logMissingRowModel("retryServerSideLoads","serverSide");return}this.serverSideRowModel.retryLoads()}flushServerSideAsyncTransactions(){if(!this.serverSideTransactionManager){this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide");return}return this.serverSideTransactionManager.flushAsyncTransactions()}applyTransaction(e){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransaction","clientSide");return}return this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.updateRowData(e))}applyTransactionAsync(e,t){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransactionAsync","clientSide");return}this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.batchUpdateRowData(e,t))}flushAsyncTransactions(){if(!this.clientSideRowModel){this.logMissingRowModel("flushAsyncTransactions","clientSide");return}this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.flushAsyncTransactions())}refreshInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")}purgeInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")}refreshServerSide(e){if(!this.serverSideRowModel){this.logMissingRowModel("refreshServerSide","serverSide");return}this.serverSideRowModel.refreshStore(e)}getServerSideGroupLevelState(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])}getInfiniteRowCount(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")}isLastRowIndexKnown(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")}getCacheBlockState(){return this.rowNodeBlockLoader.getBlockState()}getFirstDisplayedRow(){return this.logDeprecation("v31.1","getFirstDisplayedRow","getFirstDisplayedRowIndex"),this.getFirstDisplayedRowIndex()}getFirstDisplayedRowIndex(){return this.rowRenderer.getFirstVirtualRenderedRow()}getLastDisplayedRow(){return this.logDeprecation("v31.1","getLastDisplayedRow","getLastDisplayedRowIndex"),this.getLastDisplayedRowIndex()}getLastDisplayedRowIndex(){return this.rowRenderer.getLastVirtualRenderedRow()}getDisplayedRowAtIndex(e){return this.rowModel.getRow(e)}getDisplayedRowCount(){return this.rowModel.getRowCount()}paginationIsLastPageFound(){return this.paginationProxy.isLastPageFound()}paginationGetPageSize(){return this.paginationProxy.getPageSize()}paginationGetCurrentPage(){return this.paginationProxy.getCurrentPage()}paginationGetTotalPages(){return this.paginationProxy.getTotalPages()}paginationGetRowCount(){return this.paginationProxy.getMasterRowCount()}paginationGoToNextPage(){this.paginationProxy.goToNextPage()}paginationGoToPreviousPage(){this.paginationProxy.goToPreviousPage()}paginationGoToFirstPage(){this.paginationProxy.goToFirstPage()}paginationGoToLastPage(){this.paginationProxy.goToLastPage()}paginationGoToPage(e){this.paginationProxy.goToPage(e)}sizeColumnsToFit(e){typeof e=="number"?this.columnModel.sizeColumnsToFit(e,"api"):this.gridBodyCtrl.sizeColumnsToFit(e)}setColumnGroupOpened(e,t){this.columnModel.setColumnGroupOpened(e,t,"api")}getColumnGroup(e,t){return this.columnModel.getColumnGroup(e,t)}getProvidedColumnGroup(e){return this.columnModel.getProvidedColumnGroup(e)}getDisplayNameForColumn(e,t){return this.columnModel.getDisplayNameForColumn(e,t)||""}getDisplayNameForColumnGroup(e,t){return this.columnModel.getDisplayNameForColumnGroup(e,t)||""}getColumn(e){return this.columnModel.getPrimaryColumn(e)}getColumns(){return this.columnModel.getAllPrimaryColumns()}applyColumnState(e){return this.columnModel.applyColumnState(e,"api")}getColumnState(){return this.columnModel.getColumnState()}resetColumnState(){this.columnModel.resetColumnState("api")}getColumnGroupState(){return this.columnModel.getColumnGroupState()}setColumnGroupState(e){this.columnModel.setColumnGroupState(e,"api")}resetColumnGroupState(){this.columnModel.resetColumnGroupState("api")}isPinning(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()}isPinningLeft(){return this.columnModel.isPinningLeft()}isPinningRight(){return this.columnModel.isPinningRight()}getDisplayedColAfter(e){return this.columnModel.getDisplayedColAfter(e)}getDisplayedColBefore(e){return this.columnModel.getDisplayedColBefore(e)}setColumnVisible(e,t){this.logDeprecation("v31.1","setColumnVisible(key,visible)","setColumnsVisible([key],visible)"),this.columnModel.setColumnsVisible([e],t,"api")}setColumnsVisible(e,t){this.columnModel.setColumnsVisible(e,t,"api")}setColumnPinned(e,t){this.logDeprecation("v31.1","setColumnPinned(key,pinned)","setColumnsPinned([key],pinned)"),this.columnModel.setColumnsPinned([e],t,"api")}setColumnsPinned(e,t){this.columnModel.setColumnsPinned(e,t,"api")}getAllGridColumns(){return this.columnModel.getAllGridColumns()}getDisplayedLeftColumns(){return this.columnModel.getDisplayedLeftColumns()}getDisplayedCenterColumns(){return this.columnModel.getDisplayedCenterColumns()}getDisplayedRightColumns(){return this.columnModel.getDisplayedRightColumns()}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getAllDisplayedVirtualColumns(){return this.columnModel.getViewportColumns()}moveColumn(e,t){this.logDeprecation("v31.1","moveColumn(key, toIndex)","moveColumns([key], toIndex)"),this.columnModel.moveColumns([e],t,"api")}moveColumnByIndex(e,t){this.columnModel.moveColumnByIndex(e,t,"api")}moveColumns(e,t){this.columnModel.moveColumns(e,t,"api")}moveRowGroupColumn(e,t){this.columnModel.moveRowGroupColumn(e,t,"api")}setColumnAggFunc(e,t){this.columnModel.setColumnAggFunc(e,t,"api")}setColumnWidth(e,t,r=!0,n="api"){this.logDeprecation("v31.1","setColumnWidth(col, width)","setColumnWidths([{key: col, newWidth: width}])"),this.columnModel.setColumnWidths([{key:e,newWidth:t}],!1,r,n)}setColumnWidths(e,t=!0,r="api"){this.columnModel.setColumnWidths(e,!1,t,r)}isPivotMode(){return this.columnModel.isPivotMode()}getPivotResultColumn(e,t){return this.columnModel.getSecondaryPivotColumn(e,t)}setValueColumns(e){this.columnModel.setValueColumns(e,"api")}getValueColumns(){return this.columnModel.getValueColumns()}removeValueColumn(e){this.logDeprecation("v31.1","removeValueColumn(colKey)","removeValueColumns([colKey])"),this.columnModel.removeValueColumns([e],"api")}removeValueColumns(e){this.columnModel.removeValueColumns(e,"api")}addValueColumn(e){this.logDeprecation("v31.1","addValueColumn(colKey)","addValueColumns([colKey])"),this.columnModel.addValueColumns([e],"api")}addValueColumns(e){this.columnModel.addValueColumns(e,"api")}setRowGroupColumns(e){this.columnModel.setRowGroupColumns(e,"api")}removeRowGroupColumn(e){this.logDeprecation("v31.1","removeRowGroupColumn(colKey)","removeRowGroupColumns([colKey])"),this.columnModel.removeRowGroupColumns([e],"api")}removeRowGroupColumns(e){this.columnModel.removeRowGroupColumns(e,"api")}addRowGroupColumn(e){this.logDeprecation("v31.1","addRowGroupColumn(colKey)","addRowGroupColumns([colKey])"),this.columnModel.addRowGroupColumns([e],"api")}addRowGroupColumns(e){this.columnModel.addRowGroupColumns(e,"api")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}setPivotColumns(e){this.columnModel.setPivotColumns(e,"api")}removePivotColumn(e){this.logDeprecation("v31.1","removePivotColumn(colKey)","removePivotColumns([colKey])"),this.columnModel.removePivotColumns([e],"api")}removePivotColumns(e){this.columnModel.removePivotColumns(e,"api")}addPivotColumn(e){this.logDeprecation("v31.1","addPivotColumn(colKey)","addPivotColumns([colKey])"),this.columnModel.addPivotColumns([e],"api")}addPivotColumns(e){this.columnModel.addPivotColumns(e,"api")}getPivotColumns(){return this.columnModel.getPivotColumns()}getLeftDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeLeft()}getCenterDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeCentre()}getRightDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeRight()}getAllDisplayedColumnGroups(){return this.columnModel.getAllDisplayedTrees()}autoSizeColumn(e,t){return this.logDeprecation("v31.1","autoSizeColumn(key, skipHeader)","autoSizeColumns([key], skipHeader)"),this.columnModel.autoSizeColumns({columns:[e],skipHeader:t,source:"api"})}autoSizeColumns(e,t){this.columnModel.autoSizeColumns({columns:e,skipHeader:t,source:"api"})}autoSizeAllColumns(e){this.columnModel.autoSizeAllColumns("api",e)}setPivotResultColumns(e){this.columnModel.setSecondaryColumns(e,"api")}getPivotResultColumns(){return this.columnModel.getSecondaryColumns()}getState(){return this.stateService.getState()}getGridOption(e){return this.gos.get(e)}setGridOption(e,t){this.updateGridOptions({[e]:t})}updateGridOptions(e){this.gos.updateGridOptions({options:e})}__internalUpdateGridOptions(e,t){this.gos.updateGridOptions({options:e,force:t,source:"gridOptionsUpdated"})}deprecatedUpdateGridOption(e,t){ot(`set${e.charAt(0).toUpperCase()}${e.slice(1,e.length)} is deprecated. Please use 'api.setGridOption('${e}', newValue)' or 'api.updateGridOptions({ ${e}: newValue })' instead.`),this.setGridOption(e,t)}setPivotMode(e){this.deprecatedUpdateGridOption("pivotMode",e)}setPinnedTopRowData(e){this.deprecatedUpdateGridOption("pinnedTopRowData",e)}setPinnedBottomRowData(e){this.deprecatedUpdateGridOption("pinnedBottomRowData",e)}setPopupParent(e){this.deprecatedUpdateGridOption("popupParent",e)}setSuppressModelUpdateAfterUpdateTransaction(e){this.deprecatedUpdateGridOption("suppressModelUpdateAfterUpdateTransaction",e)}setDataTypeDefinitions(e){this.deprecatedUpdateGridOption("dataTypeDefinitions",e)}setPagination(e){this.deprecatedUpdateGridOption("pagination",e)}paginationSetPageSize(e){this.deprecatedUpdateGridOption("paginationPageSize",e)}setSideBar(e){this.deprecatedUpdateGridOption("sideBar",e)}setSuppressClipboardPaste(e){this.deprecatedUpdateGridOption("suppressClipboardPaste",e)}setGroupRemoveSingleChildren(e){this.deprecatedUpdateGridOption("groupRemoveSingleChildren",e)}setGroupRemoveLowestSingleChildren(e){this.deprecatedUpdateGridOption("groupRemoveLowestSingleChildren",e)}setGroupDisplayType(e){this.deprecatedUpdateGridOption("groupDisplayType",e)}setGroupIncludeFooter(e){this.deprecatedUpdateGridOption("groupIncludeFooter",e)}setGroupIncludeTotalFooter(e){this.deprecatedUpdateGridOption("groupIncludeTotalFooter",e)}setRowClass(e){this.deprecatedUpdateGridOption("rowClass",e)}setDeltaSort(e){this.deprecatedUpdateGridOption("deltaSort",e)}setSuppressRowDrag(e){this.deprecatedUpdateGridOption("suppressRowDrag",e)}setSuppressMoveWhenRowDragging(e){this.deprecatedUpdateGridOption("suppressMoveWhenRowDragging",e)}setSuppressRowClickSelection(e){this.deprecatedUpdateGridOption("suppressRowClickSelection",e)}setEnableAdvancedFilter(e){this.deprecatedUpdateGridOption("enableAdvancedFilter",e)}setIncludeHiddenColumnsInAdvancedFilter(e){this.deprecatedUpdateGridOption("includeHiddenColumnsInAdvancedFilter",e)}setAdvancedFilterParent(e){this.deprecatedUpdateGridOption("advancedFilterParent",e)}setAdvancedFilterBuilderParams(e){this.deprecatedUpdateGridOption("advancedFilterBuilderParams",e)}setQuickFilter(e){ot("setQuickFilter is deprecated. Please use 'api.setGridOption('quickFilterText', newValue)' or 'api.updateGridOptions({ quickFilterText: newValue })' instead."),this.gos.updateGridOptions({options:{quickFilterText:e}})}setExcludeHiddenColumnsFromQuickFilter(e){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",!e)}setIncludeHiddenColumnsInQuickFilter(e){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",e)}setQuickFilterParser(e){this.deprecatedUpdateGridOption("quickFilterParser",e)}setQuickFilterMatcher(e){this.deprecatedUpdateGridOption("quickFilterMatcher",e)}setAlwaysShowHorizontalScroll(e){this.deprecatedUpdateGridOption("alwaysShowHorizontalScroll",e)}setAlwaysShowVerticalScroll(e){this.deprecatedUpdateGridOption("alwaysShowVerticalScroll",e)}setFunctionsReadOnly(e){this.deprecatedUpdateGridOption("functionsReadOnly",e)}setColumnDefs(e,t="api"){ot("setColumnDefs is deprecated. Please use 'api.setGridOption('columnDefs', newValue)' or 'api.updateGridOptions({ columnDefs: newValue })' instead."),this.gos.updateGridOptions({options:{columnDefs:e},source:t})}setAutoGroupColumnDef(e,t="api"){ot("setAutoGroupColumnDef is deprecated. Please use 'api.setGridOption('autoGroupColumnDef', newValue)' or 'api.updateGridOptions({ autoGroupColumnDef: newValue })' instead."),this.gos.updateGridOptions({options:{autoGroupColumnDef:e},source:t})}setDefaultColDef(e,t="api"){ot("setDefaultColDef is deprecated. Please use 'api.setGridOption('defaultColDef', newValue)' or 'api.updateGridOptions({ defaultColDef: newValue })' instead."),this.gos.updateGridOptions({options:{defaultColDef:e},source:t})}setColumnTypes(e,t="api"){ot("setColumnTypes is deprecated. Please use 'api.setGridOption('columnTypes', newValue)' or 'api.updateGridOptions({ columnTypes: newValue })' instead."),this.gos.updateGridOptions({options:{columnTypes:e},source:t})}setTreeData(e){this.deprecatedUpdateGridOption("treeData",e)}setServerSideDatasource(e){this.deprecatedUpdateGridOption("serverSideDatasource",e)}setCacheBlockSize(e){this.deprecatedUpdateGridOption("cacheBlockSize",e)}setDatasource(e){this.deprecatedUpdateGridOption("datasource",e)}setViewportDatasource(e){this.deprecatedUpdateGridOption("viewportDatasource",e)}setRowData(e){this.deprecatedUpdateGridOption("rowData",e)}setEnableCellTextSelection(e){this.deprecatedUpdateGridOption("enableCellTextSelection",e)}setHeaderHeight(e){this.deprecatedUpdateGridOption("headerHeight",e)}setDomLayout(e){this.deprecatedUpdateGridOption("domLayout",e)}setFillHandleDirection(e){this.deprecatedUpdateGridOption("fillHandleDirection",e)}setGroupHeaderHeight(e){this.deprecatedUpdateGridOption("groupHeaderHeight",e)}setFloatingFiltersHeight(e){this.deprecatedUpdateGridOption("floatingFiltersHeight",e)}setPivotHeaderHeight(e){this.deprecatedUpdateGridOption("pivotHeaderHeight",e)}setPivotGroupHeaderHeight(e){this.deprecatedUpdateGridOption("pivotGroupHeaderHeight",e)}setAnimateRows(e){this.deprecatedUpdateGridOption("animateRows",e)}setIsExternalFilterPresent(e){this.deprecatedUpdateGridOption("isExternalFilterPresent",e)}setDoesExternalFilterPass(e){this.deprecatedUpdateGridOption("doesExternalFilterPass",e)}setNavigateToNextCell(e){this.deprecatedUpdateGridOption("navigateToNextCell",e)}setTabToNextCell(e){this.deprecatedUpdateGridOption("tabToNextCell",e)}setTabToNextHeader(e){this.deprecatedUpdateGridOption("tabToNextHeader",e)}setNavigateToNextHeader(e){this.deprecatedUpdateGridOption("navigateToNextHeader",e)}setRowGroupPanelShow(e){this.deprecatedUpdateGridOption("rowGroupPanelShow",e)}setGetGroupRowAgg(e){this.deprecatedUpdateGridOption("getGroupRowAgg",e)}setGetBusinessKeyForNode(e){this.deprecatedUpdateGridOption("getBusinessKeyForNode",e)}setGetChildCount(e){this.deprecatedUpdateGridOption("getChildCount",e)}setProcessRowPostCreate(e){this.deprecatedUpdateGridOption("processRowPostCreate",e)}setGetRowId(e){ot("getRowId is a static property and can no longer be updated.")}setGetRowClass(e){this.deprecatedUpdateGridOption("getRowClass",e)}setIsFullWidthRow(e){this.deprecatedUpdateGridOption("isFullWidthRow",e)}setIsRowSelectable(e){this.deprecatedUpdateGridOption("isRowSelectable",e)}setIsRowMaster(e){this.deprecatedUpdateGridOption("isRowMaster",e)}setPostSortRows(e){this.deprecatedUpdateGridOption("postSortRows",e)}setGetDocument(e){this.deprecatedUpdateGridOption("getDocument",e)}setGetContextMenuItems(e){this.deprecatedUpdateGridOption("getContextMenuItems",e)}setGetMainMenuItems(e){this.deprecatedUpdateGridOption("getMainMenuItems",e)}setProcessCellForClipboard(e){this.deprecatedUpdateGridOption("processCellForClipboard",e)}setSendToClipboard(e){this.deprecatedUpdateGridOption("sendToClipboard",e)}setProcessCellFromClipboard(e){this.deprecatedUpdateGridOption("processCellFromClipboard",e)}setProcessPivotResultColDef(e){this.deprecatedUpdateGridOption("processPivotResultColDef",e)}setProcessPivotResultColGroupDef(e){this.deprecatedUpdateGridOption("processPivotResultColGroupDef",e)}setPostProcessPopup(e){this.deprecatedUpdateGridOption("postProcessPopup",e)}setInitialGroupOrderComparator(e){this.deprecatedUpdateGridOption("initialGroupOrderComparator",e)}setGetChartToolbarItems(e){this.deprecatedUpdateGridOption("getChartToolbarItems",e)}setPaginationNumberFormatter(e){this.deprecatedUpdateGridOption("paginationNumberFormatter",e)}setGetServerSideGroupLevelParams(e){this.deprecatedUpdateGridOption("getServerSideGroupLevelParams",e)}setIsServerSideGroupOpenByDefault(e){this.deprecatedUpdateGridOption("isServerSideGroupOpenByDefault",e)}setIsApplyServerSideTransaction(e){this.deprecatedUpdateGridOption("isApplyServerSideTransaction",e)}setIsServerSideGroup(e){this.deprecatedUpdateGridOption("isServerSideGroup",e)}setGetServerSideGroupKey(e){this.deprecatedUpdateGridOption("getServerSideGroupKey",e)}setGetRowStyle(e){this.deprecatedUpdateGridOption("getRowStyle",e)}setGetRowHeight(e){this.deprecatedUpdateGridOption("getRowHeight",e)}};S([F("rowRenderer")],Ft.prototype,"rowRenderer",2);S([F("navigationService")],Ft.prototype,"navigationService",2);S([F("filterManager")],Ft.prototype,"filterManager",2);S([F("columnModel")],Ft.prototype,"columnModel",2);S([F("selectionService")],Ft.prototype,"selectionService",2);S([F("gridOptionsService")],Ft.prototype,"gos",2);S([F("valueService")],Ft.prototype,"valueService",2);S([F("alignedGridsService")],Ft.prototype,"alignedGridsService",2);S([F("eventService")],Ft.prototype,"eventService",2);S([F("pinnedRowModel")],Ft.prototype,"pinnedRowModel",2);S([F("context")],Ft.prototype,"context",2);S([F("rowModel")],Ft.prototype,"rowModel",2);S([F("sortController")],Ft.prototype,"sortController",2);S([F("paginationProxy")],Ft.prototype,"paginationProxy",2);S([F("focusService")],Ft.prototype,"focusService",2);S([F("dragAndDropService")],Ft.prototype,"dragAndDropService",2);S([F("menuService")],Ft.prototype,"menuService",2);S([F("valueCache")],Ft.prototype,"valueCache",2);S([F("animationFrameService")],Ft.prototype,"animationFrameService",2);S([F("ctrlsService")],Ft.prototype,"ctrlsService",2);S([F("overlayService")],Ft.prototype,"overlayService",2);S([F("stateService")],Ft.prototype,"stateService",2);S([F("expansionService")],Ft.prototype,"expansionService",2);S([F("apiEventService")],Ft.prototype,"apiEventService",2);S([F("frameworkOverrides")],Ft.prototype,"frameworkOverrides",2);S([F("undoRedoService")],Ft.prototype,"undoRedoService",2);S([F("rowNodeBlockLoader")],Ft.prototype,"rowNodeBlockLoader",2);S([rr("csvCreator")],Ft.prototype,"csvCreator",2);S([rr("excelCreator")],Ft.prototype,"excelCreator",2);S([rr("rangeService")],Ft.prototype,"rangeService",2);S([rr("clipboardService")],Ft.prototype,"clipboardService",2);S([rr("aggFuncService")],Ft.prototype,"aggFuncService",2);S([rr("statusBarService")],Ft.prototype,"statusBarService",2);S([rr("chartService")],Ft.prototype,"chartService",2);S([rr("ssrmTransactionManager")],Ft.prototype,"serverSideTransactionManager",2);S([rr("sideBarService")],Ft.prototype,"sideBarService",2);S([_e],Ft.prototype,"init",1);Ft=S([$e("gridApi")],Ft);var Xi=class extends Ae{constructor(){super(...arguments),this.quickFilter=null,this.quickFilterParts=null}postConstruct(){this.addManagedListener(this.eventService,_.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,_.EVENT_NEW_COLUMNS_LOADED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,_.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,_.EVENT_COLUMN_VISIBLE,()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}),this.addManagedPropertyListener("quickFilterText",e=>this.setQuickFilter(e.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every(r=>t?this.doesRowPassQuickFilterCache(e,r):this.doesRowPassQuickFilterNoCache(e,r))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseQuickFilter(e){return xe(e)?this.gos.isRowModelType("clientSide")?e.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){console.warn(`AG Grid - Grid option quickFilterText only supports string inputs, received: ${typeof e}`);return}const t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchEvent({type:Xi.EVENT_QUICK_FILTER_CHANGED}))}setQuickFilterParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),r=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,r&&(this.setQuickFilterParts(),this.dispatchEvent({type:Xi.EVENT_QUICK_FILTER_CHANGED}))}onQuickFilterColumnConfigChanged(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchEvent({type:Xi.EVENT_QUICK_FILTER_CHANGED})}doesRowPassQuickFilterNoCache(e,t){return this.columnModel.getAllColumnsForQuickFilter().some(n=>{const i=this.getQuickFilterTextForColumn(n,e);return xe(i)&&i.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let r;e?(this.checkGenerateQuickFilterAggregateText(t),r=t.quickFilterAggregateText):r=this.getQuickFilterAggregateText(t);const{quickFilterParts:n,matcher:i}=this;return i(n,r)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let r=this.valueService.getValue(e,t,!0);const n=e.getColDef();if(n.getQuickFilterText){const i=this.gos.addGridCommonParams({value:r,node:t,data:t.data,column:e,colDef:n});r=n.getQuickFilterText(i)}return xe(r)?r.toString().toUpperCase():null}getQuickFilterAggregateText(e){const t=[];return this.columnModel.getAllColumnsForQuickFilter().forEach(n=>{const i=this.getQuickFilterTextForColumn(n,e);xe(i)&&t.push(i)}),t.join(Xi.QUICK_FILTER_SEPARATOR)}};Xi.EVENT_QUICK_FILTER_CHANGED="quickFilterChanged";Xi.QUICK_FILTER_SEPARATOR=`
`;S([F("valueService")],Xi.prototype,"valueService",2);S([F("columnModel")],Xi.prototype,"columnModel",2);S([F("rowModel")],Xi.prototype,"rowModel",2);S([_e],Xi.prototype,"postConstruct",1);Xi=S([$e("quickFilterService")],Xi);var no=class extends Ae{constructor(){super(...arguments),this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue=[]}init(){var e,t,r;this.addManagedListener(this.eventService,_.EVENT_GRID_COLUMNS_CHANGED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,_.EVENT_COLUMN_VALUE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,_.EVENT_COLUMN_PIVOT_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,_.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,_.EVENT_NEW_COLUMNS_LOADED,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,_.EVENT_COLUMN_VISIBLE,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,_.EVENT_ROW_DATA_UPDATED,()=>this.onNewRowsLoaded("rowDataUpdated")),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",n=>this.setAdvancedFilterModel(n.currentValue)),this.addManagedListener(this.eventService,_.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,({enabled:n})=>this.onAdvancedFilterEnabledChanged(n)),this.addManagedListener(this.eventService,_.EVENT_DATA_TYPES_INFERRED,()=>this.processFilterModelUpdateQueue()),this.addManagedListener(this.quickFilterService,Xi.EVENT_QUICK_FILTER_CHANGED,()=>this.onFilterChanged({source:"quickFilter"})),this.initialFilterModel=tt({},(r=(t=(e=this.gos.get("initialState"))==null?void 0:e.filter)==null?void 0:t.filterModel)!=null?r:{})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1}setFilterModel(e,t="api"){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}if(this.dataTypeService.isPendingInference()){this.filterModelUpdateQueue.push({model:e,source:t});return}const r=[],n=this.getFilterModel();if(e){const i=sk(Object.keys(e));this.allColumnFilters.forEach((s,o)=>{const a=e[o];r.push(this.setModelOnFilterWrapper(s.filterPromise,a)),i.delete(o)}),i.forEach(s=>{const o=this.columnModel.getPrimaryColumn(s)||this.columnModel.getGridColumn(s);if(!o){console.warn("AG Grid: setFilterModel() - no column found for colId: "+s);return}if(!o.isFilterAllowed()){console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+s);return}const a=this.getOrCreateFilterWrapper(o,"NO_UI");if(!a){console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+s);return}r.push(this.setModelOnFilterWrapper(a.filterPromise,e[s]))})}else this.allColumnFilters.forEach(i=>{r.push(this.setModelOnFilterWrapper(i.filterPromise,null))});on.all(r).then(()=>{const i=this.getFilterModel(),s=[];this.allColumnFilters.forEach((o,a)=>{const l=n?n[a]:null,c=i?i[a]:null;pt.jsonEquals(l,c)||s.push(o.column)}),s.length>0&&this.onFilterChanged({columns:s,source:t})})}setModelOnFilterWrapper(e,t){return new on(r=>{e.then(n=>{typeof n.setModel!="function"&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),r()),(n.setModel(t)||on.resolve()).then(()=>r())})})}getFilterModel(){const e={};return this.allColumnFilters.forEach((t,r)=>{const n=this.getModelFromFilterWrapper(t);xe(n)&&(e[r]=n)}),e}getModelFromFilterWrapper(e){var t;const n=e.filterPromise.resolveNow(null,i=>i);return n==null?(t=this.initialFilterModel[e.column.getColId()])!=null?t:null:typeof n.getModel!="function"?(console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel"),null):n.getModel()}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){var t;e?this.allColumnFilters.size&&(this.allColumnFilters.forEach(r=>this.disposeFilterWrapper(r,"advancedFilterEnabled")),this.onFilterChanged({source:"advancedFilter"})):(t=this.advancedFilterService)!=null&&t.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var e;return!!((e=this.advancedFilterService)!=null&&e.isEnabled())}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;const e=n=>n?n.isFilterActive?n.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1):!1,t=!!this.gos.getGroupAggFiltering(),r=n=>{if(!n.isPrimary())return!0;const s=!this.columnModel.isPivotActive();return!n.isValueActive()||!s?!1:this.columnModel.isPivotMode()?!0:t};this.allColumnFilters.forEach(n=>{if(n.filterPromise.resolveNow(!1,e)){const i=n.filterPromise.resolveNow(null,s=>s);r(n.column)?this.activeAggregateFilters.push(i):this.activeColumnFilters.push(i)}})}updateFilterFlagInColumns(e,t){this.allColumnFilters.forEach(r=>{const n=r.filterPromise.resolveNow(!1,i=>i.isFilterActive());r.column.setFilterActive(n,e,t)})}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}doColumnFiltersPass(e,t,r){const{data:n,aggData:i}=e,s=r?this.activeAggregateFilters:this.activeColumnFilters,o=r?i:n;for(let a=0;a<s.length;a++){const l=s[a];if(!(l==null||l===t)){if(typeof l.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!l.doesFilterPass({node:e,data:o}))return!1}}return!0}resetQuickFilterCache(){this.quickFilterService.resetQuickFilterCache()}refreshFiltersForAggregations(){this.gos.getGroupAggFiltering()&&this.onFilterChanged()}callOnFilterChangedOutsideRenderCycle(e){const t=()=>this.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}onFilterChanged(e={}){const{source:t,filterInstance:r,additionalEventAttributes:n,columns:i}=e;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",n),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(o=>{o.filterPromise&&o.filterPromise.then(a=>{a&&a!==r&&a.onAnyFilterChanged&&a.onAnyFilterChanged()})});const s={source:t,type:_.EVENT_FILTER_CHANGED,columns:i||[]};n&&qi(s,n),this.processingFilterChange=!0,this.eventService.dispatchEvent(s),this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){var e;return!((e=this.gos.get("allowShowChangeAfterFilter"))!=null?e:!1)&&this.processingFilterChange}isQuickFilterPresent(){return this.quickFilterService.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!this.gos.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}onNewRowsLoaded(e){this.allColumnFilters.forEach(t=>{t.filterPromise.then(r=>{r.onNewRowsLoaded&&r.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(e,{afterDataChange:!0}),this.updateActiveFilters()}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}createGetValue(e){return(t,r)=>{const n=r?this.columnModel.getGridColumn(r):e;return n?this.valueService.getValue(n,t,!0):void 0}}getFilterComponent(e,t,r=!0){var n;if(r)return((n=this.getOrCreateFilterWrapper(e,t))==null?void 0:n.filterPromise)||null;const i=this.cachedFilter(e);return i?i.filterPromise:null}isFilterActive(e){const t=this.cachedFilter(e);return!!t&&t.filterPromise.resolveNow(!1,r=>r.isFilterActive())}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return null;let r=this.cachedFilter(e);return r||(r=this.createFilterWrapper(e,t),this.setColumnFilterWrapper(e,r)),r}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;if(Yt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))t="agSetColumnFilter";else{const r=this.dataTypeService.getBaseDataType(e);r==="number"?t="agNumberColumnFilter":r==="date"||r==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;if(Yt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))t="agSetColumnFloatingFilter";else{const r=this.dataTypeService.getBaseDataType(e);r==="number"?t="agNumberColumnFloatingFilter":r==="date"||r==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e){const t=this.getDefaultFilter(e),r=e.getColDef();let n;const i=Sr(tt({},this.createFilterParams(e,r)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(n,e)(),filterChangedCallback:o=>this.filterChangedCallbackFactory(n,e)(o),doesRowPassOtherFilter:o=>this.doesRowPassOtherFilters(n,o)}),s=this.userComponentFactory.getFilterDetails(r,i,t);return s?{filterPromise:()=>{const o=s.newAgStackInstance();return o&&o.then(a=>n=a),o},compDetails:s}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:DD(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e,t){var r;const n={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:i,compDetails:s}=this.createFilterInstance(e);return n.filterPromise=(r=i==null?void 0:i())!=null?r:null,n.compDetails=s,n}onColumnsChanged(){const e=[];this.allColumnFilters.forEach((t,r)=>{let n;t.column.isPrimary()?n=this.columnModel.getPrimaryColumn(r):n=this.columnModel.getGridColumn(r),!(n&&n===t.column)&&(e.push(t.column),this.disposeFilterWrapper(t,"columnChanged"),this.disposeColumnListener(r))}),e.length>0?this.onFilterChanged({columns:e,source:"api"}):this.updateDependantFilters()}updateDependantFilters(){const e=this.columnModel.getGroupAutoColumns();e==null||e.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t,"NO_UI")})}isFilterAllowed(e){var t,r;if(this.isAdvancedFilterEnabled()||!e.isFilterAllowed())return!1;const i=this.allColumnFilters.get(e.getColId());return(r=(t=i==null?void 0:i.filterPromise)==null?void 0:t.resolveNow(!0,s=>typeof(s==null?void 0:s.isFilterAllowed)=="function"?s==null?void 0:s.isFilterAllowed():!0))!=null?r:!0}getFloatingFilterCompDetails(e,t){const r=l=>{const c=this.getFilterComponent(e,"NO_UI");c!=null&&c.then(u=>{l(td(u))})},n=e.getColDef(),i=Sr(tt({},this.createFilterParams(e,n)),{filterChangedCallback:()=>r(l=>this.filterChangedCallbackFactory(l,e)())}),s=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(n,MT,i);let o=this.userComponentFactory.getDefaultFloatingFilterType(n,()=>this.getDefaultFloatingFilter(e));o==null&&(o="agReadOnlyFloatingFilter");const a={column:e,filterParams:s,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:r,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(n,a,o)}getCurrentFloatingFilterParentModel(e){const t=this.getFilterComponent(e,"NO_UI",!1);return t?t.resolveNow(null,r=>r&&r.getModel()):null}destroyFilter(e,t="api"){const r=e.getColId(),n=this.allColumnFilters.get(r);this.disposeColumnListener(r),delete this.initialFilterModel[r],n&&(this.disposeFilterWrapper(n,t),this.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(r=>{this.getContext().destroyBean(r),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId());const n={type:_.EVENT_FILTER_DESTROYED,source:t,column:e.column};this.eventService.dispatchEvent(n)})}filterModifiedCallbackFactory(e,t){return()=>{const r={type:_.EVENT_FILTER_MODIFIED,column:t,filterInstance:e};this.eventService.dispatchEvent(r)}}filterChangedCallbackFactory(e,t){return r=>{var n;const i=(n=r==null?void 0:r.source)!=null?n:"api",s={filter:e,additionalEventAttributes:r,columns:[t],source:i};this.callOnFilterChangedOutsideRenderCycle(s)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const r=t.column,{compDetails:n}=r.isFilterAllowed()?this.createFilterInstance(r):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,n)){this.destroyFilter(r,"paramsUpdated");return}const i=r.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(r,"paramsUpdated");return}t.filterPromise.then(s=>{(s!=null&&s.refresh?s.refresh(tt(Sr(tt({},this.createFilterParams(r,r.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(s,r),filterChangedCallback:this.filterChangedCallbackFactory(s,r),doesRowPassOtherFilter:a=>this.doesRowPassOtherFilters(s,a)}),i)):!0)===!1&&this.destroyFilter(r,"paramsUpdated")})}setColumnFilterWrapper(e,t){const r=e.getColId();this.allColumnFilters.set(r,t),this.allColumnListeners.set(r,this.addManagedListener(e,ar.EVENT_COL_DEF_CHANGED,()=>this.checkDestroyFilter(r)))}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:r}=e,{componentClass:n}=t;return!(r===n||(r==null?void 0:r.render)&&(n==null?void 0:n.render)&&r.render===n.render)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService.isPendingInference()){this.advancedFilterModelUpdateQueue.push(e);return}this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}}showAdvancedFilterBuilder(e){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(e,!0)}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvancedFilterEnabled()?!1:this.columnModel.getAllGridColumns().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e,t){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}const r=this.getFilterInstanceImpl(e,i=>{if(!t)return;const s=td(i);t(s)});return td(r)}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstance(e,r=>{t(r)})})}getFilterInstanceImpl(e,t){const r=this.columnModel.getPrimaryColumn(e);if(!r)return;const n=this.getFilterComponent(r,"NO_UI"),i=n&&n.resolveNow(null,s=>s);return i?setTimeout(t,0,i):n&&n.then(s=>{t(s)}),i}warnAdvancedFilters(){ot("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){var t;(t=this.advancedFilterService)==null||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:r})=>{this.setColumnFilterModel(e,t).then(()=>r())}),this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue.forEach(e=>this.setAdvancedFilterModel(e)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){if(this.isAdvancedFilterEnabled())return this.warnAdvancedFilters(),Promise.resolve();if(this.dataTypeService.isPendingInference()){let s=()=>{};const o=new Promise(a=>{s=a});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:s}),o}const r=this.columnModel.getPrimaryColumn(e),n=r?this.getOrCreateFilterWrapper(r,"NO_UI"):null;return n?(s=>new Promise(o=>{s.then(a=>o(a))}))(this.setModelOnFilterWrapper(n.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){var t;const r=this.columnModel.getPrimaryColumn(e);return r&&(t=this.cachedFilter(r))!=null?t:null}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};S([F("valueService")],no.prototype,"valueService",2);S([F("columnModel")],no.prototype,"columnModel",2);S([F("rowModel")],no.prototype,"rowModel",2);S([F("userComponentFactory")],no.prototype,"userComponentFactory",2);S([F("rowRenderer")],no.prototype,"rowRenderer",2);S([F("dataTypeService")],no.prototype,"dataTypeService",2);S([F("quickFilterService")],no.prototype,"quickFilterService",2);S([rr("advancedFilterService")],no.prototype,"advancedFilterService",2);S([_e],no.prototype,"init",1);no=S([$e("filterManager")],no);var WS=class extends mt{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}postConstruct(){this.createFilter(!0),this.addManagedListener(this.eventService,_.EVENT_FILTER_DESTROYED,this.onFilterDestroyed.bind(this))}hasFilter(){return!!this.filterWrapper}getFilter(){var e,t;return(t=(e=this.filterWrapper)==null?void 0:e.filterPromise)!=null?t:null}afterInit(){var e,t,r;return(r=(t=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null?void 0:t.then(()=>{}))!=null?r:on.resolve()}afterGuiAttached(e){var t,r;(r=(t=this.filterWrapper)==null?void 0:t.filterPromise)==null||r.then(n=>{var i;(i=n==null?void 0:n.afterGuiAttached)==null||i.call(n,e)})}afterGuiDetached(){var e,t;(t=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null||t.then(r=>{var n;(n=r==null?void 0:r.afterGuiDetached)==null||n.call(r)})}createFilter(e){var t;const{column:r,source:n}=this;this.filterWrapper=this.filterManager.getOrCreateFilterWrapper(r,n),(t=this.filterWrapper)!=null&&t.filterPromise&&this.filterWrapper.filterPromise.then(i=>{let s=i.getGui();if(xe(s)||console.warn(`AG Grid: getGui method from filter returned ${s}, it should be a DOM element or an HTML template string.`),typeof s=="string"&&(s=Qi(s)),this.appendChild(s),e){const o={type:_.EVENT_FILTER_OPENED,column:r,source:n,eGui:this.getGui()};this.eventService.dispatchEvent(o)}})}onFilterDestroyed(e){(e.source==="api"||e.source==="paramsUpdated")&&e.column.getId()===this.column.getId()&&this.columnModel.getPrimaryColumn(this.column)&&(Zr(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}};S([F("filterManager")],WS.prototype,"filterManager",2);S([F("columnModel")],WS.prototype,"columnModel",2);S([_e],WS.prototype,"postConstruct",1);var vk=class extends mt{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},ph=class M$ extends vk{constructor(t){super(M$.TEMPLATE,t)}postConstruct(){const t=this.getGui(),r={addOrRemoveCssClass:(n,i)=>this.addOrRemoveCssClass(n,i),addOrRemoveBodyCssClass:(n,i)=>this.eFloatingFilterBody.classList.toggle(n,i),setButtonWrapperDisplayed:n=>jt(this.eButtonWrapper,n),setCompDetails:n=>this.setCompDetails(n),getFloatingFilterComp:()=>this.compPromise,setWidth:n=>t.style.width=n,setMenuIcon:n=>this.eButtonShowMainFilter.appendChild(n)};this.ctrl.setComp(r,t,this.eButtonShowMainFilter,this.eFloatingFilterBody)}setCompDetails(t){if(!t){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=t.newAgStackInstance(),this.compPromise.then(r=>this.afterCompCreated(r))}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(t){if(t){if(!this.isAlive()){this.destroyBean(t);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=t,this.eFloatingFilterBody.appendChild(t.getGui()),t.afterGuiAttached&&t.afterGuiAttached()}}};ph.TEMPLATE=`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`;S([Me("eFloatingFilterBody")],ph.prototype,"eFloatingFilterBody",2);S([Me("eButtonWrapper")],ph.prototype,"eButtonWrapper",2);S([Me("eButtonShowMainFilter")],ph.prototype,"eButtonShowMainFilter",2);S([_e],ph.prototype,"postConstruct",1);S([Ni],ph.prototype,"destroyFloatingFilterComp",1);var OZ=ph,KS=class extends Ae{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},r=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(r,t)}getDomLayout(){var e;const t=(e=this.gos.get("domLayout"))!=null?e:"normal";return["normal","print","autoHeight"].indexOf(t)===-1?(ot(`${t} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):t}};S([_e],KS.prototype,"postConstruct",1);var Hl=class extends Ae{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=bi(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=bi(()=>this.lastScrollSource[0]=null,500)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){const{fakeHScrollComp:e,fakeVScrollComp:t}=this.ctrlsService.getParams();this.addManagedListener(this.centerRowsCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),e.onScrollCallback(this.onFakeHScroll.bind(this));const r=this.gos.get("debounceVerticalScrollbar"),n=r?bi(this.onVScroll.bind(this),100):this.onVScroll.bind(this),i=r?bi(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",n),t.onScrollCallback(i)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){if(this.centerRowsCtrl==null)return;e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft());const r=this.enableRtl?e:-e,{topCenter:n,stickyTopCenter:i,stickyBottomCenter:s,centerHeader:o,bottomCenter:a,fakeHScrollComp:l}=this.ctrlsService.getParams();o.setHorizontalScroll(-r),a.setContainerTranslateX(r),n.setContainerTranslateX(r),i.setContainerTranslateX(r),s.setContainerTranslateX(r);const c=this.centerRowsCtrl.getViewportElement(),u=this.lastScrollSource[1]===0;e=Math.abs(e),u?l.setScrollPosition(e):Bm(c,e,this.enableRtl)}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(this.lastScrollSource[t]=e,!0):this.lastScrollSource[t]===e}onFakeHScroll(){this.isControllingScroll(1,1)&&this.onHScrollCommon(1)}onHScroll(){this.isControllingScroll(0,1)&&this.onHScrollCommon(0)}onHScrollCommon(e){const t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:r}=t;if(this.shouldBlockScrollUpdate(1,r,!0))return;let n;e===0?n=jm(t,this.enableRtl):n=this.ctrlsService.get("fakeHScrollComp").getScrollPosition(),this.doHorizontalScroll(Math.round(n)),this.resetLastHScrollDebounced()}onFakeVScroll(){this.isControllingScroll(1,0)&&this.onVScrollCommon(1)}onVScroll(){this.isControllingScroll(0,0)&&this.onVScrollCommon(0)}onVScrollCommon(e){let t;e===0?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e===0?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){const t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:_.EVENT_BODY_SCROLL,direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{const r=Sr(tt({},t),{type:_.EVENT_BODY_SCROLL_END});this.eventService.dispatchEvent(r)},100)}shouldBlockScrollUpdate(e,t,r=!1){return r&&!jl()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=Jv(this.eBodyViewport),{scrollHeight:r}=this.eBodyViewport;return e<0||e+t>r}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:r}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&Gm()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>r}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(0)}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){const n=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl&&Gm()?e=e>0?0:n:e=Math.min(Math.max(e,0),n)),Bm(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const r=this.rowModel.getRowCount();let n=-1;for(let i=0;i<r;i++){const s=this.rowModel.getRow(i);if(typeof e=="function"){if(s&&e(s)){n=i;break}}else if(e===s||e===s.data){n=i;break}}n>=0&&this.ensureIndexVisible(n,t)}ensureIndexVisible(e,t){if(this.gos.isDomLayout("print"))return;const r=this.paginationProxy.getRowCount();if(typeof e!="number"||e<0||e>=r){console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+e);return}const i=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{i||this.paginationProxy.goToPageWithIndex(e);const s=this.ctrlsService.getGridBodyCtrl(),o=s.getStickyTopHeight(),a=s.getStickyBottomHeight(),l=this.paginationProxy.getRow(e);let c;do{const u=l.rowTop,d=l.rowHeight,p=this.paginationProxy.getPixelOffset(),f=l.rowTop-p,m=f+l.rowHeight,y=this.getVScrollPosition(),C=this.heightScaler.getDivStretchOffset(),w=y.top+C,b=y.bottom+C,x=b-w,E=this.heightScaler.getScrollPositionForPixel(f),I=this.heightScaler.getScrollPositionForPixel(m-x),k=Math.min((E+I)/2,f),P=w+o>f,A=b-a<m;let D=null;t==="top"?D=E:t==="bottom"?D=I:t==="middle"?D=k:P?D=E-o:A&&(D=I+a),D!==null&&(this.setVerticalScrollPosition(D),this.rowRenderer.redraw({afterScroll:!0})),c=u!==l.rowTop||d!==l.rowHeight}while(c);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(e,t="auto"){const r=this.columnModel.getGridColumn(e);if(!r||r.isPinned()||!this.columnModel.isColumnDisplayed(r))return;const n=this.getPositionedHorizontalScroll(r,t);this.getFrameworkOverrides().wrapIncoming(()=>{n!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(n),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:r,columnAfterEnd:n}=this.isColumnOutsideViewport(e),i=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),s=this.centerRowsCtrl.getCenterWidth(),o=this.enableRtl;let a=(o?r:n)||i,l=o?n:r;t!=="auto"&&(a=t==="start",l=t==="end");const c=t==="middle";if(a||l||c){const{colLeft:u,colMiddle:d,colRight:p}=this.getColumnBounds(e);return c?d-s/2:a?o?p:u:o?u-s:p-s}return null}isColumnOutsideViewport(e){const{start:t,end:r}=this.getViewportBounds(),{colLeft:n,colRight:i}=this.getColumnBounds(e),s=this.enableRtl,o=s?t>i:r<i,a=s?r<n:t>n;return{columnBeforeStart:o,columnAfterEnd:a}}getColumnBounds(e){const t=this.enableRtl,r=this.columnModel.getBodyContainerWidth(),n=e.getActualWidth(),i=e.getLeft(),s=t?-1:1,o=t?r-i:i,a=o+n*s,l=o+n/2*s;return{colLeft:o,colMiddle:l,colRight:a}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),r=t,n=e+t;return{start:r,end:n,width:e}}};S([F("ctrlsService")],Hl.prototype,"ctrlsService",2);S([F("animationFrameService")],Hl.prototype,"animationFrameService",2);S([F("paginationProxy")],Hl.prototype,"paginationProxy",2);S([F("rowModel")],Hl.prototype,"rowModel",2);S([F("rowContainerHeightService")],Hl.prototype,"heightScaler",2);S([F("rowRenderer")],Hl.prototype,"rowRenderer",2);S([F("columnModel")],Hl.prototype,"columnModel",2);S([_e],Hl.prototype,"postConstruct",1);var O$="ag-force-vertical-scroll",FZ="ag-selectable",LZ="ag-column-moving",di=class extends Ae{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,r,n,i,s,o){this.comp=e,this.eGridBody=t,this.eBodyViewport=r,this.eTop=n,this.eBottom=i,this.eStickyTop=s,this.eStickyBottom=o,this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new KS(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Hl(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([n,r,i,s,o]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(n),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){this.addManagedListener(this.eventService,_.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}addFocusListeners(e){e.forEach(t=>{this.addManagedListener(t,"focusin",r=>{const{target:n}=r,i=vd(n,"ag-root",t);t.classList.toggle("ag-has-focus",!i)}),this.addManagedListener(t,"focusout",r=>{const{target:n,relatedTarget:i}=r,s=t.contains(i),o=vd(i,"ag-root",t);vd(n,"ag-root",t)||(!s||o)&&t.classList.remove("ag-has-focus")})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(LZ,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(FZ,e)}onScrollVisibilityChanged(){const e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();const t=e&&this.gos.getScrollbarWidth()||0,r=WD()?16:0,n=`calc(100% + ${t+r}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(n))}onGridColumnsChanged(){const e=this.columnModel.getAllGridColumns();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedListener(this.eGridBody,"dragstart",e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const e=r=>{const n=r.relatedTarget;if(mw(n)===null){this.rowRenderer.stopEditing();return}let i=t.some(s=>s.contains(n))&&this.mouseEventService.isElementInThisGrid(n);if(!i){const s=this.popupService;i=s.getActivePopups().some(o=>o.contains(n))||s.isElementWithinCustomPopup(n)}i||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach(r=>this.addManagedListener(r,"focusout",e))}updateRowCount(){const e=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,r=t===-1?-1:e+t;this.comp.setRowCount(r)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?O$:null,r=this.gos.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||r&&kz(this.eBodyViewport)}setupRowAnimationCssClass(){const e=()=>{const t=this.gos.isAnimateRows()&&!this.rowContainerHeightService.isStretching(),r=t?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(r,t)};e(),this.addManagedListener(this.eventService,_.EVENT_HEIGHT_SCALE_CHANGED,e),this.addManagedPropertyListener("animateRows",e)}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const e=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",e),this.mockContextMenuForIPad(e),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyWheel.bind(this)),this.addManagedListener(this.eStickyBottom,"wheel",this.onStickyWheel.bind(this)),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){const e=this.eBodyViewport.querySelector(".ag-full-width-container"),t=this.eBodyViewport.querySelector(".ag-center-cols-viewport");e&&t&&this.addManagedListener(e,"wheel",r=>this.onFullWidthContainerWheel(r,t))}onFullWidthContainerWheel(e,t){!e.deltaX||Math.abs(e.deltaY)>Math.abs(e.deltaX)||!this.mouseEventService.isEventFromThisGrid(e)||(e.preventDefault(),t.scrollBy({left:e.deltaX}))}onBodyViewportContextMenu(e,t,r){if(!e&&!r)return;this.gos.get("preventDefaultOnContextMenu")&&(e||r).preventDefault();const{target:n}=e||t;(n===this.eBodyViewport||n===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:e,touchEvent:r,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!jl())return;const t=new kn(this.eBodyViewport),r=n=>{e(void 0,n.touchStart,n.touchEvent)};this.addManagedListener(t,kn.EVENT_LONG_TAP,r),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}onStickyWheel(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)}getGui(){return this.eGridBody}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new Ns(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}onPinnedRowDataChanged(){this.setFloatingHeights()}setFloatingHeights(){const{pinnedRowModel:e}=this;let t=e.getPinnedTopTotalHeight(),r=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(r),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(r?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.gos.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){const t=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+this.filterManager.getHeaderHeight(),r=this.pinnedRowModel.getPinnedTopTotalHeight();let n=0;t>0&&(n+=t),r>0&&(n+=r),n>0&&(n+=1),this.comp.setStickyTopTop(`${n}px`)}setStickyBottomOffsetBottom(){const e=this.pinnedRowModel.getPinnedBottomTotalHeight(),r=this.scrollVisibleService.isHorizontalScrollShowing()&&this.gos.getScrollbarWidth()||0,n=e+r;this.comp.setStickyBottomBottom(`${n}px`)}sizeColumnsToFit(e,t){const n=this.isVerticalScrollShowing()?this.gos.getScrollbarWidth():0,s=ah(this.eGridBody)-n;if(s>0){this.columnModel.sizeColumnsToFit(s,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}};S([F("animationFrameService")],di.prototype,"animationFrameService",2);S([F("rowContainerHeightService")],di.prototype,"rowContainerHeightService",2);S([F("ctrlsService")],di.prototype,"ctrlsService",2);S([F("columnModel")],di.prototype,"columnModel",2);S([F("scrollVisibleService")],di.prototype,"scrollVisibleService",2);S([F("menuService")],di.prototype,"menuService",2);S([F("headerNavigationService")],di.prototype,"headerNavigationService",2);S([F("dragAndDropService")],di.prototype,"dragAndDropService",2);S([F("pinnedRowModel")],di.prototype,"pinnedRowModel",2);S([F("rowRenderer")],di.prototype,"rowRenderer",2);S([F("popupService")],di.prototype,"popupService",2);S([F("mouseEventService")],di.prototype,"mouseEventService",2);S([F("rowModel")],di.prototype,"rowModel",2);S([F("filterManager")],di.prototype,"filterManager",2);var pg="ag-cell-range-selected",GZ="ag-cell-range-chart",jZ="ag-cell-range-single-cell",BZ="ag-cell-range-chart-category",VZ="ag-cell-range-handle",HZ="ag-cell-range-top",zZ="ag-cell-range-right",$Z="ag-cell-range-bottom",UZ="ag-cell-range-left",WZ=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onRangeSelectionChanged()}onRangeSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(pg,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${pg}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${pg}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${pg}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${pg}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(GZ,this.hasChartRange),Hp(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(jZ,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const e=this.getRangeBorders(),t=this.isSingleCell(),r=!t&&e.top,n=!t&&e.right,i=!t&&e.bottom,s=!t&&e.left;this.cellComp.addOrRemoveCssClass(HZ,r),this.cellComp.addOrRemoveCssClass(zZ,n),this.cellComp.addOrRemoveCssClass($Z,i),this.cellComp.addOrRemoveCssClass(UZ,s)}isSingleCell(){const{rangeService:e}=this.beans;return this.rangeCount===1&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;const t=e.getCellRanges();return t.length>0&&t.every(r=>Ps([1,0],r.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gos.get("enableRtl");let t=!1,r=!1,n=!1,i=!1;const s=this.cellCtrl.getCellPosition().column,o=this.beans.columnModel;let a,l;e?(a=o.getDisplayedColAfter(s),l=o.getDisplayedColBefore(s)):(a=o.getDisplayedColBefore(s),l=o.getDisplayedColAfter(s));const c=this.rangeService.getCellRanges().filter(u=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),u));a||(i=!0),l||(r=!0);for(let u=0;u<c.length&&!(t&&r&&n&&i);u++){const d=c[u],p=this.rangeService.getRangeStartRow(d),f=this.rangeService.getRangeEndRow(d);!t&&this.beans.rowPositionUtils.sameRow(p,this.cellCtrl.getCellPosition())&&(t=!0),!n&&this.beans.rowPositionUtils.sameRow(f,this.cellCtrl.getCellPosition())&&(n=!0),!i&&a&&d.columns.indexOf(a)<0&&(i=!0),!r&&l&&d.columns.indexOf(l)<0&&(r=!0)}return{top:t,right:r,bottom:n,left:i}}refreshHandle(){if(this.beans.context.isDestroyed())return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(VZ,!!this.selectionHandle)}shouldHaveSelectionHandle(){const e=this.beans.gos,t=this.rangeService.getCellRanges(),r=t.length;if(this.rangeCount<1||r<1)return!1;const n=Wt(t),i=this.cellCtrl.getCellPosition(),s=e.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),o=e.get("enableRangeHandle");let a=r===1&&!this.cellCtrl.isEditing()&&(s||o);if(this.hasChartRange){const c=t[0].type===1&&this.rangeService.isCellInSpecificRange(i,t[0]);this.cellComp.addOrRemoveCssClass(BZ,c),a=n.type===0}return a&&n.endRow!=null&&this.rangeService.isContiguousRange(n)&&this.rangeService.isBottomRightCell(n,i)}addSelectionHandle(){const e=this.beans.gos,t=Wt(this.rangeService.getCellRanges()).type,n=e.get("enableFillHandle")&&gt(t)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==n&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(n)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},KZ=class extends Ae{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListener(this.beans.eventService,_.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();Ca(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,_.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,_.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else{let r=this.column;const n=this.column.getPinned();for(let i=0;r&&i<e&&(t.push(r),r=this.beans.columnModel.getDisplayedColAfter(r),!(!r||gt(r)||n!==r.getPinned()));i++);}return t}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=Wt(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;const t=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(this.column.getPinned()==="right"){const r=this.beans.columnModel.getBodyContainerWidth();return t+r+(e||0)}return t+(e||0)}applyRowSpan(e){if(this.rowSpan===1&&!e)return;const r=this.beans.gos.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=`${r}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},qZ=class extends Ae{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const e=this.column.getColDef(),{cellClassRules:t}=e,r=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,r,n=>this.cellComp.addOrRemoveCssClass(n,!0),n=>this.cellComp.addOrRemoveCssClass(n,!1)),this.cellClassRules=t}applyUserStyles(){const e=this.column.getColDef();if(!e.cellStyle)return;let t;if(typeof e.cellStyle=="function"){const r=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),n=e.cellStyle;t=n(r)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){const e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(r=>this.cellComp.addOrRemoveCssClass(r,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(r=>this.cellComp.addOrRemoveCssClass(r,!0))}destroy(){super.destroy()}},At=class{postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gos.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)}};S([F("resizeObserverService")],At.prototype,"resizeObserverService",2);S([F("paginationProxy")],At.prototype,"paginationProxy",2);S([F("context")],At.prototype,"context",2);S([F("gridOptionsService")],At.prototype,"gos",2);S([F("environment")],At.prototype,"environment",2);S([F("rowRenderer")],At.prototype,"rowRenderer",2);S([F("valueService")],At.prototype,"valueService",2);S([F("eventService")],At.prototype,"eventService",2);S([F("columnModel")],At.prototype,"columnModel",2);S([F("headerNavigationService")],At.prototype,"headerNavigationService",2);S([F("navigationService")],At.prototype,"navigationService",2);S([F("columnAnimationService")],At.prototype,"columnAnimationService",2);S([F("focusService")],At.prototype,"focusService",2);S([F("popupService")],At.prototype,"popupService",2);S([F("stylingService")],At.prototype,"stylingService",2);S([F("columnHoverService")],At.prototype,"columnHoverService",2);S([F("userComponentFactory")],At.prototype,"userComponentFactory",2);S([F("userComponentRegistry")],At.prototype,"userComponentRegistry",2);S([F("animationFrameService")],At.prototype,"animationFrameService",2);S([F("dragService")],At.prototype,"dragService",2);S([F("dragAndDropService")],At.prototype,"dragAndDropService",2);S([F("sortController")],At.prototype,"sortController",2);S([F("filterManager")],At.prototype,"filterManager",2);S([F("rowContainerHeightService")],At.prototype,"rowContainerHeightService",2);S([F("frameworkOverrides")],At.prototype,"frameworkOverrides",2);S([F("cellPositionUtils")],At.prototype,"cellPositionUtils",2);S([F("rowPositionUtils")],At.prototype,"rowPositionUtils",2);S([F("selectionService")],At.prototype,"selectionService",2);S([F("rowCssClassCalculator")],At.prototype,"rowCssClassCalculator",2);S([F("rowModel")],At.prototype,"rowModel",2);S([F("ctrlsService")],At.prototype,"ctrlsService",2);S([F("ctrlsFactory")],At.prototype,"ctrlsFactory",2);S([F("agStackComponentsRegistry")],At.prototype,"agStackComponentsRegistry",2);S([F("valueCache")],At.prototype,"valueCache",2);S([F("rowNodeEventThrottle")],At.prototype,"rowNodeEventThrottle",2);S([F("localeService")],At.prototype,"localeService",2);S([F("syncService")],At.prototype,"syncService",2);S([F("ariaAnnouncementService")],At.prototype,"ariaAnnouncementService",2);S([rr("rangeService")],At.prototype,"rangeService",2);S([rr("selectionHandleFactory")],At.prototype,"selectionHandleFactory",2);S([_e],At.prototype,"postConstruct",1);At=S([$e("beans")],At);var YZ=class extends At{constructor(e,t,r){super(),this.cellCtrl=e,this.beans=t,this.column=r}onMouseEvent(e,t){if(!$o(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}const{eventService:t,rangeService:r,gos:n}=this.beans,i=e.ctrlKey||e.metaKey;r&&i&&r.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&r.intersectLastRange(!0);const s=this.cellCtrl.createEvent(e,_.EVENT_CELL_CLICKED);t.dispatchEvent(s);const o=this.column.getColDef();o.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{o.onCellClicked(s)})},0),(n.get("singleClickEdit")||o.singleClickEdit)&&!n.get("suppressClickEdit")&&!(e.shiftKey&&(r==null?void 0:r.getCellRanges().length)!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!jl()||MD("dblclick"))return!1;const e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){const t=this.column.getColDef(),r=this.cellCtrl.createEvent(e,_.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(r),typeof t.onCellDoubleClicked=="function"&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{t.onCellDoubleClicked(r)})},0),!this.beans.gos.get("singleClickEdit")&&!this.beans.gos.get("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit(null,e)}onMouseDown(e){const{ctrlKey:t,metaKey:r,shiftKey:n}=e,i=e.target,{cellCtrl:s,beans:o}=this,{eventService:a,rangeService:l,focusService:c}=o;if(this.isRightClickInExistingRange(e))return;const u=l&&l.getCellRanges().length!=0;if(!n||!u){const d=Na()&&!s.isEditing()&&!YD(i);s.focusCell(d)}if(n&&u&&!c.isCellFocused(s.getCellPosition())){e.preventDefault();const d=c.getFocusedCell();if(d){const{column:p,rowIndex:f,rowPinned:m}=d,y=o.rowRenderer.getRowByPosition({rowIndex:f,rowPinned:m}),C=y==null?void 0:y.getCellCtrl(p);C!=null&&C.isEditing()&&C.stopEditing(),c.setFocusedCell({column:p,rowIndex:f,rowPinned:m,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(i)){if(l){const d=this.cellCtrl.getCellPosition();if(n)l.extendLatestRangeToCell(d);else{const p=t||r;l.setRangeToCell(d,p)}}a.dispatchEvent(this.cellCtrl.createEvent(e,_.EVENT_CELL_MOUSE_DOWN))}}isRightClickInExistingRange(e){const{rangeService:t}=this.beans;if(t){const r=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),n=e.button===2||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(r&&n)return!0}return!1}containsWidget(e){return vd(e,"ag-selection-checkbox",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const t=this.cellCtrl.createEvent(e,_.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const t=this.cellCtrl.createEvent(e,_.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.getGui(),r=t.contains(e.target),n=t.contains(e.relatedTarget);return r&&n}destroy(){}},QZ=class extends Ae{constructor(e,t,r,n,i){super(),this.cellCtrl=e,this.beans=t,this.rowNode=n,this.rowCtrl=i}setComp(e){this.eGui=e}onKeyDown(e){const t=e.key;switch(t){case Y.ENTER:this.onEnterKeyDown(e);break;case Y.F2:this.onF2KeyDown(e);break;case Y.ESCAPE:this.onEscapeKeyDown(e);break;case Y.TAB:this.onTabKeyDown(e);break;case Y.BACKSPACE:case Y.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case Y.DOWN:case Y.UP:case Y.RIGHT:case Y.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;const t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){var r;const{cellCtrl:n,beans:i,rowNode:s}=this,{gos:o,rangeService:a,eventService:l}=i;if(!n.isEditing()){if(l.dispatchEvent({type:_.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),Vz(e,o.get("enableCellEditingOnBackspace"))){if(a&&o.get("enableRangeSelection"))a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(n.isCellEditable()){const c=n.getColumn(),u=(r=this.beans.valueService.parseValue(c,s,"",s.getValueFromValueService(c)))!=null?r:null;s.setDataValue(c,u,"cellClear")}}else n.startRowOrCellEdit(e,t);l.dispatchEvent({type:_.EVENT_KEY_SHORTCUT_CHANGED_CELL_END})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){const t=e.shiftKey?Y.UP:Y.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(Y.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(Y.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;const n=e.key;n===" "?this.onSpaceKeyDown(e):(this.cellCtrl.startRowOrCellEdit(n,e),e.preventDefault())}onSpaceKeyDown(e){const{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&t.isRowSelection()){const r=this.rowNode.isSelected(),n=!r;if(n||!t.get("suppressRowDeselection")){const i=this.beans.gos.get("groupSelectsFiltered"),s=this.rowNode.setSelectedParams({newValue:n,rangeSelect:e.shiftKey,groupSelectsFiltered:i,event:e,source:"spaceKey"});r===void 0&&s===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:i,event:e,source:"spaceKey"})}}e.preventDefault()}destroy(){super.destroy()}},F$=class extends mt{constructor(e,t,r){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=r}postConstruct(){this.getGui().appendChild(kr("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);const r=()=>{try{const n=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",n),e.dataTransfer.setData("text/plain",n)}catch{}};if(t){const n=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e});t(n)}else r()}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}};S([_e],F$.prototype,"postConstruct",1);var XZ="ag-column-first",ZZ="ag-column-last",qS=class{static getHeaderClassesFromColDef(e,t,r,n){return gt(e)?[]:this.getColumnClassesFromCollDef(e.headerClass,e,t,r,n)}static getToolPanelClassesFromColDef(e,t,r,n){return gt(e)?[]:this.getColumnClassesFromCollDef(e.toolPanelClass,e,t,r,n)}static refreshFirstAndLastStyles(e,t,r){e.addOrRemoveCssClass(XZ,r.isColumnAtEdge(t,"first")),e.addOrRemoveCssClass(ZZ,r.isColumnAtEdge(t,"last"))}static getClassParams(e,t,r,n){return t.addGridCommonParams({colDef:e,column:r,columnGroup:n})}static getColumnClassesFromCollDef(e,t,r,n,i){if(gt(e))return[];let s;if(typeof e=="function"){const o=this.getClassParams(t,r,n,i);s=e(o)}else s=e;return typeof s=="string"?[s]:Array.isArray(s)?[...s]:[]}},JZ="ag-cell",eJ="ag-cell-auto-height",tJ="ag-cell-normal-height",rJ="ag-cell-focus",nJ="ag-cell-first-right-pinned",iJ="ag-cell-last-left-pinned",sJ="ag-cell-not-inline-editing",oJ="ag-column-hover",aJ="ag-cell-wrap-text",lJ=0,L$=class OT extends Ae{constructor(t,r,n,i){super(),this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.column=t,this.rowNode=r,this.beans=n,this.rowCtrl=i,this.instanceId=t.getId()+"-"+lJ++,this.colIdSanitised=sn(this.column.getId()),n.gos.get("suppressCellFocus")||(this.tabIndex=-1),this.createCellPosition(),this.addFeatures(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}addFeatures(){this.cellPositionFeature=new KZ(this,this.beans),this.addDestroyFunc(()=>{var r;(r=this.cellPositionFeature)==null||r.destroy(),this.cellPositionFeature=null}),this.cellCustomStyleFeature=new qZ(this,this.beans),this.addDestroyFunc(()=>{var r;(r=this.cellCustomStyleFeature)==null||r.destroy(),this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new YZ(this,this.beans,this.column),this.addDestroyFunc(()=>{var r;(r=this.cellMouseListenerFeature)==null||r.destroy(),this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new QZ(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(()=>{var r;(r=this.cellKeyboardListenerFeature)==null||r.destroy(),this.cellKeyboardListenerFeature=null}),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc(()=>{this.disableTooltipFeature()})),this.beans.rangeService&&this.beans.gos.get("enableRangeSelection")&&(this.cellRangeFeature=new WZ(this.beans,this),this.addDestroyFunc(()=>{var r;(r=this.cellRangeFeature)==null||r.destroy(),this.cellRangeFeature=null}))}enableTooltipFeature(t,r){const n=()=>{const o=this.column.getColDef(),a=this.rowNode.data;if(o.tooltipField&&xe(a))return pp(a,o.tooltipField,this.column.isTooltipFieldContainsDots());const l=o.tooltipValueGetter;return l?l(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},i=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!r&&i&&!this.isCellRenderer()&&(r=()=>{const o=this.getGui(),a=o.children.length===0?o:o.querySelector(".ag-cell-value");return a?a.scrollWidth>a.clientWidth:!0});const s={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:t!=null?()=>t:n,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:r};this.tooltipFeature=new Bl(s,this.beans)}disableTooltipFeature(){this.tooltipFeature&&(this.tooltipFeature.destroy(),this.tooltipFeature=null)}setComp(t,r,n,i,s){var o,a,l,c;this.cellComp=t,this.eGui=r,this.printLayout=i,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(n),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(o=this.cellPositionFeature)==null||o.setComp(r),(a=this.cellCustomStyleFeature)==null||a.setComp(t),(l=this.tooltipFeature)==null||l.refreshToolTip(),(c=this.cellKeyboardListenerFeature)==null||c.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,r),s&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(u=>u()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(t){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!t)return;const r=t.parentElement,n=this.beans.gos.getRowHeightForNode(this.rowNode).height,i=a=>{if(this.editing||!this.isAlive())return;const{paddingTop:l,paddingBottom:c,borderBottomWidth:u,borderTopWidth:d}=fu(r),p=l+c+u+d,m=t.offsetHeight+p;if(a<5){const C=this.beans.gos.getDocument(),w=!C||!C.contains(t),b=m==0;if(w||b){window.setTimeout(()=>i(a+1),0);return}}const y=Math.max(m,n);this.rowNode.setRowAutoHeight(y,this.column)},s=()=>i(0);s();const o=this.beans.resizeObserverService.observeResize(t,s);this.addDestroyFunc(()=>{o(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){var t;return(t=this.column.getColDef().cellAriaRole)!=null?t:"gridcell"}getInstanceId(){return this.instanceId}getColumnIdSanitised(){return this.colIdSanitised}getTabIndex(){return this.tabIndex}isCellRenderer(){const t=this.column.getColDef();return t.cellRenderer!=null||t.cellRendererSelector!=null}getValueToDisplay(){var t;return(t=this.valueFormatted)!=null?t:this.value}showValue(t=!1){var r;const n=this.getValueToDisplay();let i;if(this.rowNode.stub){const s=this.createCellRendererParams();i=this.beans.userComponentFactory.getLoadingCellRendererDetails(this.column.getColDef(),s)}else if(this.isCellRenderer()){const s=this.createCellRendererParams();i=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),s)}this.cellComp.setRenderDetails(i,n,t),(r=this.cellRangeFeature)==null||r.refreshHandle()}setupControlComps(){const t=this.column.getColDef();this.includeSelection=this.isIncludeControl(t.checkboxSelection),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(t){return this.rowNode.rowPinned!=null?!1:typeof t=="function"||t===!0}refreshShouldDestroy(){const t=this.column.getColDef(),r=this.includeSelection!=this.isIncludeControl(t.checkboxSelection),n=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),i=this.includeDndSource!=this.isIncludeControl(t.dndSource),s=this.isAutoHeight!=this.column.isAutoHeight();return r||n||i||s}startEditing(t=null,r=!1,n=null){if(!this.isCellEditable()||this.editing)return;if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startEditing(t,r,n)});return}const i=this.createCellEditorParams(t,r),s=this.column.getColDef(),o=this.beans.userComponentFactory.getCellEditorDetails(s,i);this.editCompDetails=o;const a=(o==null?void 0:o.popupFromSelector)!=null?o.popupFromSelector:!!s.cellEditorPopup,l=(o==null?void 0:o.popupPositionFromSelector)!=null?o.popupPositionFromSelector:s.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(o,a,l,this.beans.gos.get("reactiveCustomComponents"));const c=this.createEvent(n,_.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(c)}setEditing(t){var r;this.editing!==t&&(this.editing=t,(r=this.cellRangeFeature)==null||r.refreshHandle())}stopRowOrCellEdit(t=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(t):this.stopEditing(t)}onPopupEditorClosed(){this.isEditing()&&this.stopEditingAndFocus()}takeValueFromCellEditor(t){const r={newValueExists:!1};if(t)return r;const n=this.cellComp.getCellEditor();return!n||n.isCancelAfterEnd&&n.isCancelAfterEnd()?r:{newValue:n.getValue(),newValueExists:!0}}saveNewValue(t,r){if(r===t)return!1;this.suppressRefreshCell=!0;const n=this.rowNode.setDataValue(this.column,r,"edit");return this.suppressRefreshCell=!1,n}stopEditing(t=!1){if(!this.editing)return!1;const{newValue:r,newValueExists:n}=this.takeValueFromCellEditor(t),i=this.rowNode.getValueFromValueService(this.column);let s=!1;return n&&(s=this.saveNewValue(i,r)),this.setEditing(!1),this.cellComp.setEditDetails(),this.editCompDetails=void 0,this.updateAndFormatValue(!1),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(i,r,!t&&!!s),s}dispatchEditingStoppedEvent(t,r,n){const i=Sr(tt({},this.createEvent(null,_.EVENT_CELL_EDITING_STOPPED)),{oldValue:t,newValue:r,valueChanged:n});this.beans.eventService.dispatchEvent(i)}createCellEditorParams(t,r){return this.beans.gos.addGridCommonParams({value:this.rowNode.getValueFromValueService(this.column),eventKey:t,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,cellStartedEdit:r,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)})}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:r=>this.beans.valueService.setValue(this.rowNode,this.column,r),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(r,n,i,s)=>this.registerRowDragger(r,n,s),setTooltip:(r,n)=>{var i;this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(r,n),(i=this.tooltipFeature)==null||i.refreshToolTip()}})}parseValue(t){return this.beans.valueService.parseValue(this.column,this.rowNode,t,this.getValue())}setFocusOutOnEditor(){if(!this.editing)return;const t=this.cellComp.getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(){if(!this.editing)return;const t=this.cellComp.getCellEditor();t&&t.focusIn?t.focusIn():this.focusCell(!0)}onCellChanged(t){t.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(t){var r;this.refreshShouldDestroy()?(r=this.rowCtrl)==null||r.recreateCell(this):this.refreshCell(t)}refreshCell(t){var r,n,i,s;if(this.suppressRefreshCell||this.editing)return;const o=this.column.getColDef(),a=t!=null&&!!t.newData,l=t!=null&&!!t.suppressFlash||!!o.suppressCellFlash,c=o.field==null&&o.valueGetter==null&&o.showRowGroup==null,u=t&&t.forceRefresh||c||a,d=!!this.cellComp,p=this.updateAndFormatValue(d),f=u||p;if(d){if(f){this.showValue(a);const m=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!l&&!m&&(this.beans.gos.get("enableCellChangeFlash")||o.enableCellChangeFlash)&&this.flashCell(),(r=this.cellCustomStyleFeature)==null||r.applyUserStyles(),(n=this.cellCustomStyleFeature)==null||n.applyClassesFromColDef()}(i=this.tooltipFeature)==null||i.refreshToolTip(),(s=this.cellCustomStyleFeature)==null||s.applyCellClassRules()}}stopEditingAndFocus(t=!1,r=!1){this.stopRowOrCellEdit(),this.focusCell(!0),t||this.navigateAfterEdit(r)}navigateAfterEdit(t){if(this.beans.gos.get("enterNavigatesVerticallyAfterEdit")){const n=t?Y.UP:Y.DOWN;this.beans.navigationService.navigateToNextCell(null,n,this.getCellPosition(),!1)}}flashCell(t){var r,n;const i=(r=t==null?void 0:t.flashDuration)!=null?r:t==null?void 0:t.flashDelay,s=(n=t==null?void 0:t.fadeDuration)!=null?n:t==null?void 0:t.fadeDelay;this.animateCell("data-changed",i,s)}animateCell(t,r,n){if(!this.cellComp)return;const i=`ag-cell-${t}`,s=`ag-cell-${t}-animation`,{gos:o}=this.beans;r||(r=o.get("cellFlashDuration")),xe(n)||(n=o.get("cellFadeDuration")),this.cellComp.addOrRemoveCssClass(i,!0),this.cellComp.addOrRemoveCssClass(s,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(i,!1),this.cellComp.addOrRemoveCssClass(s,!0),this.eGui.style.transition=`background-color ${n}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(s,!1),this.eGui.style.transition="")},n))},r)})}onFlashCells(t){if(!this.cellComp)return;const r=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[r]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(t){var r;return(r=this.callValueFormatter(t))!=null?r:t}callValueFormatter(t){return this.beans.valueService.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){const r=this.value,n=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),t?!this.valuesAreEqual(r,this.value)||this.valueFormatted!=n:!0}valuesAreEqual(t,r){const n=this.column.getColDef();return n.equals?n.equals(t,r):t===r}getComp(){return this.cellComp}getValue(){return this.value}addDomData(){const t=this.getGui();this.beans.gos.setDomData(t,OT.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(()=>this.beans.gos.setDomData(t,OT.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(t,r){return this.beans.gos.addGridCommonParams({type:r,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex})}processCharacter(t){var r;(r=this.cellKeyboardListenerFeature)==null||r.processCharacter(t)}onKeyDown(t){var r;(r=this.cellKeyboardListenerFeature)==null||r.onKeyDown(t)}onMouseEvent(t,r){var n;(n=this.cellMouseListenerFeature)==null||n.onMouseEvent(t,r)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var t;this.cellComp&&((t=this.cellPositionFeature)==null||t.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:t,column:r,beans:n}=this;qS.refreshFirstAndLastStyles(t,r,n.columnModel)}refreshAriaColIndex(){const t=this.beans.columnModel.getAriaColumnIndex(this.column);BD(this.getGui(),t)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var t;return(t=this.cellPositionFeature)==null?void 0:t.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(t,r=null){if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(t,r)});return}this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,r)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(t=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;const t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(nJ,t)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(iJ,t)}onCellFocused(t){if(this.beans.gos.get("suppressCellFocus"))return;const r=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){r&&(t!=null&&t.forceBrowserFocus)&&(this.focusEventToRestore=t);return}this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(rJ,r),r&&t&&t.forceBrowserFocus&&this.cellComp.getFocusableElement().focus({preventScroll:!!t.preventScrollOnBrowserFocus});const n=this.beans.gos.get("editType")==="fullRow";!r&&!n&&this.editing&&this.stopRowOrCellEdit(),r&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:Ra(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(JZ,!0),this.cellComp.addOrRemoveCssClass(sJ,!0);const t=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(eJ,t),this.cellComp.addOrRemoveCssClass(tJ,!t)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(oJ,t)}onColDefChanged(){if(!this.cellComp)return;if(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),!this.editing)this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0});else{const r=this.getCellEditor();if(r!=null&&r.refresh){const{eventKey:n,cellStartedEdit:i}=this.editCompDetails.params,s=this.createCellEditorParams(n,i),o=this.column.getColDef(),a=this.beans.userComponentFactory.getCellEditorDetails(o,s);r.refresh(a.params)}}}setWrapText(){const t=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(aJ,t)}dispatchCellContextMenuEvent(t){const r=this.column.getColDef(),n=this.createEvent(t,_.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(n),r.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{r.onCellContextMenu(n)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const t=new $S;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){const t=new F$(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t}registerRowDragger(t,r,n){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,r);return}const i=this.createRowDragComp(t,r,n);i&&(this.customRowDragComp=i,this.addDestroyFunc(()=>{this.beans.context.destroyBean(i),this.customRowDragComp=null}))}createRowDragComp(t,r,n){const i=this.beans.gos.get("pagination"),s=this.beans.gos.get("rowDragManaged"),o=this.beans.gos.isRowModelType("clientSide");if(s){if(!o){ot("managed row dragging is only allowed in the Client Side Row Model");return}if(i){ot("managed row dragging is not possible when doing pagination");return}}const a=new Od(()=>this.value,this.rowNode,this.column,t,r,n);return this.beans.context.createBean(a),a}};L$.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var Cd=L$,cJ=0,G$=class FT extends Ae{constructor(t,r,n,i,s){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=r,this.gos=r.gos,this.rowNode=t,this.paginationPage=r.paginationProxy.getCurrentPage(),this.useAnimationFrameForCreate=i,this.printLayout=s,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=t.id+"-"+cJ++,this.rowId=sn(t.id),this.initRowBusinessKey(),this.rowFocused=r.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=r.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(n),this.rowStyles=this.processStylesFromGridOptions(),this.isFullWidth()&&!this.gos.get("suppressCellFocus")&&(this.tabIndex=-1),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=sn(t)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}getTabIndex(){return this.tabIndex}isSticky(){return this.rowNode.sticky}getInstanceId(){return this.instanceId}setComp(t,r,n){const i={rowComp:t,element:r,containerType:n};this.allRowGuis.push(i),n==="left"?this.leftGui=i:n==="right"?this.rightGui=i:n==="fullWidth"?this.fullWidthGui=i:this.centerGui=i,this.initialiseRowComp(i),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(t){switch(this.allRowGuis=this.allRowGuis.filter(r=>r.containerType!==t),t){case"left":this.leftGui=void 0;break;case"right":this.rightGui=void 0;break;case"fullWidth":this.fullWidthGui=void 0;break;case"center":this.centerGui=void 0;break}}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(t){const r=t?"none":"";this.allRowGuis.forEach(n=>n.element.style.display=r)}initialiseRowComp(t){const r=this.gos;this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),r.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);const n=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(s=>n.addOrRemoveCssClass(s,!0)),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&Sl(t.element,this.rowNode.expanded==!0),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),r.setDomData(t.element,FT.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(()=>r.setDomData(t.element,FT.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t.element),this.isFullWidth()&&this.setupFullWidth(t),r.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){this.businessKeySanitised!=null&&t.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(t){this.rowId=sn(this.rowNode.id),this.rowId!=null&&t.setRowId(this.rowId)}executeSlideAndFadeAnimations(t){const{containerType:r}=t;this.slideInAnimation[r]&&(bT(()=>{this.onTopChanged()}),this.slideInAnimation[r]=!1),this.fadeInAnimation[r]&&(bT(()=>{t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[r]=!1)}addRowDraggerToRow(t){if(this.gos.get("enableRangeSelection")){ot("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");return}const r=this.beans.localeService.getLocaleTextFunc(),n=new Od(()=>`1 ${r("rowDragRow","row")}`,this.rowNode,void 0,t.element,void 0,!0),i=this.createBean(n,this.beans.context);this.rowDragComps.push(i)}setupFullWidth(t){const r=this.getPinnedForContainer(t.containerType);if(this.rowType=="FullWidthDetail"&&!Yt.__assertRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;const n=this.createFullWidthCompDetails(t.element,r);t.rowComp.showFullWidth(n)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){var t,r;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(n=>{var i;return(i=n==null?void 0:n.rowComp)==null?void 0:i.getFullWidthCellRenderer()}):[(r=(t=this.fullWidthGui)==null?void 0:t.rowComp)==null?void 0:r.getFullWidthCellRenderer()]}getCellElement(t){const r=this.getCellCtrl(t);return r?r.getGui():null}executeProcessRowPostCreateFunc(){const t=this.gos.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;const r={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(r)}areAllContainersReady(){const t=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),r=!!this.centerGui,n=!!this.rightGui||!this.beans.columnModel.isPinningRight();return t&&r&&n}setRowType(){const t=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow"),r=this.rowNode.isFullWidthCell(),n=this.gos.get("masterDetail")&&this.rowNode.detail,i=this.beans.columnModel.isPivotMode(),o=!!this.rowNode.group&&!this.rowNode.footer&&this.gos.isGroupUseEntireRow(i);t?this.rowType="FullWidthLoading":n?this.rowType="FullWidthDetail":r?this.rowType="FullWidth":o?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(t=!1,r=!1){if(this.isFullWidth())return;if(t||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(r);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(t,r,n=null){const i={list:[],map:{}},s=(o,a)=>{i.list.push(a),i.map[o]=a};return r.forEach(o=>{const a=o.getInstanceId();let l=t.map[a];l||(l=new Cd(o,this.rowNode,this.beans,this)),s(a,l)}),t.list.forEach(o=>{if(i.map[o.getColumn().getInstanceId()]!=null)return;if(!this.isCellEligibleToBeRemoved(o,n)){s(o.getColumn().getInstanceId(),o);return}o.destroy()}),i}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){this.allRowGuis.forEach(r=>{const n=this.getCellCtrlsForContainer(r.containerType);r.rowComp.setCellCtrls(n,t)})}getCellCtrlsForContainer(t){switch(t){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list;default:const r=t;throw new Error(`Unhandled case: ${r}`)}}createAllCellCtrls(){const t=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const r=t.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,r);const n=t.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");const i=t.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,i,"right")}}isCellEligibleToBeRemoved(t,r){if(t.getColumn().getPinned()!=r)return!0;const o=t.isEditing(),a=this.beans.focusService.isCellFocused(t.getCellPosition());if(o||a){const c=t.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(c)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||this.gos.isDomLayout("print")}listenOnDomOrder(t){const r=()=>{t.rowComp.setDomOrder(this.getDomOrder())};this.addManagedPropertyListener("domLayout",r),this.addManagedPropertyListener("ensureDomOrder",r)}setAnimateFlags(t){if(this.isSticky()||!t)return;const r=xe(this.rowNode.oldRowTop),n=this.beans.columnModel.isPinningLeft(),i=this.beans.columnModel.isPinningRight();if(r){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=n,this.slideInAnimation.right=i}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=n,this.fadeInAnimation.right=i}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const t=(a,l)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,l).params):!0,r=t(this.fullWidthGui,null),n=t(this.centerGui,null),i=t(this.leftGui,"left"),s=t(this.rightGui,"right");return r&&n&&i&&s}addListeners(){this.addManagedListener(this.rowNode,Dt.EVENT_HEIGHT_CHANGED,()=>this.onRowHeightChanged()),this.addManagedListener(this.rowNode,Dt.EVENT_ROW_SELECTED,()=>this.onRowSelected()),this.addManagedListener(this.rowNode,Dt.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,Dt.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,Dt.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,Dt.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,Dt.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Dt.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Dt.EVENT_CELL_CHANGED,this.postProcessCss.bind(this)),this.addManagedListener(this.rowNode,Dt.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,Dt.EVENT_DRAGGING_CHANGED,this.postProcessRowDragging.bind(this)),this.addManagedListener(this.rowNode,Dt.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));const t=this.beans.eventService;this.addManagedListener(t,_.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(t,_.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(t,_.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(t,_.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(t,_.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addManagedListener(t,_.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusChanged.bind(this)),this.addManagedListener(t,_.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(t,_.EVENT_MODEL_UPDATED,this.refreshFirstAndLastRowStyles.bind(this)),this.addManagedListener(t,_.EVENT_COLUMN_MOVED,this.updateColumnLists.bind(this)),this.addDestroyFunc(()=>{this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowDragEntireRow"],()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(n=>{this.addRowDraggerToRow(n)});return}this.destroyBeans(this.rowDragComps,this.beans.context),this.rowDragComps=[]}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListener(this.rowNode,Dt.EVENT_ROW_INDEX_CHANGED,()=>{this.getAllCellCtrls().forEach(t=>t.onRowIndexChanged())}),this.addManagedListener(this.rowNode,Dt.EVENT_CELL_CHANGED,t=>{this.getAllCellCtrls().forEach(r=>r.onCellChanged(t))})}onRowNodeDataChanged(t){if(this.isFullWidth()!==!!this.rowNode.isFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(n=>n.refreshCell({suppressFlash:!t.update,newData:!t.update})),this.allRowGuis.forEach(n=>{this.setRowCompRowId(n.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(n.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const t=this.rowNode.highlighted;this.allRowGuis.forEach(r=>{const n=t===0,i=t===1;r.rowComp.addOrRemoveCssClass("ag-row-highlight-above",n),r.rowComp.addOrRemoveCssClass("ag-row-highlight-below",i)})}postProcessRowDragging(){const t=this.rowNode.dragging;this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-row-dragging",t))}updateExpandedCss(){const t=this.rowNode.isExpandable(),r=this.rowNode.expanded==!0;this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass("ag-row-group",t),n.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&r),n.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!r),Sl(n.element,t&&r)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Ra(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(t){const r=this.allRowGuis.find(l=>l.element.contains(t.target));if(!((r?r.element:null)===t.target))return;const s=this.rowNode,o=this.beans.focusService.getFocusedCell(),a={rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:o&&o.column};this.beans.navigationService.navigateToNextCell(t,t.key,a,!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||$o(t))return;const r=this.allRowGuis.find(o=>o.element.contains(t.target)),n=r?r.element:null,i=n===t.target;let s=null;i||(s=this.beans.focusService.findNextFocusableElement(n,!1,t.shiftKey)),(this.isFullWidth()&&i||!s)&&this.beans.navigationService.onTabKeyDown(this,t)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var t;const r=(t=this.allRowGuis.find(n=>ns(n.element)))==null?void 0:t.element;return r?r.getBoundingClientRect().top:0}onFullWidthRowFocused(t){var r;const n=this.rowNode,i=t?this.isFullWidth()&&t.rowIndex===n.rowIndex&&t.rowPinned==n.rowPinned:!1,s=this.fullWidthGui?this.fullWidthGui.element:(r=this.centerGui)==null?void 0:r.element;s&&(s.classList.toggle("ag-full-width-focus",i),i&&s.focus({preventScroll:!0}))}recreateCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),t.destroy(),this.updateColumnLists()}removeCellCtrl(t,r){const n={list:[],map:{}};return t.list.forEach(i=>{i!==r&&(n.list.push(i),n.map[i.getColumn().getInstanceId()]=i)}),n}onMouseEvent(t,r){switch(t){case"dblclick":this.onRowDblClick(r);break;case"click":this.onRowClick(r);break;case"touchstart":case"mousedown":this.onRowMouseDown(r);break}}createRowEvent(t,r){return this.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:r})}createRowEventWithSource(t,r){const n=this.createRowEvent(t,r);return n.source=this,n}onRowDblClick(t){if($o(t))return;const r=this.createRowEventWithSource(_.EVENT_ROW_DOUBLE_CLICKED,t);this.beans.eventService.dispatchEvent(r)}onRowMouseDown(t){if(this.lastMouseDownOnDragger=vd(t.target,"ag-row-drag",3),!this.isFullWidth())return;const r=this.rowNode,n=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:r.rowIndex,column:n.getAllDisplayedColumns()[0],rowPinned:r.rowPinned,forceBrowserFocus:!0})}onRowClick(t){if($o(t)||this.lastMouseDownOnDragger)return;const n=this.createRowEventWithSource(_.EVENT_ROW_CLICKED,t);this.beans.eventService.dispatchEvent(n);const i=t.ctrlKey||t.metaKey,s=t.shiftKey;if(this.gos.get("groupSelectsChildren")&&this.rowNode.group||this.isRowSelectionBlocked()||this.gos.get("suppressRowClickSelection"))return;const a=this.gos.get("rowMultiSelectWithClick"),l=!this.gos.get("suppressRowDeselection"),c="rowClicked";if(this.rowNode.isSelected())a?this.rowNode.setSelectedParams({newValue:!1,event:t,source:c}):i?l&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:c}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!s,rangeSelect:s,event:t,source:c});else{const u=a?!1:!i;this.rowNode.setSelectedParams({newValue:!0,clearSelection:u,rangeSelect:s,event:t,source:c})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!this.gos.isRowSelection()}setupDetailRowAutoHeight(t){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;const r=()=>{const i=t.clientHeight;if(i!=null&&i>0){const s=()=>{this.rowNode.setRowHeight(i),this.beans.clientSideRowModel?this.beans.clientSideRowModel.onRowHeightChanged():this.beans.serverSideRowModel&&this.beans.serverSideRowModel.onRowHeightChanged()};window.setTimeout(s,0)}},n=this.beans.resizeObserverService.observeResize(t,r);this.addDestroyFunc(n),r()}createFullWidthCompDetails(t,r){const n=this.gos.addGridCommonParams({fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,eGridCell:t,eParentOfValue:t,pinned:r,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(i,s,o,a)=>this.addFullWidthRowDragging(i,s,o,a),setTooltip:(i,s)=>this.refreshRowTooltip(i,s)});switch(this.rowType){case"FullWidthDetail":return this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(n);case"FullWidthGroup":return this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(n);case"FullWidthLoading":return this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(n);default:return this.beans.userComponentFactory.getFullWidthCellRendererDetails(n)}}refreshRowTooltip(t,r){if(!this.fullWidthGui)return;const n={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>t,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:r};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new Bl(n,this.beans))}addFullWidthRowDragging(t,r,n="",i){if(!this.isFullWidth())return;const s=new Od(()=>n,this.rowNode,void 0,t,r,i);this.createBean(s,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(s,this.beans.context)})}onUiLevelChanged(){const t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){const r="ag-row-level-"+t,n="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass(r,!0),i.rowComp.addOrRemoveCssClass(n,!1)})}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()}refreshFirstAndLastRowStyles(){const t=this.isFirstRowOnPage(),r=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-first",t))),this.lastRowOnPage!==r&&(this.lastRowOnPage=r,this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-last",r)))}stopEditing(t=!1){if(this.stoppingRowEdit)return;const r=this.getAllCellCtrls(),n=this.editingRow;this.stoppingRowEdit=!0;let i=!1;for(const s of r){const o=s.stopEditing(t);n&&!t&&!i&&o&&(i=!0)}if(i){const s=this.createRowEvent(_.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(s)}n&&this.setEditingRow(!1),this.stoppingRowEdit=!1}setInlineEditingCss(t){this.allRowGuis.forEach(r=>{r.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),r.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}setEditingRow(t){this.editingRow=t,this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-editing",t));const r=t?this.createRowEvent(_.EVENT_ROW_EDITING_STARTED):this.createRowEvent(_.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(r)}startRowEditing(t=null,r=null,n=null){if(this.editingRow)return;this.getAllCellCtrls().reduce((s,o)=>{const a=o===r;return a?o.startEditing(t,a,n):o.startEditing(null,a,n),s?!0:o.isEditing()},!1)&&this.setEditingRow(!0)}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const t=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!t||!t.length||t.forEach(r=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(r,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass(t,!0))},t=>{this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass(t,!1))})}setStylesFromGridOptions(t,r){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(r,n=>n.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t==="left"?"left":t==="right"?"right":null}getInitialRowClasses(t){const r=this.getPinnedForContainer(t),n={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:r};return this.beans.rowCssClassCalculator.getInitialRowClasses(n)}processStylesFromGridOptions(){const t=this.gos.get("rowStyle");if(t&&typeof t=="function"){console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}const r=this.gos.getCallback("getRowStyle");let n;if(r){const i={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};n=r(i)}return n||t?Object.assign({},t,n):this.emptyStyle}onRowSelected(t){const r=!!this.rowNode.isSelected();this.forEachGui(t,n=>{n.rowComp.addOrRemoveCssClass("ag-row-selected",r),Hp(n.element,r),n.element.contains(this.beans.gos.getActiveDomElement())&&(n===this.centerGui||n===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;const t=this.rowNode.isSelected();if(t&&this.beans.gos.get("suppressRowDeselection"))return;const n=this.beans.localeService.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(n)}addHoverFunctionality(t){this.active&&(this.addManagedListener(t,"mouseenter",()=>this.rowNode.onMouseEnter()),this.addManagedListener(t,"mouseleave",()=>this.rowNode.onMouseLeave()),this.addManagedListener(this.rowNode,Dt.EVENT_MOUSE_ENTER,()=>{!this.beans.dragService.isDragging()&&!this.gos.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),this.rowNode.setHovered(!0))}),this.addManagedListener(this.rowNode,Dt.EVENT_MOUSE_LEAVE,()=>{t.classList.remove("ag-row-hover"),this.rowNode.setHovered(!1)}))}roundRowTopToBounds(t){const r=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),n=this.applyPaginationOffset(r.top,!0)-100,i=this.applyPaginationOffset(r.bottom,!0)+100;return Math.min(Math.max(n,t),i)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(t,r){t?r(t):this.allRowGuis.forEach(r)}onRowHeightChanged(t){if(this.rowNode.rowHeight==null)return;const r=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),s=this.gos.isGetRowHeightFunction()?this.gos.getRowHeightForNode(this.rowNode).height:void 0,o=s?`${Math.min(n,s)-2}px`:void 0;this.forEachGui(t,a=>{a.element.style.height=`${r}px`,o&&a.element.style.setProperty("--ag-line-height",o)})}addEventListener(t,r){super.addEventListener(t,r)}removeEventListener(t,r){super.removeEventListener(t,r)}destroyFirstPass(t=!1){if(this.active=!1,!t&&this.gos.isAnimateRows()&&!this.isSticky())if(this.rowNode.rowTop!=null){const i=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(i)}else this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);const r=this.createRowEvent(_.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(r),this.beans.eventService.dispatchEvent(r),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const t=r=>(r.list.forEach(n=>n.destroy()),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,r=>{r.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),r.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){const t=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,r=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return t;const n=this.beans.paginationProxy.getPixelOffset();return t+n*(r?1:-1)}setRowTop(t){if(!this.printLayout&&xe(t)){const r=this.applyPaginationOffset(t),s=`${this.rowNode.isRowPinned()||this.rowNode.sticky?r:this.beans.rowContainerHeightService.getRealPixelPosition(r)}px`;this.setRowTopStyle(s)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";let r;if(this.isSticky())r=this.rowNode.stickyRowTop;else{const n=this.slideInAnimation[t]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,i=this.applyPaginationOffset(n);r=this.rowNode.isRowPinned()?i:this.beans.rowContainerHeightService.getRealPixelPosition(i)}return r+"px"}setRowTopStyle(t){this.allRowGuis.forEach(r=>this.suppressRowTransform?r.rowComp.setTop(t):r.rowComp.setTransform(`translateY(${t})`))}getRowNode(){return this.rowNode}getCellCtrl(t){let r=null;return this.getAllCellCtrls().forEach(n=>{n.getColumn()==t&&(r=n)}),r!=null||this.getAllCellCtrls().forEach(n=>{n.getColSpanningList().indexOf(t)>=0&&(r=n)}),r}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(t){const r=this.rowNode.getRowIndexString(),n=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),i=this.rowNode.rowIndex%2===0,s=n+this.rowNode.rowIndex+1;this.forEachGui(t,o=>{o.rowComp.setRowIndex(r),o.rowComp.addOrRemoveCssClass("ag-row-even",i),o.rowComp.addOrRemoveCssClass("ag-row-odd",!i),jD(o.element,s)})}};G$.DOM_DATA_KEY_ROW_CTRL="renderedRow";var wd=G$,os=class extends Ae{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedListener(this.element,e,t)}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",MD("touchstart")?"touchstart":"mousedown"].forEach(r=>{const n=this.processMouseEvent.bind(this,r);this.addManagedListener(this.element,r,n)})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||$o(t))return;const r=this.getRowForEvent(t),n=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,void 0,r,n):(n&&n.onMouseEvent(e,t),r&&r.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!jl())return;const e=new kn(this.element),t=r=>{const n=this.getRowForEvent(r.touchEvent),i=this.mouseEventService.getRenderedCellForEvent(r.touchEvent);this.handleContextMenuMouseEvent(void 0,r.touchEvent,n,i)};this.addManagedListener(e,kn.EVENT_LONG_TAP,t),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){const r=this.gos.getDomData(t,wd.DOM_DATA_KEY_ROW_CTRL);if(r)return r;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,r,n){const i=r?r.getRowNode():null,s=n?n.getColumn():null;let o=null;if(s){const c=e||t;n.dispatchCellContextMenuEvent(c??null),o=this.valueService.getValue(s,i)}const a=this.ctrlsService.getGridBodyCtrl(),l=n?n.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:i,column:s,value:o,anchorToElement:l})}getControlsForEventTarget(e){return{cellCtrl:pw(this.gos,e,Cd.DOM_DATA_KEY_CELL_CTRL),rowCtrl:pw(this.gos,e,wd.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){const{cellCtrl:r,rowCtrl:n}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(r?this.processCellKeyboardEvent(r,e,t):n&&n.isFullWidth()&&this.processFullWidthRowKeyboardEvent(n,e,t))}processCellKeyboardEvent(e,t,r){const n=e.getRowNode(),i=e.getColumn(),s=e.isEditing();if(!vw(this.gos,r,n,i,s)&&t==="keydown"&&(!s&&this.navigationService.handlePageScrollingKey(r)||e.onKeyDown(r),this.doGridOperations(r,e.isEditing()),FS(r)&&e.processCharacter(r)),t==="keydown"){const a=e.createEvent(r,_.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(a)}}processFullWidthRowKeyboardEvent(e,t,r){const n=e.getRowNode(),i=this.focusService.getFocusedCell(),s=i&&i.column;if(!vw(this.gos,r,n,s,!1)){const a=r.key;if(t==="keydown")switch(a){case Y.PAGE_HOME:case Y.PAGE_END:case Y.PAGE_UP:case Y.PAGE_DOWN:this.navigationService.handlePageScrollingKey(r,!0);break;case Y.UP:case Y.DOWN:e.onKeyboardNavigate(r);break;case Y.TAB:e.onTabKeyDown(r);break}}if(t==="keydown"){const a=e.createRowEvent(_.EVENT_CELL_KEY_DOWN,r);this.eventService.dispatchEvent(a)}}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;const r=Bz(e);if(r===Y.A)return this.onCtrlAndA(e);if(r===Y.C)return this.onCtrlAndC(e);if(r===Y.D)return this.onCtrlAndD(e);if(r===Y.V)return this.onCtrlAndV(e);if(r===Y.X)return this.onCtrlAndX(e);if(r===Y.Y)return this.onCtrlAndY();if(r===Y.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){const{pinnedRowModel:t,paginationProxy:r,rangeService:n}=this;if(n&&r.isRowsToRender()){const[i,s]=[t.isEmpty("top"),t.isEmpty("bottom")],o=i?null:"top";let a,l;s?(a=null,l=this.paginationProxy.getRowCount()-1):(a="bottom",l=t.getPinnedBottomRowData().length-1);const c=this.columnModel.getAllDisplayedColumns();if(Ks(c))return;n.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:l,rowEndPinned:a,columnStart:c[0],columnEnd:Wt(c)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:t,rowCtrl:r}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||r!=null&&r.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:t,rowCtrl:r}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||r!=null&&r.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){const{cellCtrl:t,rowCtrl:r}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||r!=null&&r.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){this.gos.get("undoRedoCellEditing")&&(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService.redo("ui")}};S([F("mouseEventService")],os.prototype,"mouseEventService",2);S([F("valueService")],os.prototype,"valueService",2);S([F("menuService")],os.prototype,"menuService",2);S([F("ctrlsService")],os.prototype,"ctrlsService",2);S([F("navigationService")],os.prototype,"navigationService",2);S([F("focusService")],os.prototype,"focusService",2);S([F("undoRedoService")],os.prototype,"undoRedoService",2);S([F("columnModel")],os.prototype,"columnModel",2);S([F("paginationProxy")],os.prototype,"paginationProxy",2);S([F("pinnedRowModel")],os.prototype,"pinnedRowModel",2);S([rr("rangeService")],os.prototype,"rangeService",2);S([rr("clipboardService")],os.prototype,"clipboardService",2);S([_e],os.prototype,"postConstruct",1);var wf=class extends Ae{constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedListener(this.eventService,_.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this)),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const e=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=ah(e);if(t<=50)return;let r=this.getPinnedColumnsOverflowingViewport(t-50);const n=this.gos.getCallback("processUnpinnedColumns");r.length&&(n&&(r=n({columns:r,viewportWidth:t})),this.columnModel.setColumnsPinned(r,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){const t=this.pinnedWidthService.getPinnedRightWidth(),r=this.pinnedWidthService.getPinnedLeftWidth(),n=t+r;if(n<e)return[];const i=[...this.columnModel.getDisplayedLeftColumns()],s=[...this.columnModel.getDisplayedRightColumns()];let o=0,a=0,l=0;const c=[];let u=n-l-e;for(;(a<i.length||o<s.length)&&u>0;){if(o<s.length){const d=s[o++];u-=d.getActualWidth(),c.push(d)}if(a<i.length&&u>0){const d=i[a++];u-=d.getActualWidth(),c.push(d)}}return c}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=Jv(e);if(this.bodyHeight!==t){this.bodyHeight=t;const r={type:_.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(r)}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(e,t)}};S([F("ctrlsService")],wf.prototype,"ctrlsService",2);S([F("pinnedWidthService")],wf.prototype,"pinnedWidthService",2);S([F("columnModel")],wf.prototype,"columnModel",2);S([F("scrollVisibleService")],wf.prototype,"scrollVisibleService",2);S([_e],wf.prototype,"postConstruct",1);var yk=class extends Ae{constructor(e){super(),this.element=e}postConstruct(){this.addManagedListener(this.eventService,_.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))}onPinnedLeftWidthChanged(){const e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;jt(this.element,t),eo(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}};S([F("pinnedWidthService")],yk.prototype,"pinnedWidthService",2);S([_e],yk.prototype,"postConstruct",1);var Ck=class extends Ae{constructor(e){super(),this.element=e}postConstruct(){this.addManagedListener(this.eventService,_.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))}onPinnedRightWidthChanged(){const e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;jt(this.element,t),eo(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}};S([F("pinnedWidthService")],Ck.prototype,"pinnedWidthService",2);S([_e],Ck.prototype,"postConstruct",1);var YS=class extends Ae{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedListener(this.eventService,_.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))}onHeightChanged(){const e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}};S([F("rowContainerHeightService")],YS.prototype,"maxDivHeightScaler",2);S([_e],YS.prototype,"postConstruct",1);var QS=class extends Ae{constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",t=>{if(t.currentValue){this.enableFeature();return}this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),this.gos.get("enableRangeSelection")&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}};S([F("dragService")],QS.prototype,"dragService",2);S([rr("rangeService")],QS.prototype,"rangeService",2);S([_e],QS.prototype,"postConstruct",1);var bf=class extends Ae{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedListener(this.eventService,_.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,_.EVENT_LEFT_PINNED_WIDTH_CHANGED,e),this.addSpacer&&(this.addManagedListener(this.eventService,_.EVENT_RIGHT_PINNED_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,_.EVENT_SCROLL_VISIBILITY_CHANGED,e),this.addManagedListener(this.eventService,_.EVENT_SCROLLBAR_WIDTH_CHANGED,e)),this.setWidth()}setWidth(){const{columnModel:e}=this,t=this.gos.isDomLayout("print"),r=e.getBodyContainerWidth(),n=e.getDisplayedColumnsLeftWidth(),i=e.getDisplayedColumnsRightWidth();let s;t?s=r+n+i:(s=r,this.addSpacer&&(this.gos.get("enableRtl")?n:i)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(s+=this.gos.getScrollbarWidth())),this.callback(s)}};S([F("columnModel")],bf.prototype,"columnModel",2);S([F("scrollVisibleService")],bf.prototype,"scrollVisibleService",2);S([_e],bf.prototype,"postConstruct",1);var vr=(e=>(e.LEFT="left",e.RIGHT="right",e.CENTER="center",e.FULL_WIDTH="fullWidth",e.TOP_LEFT="topLeft",e.TOP_RIGHT="topRight",e.TOP_CENTER="topCenter",e.TOP_FULL_WIDTH="topFullWidth",e.STICKY_TOP_LEFT="stickyTopLeft",e.STICKY_TOP_RIGHT="stickyTopRight",e.STICKY_TOP_CENTER="stickyTopCenter",e.STICKY_TOP_FULL_WIDTH="stickyTopFullWidth",e.STICKY_BOTTOM_LEFT="stickyBottomLeft",e.STICKY_BOTTOM_RIGHT="stickyBottomRight",e.STICKY_BOTTOM_CENTER="stickyBottomCenter",e.STICKY_BOTTOM_FULL_WIDTH="stickyBottomFullWidth",e.BOTTOM_LEFT="bottomLeft",e.BOTTOM_RIGHT="bottomRight",e.BOTTOM_CENTER="bottomCenter",e.BOTTOM_FULL_WIDTH="bottomFullWidth",e))(vr||{});function j$(e){switch(e){case"center":case"topCenter":case"stickyTopCenter":case"bottomCenter":case"stickyBottomCenter":return"center";case"left":case"topLeft":case"stickyTopLeft":case"bottomLeft":case"stickyBottomLeft":return"left";case"right":case"topRight":case"stickyTopRight":case"bottomRight":case"stickyBottomRight":return"right";case"fullWidth":case"topFullWidth":case"stickyTopFullWidth":case"bottomFullWidth":case"stickyBottomFullWidth":return"fullWidth";default:throw Error("Invalid Row Container Type")}}var uJ=yc([["center","ag-center-cols-container"],["left","ag-pinned-left-cols-container"],["right","ag-pinned-right-cols-container"],["fullWidth","ag-full-width-container"],["topCenter","ag-floating-top-container"],["topLeft","ag-pinned-left-floating-top"],["topRight","ag-pinned-right-floating-top"],["topFullWidth","ag-floating-top-full-width-container"],["stickyTopCenter","ag-sticky-top-container"],["stickyTopLeft","ag-pinned-left-sticky-top"],["stickyTopRight","ag-pinned-right-sticky-top"],["stickyTopFullWidth","ag-sticky-top-full-width-container"],["stickyBottomCenter","ag-sticky-bottom-container"],["stickyBottomLeft","ag-pinned-left-sticky-bottom"],["stickyBottomRight","ag-pinned-right-sticky-bottom"],["stickyBottomFullWidth","ag-sticky-bottom-full-width-container"],["bottomCenter","ag-floating-bottom-container"],["bottomLeft","ag-pinned-left-floating-bottom"],["bottomRight","ag-pinned-right-floating-bottom"],["bottomFullWidth","ag-floating-bottom-full-width-container"]]),dJ=yc([["center","ag-center-cols-viewport"],["topCenter","ag-floating-top-viewport"],["stickyTopCenter","ag-sticky-top-viewport"],["bottomCenter","ag-floating-bottom-viewport"],["stickyBottomCenter","ag-sticky-bottom-viewport"]]),fh=class B$ extends Ae{constructor(t){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=t,this.isFullWithContainer=this.name==="topFullWidth"||this.name==="stickyTopFullWidth"||this.name==="stickyBottomFullWidth"||this.name==="bottomFullWidth"||this.name==="fullWidth"}static getRowContainerCssClasses(t){const r=uJ.get(t),n=dJ.get(t);return{container:r,viewport:n}}static getPinned(t){switch(t){case"bottomLeft":case"topLeft":case"stickyTopLeft":case"stickyBottomLeft":case"left":return"left";case"bottomRight":case"topRight":case"stickyTopRight":case"stickyBottomRight":case"right":return"right";default:return null}}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>this.viewportSizeFeature=this.createManagedBean(new wf(this)))}registerWithCtrlsService(){switch(this.name){case"fullWidth":case"topFullWidth":case"stickyTopFullWidth":case"bottomFullWidth":case"stickyBottomFullWidth":return;default:this.ctrlsService.register(this.name,this)}}forContainers(t,r){t.indexOf(this.name)>=0&&r()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(t,r,n){this.comp=t,this.eContainer=r,this.eViewport=n,this.createManagedBean(new os(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();const i=["topCenter","topLeft","topRight"],s=["stickyTopCenter","stickyTopLeft","stickyTopRight"],o=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],a=["bottomCenter","bottomLeft","bottomRight"],l=["center","left","right"],c=[...i,...a,...l,...s,...o],u=["center","left","right","fullWidth"],d=["center","topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],p=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],f=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"];this.forContainers(p,()=>{this.pinnedWidthFeature=this.createManagedBean(new yk(this.eContainer)),this.addManagedListener(this.eventService,_.EVENT_LEFT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(f,()=>{this.pinnedWidthFeature=this.createManagedBean(new Ck(this.eContainer)),this.addManagedListener(this.eventService,_.EVENT_RIGHT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(u,()=>this.createManagedBean(new YS(this.eContainer,this.name==="center"?n:void 0))),this.forContainers(c,()=>this.createManagedBean(new QS(this.eContainer))),this.forContainers(d,()=>this.createManagedBean(new bf(m=>this.comp.setContainerWidth(`${m}px`)))),this.addListeners(),this.registerWithCtrlsService()}addListeners(){this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>this.onDisplayedColumnsChanged()),this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>this.onDisplayedColumnsWidthChanged()),this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_ROWS_CHANGED,t=>this.onDisplayedRowsChanged(t.afterScroll)),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(["stickyTopCenter","stickyTopLeft","stickyTopRight","stickyTopFullWidth","stickyBottomCenter","stickyBottomLeft","stickyBottomRight","stickyBottomFullWidth"].indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const n=()=>{const i=this.gos.get("ensureDomOrder"),s=this.gos.isDomLayout("print");this.comp.setDomOrder(i||s)};this.addManagedPropertyListener("domLayout",n),n()}stopHScrollOnPinnedRows(){this.forContainers(["topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],()=>{const t=()=>this.eViewport.scrollLeft=0;this.addManagedListener(this.eViewport,"scroll",t)})}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const t=r=>{this.dragService.isDragging()&&r.cancelable&&r.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(t=!1){const r=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(r,n,t)}getCenterWidth(){return ah(this.eViewport)}getCenterViewportScrollLeft(){return jm(this.eViewport,this.enableRtl)}registerViewportResizeListener(t){const r=this.resizeObserverService.observeResize(this.eViewport,t);this.addDestroyFunc(()=>r())}isViewportInTheDOMTree(){return ZD(this.eViewport)}getViewportScrollLeft(){return jm(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||Dz(this.eViewport)}getViewportElement(){return this.eViewport}setContainerTranslateX(t){this.eContainer.style.transform=`translateX(${t}px)`}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(t){Bm(this.eViewport,t,this.enableRtl)}isContainerVisible(){return!B$.getPinned(this.name)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const t=this.isContainerVisible();this.visible!=t&&(this.visible=t,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(t=!1){const r=this.getRowCtrls();if(!this.visible||r.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const n=this.gos.isDomLayout("print"),s=this.gos.get("embedFullWidthRows")||n,o=r.filter(a=>{const l=a.isFullWidth();return this.isFullWithContainer?!s&&l:s||!l});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:t})}getRowCtrls(){switch(this.name){case"topCenter":case"topLeft":case"topRight":case"topFullWidth":return this.rowRenderer.getTopRowCtrls();case"stickyTopCenter":case"stickyTopLeft":case"stickyTopRight":case"stickyTopFullWidth":return this.rowRenderer.getStickyTopRowCtrls();case"stickyBottomCenter":case"stickyBottomLeft":case"stickyBottomRight":case"stickyBottomFullWidth":return this.rowRenderer.getStickyBottomRowCtrls();case"bottomCenter":case"bottomLeft":case"bottomRight":case"bottomFullWidth":return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}}};S([F("dragService")],fh.prototype,"dragService",2);S([F("ctrlsService")],fh.prototype,"ctrlsService",2);S([F("columnModel")],fh.prototype,"columnModel",2);S([F("resizeObserverService")],fh.prototype,"resizeObserverService",2);S([F("rowRenderer")],fh.prototype,"rowRenderer",2);S([_e],fh.prototype,"postConstruct",1);var ww=fh,hJ=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root ref="gridHeader"></ag-header-root>
        <div class="ag-floating-top" ref="eTop" role="presentation">
            <ag-row-container ref="topLeftContainer" name="topLeft"></ag-row-container>
            <ag-row-container ref="topCenterContainer" name="topCenter"></ag-row-container>
            <ag-row-container ref="topRightContainer" name="topRight"></ag-row-container>
            <ag-row-container ref="topFullWidthContainer" name="topFullWidth"></ag-row-container>
        </div>
        <div class="ag-body" ref="eBody" role="presentation">
            <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">
                <ag-row-container ref="leftContainer" name="left"></ag-row-container>
                <ag-row-container ref="centerContainer" name="center"></ag-row-container>
                <ag-row-container ref="rightContainer" name="right"></ag-row-container>
                <ag-row-container ref="fullWidthContainer" name="fullWidth"></ag-row-container>
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">
            <ag-row-container ref="stickyTopLeftContainer" name="stickyTopLeft"></ag-row-container>
            <ag-row-container ref="stickyTopCenterContainer" name="stickyTopCenter"></ag-row-container>
            <ag-row-container ref="stickyTopRightContainer" name="stickyTopRight"></ag-row-container>
            <ag-row-container ref="stickyTopFullWidthContainer" name="stickyTopFullWidth"></ag-row-container>
        </div>
        <div class="ag-sticky-bottom" ref="eStickyBottom" role="presentation">
            <ag-row-container ref="stickyBottomLeftContainer" name="stickyBottomLeft"></ag-row-container>
            <ag-row-container ref="stickyBottomCenterContainer" name="stickyBottomCenter"></ag-row-container>
            <ag-row-container ref="stickyBottomRightContainer" name="stickyBottomRight"></ag-row-container>
            <ag-row-container ref="stickyBottomFullWidthContainer" name="stickyBottomFullWidth"></ag-row-container>
        </div>
        <div class="ag-floating-bottom" ref="eBottom" role="presentation">
            <ag-row-container ref="bottomLeftContainer" name="bottomLeft"></ag-row-container>
            <ag-row-container ref="bottomCenterContainer" name="bottomCenter"></ag-row-container>
            <ag-row-container ref="bottomRightContainer" name="bottomRight"></ag-row-container>
            <ag-row-container ref="bottomFullWidthContainer" name="bottomFullWidth"></ag-row-container>
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,ea=class extends mt{constructor(){super(hJ)}init(){const t=(n,i)=>{const s=`${n}px`;i.style.minHeight=s,i.style.height=s},r={setRowAnimationCssOnBodyViewport:(n,i)=>this.setRowAnimationCssOnBodyViewport(n,i),setColumnCount:n=>pz(this.getGui(),n),setRowCount:n=>hz(this.getGui(),n),setTopHeight:n=>t(n,this.eTop),setBottomHeight:n=>t(n,this.eBottom),setTopDisplay:n=>this.eTop.style.display=n,setBottomDisplay:n=>this.eBottom.style.display=n,setStickyTopHeight:n=>this.eStickyTop.style.height=n,setStickyTopTop:n=>this.eStickyTop.style.top=n,setStickyTopWidth:n=>this.eStickyTop.style.width=n,setStickyBottomHeight:n=>this.eStickyBottom.style.height=n,setStickyBottomBottom:n=>this.eStickyBottom.style.bottom=n,setStickyBottomWidth:n=>this.eStickyBottom.style.width=n,setColumnMovingCss:(n,i)=>this.addOrRemoveCssClass(n,i),updateLayoutClasses:(n,i)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(o=>{o.toggle("ag-layout-auto-height",i.autoHeight),o.toggle("ag-layout-normal",i.normal),o.toggle("ag-layout-print",i.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",i.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",i.normal),this.addOrRemoveCssClass("ag-layout-print",i.print)},setAlwaysVerticalScrollClass:(n,i)=>this.eBodyViewport.classList.toggle(O$,i),registerBodyViewportResizeListener:n=>{const i=this.resizeObserverService.observeResize(this.eBodyViewport,n);this.addDestroyFunc(()=>i())},setPinnedTopBottomOverflowY:n=>this.eTop.style.overflowY=this.eBottom.style.overflowY=n,setCellSelectableCss:(n,i)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(s=>s.classList.toggle(n,i))},setBodyViewportWidth:n=>this.eBodyViewport.style.width=n};this.ctrl=this.createManagedBean(new di),this.ctrl.setComp(r,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(this.rangeService&&this.gos.get("enableRangeSelection")||this.gos.get("rowSelection")==="multiple")&&dz(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(t,r){const n=this.eBodyViewport.classList;n.toggle("ag-row-animation",r),n.toggle("ag-row-no-animation",!r)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}};S([F("resizeObserverService")],ea.prototype,"resizeObserverService",2);S([rr("rangeService")],ea.prototype,"rangeService",2);S([Me("eBodyViewport")],ea.prototype,"eBodyViewport",2);S([Me("eStickyTop")],ea.prototype,"eStickyTop",2);S([Me("eStickyBottom")],ea.prototype,"eStickyBottom",2);S([Me("eTop")],ea.prototype,"eTop",2);S([Me("eBottom")],ea.prototype,"eBottom",2);S([Me("gridHeader")],ea.prototype,"headerRootComp",2);S([Me("eBody")],ea.prototype,"eBody",2);S([_e],ea.prototype,"init",1);var Up=class extends Ae{postConstruct(){this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateImpl())}):this.updateImpl()}updateImpl(){const e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t)}setScrollsVisible(e){if(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing){this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing;const r={type:_.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(r)}}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}};S([F("ctrlsService")],Up.prototype,"ctrlsService",2);S([F("columnAnimationService")],Up.prototype,"columnAnimationService",2);S([_e],Up.prototype,"postConstruct",1);Up=S([$e("scrollVisibleService")],Up);var fl=class extends Ae{constructor(){super(...arguments),this.gridInstanceId=fl.gridInstanceSequence.next()}stampTopLevelGridCompWithGridInstance(e){e[fl.GRID_DOM_KEY]=this.gridInstanceId}getRenderedCellForEvent(e){return pw(this.gos,e.target,Cd.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(e){return this.isElementInThisGrid(e.target)}isElementInThisGrid(e){let t=e;for(;t;){const r=t[fl.GRID_DOM_KEY];if(xe(r))return r===this.gridInstanceId;t=t.parentElement}return!1}getCellPositionForEvent(e){const t=this.getRenderedCellForEvent(e);return t?t.getCellPosition():null}getNormalisedPosition(e){const t=this.gos.isDomLayout("normal"),r=e;let n,i;if(r.clientX!=null||r.clientY!=null?(n=r.clientX,i=r.clientY):(n=r.x,i=r.y),t){const s=this.ctrlsService.getGridBodyCtrl(),o=s.getScrollFeature().getVScrollPosition(),a=s.getScrollFeature().getHScrollPosition();n+=a.left,i+=o.top}return{x:n,y:i}}};fl.gridInstanceSequence=new $p;fl.GRID_DOM_KEY="__ag_grid_instance";S([F("ctrlsService")],fl.prototype,"ctrlsService",2);fl=S([$e("mouseEventService")],fl);var ci=class extends Ae{constructor(){super(),this.onPageDown=ST(this.onPageDown,100),this.onPageUp=ST(this.onPageUp,100)}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const r=e.key,n=e.altKey,i=e.ctrlKey||e.metaKey,s=!!this.rangeService&&e.shiftKey,o=this.mouseEventService.getCellPositionForEvent(e);let a=!1;switch(r){case Y.PAGE_HOME:case Y.PAGE_END:!i&&!n&&(this.onHomeOrEndKey(r),a=!0);break;case Y.LEFT:case Y.RIGHT:case Y.UP:case Y.DOWN:if(!o)return!1;i&&!n&&!s&&(this.onCtrlUpDownLeftRight(r,o),a=!0);break;case Y.PAGE_DOWN:case Y.PAGE_UP:!i&&!n&&(a=this.handlePageUpDown(r,o,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,r){return r&&(t=this.focusService.getFocusedCell()),t?(e===Y.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){var t;const{scrollIndex:r,scrollType:n,scrollColumn:i,focusIndex:s,focusColumn:o}=e;xe(i)&&!i.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(i),xe(r)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(r,n),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(s),this.focusService.setFocusedCell({rowIndex:s,column:o,rowPinned:null,forceBrowserFocus:!0}),(t=this.rangeService)==null||t.setRangeToCell({rowIndex:s,rowPinned:null,column:o})}onPageDown(e){const r=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),n=this.getViewportHeight(),i=this.paginationProxy.getPixelOffset(),s=r.top+n,o=this.paginationProxy.getRowIndexAtPixel(s+i);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o):this.navigateToNextPage(e,o)}onPageUp(e){const r=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),n=this.paginationProxy.getPixelOffset(),i=r.top,s=this.paginationProxy.getRowIndexAtPixel(i+n);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,s,!0):this.navigateToNextPage(e,s,!0)}navigateToNextPage(e,t,r=!1){const n=this.getViewportHeight(),i=this.paginationProxy.getPageFirstRow(),s=this.paginationProxy.getPageLastRow(),o=this.paginationProxy.getPixelOffset(),a=this.paginationProxy.getRow(e.rowIndex),l=r?(a==null?void 0:a.rowHeight)-n-o:n-o,c=(a==null?void 0:a.rowTop)+l;let u=this.paginationProxy.getRowIndexAtPixel(c+o);if(u===e.rowIndex){const p=r?-1:1;t=u=e.rowIndex+p}let d;r?(d="bottom",u<i&&(u=i),t<i&&(t=i)):(d="top",u>s&&(u=s),t>s&&(t=s)),this.isRowTallerThanView(u)&&(t=u,d="top"),this.navigateTo({scrollIndex:t,scrollType:d,scrollColumn:null,focusIndex:u,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,r=!1){this.navigateTo({scrollIndex:t,scrollType:r?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const n=this.getNextFocusIndexForAutoHeight(e,r);this.navigateTo({scrollIndex:t,scrollType:r?"bottom":"top",scrollColumn:null,focusIndex:n,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){var r;const n=t?-1:1,i=this.getViewportHeight(),s=this.paginationProxy.getPageLastRow();let o=0,a=e.rowIndex;for(;a>=0&&a<=s;){const l=this.paginationProxy.getRow(a);if(l){const c=(r=l.rowHeight)!=null?r:0;if(o+c>i)break;o+=c}a+=n}return Math.max(0,Math.min(a,s))}getViewportHeight(){const{gridBodyCtrl:e,center:t}=this.ctrlsService.getParams(),r=e.getScrollFeature().getVScrollPosition(),n=this.gos.getScrollbarWidth();let i=r.bottom-r.top;return t.isHorizontalScrollShowing()&&(i-=n),i}isRowTallerThanView(e){const t=this.paginationProxy.getRow(e);if(!t)return!1;const r=t.rowHeight;return typeof r!="number"?!1:r>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const r=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:n,column:i}=r;this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:i,focusIndex:n,focusColumn:i})}onHomeOrEndKey(e){const t=e===Y.PAGE_HOME,r=this.columnModel.getAllDisplayedColumns(),n=t?r[0]:Wt(r),i=t?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:i,scrollType:null,scrollColumn:n,focusIndex:i,focusColumn:n})}onTabKeyDown(e,t){const r=t.shiftKey,n=this.tabToNextCellCommon(e,r,t);if(n!==!1){n&&t.preventDefault();return}if(r){const{rowIndex:i,rowPinned:s}=e.getRowPosition();(s?i===0:i===this.paginationProxy.getPageFirstRow())&&(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof Cd&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(r)&&t.preventDefault()}tabToNextCell(e,t){const r=this.focusService.getFocusedCell();if(!r)return!1;let n=this.getCellByPosition(r);return!n&&(n=this.rowRenderer.getRowByPosition(r),!n||!n.isFullWidth())?!1:!!this.tabToNextCellCommon(n,e,t)}tabToNextCellCommon(e,t,r){let n=e.isEditing();if(!n&&e instanceof Cd){const o=e.getRowCtrl();o&&(n=o.isEditing())}let i;return n?this.gos.get("editType")==="fullRow"?i=this.moveToNextEditingRow(e,t,r):i=this.moveToNextEditingCell(e,t,r):i=this.moveToNextCellNotEditing(e,t),i===null?i:i||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,r=null){const n=e.getCellPosition();e.getGui().focus(),e.stopEditing();const i=this.findNextCellToFocusOn(n,t,!0);return i===!1?null:i==null?!1:(i.startEditing(null,!0,r),i.focusCell(!1),!0)}moveToNextEditingRow(e,t,r=null){const n=e.getCellPosition(),i=this.findNextCellToFocusOn(n,t,!0);if(i===!1)return null;if(i==null)return!1;const s=i.getCellPosition(),o=this.isCellEditable(n),a=this.isCellEditable(s),l=s&&n.rowIndex===s.rowIndex&&n.rowPinned===s.rowPinned;return o&&e.setFocusOutOnEditor(),l||(e.getRowCtrl().stopEditing(),i.getRowCtrl().startRowEditing(void 0,void 0,r)),a?(i.setFocusInOnEditor(),i.focusCell()):i.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const r=this.columnModel.getAllDisplayedColumns();let n;e instanceof wd?n=Sr(tt({},e.getRowPosition()),{column:t?r[0]:Wt(r)}):n=e.getCellPosition();const i=this.findNextCellToFocusOn(n,t,!1);if(i===!1)return null;if(i instanceof Cd)i.focusCell(!0);else if(i)return this.tryToFocusFullWidthRow(i.getRowPosition(),t);return xe(i)}findNextCellToFocusOn(e,t,r){var n;let i=e;for(;;){e!==i&&(e=i),t||(i=this.getLastCellOfColSpan(i)),i=this.cellNavigationService.getNextTabbedCell(i,t);const s=this.gos.getCallback("tabToNextCell");if(xe(s)){const c=s({backwards:t,editing:r,previousCellPosition:e,nextCellPosition:i||null});if(c===!0||c===null)c===null&&ot("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),i=e;else{if(c===!1)return!1;c.floating&&(ot("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),c.rowPinned=c.floating),i={rowIndex:c.rowIndex,column:c.column,rowPinned:c.rowPinned}}}if(!i)return null;if(i.rowIndex<0){const l=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+i.rowIndex,column:i.column},fromCell:!0}),null}const o=this.gos.get("editType")==="fullRow";if(r&&!o&&!this.isCellEditable(i))continue;this.ensureCellVisible(i);const a=this.getCellByPosition(i);if(!a){const l=this.rowRenderer.getRowByPosition(i);if(!l||!l.isFullWidth()||r)continue;return l}if(!a.isSuppressNavigable())return(n=this.rangeService)==null||n.setRangeToCell(i),a}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}getCellByPosition(e){const t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.paginationProxy.getRow(e.rowIndex)}navigateToNextCell(e,t,r,n){let i=r,s=!1;for(;i&&(i===r||!this.isValidNavigateCell(i));)this.gos.get("enableRtl")?t===Y.LEFT&&(i=this.getLastCellOfColSpan(i)):t===Y.RIGHT&&(i=this.getLastCellOfColSpan(i)),i=this.cellNavigationService.getNextCellToFocus(t,i),s=gt(i);if(s&&e&&e.key===Y.UP&&(i={rowIndex:-1,rowPinned:null,column:r.column}),n){const a=this.gos.getCallback("navigateToNextCell");if(xe(a)){const c=a({key:t,previousCellPosition:r,nextCellPosition:i||null,event:e});xe(c)?(c.floating&&(ot("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),c.rowPinned=c.floating),i={rowPinned:c.rowPinned,rowIndex:c.rowIndex,column:c.column}):i=null}}if(!i)return;if(i.rowIndex<0){const a=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+i.rowIndex,column:r.column},event:e||void 0,fromCell:!0});return}const o=this.getNormalisedPosition(i);o?this.focusPosition(o):this.tryToFocusFullWidthRow(i)}getNormalisedPosition(e){this.ensureCellVisible(e);const t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t=!1){const r=this.columnModel.getAllDisplayedColumns(),n=this.rowRenderer.getRowByPosition(e);if(!n||!n.isFullWidth())return!1;const i=this.focusService.getFocusedCell(),s={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?Wt(r):r[0])};this.focusPosition(s);const o=i!=null?this.rowPositionUtils.before(s,i):!1,a={type:_.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:s.column,isFullWidthCell:!0,floating:s.rowPinned,fromBelow:o};return this.eventService.dispatchEvent(a),!0}focusPosition(e){var t;this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),(t=this.rangeService)==null||t.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){const t=this.getCellByPosition(e);if(!t)return e;const r=t.getColSpanningList();return r.length===1?e:{rowIndex:e.rowIndex,column:Wt(r),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=this.gos.isGroupRowsSticky(),r=this.rowModel.getRow(e.rowIndex);!(t&&(r==null?void 0:r.sticky))&&gt(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}};S([F("mouseEventService")],ci.prototype,"mouseEventService",2);S([F("paginationProxy")],ci.prototype,"paginationProxy",2);S([F("focusService")],ci.prototype,"focusService",2);S([F("columnModel")],ci.prototype,"columnModel",2);S([F("rowModel")],ci.prototype,"rowModel",2);S([F("ctrlsService")],ci.prototype,"ctrlsService",2);S([F("rowRenderer")],ci.prototype,"rowRenderer",2);S([F("headerNavigationService")],ci.prototype,"headerNavigationService",2);S([F("rowPositionUtils")],ci.prototype,"rowPositionUtils",2);S([F("cellNavigationService")],ci.prototype,"cellNavigationService",2);S([F("pinnedRowModel")],ci.prototype,"pinnedRowModel",2);S([rr("rangeService")],ci.prototype,"rangeService",2);S([_e],ci.prototype,"postConstruct",1);ci=S([$e("navigationService")],ci);var wk=class V$ extends uh{constructor(t){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=t}postConstruct(){this.gos.setDomData(this.getGui(),V$.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()}addKeyDownListener(){const t=this.getGui(),r=this.params,n=i=>{vw(this.gos,i,r.node,r.column,!0)||r.onKeyDown(i)};this.addManagedListener(t,"keydown",n)}};wk.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper";S([_e],wk.prototype,"postConstruct",1);var H$=wk,pJ=class extends mt{constructor(t,r,n,i,s){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=t,this.column=r.getColumn(),this.rowNode=r.getRowNode(),this.rowCtrl=r.getRowCtrl(),this.eRow=i,this.cellCtrl=r;const o=document.createElement("div");o.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(o);const a=this.getGui();this.forceWrapper=r.isForceWrapper(),this.refreshWrapper(!1);const l=(d,p)=>{p!=null&&p!=""?a.setAttribute(d,p):a.removeAttribute(d)};Gr(a,r.getCellAriaRole()),l("col-id",r.getColumnIdSanitised());const c=r.getTabIndex();c!==void 0&&l("tabindex",c.toString());const u={addOrRemoveCssClass:(d,p)=>this.addOrRemoveCssClass(d,p),setUserStyles:d=>tk(a,d),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:d=>this.includeSelection=d,setIncludeRowDrag:d=>this.includeRowDrag=d,setIncludeDndSource:d=>this.includeDndSource=d,setRenderDetails:(d,p,f)=>this.setRenderDetails(d,p,f),setEditDetails:(d,p,f)=>this.setEditDetails(d,p,f),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};r.setComp(u,this.getGui(),this.eCellWrapper,n,s)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(t,r,n){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;const s=this.refreshWrapper(!1);this.refreshEditStyles(!1),t?!(n||s)&&this.refreshCellRenderer(t)||(this.destroyRenderer(),this.createCellRendererInstance(t)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(r))}setEditDetails(t,r,n){t?this.createCellEditorInstance(t,r,n):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(t){const r=this.includeRowDrag||this.includeDndSource||this.includeSelection,n=r||this.forceWrapper,i=n&&this.eCellWrapper==null;if(i){const u=document.createElement("div");u.setAttribute("role","presentation"),u.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=u,this.getGui().appendChild(this.eCellWrapper)}const s=!n&&this.eCellWrapper!=null;s&&(jo(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!n);const o=!t&&n,a=o&&this.eCellValue==null;if(a){const u=document.createElement("span");u.setAttribute("role","presentation"),u.setAttribute("class","ag-cell-value"),this.eCellValue=u,this.eCellWrapper.appendChild(this.eCellValue)}const l=!o&&this.eCellValue!=null;l&&(jo(this.eCellValue),this.eCellValue=void 0);const c=i||s||a||l;return c&&this.removeControls(),t||r&&this.addControls(),c}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(t,r,n){const i=this.editorVersion,s=t.newAgStackInstance();if(!s)return;const{params:o}=t;s.then(l=>this.afterCellEditorCreated(i,l,o,r,n)),gt(this.cellEditor)&&o.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(t){const r=this.getParentOfValue();Zr(r);const n=t!=null?sn(t,!0):null;n!=null&&(r.textContent=n)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){const{context:t}=this.beans;this.cellRenderer=t.destroyBean(this.cellRenderer),jo(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){const{context:t}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=t.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=t.destroyBean(this.cellEditorPopupWrapper),jo(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(t){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==t.componentClass)return!1;const r=this.cellRenderer.refresh(t.params);return r===!0||r===void 0}createCellRendererInstance(t){const n=!this.beans.gos.get("suppressAnimationFrame"),i=this.rendererVersion,{componentClass:s}=t,o=()=>{if(this.rendererVersion!==i||!this.isAlive())return;const l=t.newAgStackInstance(),c=this.afterCellRendererCreated.bind(this,i,s);l&&l.then(c)};n&&this.firstRender?this.beans.animationFrameService.createTask(o,this.rowNode.rowIndex,"createTasksP2"):o()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(t,r,n){if(!this.isAlive()||t!==this.rendererVersion){this.beans.context.destroyBean(n);return}if(this.cellRenderer=n,this.cellRendererClass=r,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){const s=this.getParentOfValue();Zr(s),s.appendChild(this.cellRendererGui)}}afterCellEditorCreated(t,r,n,i,s){if(t!==this.editorVersion){this.beans.context.destroyBean(r);return}if(r.isCancelBeforeStart&&r.isCancelBeforeStart()){this.beans.context.destroyBean(r),this.cellCtrl.stopEditing(!0);return}if(!r.getGui){console.warn(`AG Grid: cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(r);return}this.cellEditor=r,this.cellEditorGui=r.getGui();const l=i||r.isPopup!==void 0&&r.isPopup();l?this.addPopupCellEditor(n,s):this.addInCellEditor(),this.refreshEditStyles(!0,l),r.afterGuiAttached&&r.afterGuiAttached()}refreshEditStyles(t,r){var n;this.addOrRemoveCssClass("ag-cell-inline-editing",t&&!r),this.addOrRemoveCssClass("ag-cell-popup-editing",t&&!!r),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!t||!!r),(n=this.rowCtrl)==null||n.setInlineEditingCss(t)}addInCellEditor(){const t=this.getGui();t.contains(this.beans.gos.getActiveDomElement())&&t.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(t,r){this.beans.gos.get("editType")==="fullRow"&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");const n=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new H$(t));const i=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&i.appendChild(this.cellEditorGui);const s=this.beans.popupService,o=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),a=r??(n.getPopupPosition?n.getPopupPosition():"over"),l=this.beans.gos.get("enableRtl"),c={ePopup:i,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:a,alignSide:l?"right":"left",keepWithinBounds:!0},u=s.positionPopupByComponent.bind(s,c),d=this.beans.localeService.getLocaleTextFunc(),p=s.addPopup({modal:o,eChild:i,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:u,ariaLabel:d("ariaLabelCellEditor","Cell Editor")});p&&(this.hideEditorPopup=p.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){const t=this.getGui();t.contains(this.beans.gos.getActiveDomElement())&&UD()&&t.focus({preventScroll:!0}),Zr(this.getParentOfValue())}},fJ=class extends mt{constructor(t,r,n){super(),this.cellComps={},this.beans=r,this.rowCtrl=t;const i=document.createElement("div");i.setAttribute("comp-id",`${this.getCompId()}`),i.setAttribute("style",this.getInitialStyle(n)),this.setTemplateFromElement(i);const s=this.getGui(),o=s.style;this.domOrder=this.rowCtrl.getDomOrder(),Gr(s,"row");const a=this.rowCtrl.getTabIndex();a!=null&&s.setAttribute("tabindex",a.toString());const l={setDomOrder:c=>this.domOrder=c,setCellCtrls:c=>this.setCellCtrls(c),showFullWidth:c=>this.showFullWidth(c),getFullWidthCellRenderer:()=>this.getFullWidthCellRenderer(),addOrRemoveCssClass:(c,u)=>this.addOrRemoveCssClass(c,u),setUserStyles:c=>tk(s,c),setTop:c=>o.top=c,setTransform:c=>o.transform=c,setRowIndex:c=>s.setAttribute("row-index",c),setRowId:c=>s.setAttribute("row-id",c),setRowBusinessKey:c=>s.setAttribute("row-business-key",c),refreshFullWidth:c=>this.refreshFullWidth(c)};t.setComp(l,this.getGui(),n),this.addDestroyFunc(()=>{t.unsetComp(n)})}getInitialStyle(t){const r=this.rowCtrl.getInitialTransform(t);return r?`transform: ${r}`:`top: ${this.rowCtrl.getInitialRowTop(t)}`}showFullWidth(t){const r=i=>{if(this.isAlive()){const s=i.getGui();this.getGui().appendChild(s),this.rowCtrl.setupDetailRowAutoHeight(s),this.setFullWidthRowComp(i)}else this.beans.context.destroyBean(i)},n=t.newAgStackInstance();n&&n.then(r)}setCellCtrls(t){const r=Object.assign({},this.cellComps);t.forEach(i=>{const s=i.getInstanceId();this.cellComps[s]==null?this.newCellComp(i):r[s]=null});const n=Zc(r).filter(i=>i!=null);this.destroyCells(n),this.ensureDomOrder(t)}ensureDomOrder(t){if(!this.domOrder)return;const r=[];t.forEach(n=>{const i=this.cellComps[n.getInstanceId()];i&&r.push(i.getGui())}),ek(this.getGui(),r)}newCellComp(t){const r=new pJ(this.beans,t,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[t.getInstanceId()]=r,this.getGui().appendChild(r.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){const t=Zc(this.cellComps).filter(r=>r!=null);this.destroyCells(t)}setFullWidthRowComp(t){this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=t,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}getFullWidthCellRenderer(){return this.fullWidthCellRenderer}destroyCells(t){t.forEach(r=>{if(!r)return;const n=r.getCtrl().getInstanceId();this.cellComps[n]===r&&(r.detach(),r.destroy(),this.cellComps[n]=null)})}refreshFullWidth(t){const{fullWidthCellRenderer:r}=this;if(!r||!r.refresh)return!1;const n=t();return r.refresh(n)}};function gJ(){const e=mt.elementGettingCreated.getAttribute("name"),t=ww.getRowContainerCssClasses(e);let r;return e==="center"||e==="topCenter"||e==="stickyTopCenter"||e==="bottomCenter"||e==="stickyBottomCenter"?r=`<div class="${t.viewport}" ref="eViewport" role="presentation">
                <div class="${t.container}" ref="eContainer"></div>
            </div>`:r=`<div class="${t.container}" ref="eContainer"></div>`,r}var Sf=class extends mt{constructor(){super(gJ()),this.rowComps={},this.name=mt.elementGettingCreated.getAttribute("name"),this.type=j$(this.name)}postConstruct(){const t={setViewportHeight:n=>this.eViewport.style.height=n,setRowCtrls:({rowCtrls:n})=>this.setRowCtrls(n),setDomOrder:n=>{this.domOrder=n},setContainerWidth:n=>this.eContainer.style.width=n};this.createManagedBean(new ww(this.name)).setComp(t,this.eContainer,this.eViewport)}preDestroy(){this.setRowCtrls([])}setRowCtrls(t){const r=tt({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;const n=i=>{const s=i.getInstanceId(),o=r[s];if(o)this.rowComps[s]=o,delete r[s],this.ensureDomOrder(o.getGui());else{if(!i.getRowNode().displayed)return;const a=new fJ(i,this.beans,this.type);this.rowComps[s]=a,this.appendRow(a.getGui())}};t.forEach(n),Zc(r).forEach(i=>{this.eContainer.removeChild(i.getGui()),i.destroy()}),Gr(this.eContainer,"rowgroup")}appendRow(t){this.domOrder?_z(this.eContainer,t,this.lastPlacedElement):this.eContainer.appendChild(t),this.lastPlacedElement=t}ensureDomOrder(t){this.domOrder&&(JD(this.eContainer,t,this.lastPlacedElement),this.lastPlacedElement=t)}};S([F("beans")],Sf.prototype,"beans",2);S([Me("eViewport")],Sf.prototype,"eViewport",2);S([Me("eContainer")],Sf.prototype,"eContainer",2);S([_e],Sf.prototype,"postConstruct",1);S([Ni],Sf.prototype,"preDestroy",1);var bk=class{constructor(e){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach(r=>{r.isPrimary()&&(r.isAnyFunctionActive()||(r.isAllowValue()?this.columnsToAggregate.push(r):r.isAllowRowGroup()?this.columnsToGroup.push(r):r.isAllowPivot()&&this.columnsToPivot.push(r)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?Ct.ICON_PINNED:Ct.ICON_MOVE:null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}};S([F("columnModel")],bk.prototype,"columnModel",2);S([F("gridOptionsService")],bk.prototype,"gos",2);var bd=class{static attemptMoveColumns(e){const{isFromHeader:t,hDirection:r,xPosition:n,fromEnter:i,fakeEvent:s,pinned:o,gos:a,columnModel:l}=e,c=r===0,u=r===1;let{allMovingColumns:d}=e;if(t){let E=[];d.forEach(I=>{var k;let P=null,A=I.getParent();for(;A!=null&&A.getDisplayedLeafColumns().length===1;)P=A,A=A.getParent();P!=null?(!!((k=P.getColGroupDef())!=null&&k.marryChildren)?P.getProvidedColumnGroup().getLeafColumns():P.getLeafColumns()).forEach(M=>{E.includes(M)||E.push(M)}):E.includes(I)||E.push(I)}),d=E}const p=d.slice();l.sortColumnsLikeGridColumns(p);const f=this.calculateValidMoves({movingCols:p,draggingRight:u,xPosition:n,pinned:o,gos:a,columnModel:l}),m=this.calculateOldIndex(p,l);if(f.length===0)return;const y=f[0];let C=m!==null&&!i;if(t&&(C=m!==null),C&&!s&&(c&&y>=m||u&&y<=m))return;const w=l.getAllDisplayedColumns();let b=[],x=null;for(let E=0;E<f.length;E++){const I=f[E],k=l.getProposedColumnOrder(p,I);if(!l.doesOrderPassRules(k))continue;const P=k.filter(D=>w.includes(D));if(x===null)x=P;else if(!Ca(P,x))break;const A=this.groupFragCount(k);b.push({move:I,fragCount:A})}if(b.length!==0)return b.sort((E,I)=>E.fragCount-I.fragCount),this.moveColumns(d,b[0].move,"uiColumnMoved",!1,l)}static moveColumns(e,t,r,n,i){return i.moveColumns(e,t,r,n),n?null:{columns:e,toIndex:t}}static calculateOldIndex(e,t){const r=t.getAllGridColumns(),n=H4(e.map(l=>r.indexOf(l))),i=n[0];return Wt(n)-i!==n.length-1?null:i}static groupFragCount(e){function t(n){let i=[],s=n.getOriginalParent();for(;s!=null;)i.push(s),s=s.getOriginalParent();return i}let r=0;for(let n=0;n<e.length-1;n++){let i=t(e[n]),s=t(e[n+1]);[i,s]=i.length>s.length?[i,s]:[s,i],i.forEach(o=>{s.indexOf(o)===-1&&r++})}return r}static getDisplayedColumns(e,t){switch(t){case"left":return e.getDisplayedLeftColumns();case"right":return e.getDisplayedRightColumns();default:return e.getDisplayedCenterColumns()}}static calculateValidMoves(e){const{movingCols:t,draggingRight:r,xPosition:n,pinned:i,gos:s,columnModel:o}=e;if(s.get("suppressMovableColumns")||t.some(b=>b.getColDef().suppressMovable))return[];const l=this.getDisplayedColumns(o,i),c=o.getAllGridColumns(),u=l.filter(b=>Ps(t,b)),d=l.filter(b=>!Ps(t,b)),p=c.filter(b=>!Ps(t,b));let f=0,m=n;if(r){let b=0;u.forEach(x=>b+=x.getActualWidth()),m-=b}if(m>0){for(let b=0;b<d.length;b++){const x=d[b];if(m-=x.getActualWidth(),m<0)break;f++}r&&f++}let y;if(f>0){const b=d[f-1];y=p.indexOf(b)+1}else y=p.indexOf(d[0]),y===-1&&(y=0);const C=[y],w=(b,x)=>b-x;if(r){let b=y+1;const x=c.length-1;for(;b<=x;)C.push(b),b++;C.sort(w)}else{let b=y;const x=c.length-1;let E=c[b];for(;b<=x&&l.indexOf(E)<0;)b++,C.push(b),E=c[b];b=y-1;const I=0;for(;b>=I;)C.push(b),b--;C.sort(w).reverse()}return C}static normaliseX(e,t,r,n,i){const s=i.getHeaderRowContainerCtrl(t).getViewport();return r&&(e-=s.getBoundingClientRect().left),n.get("enableRtl")&&(e=s.clientWidth-e),t==null&&(e+=i.get("center").getCenterViewportScrollLeft()),e}},xf=class{constructor(e){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!xe(e)}init(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){return this.pinned?Ct.ICON_PINNED:Ct.ICON_MOVE}onDragEnter(e){const t=e.dragItem.columns;if(e.dragSource.type===0)this.setColumnsVisible(t,!0,"uiColumnDragged");else{const n=e.dragItem.visibleState,i=(t||[]).filter(s=>n[s.getId()]);this.setColumnsVisible(i,!0,"uiColumnDragged")}this.setColumnsPinned(t,this.pinned,"uiColumnDragged"),this.onDragging(e,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,r){if(e){const n=e.filter(i=>!i.getColDef().lockVisible);this.columnModel.setColumnsVisible(n,t,r)}}setColumnsPinned(e,t,r){if(e){const n=e.filter(i=>!i.getColDef().lockPinned);this.columnModel.setColumnsPinned(n,t,r)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}checkCenterForScrolling(e){if(this.isCenterContainer){const t=this.ctrlsService.get("center"),r=t.getCenterViewportScrollLeft(),n=r+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<r+50,this.needToMoveLeft=e>n-50):(this.needToMoveLeft=e<r+50,this.needToMoveRight=e>n-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(e=this.lastDraggingEvent,t=!1,r=!1,n=!1){var i;if(n){if(this.lastMovedInfo){const{columns:u,toIndex:d}=this.lastMovedInfo;bd.moveColumns(u,d,"uiColumnMoved",!0,this.columnModel)}return}if(this.lastDraggingEvent=e,gt(e.hDirection))return;const s=bd.normaliseX(e.x,this.pinned,!1,this.gos,this.ctrlsService);t||this.checkCenterForScrolling(s);const o=this.normaliseDirection(e.hDirection),a=e.dragSource.type,l=((i=e.dragSource.getDragItem().columns)==null?void 0:i.filter(u=>u.getColDef().lockPinned?u.getPinned()==this.pinned:!0))||[],c=bd.attemptMoveColumns({allMovingColumns:l,isFromHeader:a===1,hDirection:o,xPosition:s,pinned:this.pinned,fromEnter:t,fakeEvent:r,gos:this.gos,columnModel:this.columnModel});c&&(this.lastMovedInfo=c)}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0;default:console.error(`AG Grid: Unknown direction ${e}`)}else return e}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(Ct.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(Ct.ICON_RIGHT,!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(Ct.ICON_MOVE))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*5,e>100&&(e=100);let t=null;const r=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=r.scrollHorizontally(-e):this.needToMoveRight&&(t=r.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const i=this.lastDraggingEvent.dragItem.columns.filter(s=>!s.getColDef().lockPinned);if(i.length>0&&(this.dragAndDropService.setGhostIcon(Ct.ICON_PINNED),this.failedMoveAttempts>7)){const s=this.needToMoveLeft?"left":"right";this.setColumnsPinned(i,s,"uiColumnDragged"),this.dragAndDropService.nudge()}}}};S([F("columnModel")],xf.prototype,"columnModel",2);S([F("dragAndDropService")],xf.prototype,"dragAndDropService",2);S([F("gridOptionsService")],xf.prototype,"gos",2);S([F("ctrlsService")],xf.prototype,"ctrlsService",2);S([_e],xf.prototype,"init",1);var Ef=class extends Ae{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]];break}})}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}init(){this.moveColumnFeature=this.createManagedBean(new xf(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new bk(this.pinned)),this.dragAndDropService.addDropTarget(this)}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}};S([F("dragAndDropService")],Ef.prototype,"dragAndDropService",2);S([F("columnModel")],Ef.prototype,"columnModel",2);S([F("ctrlsService")],Ef.prototype,"ctrlsService",2);S([_e],Ef.prototype,"postConstruct",1);S([_e],Ef.prototype,"init",1);var Pf=class z$ extends vk{constructor(t){super(z$.TEMPLATE,t),this.headerCompVersion=0,this.column=t.getColumnGroupChild(),this.pinned=t.getPinned()}postConstruct(){const t=this.getGui();((s,o)=>{o!=null&&o!=""?t.setAttribute(s,o):t.removeAttribute(s)})("col-id",this.column.getColId());const n={setWidth:s=>t.style.width=s,addOrRemoveCssClass:(s,o)=>this.addOrRemoveCssClass(s,o),setAriaSort:s=>s?gz(t,s):mz(t),setUserCompDetails:s=>this.setUserCompDetails(s),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(n,this.getGui(),this.eResize,this.eHeaderCompWrapper);const i=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",i)}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(t){this.headerCompVersion++;const r=this.headerCompVersion;t.newAgStackInstance().then(n=>this.afterCompCreated(r,n))}afterCompCreated(t,r){if(t!=this.headerCompVersion||!this.isAlive()){this.destroyBean(r);return}this.destroyHeaderComp(),this.headerComp=r,this.headerCompGui=r.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}};Pf.TEMPLATE=`<div class="ag-header-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`;S([Me("eResize")],Pf.prototype,"eResize",2);S([Me("eHeaderCompWrapper")],Pf.prototype,"eHeaderCompWrapper",2);S([_e],Pf.prototype,"postConstruct",1);S([Ni],Pf.prototype,"destroyHeaderComp",1);var mJ=Pf,XS=class $$ extends vk{constructor(t){super($$.TEMPLATE,t)}postConstruct(){const t=this.getGui(),r=(i,s)=>s!=null?t.setAttribute(i,s):t.removeAttribute(i);t.setAttribute("col-id",this.ctrl.getColId());const n={addOrRemoveCssClass:(i,s)=>this.addOrRemoveCssClass(i,s),setResizableDisplayed:i=>jt(this.eResize,i),setWidth:i=>t.style.width=i,setAriaExpanded:i=>r("aria-expanded",i),setUserCompDetails:i=>this.setUserCompDetails(i),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(n,t,this.eResize)}setUserCompDetails(t){t.newAgStackInstance().then(r=>this.afterHeaderCompCreated(r))}afterHeaderCompCreated(t){const r=()=>this.destroyBean(t);if(!this.isAlive()){r();return}const n=this.getGui(),i=t.getGui();n.appendChild(i),this.addDestroyFunc(r),this.headerGroupComp=t,this.ctrl.setDragSource(n)}};XS.TEMPLATE=`<div class="ag-header-group-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`;S([Me("eResize")],XS.prototype,"eResize",2);S([_e],XS.prototype,"postConstruct",1);var vJ=XS,LT=(e=>(e.COLUMN_GROUP="group",e.COLUMN="column",e.FLOATING_FILTER="filter",e))(LT||{}),Sk=class extends mt{constructor(t){super(),this.headerComps={},this.ctrl=t,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}init(){jD(this.getGui(),this.ctrl.getAriaRowIndex());const t={setHeight:r=>this.getGui().style.height=r,setTop:r=>this.getGui().style.top=r,setHeaderCtrls:(r,n)=>this.setHeaderCtrls(r,n),setWidth:r=>this.getGui().style.width=r};this.ctrl.setComp(t)}destroyHeaderCtrls(){this.setHeaderCtrls([],!1)}setHeaderCtrls(t,r){if(!this.isAlive())return;const n=this.headerComps;if(this.headerComps={},t.forEach(i=>{const s=i.getInstanceId();let o=n[s];delete n[s],o==null&&(o=this.createHeaderComp(i),this.getGui().appendChild(o.getGui())),this.headerComps[s]=o}),oi(n,(i,s)=>{this.getGui().removeChild(s.getGui()),this.destroyBean(s)}),r){const i=Zc(this.headerComps);i.sort((o,a)=>{const l=o.getCtrl().getColumnGroupChild().getLeft(),c=a.getCtrl().getColumnGroupChild().getLeft();return l-c});const s=i.map(o=>o.getGui());ek(this.getGui(),s)}}createHeaderComp(t){let r;switch(this.ctrl.getType()){case"group":r=new vJ(t);break;case"filter":r=new OZ(t);break;default:r=new mJ(t);break}return this.createBean(r),r.setParentComponent(this),r}};S([_e],Sk.prototype,"init",1);S([Ni],Sk.prototype,"destroyHeaderCtrls",1);var yJ=0,zl=class U$ extends Ae{constructor(t,r,n){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=t,this.parentRowCtrl=n,this.beans=r,this.instanceId=t.getUniqueId()+"-"+yJ++}postConstruct(){this.addManagedPropertyListeners(["suppressHeaderFocus"],()=>this.refreshTabIndex())}shouldStopEventPropagation(t){const{headerRowIndex:r,column:n}=this.focusService.getFocusedHeader();return jz(this.gos,t,r,n)}getWrapperHasFocus(){return this.gos.getActiveDomElement()===this.eGui}setGui(t){this.eGui=t,this.addDomData(),this.addManagedListener(this.beans.eventService,_.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onDisplayedColumnsChanged(){!this.comp||!this.column||(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())}refreshFirstAndLastStyles(){const{comp:t,column:r,beans:n}=this;qS.refreshFirstAndLastStyles(t,r,n.columnModel)}refreshAriaColIndex(){const{beans:t,column:r}=this,n=t.columnModel.getAriaColumnIndex(r);BD(this.eGui,n)}addResizeAndMoveKeyboardListeners(){this.resizeFeature&&(this.addManagedListener(this.eGui,"keydown",this.onGuiKeyDown.bind(this)),this.addManagedListener(this.eGui,"keyup",this.onGuiKeyUp.bind(this)))}refreshTabIndex(){this.gos.get("suppressHeaderFocus")?this.eGui.removeAttribute("tabindex"):this.eGui.setAttribute("tabindex","-1")}onGuiKeyDown(t){var r;const n=this.gos.getActiveDomElement(),i=t.key===Y.LEFT||t.key===Y.RIGHT;if(this.isResizing&&(t.preventDefault(),t.stopImmediatePropagation()),n!==this.eGui||!t.shiftKey&&!t.altKey||((this.isResizing||i)&&(t.preventDefault(),t.stopImmediatePropagation()),!i))return;const s=t.key===Y.LEFT!==this.gos.get("enableRtl"),o=m$[s?"Left":"Right"];if(t.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const a=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(a,t.shiftKey),(r=this.resizeFeature)==null||r.toggleColumnResizing(!0)}else this.moveHeader(o)}getViewportAdjustedResizeDiff(t){let r=this.getResizeDiff(t);if(this.column.getPinned()){const i=this.pinnedWidthService.getPinnedLeftWidth(),s=this.pinnedWidthService.getPinnedRightWidth(),o=ah(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(i+s+r>o)if(o>i+s)r=o-i-s;else return 0}return r}getResizeDiff(t){let r=t.key===Y.LEFT!==this.gos.get("enableRtl");const n=this.column.getPinned(),i=this.gos.get("enableRtl");return n&&i!==(n==="right")&&(r=!r),(r?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=setTimeout(()=>{var t;(t=this.resizeFeature)==null||t.toggleColumnResizing(!1)},150))}handleKeyDown(t){const r=this.getWrapperHasFocus();switch(t.key){case Y.PAGE_DOWN:case Y.PAGE_UP:case Y.PAGE_HOME:case Y.PAGE_END:r&&t.preventDefault()}}addDomData(){const t=U$.DOM_DATA_KEY_HEADER_CTRL;this.gos.setDomData(this.eGui,t,this),this.addDestroyFunc(()=>this.gos.setDomData(this.eGui,t,null))}getGui(){return this.eGui}focus(t){return this.eGui?(this.lastFocusEvent=t||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(t,r,n){const i=t??r;this.gos.get("preventDefaultOnContextMenu")&&i.preventDefault();const s=n instanceof ar?n:void 0;this.menuService.isHeaderContextMenuEnabled(s)&&this.menuService.showHeaderContextMenu(s,t,r),this.dispatchColumnMouseEvent(_.EVENT_COLUMN_HEADER_CONTEXT_MENU,n)}dispatchColumnMouseEvent(t,r){const n={type:t,column:r};this.eventService.dispatchEvent(n)}destroy(){super.destroy(),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null}};zl.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";S([F("pinnedWidthService")],zl.prototype,"pinnedWidthService",2);S([F("focusService")],zl.prototype,"focusService",2);S([F("userComponentFactory")],zl.prototype,"userComponentFactory",2);S([F("ctrlsService")],zl.prototype,"ctrlsService",2);S([F("dragAndDropService")],zl.prototype,"dragAndDropService",2);S([F("menuService")],zl.prototype,"menuService",2);S([_e],zl.prototype,"postConstruct",1);var ZS=zl,JS=class extends Ae{constructor(e,t,r,n){super(),this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=n,this.beans=r}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?Wt(this.colsSpanning):this.columnOrGroup}postConstruct(){this.addManagedListener(this.columnOrGroup,ar.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))}setLeftFirstTime(){const e=this.beans.gos.get("suppressColumnMoveAnimation"),t=xe(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=e.getLeft(),r=e.getOldLeft(),n=this.modifyLeftForPrintLayout(e,r),i=this.modifyLeftForPrintLayout(e,t);this.setLeft(n),this.actualLeft=i,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===i&&this.setLeft(i)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!this.beans.gos.isDomLayout("print")||e.getPinned()==="left")return t;const n=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(e.getPinned()==="right"){const i=this.beans.columnModel.getBodyContainerWidth();return n+i+t}return n+t}setLeft(e){if(xe(e)&&(this.eCell.style.left=`${e}px`),this.columnOrGroup instanceof ar)this.columnOrGroup;else{const r=this.columnOrGroup.getLeafColumns();if(!r.length)return;r.length>1&&fz(this.ariaEl,r.length),r[0]}}};S([_e],JS.prototype,"postConstruct",1);var ly=class extends Ae{constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}};S([F("columnHoverService")],ly.prototype,"columnHoverService",2);S([_e],ly.prototype,"postConstruct",1);var CJ=class extends ZS{constructor(e,t,r){super(e,t,r),this.iconCreated=!1,this.column=e}setComp(e,t,r,n){this.comp=e,this.eButtonShowMainFilter=r,this.eFloatingFilterBody=n,this.setGui(t),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,ar.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))}resizeHeader(){}moveHeader(){}setupActive(){const e=this.column.getColDef(),t=!!e.filter,r=!!e.floatingFilter;this.active=t&&r}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=kr("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(){this.createManagedBean(new gu(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.localeService.getLocaleTextFunc();As(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(this.gos.getActiveDomElement()===this.eGui)return;const n=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(n){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),n.focus();return}const i=this.findNextColumnWithFloatingFilter(e.shiftKey);i&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:i},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.columnModel;let r=this.column;do if(r=e?t.getDisplayedColBefore(r):t.getDisplayedColAfter(r),!r)break;while(!r.getColDef().filter||!r.getColDef().floatingFilter);return r}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case Y.UP:case Y.DOWN:t||e.preventDefault();case Y.LEFT:case Y.RIGHT:if(t)return;e.stopPropagation();case Y.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case Y.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const r=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),n=!!e.relatedTarget&&vd(e.relatedTarget,"ag-floating-filter");if(r&&n&&e.target===this.eGui){const s=this.lastFocusEvent,o=!!(s&&s.key===Y.TAB);if(s&&o){const a=s.shiftKey;this.focusService.focusInto(this.eGui,a)}}const i=this.getRowIndex();this.beans.focusService.setFocusedHeader(i,this.column)}setupHover(){this.createManagedBean(new ly([this.column],this.eGui));const e=()=>{if(!this.gos.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedListener(this.eventService,_.EVENT_COLUMN_HOVER_CHANGED,e),e()}setupLeft(){const e=new JS(this.column,this.eGui,this.beans);this.createManagedBean(e)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;const e=this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(){if(!this.active)return;const{filterManager:e}=this.beans,t=r=>{if((r==null?void 0:r.source)==="filterDestroyed"&&this.context.isDestroyed())return;const n=this.comp.getFloatingFilterComp();n&&n.then(i=>{var s;if(i){const o=e.getCurrentFloatingFilterParentModel(this.column);i.onParentModelChanged(o,r?this.gos.addGridCommonParams({columns:(s=r.columns)!=null?s:[],type:_.EVENT_FILTER_CHANGED,source:r.source==="api"?"api":"columnFilter"}):null)}})};this.destroySyncListener=this.addManagedListener(this.column,ar.EVENT_FILTER_CHANGED,t),e.isFilterActive(this.column)&&t(null)}setupWidth(){const e=()=>{const t=`${this.column.getActualWidth()}px`;this.comp.setWidth(t)};this.addManagedListener(this.column,ar.EVENT_WIDTH_CHANGED,e),e()}setupFilterChangedListener(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,ar.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const e=this.beans.filterManager.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(){var e,t;const r=this.active;this.setupActive();const n=!r&&this.active;r&&!this.active&&((e=this.destroySyncListener)==null||e.call(this),(t=this.destroyFilterChangedListener)==null||t.call(this));const i=this.active?this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,s=this.comp.getFloatingFilterComp();!s||!i?this.updateCompDetails(i,n):s.then(o=>{var a;!o||this.beans.filterManager.areFilterCompsDifferent((a=this.userCompDetails)!=null?a:null,i)?this.updateCompDetails(i,n):this.updateFloatingFilterParams(i)})}updateCompDetails(e,t){this.isAlive()&&(this.setCompDetails(e),this.setupFilterButton(),this.setupUi(),t&&(this.setupSyncWithFilter(),this.setupFilterChangedListener()))}updateFloatingFilterParams(e){var t;if(!e)return;const r=e.params;(t=this.comp.getFloatingFilterComp())==null||t.then(n=>{let i=!1;n!=null&&n.refresh&&typeof n.refresh=="function"&&n.refresh(r)!==null&&(i=!0),!i&&(n!=null&&n.onParamsUpdated)&&typeof n.onParamsUpdated=="function"&&n.onParamsUpdated(r)!==null&&ot("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null}},Rf=class extends Ae{constructor(e,t,r,n,i){super(),this.pinned=e,this.column=t,this.eResize=r,this.comp=n,this.ctrl=i}postConstruct(){const e=[];let t,r;const n=()=>{if(jt(this.eResize,t),!t)return;const o=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(o),r){const a=this.gos.get("skipHeaderOnAutoSize"),l=()=>{this.columnModel.autoSizeColumn(this.column,"uiColumnResized",a)};this.eResize.addEventListener("dblclick",l);const c=new kn(this.eResize);c.addEventListener(kn.EVENT_DOUBLE_TAP,l),e.push(()=>{this.eResize.removeEventListener("dblclick",l),c.removeEventListener(kn.EVENT_DOUBLE_TAP,l),c.destroy()})}},i=()=>{e.forEach(o=>o()),e.length=0},s=()=>{const o=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(o!==t||a!==r)&&(t=o,r=a,i(),n())};s(),this.addDestroyFunc(i),this.ctrl.addRefreshFunction(s)}onResizing(e,t){const{column:r,lastResizeAmount:n,resizeStartWidth:i}=this,s=this.normaliseResizeAmount(t),o=i+s,a=[{key:r,newWidth:o}];if(this.column.getPinned()){const l=this.pinnedWidthService.getPinnedLeftWidth(),c=this.pinnedWidthService.getPinnedRightWidth(),u=ah(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(l+c+(s-n)>u)return}this.lastResizeAmount=s,this.columnModel.setColumnWidths(a,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const r=this.pinned!=="left",n=this.pinned==="right";return this.gos.get("enableRtl")?r&&(t*=-1):n&&(t*=-1),t}};S([F("horizontalResizeService")],Rf.prototype,"horizontalResizeService",2);S([F("pinnedWidthService")],Rf.prototype,"pinnedWidthService",2);S([F("ctrlsService")],Rf.prototype,"ctrlsService",2);S([F("columnModel")],Rf.prototype,"columnModel",2);S([_e],Rf.prototype,"postConstruct",1);var xk=class extends Ae{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(this.gos.getActiveDomElement())&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new VS),this.cbSelectAll.addCssClass("ag-header-select-all"),Gr(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,_.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,_.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),Zv(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);const t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.localeService.getLocaleTextFunc(),r=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),n=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${n} (${r})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(`${n} (${r})`),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return this.gos.get("rowSelection")==="multiple"?!0:(console.warn(`AG Grid: ${e} is only available if using 'multiple' rowSelection.`),!1)}checkRightRowModelType(e){const t=this.rowModel.getType();return t==="clientSide"||t==="serverSide"?!0:(console.warn(`AG Grid: ${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),r=this.isCurrentPageOnly();let n="uiSelectAll";r?n="uiSelectAllCurrentPage":t&&(n="uiSelectAllFiltered");const i={source:n,justFiltered:t,justCurrentPage:r};e?this.selectionService.selectAllRowNodes(i):this.selectionService.deselectAllRowNodes(i)}isCheckboxSelection(){let e=this.column.getColDef().headerCheckboxSelection;if(typeof e=="function"){const t=e,r=this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()});e=t(r)}return e?this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"):!1}isFilteredOnly(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}};S([F("rowModel")],xk.prototype,"rowModel",2);S([F("selectionService")],xk.prototype,"selectionService",2);var wJ=class extends ZS{constructor(e,t,r){super(e,t,r),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,r,n){this.comp=e,this.setGui(t),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(n),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new Rf(this.getPinned(),this.column,r,e,this)),this.createManagedBean(new ly([this.column],t)),this.createManagedBean(new JS(this.column,t,this.beans)),this.createManagedBean(new gu(t,{shouldStopEventPropagation:i=>this.shouldStopEventPropagation(i),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListener(this.column,ar.EVENT_COL_DEF_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,_.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}resizeHeader(e,t){var r,n;if(!this.column.isResizable())return;const i=this.column.getActualWidth(),s=(r=this.column.getMinWidth())!=null?r:0,o=(n=this.column.getMaxWidth())!=null?n:Number.MAX_SAFE_INTEGER,a=Math.min(Math.max(i+e,s),o);this.beans.columnModel.setColumnWidths([{key:this.column,newWidth:a}],t,!0,"uiColumnResized")}moveHeader(e){const{eGui:t,column:r,gos:n,ctrlsService:i}=this,s=this.getPinned(),o=t.getBoundingClientRect().left,a=r.getActualWidth(),l=n.get("enableRtl"),c=e===0!==l,u=bd.normaliseX(c?o-20:o+a+20,s,!0,n,i);bd.attemptMoveColumns({allMovingColumns:[r],isFromHeader:!0,hDirection:e,xPosition:u,pinned:s,fromEnter:!1,fakeEvent:!1,gos:n,columnModel:this.beans.columnModel}),i.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(r,"auto")}setupUserComp(){const e=this.lookupUserCompDetails();this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(t,e)}createParams(){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:t=>{this.menuService.showColumnMenu({column:this.column,buttonElement:t,positionBy:"button"})},showColumnMenuAfterMouseClick:t=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:t,positionBy:"mouse"})},showFilter:t=>{this.menuService.showFilterMenu({column:this.column,buttonElement:t,containerType:"columnFilter",positionBy:"button"})},progressSort:t=>{this.beans.sortController.progressSort(this.column,!!t,"uiColumnSorted")},setSort:(t,r)=>{this.beans.sortController.setSortForColumn(this.column,t,!!r,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(t,r)=>{this.setupTooltip(t,r)}})}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new xk(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===Y.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===Y.ENTER&&this.onEnterKeyDown(e),e.key===Y.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){const t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){const r=this.comp.getUserCompInstance();!r||!(r instanceof NT)||r.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const r=this.gos.get("tooltipShowMode")==="whenTruncated",n=this.eGui,i=this.column.getColDef();!t&&r&&!i.headerComponent&&(t=()=>{const a=n.querySelector(".ag-header-cell-text");return a?a.scrollWidth>a.clientWidth:!0});const s={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>n,getLocation:()=>"header",getTooltipValue:()=>e??this.column.getColDef().headerTooltip,shouldDisplayTooltip:t},o=this.createManagedBean(new Bl(s));this.refreshFunctions.push(()=>o.refreshToolTip())}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),r=qS.getHeaderClassesFromColDef(t,this.gos,this.column,null),n=this.userHeaderClasses;this.userHeaderClasses=new Set(r),r.forEach(i=>{n.has(i)?n.delete(i):this.comp.addOrRemoveCssClass(i,!0)}),n.forEach(i=>this.comp.addOrRemoveCssClass(i,!1))};this.refreshFunctions.push(e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;const{column:t,beans:r,displayName:n,dragAndDropService:i,gos:s}=this,{columnModel:o}=r;let a=!this.gos.get("suppressDragLeaveHidesColumns");const l=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>a?Ct.ICON_HIDE:Ct.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(t),dragItemName:n,onDragStarted:()=>{a=!s.get("suppressDragLeaveHidesColumns"),t.setMoving(!0,"uiColumnMoved")},onDragStopped:()=>t.setMoving(!1,"uiColumnMoved"),onGridEnter:c=>{var u;if(a){const d=((u=c==null?void 0:c.columns)==null?void 0:u.filter(p=>!p.getColDef().lockVisible))||[];o.setColumnsVisible(d,!0,"uiColumnMoved")}},onGridExit:c=>{var u;if(a){const d=((u=c==null?void 0:c.columns)==null?void 0:u.filter(p=>!p.getColDef().lockVisible))||[];o.setColumnsVisible(d,!1,"uiColumnMoved")}}};i.addDragSource(l,!0)}createDragItem(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(e){this.refreshFunctions.push(e)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(e=>e())}refreshHeaderComp(){const e=this.lookupUserCompDetails();(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.columnModel.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){const e=()=>{const t=this.column.getActualWidth();this.comp.setWidth(`${t}px`)};this.addManagedListener(this.column,ar.EVENT_WIDTH_CHANGED,e),e()}setupMovingCss(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListener(this.column,ar.EVENT_MOVING_CHANGED,e),e()}setupMenuClass(){const e=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListener(this.column,ar.EVENT_MENU_VISIBLE_CHANGED,e),e()}setupSortableClass(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};e(),this.addRefreshFunction(e),this.addManagedListener(this.eventService,ar.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))}setupFilterClass(){const e=()=>{const t=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",t),this.refreshAria()};this.addManagedListener(this.column,ar.EVENT_FILTER_ACTIVE_CHANGED,e),e()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.addRefreshFunction(e)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:r,beans:n}=this;if(!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),r.addOrRemoveCssClass("ag-header-span-height",!1),r.addOrRemoveCssClass("ag-header-span-total",!1);return}const{numberOfParents:i,isSpanningTotal:s}=this.column.getColumnGroupPaddingInfo();r.addOrRemoveCssClass("ag-header-span-height",i>0);const{columnModel:o}=n,a=o.getColumnHeaderRowHeight();if(i===0){r.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${a}px`);return}r.addOrRemoveCssClass("ag-header-span-total",s);const c=o.isPivotMode()?o.getPivotGroupHeaderHeight():o.getGroupHeaderHeight(),u=i*c;e.style.setProperty("top",`${-u}px`),e.style.setProperty("height",`${a+u}px`)}setupAutoHeight(e){const{columnModel:t,resizeObserverService:r}=this.beans,n=c=>{if(!this.isAlive())return;const{paddingTop:u,paddingBottom:d,borderBottomWidth:p,borderTopWidth:f}=fu(this.getGui()),m=u+d+p+f,C=e.offsetHeight+m;if(c<5){const w=this.beans.gos.getDocument(),b=!w||!w.contains(e),x=C==0;if(b||x){window.setTimeout(()=>n(c+1),0);return}}t.setColumnHeaderHeight(this.column,C)};let i=!1,s;const o=()=>{const c=this.column.isAutoHeaderHeight();c&&!i&&a(),!c&&i&&l()},a=()=>{i=!0,n(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),s=r.observeResize(e,()=>n(0))},l=()=>{i=!1,s&&s(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),s=void 0};o(),this.addDestroyFunc(()=>l()),this.addManagedListener(this.column,ar.EVENT_WIDTH_CHANGED,()=>i&&n(0)),this.addManagedListener(this.eventService,ar.EVENT_SORT_CHANGED,()=>{i&&window.setTimeout(()=>n(0))}),this.addRefreshFunction(o)}refreshAriaSort(){if(this.sortable){const e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(iz(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(this.beans.gos.getActiveDomElement()))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,r)=>t==="filter"?-1:r.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnouncementService.announceValue(e)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(){const e=()=>{if(!this.gos.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedListener(this.eventService,_.EVENT_COLUMN_HOVER_CHANGED,e),e()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(){const e=n=>this.handleMouseOverChange(n.type==="mouseenter"),t=()=>this.dispatchColumnMouseEvent(_.EVENT_COLUMN_HEADER_CLICKED,this.column),r=n=>this.handleContextMenuMouseEvent(n,void 0,this.column);this.addManagedListener(this.getGui(),"mouseenter",e),this.addManagedListener(this.getGui(),"mouseleave",e),this.addManagedListener(this.getGui(),"click",t),this.addManagedListener(this.getGui(),"contextmenu",r)}handleMouseOverChange(e){this.setActiveHeader(e);const r={type:e?_.EVENT_COLUMN_HEADER_MOUSE_OVER:_.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column};this.eventService.dispatchEvent(r)}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return t instanceof NT?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy(),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null}},cy=class extends Ae{constructor(e,t,r,n){super(),this.eResize=t,this.comp=e,this.pinned=r,this.columnGroup=n}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){const t=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{const r=[];this.columnGroup.getDisplayedLeafColumns().forEach(i=>{i.getColDef().suppressAutoSize||r.push(i.getColId())}),r.length>0&&this.columnModel.autoSizeColumns({columns:r,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){const t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t,r="uiColumnResized"){const n=this.normaliseDragChange(t),i=this.resizeStartWidth+n;this.resizeColumnsFromLocalValues(i,r,e)}getInitialValues(e){const t=this.getColumnsToResize(),r=this.getInitialSizeOfColumns(t),n=this.getSizeRatiosOfColumns(t,r),i={columnsToResize:t,resizeStartWidth:r,resizeRatios:n};let s=null;if(e&&(s=this.columnModel.getDisplayedGroupAtDirection(this.columnGroup,"After")),s){const o=s.getDisplayedLeafColumns(),a=i.groupAfterColumns=o.filter(c=>c.isResizable()),l=i.groupAfterStartWidth=this.getInitialSizeOfColumns(a);i.groupAfterRatios=this.getSizeRatiosOfColumns(a,l)}else i.groupAfterColumns=void 0,i.groupAfterStartWidth=void 0,i.groupAfterRatios=void 0;return i}storeLocalValues(e){const{columnsToResize:t,resizeStartWidth:r,resizeRatios:n,groupAfterColumns:i,groupAfterStartWidth:s,groupAfterRatios:o}=e;this.resizeCols=t,this.resizeStartWidth=r,this.resizeRatios=n,this.resizeTakeFromCols=i,this.resizeTakeFromStartWidth=s,this.resizeTakeFromRatios=o}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){const t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),r=this.getInitialValues();t>r.resizeStartWidth&&this.resizeColumns(r,t,e,!0)}resizeColumnsFromLocalValues(e,t,r=!0){var n,i,s;if(!this.resizeCols||!this.resizeRatios)return;const o={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:(n=this.resizeTakeFromCols)!=null?n:void 0,groupAfterStartWidth:(i=this.resizeTakeFromStartWidth)!=null?i:void 0,groupAfterRatios:(s=this.resizeTakeFromRatios)!=null?s:void 0};this.resizeColumns(o,e,t,r)}resizeColumns(e,t,r,n=!0){const{columnsToResize:i,resizeStartWidth:s,resizeRatios:o,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,u=[];if(u.push({columns:i,ratios:o,width:t}),a){const d=t-s;u.push({columns:a,ratios:c,width:l-d})}this.columnModel.resizeColumnSets({resizeSets:u,finished:n,source:r}),n&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}getInitialSizeOfColumns(e){return e.reduce((t,r)=>t+r.getActualWidth(),0)}getSizeRatiosOfColumns(e,t){return e.map(r=>r.getActualWidth()/t)}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}};S([F("horizontalResizeService")],cy.prototype,"horizontalResizeService",2);S([F("autoWidthCalculator")],cy.prototype,"autoWidthCalculator",2);S([F("columnModel")],cy.prototype,"columnModel",2);S([_e],cy.prototype,"postConstruct",1);var W$=class extends Ae{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,wn.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}};S([_e],W$.prototype,"postConstruct",1);var bJ=class extends ZS{constructor(e,t,r){super(e,t,r),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const n=this.getGui();this.setDragSource(n)}},this.column=e}setComp(e,t,r){this.comp=e,this.setGui(t),this.displayName=this.beans.columnModel.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.addDestroyFunc(()=>{this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature))}),this.setupUserComp(),this.addHeaderMouseListeners();const n=this.getParentRowCtrl().getPinned(),i=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new ly(i,t)),this.createManagedBean(new JS(this.column,t,this.beans)),this.createManagedBean(new W$(e,this.column)),this.resizeFeature=this.createManagedBean(new cy(e,r,n,this.column)),this.createManagedBean(new gu(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener(_.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()}resizeHeader(e,t){if(!this.resizeFeature)return;const r=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(r,r.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){const{beans:t,eGui:r,column:n,gos:i,ctrlsService:s}=this,o=i.get("enableRtl"),a=e===0,l=this.getPinned(),c=r.getBoundingClientRect(),u=c.left,d=c.width,p=bd.normaliseX(a!==o?u-20:u+d+20,l,!0,i,s),f=n.getGroupId(),m=this.focusService.getFocusedHeader();bd.attemptMoveColumns({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection:e,xPosition:p,pinned:l,fromEnter:!1,fakeEvent:!1,gos:i,columnModel:t.columnModel});const y=n.getDisplayedLeafColumns(),C=a?y[0]:Wt(y);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(C,"auto"),!this.isAlive()&&m&&this.restoreFocus(f,n,m)}restoreFocus(e,t,r){const n=t.getLeafColumns();if(!n.length)return;const i=n[0].getParent();if(!i)return;const s=this.findGroupWidthId(i,e);s&&this.focusService.focusHeaderPosition({headerPosition:Sr(tt({},r),{column:s})})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(){const e=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:r=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),r,"gridInitializing")},setTooltip:(r,n)=>{this.setupTooltip(r,n)}}),t=this.userComponentFactory.getHeaderGroupCompDetails(e);this.comp.setUserCompDetails(t)}addHeaderMouseListeners(){const e=n=>this.handleMouseOverChange(n.type==="mouseenter"),t=()=>this.dispatchColumnMouseEvent(_.EVENT_COLUMN_HEADER_CLICKED,this.column.getProvidedColumnGroup()),r=n=>this.handleContextMenuMouseEvent(n,void 0,this.column.getProvidedColumnGroup());this.addManagedListener(this.getGui(),"mouseenter",e),this.addManagedListener(this.getGui(),"mouseleave",e),this.addManagedListener(this.getGui(),"click",t),this.addManagedListener(this.getGui(),"contextmenu",r)}handleMouseOverChange(e){const r={type:e?_.EVENT_COLUMN_HEADER_MOUSE_OVER:_.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column.getProvidedColumnGroup()};this.eventService.dispatchEvent(r)}setupTooltip(e,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const r=this.column.getColGroupDef(),n=this.gos.get("tooltipShowMode")==="whenTruncated",i=this.eGui;!t&&n&&!(r!=null&&r.headerGroupComponent)&&(t=()=>{const o=i.querySelector(".ag-header-group-text");return o?o.scrollWidth>o.clientWidth:!0});const s={getColumn:()=>this.column,getGui:()=>i,getLocation:()=>"headerGroup",getTooltipValue:()=>e??(r&&r.headerTooltip),shouldDisplayTooltip:t};r&&(s.getColDef=()=>r),this.createBean(new Bl(s))}setupExpandable(){const e=this.column.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(e,rn.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(e,rn.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))}refreshExpanded(){const e=this.column;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const e=this.column.getColGroupDef(),t=qS.getHeaderClassesFromColDef(e,this.gos,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(n=>n.isSpanHeaderHeight())&&t.push("ag-header-span-height")):t.push("ag-header-group-cell-with-group"),t.forEach(r=>this.comp.addOrRemoveCssClass(r,!0))}setupMovingCss(){const t=this.column.getProvidedColumnGroup().getLeafColumns(),r=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());t.forEach(n=>{this.addManagedListener(n,ar.EVENT_MOVING_CHANGED,r)}),r()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.column)}}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===Y.ENTER){const r=this.column,n=!r.isExpanded();this.beans.columnModel.setColumnGroupOpened(r.getProvidedColumnGroup(),n,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!e))return;const{beans:t,column:r,displayName:n,gos:i,dragAndDropService:s}=this,{columnModel:o}=t,a=r.getProvidedColumnGroup().getLeafColumns();let l=!i.get("suppressDragLeaveHidesColumns");const c=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>l?Ct.ICON_HIDE:Ct.ICON_NOT_ALLOWED,dragItemName:n,getDragItem:()=>this.getDragItemForGroup(r),onDragStarted:()=>{l=!i.get("suppressDragLeaveHidesColumns"),a.forEach(u=>u.setMoving(!0,"uiColumnDragged"))},onDragStopped:()=>a.forEach(u=>u.setMoving(!1,"uiColumnDragged")),onGridEnter:u=>{var d;if(l){const p=((d=u==null?void 0:u.columns)==null?void 0:d.filter(f=>!f.getColDef().lockVisible))||[];o.setColumnsVisible(p,!0,"uiColumnMoved")}},onGridExit:u=>{var d;if(l){const p=((d=u==null?void 0:u.columns)==null?void 0:d.filter(f=>!f.getColDef().lockVisible))||[];o.setColumnsVisible(p,!1,"uiColumnMoved")}}};s.addDragSource(c,!0)}getDragItemForGroup(e){const t=e.getProvidedColumnGroup().getLeafColumns(),r={};t.forEach(i=>r[i.getId()]=i.isVisible());const n=[];return this.beans.columnModel.getAllDisplayedColumns().forEach(i=>{t.indexOf(i)>=0&&(n.push(i),zi(t,i))}),t.forEach(i=>n.push(i)),{columns:n,visibleState:r}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach(r=>{(r.getColDef().suppressMovable||r.getColDef().lockPosition)&&(e=!0)}),e||this.gos.get("suppressMovableColumns")}},SJ=0,sm=class extends Ae{constructor(e,t,r){super(),this.instanceId=SJ++,this.rowIndex=e,this.pinned=t,this.type=r;const n=r=="group"?"ag-header-row-column-group":r=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${n}`}postConstruct(){this.isPrintLayout=this.gos.isDomLayout("print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}getInstanceId(){return this.instanceId}setComp(e,t=!0){this.comp=e,t&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(){this.addManagedListener(this.eventService,_.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_VIRTUAL_COLUMNS_CHANGED,e=>this.onVirtualColumnsChanged(e.afterScroll)),this.addManagedListener(this.eventService,_.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",e=>this.isEnsureDomOrder=e.currentValue),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))}getHeaderCellCtrl(e){if(this.headerCellCtrls)return md(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=this.gos.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{columnModel:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){var{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{columnModel:e,filterManager:t}=this.beans;let r=e.getHeaderRowCount();const n=[];let i=0;t.hasFloatingFilters()&&(r++,i=1);const s=e.getColumnGroupHeaderRowHeight(),o=e.getColumnHeaderRowHeight(),a=1+i,l=r-a;for(let d=0;d<l;d++)n.push(s);n.push(o);for(let d=0;d<i;d++)n.push(e.getFloatingFiltersHeight());let c=0;for(let d=0;d<this.rowIndex;d++)c+=n[d];const u=n[this.rowIndex];return{topOffset:c,rowHeight:u}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){const t=this.getHeaderCtrls(),r=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,r,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const i of t)this.recycleAndCreateHeaderCtrls(i,e);const r=i=>{const{focusService:s,columnModel:o}=this.beans;return s.isHeaderWrapperFocused(i)?o.isDisplayed(i.getColumnGroupChild()):!1};if(e)for(const[i,s]of e)r(s)?this.headerCellCtrls.set(i,s):this.destroyBean(s);return Array.from(this.headerCellCtrls.values())}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;const r=e.getUniqueId();let n;if(t&&(n=t.get(r),t.delete(r)),n&&n.getColumnGroupChild()!=e&&(this.destroyBean(n),n=void 0),n==null)switch(this.type){case"filter":n=this.createBean(new CJ(e,this.beans,this));break;case"group":n=this.createBean(new bJ(e,this.beans,this));break;default:n=this.createBean(new wJ(e,this.beans,this));break}this.headerCellCtrls.set(r,n)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[];const t=this.getActualDepth(),{columnModel:r}=this.beans;return["left",null,"right"].forEach(n=>{const i=r.getVirtualHeaderGroupRow(n,t);e=e.concat(i)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())}focusHeader(e,t){if(!this.headerCellCtrls)return!1;const n=Array.from(this.headerCellCtrls.values()).find(i=>i.getColumnGroupChild()==e);return n?n.focus(t):!1}destroy(){this.headerCellCtrls&&this.headerCellCtrls.forEach(e=>{this.destroyBean(e)}),this.headerCellCtrls=void 0,super.destroy()}};S([F("beans")],sm.prototype,"beans",2);S([_e],sm.prototype,"postConstruct",1);var mu=class extends Ae{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,_.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}setupDragAndDrop(e){const t=new Ef(this.pinned,e);this.createManagedBean(t)}refresh(e=!1){const t=new $p,r=this.focusService.getFocusHeaderToUseAfterRefresh(),n=()=>{const a=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let l=0;l<a;l++){const c=this.createBean(new sm(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(c)}},i=()=>{const a=t.next(),l=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==a);(l||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),l&&(this.columnsRowCtrl=this.createBean(new sm(a,this.pinned,"column")))},s=()=>{this.includeFloatingFilter=this.filterManager.hasFloatingFilters()&&!this.hidden;const a=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){a();return}const l=t.next();if(this.filtersRowCtrl){const c=this.filtersRowCtrl.getRowIndex()!==l;(!e||c)&&a()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new sm(l,this.pinned,"filter")))};n(),i(),s();const o=this.getAllCtrls();this.comp.setCtrls(o),this.restoreFocusOnHeader(r)}restoreFocusOnHeader(e){e==null||e.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:e})}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){const e=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new bf(e=>this.comp.setCenterWidth(`${e}px`),!0))}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}setupPinnedWidth(){if(this.pinned==null)return;const e=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;const r=()=>{const n=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(n==null)return;const i=n==0,s=this.hidden!==i,o=this.gos.get("enableRtl"),a=this.gos.getScrollbarWidth(),c=this.scrollVisibleService.isVerticalScrollShowing()&&(o&&e||!o&&t)?n+a:n;this.comp.setPinnedContainerWidth(`${c}px`),this.comp.setDisplayed(!i),s&&(this.hidden=i,this.refresh())};this.addManagedListener(this.eventService,_.EVENT_LEFT_PINNED_WIDTH_CHANGED,r),this.addManagedListener(this.eventService,_.EVENT_RIGHT_PINNED_WIDTH_CHANGED,r),this.addManagedListener(this.eventService,_.EVENT_SCROLL_VISIBILITY_CHANGED,r),this.addManagedListener(this.eventService,_.EVENT_SCROLLBAR_WIDTH_CHANGED,r)}getHeaderCtrlForColumn(e){if(e instanceof ar)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(e):void 0;if(this.groupsRowCtrls.length!==0)for(let t=0;t<this.groupsRowCtrls.length;t++){const r=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(r)return r}}getHtmlElementForColumnHeader(e){const t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){const r=this.getAllCtrls()[e];return r?r.getType():void 0}focusHeader(e,t,r){const i=this.getAllCtrls()[e];return i?i.focusHeader(t,r):!1}getViewport(){return this.eViewport}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}};S([F("ctrlsService")],mu.prototype,"ctrlsService",2);S([F("scrollVisibleService")],mu.prototype,"scrollVisibleService",2);S([F("pinnedWidthService")],mu.prototype,"pinnedWidthService",2);S([F("columnModel")],mu.prototype,"columnModel",2);S([F("focusService")],mu.prototype,"focusService",2);S([F("filterManager")],mu.prototype,"filterManager",2);var gh=class u0 extends mt{constructor(t){super(),this.headerRowComps={},this.rowCompsList=[],this.pinned=t}init(){this.selectAndSetTemplate();const t={setDisplayed:n=>this.setDisplayed(n),setCtrls:n=>this.setCtrls(n),setCenterWidth:n=>this.eCenterContainer.style.width=n,setViewportScrollLeft:n=>this.getGui().scrollLeft=n,setPinnedContainerWidth:n=>{const i=this.getGui();i.style.width=n,i.style.maxWidth=n,i.style.minWidth=n}};this.createManagedBean(new mu(this.pinned)).setComp(t,this.getGui())}selectAndSetTemplate(){const t=this.pinned=="left",r=this.pinned=="right",n=t?u0.PINNED_LEFT_TEMPLATE:r?u0.PINNED_RIGHT_TEMPLATE:u0.CENTER_TEMPLATE;this.setTemplate(n),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()}destroyRowComps(){this.setCtrls([])}destroyRowComp(t){this.destroyBean(t),this.eRowContainer.removeChild(t.getGui())}setCtrls(t){const r=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let n;const i=s=>{const o=s.getGui();o.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(o),n&&JD(this.eRowContainer,o,n),n=o};t.forEach(s=>{const o=s.getInstanceId(),a=r[o];delete r[o];const l=a||this.createBean(new Sk(s));this.headerRowComps[o]=l,this.rowCompsList.push(l),i(l)}),Zc(r).forEach(s=>this.destroyRowComp(s))}};gh.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="rowgroup"></div>';gh.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="rowgroup"></div>';gh.CENTER_TEMPLATE=`<div class="ag-header-viewport" role="presentation">
            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>
        </div>`;S([Me("eCenterContainer")],gh.prototype,"eCenterContainer",2);S([_e],gh.prototype,"init",1);S([Ni],gh.prototype,"destroyRowComps",1);var yP=gh,Fd=class extends Ae{constructor(){super(...arguments),this.currentHeaderRowWithoutSpan=-1}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCon=t.gridBodyCtrl});const e=this.gos.getDocument();this.addManagedListener(e,"mousedown",()=>this.setCurrentHeaderRowWithoutSpan(-1))}getHeaderRowCount(){const e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0}navigateVertically(e,t,r){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;const{headerRowIndex:n,column:i}=t,s=this.getHeaderRowCount(),o=e===0;let{headerRowIndex:a,column:l,headerRowIndexWithoutSpan:c}=o?this.headerPositionUtils.getColumnVisibleParent(i,n):this.headerPositionUtils.getColumnVisibleChild(i,n),u=!1;return a<0&&(a=0,l=i,u=!0),a>=s?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):c!==void 0&&(this.currentHeaderRowWithoutSpan=c),!u&&!l?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:l},allowUserOverride:!0,event:r})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,t=!1,r){const n=this.focusService.getFocusedHeader(),i=e===2,s=this.gos.get("enableRtl");let o,a;if(this.currentHeaderRowWithoutSpan!==-1?n.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=n.headerRowIndex,i!==s?(a="Before",o=this.headerPositionUtils.findHeader(n,a)):(a="After",o=this.headerPositionUtils.findHeader(n,a)),o||!t)return this.focusService.focusHeaderPosition({headerPosition:o,direction:a,fromTab:t,allowUserOverride:!0,event:r});if(t){const l=this.gos.getCallback("tabToNextHeader");if(l)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:o,direction:a})}return this.focusNextHeaderRow(n,a,r)}focusNextHeaderRow(e,t,r){const n=e.headerRowIndex;let i=null,s;if(t==="Before"?n>0&&(s=n-1,this.currentHeaderRowWithoutSpan-=1,i=this.headerPositionUtils.findColAtEdgeForHeaderRow(s,"end")):(s=n+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),i=this.headerPositionUtils.findColAtEdgeForHeaderRow(s,"start")),!i)return!1;const{column:o,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(i.column,i==null?void 0:i.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:a},direction:t,fromTab:!0,allowUserOverride:!0,event:r})}scrollToColumn(e,t="After"){if(e.getPinned())return;let r;if(e instanceof wn){const n=e.getDisplayedLeafColumns();r=t==="Before"?Wt(n):n[0]}else r=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(r)}};S([F("focusService")],Fd.prototype,"focusService",2);S([F("headerPositionUtils")],Fd.prototype,"headerPositionUtils",2);S([F("ctrlsService")],Fd.prototype,"ctrlsService",2);S([_e],Fd.prototype,"postConstruct",1);Fd=S([$e("headerNavigationService")],Fd);var vu=class extends Ae{setComp(e,t,r){this.comp=e,this.eGui=t,this.createManagedBean(new gu(r,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,_.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight();const n=this.onHeaderContextMenu.bind(this);this.addManagedListener(this.eGui,"contextmenu",n),this.mockContextMenuForIPad(n),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("pivotHeaderHeight",e),this.addManagedPropertyListener("groupHeaderHeight",e),this.addManagedPropertyListener("pivotGroupHeaderHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,_.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,e),this.addManagedListener(this.eventService,_.EVENT_GRID_STYLES_CHANGED,e),this.addManagedListener(this.eventService,_.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,e)}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){const{columnModel:e}=this;let t=0,r=e.getHeaderRowCount(),n;this.filterManager.hasFloatingFilters()&&(r++,t=1);const s=this.columnModel.getColumnGroupHeaderRowHeight(),o=this.columnModel.getColumnHeaderRowHeight(),a=1+t,l=r-a;if(n=t*e.getFloatingFiltersHeight(),n+=l*s,n+=o,this.headerHeight===n)return;this.headerHeight=n;const c=`${n+1}px`;this.comp.setHeightAndMinHeight(c),this.eventService.dispatchEvent({type:_.EVENT_HEADER_HEIGHT_CHANGED})}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){const t=this.columnModel.getAllDisplayedColumns().some(r=>r.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),r=e.shiftKey!==t?2:3;(this.headerNavigationService.navigateHorizontally(r,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case Y.LEFT:t=2;case Y.RIGHT:xe(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e);break;case Y.UP:t=0;case Y.DOWN:xe(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break;default:return}}onFocusOut(e){const{relatedTarget:t}=e;!t&&this.eGui.contains(this.gos.getActiveDomElement())||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,r){if(!e&&!r||!this.menuService.isHeaderContextMenuEnabled())return;const{target:n}=e??t;(n===this.eGui||n===this.ctrlsService.getHeaderRowContainerCtrl().getViewport())&&this.menuService.showHeaderContextMenu(void 0,e,r)}mockContextMenuForIPad(e){if(!jl())return;const t=new kn(this.eGui),r=n=>{e(void 0,n.touchStart,n.touchEvent)};this.addManagedListener(t,kn.EVENT_LONG_TAP,r),this.addDestroyFunc(()=>t.destroy())}};S([F("headerNavigationService")],vu.prototype,"headerNavigationService",2);S([F("focusService")],vu.prototype,"focusService",2);S([F("columnModel")],vu.prototype,"columnModel",2);S([F("ctrlsService")],vu.prototype,"ctrlsService",2);S([F("filterManager")],vu.prototype,"filterManager",2);S([F("menuService")],vu.prototype,"menuService",2);var Ek=class K$ extends mt{constructor(){super(K$.TEMPLATE)}postConstruct(){const t={addOrRemoveCssClass:(i,s)=>this.addOrRemoveCssClass(i,s),setHeightAndMinHeight:i=>{this.getGui().style.height=i,this.getGui().style.minHeight=i}};this.createManagedBean(new vu).setComp(t,this.getGui(),this.getFocusableElement());const n=i=>{this.createManagedBean(i),this.appendChild(i)};n(new yP("left")),n(new yP(null)),n(new yP("right"))}};Ek.TEMPLATE='<div class="ag-header" role="presentation"/>';S([_e],Ek.prototype,"postConstruct",1);var xJ=Ek,zm=class extends Ae{addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const r=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(r)}setResizeIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e,t){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}};S([F("dragService")],zm.prototype,"dragService",2);S([F("ctrlsService")],zm.prototype,"ctrlsService",2);zm=S([$e("horizontalResizeService")],zm);var eu=class extends Ae{hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,r){this.showPopup(e,n=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:r,mouseEvent:t,ePopup:n})},r,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,r){let n=-1,i="left";const s=this.menuService.isLegacyMenuEnabled();!s&&this.gos.get("enableRtl")&&(n=1,i="right");let o=s?void 0:4*n,a=s?void 0:4;this.showPopup(e,l=>{this.popupService.positionPopupByComponent({type:r,eventSource:t,ePopup:l,nudgeX:o,nudgeY:a,alignSide:i,keepWithinBounds:!0,position:"under",column:e})},r,t,s)}showPopup(e,t,r,n,i){const s=e?this.createBean(new WS(e,"COLUMN_MENU")):void 0;if(this.activeMenu=s,!(s!=null&&s.hasFilter())||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const o=document.createElement("div");Gr(o,"presentation"),o.classList.add("ag-menu"),i||o.classList.add("ag-filter-menu"),this.tabListener=this.addManagedListener(o,"keydown",m=>this.trapFocusWithin(m,o)),o.appendChild(s==null?void 0:s.getGui());let a;const l=()=>s==null?void 0:s.afterGuiDetached(),c=this.menuService.isColumnMenuAnchoringEnabled()?n??this.ctrlsService.getGridBodyCtrl().getGui():void 0,u=m=>{e.setMenuVisible(!1,"contextMenu");const y=m instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),y&&n&&ns(n)){const C=this.focusService.findTabbableParent(n);C&&C.focus()}l(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,r,e)},d=this.localeService.getLocaleTextFunc(),p=i&&r!=="columnFilter"?d("ariaLabelColumnMenu","Column Menu"):d("ariaLabelColumnFilter","Column Filter"),f=this.popupService.addPopup({modal:!0,eChild:o,closeOnEsc:!0,closedCallback:u,positionCallback:()=>t(o),anchorToElement:c,ariaLabel:p});f&&(this.hidePopup=a=f.hideFunc),s.afterInit().then(()=>{t(o),s.afterGuiAttached({container:r,hidePopup:a})}),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,r,e)}trapFocusWithin(e,t){e.key!==Y.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,r){const n={type:_.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:e,switchingTab:!1,key:t,column:r??null};this.eventService.dispatchEvent(n)}isMenuEnabled(e){var t;return e.isFilterAllowed()&&((t=e.getColDef().menuTabs)!=null?t:["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}};S([F("filterManager")],eu.prototype,"filterManager",2);S([F("popupService")],eu.prototype,"popupService",2);S([F("focusService")],eu.prototype,"focusService",2);S([F("ctrlsService")],eu.prototype,"ctrlsService",2);S([F("menuService")],eu.prototype,"menuService",2);eu=S([$e("filterMenuFactory")],eu);var d0=(e=>(e.TAB_GUARD="ag-tab-guard",e.TAB_GUARD_TOP="ag-tab-guard-top",e.TAB_GUARD_BOTTOM="ag-tab-guard-bottom",e))(d0||{}),ex=class extends Ae{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1;const{comp:t,eTopGuard:r,eBottomGuard:n,focusTrapActive:i,forceFocusOutWhenTabGuardsAreEmpty:s,focusInnerElement:o,onFocusIn:a,onFocusOut:l,shouldStopEventPropagation:c,onTabKeyDown:u,handleKeyDown:d,eFocusableElement:p}=e;this.comp=t,this.eTopGuard=r,this.eBottomGuard=n,this.providedFocusInnerElement=o,this.eFocusableElement=p,this.focusTrapActive=!!i,this.forceFocusOutWhenTabGuardsAreEmpty=!!s,this.providedFocusIn=a,this.providedFocusOut=l,this.providedShouldStopEventPropagation=c,this.providedOnTabKeyDown=u,this.providedHandleKeyDown=d}postConstruct(){this.createManagedBean(new gu(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedListener(e,"focus",this.onFocus.bind(this)))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}const t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){const t=this.gos.getDocument(),r=this.focusService.findFocusableElements(t.body,null,!0),n=r.indexOf(e?this.eTopGuard:this.eBottomGuard);if(n===-1)return;let i,s;e?(i=0,s=n):(i=n+1,s=r.length);const o=r.slice(i,s),a=this.gos.get("tabIndex");o.sort((l,c)=>{const u=parseInt(l.getAttribute("tabindex")||"0"),d=parseInt(c.getAttribute("tabindex")||"0");return d===a?1:u===a?-1:u===0?1:d===0?-1:u-d}),o[e?o.length-1:0].focus()}onFocusIn(e){this.focusTrapActive||(this.providedFocusIn&&this.providedFocusIn(e),this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const r=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),r&&(r.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e){return e===this.eTopGuard||e===this.eBottomGuard}};S([F("focusService")],ex.prototype,"focusService",2);S([_e],ex.prototype,"postConstruct",1);var uy=class extends mt{initialiseTabGuard(t){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();const r=[this.eTopGuard,this.eBottomGuard],n={setTabIndex:i=>{r.forEach(s=>i!=null?s.setAttribute("tabindex",i):s.removeAttribute("tabindex"))}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new ex({comp:n,focusTrapActive:!!t.focusTrapActive,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:t.onFocusIn,onFocusOut:t.onFocusOut,focusInnerElement:t.focusInnerElement,handleKeyDown:t.handleKeyDown,onTabKeyDown:t.onTabKeyDown,shouldStopEventPropagation:t.shouldStopEventPropagation,forceFocusOutWhenTabGuardsAreEmpty:t.forceFocusOutWhenTabGuardsAreEmpty}))}createTabGuard(t){const r=document.createElement("div"),n=t==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return r.classList.add("ag-tab-guard",n),Gr(r,"presentation"),r}addTabGuards(t,r){this.eFocusableElement.insertAdjacentElement("afterbegin",t),this.eFocusableElement.insertAdjacentElement("beforeend",r)}removeAllChildrenExceptTabGuards(){const t=[this.eTopGuard,this.eBottomGuard];Zr(this.getFocusableElement()),this.addTabGuards(...t)}forceFocusOutOfContainer(t=!1){this.tabGuardCtrl.forceFocusOutOfContainer(t)}appendChild(t,r){ey(t)||(t=t.getGui());const{eBottomGuard:n}=this;n?n.insertAdjacentElement("beforebegin",t):super.appendChild(t,r)}},tx=class q$ extends uy{constructor(t){super(q$.getTemplate(t.cssClass)),this.items=[],this.tabbedItemScrollMap=new Map,this.params=t}postConstruct(){this.setupHeader(),this.params.items&&this.params.items.forEach(t=>this.addItem(t)),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc(()=>{var t,r,n;return(n=(r=(t=this.activeItem)==null?void 0:t.tabbedItem)==null?void 0:r.afterDetachedCallback)==null?void 0:n.call(r)})}static getTemplate(t){return`<div class="ag-tabs ${t}">
            <div ref="eHeader"></div>
            <div ref="eBody" role="presentation" class="ag-tabs-body ${t?`${t}-body`:""}"></div>
        </div>`}setupHeader(){const{enableCloseButton:t,cssClass:r}=this.params,n=(i,s)=>{i.classList.add(`ag-tabs-${s}`),r&&i.classList.add(`${r}-${s}`)};t?(this.setupCloseButton(n),this.eTabHeader=this.gos.getDocument().createElement("div"),n(this.eHeader,"header-wrapper"),Gr(this.eHeader,"presentation"),this.eHeader.appendChild(this.eTabHeader)):this.eTabHeader=this.eHeader,Gr(this.eTabHeader,"tablist"),n(this.eTabHeader,"header")}setupCloseButton(t){const r=this.gos.getDocument(),n=r.createElement("button");t(n,"close-button");const i=kr("close",this.gos,void 0,!0);As(n,this.params.closeButtonAriaLabel),n.appendChild(i),this.addManagedListener(n,"click",()=>{var o,a;return(a=(o=this.params).onCloseClicked)==null?void 0:a.call(o)});const s=r.createElement("div");t(s,"close-button-wrapper"),Gr(s,"presentation"),s.appendChild(n),this.eHeader.appendChild(s),this.eCloseButton=n}handleKeyDown(t){switch(t.key){case Y.RIGHT:case Y.LEFT:if(!this.eTabHeader.contains(this.gos.getActiveDomElement()))return;const r=t.key===Y.RIGHT,n=this.gos.get("enableRtl"),i=this.items.indexOf(this.activeItem),s=r!==n?Math.min(i+1,this.items.length-1):Math.max(i-1,0);if(i===s)return;t.preventDefault();const o=this.items[s];this.showItemWrapper(o),o.eHeaderButton.focus();break;case Y.UP:case Y.DOWN:t.stopPropagation();break}}onTabKeyDown(t){var r,n,i,s;if(t.defaultPrevented)return;const{focusService:o,eHeader:a,eBody:l,activeItem:c,params:u}=this,{suppressTrapFocus:d,enableCloseButton:p}=u,f=this.gos.getActiveDomElement(),m=t.target,y=t.shiftKey;if(a.contains(f)){t.preventDefault(),p&&y&&!((r=this.eCloseButton)!=null&&r.contains(f))?(n=this.eCloseButton)==null||n.focus():d&&y?(i=this.focusService.findFocusableElementBeforeTabGuard(this.gos.getDocument().body,m))==null||i.focus():this.focusBody(t.shiftKey);return}let C=null;if(o.isTargetUnderManagedComponent(l,m)&&(y&&(C=this.focusService.findFocusableElementBeforeTabGuard(l,m)),!C&&!d&&(C=c.eHeaderButton)),!C&&l.contains(f)&&(C=o.findNextFocusableElement(l,!1,y),!C)){t.preventDefault(),d&&!y?this.forceFocusOutOfContainer(y):p&&!y?(s=this.eCloseButton)==null||s.focus():this.focusHeader();return}C&&(t.preventDefault(),C.focus())}focusInnerElement(t){t?this.focusHeader():this.focusBody(!0)}focusHeader(t){this.activeItem.eHeaderButton.focus({preventScroll:t})}focusBody(t){this.focusService.focusInto(this.eBody,t)}setAfterAttachedParams(t){this.afterAttachedParams=t}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(t){const r=document.createElement("span");Gr(r,"tab"),r.setAttribute("tabindex","-1"),r.appendChild(t.title),r.classList.add("ag-tab"),this.eTabHeader.appendChild(r),As(r,t.titleLabel);const n={tabbedItem:t,eHeaderButton:r};this.items.push(n),r.addEventListener("click",this.showItemWrapper.bind(this,n))}showItem(t){const r=this.items.find(n=>n.tabbedItem===t);r&&this.showItemWrapper(r)}showItemWrapper(t){var r,n,i,s,o,a;const{tabbedItem:l,eHeaderButton:c}=t;if((n=(r=this.params).onItemClicked)==null||n.call(r,{item:l}),this.activeItem===t){(s=(i=this.params).onActiveItemClicked)==null||s.call(i);return}this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),Zr(this.eBody),l.bodyPromise.then(u=>{this.eBody.appendChild(u);const d=!this.focusService.isKeyboardMode();if(this.params.suppressFocusBodyOnOpen||this.focusService.focusInto(this.eBody,!1,d),l.afterAttachedCallback&&l.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){const p=l.getScrollableContainer&&l.getScrollableContainer()||u;this.lastScrollListener=this.addManagedListener(p,"scroll",()=>{this.tabbedItemScrollMap.set(l.name,p.scrollTop)});const f=this.tabbedItemScrollMap.get(l.name);f!==void 0&&setTimeout(()=>{p.scrollTop=f},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),(a=(o=this.activeItem.tabbedItem).afterDetachedCallback)==null||a.call(o)),c.classList.add("ag-tab-selected"),this.activeItem=t}};S([F("focusService")],tx.prototype,"focusService",2);S([Me("eHeader")],tx.prototype,"eHeader",2);S([Me("eBody")],tx.prototype,"eBody",2);S([_e],tx.prototype,"postConstruct",1);var EJ=50,GT=class extends Ae{constructor(){super(...arguments),this.polyfillFunctions=[]}observeResize(e,t){const r=this.gos.getWindow(),n=()=>{const a=new r.ResizeObserver(t);return a.observe(e),()=>a.disconnect()},i=()=>{var a,l;let c=(a=e==null?void 0:e.clientWidth)!=null?a:0,u=(l=e==null?void 0:e.clientHeight)!=null?l:0,d=!0;const p=()=>{var f,m;if(d){const y=(f=e==null?void 0:e.clientWidth)!=null?f:0,C=(m=e==null?void 0:e.clientHeight)!=null?m:0;(y!==c||C!==u)&&(c=y,u=C,t()),this.doNextPolyfillTurn(p)}};return p(),()=>d=!1},s=this.gos.get("suppressBrowserResizeObserver");return!!r.ResizeObserver&&!s?n():this.getFrameworkOverrides().wrapIncoming(()=>i(),"resize-observer")}doNextPolyfillTurn(e){this.polyfillFunctions.push(e),this.schedulePolyfill()}schedulePolyfill(){if(this.polyfillScheduled)return;const e=()=>{const t=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],t.forEach(r=>r())};this.polyfillScheduled=!0,window.setTimeout(e,EJ)}};GT=S([$e("resizeObserverService")],GT);var Wp=class extends Ae{constructor(){super(...arguments),this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}setScrollTop(e){const t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){const r=this.paginationProxy.getCurrentPage();r!==this.lastPage&&(this.lastPage=r,this.scrollGoingDown=!0)}this.lastScrollTop=e}init(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&console.warn(`AG Grid: AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,r){this.verifyAnimationFrameOn(r);const n={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[r],n),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((r,n)=>r.index!==n.index?t*(n.index-r.index):n.createOrder-r.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,r=t.list,n=this.createTasksP2,i=n.list,s=this.destroyTasks,o=new Date().getTime();let a=new Date().getTime()-o;const l=e<=0,c=this.ctrlsService.getGridBodyCtrl();for(;l||a<e;){if(!c.getScrollFeature().scrollGridIfNeeded()){let d;if(r.length)this.sortTaskList(t),d=r.pop().task;else if(i.length)this.sortTaskList(n),d=i.pop().task;else if(s.length)d=s.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(d)||d()}a=new Date().getTime()-o}r.length||i.length||s.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){const t=this.gos.getWindow();t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{if(!this.isOn()){window.setTimeout(e,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,e()}))}}};S([F("ctrlsService")],Wp.prototype,"ctrlsService",2);S([F("paginationProxy")],Wp.prototype,"paginationProxy",2);S([_e],Wp.prototype,"init",1);Wp=S([$e("animationFrameService")],Wp);var $m=class extends Ae{postConstruct(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide"}expandRows(e){if(!this.isClientSideRowModel)return;const t=new Set(e);this.rowModel.forEachNode(r=>{r.id&&t.has(r.id)&&(r.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const e=[];return this.rowModel.forEachNode(({expanded:t,id:r})=>{t&&r&&e.push(r)}),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,r,n){e&&(r&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,t,r,n),e.setExpanded(t,void 0,n))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}};S([F("rowModel")],$m.prototype,"rowModel",2);S([_e],$m.prototype,"postConstruct",1);$m=S([$e("expansionService")],$m);var io=class extends Ae{postConstruct(){var e;this.activeMenuFactory=(e=this.enterpriseMenuFactory)!=null?e:this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,r){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,r)}getContextMenuPosition(e,t){const r=this.getRowCtrl(e),n=this.getCellGui(r,t);if(!n)return r?{x:0,y:r.getRowYPosition()}:{x:0,y:0};const i=n.getBoundingClientRect();return{x:i.x+i.width/2,y:i.y+i.height/2}}showContextMenu(e){var t,r,n;const{column:i,rowNode:s}=e;let{anchorToElement:o,value:a}=e;s&&i&&a==null&&(a=s.getValueFromValueService(i)),o==null&&(o=this.getContextMenuAnchorElement(s,i)),(n=this.contextMenuFactory)==null||n.onContextMenu((t=e.mouseEvent)!=null?t:null,(r=e.touchEvent)!=null?r:null,s??null,i??null,a,o)}showColumnChooser(e){var t;(t=this.columnChooserFactory)==null||t.showColumnChooser(e)}hidePopupMenu(){var e;(e=this.contextMenuFactory)==null||e.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){var e;(e=this.columnChooserFactory)==null||e.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){const{suppressMenu:t,suppressHeaderMenuButton:r}=e.getColDef();return!(r??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&this.filterManager.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!(e!=null&&e.getColDef().suppressHeaderContextMenu)&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(jl()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return this.filterManager.isFilterAllowed(e)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(e){var t;const r=e.getColDef(),n=(t=r.floatingFilterComponentParams)==null?void 0:t.suppressFilterButton;return n!=null&&ot("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),r.suppressFloatingFilterButton==null?!n:!r.suppressFloatingFilterButton}getColumnMenuType(){var e;return(e=this.gos.get("columnMenu"))!=null?e:"legacy"}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()||this.gos.exists("suppressMenuHide")?e:!0}showColumnMenuCommon(e,t,r,n){const{column:i,positionBy:s}=t;if(s==="button"){const{buttonElement:o}=t;e.showMenuAfterButtonClick(i,o,r,n)}else if(s==="mouse"){const{mouseEvent:o}=t;e.showMenuAfterMouseEvent(i,o,r,n)}else i&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(i,"auto"),this.animationFrameService.requestAnimationFrame(()=>{const o=this.ctrlsService.getHeaderRowContainerCtrl(i.getPinned()).getHeaderCtrlForColumn(i);e.showMenuAfterButtonClick(i,o.getAnchorElementForMenu(n),r,!0)}))}getRowCtrl(e){const{rowIndex:t,rowPinned:r}=e||{};if(t!=null)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:r})||void 0}getCellGui(e,t){if(!e||!t)return;const r=e.getCellCtrl(t);return(r==null?void 0:r.getGui())||void 0}getContextMenuAnchorElement(e,t){const r=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),n=this.getRowCtrl(e);if(!n)return r;const i=this.getCellGui(n,t);return i||(n.isFullWidth()?n.getFullWidthElement():r)}};S([F("filterMenuFactory")],io.prototype,"filterMenuFactory",2);S([F("ctrlsService")],io.prototype,"ctrlsService",2);S([F("animationFrameService")],io.prototype,"animationFrameService",2);S([F("filterManager")],io.prototype,"filterManager",2);S([F("rowRenderer")],io.prototype,"rowRenderer",2);S([rr("columnChooserFactory")],io.prototype,"columnChooserFactory",2);S([rr("contextMenuFactory")],io.prototype,"contextMenuFactory",2);S([rr("enterpriseMenuFactory")],io.prototype,"enterpriseMenuFactory",2);S([_e],io.prototype,"postConstruct",1);io=S([$e("menuService")],io);var Ld=class extends Ae{postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const r=this.getHeaderCellForColumn(e);if(!r)return-1;const n=this.rowRenderer.getAllCellsForColumn(e);return t||n.push(r),this.addElementsToContainerAndGetWidth(n)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){const t=document.createElement("form");t.style.position="fixed";const r=this.centerRowContainerCtrl.getContainerElement();e.forEach(s=>this.cloneItemIntoDummy(s,t)),r.appendChild(t);const n=t.offsetWidth;r.removeChild(t);const i=this.getAutoSizePadding();return n+i}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(r=>{const n=r.getHtmlElementForColumnHeader(e);n!=null&&(t=n)}),t}cloneItemIntoDummy(e,t){const r=e.cloneNode(!0);r.style.width="",r.style.position="static",r.style.left="";const n=document.createElement("div"),i=n.classList;["ag-header-cell","ag-header-group-cell"].some(a=>r.classList.contains(a))?(i.add("ag-header","ag-header-row"),n.style.position="static"):i.add("ag-row");let o=e.parentElement;for(;o;){if(["ag-header-row","ag-row"].some(l=>o.classList.contains(l))){for(let l=0;l<o.classList.length;l++){const c=o.classList[l];c!="ag-row-position-absolute"&&i.add(c)}break}o=o.parentElement}n.appendChild(r),t.appendChild(n)}};S([F("rowRenderer")],Ld.prototype,"rowRenderer",2);S([F("ctrlsService")],Ld.prototype,"ctrlsService",2);S([F("rowCssClassCalculator")],Ld.prototype,"rowCssClassCalculator",2);S([_e],Ld.prototype,"postConstruct",1);Ld=S([$e("autoWidthCalculator")],Ld);var dy=class extends Ae{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.topContainerHeight=0,this.bottomContainerHeight=0}postConstruct(){this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl})}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){var t,r,n,i;if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let o=(t=e.childStore)==null?void 0:t.getStoreBounds();return e.footer&&(o=(r=e.sibling.childStore)==null?void 0:r.getStoreBounds()),((n=o==null?void 0:o.heightPx)!=null?n:0)+((i=o==null?void 0:o.topPx)!=null?i:0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){const t=e.footer&&e.rowIndex===0,r=!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1;if(t||r){let n=e.footer?e.sibling:e;for(;n.isExpandable()&&n.expanded;)if(n.master)n=n.detailNode;else if(n.childrenAfterSort){if(n.childrenAfterSort.length===0)break;n=Wt(n.childrenAfterSort)}return n.rowTop+n.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){const t=e==="top";let r=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,r);const n=t?this.rowRenderer.getFirstVisibleVerticalPixel():this.rowRenderer.getLastVisibleVerticalPixel(),i=new Set,s=c=>{if(i.add(c),t){const u=this.getLastPixelOfGroup(c),d=n+r+c.rowHeight;u<d?c.stickyRowTop=r+(u-d):c.stickyRowTop=r}else{const u=this.getFirstPixelOfGroup(c),d=n-(r+c.rowHeight);u>d?c.stickyRowTop=r-(u-d):c.stickyRowTop=r}r=0,i.forEach(u=>{const d=u.stickyRowTop+u.rowHeight;r<d&&(r=d)})},o=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),l=c=>c.displayed?c.footer?o===!0||o==="grand"&&c.level===-1||o==="group"&&c.level>-1?!1:!i.has(c):c.isExpandable()?a===!0?!1:!i.has(c)&&c.expanded:!1:!1;for(let c=0;c<100;c++){let u=n+r;t||(u=n-r);const d=this.rowModel.getRowIndexAtPixel(u),p=this.rowModel.getRow(d);if(p==null)break;const m=this.getStickyAncestors(p).find(C=>(t?C.rowIndex<d:C.rowIndex>d)&&l(C));if(m){s(m);continue}if((t?p.rowTop<u:p.rowTop+p.rowHeight>u)&&l(p)){s(p);continue}break}return t||i.forEach(c=>{c.stickyRowTop=r-(c.stickyRowTop+c.rowHeight)}),this.refreshNodesAndContainerHeight(e,i,r)}areFooterRowsStickySuppressed(){const e=this.gos.get("suppressStickyTotalRow");if(e===!0)return!0;const t=!!this.gos.get("groupIncludeFooter")||e==="group",r=!!this.gos.get("groupIncludeTotalFooter")||e==="grand";return t&&r?!0:r?"grand":t?"group":!1}canRowsBeSticky(){const e=this.gos.isGroupRowsSticky(),t=this.areFooterRowsStickySuppressed(),r=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!r)}getStickyAncestors(e){const t=[];let r=e.footer?e.sibling:e.parent;for(;r;)r.sibling&&t.push(r.sibling),t.push(r),r=r.parent;return t.reverse()}checkStickyRows(){const e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){const t=new Set;if(this.stickyTopRowCtrls.some(r=>r.getRowNode()===e)){for(let r=0;r<this.stickyTopRowCtrls.length;r++){const n=this.stickyTopRowCtrls[r].getRowNode();n!==e&&t.add(n)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows();return}for(let r=0;r<this.stickyBottomRowCtrls.length;r++){const n=this.stickyBottomRowCtrls[r].getRowNode();n!==e&&t.add(n)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t,r){const n=e==="top",i=n?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,s={},o=[];for(let d=0;d<i.length;d++){const p=i[d].getRowNode();if(!t.has(p)){s[p.id]=i[d],p.sticky=!1;continue}o.push(i[d])}const a=new Set;for(let d=0;d<o.length;d++)a.add(o[d].getRowNode());const l=[];t.forEach(d=>{a.has(d)||(d.sticky=!0,l.push(this.createRowCon(d,!1,!1)))});let c=!!l.length||o.length!==i.length;n?this.topContainerHeight!==r&&(this.topContainerHeight=r,this.gridBodyCtrl.setStickyTopHeight(r),c=!0):this.bottomContainerHeight!==r&&(this.bottomContainerHeight=r,this.gridBodyCtrl.setStickyBottomHeight(r),c=!0),this.destroyRowCtrls(s,!1);const u=[...o,...l];return u.sort((d,p)=>p.getRowNode().rowIndex-d.getRowNode().rowIndex),n||u.reverse(),u.forEach(d=>d.setRowTop(d.getRowNode().stickyRowTop)),c?(n?this.stickyTopRowCtrls=u:this.stickyBottomRowCtrls=u,!0):!1}};S([F("rowModel")],dy.prototype,"rowModel",2);S([F("rowRenderer")],dy.prototype,"rowRenderer",2);S([F("ctrlsService")],dy.prototype,"ctrlsService",2);S([_e],dy.prototype,"postConstruct",1);var _s=class extends Ae{constructor(){super(...arguments),this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach(s=>s.onRangeSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(s=>s.updateRangeBordersIfRangeCount())},r=()=>{this.eventService.addEventListener(_.EVENT_RANGE_SELECTION_CHANGED,e),this.eventService.addEventListener(_.EVENT_COLUMN_MOVED,t),this.eventService.addEventListener(_.EVENT_COLUMN_PINNED,t),this.eventService.addEventListener(_.EVENT_COLUMN_VISIBLE,t)},n=()=>{this.eventService.removeEventListener(_.EVENT_RANGE_SELECTION_CHANGED,e),this.eventService.removeEventListener(_.EVENT_COLUMN_MOVED,t),this.eventService.removeEventListener(_.EVENT_COLUMN_PINNED,t),this.eventService.removeEventListener(_.EVENT_COLUMN_VISIBLE,t)};this.addDestroyFunc(()=>n()),this.addManagedPropertyListener("enableRangeSelection",s=>{s.currentValue?r():n()}),this.gos.get("enableRangeSelection")&&r()}}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){if(this.addManagedListener(this.eventService,_.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,_.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,_.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.gos.isGroupRowsSticky()){const e=this.rowModel.getType();(e==="clientSide"||e==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new dy(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gos.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new PJ(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){const e=Zc(this.rowCtrlsByRowIndex),t=Zc(this.zombieRowCtrls),r=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||r.length>0?this.allRowCtrls=[...e,...t,...r]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}registerCellEventListeners(){this.addManagedListener(this.eventService,_.EVENT_CELL_FOCUSED,e=>{this.onCellFocusChanged(e)}),this.addManagedListener(this.eventService,_.EVENT_CELL_FOCUS_CLEARED,()=>{this.onCellFocusChanged()}),this.addManagedListener(this.eventService,_.EVENT_FLASH_CELLS,e=>{this.getAllCellCtrls().forEach(t=>t.onFlashCells(e))}),this.addManagedListener(this.eventService,_.EVENT_COLUMN_HOVER_CHANGED,()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())}),this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())}),this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,_.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getAllGridColumns().forEach(t=>{const r=l=>{this.getAllCellCtrls().forEach(c=>{c.getColumn()===t&&l(c)})},n=()=>{r(l=>l.onLeftChanged())},i=()=>{r(l=>l.onWidthChanged())},s=()=>{r(l=>l.onFirstRightPinnedChanged())},o=()=>{r(l=>l.onLastLeftPinnedChanged())},a=()=>{r(l=>l.onColDefChanged())};t.addEventListener("leftChanged",n),t.addEventListener("widthChanged",i),t.addEventListener("firstRightPinnedChanged",s),t.addEventListener("lastLeftPinnedChanged",o),t.addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",n),t.removeEventListener("widthChanged",i),t.removeEventListener("firstRightPinnedChanged",s),t.removeEventListener("lastLeftPinnedChanged",o),t.removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){const e=this.gos.isDomLayout("print"),t=e||this.gos.get("embedFullWidthRows"),r=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,r&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){const t=[];return this.getAllRowCtrls().forEach(r=>{const n=r.getCellElement(e);n&&t.push(n)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){e.forEach(r=>{r.destroyFirstPass(),r.destroySecondPass()}),e.length=0,t&&t.forEach(r=>{const n=new wd(r,this.beans,!1,!1,this.printLayout);e.push(n)})}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){var r;if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else if((r=this.cachedRowCtrls)!=null&&r.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const n=i=>{const s=i[e.rowIndex];s&&s.getRowNode()===e&&(s.destroyFirstPass(),s.destroySecondPass(),i[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e==null||e.forEach(r=>this.redrawRow(r,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=e!=null&&e.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;const r=this.gos.getActiveDomElement(),n=this.gos.getDomData(r,Cd.DOM_DATA_KEY_CELL_CTRL),i=this.gos.getDomData(r,wd.DOM_DATA_KEY_ROW_CTRL);return n||i?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const r=!e.domLayoutChanged&&!!e.recycleRows,n=e.animate&&this.gos.isAnimateRows(),i=r?this.getRowsToRecycle():null;r||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(i,n),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,r=this.gos.get("suppressScrollOnNewData");t&&!r&&this.gridBodyCtrl.getScrollFeature().scrollToTop()}updateContainerHeights(){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let e=this.paginationProxy.getCurrentPageHeight();e===0&&(e=1),this.rowContainerHeightService.setModelHeight(e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0}releaseLockOnRefresh(){this.refreshInProgress=!1}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&(this.focusService.setRestoreFocusedCell(e),this.onCellFocusChanged(this.beans.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"mock"})))}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),r=t.length;for(let n=0;n<r;n++){const i=t[n].getAllCellCtrls(),s=i.length;for(let o=0;o<s;o++)e.push(i[o])}return e}getAllRowCtrls(){const e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],r=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(const n in this.rowCtrlsByRowIndex)r.push(this.rowCtrlsByRowIndex[n]);return r}addRenderedRowListener(e,t,r){const n=this.rowCtrlsByRowIndex[t];n&&n.addEventListener(e,r)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach(t=>t.flashCell(e))}refreshCells(e={}){const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};this.getCellCtrls(e.rowNodes,e.columns).forEach(r=>r.refreshOrDestroyCell(t)),e.rowNodes&&(this.getRowCtrls(e.rowNodes).forEach(r=>{if(!r.isFullWidth())return;r.refreshFullWidth()||this.redrawRow(r.getRowNode(),!0)}),this.dispatchDisplayedRowsChanged(!1))}getCellRendererInstances(e){var t;const r=this.getCellCtrls(e.rowNodes,e.columns).map(s=>s.getCellRenderer()).filter(s=>s!=null);if((t=e.columns)!=null&&t.length)return r;const n=[],i=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(s=>{if(i&&!this.isRowInMap(s.getRowNode(),i)||!s.isFullWidth())return;const o=s.getFullWidthCellRenderers();for(let a=0;a<o.length;a++){const l=o[a];l!=null&&n.push(l)}}),[...n,...r]}getCellEditorInstances(e){const t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(r=>{const n=r.getCellEditor();n&&t.push(n)}),t}getEditingCells(){const e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){const r=t.getCellPosition();e.push(r)}}),e}mapRowNodes(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach(r=>{const n=r.id;switch(r.rowPinned){case"top":t.top[n]=r;break;case"bottom":t.bottom[n]=r;break;default:t.normal[n]=r;break}}),t}isRowInMap(e,t){const r=e.id;switch(e.rowPinned){case"top":return t.top[r]!=null;case"bottom":return t.bottom[r]!=null;default:return t.normal[r]!=null}}getRowCtrls(e){const t=this.mapRowNodes(e),r=this.getAllRowCtrls();return!e||!t?r:r.filter(n=>{const i=n.getRowNode();return this.isRowInMap(i,t)})}getCellCtrls(e,t){let r;xe(t)&&(r={},t.forEach(i=>{const s=this.columnModel.getGridColumn(i);xe(s)&&(r[s.getId()]=!0)}));const n=[];return this.getRowCtrls(e).forEach(i=>{i.getAllCellCtrls().forEach(s=>{const o=s.getColumn().getId();r&&!r[o]||n.push(s)})}),n}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){const e=[];oi(this.rowCtrlsByRowIndex,(r,n)=>{n.getRowNode().id==null&&e.push(r)}),this.removeRowCtrls(e);const t={};return oi(this.rowCtrlsByRowIndex,(r,n)=>{const i=n.getRowNode();t[i.id]=n}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(r=>{const n=this.rowCtrlsByRowIndex[r];n&&(n.destroyFirstPass(t),n.destroySecondPass()),delete this.rowCtrlsByRowIndex[r]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{afterScroll:t}=e;let r;this.stickyRowFeature&&UD()&&(r=this.getCellToRestoreFocusToAfterRefresh()||void 0);const n=this.firstRenderedRow,i=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let s=!1;this.stickyRowFeature&&(s=this.stickyRowFeature.checkStickyRows());const o=this.firstRenderedRow!==n||this.lastRenderedRow!==i;if(!(t&&!s&&!o)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!s),r!=null)){const a=this.getCellToRestoreFocusToAfterRefresh();r!=null&&a==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(r))}}removeRowCompsNotToDraw(e,t){const r={};e.forEach(s=>r[s]=!0);const i=Object.keys(this.rowCtrlsByRowIndex).filter(s=>!r[s]);this.removeRowCtrls(i,t)}calculateIndexesToDraw(e){let t=Pz(this.firstRenderedRow,this.lastRenderedRow);const r=(i,s)=>{const o=s.getRowNode().rowIndex;o!=null&&(o<this.firstRenderedRow||o>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(s)&&t.push(o)};oi(this.rowCtrlsByRowIndex,r),oi(e,r),t.sort((i,s)=>i-s);const n=[];for(let i=0;i<t.length;i++){const s=t[i],o=this.paginationProxy.getRow(s);o&&!o.sticky&&n.push(s)}return n}recycleRows(e,t=!1,r=!1){const n=this.calculateIndexesToDraw(e);(this.printLayout||r)&&(t=!1),this.removeRowCompsNotToDraw(n,!t),n.forEach(i=>{this.createOrUpdateRowCtrl(i,e,t,r)}),e&&(r&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){const t={type:_.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll:e};this.eventService.dispatchEvent(t)}onDisplayedColumnsChanged(){const e=this.columnModel.isPinningLeft(),t=this.columnModel.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(t=>{const r=t.getRowNode().rowIndex;e.push(r.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(r=>{if(!r.isFullWidth())return!1;const n=r.getRowNode();return!(t!=null&&!this.isRowInMap(n,t))})}createOrUpdateRowCtrl(e,t,r,n){let i,s=this.rowCtrlsByRowIndex[e];if(s||(i=this.paginationProxy.getRow(e),xe(i)&&xe(t)&&t[i.id]&&i.alreadyRendered&&(s=t[i.id],t[i.id]=null)),!s)if(i||(i=this.paginationProxy.getRow(e)),xe(i))s=this.createRowCon(i,r,n);else return;return i&&(i.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=s,s}destroyRowCtrls(e,t){const r=[];oi(e,(n,i)=>{if(i){if(this.cachedRowCtrls&&i.isCacheable()){this.cachedRowCtrls.addRow(i);return}i.destroyFirstPass(!t),t?(this.zombieRowCtrls[i.getInstanceId()]=i,r.push(()=>{i.destroySecondPass(),delete this.zombieRowCtrls[i.getInstanceId()]})):i.destroySecondPass()}}),t&&(r.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),I4(r))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=this.gos.getRowHeightAsNumber();return e*t}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let e,t;if(!this.paginationProxy.isRowsToRender())e=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.paginationProxy.getPageFirstRow(),t=this.paginationProxy.getPageLastRow();else{const a=this.getRowBufferInPixels(),l=this.ctrlsService.getGridBodyCtrl(),c=this.gos.get("suppressRowVirtualisation");let u=!1,d,p;do{const w=this.paginationProxy.getPixelOffset(),{pageFirstPixel:b,pageLastPixel:x}=this.paginationProxy.getCurrentPagePixelRange(),E=this.rowContainerHeightService.getDivStretchOffset(),I=l.getScrollFeature().getVScrollPosition(),k=I.top,P=I.bottom;c?(d=b+E,p=x+E):(d=Math.max(k+w-a,b)+E,p=Math.min(P+w+a,x)+E),this.firstVisibleVPixel=Math.max(k+w,b)+E,this.lastVisibleVPixel=Math.min(P+w,x)+E,u=this.ensureAllRowsInRangeHaveHeightsCalculated(d,p)}while(u);let f=this.paginationProxy.getRowIndexAtPixel(d),m=this.paginationProxy.getRowIndexAtPixel(p);const y=this.paginationProxy.getPageFirstRow(),C=this.paginationProxy.getPageLastRow();f<y&&(f=y),m>C&&(m=C),e=f,t=m}const r=this.gos.isDomLayout("normal"),n=this.gos.get("suppressMaxRenderedRowRestriction"),i=Math.max(this.getRowBuffer(),500);r&&!n&&t-e>i&&(t=e+i);const s=e!==this.firstRenderedRow,o=t!==this.lastRenderedRow;if(s||o){this.firstRenderedRow=e,this.lastRenderedRow=t;const a={type:_.EVENT_VIEWPORT_CHANGED,firstRow:e,lastRow:t};this.eventService.dispatchEvent(a)}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;const e={type:_.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent(e)})}ensureAllRowsInRangeHaveHeightsCalculated(e,t){const r=this.paginationProxy.ensureRowHeightsValid(e,t,-1,-1);return r&&this.updateContainerHeights(),r}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){const n=e.getRowNode(),i=this.focusService.isRowNodeFocused(n),s=e.isEditing(),o=n.detail;return i||s||o?!!this.paginationProxy.isRowPresent(n):!1}createRowCon(e,t,r){const n=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(n)return n;const i=this.gos.get("suppressAnimationFrame"),s=r&&!i&&!this.printLayout;return new wd(e,this.beans,t,s,this.printLayout)}getRenderedNodes(){const e=this.rowCtrlsByRowIndex;return Object.values(e).map(t=>t.getRowNode())}getRowByPosition(e){let t;const{rowIndex:r}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[r];break;case"bottom":t=this.bottomRowCtrls[r];break;default:t=this.rowCtrlsByRowIndex[r],t||(t=this.getStickyTopRowCtrls().find(n=>n.getRowNode().rowIndex===r)||null,t||(t=this.getStickyBottomRowCtrls().find(n=>n.getRowNode().rowIndex===r)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const n=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!n}};S([F("animationFrameService")],_s.prototype,"animationFrameService",2);S([F("paginationProxy")],_s.prototype,"paginationProxy",2);S([F("columnModel")],_s.prototype,"columnModel",2);S([F("pinnedRowModel")],_s.prototype,"pinnedRowModel",2);S([F("rowModel")],_s.prototype,"rowModel",2);S([F("focusService")],_s.prototype,"focusService",2);S([F("beans")],_s.prototype,"beans",2);S([F("rowContainerHeightService")],_s.prototype,"rowContainerHeightService",2);S([F("ctrlsService")],_s.prototype,"ctrlsService",2);S([_e],_s.prototype,"postConstruct",1);_s=S([$e("rowRenderer")],_s);var PJ=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,r=this.entriesMap[t];delete this.entriesMap[t],zi(this.entriesList,r)}removeFromCache(e){const t=e.getRowNode().id;delete this.entriesMap[t],zi(this.entriesList,e)}getEntries(){return this.entriesList}},Um=class extends Ae{init(){this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",()=>this.setPinnedTopRowData()),this.addManagedPropertyListener("pinnedBottomRowData",()=>this.setPinnedBottomRowData())}isEmpty(e){const t=e==="top"?this.pinnedTopRows:this.pinnedBottomRows;return Ks(t)}isRowsToRender(e){return!this.isEmpty(e)}getRowAtPixel(e,t){const r=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(Ks(r))return 0;for(let n=0;n<r.length;n++){const i=r[n];if(i.rowTop+i.rowHeight-1>=e)return n}return r.length-1}setPinnedTopRowData(){const e=this.gos.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(e,!0);const t={type:_.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(t)}setPinnedBottomRowData(){const e=this.gos.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(e,!1);const t={type:_.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(t)}createNodesFromData(e,t){const r=[];if(e){let n=0;e.forEach((i,s)=>{const o=new Dt(this.beans);o.data=i;const a=t?Dt.ID_PREFIX_TOP_PINNED:Dt.ID_PREFIX_BOTTOM_PINNED;o.id=a+s,o.rowPinned=t?"top":"bottom",o.setRowTop(n),o.setRowHeight(this.gos.getRowHeightForNode(o).height),o.setRowIndex(s),n+=o.rowHeight,r.push(o)})}return r}getPinnedTopRowData(){return this.pinnedTopRows}getPinnedBottomRowData(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(e){return this.pinnedTopRows[e]}getPinnedBottomRow(e){return this.pinnedBottomRows[e]}forEachPinnedTopRow(e){Ks(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)}forEachPinnedBottomRow(e){Ks(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(e){if(!e||e.length===0)return 0;const t=Wt(e);return t.rowTop+t.rowHeight}};S([F("beans")],Um.prototype,"beans",2);S([_e],Um.prototype,"init",1);Um=S([$e("pinnedRowModel")],Um);var rx=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let r=0;r<e.children.length;r++)this.depthFirstSearchChangedPath(e.children[r],t);t(e.rowNode)}depthFirstSearchEverything(e,t,r){if(e.childrenAfterGroup)for(let n=0;n<e.childrenAfterGroup.length;n++){const i=e.childrenAfterGroup[n];i.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[n],t,r):r&&t(i)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,r=!1){this.active&&!r?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,r=0;for(;!this.mapToItems[t.id];){const n={rowNode:t,children:null};this.mapToItems[t.id]=n,r++,t=t.parent}return r}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let r=e;for(;r;)this.nodeIdsToColumns[r.id]||(this.nodeIdsToColumns[r.id]={}),t.forEach(n=>this.nodeIdsToColumns[r.id][n.getId()]=!0),r=r.parent}linkPathItems(e,t){let r=e;for(let n=0;n<t;n++){const i=this.mapToItems[r.id],s=this.mapToItems[r.parent.id];s.children||(s.children=[]),s.children.push(i),r=r.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const r=this.createPathItems(e);this.linkPathItems(e,r),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const r=this.nodeIdsToColumns[e.id];return t.filter(i=>r[i.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const r=this.nodeIdsToColumns[e.id];return t.filter(i=>!r[i.getId()])}},Tf=class Vu extends Ae{constructor(t){super(),this.state=Vu.STATE_WAITING_TO_LOAD,this.version=0,this.id=t}getId(){return this.id}load(){this.state=Vu.STATE_LOADING,this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state=Vu.STATE_WAITING_TO_LOAD}getState(){return this.state}pageLoadFailed(t){this.isRequestMostRecentAndLive(t)&&(this.state=Vu.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)}success(t,r){this.successCommon(t,r)}pageLoaded(t,r,n){this.successCommon(t,{rowData:r,rowCount:n})}isRequestMostRecentAndLive(t){const r=t===this.version,n=this.isAlive();return r&&n}successCommon(t,r){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(t)&&(this.state=Vu.STATE_LOADED,this.processServerResult(r))}dispatchLoadCompleted(t=!0){const r={type:Vu.EVENT_LOAD_COMPLETE,success:t,block:this};this.dispatchEvent(r)}};Tf.EVENT_LOAD_COMPLETE="loadComplete";Tf.STATE_WAITING_TO_LOAD="needsLoading";Tf.STATE_LOADING="loading";Tf.STATE_LOADED="loaded";Tf.STATE_FAILED="failed";var jT=Tf,Ma=class extends Ae{constructor(){super(...arguments),this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=pt.debounce(this.performCheckBlocksToLoad.bind(this),e))}setBeans(e){this.logger=e.create("RowNodeBlockLoader")}getMaxConcurrentDatasourceRequests(){const e=this.gos.get("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener(jT.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){pt.removeFromArray(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:Ma.BLOCK_LOADED_EVENT}),this.activeBlockLoadsCount==0&&this.dispatchEvent({type:Ma.BLOCK_LOADER_FINISHED_EVENT})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.logger.log("checkBlockToLoad: max loads exceeded");return}const e=this.getAvailableLoadingCount(),t=this.blocks.filter(r=>r.getState()===jT.STATE_WAITING_TO_LOAD).slice(0,e);this.registerLoads(t.length),t.forEach(r=>r.load()),this.printCacheStatus()}getBlockState(){if(this.gos.isRowModelType("serverSide"))return this.rowModel.getBlockStates();const e={};return this.blocks.forEach(t=>{const{id:r,state:n}=t.getBlockStateJson();e[r]=n}),e}printCacheStatus(){this.logger.isLogging()&&this.logger.log(`printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}};Ma.BLOCK_LOADED_EVENT="blockLoaded";Ma.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished";S([F("rowModel")],Ma.prototype,"rowModel",2);S([_e],Ma.prototype,"postConstruct",1);S([Go(0,Ys("loggerFactory"))],Ma.prototype,"setBeans",1);Ma=S([$e("rowNodeBlockLoader")],Ma);var Wm=class extends Ae{constructor(){super(...arguments),this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.pixelOffset=0,this.masterRowCount=0}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,_.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this)),this.onModelUpdated()}ensureRowHeightsValid(e,t,r,n){const i=this.rowModel.ensureRowHeightsValid(e,t,this.getPageFirstRow(),this.getPageLastRow());return i&&this.calculatePages(),i}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onModelUpdated(e){this.calculatePages();const t={type:_.EVENT_PAGINATION_CHANGED,animate:e?e.animate:!1,newData:e?e.newData:!1,newPage:e?e.newPage:!1,newPageSize:e?e.newPageSize:!1,keepRenderedRows:e?e.keepRenderedRows:!1};this.eventService.dispatchEvent(t)}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages();const e={type:_.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(e)}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){if(!this.active||this.currentPage===e||typeof this.currentPage!="number")return;this.currentPage=e,this.calculatePages();const t={type:_.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!0,newPageSize:!1,keepRenderedRows:!1};this.eventService.dispatchEvent(t)}getPixelOffset(){return this.pixelOffset}getRow(e){return this.rowModel.getRow(e)}getRowNode(e){return this.rowModel.getRowNode(e)}getRowIndexAtPixel(e){return this.rowModel.getRowIndexAtPixel(e)}getCurrentPageHeight(){return gt(this.topRowBounds)||gt(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){const e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}}isRowPresent(e){return this.rowModel.isRowPresent(e)?e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex:!1}isEmpty(){return this.rowModel.isEmpty()}isRowsToRender(){return this.rowModel.isRowsToRender()}forEachNode(e){return this.rowModel.forEachNode(e)}forEachNodeOnPage(e){const t=this.getPageFirstRow(),r=this.getPageLastRow();for(let n=t;n<=r;n++){const i=this.getRow(n);i&&e(i)}}getType(){return this.rowModel.getType()}getRowBounds(e){const t=this.rowModel.getRowBounds(e);return t.rowIndex=e,t}getPageFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getPageLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getRowCount(){return this.rowModel.getRowCount()}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}isLastPageFound(){return this.rowModel.isLastRowIndexKnown()}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return xe(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:xe(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:xe(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:xe(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;if(this.pageSizeAutoCalculated=void 0,this.pageSize===e)return;this.calculatePages();const t={type:_.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!0,keepRenderedRows:!1};this.eventService.dispatchEvent(t)}setPageSize(e,t){const r=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}if(r!==this.pageSize){this.calculatePages();const n={type:_.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!0,keepRenderedRows:!0};this.eventService.dispatchEvent(n)}}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(xe(this.topRowBounds)?this.topRowBounds.rowTop:0)}setPixelOffset(e){this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:_.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const t=this.pageSize*this.currentPage;let r=this.pageSize*(this.currentPage+1)-1;if(r>e&&(r=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),r===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const n=this.rowModel.getTopLevelRowDisplayedIndex(r+1);this.bottomDisplayedRowIndex=n-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}};S([F("rowModel")],Wm.prototype,"rowModel",2);S([_e],Wm.prototype,"postConstruct",1);Wm=S([$e("paginationProxy")],Wm);var bw=class extends Ae{processAllCellClasses(e,t,r,n){this.processClassRules(void 0,e.cellClassRules,t,r,n),this.processStaticCellClasses(e,t,r)}processClassRules(e,t,r,n,i){if(t==null&&e==null)return;const s={},o={},a=(l,c)=>{l.split(" ").forEach(u=>{u.trim()!=""&&c(u)})};if(t){const l=Object.keys(t);for(let c=0;c<l.length;c++){const u=l[c],d=t[u];let p;typeof d=="string"?p=this.expressionService.evaluate(d,r):typeof d=="function"&&(p=d(r)),a(u,f=>{p?s[f]=!0:o[f]=!0})}}e&&i&&Object.keys(e).forEach(l=>a(l,c=>{s[c]||(o[c]=!0)})),i&&Object.keys(o).forEach(i),Object.keys(s).forEach(n)}getStaticCellClasses(e,t){const{cellClass:r}=e;if(!r)return[];let n;return typeof r=="function"?n=r(t):n=r,typeof n=="string"&&(n=[n]),n||[]}processStaticCellClasses(e,t,r){this.getStaticCellClasses(e,t).forEach(i=>{r(i)})}};S([F("expressionService")],bw.prototype,"expressionService",2);bw=S([$e("stylingService")],bw);var Y$=class extends VS{constructor(e){super(e,"ag-toggle-button")}setValue(e,t){return super.setValue(e,t),this.addOrRemoveCssClass("ag-selected",this.getValue()),this}},RJ=class extends Bo{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const r=super.setValue(e,t);return this.eInput.value=e,r}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},TJ=class extends ch{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));const e=Na();this.addManagedListener(this.eInput,"mousedown",()=>{this.isDisabled()||e||this.eInput.focus()}),this.eInput.step="any"}onWheel(e){this.gos.getActiveDomElement()===this.eInput&&e.preventDefault()}setMin(e){var t;const r=e instanceof Date?(t=Js(e??null,!1))!=null?t:void 0:e;return this.min===r?this:(this.min=r,Ta(this.eInput,"min",r),this)}setMax(e){var t;const r=e instanceof Date?(t=Js(e??null,!1))!=null?t:void 0:e;return this.max===r?this:(this.max=r,Ta(this.eInput,"max",r),this)}setStep(e){return this.step===e?this:(this.step=e,Ta(this.eInput,"step",e),this)}getDate(){var e;if(this.eInput.validity.valid)return(e=Yi(this.getValue()))!=null?e:void 0}setDate(e,t){this.setValue(Js(e??null,!1),t)}},AJ=class extends Bo{constructor(e){super(e,"ag-range-field","range")}postConstruct(){super.postConstruct();const{min:e,max:t,step:r}=this.config;e!=null&&this.setMinValue(e),t!=null&&this.setMaxValue(t),this.setStep(r||1)}addInputListeners(){this.addManagedListener(this.eInput,"input",e=>{const t=e.target.value;this.setValue(t)})}setMinValue(e){return this.min=e,this.eInput.setAttribute("min",e.toString()),this}setMaxValue(e){return this.max=e,this.eInput.setAttribute("max",e.toString()),this}setStep(e){return this.eInput.setAttribute("step",e.toString()),this}setValue(e,t){this.min!=null&&(e=Math.max(parseFloat(e),this.min).toString()),this.max!=null&&(e=Math.min(parseFloat(e),this.max).toString());const r=super.setValue(e,t);return this.eInput.value=e,r}},Pk=class extends mt{constructor(e,t){super('<div class="ag-rich-select-row" role="presentation"></div>'),this.params=e,this.wrapperEl=t}postConstruct(){this.addManagedListener(this.getGui(),"click",this.onClick.bind(this))}setState(e){let t="";this.params.valueFormatter&&(t=this.params.valueFormatter(e)),this.populateWithRenderer(e,t)||this.populateWithoutRenderer(e,t),this.value=e}highlightString(e){const{parsedValue:t}=this;if(this.params.cellRenderer||!xe(t))return;let r=xe(e);if(r){const n=t==null?void 0:t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(n>=0){const i=n+e.length,s=sn(t.slice(0,n),!0),o=sn(t.slice(n,i),!0),a=sn(t.slice(i));this.renderValueWithoutRenderer(`${s}<span class="ag-rich-select-row-text-highlight">${o}</span>${a}`)}else r=!1}r||this.renderValueWithoutRenderer(t)}updateHighlighted(e){var t;const r=this.getGui(),n=`ag-rich-select-row-${this.getCompId()}`;if((t=r.parentElement)==null||t.setAttribute("id",n),e){const i=this.getParentComponent().getAriaElement();GD(i,n),this.wrapperEl.setAttribute("data-active-option",n)}Hp(r.parentElement,e),this.addOrRemoveCssClass("ag-rich-select-row-selected",e)}populateWithoutRenderer(e,t){const r=this.gos.getDocument(),n=this.getGui(),i=r.createElement("span");i.style.overflow="hidden",i.style.textOverflow="ellipsis";const s=sn(xe(t)?t:e,!0);this.parsedValue=xe(s)?s:null,n.appendChild(i),this.renderValueWithoutRenderer(s),this.setTooltip({newTooltipText:this.parsedValue,shouldDisplayTooltip:()=>i.scrollWidth>i.clientWidth})}renderValueWithoutRenderer(e){const t=this.getGui().querySelector("span");t&&(t.innerHTML=xe(e)?e:"&nbsp;")}populateWithRenderer(e,t){let r,n;return this.params.cellRenderer&&(n=this.userComponentFactory.getCellRendererDetails(this.params,{value:e,valueFormatted:t,setTooltip:(i,s)=>{this.setTooltip({newTooltipText:i,shouldDisplayTooltip:s})}})),n&&(r=n.newAgStackInstance()),r&&nk(r,this.getGui()),r?(r.then(i=>{this.addDestroyFunc(()=>{this.getContext().destroyBean(i)})}),!0):!1}onClick(){const e=this.getParentComponent(),t={type:_.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value};e==null||e.dispatchEvent(t)}};S([F("userComponentFactory")],Pk.prototype,"userComponentFactory",2);S([_e],Pk.prototype,"postConstruct",1);var hy=class Q$ extends uy{constructor(t){super(Q$.getTemplate((t==null?void 0:t.cssIdentifier)||"default")),this.renderedRows=new Map,this.rowHeight=20,this.pageSize=-1,this.isScrolling=!1,this.isHeightFromTheme=!0;const{cssIdentifier:r="default",ariaRole:n="listbox",listName:i}=t||{};this.cssIdentifier=r,this.ariaRole=n,this.listName=i}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:t=>this.onFocusIn(t),onFocusOut:t=>this.onFocusOut(t),focusInnerElement:t=>this.focusInnerElement(t),onTabKeyDown:t=>this.onTabKeyDown(t),handleKeyDown:t=>this.handleKeyDown(t)}),this.setAriaProperties(),this.addManagedListener(this.eventService,_.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))}onGridStylesChanged(){this.rowHeight=this.getItemHeight(),this.refresh()}setAriaProperties(){const r=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),n=this.eContainer;Gr(n,this.ariaRole),As(n,r)}addResizeObserver(){const t=()=>this.animationFrameService.requestAnimationFrame(()=>this.drawVirtualRows()),r=this.resizeObserverService.observeResize(this.getGui(),t);this.addDestroyFunc(r)}focusInnerElement(t){this.focusRow(t?this.model.getRowCount()-1:0)}onFocusIn(t){const r=t.target;r.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=sz(r)-1)}onFocusOut(t){this.getFocusableElement().contains(t.relatedTarget)||(this.lastFocusedRowIndex=null)}handleKeyDown(t){switch(t.key){case Y.UP:case Y.DOWN:this.navigate(t.key===Y.UP)&&t.preventDefault();break;case Y.PAGE_HOME:case Y.PAGE_END:case Y.PAGE_UP:case Y.PAGE_DOWN:this.navigateToPage(t.key)!==null&&t.preventDefault();break}}onTabKeyDown(t){this.navigate(t.shiftKey)?t.preventDefault():(Yo(t),this.forceFocusOutOfContainer(t.shiftKey))}navigate(t){if(this.lastFocusedRowIndex==null)return!1;const r=this.lastFocusedRowIndex+(t?-1:1);return r<0||r>=this.model.getRowCount()?!1:(this.focusRow(r),!0)}navigateToPage(t,r="focused"){let n=!1;r==="focused"&&(r=this.getLastFocusedRow(),n=!0);const i=this.model.getRowCount()-1;let s=-1;return t===Y.PAGE_HOME?s=0:t===Y.PAGE_END?s=i:t===Y.PAGE_DOWN?s=Math.min(r+this.pageSize,i):t===Y.PAGE_UP&&(s=Math.max(r-this.pageSize,0)),s===-1?null:(n?this.focusRow(s):this.ensureIndexVisible(s),s)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(t){this.isScrolling||(this.isScrolling=!0,this.ensureIndexVisible(t),this.animationFrameService.requestAnimationFrame(()=>{if(this.isScrolling=!1,!this.isAlive())return;const r=this.renderedRows.get(t);r&&r.eDiv.focus()}))}getComponentAt(t){const r=this.renderedRows.get(t);return r&&r.rowComponent}forEachRenderedRow(t){this.renderedRows.forEach((r,n)=>t(r.rowComponent,n))}static getTemplate(t){return`<div class="ag-virtual-list-viewport ag-${t}-virtual-list-viewport" role="presentation">
                <div class="ag-virtual-list-container ag-${t}-virtual-list-container" ref="eContainer"></div>
            </div>`}getItemHeight(){return this.isHeightFromTheme?this.environment.getListItemHeight():this.rowHeight}ensureIndexVisible(t,r=!0){const n=this.model.getRowCount();if(typeof t!="number"||t<0||t>=n)return console.warn("AG Grid: invalid row index for ensureIndexVisible: "+t),!1;const i=t*this.rowHeight,s=i+this.rowHeight,o=this.getGui(),a=o.scrollTop,l=o.offsetHeight,c=a+l,u=r?0:this.rowHeight,d=a>i+u,p=c<s-u;if(d)return o.scrollTop=i,!0;if(p){const f=s-l;return o.scrollTop=f,!0}return!1}setComponentCreator(t){this.componentCreator=t}setComponentUpdater(t){this.componentUpdater=t}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(t){this.isHeightFromTheme=!1,this.rowHeight=t,this.refresh()}refresh(t){if(this.model==null||!this.isAlive())return;const r=this.model.getRowCount();this.eContainer.style.height=`${r*this.rowHeight}px`,kD(()=>this.eContainer.clientHeight>=r*this.rowHeight,()=>{this.isAlive()&&(this.canSoftRefresh(t)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))})}canSoftRefresh(t){return!!(t&&this.renderedRows.size&&typeof this.model.areRowsEqual=="function"&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach((t,r)=>this.removeRow(r))}drawVirtualRows(t){if(!this.isAlive()||!this.model)return;const r=this.getGui(),n=r.scrollTop,i=n+r.offsetHeight,s=Math.floor(n/this.rowHeight),o=Math.floor(i/this.rowHeight);this.pageSize=Math.floor((i-n)/this.rowHeight),this.ensureRowsRendered(s,o,t)}ensureRowsRendered(t,r,n){this.renderedRows.forEach((i,s)=>{(s<t||s>r)&&s!==this.lastFocusedRowIndex&&this.removeRow(s)}),n&&this.refreshRows();for(let i=t;i<=r;i++)this.renderedRows.has(i)||i<this.model.getRowCount()&&this.insertRow(i)}insertRow(t){const r=this.model.getRow(t),n=document.createElement("div");n.classList.add("ag-virtual-list-item",`ag-${this.cssIdentifier}-virtual-list-item`),Gr(n,this.ariaRole==="tree"?"treeitem":"option"),kS(n,this.model.getRowCount()),IS(n,t+1),n.setAttribute("tabindex","-1"),n.style.height=`${this.rowHeight}px`,n.style.top=`${this.rowHeight*t}px`;const i=this.componentCreator(r,n);i.addGuiEventListener("focusin",()=>this.lastFocusedRowIndex=t),n.appendChild(i.getGui()),this.renderedRows.has(t-1)?this.renderedRows.get(t-1).eDiv.insertAdjacentElement("afterend",n):this.renderedRows.has(t+1)?this.renderedRows.get(t+1).eDiv.insertAdjacentElement("beforebegin",n):this.eContainer.appendChild(n),this.renderedRows.set(t,{rowComponent:i,eDiv:n,value:r})}removeRow(t){const r=this.renderedRows.get(t);this.eContainer.removeChild(r.eDiv),this.destroyBean(r.rowComponent),this.renderedRows.delete(t)}refreshRows(){const t=this.model.getRowCount();this.renderedRows.forEach((r,n)=>{var i,s;if(n>=t)this.removeRow(n);else{const o=this.model.getRow(n);(s=(i=this.model).areRowsEqual)!=null&&s.call(i,r.value,o)?this.componentUpdater(o,r.rowComponent):this.removeRow(n)}})}addScrollListener(){this.addGuiEventListener("scroll",()=>this.drawVirtualRows(),{passive:!0})}setModel(t){this.model=t}getAriaElement(){return this.eContainer}destroy(){this.isAlive()&&(this.clearVirtualRows(),super.destroy())}};S([F("resizeObserverService")],hy.prototype,"resizeObserverService",2);S([F("animationFrameService")],hy.prototype,"animationFrameService",2);S([Me("eContainer")],hy.prototype,"eContainer",2);S([_e],hy.prototype,"postConstruct",1);var X$=hy,_J=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,nx=class extends lh{constructor(e){var t,r;super(Sr(tt({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"smallDown",ariaRole:"combobox",template:(t=e==null?void 0:e.template)!=null?t:_J,modalPicker:!1},e),{maxPickerHeight:(r=e==null?void 0:e.maxPickerHeight)!=null?r:"calc(var(--ag-row-height) * 6.5)"})),this.searchString="",this.highlightedItem=-1,this.lastRowHovered=-1,this.searchStringCreator=null;const{cellRowHeight:n,value:i,valueList:s,searchStringCreator:o}=e||{};n!=null&&(this.cellRowHeight=n),i!==void 0&&(this.value=i),s!=null&&(this.values=s),o&&(this.searchStringCreator=o)}postConstruct(){super.postConstruct(),this.createLoadingElement(),this.createListComponent();const{allowTyping:e,placeholder:t}=this.config;e?(this.eInput.setAutoComplete(!1).setInputPlaceholder(t),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{searchDebounceDelay:r=300}=this.config;this.clearSearchString=bi(this.clearSearchString,r),this.renderSelectedValue(),e&&(this.eInput.onValueChange(n=>this.searchTextFromString(n)),this.addManagedListener(this.eWrapper,"focus",this.onWrapperFocus.bind(this))),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}createLoadingElement(){const e=this.gos.getDocument(),t=this.localeService.getLocaleTextFunc(),r=e.createElement("div");r.classList.add("ag-loading-text"),r.innerText=t("loadingOoo","Loading..."),this.eLoading=r}createListComponent(){this.listComponent=this.createBean(new X$({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this));const e=(a,l)=>{};this.listComponent.setComponentUpdater(e),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,_.EVENT_FIELD_PICKER_VALUE_SELECTED,a=>{this.onListValueSelected(a.value,a.fromEnterKey)});const{cellRowHeight:t}=this;t&&this.listComponent.setRowHeight(t);const r=this.listComponent.getGui(),n=this.listComponent.getAriaElement();this.addManagedListener(r,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(r,"mousedown",a=>a.preventDefault()),r.classList.add("ag-rich-select-list");const i=`ag-rich-select-list-${this.listComponent.getCompId()}`;n.setAttribute("id",i);const o=this.localeService.getLocaleTextFunc()(this.config.pickerAriaLabelKey,this.config.pickerAriaLabelValue);As(n,o),VD(this.eWrapper,n)}renderSelectedValue(){const{value:e,eDisplayField:t,config:r}=this,{allowTyping:n,initialInputValue:i}=this.config,s=this.config.valueFormatter?this.config.valueFormatter(e):e;if(n){this.eInput.setValue(i??s);return}let o;r.cellRenderer&&(o=this.userComponentFactory.getCellRendererDetails(this.config,{value:e,valueFormatted:s}));let a;if(o&&(a=o.newAgStackInstance()),a)Zr(t),nk(a,t),a.then(l=>{this.addDestroyFunc(()=>this.getContext().destroyBean(l))});else{if(xe(this.value))t.innerText=s,t.classList.remove("ag-display-as-placeholder");else{const{placeholder:l}=r;xe(l)?(t.innerHTML=`${sn(l)}`,t.classList.add("ag-display-as-placeholder")):Zr(t)}this.setTooltip({newTooltipText:s??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth})}}getCurrentValueIndex(){const{currentList:e,value:t}=this;if(t==null||!e)return-1;for(let r=0;r<e.length;r++)if(e[r]===t)return r;return-1}highlightFilterMatch(){var e;(e=this.listComponent)==null||e.forEachRenderedRow((t,r)=>{t.highlightString(this.searchString)})}highlightSelectedValue(e){var t;e==null&&(e=this.getCurrentValueIndex()),this.highlightedItem=e,(t=this.listComponent)==null||t.forEachRenderedRow((r,n)=>{const i=e===-1?!1:this.highlightedItem===n;r.updateHighlighted(i)})}setRowHeight(e){e!==this.cellRowHeight&&(this.cellRowHeight=e),this.listComponent&&this.listComponent.setRowHeight(e)}createPickerComponent(){const{values:e}=this;return e&&this.setValueList({valueList:e}),this.listComponent}setSearchStringCreator(e){this.searchStringCreator=e}setValueList(e){const{valueList:t,refresh:r}=e;this.listComponent&&this.currentList!==t&&(this.currentList=t,this.listComponent.setModel({getRowCount:()=>t.length,getRow:n=>t[n],areRowsEqual:(n,i)=>n===i}),r&&(this.values?this.listComponent.refresh(!0):(this.values=t,this.isPickerDisplayed&&this.showCurrentValueInPicker())))}showPicker(){super.showPicker(),this.showCurrentValueInPicker(),this.displayOrHidePicker()}showCurrentValueInPicker(){var e,t;if(!this.listComponent)return;if(!this.currentList){this.isPickerDisplayed&&this.eLoading&&this.listComponent.appendChild(this.eLoading);return}(e=this.eLoading)!=null&&e.offsetParent&&((t=this.eLoading.parentElement)==null||t.removeChild(this.eLoading));const r=this.getCurrentValueIndex();r!==-1?(this.listComponent.refresh(),this.listComponent.ensureIndexVisible(r),this.listComponent.refresh(!0),this.highlightSelectedValue(r)):this.listComponent.refresh()}beforeHidePicker(){this.highlightedItem=-1,super.beforeHidePicker()}onWrapperFocus(){if(!this.eInput)return;const e=this.eInput.getFocusableElement();e.focus(),e.select()}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}buildSearchStringFromKeyboardEvent(e){let{key:t}=e;if(t===Y.BACKSPACE)this.searchString=this.searchString.slice(0,-1),t="";else if(!FS(e))return;e.preventDefault(),this.searchTextFromCharacter(t)}searchTextFromCharacter(e){this.searchString+=e,this.runSearch(),this.clearSearchString()}searchTextFromString(e){e==null&&(e=""),this.searchString=e,this.runSearch()}buildSearchStrings(e){const{valueFormatter:t=n=>n}=this.config;let r;return typeof e[0]=="number"||typeof e[0]=="string"?r=e.map(n=>t(n)):typeof e[0]=="object"&&this.searchStringCreator&&(r=this.searchStringCreator(e)),r}getSuggestionsAndFilteredValues(e,t){let r=[],n=[];if(!e.length)return{suggestions:r,filteredValues:n};const{searchType:i="fuzzy",filterList:s}=this.config;if(i==="fuzzy"){const o=ty(this.searchString,t,!0);r=o.values;const a=o.indices;if(s&&a.length)for(let l=0;l<a.length;l++)n.push(this.values[a[l]])}else r=t.filter((o,a)=>{const l=o.toLocaleLowerCase(),c=this.searchString.toLocaleLowerCase(),u=i==="match"?l.startsWith(c):l.indexOf(c)!==-1;return s&&u&&n.push(this.values[a]),u});return{suggestions:r,filteredValues:n}}filterListModel(e){const{filterList:t}=this.config;t&&(this.setValueList({valueList:e,refresh:!0}),this.alignPickerToComponent())}runSearch(){var e,t;const{values:r}=this,n=this.buildSearchStrings(r);if(!n){this.highlightSelectedValue(-1);return}const{suggestions:i,filteredValues:s}=this.getSuggestionsAndFilteredValues(this.searchString,n),{filterList:o,highlightMatch:a,searchType:l="fuzzy"}=this.config,c=s.length,u=!!(o&&this.searchString!=="");if(this.filterListModel(u?s:r),i.length){const d=u?0:n.indexOf(i[0]);this.selectListItem(d)}else if(this.highlightSelectedValue(-1),!u||c)(e=this.listComponent)==null||e.ensureIndexVisible(0);else if(u){this.getAriaElement().removeAttribute("data-active-option");const d=(t=this.listComponent)==null?void 0:t.getAriaElement();d&&GD(d,null)}a&&l!=="fuzzy"&&this.highlightFilterMatch(),this.displayOrHidePicker()}displayOrHidePicker(){var e;const t=(e=this.listComponent)==null?void 0:e.getGui(),r=this.currentList?this.currentList.length===0:!1;t==null||t.classList.toggle("ag-hidden",r)}clearSearchString(){this.searchString=""}selectListItem(e,t){if(!this.isPickerDisplayed||!this.currentList||!this.listComponent||e<0||e>=this.currentList.length)return;this.listComponent.ensureIndexVisible(e,!t)&&!t&&this.listComponent.refresh(!0),this.highlightSelectedValue(e)}setValue(e,t,r){const n=this.currentList?this.currentList.indexOf(e):-1;return n===-1?this:(this.value=e,r||this.selectListItem(n),this.renderSelectedValue(),super.setValue(e,t))}createRowComponent(e){const t=new Pk(this.config,this.eWrapper);t.setParentComponent(this.listComponent),this.getContext().createBean(t),t.setState(e);const{highlightMatch:r,searchType:n="fuzzy"}=this.config;return r&&n!=="fuzzy"&&t.highlightString(this.searchString),t}getRowForMouseEvent(e){const{listComponent:t}=this;if(!t)return-1;const n=(t==null?void 0:t.getGui()).getBoundingClientRect(),i=t.getScrollTop(),s=e.clientY-n.top+i;return Math.floor(s/t.getRowHeight())}onPickerMouseMove(e){if(!this.listComponent)return;const t=this.getRowForMouseEvent(e);t!==-1&&t!=this.lastRowHovered&&(this.lastRowHovered=t,this.selectListItem(t,!0))}onNavigationKeyDown(e,t){e.preventDefault();const r=t===Y.DOWN;if(!this.isPickerDisplayed&&r){this.showPicker();return}const n=this.highlightedItem,s=n===-1?0:n+(r?1:-1);this.selectListItem(s)}onPageNavigation(e){var t;if(!this.isPickerDisplayed)return;const r=(t=this.listComponent)==null?void 0:t.navigateToPage(e,this.highlightedItem);r!=null&&this.animationFrameService.requestAnimationFrame(()=>{if(!this.isAlive())return null;this.highlightSelectedValue(r)})}onEnterKeyDown(e){this.isPickerDisplayed&&(e.preventDefault(),this.currentList&&this.onListValueSelected(this.currentList[this.highlightedItem],!0))}onTabKeyDown(){!this.isPickerDisplayed||!this.currentList||this.setValue(this.currentList[this.highlightedItem],!1,!0)}onListValueSelected(e,t){this.setValue(e,!1,!0),this.dispatchPickerEvent(e,t),this.hidePicker()}dispatchPickerEvent(e,t){const r={type:_.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:t,value:e};this.dispatchEvent(r)}getFocusableElement(){const{allowTyping:e}=this.config;return e?this.eInput.getFocusableElement():super.getFocusableElement()}onKeyDown(e){const t=e.key,{allowTyping:r}=this.config;switch(t){case Y.LEFT:case Y.RIGHT:r||e.preventDefault();break;case Y.PAGE_HOME:case Y.PAGE_END:if(r){e.preventDefault();const n=this.eInput.getInputElement(),i=t===Y.PAGE_HOME?0:n.value.length;n.setSelectionRange(i,i);break}case Y.PAGE_UP:case Y.PAGE_DOWN:e.preventDefault(),this.onPageNavigation(t);break;case Y.DOWN:case Y.UP:this.onNavigationKeyDown(e,t);break;case Y.ESCAPE:this.isPickerDisplayed&&(ns(this.listComponent.getGui())&&(e.preventDefault(),Yo(e)),this.hidePicker());break;case Y.ENTER:this.onEnterKeyDown(e);break;case Y.TAB:this.onTabKeyDown();break;default:r||this.buildSearchStringFromKeyboardEvent(e)}}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),this.eLoading=void 0,super.destroy()}};S([F("userComponentFactory")],nx.prototype,"userComponentFactory",2);S([F("animationFrameService")],nx.prototype,"animationFrameService",2);S([Me("eInput")],nx.prototype,"eInput",2);var Af=class Z$ extends ak{constructor(t){super(t,Z$.TEMPLATE),this.labelAlignment="top"}init(){this.eSlider.addCssClass("ag-slider-field");const{minValue:t,maxValue:r,textFieldWidth:n,step:i,value:s,onValueChange:o}=this.config;t!=null&&this.setMinValue(t),r!=null&&this.setMaxValue(r),n!=null&&this.setTextFieldWidth(n),i!=null&&this.setStep(i),s!=null&&this.setValue(s),o!=null&&this.onValueChange(o)}onValueChange(t){const r=_.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,r,()=>{const n=parseFloat(this.eText.getValue());this.eSlider.setValue(n.toString(),!0),t(n||0)}),this.addManagedListener(this.eSlider,r,()=>{const n=this.eSlider.getValue();this.eText.setValue(n,!0),t(parseFloat(n))}),this}setSliderWidth(t){return this.eSlider.setWidth(t),this}setTextFieldWidth(t){return this.eText.setWidth(t),this}setMinValue(t){return this.eSlider.setMinValue(t),this.eText.setMin(t),this}setMaxValue(t){return this.eSlider.setMaxValue(t),this.eText.setMax(t),this}getValue(){return this.eText.getValue()}setValue(t,r){return this.getValue()===t?this:(this.eText.setValue(t,!0),this.eSlider.setValue(t,!0),r||this.dispatchEvent({type:_.EVENT_FIELD_VALUE_CHANGED}),this)}setStep(t){return this.eSlider.setStep(t),this.eText.setStep(t),this}};Af.TEMPLATE=`<div class="ag-slider">
            <label ref="eLabel"></label>
            <div class="ag-wrapper ag-slider-wrapper">
                <ag-input-range ref="eSlider"></ag-input-range>
                <ag-input-number-field ref="eText"></ag-input-number-field>
            </div>
        </div>`;S([Me("eLabel")],Af.prototype,"eLabel",2);S([Me("eSlider")],Af.prototype,"eSlider",2);S([Me("eText")],Af.prototype,"eText",2);S([_e],Af.prototype,"init",1);var DJ=Af,yu=class Lh extends mt{constructor(t={}){super(Lh.getTemplate(t)),this.params=t,this.suppressEnabledCheckbox=!0,this.suppressToggleExpandOnEnableChange=!1;const{enabled:r,items:n,suppressEnabledCheckbox:i,expanded:s,suppressToggleExpandOnEnableChange:o,useToggle:a}=t;this.cssIdentifier=t.cssIdentifier||"default",this.enabled=r??!0,this.items=n||[],this.useToggle=a??!1,this.alignItems=t.alignItems||"center",this.expanded=s??!0,i!=null&&(this.suppressEnabledCheckbox=i),o!=null&&(this.suppressToggleExpandOnEnableChange=o)}static getTemplate(t){const r=t.cssIdentifier||"default",n=t.direction||"vertical";return`
            <div class="ag-group ag-${r}-group" role="presentation">
                <div ref="eToolbar" class="ag-group-toolbar ag-${r}-group-toolbar">
                    <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>
                </div>
                <div ref="eContainer" class="ag-group-container ag-group-container-${n} ag-${r}-group-container"></div>
            </div>
        `}postConstruct(){if(this.setupTitleBar(),this.items.length){const i=this.items;this.items=[],this.addItems(i)}const t=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(t("enabled","Enabled")),this.enabled&&this.setEnabled(this.enabled,void 0,!0),this.setAlignItems(this.alignItems);const{onEnableChange:r,suppressOpenCloseIcons:n}=this.params;this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(n??!1),this.refreshChildDisplay(),jt(this.eContainer,this.expanded),this.cbGroupEnabled.onValueChange(i=>{this.setEnabled(i,!0,this.suppressToggleExpandOnEnableChange),this.dispatchEnableChangeEvent(i)}),r!=null&&this.onEnableChange(r)}refreshChildDisplay(){var t;jt(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),(t=this.eTitleBar)==null||t.refreshOnExpand(this.expanded)}isExpanded(){return this.expanded}setAlignItems(t){this.alignItems!==t&&this.removeCssClass(`ag-group-item-alignment-${this.alignItems}`),this.alignItems=t;const r=`ag-group-item-alignment-${this.alignItems}`;return this.addCssClass(r),this}toggleGroupExpand(t){var r;let n=!1;if((r=this.eTitleBar)!=null&&r.isSuppressCollapse()&&!this.useToggle)t=!0,n=!0;else if(t=t??!this.expanded,this.expanded===t)return this;return this.expanded=t,this.refreshChildDisplay(),jt(this.eContainer,t),n||this.dispatchEvent({type:t?Lh.EVENT_EXPANDED:Lh.EVENT_COLLAPSED}),this}addItems(t){t.forEach(r=>this.addItem(r))}prependItem(t){this.insertItem(t,!0)}addItem(t){this.insertItem(t,!1)}insertItem(t,r){const n=this.eContainer,i=t instanceof mt?t.getGui():t;i.classList.add("ag-group-item",`ag-${this.cssIdentifier}-group-item`),r?(n.insertAdjacentElement("afterbegin",i),this.items.unshift(i)):(n.appendChild(i),this.items.push(i))}hideItem(t,r){const n=this.items[r];jt(n,!t)}getItemIndex(t){const r=t instanceof mt?t.getGui():t;return this.items.indexOf(r)}setTitle(t){var r;return(r=this.eTitleBar)==null||r.setTitle(t),this}addTitleBarWidget(t){var r;return(r=this.eTitleBar)==null||r.addWidget(t),this}addCssClassToTitleBar(t){var r;(r=this.eTitleBar)==null||r.addCssClass(t)}dispatchEnableChangeEvent(t){const r={type:Lh.EVENT_ENABLE_CHANGE,enabled:t};this.dispatchEvent(r)}setEnabled(t,r,n){var i;return this.enabled=t,this.refreshDisabledStyles(),n||this.toggleGroupExpand(t),r||(this.cbGroupEnabled.setValue(t),(i=this.eToggle)==null||i.setValue(t)),this}isEnabled(){return this.enabled}onEnableChange(t){return this.addManagedListener(this,Lh.EVENT_ENABLE_CHANGE,r=>t(r.enabled)),this}hideEnabledCheckbox(t){return this.suppressEnabledCheckbox=t,this.refreshChildDisplay(),this.refreshDisabledStyles(),this}hideOpenCloseIcons(t){var r;return(r=this.eTitleBar)==null||r.hideOpenCloseIcons(t),this}refreshDisabledStyles(){var t;const r=!this.enabled;this.eContainer.classList.toggle("ag-disabled",r),(t=this.eTitleBar)==null||t.refreshDisabledStyles(this.suppressEnabledCheckbox&&r),this.eContainer.classList.toggle("ag-disabled-group-container",r)}setupTitleBar(){const t=this.useToggle?this.createToggleTitleBar():this.createDefaultTitleBar();this.eToolbar.insertAdjacentElement("beforebegin",t.getGui())}createDefaultTitleBar(){const t=this.createManagedBean(new OO(this.params));return this.eTitleBar=t,t.refreshOnExpand(this.expanded),this.addManagedListener(t,OO.EVENT_EXPAND_CHANGED,r=>this.toggleGroupExpand(r.expanded)),t}createToggleTitleBar(){var t;const r=this.createManagedBean(new Y$({value:this.enabled,label:this.params.title,labelAlignment:"left",labelWidth:"flex",onValueChange:n=>{this.setEnabled(n,!0),this.dispatchEnableChangeEvent(n)}}));return r.addCssClass("ag-group-title-bar"),r.addCssClass(`ag-${(t=this.params.cssIdentifier)!=null?t:"default"}-group-title-bar ag-unselectable`),this.eToggle=r,this.toggleGroupExpand(this.enabled),r}};yu.EVENT_EXPANDED="expanded";yu.EVENT_COLLAPSED="collapsed";yu.EVENT_ENABLE_CHANGE="enableChange";S([Me("eToolbar")],yu.prototype,"eToolbar",2);S([Me("cbGroupEnabled")],yu.prototype,"cbGroupEnabled",2);S([Me("eContainer")],yu.prototype,"eContainer",2);S([_e],yu.prototype,"postConstruct",1);var kJ=yu,CP="ag-disabled-group-title-bar",_f=class BT extends mt{constructor(t={}){super(BT.getTemplate(t)),this.suppressOpenCloseIcons=!1;const{title:r,suppressOpenCloseIcons:n}=t;r&&r.length>0&&(this.title=r),n!=null&&(this.suppressOpenCloseIcons=n)}static getTemplate(t){var r;const n=(r=t.cssIdentifier)!=null?r:"default";return`
            <div class="ag-group-title-bar ag-${n}-group-title-bar ag-unselectable" role="button">
                <span class="ag-group-title-bar-icon ag-${n}-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>
                <span class="ag-group-title-bar-icon ag-${n}-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>
                <span ref="eTitle" class="ag-group-title ag-${n}-group-title"></span>
            </div>
        `}postConstruct(){this.setTitle(this.title),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract()}setupExpandContract(){this.eGroupClosedIcon.appendChild(zs("columnSelectClosed",this.gos,null)),this.eGroupOpenedIcon.appendChild(zs("columnSelectOpen",this.gos,null)),this.addManagedListener(this.getGui(),"click",()=>this.dispatchExpandChanged()),this.addManagedListener(this.getGui(),"keydown",t=>{switch(t.key){case Y.ENTER:case Y.SPACE:t.preventDefault(),this.dispatchExpandChanged();break;case Y.RIGHT:case Y.LEFT:t.preventDefault(),this.dispatchExpandChanged(t.key===Y.RIGHT);break}})}refreshOnExpand(t){this.refreshAriaStatus(t),this.refreshOpenCloseIcons(t)}refreshAriaStatus(t){this.suppressOpenCloseIcons||Sl(this.getGui(),t)}refreshOpenCloseIcons(t){const r=!this.suppressOpenCloseIcons;jt(this.eGroupOpenedIcon,r&&t),jt(this.eGroupClosedIcon,r&&!t)}isSuppressCollapse(){return this.suppressOpenCloseIcons}dispatchExpandChanged(t){const r={type:BT.EVENT_EXPAND_CHANGED,expanded:t};this.dispatchEvent(r)}setTitle(t){const r=this.getGui(),n=!!t&&t.length>0;t=n?t:void 0,this.eTitle.textContent=t??"",jt(r,n),t!==this.title&&(this.title=t);const i=r.classList.contains(CP);return this.refreshDisabledStyles(i),this}addWidget(t){return this.getGui().appendChild(t),this}hideOpenCloseIcons(t){return this.suppressOpenCloseIcons=t,t&&this.dispatchExpandChanged(!0),this}refreshDisabledStyles(t){const r=this.getGui();t?(r.classList.add(CP),r.removeAttribute("tabindex")):(r.classList.remove(CP),typeof this.title=="string"?r.setAttribute("tabindex","0"):r.removeAttribute("tabindex"))}};_f.EVENT_EXPAND_CHANGED="expandedChanged";S([Me("eGroupOpenedIcon")],_f.prototype,"eGroupOpenedIcon",2);S([Me("eGroupClosedIcon")],_f.prototype,"eGroupClosedIcon",2);S([Me("eTitle")],_f.prototype,"eTitle",2);S([_e],_f.prototype,"postConstruct",1);var OO=_f,Rk=class extends uy{constructor(e=0,t){super('<div class="ag-menu-list" role="tree"></div>'),this.level=e,this.menuItems=[],this.params=t??{column:null,node:null,value:null}}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.handleFocusIn(e),onFocusOut:e=>this.handleFocusOut(e)})}onTabKeyDown(e){const t=this.getParentComponent(),r=t&&t.getGui();r&&r.classList.contains("ag-focus-managed")||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)}handleKeyDown(e){switch(e.key){case Y.UP:case Y.RIGHT:case Y.DOWN:case Y.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case Y.ESCAPE:this.closeIfIsChild()&&Yo(e);break}}handleFocusIn(e){var t,r;const n=e.relatedTarget;!this.tabGuardCtrl.isTabGuard(n)&&(this.getGui().contains(n)||(r=(t=this.activeMenuItem)==null?void 0:t.getSubMenuGui())!=null&&r.contains(n))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())}handleFocusOut(e){var t;const r=e.relatedTarget;!this.activeMenuItem||this.getGui().contains(r)||(t=this.activeMenuItem.getSubMenuGui())!=null&&t.contains(r)||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(e){e!=null&&on.all(e.map(t=>t==="separator"?on.resolve({eGui:this.createSeparator()}):typeof t=="string"?(console.warn(`AG Grid: unrecognised menu item ${t}`),on.resolve({eGui:null})):this.addItem(t))).then(t=>{t.forEach(r=>{r!=null&&r.eGui&&(this.appendChild(r.eGui),r.comp&&this.menuItems.push(r.comp))})})}addItem(e){const t=this.createManagedBean(new SC);return t.init({menuItemDef:e,isAnotherSubMenuOpen:()=>this.menuItems.some(r=>r.isSubMenuOpen()),level:this.level,contextParams:this.params}).then(()=>(t.setParentComponent(this),this.addManagedListener(t,SC.EVENT_CLOSE_MENU,r=>{this.dispatchEvent(r)}),this.addManagedListener(t,SC.EVENT_MENU_ITEM_ACTIVATED,r=>{this.activeMenuItem&&this.activeMenuItem!==r.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=r.menuItem}),{comp:t,eGui:t.getGui()}))}activateFirstItem(){const e=this.menuItems.filter(t=>!t.isDisabled())[0];e&&e.activate()}createSeparator(){return Qi(`
            <div class="ag-menu-separator" aria-hidden="true">
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
            </div>`)}handleNavKey(e){switch(e){case Y.UP:case Y.DOWN:const r=this.findNextItem(e===Y.UP);r&&r!==this.activeMenuItem&&r.activate();return}const t=this.gos.get("enableRtl")?Y.RIGHT:Y.LEFT;e===t?this.closeIfIsChild():this.openChild()}closeIfIsChild(e){const t=this.getParentComponent();return t&&t instanceof SC?(e&&e.preventDefault(),t.closeSubMenu(),t.getGui().focus(),!0):!1}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(e){const t=this.menuItems.filter(i=>!i.isDisabled());if(!t.length)return;if(!this.activeMenuItem)return e?Wt(t):t[0];e&&t.reverse();let r,n=!1;for(let i=0;i<t.length;i++){const s=t[i];if(!n){s===this.activeMenuItem&&(n=!0);continue}r=s;break}return n&&!r?t[0]:r||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}};S([F("focusService")],Rk.prototype,"focusService",2);S([_e],Rk.prototype,"postConstruct",1);var J$=class extends uy{constructor(e){super(),this.wrappedComponent=e,this.setTemplateFromElement(e.getGui())}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)})}handleKeyDown(e){e.key===Y.ESCAPE&&this.closePanel()}onTabKeyDown(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())}closePanel(){const e=this.parentComponent;e.closeSubMenu(),setTimeout(()=>e.getGui().focus(),0)}};S([_e],J$.prototype,"postConstruct",1);var Df=class Gh extends Ae{constructor(){super(...arguments),this.isActive=!1,this.subMenuIsOpen=!1,this.subMenuIsOpening=!1,this.suppressRootStyles=!0,this.suppressAria=!0,this.suppressFocus=!0}init(t){var r,n;const{menuItemDef:i,isAnotherSubMenuOpen:s,level:o,childComponent:a,contextParams:l}=t;return this.params=t.menuItemDef,this.level=o,this.isAnotherSubMenuOpen=s,this.childComponent=a,this.contextParams=l,this.cssClassPrefix=(n=(r=this.params.menuItemParams)==null?void 0:r.cssClassPrefix)!=null?n:"ag-menu-option",this.userComponentFactory.getMenuItemCompDetails(this.params,Sr(tt({},i),{level:o,isAnotherSubMenuOpen:s,openSubMenu:u=>this.openSubMenu(u),closeSubMenu:()=>this.closeSubMenu(),closeMenu:u=>this.closeMenu(u),updateTooltip:(u,d)=>this.refreshTooltip(u,d),onItemActivated:()=>this.onItemActivated()})).newAgStackInstance().then(u=>{var d;this.menuItemComp=u;const p=(d=u.configureDefaults)==null?void 0:d.call(u);p&&this.configureDefaults(p===!0?void 0:p)})}addListeners(t,r){r!=null&&r.suppressClick||this.addManagedListener(t,"click",n=>this.onItemSelected(n)),r!=null&&r.suppressKeyboardSelect||this.addManagedListener(t,"keydown",n=>{(n.key===Y.ENTER||n.key===Y.SPACE)&&(n.preventDefault(),this.onItemSelected(n))}),r!=null&&r.suppressMouseDown||this.addManagedListener(t,"mousedown",n=>{n.stopPropagation(),n.preventDefault()}),r!=null&&r.suppressMouseOver||(this.addManagedListener(t,"mouseenter",()=>this.onMouseEnter()),this.addManagedListener(t,"mouseleave",()=>this.onMouseLeave()))}isDisabled(){return!!this.params.disabled}openSubMenu(t=!1){var r,n;if(this.closeSubMenu(),!this.params.subMenu)return;this.subMenuIsOpening=!0;const i=Qi('<div class="ag-menu" role="presentation"></div>');this.eSubMenuGui=i;let s,o=()=>{this.subMenuIsOpening=!1};if(this.childComponent){const u=this.createBean(new J$(this.childComponent));u.setParentComponent(this);const d=u.getGui(),p="mouseenter",f=()=>this.cancelDeactivate();d.addEventListener(p,f),s=()=>d.removeEventListener(p,f),i.appendChild(d),this.childComponent.afterGuiAttached&&(o=()=>{this.childComponent.afterGuiAttached(),this.subMenuIsOpening=!1})}else if(this.params.subMenu){const u=this.createBean(new Rk(this.level+1,this.contextParams));u.setParentComponent(this),u.addMenuItems(this.params.subMenu),i.appendChild(u.getGui()),this.addManagedListener(u,Gh.EVENT_CLOSE_MENU,d=>this.dispatchEvent(d)),u.addGuiEventListener("mouseenter",()=>this.cancelDeactivate()),s=()=>this.destroyBean(u),t&&(o=()=>{u.activateFirstItem(),this.subMenuIsOpening=!1})}const a=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:this.eGui,ePopup:i}),l=this.localeService.getLocaleTextFunc(),c=this.popupService.addPopup({modal:!0,eChild:i,positionCallback:a,anchorToElement:this.eGui,ariaLabel:l("ariaLabelSubMenu","SubMenu"),afterGuiAttached:o});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=()=>{var u,d;c&&c.hideFunc(),this.subMenuIsOpen=!1,this.setAriaExpanded(!1),s(),(d=(u=this.menuItemComp).setExpanded)==null||d.call(u,!1),this.eSubMenuGui=void 0},(n=(r=this.menuItemComp).setExpanded)==null||n.call(r,!0)}setAriaExpanded(t){this.suppressAria||Sl(this.eGui,t)}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))}isSubMenuOpen(){return this.subMenuIsOpen}isSubMenuOpening(){return this.subMenuIsOpening}activate(t){var r,n;this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add(`${this.cssClassPrefix}-active`),(n=(r=this.menuItemComp).setActive)==null||n.call(r,!0),this.suppressFocus||this.eGui.focus({preventScroll:!0}),t&&this.params.subMenu&&window.setTimeout(()=>{this.isAlive()&&this.isActive&&this.openSubMenu()},300),this.onItemActivated())}deactivate(){var t,r;this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove(`${this.cssClassPrefix}-active`),(r=(t=this.menuItemComp).setActive)==null||r.call(t,!1),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()}getGui(){return this.menuItemComp.getGui()}getParentComponent(){return this.parentComponent}setParentComponent(t){this.parentComponent=t}getSubMenuGui(){return this.eSubMenuGui}onItemSelected(t){var r,n;(n=(r=this.menuItemComp).select)==null||n.call(r),this.params.action?this.getFrameworkOverrides().wrapOutgoing(()=>this.params.action(this.gos.addGridCommonParams(tt({},this.contextParams)))):this.openSubMenu(t&&t.type==="keydown"),!(this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect)&&this.closeMenu(t)}closeMenu(t){const r={type:Gh.EVENT_CLOSE_MENU};t&&(t instanceof MouseEvent?r.mouseEvent=t:r.keyboardEvent=t),this.dispatchEvent(r)}onItemActivated(){const t={type:Gh.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(t)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(()=>this.activate(!0),Gh.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(()=>this.deactivate(),Gh.ACTIVATION_DELAY):this.deactivate()}configureDefaults(t){var r,n,i;if(!this.menuItemComp){setTimeout(()=>this.configureDefaults(t));return}let s=this.menuItemComp.getGui();const o=(n=(r=this.menuItemComp).getRootElement)==null?void 0:n.call(r);o&&(t!=null&&t.suppressRootStyles||s.classList.add("ag-menu-option-custom"),s=o),this.eGui=s,this.suppressRootStyles=!!(t!=null&&t.suppressRootStyles),this.suppressRootStyles||(s.classList.add(this.cssClassPrefix),(i=this.params.cssClasses)==null||i.forEach(a=>s.classList.add(a)),this.params.disabled&&s.classList.add(`${this.cssClassPrefix}-disabled`)),t!=null&&t.suppressTooltip||this.refreshTooltip(this.params.tooltip),this.suppressAria=!!(t!=null&&t.suppressAria),this.suppressAria||(Gr(s,"treeitem"),cz(s,this.level+1),this.params.disabled&&LD(s,!0)),t!=null&&t.suppressTabIndex||s.setAttribute("tabindex","-1"),this.params.disabled||this.addListeners(s,t),this.suppressFocus=!!(t!=null&&t.suppressFocus)}refreshTooltip(t,r){this.tooltip=t,this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),!(!t||!this.menuItemComp)&&(this.tooltipFeature=this.createBean(new Bl({getGui:()=>this.getGui(),getTooltipValue:()=>this.tooltip,getLocation:()=>"menu",shouldDisplayTooltip:r})))}destroy(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}};Df.EVENT_CLOSE_MENU="closeMenu";Df.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated";Df.ACTIVATION_DELAY=80;S([F("popupService")],Df.prototype,"popupService",2);S([F("userComponentFactory")],Df.prototype,"userComponentFactory",2);var SC=Df,mh=class VT extends mt{constructor(t){super(VT.getTemplate(t)),this.config=t,this.closable=!0}static getTemplate(t){const r=t.cssIdentifier||"default";return`<div class="ag-panel ag-${r}-panel" tabindex="-1">
            <div ref="eTitleBar" class="ag-panel-title-bar ag-${r}-panel-title-bar ag-unselectable">
                <span ref="eTitle" class="ag-panel-title-bar-title ag-${r}-panel-title-bar-title"></span>
                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-${r}-panel-title-bar-buttons"></div>
            </div>
            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-${r}-panel-content-wrapper"></div>
        </div>`}postConstruct(){const{component:t,closable:r,hideTitleBar:n,title:i,minWidth:s=250,width:o,minHeight:a=250,height:l,centered:c,popup:u,x:d,y:p}=this.config;this.positionableFeature=new Cf(this.getGui(),{minWidth:s,width:o,minHeight:a,height:l,centered:c,x:d,y:p,popup:u,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}),this.createManagedBean(this.positionableFeature);const f=this.getGui();t&&this.setBodyComponent(t),n?jt(this.eTitleBar,!1):(i&&this.setTitle(i),this.setClosable(r??this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",m=>{if(f.contains(m.relatedTarget)||f.contains(this.gos.getActiveDomElement())||this.eTitleBarButtons.contains(m.target)){m.preventDefault();return}const y=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");y&&y.focus()}),!(u&&this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")}renderComponent(){const t=this.getGui();t.focus(),this.close=()=>{t.parentElement.removeChild(t),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(t){this.positionableFeature.setHeight(t)}getWidth(){return this.positionableFeature.getWidth()}setWidth(t){this.positionableFeature.setWidth(t)}setClosable(t){if(t!==this.closable&&(this.closable=t),t){const r=this.closeButtonComp=new mt(VT.CLOSE_BTN_TEMPLATE);this.getContext().createBean(r);const n=r.getGui(),i=kr("close",this.gos);i.classList.add("ag-panel-title-bar-button-icon"),n.appendChild(i),this.addTitleBarButton(r),r.addManagedListener(n,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){const r=this.closeButtonComp.getGui();r.parentElement.removeChild(r),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(t){t.setParentComponent(this),this.eContentWrapper.appendChild(t.getGui())}addTitleBarButton(t,r){const n=this.eTitleBarButtons,i=n.children,s=i.length;r==null&&(r=s),r=Math.max(0,Math.min(r,s)),t.addCssClass("ag-panel-title-bar-button");const o=t.getGui();r===0?n.insertAdjacentElement("afterbegin",o):r===s?n.insertAdjacentElement("beforeend",o):i[r-1].insertAdjacentElement("afterend",o),t.setParentComponent(this)}getBodyHeight(){return Jv(this.eContentWrapper)}getBodyWidth(){return ah(this.eContentWrapper)}setTitle(t){this.eTitle.innerText=t}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));const t=this.getGui();t&&ns(t)&&this.close(),super.destroy()}};mh.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>';S([Me("eContentWrapper")],mh.prototype,"eContentWrapper",2);S([Me("eTitleBar")],mh.prototype,"eTitleBar",2);S([Me("eTitleBarButtons")],mh.prototype,"eTitleBarButtons",2);S([Me("eTitle")],mh.prototype,"eTitle",2);S([_e],mh.prototype,"postConstruct",1);var IJ=mh,NJ=class extends IJ{constructor(e){super(Sr(tt({},e),{popup:!0})),this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}postConstruct(){const e=this.getGui(),{movable:t,resizable:r,maximizable:n}=this.config;this.addCssClass("ag-dialog"),super.postConstruct(),this.addManagedListener(e,"focusin",i=>{this.popupService.bringPopupToFront(e)}),t&&this.setMovable(t),n&&this.setMaximizable(n),r&&this.setResizable(r)}renderComponent(){const e=this.getGui(),{alwaysOnTop:t,modal:r,title:n,afterGuiAttached:i}=this.config,s=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({modal:r,eChild:e,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop:t,ariaLabel:n||s("ariaLabelDialog","Dialog"),afterGuiAttached:i});o&&(this.close=o.hideFunc)}onClosed(e){var t,r;this.destroy(),(r=(t=this.config).closedCallback)==null||r.call(t,e)}toggleMaximize(){const e=this.positionableFeature.getPosition();if(this.isMaximized){const{x:t,y:r,width:n,height:i}=this.lastPosition;this.setWidth(n),this.setHeight(i),this.positionableFeature.offsetElement(t,r)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){jt(this.maximizeIcon,!this.isMaximized),jt(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(e=>e()),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(e){this.positionableFeature.setResizable(e)}setMovable(e){this.positionableFeature.setMovable(e,this.eTitleBar)}setMaximizable(e){if(!e){this.clearMaximizebleListeners(),this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0);return}const t=this.eTitleBar;if(!t||e===this.isMaximizable)return;const r=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),r.addManagedListener(r.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(r,0),this.maximizeListeners.push(this.addManagedListener(t,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",()=>{this.isMaximized=!1,this.refreshMaximizeIcon()})}buildMaximizeAndMinimizeElements(){const e=this.maximizeButtonComp=this.createBean(new mt('<div class="ag-dialog-button"></span>')),t=e.getGui();return this.maximizeIcon=kr("maximize",this.gos),t.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=kr("minimize",this.gos),t.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),e}};S([F("popupService")],NJ.prototype,"popupService",2);var MJ=0,xl=class extends Ae{constructor(){super(...arguments),this.popupList=[]}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridCtrl=e.gridCtrl}),this.addManagedListener(this.eventService,_.EVENT_GRID_STYLES_CHANGED,this.handleThemeChange.bind(this))}getPopupParent(){const e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:r}=e,n=this.getPopupIndex(r);if(n!==-1){const f=this.popupList[n];f.alignedToElement=t}const i=t.getBoundingClientRect(),s=this.getParentRect(),o=this.keepXYWithinBounds(r,i.top-s.top,0),a=r.clientWidth>0?r.clientWidth:200;r.style.minWidth=`${a}px`;const c=s.right-s.left-a;let u;this.gos.get("enableRtl")?(u=p(),u<0&&(u=d(),this.setAlignedStyles(r,"left")),u>c&&(u=0,this.setAlignedStyles(r,"right"))):(u=d(),u>c&&(u=p(),this.setAlignedStyles(r,"right")),u<0&&(u=0,this.setAlignedStyles(r,"left"))),r.style.left=`${u}px`,r.style.top=`${o}px`;function d(){return i.right-s.left-2}function p(){return i.left-s.left-a}}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:r,nudgeY:n,skipObserver:i}=e;this.positionPopup({ePopup:t,nudgeX:r,nudgeY:n,keepWithinBounds:!0,skipObserver:i,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:r,nudgeY:n,keepWithinBounds:i,eventSource:s,alignSide:o="left",position:a="over",column:l,rowNode:c,type:u}=e,d=s.getBoundingClientRect(),p=this.getParentRect(),f=this.getPopupIndex(t);if(f!==-1){const y=this.popupList[f];y.alignedToElement=s}const m=()=>{let y=d.left-p.left;o==="right"&&(y-=t.offsetWidth-d.width);let C;return a==="over"?(C=d.top-p.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,d,p,e.nudgeY||0)==="under"?C=d.top-p.top+d.height:C=d.top-t.offsetHeight-(n||0)*2-p.top),{x:y,y:C}};this.positionPopup({ePopup:t,nudgeX:r,nudgeY:n,keepWithinBounds:i,updatePosition:m,postProcessCallback:()=>this.callPostProcessPopup(u,t,s,null,l,c)})}shouldRenderUnderOrAbove(e,t,r,n){const i=r.bottom-t.bottom,s=t.top-r.top,o=e.offsetHeight+n;return i>o?"under":s>o||s>i?"above":"under"}setAlignedStyles(e,t){const r=this.getPopupIndex(e);if(r===-1)return;const n=this.popupList[r],{alignedToElement:i}=n;!i||(["right","left","over","above","under"].forEach(o=>{i.classList.remove(`ag-has-popup-positioned-${o}`),e.classList.remove(`ag-popup-positioned-${o}`)}),!t)||(i.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,r,n,i,s){const o=this.gos.getCallback("postProcessPopup");o&&o({column:i,rowNode:s,ePopup:t,type:e,eventSource:r,mouseEvent:n})}positionPopup(e){const{ePopup:t,keepWithinBounds:r,nudgeX:n,nudgeY:i,skipObserver:s,updatePosition:o}=e,a={width:0,height:0},l=(c=!1)=>{let{x:u,y:d}=o();c&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,n&&(u+=n),i&&(d+=i),r&&(u=this.keepXYWithinBounds(t,u,1),d=this.keepXYWithinBounds(t,d,0)),t.style.left=`${u}px`,t.style.top=`${d}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!s){const c=this.resizeObserverService.observeResize(t,()=>l(!0));setTimeout(()=>c(),xl.WAIT_FOR_POPUP_CONTENT_RESIZE)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){const e=this.gos.getDocument();let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),XD(t)}keepXYWithinBounds(e,t,r){const n=r===0,i=n?"clientHeight":"clientWidth",s=n?"top":"left",o=n?"offsetHeight":"offsetWidth",a=n?"scrollTop":"scrollLeft",l=this.gos.getDocument(),c=l.documentElement,u=this.getPopupParent(),d=u.getBoundingClientRect(),p=l.documentElement.getBoundingClientRect(),f=u===l.body,m=e[o];let C=f?(n?QD:Lm)(c)+c[a]:u[i];f&&(C-=Math.abs(p[s]-d[s]));const w=C-m;return Math.min(Math.max(t,0),Math.abs(w))}addPopup(e){const t=this.gos.getDocument(),{eChild:r,ariaLabel:n,alwaysOnTop:i,positionCallback:s,anchorToElement:o}=e;if(!t)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:()=>{}};const a=this.getPopupIndex(r);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(r);const l=this.createPopupWrapper(r,n,!!i),c=this.addEventListenersToPopup(Sr(tt({},e),{wrapperEl:l}));return s&&s(),this.addPopupToPopupList(r,l,c,o),{hideFunc:c}}initialisePopupPosition(e){const r=this.getPopupParent().getBoundingClientRect();xe(e.style.top)||(e.style.top=`${r.top*-1}px`),xe(e.style.left)||(e.style.left=`${r.left*-1}px`)}createPopupWrapper(e,t,r){const n=this.getPopupParent(),i=document.createElement("div"),{allThemes:s}=this.environment.getTheme();return s.length&&i.classList.add(...s),i.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||Gr(e,"dialog"),As(e,t),i.appendChild(e),n.appendChild(i),r?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),i}handleThemeChange(){const{allThemes:e}=this.environment.getTheme();for(const t of this.popupList){for(const r of Array.from(t.wrapper.classList))r.startsWith("ag-theme-")&&t.wrapper.classList.remove(r);e.length&&t.wrapper.classList.add(...e)}}addEventListenersToPopup(e){const t=this.gos.getDocument(),r=this.getPopupParent(),{wrapperEl:n,eChild:i,closedCallback:s,afterGuiAttached:o,closeOnEsc:a,modal:l}=e;let c=!1;const u=m=>{if(!n.contains(this.gos.getActiveDomElement()))return;m.key===Y.ESCAPE&&!$o(m)&&f({keyboardEvent:m})},d=m=>f({mouseEvent:m}),p=m=>f({touchEvent:m}),f=(m={})=>{const{mouseEvent:y,touchEvent:C,keyboardEvent:w,forceHide:b}=m;!b&&(this.isEventFromCurrentPopup({mouseEvent:y,touchEvent:C},i)||c)||(c=!0,r.removeChild(n),t.removeEventListener("keydown",u),t.removeEventListener("mousedown",d),t.removeEventListener("touchstart",p),t.removeEventListener("contextmenu",d),this.eventService.removeEventListener(_.EVENT_DRAG_STARTED,d),s&&s(y||C||w),this.removePopupFromPopupList(i))};return o&&o({hidePopup:f}),window.setTimeout(()=>{a&&t.addEventListener("keydown",u),l&&(t.addEventListener("mousedown",d),this.eventService.addEventListener(_.EVENT_DRAG_STARTED,d),t.addEventListener("touchstart",p),t.addEventListener("contextmenu",d))},0),f}addPopupToPopupList(e,t,r,n){this.popupList.push({element:e,wrapper:t,hideFunc:r,instanceId:MJ++,isAnchored:!!n}),n&&this.setPopupPositionRelatedToElement(e,n)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const r=this.getPopupIndex(e);if(r===-1)return;const n=this.popupList[r];if(n.stopAnchoringPromise&&n.stopAnchoringPromise.then(s=>s&&s()),n.stopAnchoringPromise=void 0,n.isAnchored=!1,!t)return;const i=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:n.hideFunc});return n.stopAnchoringPromise=i,n.isAnchored=!0,i}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),r=t.getBoundingClientRect(),{element:n,ePopup:i}=e,s=n.getBoundingClientRect(),o=r.top-s.top,a=r.left-s.left;let l=o,c=a;const u=i.style.top,d=parseInt(u.substring(0,u.length-1),10),p=i.style.left,f=parseInt(p.substring(0,p.length-1),10);return new on(m=>{this.getFrameworkOverrides().setInterval(()=>{const y=t.getBoundingClientRect(),C=n.getBoundingClientRect();if(C.top==0&&C.left==0&&C.height==0&&C.width==0){e.hidePopup();return}const b=y.top-C.top;if(b!=l){const E=this.keepXYWithinBounds(i,d+o-b,0);i.style.top=`${E}px`}l=b;const x=y.left-C.left;if(x!=c){const E=this.keepXYWithinBounds(i,f+a-x,1);i.style.left=`${E}px`}c=x},200).then(y=>{m(()=>{y!=null&&window.clearInterval(y)})})})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){const{mouseEvent:r,touchEvent:n}=e,i=r||n;if(!i)return!1;const s=this.getPopupIndex(t);if(s===-1)return!1;for(let o=s;o<this.popupList.length;o++){const a=this.popupList[o];if(fw(a.element,i))return!0}return this.isElementWithinCustomPopup(i.target)}isElementWithinCustomPopup(e){const t=this.gos.getDocument();for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const r=this.getWrapper(e);r&&(r.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(r))}bringPopupToFront(e){const t=this.getPopupParent(),r=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),n=r.length,i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup.ag-always-on-top")),s=i.length,o=this.getWrapper(e);if(!o||n<=1||!t.contains(e))return;const a=r.indexOf(o),l=o.querySelectorAll("div"),c=[];for(l.forEach(u=>{u.scrollTop!==0&&c.push([u,u.scrollTop])}),s?o.classList.contains("ag-always-on-top")?a!==n-1&&Wt(i).insertAdjacentElement("afterend",o):a!==n-s-1&&i[0].insertAdjacentElement("beforebegin",o):a!==n-1&&Wt(r).insertAdjacentElement("afterend",o);c.length;){const u=c.pop();u[0].scrollTop=u[1]}}};xl.WAIT_FOR_POPUP_CONTENT_RESIZE=200;S([F("focusService")],xl.prototype,"focusService",2);S([F("ctrlsService")],xl.prototype,"ctrlsService",2);S([F("resizeObserverService")],xl.prototype,"resizeObserverService",2);S([_e],xl.prototype,"postConstruct",1);xl=S([$e("popupService")],xl);var OJ=class extends mt{constructor(){super(`
        <div class="ag-autocomplete-row" role="presentation">
            <div class="ag-autocomplete-row-label"></div>
        </div>`),this.hasHighlighting=!1}setState(e,t){this.value=e,this.render(),this.updateSelected(t)}updateSelected(e){this.addOrRemoveCssClass("ag-autocomplete-row-selected",e)}setSearchString(e){var t;let r=!1;if(xe(e)){const n=(t=this.value)==null?void 0:t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(n>=0){r=!0,this.hasHighlighting=!0;const i=n+e.length,s=sn(this.value.slice(0,n)),o=sn(this.value.slice(n,i)),a=sn(this.value.slice(i));this.getGui().lastElementChild.innerHTML=`${s}<b>${o}</b>${a}`}}!r&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())}render(){var e;this.getGui().lastElementChild.innerHTML=(e=sn(this.value))!=null?e:"&nbsp;"}},ix=class eU extends uh{constructor(t){super(eU.TEMPLATE),this.params=t,this.searchString=""}destroy(){super.destroy()}init(){this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new X$({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:()=>this.autocompleteEntries.length,getRow:r=>this.autocompleteEntries[r]});const t=this.virtualList.getGui();this.addManagedListener(t,"click",()=>this.params.onConfirmed()),this.addManagedListener(t,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(t,"mousedown",r=>r.preventDefault()),this.setSelectedValue(0)}onNavigationKeyDown(t,r){t.preventDefault();const n=this.autocompleteEntries.indexOf(this.selectedValue),i=r===Y.UP?n-1:n+1;this.checkSetSelectedValue(i)}setSearch(t){this.searchString=t,xe(t)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()}runContainsSearch(t,r){let n,i=!1;const s=t.toLocaleLowerCase(),o=r.filter(a=>{const c=a.toLocaleLowerCase().indexOf(s),u=c===0,d=c>=0;return d&&(!n||!i&&u||i===u&&a.length<n.length)&&(n=a,i=u),d});return!n&&o.length&&(n=o[0]),{topMatch:n,allMatches:o}}runSearch(){var t,r;const{autocompleteEntries:n}=this.params,i=n.map(c=>{var u;return(u=c.displayValue)!=null?u:c.key});let s,o;if(this.params.useFuzzySearch)s=ty(this.searchString,i,!0).values,o=s.length?s[0]:void 0;else{const c=this.runContainsSearch(this.searchString,i);s=c.allMatches,o=c.topMatch}let a=n.filter(({key:c,displayValue:u})=>s.includes(u??c));if(!a.length&&this.selectedValue&&((r=(t=this.params)==null?void 0:t.forceLastSelection)!=null&&r.call(t,this.selectedValue,this.searchString))&&(a=[this.selectedValue]),this.autocompleteEntries=a,this.virtualList.refresh(),!o)return;const l=s.indexOf(o);this.checkSetSelectedValue(l)}updateSearchInList(){this.virtualList.forEachRenderedRow(t=>t.setSearchString(this.searchString))}checkSetSelectedValue(t){t>=0&&t<this.autocompleteEntries.length&&this.setSelectedValue(t)}setSelectedValue(t){const r=this.autocompleteEntries[t];this.selectedValue!==r&&(this.selectedValue=r,this.virtualList.ensureIndexVisible(t),this.virtualList.forEachRenderedRow((n,i)=>{n.updateSelected(t===i)}))}createRowComponent(t){var r;const n=new OJ;return this.getContext().createBean(n),n.setState((r=t.displayValue)!=null?r:t.key,t===this.selectedValue),n}onMouseMove(t){const r=this.virtualList.getGui().getBoundingClientRect(),n=this.virtualList.getScrollTop(),i=t.clientY-r.top+n,s=Math.floor(i/this.virtualList.getRowHeight());this.checkSetSelectedValue(s)}afterGuiAttached(){this.virtualList.refresh()}getSelectedValue(){var t;return this.autocompleteEntries.length&&(t=this.selectedValue)!=null?t:null}};ix.TEMPLATE=`<div class="ag-autocomplete-list-popup">
            <div ref="eList" class="ag-autocomplete-list"></div>
        <div>`;S([Me("eList")],ix.prototype,"eList",2);S([_e],ix.prototype,"init",1);var FJ=ix,Cu=class Mg extends mt{constructor(){super(`
            <div class="ag-autocomplete" role="presentation">
                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>
            </div>`),this.isListOpen=!1,this.lastPosition=0,this.valid=!0}postConstruct(){this.eAutocompleteInput.onValueChange(t=>this.onValueChanged(t)),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc(()=>{this.destroyBean(this.autocompleteList)}),this.addGuiEventListener("focusout",()=>this.onFocusOut())}onValueChanged(t){const r=Ra(t);this.updateValue(r),this.updateAutocompleteList(r)}updateValue(t){this.updateLastPosition(),this.dispatchEvent({type:Mg.EVENT_VALUE_CHANGED,value:t}),this.validate(t)}updateAutocompleteList(t){var r,n,i,s;const o=(n=(r=this.listGenerator)==null?void 0:r.call(this,t,this.lastPosition))!=null?n:{enabled:!1};if((!o.type||o.type!==((i=this.autocompleteListParams)==null?void 0:i.type))&&this.isListOpen&&this.closeList(),this.autocompleteListParams=o,(s=this.autocompleteListParams)!=null&&s.enabled){this.isListOpen||this.openList();const{searchString:a}=this.autocompleteListParams;this.autocompleteList.setSearch(a??"")}else this.isListOpen&&this.closeList()}onKeyDown(t){const r=t.key;switch(this.updateLastPosition(),r){case Y.ENTER:this.onEnterKeyDown(t);break;case Y.TAB:this.onTabKeyDown(t);break;case Y.DOWN:case Y.UP:this.onUpDownKeyDown(t,r);break;case Y.LEFT:case Y.RIGHT:case Y.PAGE_HOME:case Y.PAGE_END:setTimeout(()=>{this.updatePositionAndList()});break;case Y.ESCAPE:this.onEscapeKeyDown(t);break;case Y.SPACE:t.ctrlKey&&!this.isListOpen&&(t.preventDefault(),this.forceOpenList());break}}confirmSelection(){var t;const r=(t=this.autocompleteList)==null?void 0:t.getSelectedValue();r&&(this.closeList(),this.dispatchEvent({type:Mg.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:r,autocompleteType:this.autocompleteListParams.type}))}onTabKeyDown(t){this.isListOpen&&(t.preventDefault(),t.stopPropagation(),this.confirmSelection())}onEnterKeyDown(t){t.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()}onUpDownKeyDown(t,r){var n;t.preventDefault(),this.isListOpen?(n=this.autocompleteList)==null||n.onNavigationKeyDown(t,r):this.forceOpenList()}onEscapeKeyDown(t){this.isListOpen&&(t.preventDefault(),t.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))}onFocusOut(){this.isListOpen&&this.closeList()}updatePositionAndList(){var t;this.updateLastPosition(),this.updateAutocompleteList((t=this.eAutocompleteInput.getValue())!=null?t:null)}setCaret(t,r){const n=this.gos.getDocument(),i=this.gos.getActiveDomElement();r&&(!i||i===n.body)&&this.eAutocompleteInput.getFocusableElement().focus();const s=this.eAutocompleteInput.getInputElement();s.setSelectionRange(t,t),t===s.value.length&&(s.scrollLeft=s.scrollWidth)}forceOpenList(){this.onValueChanged(this.eAutocompleteInput.getValue())}updateLastPosition(){var t;this.lastPosition=(t=this.eAutocompleteInput.getInputElement().selectionStart)!=null?t:0}validate(t){var r;this.validator&&(this.validationMessage=this.validator(t),this.eAutocompleteInput.getInputElement().setCustomValidity((r=this.validationMessage)!=null?r:""),this.valid=!this.validationMessage,this.dispatchEvent({type:Mg.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))}openList(){this.isListOpen=!0,this.autocompleteList=this.createBean(new FJ({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:()=>this.confirmSelection(),forceLastSelection:this.forceLastSelection}));const t=this.autocompleteList.getGui(),r={ePopup:t,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gos.get("enableRtl")?"right":"left",keepWithinBounds:!0},n=this.popupService.addPopup({eChild:t,anchorToElement:this.getGui(),positionCallback:()=>this.popupService.positionPopupByComponent(r),ariaLabel:this.listAriaLabel});this.hidePopup=n.hideFunc,this.autocompleteList.afterGuiAttached()}closeList(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null}onCompleted(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:Mg.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})}getValue(){return Ra(this.eAutocompleteInput.getValue())}setInputPlaceholder(t){return this.eAutocompleteInput.setInputPlaceholder(t),this}setInputAriaLabel(t){return this.eAutocompleteInput.setInputAriaLabel(t),this}setListAriaLabel(t){return this.listAriaLabel=t,this}setListGenerator(t){return this.listGenerator=t,this}setValidator(t){return this.validator=t,this}isValid(){return this.valid}setValue(t){const{value:r,position:n,silent:i,updateListOnlyIfOpen:s,restoreFocus:o}=t;this.eAutocompleteInput.setValue(r,!0),this.setCaret(n??this.lastPosition,o),i||this.updateValue(r),(!s||this.isListOpen)&&this.updateAutocompleteList(r)}setForceLastSelection(t){return this.forceLastSelection=t,this}setInputDisabled(t){return this.eAutocompleteInput.setDisabled(t),this}};Cu.EVENT_VALUE_CHANGED="eventValueChanged";Cu.EVENT_VALUE_CONFIRMED="eventValueConfirmed";Cu.EVENT_OPTION_SELECTED="eventOptionSelected";Cu.EVENT_VALID_CHANGED="eventValidChanged";S([F("popupService")],Cu.prototype,"popupService",2);S([Me("eAutocompleteInput")],Cu.prototype,"eAutocompleteInput",2);S([_e],Cu.prototype,"postConstruct",1);var LJ=Cu,wu=class h0 extends mt{constructor(t,r,n,i){super(),this.dragSourceDropTarget=t,this.ghost=r,this.horizontal=n,this.template=i}init(){var t;this.setTemplate((t=this.template)!=null?t:h0.TEMPLATE);const r=this.getGui();this.addElementClasses(r),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(kr("columnDrag",this.gos)),this.eButton.appendChild(kr("cancel",this.gos)),this.setupComponents(),!this.ghost&&this.isDraggable()&&this.addDragSource(),this.setupAria(),this.setupTooltip(),this.activateTabIndex(),this.refreshDraggable()}isDraggable(){return!0}refreshDraggable(){this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!this.isDraggable())}setupAria(){const t=this.localeService.getLocaleTextFunc(),r=[this.getAriaDisplayName()];this.addAdditionalAriaInstructions(r,t),As(this.getGui(),r.join(". "))}addAdditionalAriaInstructions(t,r){if(this.isRemovable()){const n=r("ariaDropZoneColumnComponentDescription","Press DELETE to remove");t.push(n)}}setupTooltip(){const t=()=>{const r=this.getTooltip();this.setTooltip({newTooltipText:r})};t(),this.addManagedListener(this.eventService,_.EVENT_NEW_COLUMNS_LOADED,t)}getDragSourceId(){}getDefaultIconName(){return Ct.ICON_NOT_ALLOWED}addDragSource(){const{dragAndDropService:t,eDragHandle:r}=this,n=this.createGetDragItem(),i=this.getDefaultIconName(),s={type:this.getDragSourceType(),sourceId:this.getDragSourceId(),eElement:r,getDefaultIconName:()=>i,getDragItem:n,dragItemName:this.getDisplayName()};t.addDragSource(s,!0),this.addDestroyFunc(()=>t.removeDragSource(s))}setupComponents(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost")}isRemovable(){return!0}refreshRemove(){jt(this.eButton,this.isRemovable())}setupRemove(){this.refreshRemove();const t={type:h0.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",n=>this.onKeyDown(n)),this.addManagedListener(this.eButton,"click",n=>{this.dispatchEvent(t),n.stopPropagation()});const r=new kn(this.eButton);this.addManagedListener(r,kn.EVENT_TAP,()=>{this.dispatchEvent(t)}),this.addDestroyFunc(r.destroy.bind(r))}onKeyDown(t){t.key===Y.DELETE&&this.isRemovable()&&(t.preventDefault(),this.dispatchEvent({type:h0.EVENT_COLUMN_REMOVE}))}getDisplayValue(){return this.getDisplayName()}setTextValue(){const t=this.getDisplayValue(),r=sn(t);this.eText.innerHTML=r}addElementClasses(t,r){r=r?`-${r}`:"";const n=this.horizontal?"horizontal":"vertical";t.classList.add(`ag-column-drop-cell${r}`,`ag-column-drop-${n}-cell${r}`)}destroy(){super.destroy(),this.dragSourceDropTarget=null}};wu.EVENT_COLUMN_REMOVE="columnRemove";wu.TEMPLATE=`<span role="option">
          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>
          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>
          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>
        </span>`;S([F("dragAndDropService")],wu.prototype,"dragAndDropService",2);S([Me("eText")],wu.prototype,"eText",2);S([Me("eDragHandle")],wu.prototype,"eDragHandle",2);S([Me("eButton")],wu.prototype,"eButton",2);S([_e],wu.prototype,"init",1);var GJ=wu,py=class ca extends mt{constructor(t){super('<div class="ag-unselectable" role="presentation"></div>'),this.horizontal=t,this.state=ca.STATE_NOT_DRAGGING,this.guiDestroyFunctions=[],this.childPillComponents=[],this.resizeEnabled=!1,this.addElementClasses(this.getGui()),this.ePillDropList=document.createElement("div"),this.addElementClasses(this.ePillDropList,"list"),Gr(this.ePillDropList,"listbox")}isHorizontal(){return this.horizontal}toggleResizable(t){this.positionableFeature.setResizable(t?{bottom:!0}:!1),this.resizeEnabled=t}isSourceEventFromTarget(t){const{dropZoneTarget:r,dragSource:n}=t;return r.contains(n.eElement)}destroy(){this.destroyGui(),super.destroy()}destroyGui(){this.guiDestroyFunctions.forEach(t=>t()),this.guiDestroyFunctions.length=0,this.childPillComponents.length=0,Zr(this.getGui()),Zr(this.ePillDropList)}init(t){this.params=t??{},this.createManagedBean(new gu(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.setupDropTarget(),this.positionableFeature=new Cf(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),As(this.ePillDropList,this.getAriaLabel())}handleKeyDown(t){const r=!this.horizontal;let n=t.key===Y.DOWN,i=t.key===Y.UP;if(!r){const o=this.gos.get("enableRtl");n=!o&&t.key===Y.RIGHT||o&&t.key===Y.LEFT,i=!o&&t.key===Y.LEFT||o&&t.key===Y.RIGHT}if(!n&&!i)return;const s=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,i);s&&(t.preventDefault(),s.focus())}addElementClasses(t,r){r=r?`-${r}`:"";const n=this.horizontal?"horizontal":"vertical";t.classList.add(`ag-column-drop${r}`,`ag-column-drop-${n}${r}`)}setupDropTarget(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.dragAndDropService.addDropTarget(this.dropTarget)}minimumAllowedNewInsertIndex(){return 0}checkInsertIndex(t){const r=this.getNewInsertIndex(t);if(r<0)return!1;const n=this.minimumAllowedNewInsertIndex(),i=Math.max(n,r),s=i!==this.insertIndex;return s&&(this.insertIndex=i),s}getNewInsertIndex(t){const r=t.event,n=this.horizontal?r.clientX:r.clientY,i=this.childPillComponents.map(o=>o.getGui().getBoundingClientRect()),s=i.findIndex(o=>this.horizontal?o.right>n&&o.left<n:o.top<n&&o.bottom>n);if(s===-1){const o=this.gos.get("enableRtl");return i.every(c=>n>(this.horizontal?c.right:c.bottom))?o&&this.horizontal?0:this.childPillComponents.length:i.every(c=>n<(this.horizontal?c.left:c.top))?o&&this.horizontal?this.childPillComponents.length:0:this.insertIndex}return this.insertIndex<=s?s+1:s}checkDragStartedBySelf(t){this.state===ca.STATE_NOT_DRAGGING&&(this.state=ca.STATE_REARRANGE_ITEMS,this.potentialDndItems=this.getItems(t.dragSource.getDragItem()),this.refreshGui(),this.checkInsertIndex(t),this.refreshGui())}onDragging(t){this.checkDragStartedBySelf(t),this.checkInsertIndex(t)&&this.refreshGui()}handleDragEnterEnd(t){}onDragEnter(t){const r=this.getItems(t.dragSource.getDragItem());this.state=ca.STATE_NEW_ITEMS_IN;const n=r.filter(s=>this.isItemDroppable(s,t)),i=n.every(s=>this.childPillComponents.map(o=>o.getItem()).indexOf(s)!==-1);if(n.length!==0){if(this.potentialDndItems=n,i){this.state=ca.STATE_NOT_DRAGGING;return}this.handleDragEnterEnd(t),this.checkInsertIndex(t),this.refreshGui()}}isPotentialDndItems(){return V4(this.potentialDndItems)}handleDragLeaveEnd(t){}onDragLeave(t){if(this.state===ca.STATE_REARRANGE_ITEMS){const r=this.getItems(t.dragSource.getDragItem());this.removeItems(r)}this.isPotentialDndItems()&&(this.handleDragLeaveEnd(t),this.potentialDndItems=[],this.refreshGui()),this.state=ca.STATE_NOT_DRAGGING}refreshOnDragStop(){return!0}onDragStop(){if(this.isPotentialDndItems()){let t=!1;this.state===ca.STATE_NEW_ITEMS_IN?(this.addItems(this.potentialDndItems),t=!0):t=this.rearrangeItems(this.potentialDndItems),this.potentialDndItems=[],(this.refreshOnDragStop()||!t)&&this.refreshGui()}this.state=ca.STATE_NOT_DRAGGING}removeItems(t){const r=this.getExistingItems().filter(n=>!Ps(t,n));this.updateItems(r)}addItems(t){if(!t)return;const r=this.getExistingItems().slice(),n=t.filter(i=>r.indexOf(i)<0);xT(r,n,this.insertIndex),this.updateItems(r)}addItem(t){this.insertIndex=this.getExistingItems().length,this.addItems([t]),this.refreshGui()}rearrangeItems(t){const r=this.getNonGhostItems().slice();return xT(r,t,this.insertIndex),Ca(r,this.getExistingItems())?!1:(this.updateItems(r),!0)}refreshGui(){const t=this.ePillDropList.scrollTop,r=this.resizeEnabled,n=this.getFocusedItem();let i=this.focusService.findNextFocusableElement();i||(i=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addItemsToGui(),this.isHorizontal()||(this.ePillDropList.scrollTop=t),r&&this.toggleResizable(r),this.focusService.isKeyboardMode()&&this.restoreFocus(n,i)}getFocusedItem(){const t=this.getGui(),r=this.gos.getActiveDomElement();return t.contains(r)?Array.from(t.querySelectorAll(".ag-column-drop-cell")).indexOf(r):-1}restoreFocus(t,r){const n=this.getGui(),i=Array.from(n.querySelectorAll(".ag-column-drop-cell"));if(t===-1)return;i.length===0&&r.focus();const s=Math.min(i.length-1,t),o=i[s];o&&o.focus()}focusList(t){const r=t?this.childPillComponents.length-1:0;this.restoreFocus(r,this.getFocusableElement())}getNonGhostItems(){const t=this.getExistingItems();return this.isPotentialDndItems()?t.filter(r=>!Ps(this.potentialDndItems,r)):t}addItemsToGui(){const r=this.getNonGhostItems().map(n=>this.createItemComponent(n,!1));if(this.isPotentialDndItems()){const n=this.potentialDndItems.map(i=>this.createItemComponent(i,!0));this.insertIndex>=r.length?r.push(...n):r.splice(this.insertIndex,0,...n)}this.appendChild(this.ePillDropList),r.forEach((n,i)=>{i>0&&this.addArrow(this.ePillDropList),this.ePillDropList.appendChild(n.getGui())}),this.addAriaLabelsToComponents()}addAriaLabelsToComponents(){this.childPillComponents.forEach((t,r)=>{const n=t.getGui();IS(n,r+1),kS(n,this.childPillComponents.length)})}createItemComponent(t,r){const n=this.createPillComponent(t,this.dropTarget,r,this.horizontal);return n.addEventListener(GJ.EVENT_COLUMN_REMOVE,this.removeItems.bind(this,[t])),this.context.createBean(n),this.guiDestroyFunctions.push(()=>this.destroyBean(n)),r||this.childPillComponents.push(n),n}addIconAndTitleToGui(){const{title:t,icon:r}=this.params;if(!t||!r)return;const n=document.createElement("div");if(Zv(n,!0),this.addElementClasses(n,"title-bar"),this.addElementClasses(r,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingItemsEmpty()),n.appendChild(r),!this.horizontal){const i=document.createElement("span");this.addElementClasses(i,"title"),i.innerHTML=t,n.appendChild(i)}this.appendChild(n)}isExistingItemsEmpty(){return this.getExistingItems().length===0}addEmptyMessageToGui(){const{emptyMessage:t}=this.params;if(!t||!this.isExistingItemsEmpty()||this.isPotentialDndItems())return;const r=document.createElement("span");r.innerHTML=t,this.addElementClasses(r,"empty-message"),this.ePillDropList.appendChild(r)}addArrow(t){if(this.horizontal){const r=this.gos.get("enableRtl"),n=kr(r?"smallLeft":"smallRight",this.gos);this.addElementClasses(n,"cell-separator"),t.appendChild(n)}}};py.STATE_NOT_DRAGGING="notDragging";py.STATE_NEW_ITEMS_IN="newItemsIn";py.STATE_REARRANGE_ITEMS="rearrangeItems";S([F("focusService")],py.prototype,"focusService",2);S([F("dragAndDropService")],py.prototype,"dragAndDropService",2);var jJ=["touchstart","touchend","touchmove","touchcancel"],tU=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t()}setInterval(e,t){return new on(r=>{r(window.setInterval(e,t))})}addEventListener(e,t,r,n){const i=Ps(jJ,t);e.addEventListener(t,r,{capture:!!n,passive:i})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},tu=class extends Ae{getNextCellToFocus(e,t,r=!1){return r?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const r=e===Y.UP,n=e===Y.DOWN,i=e===Y.LEFT;let s,o;if(r||n)o=r?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),s=t.column;else{const a=this.columnModel.getAllDisplayedColumns(),l=this.gos.get("enableRtl");o=t.rowIndex,s=i!==l?a[0]:Wt(a)}return{rowIndex:o,rowPinned:null,column:s}}getNextCellToFocusWithoutCtrlPressed(e,t){let r=t,n=!1;for(;!n;){switch(e){case Y.UP:r=this.getCellAbove(r);break;case Y.DOWN:r=this.getCellBelow(r);break;case Y.RIGHT:this.gos.get("enableRtl")?r=this.getCellToLeft(r):r=this.getCellToRight(r);break;case Y.LEFT:this.gos.get("enableRtl")?r=this.getCellToRight(r):r=this.getCellToLeft(r);break;default:r=null,console.warn("AG Grid: unknown key for navigation "+e);break}r?n=this.isCellGoodToFocusOn(r):n=!0}return r}isCellGoodToFocusOn(e){const t=e.column;let r;switch(e.rowPinned){case"top":r=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":r=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:r=this.rowModel.getRow(e.rowIndex);break}return r?!t.isSuppressNavigable(r):!1}getCellToLeft(e){if(!e)return null;const t=this.columnModel.getDisplayedColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.columnModel.getDisplayedColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,r=e.rowPinned;if(this.isLastRowInContainer(e))switch(r){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}const n=this.rowModel.getRow(e.rowIndex),i=this.getNextStickyPosition(n);return i||{rowIndex:t+1,rowPinned:r}}getNextStickyPosition(e,t){if(!this.gos.isGroupRowsSticky()||!e||!e.sticky)return;const r=this.rowRenderer.getStickyTopRowCtrls().some(a=>a.getRowNode().rowIndex===e.rowIndex);let n=[];r?n=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,l)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex):n=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((a,l)=>l.getRowNode().rowIndex-a.getRowNode().rowIndex);const i=t?-1:1,s=n.findIndex(a=>a.getRowNode().rowIndex===e.rowIndex),o=n[s+i];if(o)return{rowIndex:o.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;const t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,r=e.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowData().length-1<=r:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowData().length-1<=r:this.paginationProxy.getPageLastRow()<=r}getRowAbove(e){const t=e.rowIndex,r=e.rowPinned;if(r?t===0:t===this.paginationProxy.getPageFirstRow())return r==="top"?null:r?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;const i=this.rowModel.getRow(e.rowIndex),s=this.getNextStickyPosition(i,!0);return s||{rowIndex:t-1,rowPinned:r}}getCellAbove(e){if(!e)return null;const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const t=this.columnModel.getAllDisplayedColumns();let r=e.rowIndex,n=e.rowPinned,i=this.columnModel.getDisplayedColAfter(e.column);if(!i){i=t[0];const s=this.getRowBelow(e);if(gt(s)||!s.rowPinned&&!this.paginationProxy.isRowInPage(s))return null;r=s?s.rowIndex:null,n=s?s.rowPinned:null}return{rowIndex:r,column:i,rowPinned:n}}getNextTabbedCellBackwards(e){const t=this.columnModel.getAllDisplayedColumns();let r=e.rowIndex,n=e.rowPinned,i=this.columnModel.getDisplayedColBefore(e.column);if(!i){i=Wt(t);const s=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(gt(s)||!s.rowPinned&&!this.paginationProxy.isRowInPage(s))return null;r=s?s.rowIndex:null,n=s?s.rowPinned:null}return{rowIndex:r,column:i,rowPinned:n}}};S([F("columnModel")],tu.prototype,"columnModel",2);S([F("rowModel")],tu.prototype,"rowModel",2);S([F("rowRenderer")],tu.prototype,"rowRenderer",2);S([F("pinnedRowModel")],tu.prototype,"pinnedRowModel",2);S([F("paginationProxy")],tu.prototype,"paginationProxy",2);tu=S([$e("cellNavigationService")],tu);var Gd=class extends Ae{constructor(){super(...arguments),this.consuming=!1}setBeans(e){this.logger=e.create("AlignedGridsService")}getAlignedGridApis(){var e;let t=(e=this.gos.get("alignedGrids"))!=null?e:[];const r=typeof t=="function";typeof t=="function"&&(t=t());const n=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return t.map(s=>{var o;if(!s){ed("alignedGrids contains an undefined option."),r||ed(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),ed(n());return}if(s instanceof Ft)return s;const a=s;return"current"in a?(o=a.current)==null?void 0:o.api:(a.api||ed(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${n()}`),a.api)}).filter(s=>!!s&&!s.isDestroyed())}init(){this.addManagedListener(this.eventService,_.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,_.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,_.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,_.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,_.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,_.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{if(t.isDestroyed())return;const r=t.__getAlignedGridService();e(r)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent(t=>{t.onColumnEvent(e)})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent(t=>{t.onScrollEvent(e)})}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}getMasterColumns(e){const t=[];return e.columns?e.columns.forEach(r=>{t.push(r)}):e.column&&t.push(e.column),t}getColumnIds(e){const t=[];return e.columns?e.columns.forEach(r=>{t.push(r.getColId())}):e.column&&t.push(e.column.getColId()),t}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case _.EVENT_COLUMN_MOVED:case _.EVENT_COLUMN_VISIBLE:case _.EVENT_COLUMN_PINNED:case _.EVENT_COLUMN_RESIZED:const t=e;this.processColumnEvent(t);break;case _.EVENT_COLUMN_GROUP_OPENED:const r=e;this.processGroupOpenedEvent(r);break;case _.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){e.columnGroups.forEach(t=>{let r=null;if(t){const n=t.getGroupId();r=this.columnModel.getProvidedColumnGroup(n)}t&&!r||(this.logger.log("onColumnEvent-> processing "+e+" expanded = "+t.isExpanded()),this.columnModel.setColumnGroupOpened(r,t.isExpanded(),"alignedGridChanged"))})}processColumnEvent(e){var t;const r=e.column;let n=null;if(r&&(n=this.columnModel.getPrimaryColumn(r.getColId())),r&&!n)return;const i=this.getMasterColumns(e);switch(e.type){case _.EVENT_COLUMN_MOVED:{const c=e,d=e.api.getColumnState().map(p=>({colId:p.colId}));this.columnModel.applyColumnState({state:d,applyOrder:!0},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} toIndex = ${c.toIndex}`)}break;case _.EVENT_COLUMN_VISIBLE:{const c=e,d=e.api.getColumnState().map(p=>({colId:p.colId,hide:p.hide}));this.columnModel.applyColumnState({state:d},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} visible = ${c.visible}`)}break;case _.EVENT_COLUMN_PINNED:{const c=e,d=e.api.getColumnState().map(p=>({colId:p.colId,pinned:p.pinned}));this.columnModel.applyColumnState({state:d},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} pinned = ${c.pinned}`)}break;case _.EVENT_COLUMN_RESIZED:const a=e,l={};i.forEach(c=>{this.logger.log(`onColumnEvent-> processing ${e.type} actualWidth = ${c.getActualWidth()}`),l[c.getId()]={key:c.getColId(),newWidth:c.getActualWidth()}}),(t=a.flexColumns)==null||t.forEach(c=>{l[c.getId()]&&delete l[c.getId()]}),this.columnModel.setColumnWidths(Object.values(l),!1,a.finished,"alignedGridChanged");break}const o=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(a=>{a.setGridOption("alwaysShowVerticalScroll",o)})}};S([F("columnModel")],Gd.prototype,"columnModel",2);S([F("ctrlsService")],Gd.prototype,"ctrlsService",2);S([Go(0,Ys("loggerFactory"))],Gd.prototype,"setBeans",1);S([_e],Gd.prototype,"init",1);Gd=S([$e("alignedGridsService")],Gd);var jd=class extends Ae{constructor(){super(...arguments),this.selectedNodes=new Map,this.lastRowNode=null}init(){this.rowSelection=this.gos.get("rowSelection"),this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.rowSelection=this.gos.get("rowSelection"),this.deselectAllRowNodes({source:"api"})}),this.addManagedListener(this.eventService,_.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))}destroy(){super.destroy(),this.resetNodes(),this.lastRowNode=null}isMultiselect(){return this.rowSelection==="multiple"}setNodesSelected(e){var t;const{newValue:r,clearSelection:n,suppressFinishActions:i,rangeSelect:s,nodes:o,event:a,source:l="api"}=e;if(o.length===0)return 0;if(o.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;const c=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,u=o.map(p=>p.footer?p.sibling:p);if(s){if(o.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;let p=null;if(l==="checkboxSelected"&&r===!1&&this.lastRowNode&&(this.lastRowNode.id?p=this.lastRowNode:this.lastRowNode=null),p==null&&(p=this.getLastSelectedNode()),p){const f=u[0];if(f!==p&&this.isMultiselect())return this.selectRange(f,p,r,l)}}this.lastRowNode=r?null:u[0];let d=0;for(let p=0;p<u.length;p++){const f=u[p];c&&f.group||f.selectThisNode(r,a,l)&&d++,this.groupSelectsChildren&&((t=f.childrenAfterGroup)!=null&&t.length)&&(d+=this.selectChildren(f,r,c,l))}if(!i&&(r&&(n||!this.isMultiselect())&&(d+=this.clearOtherNodes(u[0],l)),d>0)){this.updateGroupsFromChildrenSelections(l);const f={type:_.EVENT_SELECTION_CHANGED,source:l};this.eventService.dispatchEvent(f)}return d}selectRange(e,t,r=!0,n){const i=this.rowModel.getNodesInRangeForSelection(e,t);let s=0;i.forEach(a=>{if(a.group&&this.groupSelectsChildren)return;a.selectThisNode(r,void 0,n)&&s++}),this.updateGroupsFromChildrenSelections(n);const o={type:_.EVENT_SELECTION_CHANGED,source:n};return this.eventService.dispatchEvent(o),s}selectChildren(e,t,r,n){const i=r?e.childrenAfterAggFilter:e.childrenAfterGroup;return gt(i)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:r,source:n,nodes:i})}getLastSelectedNode(){const e=Array.from(this.selectedNodes.keys());if(e.length==0)return null;const t=this.selectedNodes.get(Wt(e));return t||null}getSelectedNodes(){const e=[];return this.selectedNodes.forEach(t=>{t&&e.push(t)}),e}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>{t&&t.data&&e.push(t.data)}),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((r,n)=>{r&&e(r)&&t.set(n,r)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;const n=this.rowModel.getRootNode();t||(t=new rx(!0,n),t.setInactive());let i=!1;return t.forEachChangedNodeDepthFirst(s=>{if(s!==n){const o=s.calculateSelectedFromChildren();i=s.selectThisNode(o===null?!1:o,void 0,e)||i}}),i}clearOtherNodes(e,t){const r=new Map;let n=0;return this.selectedNodes.forEach(i=>{if(i&&i.id!==e.id){const s=this.selectedNodes.get(i.id);n+=s.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&i.parent&&r.set(i.parent.id,i.parent)}}),r.forEach(i=>{const s=i.calculateSelectedFromChildren();i.selectThisNode(s===null?!1:s,void 0,t)}),n}onRowSelected(e){const t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(xe(t)&&e.id!==t.id&&t){const n=t.id;this.selectedNodes.get(n)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){const t=this.getSelectionCount();if(this.resetNodes(),t){const r={type:_.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(r)}}resetNodes(){var e;(e=this.selectedNodes)==null||e.clear()}getBestCostNodeSelection(){if(this.rowModel.getType()!=="clientSide")return;const t=this.rowModel.getTopLevelNodes();if(t===null)return;const r=[];function n(i){for(let s=0,o=i.length;s<o;s++){const a=i[s];if(a.isSelected())r.push(a);else{const l=a;l.group&&l.children&&n(l.children)}}}return n(t),r}isEmpty(){let e=0;return this.selectedNodes.forEach(t=>{t&&e++}),e===0}deselectAllRowNodes(e){const t=a=>a.selectThisNode(!1,void 0,n),r=this.rowModel.getType()==="clientSide",{source:n,justFiltered:i,justCurrentPage:s}=e;if(s||i){if(!r){console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(i,s).forEach(t)}else this.selectedNodes.forEach(a=>{a&&t(a)}),this.reset(n);r&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(n);const o={type:_.EVENT_SELECTION_CHANGED,source:n};this.eventService.dispatchEvent(o)}getSelectedCounts(e,t){let r=0,n=0;const i=s=>{this.groupSelectsChildren&&s.group||(s.isSelected()?r++:s.selectable&&n++)};return this.getNodesToSelect(e,t).forEach(i),{selectedCount:r,notSelectedCount:n}}getSelectAllState(e,t){const{selectedCount:r,notSelectedCount:n}=this.getSelectedCounts(e,t);return r===0&&n===0?!1:r>0&&n>0?null:r>0}hasNodesToSelect(e=!1,t=!1){return this.getNodesToSelect(e,t).filter(r=>r.selectable).length>0}getNodesToSelect(e=!1,t=!1){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const r=[];if(t)return this.paginationProxy.forEachNodeOnPage(i=>{if(!i.group){r.push(i);return}if(!i.expanded){const s=o=>{var a;r.push(o),(a=o.childrenAfterFilter)!=null&&a.length&&o.childrenAfterFilter.forEach(s)};s(i);return}this.groupSelectsChildren||r.push(i)}),r;const n=this.rowModel;return e?(n.forEachNodeAfterFilter(i=>{r.push(i)}),r):(n.forEachNode(i=>{r.push(i)}),r)}selectAllRowNodes(e){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const{source:t,justFiltered:r,justCurrentPage:n}=e,i=o=>o.selectThisNode(!0,void 0,t);this.getNodesToSelect(r,n).forEach(i),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t);const s={type:_.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(s)}getSelectionState(){const e=[];return this.selectedNodes.forEach(t=>{t!=null&&t.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return;const r=new Set(e),n=[];this.rowModel.forEachNode(i=>{r.has(i.id)&&n.push(i)}),this.setNodesSelected({newValue:!0,nodes:n,source:t})}};S([F("rowModel")],jd.prototype,"rowModel",2);S([F("paginationProxy")],jd.prototype,"paginationProxy",2);S([_e],jd.prototype,"init",1);jd=S([$e("selectionService")],jd);var Kp=class{constructor(e){this.viaApi=(t,...r)=>(ot(`Since v31, 'columnApi.${t}' is deprecated and moved to 'api.${t}'.`),this.api[t](...r)),this.api=e}sizeColumnsToFit(e){this.viaApi("sizeColumnsToFit",e)}setColumnGroupOpened(e,t){this.viaApi("setColumnGroupOpened",e,t)}getColumnGroup(e,t){return this.viaApi("getColumnGroup",e,t)}getProvidedColumnGroup(e){return this.viaApi("getProvidedColumnGroup",e)}getDisplayNameForColumn(e,t){return this.viaApi("getDisplayNameForColumn",e,t)}getDisplayNameForColumnGroup(e,t){return this.viaApi("getDisplayNameForColumnGroup",e,t)}getColumn(e){return this.viaApi("getColumn",e)}getColumns(){return this.viaApi("getColumns")}applyColumnState(e){return this.viaApi("applyColumnState",e)}getColumnState(){return this.viaApi("getColumnState")}resetColumnState(){this.viaApi("resetColumnState")}getColumnGroupState(){return this.viaApi("getColumnGroupState")}setColumnGroupState(e){this.viaApi("setColumnGroupState",e)}resetColumnGroupState(){this.viaApi("resetColumnGroupState")}isPinning(){return this.viaApi("isPinning")}isPinningLeft(){return this.viaApi("isPinningLeft")}isPinningRight(){return this.viaApi("isPinningRight")}getDisplayedColAfter(e){return this.viaApi("getDisplayedColAfter",e)}getDisplayedColBefore(e){return this.viaApi("getDisplayedColBefore",e)}setColumnVisible(e,t){this.viaApi("setColumnVisible",e,t)}setColumnsVisible(e,t){this.viaApi("setColumnsVisible",e,t)}setColumnPinned(e,t){this.viaApi("setColumnPinned",e,t)}setColumnsPinned(e,t){this.viaApi("setColumnsPinned",e,t)}getAllGridColumns(){return this.viaApi("getAllGridColumns")}getDisplayedLeftColumns(){return this.viaApi("getDisplayedLeftColumns")}getDisplayedCenterColumns(){return this.viaApi("getDisplayedCenterColumns")}getDisplayedRightColumns(){return this.viaApi("getDisplayedRightColumns")}getAllDisplayedColumns(){return this.viaApi("getAllDisplayedColumns")}getAllDisplayedVirtualColumns(){return this.viaApi("getAllDisplayedVirtualColumns")}moveColumn(e,t){this.viaApi("moveColumn",e,t)}moveColumnByIndex(e,t){this.viaApi("moveColumnByIndex",e,t)}moveColumns(e,t){this.viaApi("moveColumns",e,t)}moveRowGroupColumn(e,t){this.viaApi("moveRowGroupColumn",e,t)}setColumnAggFunc(e,t){this.viaApi("setColumnAggFunc",e,t)}setColumnWidth(e,t,r=!0,n){this.viaApi("setColumnWidth",e,t,r,n)}setColumnWidths(e,t=!0,r){this.viaApi("setColumnWidths",e,t,r)}setPivotMode(e){this.viaApi("setPivotMode",e)}isPivotMode(){return this.viaApi("isPivotMode")}getPivotResultColumn(e,t){return this.viaApi("getPivotResultColumn",e,t)}setValueColumns(e){this.viaApi("setValueColumns",e)}getValueColumns(){return this.viaApi("getValueColumns")}removeValueColumn(e){this.viaApi("removeValueColumn",e)}removeValueColumns(e){this.viaApi("removeValueColumns",e)}addValueColumn(e){this.viaApi("addValueColumn",e)}addValueColumns(e){this.viaApi("addValueColumns",e)}setRowGroupColumns(e){this.viaApi("setRowGroupColumns",e)}removeRowGroupColumn(e){this.viaApi("removeRowGroupColumn",e)}removeRowGroupColumns(e){this.viaApi("removeRowGroupColumns",e)}addRowGroupColumn(e){this.viaApi("addRowGroupColumn",e)}addRowGroupColumns(e){this.viaApi("addRowGroupColumns",e)}getRowGroupColumns(){return this.viaApi("getRowGroupColumns")}setPivotColumns(e){this.viaApi("setPivotColumns",e)}removePivotColumn(e){this.viaApi("removePivotColumn",e)}removePivotColumns(e){this.viaApi("removePivotColumns",e)}addPivotColumn(e){this.viaApi("addPivotColumn",e)}addPivotColumns(e){this.viaApi("addPivotColumns",e)}getPivotColumns(){return this.viaApi("getPivotColumns")}getLeftDisplayedColumnGroups(){return this.viaApi("getLeftDisplayedColumnGroups")}getCenterDisplayedColumnGroups(){return this.viaApi("getCenterDisplayedColumnGroups")}getRightDisplayedColumnGroups(){return this.viaApi("getRightDisplayedColumnGroups")}getAllDisplayedColumnGroups(){return this.viaApi("getAllDisplayedColumnGroups")}autoSizeColumn(e,t){return this.viaApi("autoSizeColumn",e,t)}autoSizeColumns(e,t){this.viaApi("autoSizeColumns",e,t)}autoSizeAllColumns(e){this.viaApi("autoSizeAllColumns",e)}setPivotResultColumns(e){this.viaApi("setPivotResultColumns",e)}getPivotResultColumns(){return this.viaApi("getPivotResultColumns")}};S([F("gridApi")],Kp.prototype,"api",2);Kp=S([$e("columnApi")],Kp);var ru=class extends Ae{constructor(){super(...arguments),this.initialised=!1,this.isSsrm=!1}init(){this.isSsrm=this.gos.isRowModelType("serverSide"),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=r=>this.callColumnCellValueChangedHandler(r),t=this.gos.useAsyncEvents();this.eventService.addEventListener(_.EVENT_CELL_VALUE_CHANGED,e,t),this.addDestroyFunc(()=>this.eventService.removeEventListener(_.EVENT_CELL_VALUE_CHANGED,e,t)),this.addManagedPropertyListener("treeData",r=>this.isTreeData=r.currentValue)}getValue(e,t,r=!1,n=!1){if(this.initialised||this.init(),!t)return;const i=e.getColDef(),s=i.field,o=e.getColId(),a=t.data;let l;const c=t.groupData&&t.groupData[o]!==void 0,u=!n&&t.aggData&&t.aggData[o]!==void 0,d=this.isSsrm&&n&&!!e.getColDef().aggFunc,p=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(r&&i.filterValueGetter?l=this.executeFilterValueGetter(i.filterValueGetter,a,e,t):this.isTreeData&&u?l=t.aggData[o]:this.isTreeData&&i.valueGetter?l=this.executeValueGetter(i.valueGetter,a,e,t):this.isTreeData&&s&&a?l=pp(a,s,e.isFieldContainsDots()):c?l=t.groupData[o]:u?l=t.aggData[o]:i.valueGetter?l=this.executeValueGetter(i.valueGetter,a,e,t):p?l=pp(a,t.field,e.isFieldContainsDots()):s&&a&&!d&&(l=pp(a,s,e.isFieldContainsDots())),this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){const f=l.substring(1);l=this.executeValueGetter(f,a,e,t)}if(l==null){const f=this.getOpenedGroup(t,e);if(f!=null)return f}return l}parseValue(e,t,r,n){const i=e.getColDef(),s=this.gos.addGridCommonParams({node:t,data:t==null?void 0:t.data,oldValue:n,newValue:r,colDef:i,column:e}),o=i.valueParser;return xe(o)?typeof o=="function"?o(s):this.expressionService.evaluate(o,s):r}formatValue(e,t,r,n,i=!0){let s=null,o;const a=e.getColDef();if(n?o=n:i&&(o=a.valueFormatter),o){const l=this.gos.addGridCommonParams({value:r,node:t,data:t?t.data:null,colDef:a,column:e});typeof o=="function"?s=o(l):s=this.expressionService.evaluate(o,l)}else if(a.refData)return a.refData[r]||"";return s==null&&Array.isArray(r)&&(s=r.join(", ")),s}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;const n=t.getColDef().showRowGroup;let i=e.parent;for(;i!=null;){if(i.rowGroupColumn&&(n===!0||n===i.rowGroupColumn.getColId()))return i.key;i=i.parent}}setValue(e,t,r,n){const i=this.columnModel.getPrimaryColumn(t);if(!e||!i)return!1;gt(e.data)&&(e.data={});const{field:s,valueSetter:o}=i.getColDef();if(gt(s)&&gt(o))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(i,r))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;const a=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(i,e),newValue:r,colDef:i.getColDef(),column:i});a.newValue=r;let l;if(xe(o)?typeof o=="function"?l=o(a):l=this.expressionService.evaluate(o,a):l=this.setValueUsingField(e.data,s,r,i.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),a.newValue=this.getValue(i,e);const c={type:_.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:a.column,api:a.api,columnApi:a.columnApi,colDef:a.colDef,context:a.context,data:e.data,node:e,oldValue:a.oldValue,newValue:a.newValue,value:a.newValue,source:n};return this.eventService.dispatchEvent(c),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,columnApi:e.columnApi,context:e.context})})}setValueUsingField(e,t,r,n){if(!t)return!1;let i=!1;if(!n)i=e[t]===r,i||(e[t]=r);else{const s=t.split(".");let o=e;for(;s.length>0&&o;){const a=s.shift();s.length===0?(i=o[a]===r,i||(o[a]=r)):o=o[a]}}return!i}executeFilterValueGetter(e,t,r,n){const i=this.gos.addGridCommonParams({data:t,node:n,column:r,colDef:r.getColDef(),getValue:this.getValueCallback.bind(this,n)});return typeof e=="function"?e(i):this.expressionService.evaluate(e,i)}executeValueGetter(e,t,r,n){const i=r.getColId(),s=this.valueCache.getValue(n,i);if(s!==void 0)return s;const o=this.gos.addGridCommonParams({data:t,node:n,column:r,colDef:r.getColDef(),getValue:this.getValueCallback.bind(this,n)});let a;return typeof e=="function"?a=e(o):a=this.expressionService.evaluate(e,o),this.valueCache.setValue(n,i,a),a}getValueCallback(e,t){const r=this.columnModel.getPrimaryColumn(t);return r?this.getValue(r,e):null}getKeyForNode(e,t){const r=this.getValue(e,t),n=e.getColDef().keyCreator;let i=r;if(n){const s=this.gos.addGridCommonParams({value:r,colDef:e.getColDef(),column:e,node:t,data:t.data});i=n(s)}return typeof i=="string"||i==null||(i=String(i),i==="[object Object]"&&ot("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),i}};S([F("expressionService")],ru.prototype,"expressionService",2);S([F("columnModel")],ru.prototype,"columnModel",2);S([F("valueCache")],ru.prototype,"valueCache",2);S([F("dataTypeService")],ru.prototype,"dataTypeService",2);S([_e],ru.prototype,"init",1);ru=S([$e("valueService")],ru);var Sw=class extends Ae{constructor(){super(...arguments),this.expressionToFunctionCache={}}setBeans(e){this.logger=e.create("ExpressionService")}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);console.error("AG Grid: value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.columnApi,t.getValue,t.column,t.columnGroup)}catch(r){return console.log("Processing of the expression failed"),console.log("Expression = "+e),console.log("Params =",t),console.log("Exception = "+r),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];const t=this.createFunctionBody(e),r=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=r,r}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}};S([Go(0,Ys("loggerFactory"))],Sw.prototype,"setBeans",1);Sw=S([$e("expressionService")],Sw);var xw=class extends Ae{setBeans(e){this.logging=e.get("debug")}create(e){return new Tk(e,this.isLogging.bind(this))}isLogging(){return this.logging}};S([Go(0,Ys("gridOptionsService"))],xw.prototype,"setBeans",1);xw=S([$e("loggerFactory")],xw);var Tk=class{constructor(t,r){this.name=t,this.isLoggingFunc=r}isLogging(){return this.isLoggingFunc()}log(t){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+t)}},bu=class extends Ae{setComp(e,t,r){this.view=e,this.eGridHostDiv=t,this.eGui=r,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:i=>i===1||i===0,getIconName:()=>Ct.ICON_NOT_ALLOWED}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new KS(this.view)),this.addRtlSupport();const n=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>n()),this.ctrlsService.register("gridCtrl",this)}isDetailGrid(){var e;const t=this.focusService.findTabbableParent(this.getGui());return((e=t==null?void 0:t.getAttribute("row-id"))==null?void 0:e.startsWith("detail"))||!1}showDropZones(){return Yt.__isRegistered("@ag-grid-enterprise/row-grouping",this.context.getGridId())}showSideBar(){return Yt.__isRegistered("@ag-grid-enterprise/side-bar",this.context.getGridId())}showStatusBar(){return Yt.__isRegistered("@ag-grid-enterprise/status-bar",this.context.getGridId())}showWatermark(){return Yt.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId())}onGridSizeChanged(){const e={type:_.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(e)}addRtlSupport(){const e=this.gos.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.view.getFocusableContainers(),r=this.gos.getActiveDomElement(),i=t.findIndex(s=>s.contains(r))+(e?-1:1);return i<=0||i>=t.length?!1:this.focusService.focusInto(t[i])}focusInnerElement(e){const t=this.view.getFocusableContainers(),r=this.columnModel.getAllDisplayedColumns();if(e){if(t.length>1)return this.focusService.focusInto(Wt(t),!0);const n=Wt(r);if(this.focusService.focusGridView(n,!0))return!0}if(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")){if(this.focusService.focusGridView(r[0]))return!0;for(let n=1;n<t.length;n++)if(this.focusService.focusInto(t[n]))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}};S([F("focusService")],bu.prototype,"focusService",2);S([F("resizeObserverService")],bu.prototype,"resizeObserverService",2);S([F("columnModel")],bu.prototype,"columnModel",2);S([F("ctrlsService")],bu.prototype,"ctrlsService",2);S([F("mouseEventService")],bu.prototype,"mouseEventService",2);S([F("dragAndDropService")],bu.prototype,"dragAndDropService",2);var fy=class extends uy{constructor(t){super(),this.eGridDiv=t}postConstruct(){this.logger=this.loggerFactory.create("GridComp");const t={destroyGridUi:()=>this.destroyBean(this),setRtlClass:n=>this.addCssClass(n),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:n=>{this.getGui().style.userSelect=n??"",this.getGui().style.webkitUserSelect=n??""},setCursor:n=>{this.getGui().style.cursor=n??""}};this.ctrl=this.createManagedBean(new bu);const r=this.createTemplate();this.setTemplate(r),this.ctrl.setComp(t,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:n=>this.ctrl.focusInnerElement(n),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){const t=this.getGui();this.eGridDiv.appendChild(t),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(t),this.logger.log("Grid removed from DOM")})}updateLayoutClasses(t,r){const n=this.eRootWrapperBody.classList;n.toggle("ag-layout-auto-height",r.autoHeight),n.toggle("ag-layout-normal",r.normal),n.toggle("ag-layout-print",r.print),this.addOrRemoveCssClass("ag-layout-auto-height",r.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",r.normal),this.addOrRemoveCssClass("ag-layout-print",r.print)}createTemplate(){const t=this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",r=this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"",n=this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"",i=this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"";return`<div class="ag-root-wrapper" role="presentation">
                ${t}
                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">
                    <ag-grid-body ref="gridBody"></ag-grid-body>
                    ${r}
                </div>
                ${n}
                <ag-pagination></ag-pagination>
                ${i}
            </div>`}getFocusableElement(){return this.eRootWrapperBody}getFocusableContainers(){const t=[this.gridBodyComp.getGui()];return this.sideBarComp&&t.push(this.sideBarComp.getGui()),t.filter(r=>ns(r))}};S([F("loggerFactory")],fy.prototype,"loggerFactory",2);S([Me("gridBody")],fy.prototype,"gridBodyComp",2);S([Me("sideBar")],fy.prototype,"sideBarComp",2);S([Me("rootWrapperBody")],fy.prototype,"eRootWrapperBody",2);S([_e],fy.prototype,"postConstruct",1);var Bd=class extends Ae{progressSort(e,t,r){const n=this.getNextSortDirection(e);this.setSortForColumn(e,n,t,r)}setSortForColumn(e,t,r,n){t!=="asc"&&t!=="desc"&&(t=null);const i=this.gos.isColumnsSortingCoupledToGroup();let s=[e];if(i&&e.getColDef().showRowGroup){const l=this.columnModel.getSourceColumnsForGroupColumn(e),c=l==null?void 0:l.filter(u=>u.isSortable());c&&(s=[e,...c])}s.forEach(l=>l.setSort(t,n));const o=(r||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),a=[];if(!o){const l=this.clearSortBarTheseColumns(s,n);a.push(...l)}this.updateSortIndex(e),a.push(...s),this.dispatchSortChangedEvents(n,a)}updateSortIndex(e){const t=this.gos.isColumnsSortingCoupledToGroup(),r=this.columnModel.getGroupDisplayColumnForGroup(e.getId()),n=t&&r||e,i=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(a=>a.setSortIndex(null));const s=i.filter(a=>t&&a.getColDef().showRowGroup?!1:a!==n);(n.getSort()?[...s,n]:s).forEach((a,l)=>{a.setSortIndex(l)})}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const t=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(r=>!!r.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){const r={type:_.EVENT_SORT_CHANGED,source:e};t&&(r.columns=t),this.eventService.dispatchEvent(r)}clearSortBarTheseColumns(e,t){const r=[];return this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(n=>{e.includes(n)||(n.getSort()&&r.push(n),n.setSort(void 0,t))}),r}getNextSortDirection(e){let t;if(e.getColDef().sortingOrder?t=e.getColDef().sortingOrder:this.gos.get("sortingOrder")?t=this.gos.get("sortingOrder"):t=Bd.DEFAULT_SORTING_ORDER,!Array.isArray(t)||t.length<=0)return console.warn(`AG Grid: sortingOrder must be an array with at least one element, currently it's ${t}`),null;const r=t.indexOf(e.getSort()),n=r<0,i=r==t.length-1;let s;return n||i?s=t[0]:s=t[r+1],Bd.DEFAULT_SORTING_ORDER.indexOf(s)<0?(console.warn("AG Grid: invalid sort type "+s),null):s}getIndexedSortMap(){let e=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(s=>!!s.getSort());if(this.columnModel.isPivotMode()){const s=this.gos.isColumnsSortingCoupledToGroup();e=e.filter(o=>{const a=!!o.getAggFunc(),l=!o.isPrimary(),c=s?this.columnModel.getGroupDisplayColumnForGroup(o.getId()):o.getColDef().showRowGroup;return a||l||c})}const t=this.columnModel.getRowGroupColumns().filter(s=>!!s.getSort()),r={};e.forEach((s,o)=>r[s.getId()]=o),e.sort((s,o)=>{const a=s.getSortIndex(),l=o.getSortIndex();if(a!=null&&l!=null)return a-l;if(a==null&&l==null){const c=r[s.getId()],u=r[o.getId()];return c>u?1:-1}else return l==null?-1:1});const n=this.gos.isColumnsSortingCoupledToGroup()&&!!t.length;n&&(e=[...new Set(e.map(s=>{var o;return(o=this.columnModel.getGroupDisplayColumnForGroup(s.getId()))!=null?o:s}))]);const i=new Map;return e.forEach((s,o)=>i.set(s,o)),n&&t.forEach(s=>{const o=this.columnModel.getGroupDisplayColumnForGroup(s.getId());i.set(s,i.get(o))}),i}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[r,n])=>t-n).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=this.gos.isColumnsSortingCoupledToGroup(),r=!!e.getColDef().showRowGroup;return t&&r}getDisplaySortForColumn(e){const t=this.columnModel.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!(t!=null&&t.length))return e.getSort();const n=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,i=n[0].getSort();return n.every(o=>o.getSort()==i)?i:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}};Bd.DEFAULT_SORTING_ORDER=["asc","desc",null];S([F("columnModel")],Bd.prototype,"columnModel",2);Bd=S([$e("sortController")],Bd);var sr=class extends Ae{static addKeyboardModeEvents(e){this.instanceCount>0||(e.addEventListener("keydown",sr.toggleKeyboardMode),e.addEventListener("mousedown",sr.toggleKeyboardMode))}static removeKeyboardModeEvents(e){this.instanceCount>0||(e.addEventListener("keydown",sr.toggleKeyboardMode),e.addEventListener("mousedown",sr.toggleKeyboardMode))}static toggleKeyboardMode(e){const t=sr.keyboardModeActive,r=e.type==="keydown";r&&(e.ctrlKey||e.metaKey||e.altKey)||t!==r&&(sr.keyboardModeActive=r)}static unregisterGridCompController(e){sr.removeKeyboardModeEvents(e)}init(){const e=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,_.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,_.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_COLUMN_GROUP_OPENED,e),this.addManagedListener(this.eventService,_.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(t=>{this.gridCtrl=t.gridCtrl})}registerKeyboardFocusEvents(){const e=this.gos.getDocument();sr.addKeyboardModeEvents(e),sr.instanceCount++,this.addDestroyFunc(()=>{sr.instanceCount--,sr.unregisterGridCompController(e)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const e=this.focusedCellPosition.column,t=this.columnModel.getGridColumn(e.getId());e!==t&&this.clearFocusedCell()}isKeyboardMode(){return sr.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),wd.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),ZS.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(e,t){let r=e;for(;r;){if(this.gos.getDomData(r,t))return!1;r=r.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(e){return this.isCellRestoreFocused(e)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}isCellRestoreFocused(e){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(e,this.restoredFocusedCellPosition)}setRestoreFocusedCell(e){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=e)}getFocusEventParams(){const{rowIndex:e,rowPinned:t,column:r}=this.focusedCellPosition,n={rowIndex:e,rowPinned:t,column:r,isFullWidthCell:!1},i=this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:t});return i&&(n.isFullWidthCell=i.isFullWidth()),n}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;const e=tt({type:_.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(e)}setFocusedCell(e){const{column:t,rowIndex:r,rowPinned:n,forceBrowserFocus:i=!1,preventScrollOnBrowserFocus:s=!1}=e,o=this.columnModel.getGridColumn(t);if(!o){this.focusedCellPosition=null;return}this.focusedCellPosition=o?{rowIndex:r,rowPinned:Ra(n),column:o}:null;const a=Sr(tt({type:_.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:i,preventScrollOnBrowserFocus:s,floating:null});this.eventService.dispatchEvent(a)}isCellFocused(e){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(e,this.focusedCellPosition)}isRowNodeFocused(e){return this.isRowFocused(e.rowIndex,e.rowPinned)}isHeaderWrapperFocused(e){if(this.focusedHeaderPosition==null)return!1;const t=e.getColumnGroupChild(),r=e.getRowIndex(),n=e.getPinned(),{column:i,headerRowIndex:s}=this.focusedHeaderPosition;return t===i&&r===s&&n==i.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(e,t){this.focusedHeaderPosition={headerRowIndex:e,column:t}}focusHeaderPosition(e){if(this.gos.get("suppressHeaderFocus"))return!1;const{direction:t,fromTab:r,allowUserOverride:n,event:i,fromCell:s,rowWithoutSpanValue:o}=e;let{headerPosition:a}=e;if(s&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(a);if(n){const l=this.getFocusedHeader(),c=this.headerNavigationService.getHeaderRowCount();if(r){const u=this.gos.getCallback("tabToNextHeader");u&&(a=this.getHeaderPositionFromUserFunc({userFunc:u,direction:t,currentPosition:l,headerPosition:a,headerRowCount:c}))}else{const u=this.gos.getCallback("navigateToNextHeader");if(u&&i){const d={key:i.key,previousHeaderPosition:l,nextHeaderPosition:a,headerRowCount:c,event:i};a=u(d)}}}return a?this.focusProvidedHeaderPosition({headerPosition:a,direction:t,event:i,fromCell:s,rowWithoutSpanValue:o}):!1}focusHeaderPositionFromUserFunc(e){if(this.gos.get("suppressHeaderFocus"))return!1;const{userFunc:t,headerPosition:r,direction:n,event:i}=e,s=this.getFocusedHeader(),o=this.headerNavigationService.getHeaderRowCount(),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:n,currentPosition:s,headerPosition:r,headerRowCount:o});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:n,event:i})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:r,currentPosition:n,headerPosition:i,headerRowCount:s}=e,a=t({backwards:r==="Before",previousHeaderPosition:n,nextHeaderPosition:i,headerRowCount:s});return a===!0||a===null?(a===null&&ot("Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),n):a===!1?null:a}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:r,fromCell:n,rowWithoutSpanValue:i,event:s}=e;if(t.headerRowIndex===-1)return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView(t.column);this.headerNavigationService.scrollToColumn(t.column,r);const a=this.ctrlsService.getHeaderRowContainerCtrl(t.column.getPinned()).focusHeader(t.headerRowIndex,t.column,s);return a&&(i!=null||n)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(i??-1),a}focusFirstHeader(){let e=this.columnModel.getAllDisplayedColumns()[0];if(!e)return!1;e.getParent()&&(e=this.columnModel.getColumnGroupAtLevel(e,0));const t=this.headerPositionUtils.getHeaderIndexToFocus(e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){const t=this.headerNavigationService.getHeaderRowCount()-1,r=Wt(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:r},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(e,t){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===e&&this.focusedCellPosition.rowPinned===Ra(t)}findFocusableElements(e,t,r=!1){const n=Tz;let i=qD;t&&(i+=", "+t),r&&(i+=', [tabindex="-1"]');const s=Array.prototype.slice.apply(e.querySelectorAll(n)).filter(l=>ns(l)),o=Array.prototype.slice.apply(e.querySelectorAll(i));return o.length?((l,c)=>l.filter(u=>c.indexOf(u)===-1))(s,o):s}focusInto(e,t=!1,r=!1){const n=this.findFocusableElements(e,null,r),i=t?Wt(n):n[0];return i?(i.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(e,t){if(!t)return null;const r=this.findFocusableElements(e),n=r.indexOf(t);if(n===-1)return null;let i=-1;for(let s=n-1;s>=0;s--)if(r[s].classList.contains("ag-tab-guard-top")){i=s;break}return i<=0?null:r[i-1]}findNextFocusableElement(e=this.eGridDiv,t,r){const n=this.findFocusableElements(e,t?':not([tabindex="-1"])':null),i=this.gos.getActiveDomElement();let s;t?s=n.findIndex(a=>a.contains(i)):s=n.indexOf(i);const o=s+(r?-1:1);return o<0||o>=n.length?null:n[o]}isTargetUnderManagedComponent(e,t){if(!t)return!1;const r=e.querySelectorAll(`.${gu.FOCUS_MANAGED_CLASS}`);if(!r.length)return!1;for(let n=0;n<r.length;n++)if(r[n].contains(t))return!0;return!1}findTabbableParent(e,t=5){let r=0;for(;e&&mw(e)===null&&++r<=t;)e=e.parentElement;return mw(e)===null?null:e}focusGridView(e,t){var r;if(this.gos.get("suppressCellFocus"))return t?this.gos.get("suppressHeaderFocus")?this.focusNextGridCoreContainer(!0,!0):this.focusLastHeader():this.focusNextGridCoreContainer(!1);const n=t?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!n)return!1;const{rowIndex:i,rowPinned:s}=n,o=this.getFocusedHeader();return!e&&o&&(e=o.column),i==null||!e?!1:(this.navigationService.ensureCellVisible({rowIndex:i,column:e,rowPinned:s}),this.setFocusedCell({rowIndex:i,column:e,rowPinned:Ra(s),forceBrowserFocus:!0}),(r=this.rangeService)==null||r.setRangeToCell({rowIndex:i,rowPinned:s,column:e}),!0)}focusNextGridCoreContainer(e,t=!1){return!t&&this.gridCtrl.focusNextInnerContainer(e)?!0:((t||!e&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(e),!1)}focusAdvancedFilter(e){var t,r;return this.advancedFilterFocusColumn=e==null?void 0:e.column,(r=(t=this.advancedFilterService)==null?void 0:t.getCtrl().focusHeaderComp())!=null?r:!1}focusNextFromAdvancedFilter(e,t){var r,n;const i=(n=t?void 0:this.advancedFilterFocusColumn)!=null?n:(r=this.columnModel.getAllDisplayedColumns())==null?void 0:r[0];return e?this.focusHeaderPosition({headerPosition:{column:i,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(i)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}};sr.keyboardModeActive=!1;sr.instanceCount=0;S([F("eGridDiv")],sr.prototype,"eGridDiv",2);S([F("columnModel")],sr.prototype,"columnModel",2);S([F("headerNavigationService")],sr.prototype,"headerNavigationService",2);S([F("headerPositionUtils")],sr.prototype,"headerPositionUtils",2);S([F("rowRenderer")],sr.prototype,"rowRenderer",2);S([F("rowPositionUtils")],sr.prototype,"rowPositionUtils",2);S([F("cellPositionUtils")],sr.prototype,"cellPositionUtils",2);S([F("navigationService")],sr.prototype,"navigationService",2);S([F("ctrlsService")],sr.prototype,"ctrlsService",2);S([F("filterManager")],sr.prototype,"filterManager",2);S([rr("rangeService")],sr.prototype,"rangeService",2);S([rr("advancedFilterService")],sr.prototype,"advancedFilterService",2);S([_e],sr.prototype,"init",1);sr=S([$e("focusService")],sr);var HT=class extends Ae{setMouseOver(e){this.selectedColumns=e;const t={type:_.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(t)}clearMouseOver(){this.selectedColumns=null;const e={type:_.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(e)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}};HT=S([$e("columnHoverService")],HT);var Km=class extends Ae{constructor(){super(...arguments),this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.ctrlsService.whenReady(e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){this.active&&this.flush(()=>{this.active=!1})}executeNextVMTurn(e){this.active?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(e){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){e();return}const t=r=>{for(;r.length;){const n=r.pop();n&&n()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>t(this.executeNextFuncs),0),window.setTimeout(()=>{e(),t(this.executeLaterFuncs)},200)})}};S([F("ctrlsService")],Km.prototype,"ctrlsService",2);S([_e],Km.prototype,"postConstruct",1);Km=S([$e("columnAnimationService")],Km);var qp=class extends Ae{postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowsCtrl=e.center,this.addManagedListener(this.eventService,_.EVENT_BODY_HEIGHT_CHANGED,this.checkPageSize.bind(this)),this.addManagedListener(this.eventService,_.EVENT_SCROLL_VISIBILITY_CHANGED,this.checkPageSize.bind(this)),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationProxy.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){const t=()=>{const r=this.gos.getRowHeightAsNumber(),n=Math.floor(e/r);this.paginationProxy.setPageSize(n,"autoCalculated")};this.isBodyRendered?bi(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};S([F("ctrlsService")],qp.prototype,"ctrlsService",2);S([F("paginationProxy")],qp.prototype,"paginationProxy",2);S([_e],qp.prototype,"postConstruct",1);qp=S([$e("paginationAutoPageSizeService")],qp);var Ew=class extends Ae{constructor(){super(...arguments),this.cacheVersion=0}init(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,r){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=r)}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}};S([_e],Ew.prototype,"init",1);Ew=S([$e("valueCache")],Ew);var BJ="paste",Yp=class extends Ae{init(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,_.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))}onCellValueChanged(e){e.source!==BJ&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;const r=[e];if(this.clientSideRowModel&&!e.isRowPinned()){const n=this.gos.get("aggregateOnlyChangedColumns"),i=new rx(n,this.clientSideRowModel.getRootNode());i.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(i),i.forEachChangedNodeDepthFirst(s=>{r.push(s)})}this.rowRenderer.refreshCells({rowNodes:r})}};S([F("rowModel")],Yp.prototype,"rowModel",2);S([F("rowRenderer")],Yp.prototype,"rowRenderer",2);S([_e],Yp.prototype,"init",1);Yp=S([$e("changeDetectionService")],Yp);var Pw=class extends Ae{adaptFunction(e,t){const r=this.componentMetadataProvider.retrieve(e);return r&&r.functionAdapter?r.functionAdapter(t):null}adaptCellRendererFunction(e){class t{refresh(n){return!1}getGui(){return this.eGui}init(n){const i=e(n),s=typeof i;if(s==="string"||s==="number"||s==="boolean"){this.eGui=Qi("<span>"+i+"</span>");return}if(i==null){this.eGui=Qi("<span></span>");return}this.eGui=i}}return t}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}};S([F("componentMetadataProvider")],Pw.prototype,"componentMetadataProvider",2);Pw=S([$e("agComponentUtils")],Pw);var qm=class extends Ae{postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}};S([F("agComponentUtils")],qm.prototype,"agComponentUtils",2);S([_e],qm.prototype,"postConstruct",1);qm=S([$e("componentMetadataProvider")],qm);var VJ=25,FO=10,wP=8,HJ=4,bP=4,SP=6,zJ=16,LO=14,xP=8,$J={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:HJ*5,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:wP*7,headerCellMinWidth:48,listItemHeight:wP*4,rowHeight:wP*6,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:bP*8,headerCellMinWidth:24,listItemHeight:bP*6,rowHeight:bP*7,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:SP*8,headerCellMinWidth:36,listItemHeight:SP*4,rowHeight:SP*7,chartMenuPanelWidth:240},"ag-theme-quartz":{headerHeight:LO+xP*4.25,headerCellMinWidth:36,listItemHeight:zJ+xP,rowHeight:LO+xP*3.5,chartMenuPanelWidth:260}},GO={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},Ym=class extends Ae{constructor(){super(...arguments),this.calculatedSizes={},this.calculatedTheme=null}postConstruct(){var e;const t=(e=this.getTheme().el)!=null?e:this.eGridDiv;this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.mutationObserver=new MutationObserver(()=>{this.calculatedSizes={},this.calculatedTheme=null,this.calculatedTheme=this.getTheme(),this.fireGridStylesChangedEvent()}),this.mutationObserver.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})}fireGridStylesChangedEvent(){const e={type:_.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(e)}getSassVariable(e){const{themeFamily:t,el:r}=this.getTheme();if(!t||t.indexOf("ag-theme")!==0)return;this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[t]||(this.calculatedSizes[t]={});const n=this.calculatedSizes[t][e];return n??(this.calculatedSizes[t][e]=this.calculateValueForSassProperty(e,t,r),this.calculatedSizes[t][e])}calculateValueForSassProperty(e,t,r){const n="ag-theme-"+(t.match("material")?"material":t.match("balham")?"balham":t.match("alpine")?"alpine":"custom"),i=$J[n][e],s=this.gos.getDocument();if(r||(r=this.eGridDiv),!GO[e])return i;const o=GO[e],a=s.createElement("div"),l=Array.from(r.classList);a.classList.add(t,...l),a.style.position="absolute";const c=o.reduce((d,p)=>{const f=s.createElement("div");return f.style.position="static",f.classList.add(p),d.appendChild(f),f},a);let u=0;if(s.body){s.body.appendChild(a);const d=e.toLowerCase().indexOf("height")!==-1?"height":"width";u=parseInt(window.getComputedStyle(c)[d],10),s.body.removeChild(a)}return u||i}isThemeDark(){const{theme:e}=this.getTheme();return!!e&&e.indexOf("dark")>=0}chartMenuPanelWidth(){return this.getSassVariable("chartMenuPanelWidth")}getTheme(){if(this.calculatedTheme)return this.calculatedTheme;const e=/\bag-(material|(?:theme-([\w\-]*)))\b/g;let t=this.eGridDiv,r=null,n=[];for(;t;)if(r=e.exec(t.className),!r)t=t.parentElement||void 0;else{const s=t.className.match(e);s&&(n=s);break}if(!r)return{allThemes:n};const i=r[0];return this.calculatedTheme={theme:i,el:t,themeFamily:i.replace(/-dark$/,""),allThemes:n},this.calculatedTheme}getFromTheme(e,t){var r;return(r=this.getSassVariable(t))!=null?r:e}getDefaultRowHeight(){return this.getFromTheme(VJ,"rowHeight")}getListItemHeight(){return this.getFromTheme(20,"listItemHeight")}refreshRowHeightVariable(){const e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return e!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const r=`${t}px`;return e!=r?(this.eGridDiv.style.setProperty("--ag-line-height",r),t):e!=""?parseFloat(e):-1}getMinColWidth(){const e=this.getFromTheme(null,"headerCellMinWidth");return xe(e)?Math.max(e,FO):FO}destroy(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),super.destroy()}};S([F("eGridDiv")],Ym.prototype,"eGridDiv",2);S([_e],Ym.prototype,"postConstruct",1);Ym=S([$e("environment")],Ym);var Qp=class extends Ae{constructor(){super(...arguments),this.scrollY=0,this.uiBodyHeight=0}agWire(e){this.logger=e.create("RowContainerHeightService")}postConstruct(){this.addManagedListener(this.eventService,_.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=yz(),this.logger.log("maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,r=this.getUiBodyHeight();(t!==this.scrollY||r!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=r,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.logger.log(`Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:_.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:_.EVENT_HEIGHT_SCALE_CHANGED}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),r=e/t;return this.maxScrollY*r}};S([F("ctrlsService")],Qp.prototype,"ctrlsService",2);S([Go(0,Ys("loggerFactory"))],Qp.prototype,"agWire",1);S([_e],Qp.prototype,"postConstruct",1);Qp=S([$e("rowContainerHeightService")],Qp);var Xp=class extends Ae{init(){this.addManagedPropertyListener("isRowSelectable",()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){const t=!!this.gos.get("rowSelection"),r=this.gos.get("isRowSelectable");if(!t||!r)return;const n=this.gos.get("groupSelectsChildren"),i=this.rowModel.getType()==="clientSide"&&n,s=[],o=a=>{if(e&&!a.group)return;if(i&&a.group){const c=a.childrenAfterGroup.some(u=>u.selectable===!0);a.setRowSelectable(c,!0);return}const l=r?r(a):!0;a.setRowSelectable(l,!0),!l&&a.isSelected()&&s.push(a)};if(i){const a=this.rowModel;new rx(!1,a.getRootNode()).forEachChangedNodeDepthFirst(o,!0,!0)}else this.rowModel.forEachNode(o);s.length&&this.selectionService.setNodesSelected({nodes:s,newValue:!1,source:"selectableChanged"}),i&&this.selectionService instanceof jd&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}};S([F("rowModel")],Xp.prototype,"rowModel",2);S([F("selectionService")],Xp.prototype,"selectionService",2);S([_e],Xp.prototype,"init",1);Xp=S([$e("selectableService")],Xp);var as=class extends mt{constructor(){super(),this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate());const{btFirst:t,btPrevious:r,btNext:n,btLast:i,pageSizeComp:s}=this;this.activateTabIndex([t,r,n,i]),t.insertAdjacentElement("afterbegin",kr(e?"last":"first",this.gos)),r.insertAdjacentElement("afterbegin",kr(e?"next":"previous",this.gos)),n.insertAdjacentElement("afterbegin",kr(e?"previous":"next",this.gos)),i.insertAdjacentElement("afterbegin",kr(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.onPaginationChanged()}onPaginationChanged(){const t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedListener(this.eventService,_.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{const{el:t,fn:r}=e;this.addManagedListener(t,"click",r),this.addManagedListener(t,"keydown",n=>{(n.key===Y.ENTER||n.key===Y.SPACE)&&(n.preventDefault(),r())})}),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()}setCurrentPageLabel(){const e=this.paginationProxy.getTotalPages()>0,t=this.paginationProxy.getCurrentPage(),r=e?t+1:0;this.lbCurrent.textContent=this.formatNumber(r)}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");if(t)return t({value:e});const r=this.localeService.getLocaleTextFunc(),n=r("thousandSeparator",","),i=r("decimalSeparator",".");return KD(e,n,i)}getTemplate(){const e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),r=e("to","to"),n=e("of","of"),i=e("firstPage","First Page"),s=e("previousPage","Previous Page"),o=e("nextPage","Next Page"),a=e("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">
                <ag-page-size-selector ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-${l}-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-to">${r}</span>
                    <span id="ag-${l}-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-of">${n}</span>
                    <span id="ag-${l}-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${i}"></div>
                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-${l}-start-page">${t}</span>
                        <span id="ag-${l}-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${l}-of-page">${n}</span>
                        <span id="ag-${l}-of-page-number" ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()}enableOrDisableButtons(){const e=this.paginationProxy.getCurrentPage(),t=this.paginationProxy.isLastPageFound(),r=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const n=this.isZeroPagesToDisplay(),i=e===r-1;this.nextButtonDisabled=i||n,this.lastButtonDisabled=!t||n||e===r-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){LD(e,t),e.classList.toggle("ag-disabled",t)}updateRowLabels(){const e=this.paginationProxy.getCurrentPage(),t=this.paginationProxy.getPageSize(),r=this.paginationProxy.isLastPageFound(),n=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;let i,s;if(this.isZeroPagesToDisplay()?i=s=0:(i=t*e+1,s=i+t-1,r&&s>n&&(s=n)),this.lbFirstRowOnPage.textContent=this.formatNumber(i),this.rowNodeBlockLoader.isLoading()){const o=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=o("pageLastRowUnknown","?")}else this.lbLastRowOnPage.textContent=this.formatNumber(s)}isZeroPagesToDisplay(){const e=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages();return e&&t===0}setTotalLabels(){const e=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages(),r=e?this.paginationProxy.getMasterRowCount():null;if(r===1){const n=this.paginationProxy.getRow(0);if(n&&n.group&&!(n.groupData||n.aggData)){this.setTotalLabelsToZero();return}}if(e)this.lbTotal.textContent=this.formatNumber(t),this.lbRecordCount.textContent=this.formatNumber(r);else{const n=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=n,this.lbRecordCount.innerHTML=n}}setTotalLabelsToZero(){this.lbFirstRowOnPage.textContent=this.formatNumber(0),this.lbCurrent.textContent=this.formatNumber(0),this.lbLastRowOnPage.textContent=this.formatNumber(0),this.lbTotal.textContent=this.formatNumber(0),this.lbRecordCount.textContent=this.formatNumber(0)}};S([F("paginationProxy")],as.prototype,"paginationProxy",2);S([F("rowNodeBlockLoader")],as.prototype,"rowNodeBlockLoader",2);S([Me("btFirst")],as.prototype,"btFirst",2);S([Me("btPrevious")],as.prototype,"btPrevious",2);S([Me("btNext")],as.prototype,"btNext",2);S([Me("btLast")],as.prototype,"btLast",2);S([Me("lbRecordCount")],as.prototype,"lbRecordCount",2);S([Me("lbFirstRowOnPage")],as.prototype,"lbFirstRowOnPage",2);S([Me("lbLastRowOnPage")],as.prototype,"lbLastRowOnPage",2);S([Me("lbCurrent")],as.prototype,"lbCurrent",2);S([Me("lbTotal")],as.prototype,"lbTotal",2);S([Me("pageSizeComp")],as.prototype,"pageSizeComp",2);S([_e],as.prototype,"postConstruct",1);var gy=class rU extends mt{constructor(){super(rU.TEMPLATE),this.inProgress=!1,this.destroyRequested=!1}updateLayoutClasses(t,r){const n=this.eOverlayWrapper.classList;n.toggle("ag-layout-auto-height",r.autoHeight),n.toggle("ag-layout-normal",r.normal),n.toggle("ag-layout-print",r.print)}postConstruct(){this.createManagedBean(new KS(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)}setWrapperTypeClass(t){const r=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&r.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=t,r.toggle(t,!0)}showOverlay(t,r,n){this.inProgress||(this.setWrapperTypeClass(r),this.destroyActiveOverlay(),this.inProgress=!0,t&&t.then(i=>{this.inProgress=!1,this.eOverlayWrapper.appendChild(i.getGui()),this.activeOverlay=i,this.updateListenerDestroyFunc=n,this.destroyRequested&&(this.destroyRequested=!1,this.destroyActiveOverlay())}),this.setDisplayed(!0,{skipAriaHidden:!0}))}destroyActiveOverlay(){var t;if(this.inProgress){this.destroyRequested=!0;return}this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),(t=this.updateListenerDestroyFunc)==null||t.call(this),Zr(this.eOverlayWrapper))}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}};gy.TEMPLATE=`
        <div class="ag-overlay" role="presentation">
            <div class="ag-overlay-panel" role="presentation">
                <div class="ag-overlay-wrapper" ref="eOverlayWrapper" role="presentation"></div>
            </div>
        </div>`;S([F("overlayService")],gy.prototype,"overlayService",2);S([Me("eOverlayWrapper")],gy.prototype,"eOverlayWrapper",2);S([_e],gy.prototype,"postConstruct",1);var UJ=gy,Zp=class extends Ae{getFirstRow(){let e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null;const r=this.pinnedRowModel.getPinnedBottomRowCount(),n=this.pinnedRowModel.getPinnedTopRowCount();return r?(t="bottom",e=r-1):this.rowModel.getRowCount()?(t=null,e=this.paginationProxy.getPageLastRow()):n&&(t="top",e=n-1),e===void 0?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(xe(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}};S([F("rowModel")],Zp.prototype,"rowModel",2);S([F("pinnedRowModel")],Zp.prototype,"pinnedRowModel",2);S([F("paginationProxy")],Zp.prototype,"paginationProxy",2);Zp=S([$e("rowPositionUtils")],Zp);var zT=class extends Ae{createId(e){const{rowIndex:t,rowPinned:r,column:n}=e;return this.createIdFromValues({rowIndex:t,column:n,rowPinned:r})}createIdFromValues(e){const{rowIndex:t,rowPinned:r,column:n}=e;return`${t}.${r??"null"}.${n.getId()}`}equals(e,t){const r=e.column===t.column,n=e.rowPinned===t.rowPinned,i=e.rowIndex===t.rowIndex;return r&&n&&i}};zT=S([$e("cellPositionUtils")],zT);var Og=class{constructor(e){this.cellValueChanges=e}},EP=class extends Og{constructor(e,t,r,n){super(e),this.initialRange=t,this.finalRange=r,this.ranges=n}},nU=class iU{constructor(t){this.actionStack=[],this.maxStackSize=t||iU.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(t){t.cellValueChanges&&t.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(t))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}};nU.DEFAULT_STACK_SIZE=10;var jO=nU,Oa=class extends Ae{constructor(){super(...arguments),this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},r=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),n=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(r||n||this.isPasting||this.isRangeInAction))return;const{rowPinned:s,rowIndex:o,column:a,oldValue:l,value:c}=e,u={rowPinned:s,rowIndex:o,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(u)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}init(){if(!this.gos.get("undoRedoCellEditing"))return;const e=this.gos.get("undoRedoCellEditingLimit");e<=0||(this.undoStack=new jO(e),this.redoStack=new jO(e),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,_.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,_.EVENT_MODEL_UPDATED,t=>{t.keepUndoRedoStack||this.clearStacks()}),this.addManagedListener(this.eventService,_.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,_.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,_.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,_.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,_.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,_.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,_.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,_.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl}))}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){const t={type:_.EVENT_UNDO_STARTED,source:e};this.eventService.dispatchEvent(t);const r=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),n={type:_.EVENT_UNDO_ENDED,source:e,operationPerformed:r};this.eventService.dispatchEvent(n)}redo(e){const t={type:_.EVENT_REDO_STARTED,source:e};this.eventService.dispatchEvent(t);const r=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),n={type:_.EVENT_REDO_ENDED,source:e,operationPerformed:r};this.eventService.dispatchEvent(n)}undoRedo(e,t,r,n,i){if(!e)return!1;const s=e.pop();return!s||!s.cellValueChanges?!1:(this.processAction(s,o=>o[n],i),s instanceof EP?this.processRange(this.rangeService,s.ranges||[s[r]]):this.processCell(s.cellValueChanges),t.push(s),!0)}processAction(e,t,r){e.cellValueChanges.forEach(n=>{const{rowIndex:i,rowPinned:s,columnId:o}=n,a={rowIndex:i,rowPinned:s},l=this.rowPositionUtils.getRowNode(a);l.displayed&&l.setDataValue(o,t(n),r)})}processRange(e,t){let r;e.removeAllCellRanges(!0),t.forEach((n,i)=>{if(!n)return;const s=n.startRow,o=n.endRow;i===t.length-1&&(r={rowPinned:s.rowPinned,rowIndex:s.rowIndex,columnId:n.startColumn.getColId()},this.setLastFocusedCell(r));const a={rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnStart:n.startColumn,columns:n.columns};e.addCellRange(a)})}processCell(e){const t=e[0],{rowIndex:r,rowPinned:n}=t,i={rowIndex:r,rowPinned:n},s=this.rowPositionUtils.getRowNode(i),o={rowPinned:t.rowPinned,rowIndex:s.rowIndex,columnId:t.columnId};this.setLastFocusedCell(o,this.rangeService)}setLastFocusedCell(e,t){const{rowIndex:r,columnId:n,rowPinned:i}=e,s=this.gridBodyCtrl.getScrollFeature(),o=this.columnModel.getGridColumn(n);if(!o)return;s.ensureIndexVisible(r),s.ensureColumnVisible(o);const a={rowIndex:r,column:o,rowPinned:i};this.focusService.setFocusedCell(Sr(tt({},a),{forceBrowserFocus:!0})),t==null||t.setRangeToCell(a)}addRowEditingListeners(){this.addManagedListener(this.eventService,_.EVENT_ROW_EDITING_STARTED,e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,_.EVENT_ROW_EDITING_STOPPED,()=>{const e=new Og(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null})}addCellEditingListeners(){this.addManagedListener(this.eventService,_.EVENT_CELL_EDITING_STARTED,e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,_.EVENT_CELL_EDITING_STOPPED,e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const r=new Og(this.cellValueChanges);this.pushActionsToUndoStack(r)}})}addPasteListeners(){this.addManagedListener(this.eventService,_.EVENT_PASTE_START,()=>{this.isPasting=!0}),this.addManagedListener(this.eventService,_.EVENT_PASTE_END,()=>{const e=new Og(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1})}addFillListeners(){this.addManagedListener(this.eventService,_.EVENT_FILL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,_.EVENT_FILL_END,e=>{const t=new EP(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1})}addCellKeyListeners(){this.addManagedListener(this.eventService,_.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,_.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,()=>{let e;this.rangeService&&this.gos.get("enableRangeSelection")?e=new EP(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new Og(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}};S([F("focusService")],Oa.prototype,"focusService",2);S([F("ctrlsService")],Oa.prototype,"ctrlsService",2);S([F("cellPositionUtils")],Oa.prototype,"cellPositionUtils",2);S([F("rowPositionUtils")],Oa.prototype,"rowPositionUtils",2);S([F("columnModel")],Oa.prototype,"columnModel",2);S([rr("rangeService")],Oa.prototype,"rangeService",2);S([_e],Oa.prototype,"init",1);Oa=S([$e("undoRedoService")],Oa);var Qm=class extends Ae{findHeader(e,t){let r,n;if(e.column instanceof wn?r=this.columnModel.getDisplayedGroupAtDirection(e.column,t):(n=`getDisplayedCol${t}`,r=this.columnModel[n](e.column)),!r)return;let{headerRowIndex:i}=e;if(this.getHeaderRowType(i)!=="filter"){const a=[r];for(;r.getParent();)r=r.getParent(),a.push(r);r=a[a.length-1-i]}const{column:s,headerRowIndex:o}=this.getHeaderIndexToFocus(r,i);return{column:s,headerRowIndex:o}}getHeaderIndexToFocus(e,t){let r;if(e instanceof wn&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){const n=e;r=n.getLeafColumns()[0];let i=r;for(;i!==n;)t++,i=i.getParent()}return{column:r||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,t){const r=this.getHeaderRowType(t),n=r==="filter",i=r==="column";let s=n?e:e.getParent(),o=t-1,a=o;if(i&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;s&&s.isPadding();)s=s.getParent(),o--;a=o,o<0&&(s=e,o=t,a=void 0)}return{column:s,headerRowIndex:o,headerRowIndexWithoutSpan:a}}getColumnVisibleChild(e,t,r="After"){const n=this.getHeaderRowType(t);let i=e,s=t+1,o=s;if(n==="group"){const a=e.getDisplayedLeafColumns(),l=r==="After"?a[0]:Wt(a),c=[];let u=l;for(;u.getParent()!==e;)u=u.getParent(),c.push(u);if(i=l,l.isSpanHeaderHeight())for(let d=c.length-1;d>=0;d--){const p=c[d];if(!p.isPadding()){i=p;break}s++}else i=Wt(c),i||(i=l)}return{column:i,headerRowIndex:s,headerRowIndexWithoutSpan:o}}getHeaderRowType(e){const t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const r=this.columnModel.getAllDisplayedColumns(),n=r[t==="start"?0:r.length-1];if(!n)return;const s=this.ctrlsService.getHeaderRowContainerCtrl(n.getPinned()).getRowType(e);if(s=="group"){const o=this.columnModel.getColumnGroupAtLevel(n,e);return{headerRowIndex:e,column:o}}return{headerRowIndex:s==null?-1:e,column:n}}};S([F("columnModel")],Qm.prototype,"columnModel",2);S([F("ctrlsService")],Qm.prototype,"ctrlsService",2);Qm=S([$e("headerPositionUtils")],Qm);var $T=class{buildColumnDefs(e,t,r){const n=[],i={};return e.forEach(s=>{const o=this.createDefFromColumn(s,t,r);let a=!0,l=o,c=s.getOriginalParent(),u=null;for(;c;){let d=null;if(c.isPadding()){c=c.getOriginalParent();continue}const p=i[c.getGroupId()];if(p){p.children.push(l),a=!1;break}if(d=this.createDefFromGroup(c),d&&(d.children=[l],i[d.groupId]=d,l=d,c=c.getOriginalParent()),c!=null&&u===c){a=!1;break}u=c}a&&n.push(l)}),n}createDefFromGroup(e){const t=dw(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,r){const n=dw(e.getColDef());return n.colId=e.getColId(),n.width=e.getActualWidth(),n.rowGroup=e.isRowGroupActive(),n.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,n.pivot=e.isPivotActive(),n.pivotIndex=e.isPivotActive()?r.indexOf(e):null,n.aggFunc=e.isValueActive()?e.getAggFunc():null,n.hide=e.isVisible()?void 0:!0,n.pinned=e.isPinned()?e.getPinned():null,n.sort=e.getSort()?e.getSort():null,n.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,n}};$T=S([$e("columnDefFactory")],$T);var Xm=class{getInitialRowClasses(e){const t=[];return xe(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),PT(t,this.processClassesFromGridOptions(e.rowNode)),PT(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&t.push("ag-cell-last-left-pinned"),e.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){const t=[],r=s=>{typeof s=="string"?t.push(s):Array.isArray(s)&&s.forEach(o=>t.push(o))},n=this.gos.get("rowClass");if(n){if(typeof n=="function")return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];r(n)}const i=this.gos.getCallback("getRowClass");if(i){const s={data:e.data,node:e,rowIndex:e.rowIndex},o=i(s);r(o)}return t}preProcessRowClassRules(e){const t=[];return this.processRowClassRules(e,r=>{t.push(r)},r=>{}),t}processRowClassRules(e,t,r){const n=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),n,t,r)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}};S([F("stylingService")],Xm.prototype,"stylingService",2);S([F("gridOptionsService")],Xm.prototype,"gos",2);Xm=S([$e("rowCssClassCalculator")],Xm);var Jp=class extends Ae{init(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup())}doFullSort(e,t){const r=(i,s)=>({currentPos:s,rowNode:i}),n=e.map(r);return n.sort(this.compareRowNodes.bind(this,t)),n.map(i=>i.rowNode)}compareRowNodes(e,t,r){const n=t.rowNode,i=r.rowNode;for(let s=0,o=e.length;s<o;s++){const a=e[s],l=a.sort==="desc",c=this.getValue(n,a.column),u=this.getValue(i,a.column);let d;const p=this.getComparator(a,n);if(p?d=p(c,u,n,i,l):d=pt.defaultComparator(c,u,this.isAccentedSort),!isNaN(d)&&d!==0)return a.sort==="asc"?d:d*-1}return t.currentPos-r.currentPos}getComparator(e,t){const r=e.column,n=r.getColDef().comparator;if(n!=null)return n;if(!r.getColDef().showRowGroup)return;const i=!t.group&&r.getColDef().field;if(!i)return;const s=this.columnModel.getPrimaryColumn(i);if(s)return s.getColDef().comparator}getValue(e,t){var r,n;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(this.gos.isGroupUseEntireRow(this.columnModel.isPivotActive())){const a=(r=e.allLeafChildren)==null?void 0:r[0];return a?this.valueService.getValue(t,a,!1,!1):void 0}const o=this.columnModel.getGroupDisplayColumnForGroup(t.getId());return o?(n=e.groupData)==null?void 0:n[o.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)}};S([F("valueService")],Jp.prototype,"valueService",2);S([F("columnModel")],Jp.prototype,"columnModel",2);S([_e],Jp.prototype,"init",1);Jp=S([$e("rowNodeSorter")],Jp);var Sd=class extends Ae{constructor(){super(...arguments),this.params={},this.ready=!1,this.readyCallbacks=[]}checkReady(){const e=this.params;this.ready=e.gridCtrl!=null&&e.gridBodyCtrl!=null&&e.center!=null&&e.left!=null&&e.right!=null&&e.bottomCenter!=null&&e.bottomLeft!=null&&e.bottomRight!=null&&e.topCenter!=null&&e.topLeft!=null&&e.topRight!=null&&e.stickyTopCenter!=null&&e.stickyTopLeft!=null&&e.stickyTopRight!=null&&e.stickyBottomCenter!=null&&e.stickyBottomLeft!=null&&e.stickyBottomRight!=null&&e.centerHeader!=null&&e.leftHeader!=null&&e.rightHeader!=null&&e.fakeHScrollComp!=null&&e.fakeVScrollComp!=null&&e.gridHeaderCtrl!=null,this.ready&&(this.readyCallbacks.forEach(t=>t(e)),this.readyCallbacks.length=0)}whenReady(e){this.ready?e(this.params):this.readyCallbacks.push(e)}register(e,t){this.params[e]=t,this.checkReady()}registerHeaderContainer(e,t){switch(t){case"left":this.params.leftHeader=e;break;case"right":this.params.rightHeader=e;break;default:this.params.centerHeader=e;break}this.checkReady()}get(e){return this.params[e]}getParams(){return this.params}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){return[this.params.leftHeader,this.params.rightHeader,this.params.centerHeader]}getHeaderRowContainerCtrl(e){switch(e){case"left":return this.params.leftHeader;case"right":return this.params.rightHeader;default:return this.params.centerHeader}}};Sd.NAME="ctrlsService";Sd=S([$e(Sd.NAME)],Sd);var UT=class extends Ae{constructor(){super(...arguments),this.registry={}}register(e){this.registry[e.controllerName]=e.controllerClass}getInstance(e){const t=this.registry[e];if(t!=null)return new t}};UT=S([$e("ctrlsFactory")],UT);var vh=class extends mt{constructor(e,t){super(e),this.direction=t,this.hideTimeout=null}postConstruct(){this.addManagedListener(this.eventService,_.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",$D()||jl())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=WD(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=["mouseenter","mousedown","touchstart"],t=["mouseleave","touchend"],r=this.getGui();e.forEach(n=>this.addManagedListener(r,n,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0))),t.forEach(n=>this.addManagedListener(r,n,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1)))}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedListener(this.eventService,_.EVENT_BODY_SCROLL,e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,_.EVENT_BODY_SCROLL_END,()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)})}attemptSettingScrollPosition(e){const t=this.getViewport();kD(()=>ns(t),()=>this.setScrollPosition(e),100)}getViewport(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedListener(this.getViewport(),"scroll",e)}};S([Me("eViewport")],vh.prototype,"eViewport",2);S([Me("eContainer")],vh.prototype,"eContainer",2);S([F("scrollVisibleService")],vh.prototype,"scrollVisibleService",2);S([F("ctrlsService")],vh.prototype,"ctrlsService",2);S([F("animationFrameService")],vh.prototype,"animationFrameService",2);var yh=class sU extends vh{constructor(){super(sU.TEMPLATE,"horizontal")}postConstruct(){super.postConstruct();const t=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,t),this.addManagedListener(this.eventService,_.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",t),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new bf(r=>this.eContainer.style.width=`${r}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const t=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${t}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const t=this.scrollVisibleService.isVerticalScrollShowing();let r=this.columnModel.getDisplayedColumnsRightWidth();const n=!this.enableRtl&&t,i=this.gos.getScrollbarWidth();n&&(r+=i),eo(this.eRightSpacer,r),this.eRightSpacer.classList.toggle("ag-scroller-corner",r<=i);let s=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&t&&(s+=i),eo(this.eLeftSpacer,s),this.eLeftSpacer.classList.toggle("ag-scroller-corner",s<=i)}setScrollVisible(){const t=this.scrollVisibleService.isHorizontalScrollShowing(),r=this.invisibleScrollbar,n=this.gos.get("suppressHorizontalScroll"),i=t&&this.gos.getScrollbarWidth()||0,o=n?0:i===0&&r?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",r),yd(this.getGui(),o),yd(this.eViewport,o),yd(this.eContainer,o),this.setDisplayed(t,{skipAriaHidden:!0})}getScrollPosition(){return jm(this.getViewport(),this.enableRtl)}setScrollPosition(t){ns(this.getViewport())||this.attemptSettingScrollPosition(t),Bm(this.getViewport(),t,this.enableRtl)}};yh.TEMPLATE=`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>
        </div>`;S([Me("eLeftSpacer")],yh.prototype,"eLeftSpacer",2);S([Me("eRightSpacer")],yh.prototype,"eRightSpacer",2);S([F("columnModel")],yh.prototype,"columnModel",2);S([F("pinnedRowModel")],yh.prototype,"pinnedRowModel",2);S([_e],yh.prototype,"postConstruct",1);var WJ=yh,Zm=class extends Ae{postConstruct(){const e=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,_.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const e=this.gos.isDomLayout("print"),t=e?0:this.columnModel.getDisplayedColumnsLeftWidth(),r=e?0:this.columnModel.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:_.EVENT_LEFT_PINNED_WIDTH_CHANGED})),r!=this.rightWidth&&(this.rightWidth=r,this.eventService.dispatchEvent({type:_.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}};S([F("columnModel")],Zm.prototype,"columnModel",2);S([_e],Zm.prototype,"postConstruct",1);Zm=S([$e("pinnedWidthService")],Zm);var ef=class extends Ae{constructor(){super(...arguments),this.events=[]}postConstruct(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);const r=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(n=>this.eventService.dispatchEvent(n)),this.events=[]};t?r():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(r)),this.dispatchExpandedDebounced())}};S([F("animationFrameService")],ef.prototype,"animationFrameService",2);S([F("rowModel")],ef.prototype,"rowModel",2);S([_e],ef.prototype,"postConstruct",1);ef=S([$e("rowNodeEventThrottle")],ef);var KJ={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},dndSource:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."},dndSourceOnRowDrag:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."}},rc=(e,t)=>{var r;return((r=t.rowModelType)!=null?r:"clientSide")==="clientSide"?{module:"@ag-grid-enterprise/row-grouping"}:null},qJ={enableRowGroup:rc,rowGroup:rc,rowGroupIndex:rc,enablePivot:rc,enableValue:rc,pivot:rc,pivotIndex:rc,aggFunc:rc,cellEditor:e=>e.cellEditor==="agRichSelect"||e.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{var t;const r=["columnsMenuTab","generalMenuTab"];return(t=e.menuTabs)!=null&&t.some(n=>r.includes(n))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>tp},YJ={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0},QJ=Object.keys(YJ),tp={objectName:"colDef",allProperties:QJ,docsUrl:"column-properties/",deprecations:KJ,validations:qJ},XJ={enableChartToolPanelsButton:{version:"29"},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",renamed:"enterNavigatesVertically"},enterMovesDownAfterEdit:{version:"30",renamed:"enterNavigatesVerticallyAfterEdit"},suppressParentsInRowNodes:{version:"30.2",message:"Using suppressParentsInRowNodes is no longer recommended. To serialize nodes it is now recommended to instead remove the parent node reference before serialization."},advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."}},ZJ={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!1,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,suppressChartToolPanelsButton:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,functionsPassive:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1},JJ={sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",dependencies:e=>{var t;const r=(t=e.rowModelType)!=null?t:"clientSide";switch(r){case"clientSide":const n=`treeData requires 'getDataPath' in the ${r} row model.`;return e.getDataPath?null:n;case"serverSide":const i=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${r} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:i}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:e=>{var t;switch((t=e.rowModelType)!=null?t:"clientSide"){case"clientSide":return null;case"serverSide":return e.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},suppressParentsInRowNodes:{dependencies:{groupSelectsChildren:[void 0,!1]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},columnDefs:()=>tp,defaultColDef:()=>tp,defaultColGroupDef:()=>tp,autoGroupColumnDef:()=>tp},eee={objectName:"gridOptions",allProperties:[...Fm.ALL_PROPERTIES,...gw.EVENT_CALLBACKS],propertyExceptions:["api","columnApi"],docsUrl:"grid-options/",deprecations:XJ,validations:JJ},Qt=class{constructor(){this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new qo,this.globalEventHandlerFactory=e=>(t,r)=>{if(this.destroyed)return;const n=o0.has(t);if(n&&!e||!n&&e)return;const i=gw.getCallbackForEvent(t),s=this.gridOptions[i];typeof s=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{s(r)})}}get context(){return this.gridOptions.context}init(){this.columnApi=new Kp(this.api);const e=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),e),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.getScrollbarWidth()}destroy(){this.destroyed=!0,this.columnApi=void 0}get(e){var t;return(t=this.gridOptions[e])!=null?t:ZJ[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return xe(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(r=>{const n=r;return n.api=this.api,n.columnApi=this.columnApi,n.context=this.context,e(n)})}static toBoolean(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}static toNumber(e){if(typeof e=="number")return e;if(typeof e=="string"){const t=parseInt(e);return isNaN(t)?void 0:t}}static toConstrainedNum(e,t){return r=>{const n=Qt.toNumber(r);if(!(n==null||n<e||n>t))return n}}static getCoercedValue(e,t){const r=Qt.PROPERTY_COERCIONS.get(e);return r?r(t):t}static getCoercedGridOptions(e){const t={};return Object.entries(e).forEach(([r,n])=>{const i=Qt.getCoercedValue(r,n);t[r]=i}),t}updateGridOptions({options:e,force:t,source:r="api"}){const n={id:Qt.changeSetId++,properties:[]},i=[];Object.entries(e).forEach(([s,o])=>{r==="api"&&AX[s]&&ot(`${s} is an initial property and cannot be updated.`);const a=Qt.getCoercedValue(s,o),l=t||typeof a=="object"&&r==="api",c=this.gridOptions[s];if(l||c!==a){this.gridOptions[s]=a;const u={type:s,currentValue:a,previousValue:c,changeSet:n,source:r};i.push(u)}}),this.validationService.processGridOptions(this.gridOptions),n.properties=i.map(s=>s.type),i.forEach(s=>{this.gridOptions.debug&&console.log(`AG Grid: Updated property ${s.type} from `,s.previousValue," to  ",s.currentValue),this.propertyEventService.dispatchEvent(s)})}addEventListener(e,t){this.propertyEventService.addEventListener(e,t)}removeEventListener(e,t){this.propertyEventService.removeEventListener(e,t)}getScrollbarWidth(){if(this.scrollbarWidth==null){const t=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:bz();t!=null&&(this.scrollbarWidth=t,this.eventService.dispatchEvent({type:_.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth}isRowModelType(e){return this.gridOptions.rowModelType===e||e==="clientSide"&&gt(this.gridOptions.rowModelType)}isDomLayout(e){var t;return((t=this.gridOptions.domLayout)!=null?t:"normal")===e}isRowSelection(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"}useAsyncEvents(){return!this.get("suppressAsyncEvents")}isGetRowHeightFunction(){return typeof this.gridOptions.getRowHeight=="function"}getRowHeightForNode(e,t=!1,r){if(r==null&&(r=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(t)return{height:r,estimated:!0};const i={node:e,data:e.data},s=this.getCallback("getRowHeight")(i);if(this.isNumeric(s))return s===0&&ot("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,s),estimated:!1}}return e.detail&&this.get("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:r,estimated:!1}}getMasterDetailRowHeight(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||gt(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();const e=this.environment.refreshRowHeightVariable();return e!==-1?e:(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}getDomDataKey(){return this.domDataKey}getDomData(e,t){const r=e[this.getDomDataKey()];return r?r[t]:void 0}setDomData(e,t,r){const n=this.getDomDataKey();let i=e[n];gt(i)&&(i={},e[n]=i),i[t]=r}getDocument(){let e=null;return this.gridOptions.getDocument&&xe(this.gridOptions.getDocument)?e=this.gridOptions.getDocument():this.eGridDiv&&(e=this.eGridDiv.ownerDocument),e&&xe(e)?e:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getActiveDomElement(){return this.getRootNode().activeElement}getAsyncTransactionWaitMillis(){return xe(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return this.get("ensureDomOrder")?!1:this.get("animateRows")}isGroupRowsSticky(){return!(this.get("paginateChildRows")||this.get("groupHideOpenParents")||this.isDomLayout("print"))}isColumnsSortingCoupledToGroup(){const e=this.gridOptions.autoGroupColumnDef;return!(e!=null&&e.comparator)&&!this.get("treeData")}getGroupAggFiltering(){const e=this.gridOptions.groupAggFiltering;if(typeof e=="function")return this.getCallback("groupAggFiltering");if(e===!0)return()=>!0}getGrandTotalRow(){const e=this.gridOptions.grandTotalRow;if(e)return e;if(this.gridOptions.groupIncludeTotalFooter)return"bottom"}getGroupTotalRowCallback(){const e=this.get("groupTotalRow");if(typeof e=="function")return this.getCallback("groupTotalRow");if(e)return()=>e;const t=this.get("groupIncludeFooter");if(typeof t=="function"){const r=this.getCallback("groupIncludeFooter");return n=>r(n)?"bottom":void 0}return()=>t?"bottom":void 0}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?this.gridOptions.groupDisplayType==="multipleColumns":this.get("groupHideOpenParents")}isGroupUseEntireRow(e){return e?!1:this.gridOptions.groupDisplayType==="groupRows"}getGridCommonParams(){return{api:this.api,columnApi:this.columnApi,context:this.context}}addGridCommonParams(e){const t=e;return t.api=this.api,t.columnApi=this.columnApi,t.context=this.context,t}};Qt.PROPERTY_COERCIONS=new Map([...Fm.BOOLEAN_PROPERTIES.map(e=>[e,Qt.toBoolean]),...Fm.NUMBER_PROPERTIES.map(e=>[e,Qt.toNumber]),["groupAggFiltering",e=>typeof e=="function"?e:Qt.toBoolean(e)],["pageSize",Qt.toConstrainedNum(1,Number.MAX_VALUE)],["autoSizePadding",Qt.toConstrainedNum(0,Number.MAX_VALUE)],["keepDetailRowsCount",Qt.toConstrainedNum(1,Number.MAX_VALUE)],["rowBuffer",Qt.toConstrainedNum(0,Number.MAX_VALUE)],["infiniteInitialRowCount",Qt.toConstrainedNum(1,Number.MAX_VALUE)],["cacheOverflowSize",Qt.toConstrainedNum(1,Number.MAX_VALUE)],["cacheBlockSize",Qt.toConstrainedNum(1,Number.MAX_VALUE)],["serverSideInitialRowCount",Qt.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelPageSize",Qt.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelBufferSize",Qt.toConstrainedNum(0,Number.MAX_VALUE)]]);Qt.changeSetId=0;S([F("gridOptions")],Qt.prototype,"gridOptions",2);S([F("eventService")],Qt.prototype,"eventService",2);S([F("environment")],Qt.prototype,"environment",2);S([F("frameworkOverrides")],Qt.prototype,"frameworkOverrides",2);S([F("eGridDiv")],Qt.prototype,"eGridDiv",2);S([F("validationService")],Qt.prototype,"validationService",2);S([F("gridApi")],Qt.prototype,"api",2);S([_e],Qt.prototype,"init",1);S([Ni],Qt.prototype,"destroy",1);Qt=S([$e("gridOptionsService")],Qt);var WT=class extends Ae{getLocaleTextFunc(){const e=this.gos.getCallback("getLocaleText");if(e)return(r,n,i)=>e({key:r,defaultValue:n,variableValues:i});const t=this.gos.get("localeText");return(r,n,i)=>{let s=t&&t[r];if(s&&i&&i.length){let o=0;for(;!(o>=i.length||s.indexOf("${variable}")===-1);)s=s.replace("${variable}",i[o++])}return s??n}}};WT=S([$e("localeService")],WT);var Ak=class oU extends vh{constructor(){super(oU.TEMPLATE,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new YS(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedListener(this.eventService,_.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))}setScrollVisible(){const t=this.scrollVisibleService.isVerticalScrollShowing(),r=this.invisibleScrollbar,n=t&&this.gos.getScrollbarWidth()||0,i=n===0&&r?16:n;this.addOrRemoveCssClass("ag-scrollbar-invisible",r),eo(this.getGui(),i),eo(this.eViewport,i),eo(this.eContainer,i),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:t}=this,n=t.getGridBodyCtrl().getBodyViewportElement(),i=this.getScrollPosition(),s=n.scrollTop;i!=s&&this.setScrollPosition(s,!0)}getScrollPosition(){return this.getViewport().scrollTop}setScrollPosition(t,r){!r&&!ns(this.getViewport())&&this.attemptSettingScrollPosition(t),this.getViewport().scrollTop=t}};Ak.TEMPLATE=`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">
                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>
            </div>
        </div>`;S([_e],Ak.prototype,"postConstruct",1);var tee=Ak,BO={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},VO=["january","february","march","april","may","june","july","august","september","october","november","december"],Vd=class extends Ae{constructor(){super(...arguments),this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}init(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(ep(e.source))})}processDataTypeDefinitions(){var e;const t=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(t).forEach(([n,i])=>{this.dataTypeDefinitions[n]=Sr(tt({},i),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(i)})});const r=(e=this.gos.get("dataTypeDefinitions"))!=null?e:{};this.dataTypeMatchers={},Object.entries(r).forEach(([n,i])=>{const s=this.processDataTypeDefinition(i,r,[n],t);s&&(this.dataTypeDefinitions[n]=s,i.dataTypeMatcher&&(this.dataTypeMatchers[n]=i.dataTypeMatcher))}),this.checkObjectValueHandlers(t),["dateString","text","number","boolean","date"].forEach(n=>{const i=this.dataTypeMatchers[n];i&&delete this.dataTypeMatchers[n],this.dataTypeMatchers[n]=i??t[n].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){const r=tt(tt({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(r.columnTypes=[...this.convertColumnTypes(e.columnTypes),...this.convertColumnTypes(t.columnTypes)]),r}processDataTypeDefinition(e,t,r,n){let i;const s=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let o=n[s];const a=t[s];if(o&&a&&(o=a),!this.validateDataTypeDefinition(e,o,s))return;i=this.mergeDataTypeDefinitions(o,e)}else{if(r.includes(s)){ot('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}const o=t[s];if(!this.validateDataTypeDefinition(e,o,s))return;const a=this.processDataTypeDefinition(o,t,[...r,s],n);if(!a)return;i=this.mergeDataTypeDefinitions(a,e)}return Sr(tt({},i),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(i)})}validateDataTypeDefinition(e,t,r){return t?t.baseDataType!==e.baseDataType?(ot('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(ot(`The data type definition ${r} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{var r,n;if((r=t.node)!=null&&r.group){const i=t.column.getAggFunc();if(i){if(i==="first"||i==="last")return e.valueFormatter(t);if(e.baseDataType==="number"&&i!=="count"){if(typeof t.value=="number")return e.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter(Sr(tt({},t),{value:t.value.toNumber()}));if("value"in t.value)return e.valueFormatter(Sr(tt({},t),{value:t.value.value}))}}}if(!this.gos.get("suppressGroupMaintainValueType"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()){if(typeof t.value!="string"||(n=e.dataTypeMatcher)!=null&&n.call(e,t.value))return e.valueFormatter(t);if(!this.gos.get("suppressGroupMaintainValueType"))return}return e.valueFormatter(t)}}updateColDefAndGetDataTypeDefinitionColumnType(e,t,r){let{cellDataType:n}=t;const{field:i}=t;if(n===void 0&&(n=e.cellDataType),(n==null||n===!0)&&(n=this.canInferCellDataType(e,t)?this.inferCellDataType(i,r):!1),!n){e.cellDataType=!1;return}const s=this.dataTypeDefinitions[n];if(!s){ot(`Missing data type definition - "${n}"`);return}return e.cellDataType=n,s.groupSafeValueFormatter&&(e.valueFormatter=s.groupSafeValueFormatter),s.valueParser&&(e.valueParser=s.valueParser),s.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,s,r),s.columnTypes}updateColDefAndGetColumnType(e,t,r){var n,i;const s=this.updateColDefAndGetDataTypeDefinitionColumnType(e,t,r),o=(i=(n=t.type)!=null?n:s)!=null?i:e.type;return e.type=o,o?this.convertColumnTypes(o):void 0}addColumnListeners(e){if(!this.isWaitingForRowData)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const r=n=>{t.add(n.key)};e.addEventListener(ar.EVENT_STATE_UPDATED,r),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener(ar.EVENT_STATE_UPDATED,r))}canInferCellDataType(e,t){var r;if(this.rowModel.getType()!=="clientSide")return!1;const n={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,n))return!1;const i=t.type===null?e.type:t.type;if(i){const s=(r=this.gos.get("columnTypes"))!=null?r:{};if(this.convertColumnTypes(i).some(a=>{const l=s[a.trim()];return l&&this.doColDefPropsPreventInference(l,n)}))return!1}return!this.doColDefPropsPreventInference(e,n)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([r,n])=>this.doesColDefPropPreventInference(e,t,r,n))}doesColDefPropPreventInference(e,t,r,n){if(!t[r])return!1;const i=e[r];return i===null?(t[r]=!1,!1):n===void 0?!!i:i===n}inferCellDataType(e,t){var r;if(!e)return;let n;const i=this.getInitialData();if(i){const o=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");n=pp(i,e,o)}else this.initWaitForRowData(t);if(n==null)return;const[s]=(r=Object.entries(this.dataTypeMatchers).find(([o,a])=>a(n)))!=null?r:["object"];return s}getInitialData(){const e=this.gos.get("rowData");if(e!=null&&e.length)return e[0];if(this.initialData)return this.initialData;{const t=this.rowModel.getRootNode().allLeafChildren;if(t!=null&&t.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();const r=this.addManagedListener(this.eventService,_.EVENT_ROW_DATA_UPDATE_STARTED,n=>{const{firstRowData:i}=n;if(!i)return;r==null||r(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(i,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations();const s={type:_.EVENT_DATA_TYPES_INFERRED};this.eventService.dispatchEvent(s)})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;const r=[];this.columnStateUpdateListenerDestroyFuncs.forEach(s=>s()),this.columnStateUpdateListenerDestroyFuncs=[];const n={},i={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([s,o])=>{const a=this.columnModel.getGridColumn(s);if(!a)return;const l=a.getColDef();if(!this.columnModel.resetColumnDefIntoColumn(a,"cellDataTypeInferred"))return;const c=a.getColDef();if(t&&c.type&&c.type!==l.type){const u=this.getUpdatedColumnState(a,o);u.rowGroup&&u.rowGroupIndex==null&&(n[s]=u),u.pivot&&u.pivotIndex==null&&(i[s]=u),r.push(u)}}),t&&r.push(...this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(n,i)),r.length&&this.columnModel.applyColumnState({state:r},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){const r=this.columnModel.getColumnStateFromColDef(e);return t.forEach(n=>{delete r[n],n==="rowGroup"?delete r.rowGroupIndex:n==="pivot"&&delete r.pivotIndex}),r}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,r=e.object;this.hasObjectValueParser=t.valueParser!==r.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==r.valueFormatter}convertColumnTypes(e){let t=[];return e instanceof Array?e.some(n=>typeof n!="string")?console.warn("if colDef.type is supplied an array it should be of type 'string[]'"):t=e:typeof e=="string"?t=e.split(","):console.warn("colDef.type should be of type 'string' | 'string[]'"),t}getDateStringTypeDefinition(e){var t;return e?(t=this.getDataTypeDefinition(e))!=null?t:this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return(t=this.getDataTypeDefinition(e))==null?void 0:t.baseDataType}checkType(e,t){var r;if(t==null)return!0;const n=(r=this.getDataTypeDefinition(e))==null?void 0:r.dataTypeMatcher;return n?n(t):!0}validateColDef(e){e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&ot('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&ot('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))}setColDefPropertiesForBaseDataType(e,t,r){const n=(a,l,c)=>{let u=a.getColDef().valueFormatter;return u===t.groupSafeValueFormatter&&(u=t.valueFormatter),this.valueService.formatValue(a,l,c,u)},i=Yt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()),s=this.localeService.getLocaleTextFunc(),o=a=>{const{filterParams:l}=e;e.filterParams=typeof l=="object"?tt(tt({},l),a):a};switch(t.baseDataType){case"number":{e.cellEditor="agNumberCellEditor",i&&o({comparator:(a,l)=>{const c=a==null?0:parseInt(a),u=l==null?0:parseInt(l);return c===u?0:c>u?1:-1}});break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=a=>!!a.colDef.editable&&a.event.key===Y.SPACE,o(i?{valueFormatter:a=>xe(a.value)?s(String(a.value),a.value?"True":"False"):s("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(a,l)=>l,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(a,l)=>l===!1,numberOfInputs:0}]});break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=a=>n(a.column,a.node,a.value),i&&o({valueFormatter:a=>{const l=n(a.column,a.node,a.value);return xe(l)?l:s("blanks","(Blanks)")},treeList:!0,treeListFormatter:(a,l)=>{if(l===1&&a!=null){const c=VO[Number(a)-1];return s(c,BO[c])}return a??s("blanks","(Blanks)")}});break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=l=>n(l.column,l.node,l.value);const a=t.dateParser;o(i?{valueFormatter:l=>{const c=n(l.column,l.node,l.value);return xe(c)?c:s("blanks","(Blanks)")},treeList:!0,treeListPathGetter:l=>{const c=a(l??void 0);return c?[String(c.getFullYear()),String(c.getMonth()+1),String(c.getDate())]:null},treeListFormatter:(l,c)=>{if(c===1&&l!=null){const u=VO[Number(l)-1];return s(u,BO[u])}return l??s("blanks","(Blanks)")}}:{comparator:(l,c)=>{const u=a(c);return c==null||u<l?-1:u>l?1:0}});break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(a,l)=>{const c=this.columnModel.getPrimaryColumn(r),u=c==null?void 0:c.getColDef();if(!c||!u)return 0;const d=a==null?"":n(c,null,a),p=l==null?"":n(c,null,l);return d===p?0:d>p?1:-1},e.keyCreator=a=>n(a.column,a.node,a.value),i?o({valueFormatter:a=>{const l=n(a.column,a.node,a.value);return xe(l)?l:s("blanks","(Blanks)")}}):e.filterValueGetter=a=>n(a.column,a.node,this.valueService.getValue(a.column,a.node));break}}}getDefaultDataTypes(){const e=r=>!!r.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:r=>{var n,i;return((i=(n=r.newValue)==null?void 0:n.trim)==null?void 0:i.call(n))===""?null:Number(r.newValue)},valueFormatter:r=>r.value==null?"":typeof r.value!="number"||isNaN(r.value)?t("invalidNumber","Invalid Number"):String(r.value),dataTypeMatcher:r=>typeof r=="number"},text:{baseDataType:"text",valueParser:r=>r.newValue===""?null:Im(r.newValue),dataTypeMatcher:r=>typeof r=="string"},boolean:{baseDataType:"boolean",valueParser:r=>{var n,i;return r.newValue==null?r.newValue:((i=(n=r.newValue)==null?void 0:n.trim)==null?void 0:i.call(n))===""?null:String(r.newValue).toLowerCase()==="true"},valueFormatter:r=>r.value==null?"":String(r.value),dataTypeMatcher:r=>typeof r=="boolean"},date:{baseDataType:"date",valueParser:r=>Yi(r.newValue==null?null:String(r.newValue)),valueFormatter:r=>{var n;return r.value==null?"":!(r.value instanceof Date)||isNaN(r.value.getTime())?t("invalidDate","Invalid Date"):(n=Js(r.value,!1))!=null?n:""},dataTypeMatcher:r=>r instanceof Date},dateString:{baseDataType:"dateString",dateParser:r=>{var n;return(n=Yi(r))!=null?n:void 0},dateFormatter:r=>{var n;return(n=Js(r??null,!1))!=null?n:void 0},valueParser:r=>e(String(r.newValue))?r.newValue:null,valueFormatter:r=>e(String(r.value))?r.value:"",dataTypeMatcher:r=>typeof r=="string"&&e(r)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:r=>{var n;return(n=Im(r.value))!=null?n:""}}}}};S([F("rowModel")],Vd.prototype,"rowModel",2);S([F("columnModel")],Vd.prototype,"columnModel",2);S([F("valueService")],Vd.prototype,"valueService",2);S([_e],Vd.prototype,"init",1);Vd=S([$e("dataTypeService")],Vd);var Hd=class extends Ae{constructor(){super(...arguments),this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.ctrlsService.whenReady(()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.dispatchGridReadyEvent();const e=Yt.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId());new Tk("AG Grid",()=>this.gos.get("debug")).log(`initialised successfully, enterprise = ${e}`)}dispatchGridReadyEvent(){const e={type:_.EVENT_GRID_READY};this.eventService.dispatchEvent(e)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.columnModel.setColumnDefs(t,ep(e.source))}}};S([F("ctrlsService")],Hd.prototype,"ctrlsService",2);S([F("columnModel")],Hd.prototype,"columnModel",2);S([F("rowModel")],Hd.prototype,"rowModel",2);S([_e],Hd.prototype,"postConstruct",1);Hd=S([$e("syncService")],Hd);var zd=class extends Ae{constructor(){super(...arguments),this.manuallyDisplayed=!1}postConstruct(){this.addManagedListener(this.eventService,_.EVENT_ROW_DATA_UPDATED,()=>this.onRowDataUpdated()),this.addManagedListener(this.eventService,_.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}registerOverlayWrapperComp(e){this.overlayWrapperComp=e,(!this.gos.get("columnDefs")||this.gos.isRowModelType("clientSide")&&!this.gos.get("rowData"))&&this.showLoadingOverlay()}showLoadingOverlay(){if(this.gos.get("suppressLoadingOverlay"))return;const e={},t=this.userComponentFactory.getLoadingOverlayCompDetails(e);this.showOverlay(t,"ag-overlay-loading-wrapper","loadingOverlayComponentParams")}showNoRowsOverlay(){if(this.gos.get("suppressNoRowsOverlay"))return;const e={},t=this.userComponentFactory.getNoRowsOverlayCompDetails(e);this.showOverlay(t,"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams")}showOverlay(e,t,r){const n=e.newAgStackInstance(),i=this.addManagedPropertyListener(r,({currentValue:s})=>{n.then(o=>{o.refresh&&o.refresh(this.gos.addGridCommonParams(tt({},s??{})))})});this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.overlayWrapperComp.showOverlay(n,t,i)}hideOverlay(){this.manuallyDisplayed=!1,this.overlayWrapperComp.hideOverlay()}showOrHideOverlay(){const e=this.paginationProxy.isEmpty(),t=this.gos.get("suppressNoRowsOverlay");e&&!t?this.showNoRowsOverlay():this.hideOverlay()}onRowDataUpdated(){this.showOrHideOverlay()}onNewColumnsLoaded(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()}};S([F("userComponentFactory")],zd.prototype,"userComponentFactory",2);S([F("paginationProxy")],zd.prototype,"paginationProxy",2);S([F("columnModel")],zd.prototype,"columnModel",2);S([_e],zd.prototype,"postConstruct",1);zd=S([$e("overlayService")],zd);var Ei=class extends Ae{constructor(){super(...arguments),this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=bi(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=bi(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=bi(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){var e;this.isClientSideRowModel=this.rowModel.getType()==="clientSide",this.cachedState=(e=this.gos.get("initialState"))!=null?e:{},this.ctrlsService.whenReady(()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));const t=this.addManagedListener(this.eventService,_.EVENT_NEW_COLUMNS_LOADED,({source:i})=>{i==="gridInitializing"&&(t==null||t(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))}),r=this.addManagedListener(this.eventService,_.EVENT_ROW_COUNT_READY,()=>{r==null||r(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())}),n=this.addManagedListener(this.eventService,_.EVENT_FIRST_DATA_RENDERED,()=>{n==null||n(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState()),this.addManagedListener(this.eventService,_.EVENT_TOOL_PANEL_VISIBLE_CHANGED,()=>this.updateCachedState("sideBar",this.getSideBarState())),this.addManagedListener(this.eventService,_.EVENT_SIDE_BAR_UPDATED,()=>this.updateCachedState("sideBar",this.getSideBarState()))}setupStateOnColumnsInitialised(){var e;const t=(e=this.gos.get("initialState"))!=null?e:{};this.setColumnState(t),this.setColumnGroupState(t),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.addManagedListener(this.eventService,_.EVENT_COLUMN_VALUE_CHANGED,()=>this.updateColumnState(["aggregation"])),this.addManagedListener(this.eventService,_.EVENT_COLUMN_MOVED,()=>this.updateColumnState(["columnOrder"])),this.addManagedListener(this.eventService,_.EVENT_COLUMN_PINNED,()=>this.updateColumnState(["columnPinning"])),this.addManagedListener(this.eventService,_.EVENT_COLUMN_RESIZED,()=>this.updateColumnState(["columnSizing"])),this.addManagedListener(this.eventService,_.EVENT_COLUMN_VISIBLE,()=>this.updateColumnState(["columnVisibility"])),this.addManagedListener(this.eventService,_.EVENT_COLUMN_PIVOT_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,_.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,_.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateColumnState(["rowGroup"])),this.addManagedListener(this.eventService,_.EVENT_SORT_CHANGED,()=>this.updateColumnState(["sort"])),this.addManagedListener(this.eventService,_.EVENT_NEW_COLUMNS_LOADED,()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"])),this.addManagedListener(this.eventService,_.EVENT_COLUMN_GROUP_OPENED,()=>this.updateCachedState("columnGroup",this.getColumnGroupState()))}setupStateOnRowCountReady(){var e;const{filter:t,rowGroupExpansion:r,rowSelection:n,pagination:i}=(e=this.gos.get("initialState"))!=null?e:{},s=this.gos.get("advancedFilterModel");(t||s)&&this.setFilterState(t,s),r&&this.setRowGroupExpansionState(r),n&&this.setRowSelectionState(n),i&&this.setPaginationState(i),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedListener(this.eventService,_.EVENT_FILTER_CHANGED,()=>this.updateCachedState("filter",this.getFilterState())),this.addManagedListener(this.eventService,_.EVENT_ROW_GROUP_OPENED,()=>this.onRowGroupOpenedDebounced()),this.addManagedListener(this.eventService,_.EVENT_EXPAND_COLLAPSE_ALL,()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())),this.addManagedListener(this.eventService,_.EVENT_SELECTION_CHANGED,()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()}),this.addManagedListener(this.eventService,_.EVENT_PAGINATION_CHANGED,o=>{(o.newPage||o.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())})}setupStateOnFirstDataRendered(){var e;const{scroll:t,rangeSelection:r,focusedCell:n,columnOrder:i}=(e=this.gos.get("initialState"))!=null?e:{};n&&this.setFocusedCellState(n),r&&this.setRangeSelectionState(r),t&&this.setScrollState(t),this.setColumnPivotState(!!(i!=null&&i.orderedColIds)),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedListener(this.eventService,_.EVENT_CELL_FOCUSED,()=>this.updateCachedState("focusedCell",this.getFocusedCellState())),this.addManagedListener(this.eventService,_.EVENT_RANGE_SELECTION_CHANGED,s=>{s.finished&&this.updateCachedState("rangeSelection",this.getRangeSelectionState())}),this.addManagedListener(this.eventService,_.EVENT_BODY_SCROLL_END,()=>this.updateCachedState("scroll",this.getScrollState()))}getColumnState(){const e=this.columnModel.isPivotMode(),t=[],r=[],n=[],i=[],s=[],o=[],a=[],l=[],c=[],u=this.columnModel.getColumnState();for(let d=0;d<u.length;d++){const{colId:p,sort:f,sortIndex:m,rowGroup:y,rowGroupIndex:C,aggFunc:w,pivot:b,pivotIndex:x,pinned:E,hide:I,width:k,flex:P}=u[d];c.push(p),f&&(t[m??0]={colId:p,sort:f}),y&&(r[C??0]=p),typeof w=="string"&&n.push({colId:p,aggFunc:w}),b&&(i[x??0]=p),E&&(E==="right"?o:s).push(p),I&&a.push(p),(P||k)&&l.push({colId:p,flex:P??void 0,width:k})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:r.length?{groupColIds:r}:void 0,aggregation:n.length?{aggregationModel:n}:void 0,pivot:i.length||e?{pivotMode:e,pivotColIds:i}:void 0,columnPinning:s.length||o.length?{leftColIds:s,rightColIds:o}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:c.length?{orderedColIds:c}:void 0}}setColumnState(e){const{sort:t,rowGroup:r,aggregation:n,pivot:i,columnPinning:s,columnVisibility:o,columnSizing:a,columnOrder:l}=e,c={},u=m=>{let y=c[m];return y||(y={colId:m},c[m]=y,y)};t&&t.sortModel.forEach(({colId:m,sort:y},C)=>{const w=u(m);w.sort=y,w.sortIndex=C}),r&&r.groupColIds.forEach((m,y)=>{const C=u(m);C.rowGroup=!0,C.rowGroupIndex=y}),n&&n.aggregationModel.forEach(({colId:m,aggFunc:y})=>{u(m).aggFunc=y}),i&&(i.pivotColIds.forEach((m,y)=>{const C=u(m);C.pivot=!0,C.pivotIndex=y}),this.gos.updateGridOptions({options:{pivotMode:i.pivotMode},source:"gridInitializing"})),s&&(s.leftColIds.forEach(m=>{u(m).pinned="left"}),s.rightColIds.forEach(m=>{u(m).pinned="right"})),o&&o.hiddenColIds.forEach(m=>{u(m).hide=!0}),a&&a.columnSizingModel.forEach(({colId:m,flex:y,width:C})=>{const w=u(m);w.flex=y??null,w.width=C});const d=l==null?void 0:l.orderedColIds,p=!!(d!=null&&d.length),f=p?d.map(m=>u(m)):Object.values(c);if(f.length){this.columnStates=f;const m={sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};this.columnModel.applyColumnState({state:f,applyOrder:p,defaultState:m},"gridInitializing")}}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const r=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.columnModel.isSecondaryColumnsPresent()){if(t){let n=[];for(const i of t)this.columnModel.getSecondaryColumn(i.colId)&&n.push(i);this.columnModel.applyColumnState({state:n,applyOrder:e},"gridInitializing")}r&&this.columnModel.setColumnGroupState(r,"gridInitializing")}}getColumnGroupState(){const e=this.columnModel.getColumnGroupState(),t=[];return e.forEach(({groupId:r,open:n})=>{n&&t.push(r)}),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){var t;if(!e.hasOwnProperty("columnGroup"))return;const r=new Set((t=e.columnGroup)==null?void 0:t.openColumnGroupIds),i=this.columnModel.getColumnGroupState().map(({groupId:s})=>{const o=r.has(s);return o&&r.delete(s),{groupId:s,open:o}});r.forEach(s=>{i.push({groupId:s,open:!0})}),i.length&&(this.columnGroupStates=i),this.columnModel.setColumnGroupState(i,"gridInitializing")}getFilterState(){var e;let t=this.filterManager.getFilterModel();t&&Object.keys(t).length===0&&(t=void 0);const r=(e=this.filterManager.getAdvancedFilterModel())!=null?e:void 0;return t||r?{filterModel:t,advancedFilterModel:r}:void 0}setFilterState(e,t){const{filterModel:r,advancedFilterModel:n}=e??{advancedFilterModel:t};r&&this.filterManager.setFilterModel(r,"columnFilter"),n&&this.filterManager.setAdvancedFilterModel(n)}getRangeSelectionState(){var e;const t=(e=this.rangeService)==null?void 0:e.getCellRanges().map(r=>{const{id:n,type:i,startRow:s,endRow:o,columns:a,startColumn:l}=r;return{id:n,type:i,startRow:s,endRow:o,colIds:a.map(c=>c.getColId()),startColId:l.getColId()}});return t!=null&&t.length?{cellRanges:t}:void 0}setRangeSelectionState(e){if(!this.gos.get("enableRangeSelection")||!this.rangeService)return;const t=[];e.cellRanges.forEach(r=>{const n=[];if(r.colIds.forEach(s=>{const o=this.columnModel.getGridColumn(s);o&&n.push(o)}),!n.length)return;let i=this.columnModel.getGridColumn(r.startColId);if(!i){const s=this.columnModel.getAllDisplayedColumns(),o=new Set(n);i=s.find(a=>o.has(a))}t.push(Sr(tt({},r),{columns:n,startColumn:i}))}),this.rangeService.setCellRanges(t)}getScrollState(){var e,t,r;if(!this.isClientSideRowModel)return;const n=(e=this.ctrlsService.getGridBodyCtrl())==null?void 0:e.getScrollFeature(),{left:i}=(t=n==null?void 0:n.getHScrollPosition())!=null?t:{left:0},{top:s}=(r=n==null?void 0:n.getVScrollPosition())!=null?r:{top:0};return s||i?{top:s,left:i}:void 0}setScrollState(e){var t;if(!this.isClientSideRowModel)return;const{top:r,left:n}=e;(t=this.ctrlsService.getGridBodyCtrl())==null||t.getScrollFeature().setScrollPosition(r,n)}getSideBarState(){var e,t;return(t=(e=this.sideBarService)==null?void 0:e.getSideBarComp())==null?void 0:t.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.focusService.getFocusedCell();if(e){const{column:t,rowIndex:r,rowPinned:n}=e;return{colId:t.getColId(),rowIndex:r,rowPinned:n}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:r,rowPinned:n}=e;this.focusService.setFocusedCell({column:this.columnModel.getGridColumn(t),rowIndex:r,rowPinned:n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const e=this.paginationProxy.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationProxy.getPageSize();if(!(!e&&!t))return{page:e,pageSize:t}}setPaginationState(e){e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationProxy.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&this.paginationProxy.setPage(e.page)}getRowSelectionState(){var e;const t=this.selectionService.getSelectionState();return!t||!Array.isArray(t)&&(t.selectAll===!1||t.selectAllChildren===!1)&&!((e=t==null?void 0:t.toggledNodes)!=null&&e.length)?void 0:t}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let r=!1;Object.entries(t).forEach(([n,i])=>{wT(i,this.cachedState[n])||(r=!0)}),this.cachedState=tt(tt({},this.cachedState),t),r&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const r=this.cachedState[e];this.setCachedStateValue(e,t),wT(t,r)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState=Sr(tt({},this.cachedState),{[e]:t})}refreshStaleState(){this.staleStateKeys.forEach(e=>{switch(e){case"rowSelection":this.setCachedStateValue(e,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear();const t={type:_.EVENT_STATE_UPDATED,sources:e,state:this.cachedState};this.eventService.dispatchEvent(t)}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}};S([F("filterManager")],Ei.prototype,"filterManager",2);S([F("ctrlsService")],Ei.prototype,"ctrlsService",2);S([F("focusService")],Ei.prototype,"focusService",2);S([F("columnModel")],Ei.prototype,"columnModel",2);S([F("paginationProxy")],Ei.prototype,"paginationProxy",2);S([F("rowModel")],Ei.prototype,"rowModel",2);S([F("selectionService")],Ei.prototype,"selectionService",2);S([F("expansionService")],Ei.prototype,"expansionService",2);S([F("columnAnimationService")],Ei.prototype,"columnAnimationService",2);S([rr("sideBarService")],Ei.prototype,"sideBarService",2);S([rr("rangeService")],Ei.prototype,"rangeService",2);S([_e],Ei.prototype,"postConstruct",1);Ei=S([$e("stateService")],Ei);var Jm=class extends Ae{init(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,eee)}processColumnDefs(e){this.processOptions(e,tp)}processOptions(e,t){const{validations:r,deprecations:n,allProperties:i,propertyExceptions:s,objectName:o,docsUrl:a}=t;i&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...s??[],...Object.keys(n)],i,o,a);const l=new Set;Object.keys(e).forEach(u=>{var d;const p=n[u];if(p)if("renamed"in p){const{renamed:x,version:E}=p;l.add(`As of v${E}, ${String(u)} is deprecated. Please use ${String(x)} instead.`),e[x]=e[u]}else{const{message:x,version:E}=p;l.add(`As of v${E}, ${String(u)} is deprecated. ${x??""}`)}const f=e[u];if(f==null||f===!1)return;const m=r[u];let y;if(m)if(typeof m=="function"){const x=m(e,this.gridOptions);if(!x)return;if("objectName"in x){const E=e[u];if(Array.isArray(E)){E.forEach(I=>{this.processOptions(I,x)});return}this.processOptions(e[u],x);return}y=x}else y=m;else return;const{module:C,dependencies:w,supportedRowModels:b}=y;if(b){const x=(d=this.gridOptions.rowModelType)!=null?d:"clientSide";if(!b.includes(x)){l.add(`${String(u)} is not supported with the '${x}' row model.`);return}}if(C){const x=Array.isArray(C)?C:[C];let E=!0;if(x.forEach(I=>{Yt.__assertRegistered(I,String(u),this.context.getGridId())||(E=!1,l.add(`${String(u)} is only available when ${I} is loaded.`))}),!E)return}if(w){const x=this.checkForWarning(u,w,e);if(x){l.add(x);return}}}),l.size>0&&l.forEach(u=>{ot(u)})}checkForWarning(e,t,r){if(typeof t=="function")return t(r,this.gridOptions);const i=Object.entries(t).find(([a,l])=>{const c=r[a];return!l.includes(c)});if(!i)return null;const[s,o]=i;return o.length>1?`'${String(e)}' requires '${s}' to be one of [${o.join(", ")}].`:`'${String(e)}' requires '${s}' to be ${o[0]}.`}checkProperties(e,t,r,n,i){const s=["__ob__","__v_skip","__metadata__"],o=Oz(Object.getOwnPropertyNames(e),[...s,...t,...r],r);if(oi(o,(a,l)=>{ot(`invalid ${n} property '${a}' did you mean any of these: ${l.slice(0,8).join(", ")}`)}),Object.keys(o).length>0&&i){const a=this.getFrameworkOverrides().getDocLink(i);ot(`to see all the valid ${n} properties please check: ${a}`)}}};S([F("gridOptions")],Jm.prototype,"gridOptions",2);S([_e],Jm.prototype,"init",1);Jm=S([$e("validationService")],Jm);var Rw=class extends Ae{constructor(){super(...arguments),this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new ID(this.getFrameworkOverrides())}addEventListener(e,t){const r=this.frameworkEventWrappingService.wrap(t),n=this.gos.useAsyncEvents()&&!o0.has(e),i=n?this.asyncEventListeners:this.syncEventListeners;i.has(e)||i.set(e,new Set),i.get(e).add(r),this.eventService.addEventListener(e,r,n)}removeEventListener(e,t){var r;const n=this.frameworkEventWrappingService.unwrap(t),i=this.asyncEventListeners.get(e),s=!!(i!=null&&i.delete(n));s||(r=this.syncEventListeners.get(e))==null||r.delete(n),this.eventService.removeEventListener(e,n,s)}addGlobalListener(e){const t=this.frameworkEventWrappingService.wrapGlobal(e);if(this.gos.useAsyncEvents()){const n=(s,o)=>{o0.has(s)&&t(s,o)},i=(s,o)=>{o0.has(s)||t(s,o)};this.globalEventListenerPairs.set(e,{syncListener:n,asyncListener:i}),this.eventService.addGlobalListener(n,!1),this.eventService.addGlobalListener(i,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){const t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){const{syncListener:n,asyncListener:i}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(n,!1),this.eventService.removeGlobalListener(i,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach((r,n)=>{r.forEach(i=>this.eventService.removeEventListener(n,i,t)),r.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(r=>this.eventService.removeGlobalListener(r,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:e,asyncListener:t})=>{this.eventService.removeGlobalListener(e,!1),this.eventService.removeGlobalListener(t,!0)}),this.globalEventListenerPairs.clear()}};S([_e],Rw.prototype,"postConstruct",1);Rw=S([$e("apiEventService")],Rw);var _k=class extends mt{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.paginationProxy.getPageSize()||(this.paginationProxy.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}init(){this.addManagedPropertyListener("paginationPageSizeSelector",()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedListener(this.eventService,_.EVENT_PAGINATION_CHANGED,e=>this.handlePaginationChanged(e))}handlePaginationChanged(e){if(!this.selectPageSizeComp||!(e!=null&&e.newPageSize))return;const t=this.paginationProxy.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))}reset(){Zr(this.getGui()),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0)}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get("paginationPageSizeSelector")!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.paginationProxy.getPageSize(),r=!t||!e.includes(t);r&&(e.unshift(""),ot(`The paginationPageSize grid option is set to a value that is not in the list of page size options.
                Please make sure that the paginationPageSize grid option is set to one of the values in the 
                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.`)),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0);const n=this.localeService.getLocaleTextFunc(),i=n("pageSizeSelectorLabel","Page Size:"),s=e.map(a=>({value:String(a),text:String(a)})),o=n("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new BS).addOptions(s).setValue(String(r?"":t)).setAriaLabel(o).setLabel(i).onValueChange(()=>this.handlePageSizeItemSelected()),this.hasEmptyOption=r}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get("paginationPageSizeSelector");return!Array.isArray(t)||!this.validateValues(t)?e:[...t].sort((r,n)=>r-n)}validateValues(e){if(!e.length)return ot(`The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.
                If you want to hide the page size selector, please set the paginationPageSizeSelector to false.`),!1;for(let t=0;t<e.length;t++){const r=e[t],n=typeof r=="number",i=r>0;if(!n)return ot(`The paginationPageSizeSelector grid option contains a non-numeric value.
                    Please make sure that all values in the paginationPageSizeSelector array are numbers.`),!1;if(!i)return ot(`The paginationPageSizeSelector grid option contains a negative number or zero.
                    Please make sure that all values in the paginationPageSizeSelector array are positive.`),!1}return!0}destroy(){this.toggleSelectDisplay(!1),super.destroy()}};S([F("paginationProxy")],_k.prototype,"paginationProxy",2);S([_e],_k.prototype,"init",1);var ev=class extends Ae{constructor(){super(),this.descriptionContainer=null,this.announceValue=bi(this.announceValue.bind(this),200)}postConstruct(){const e=this.gos.getDocument(),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),FD(t,"polite"),lz(t,"additions text"),az(t,!0),this.eGridDiv.appendChild(t)}announceValue(e){this.descriptionContainer&&(this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)},50))}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(Zr(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null}};S([F("eGridDiv")],ev.prototype,"eGridDiv",2);S([_e],ev.prototype,"postConstruct",1);ev=S([$e("ariaAnnouncementService")],ev);var KT=class{};KT.gridOptions=void 0;var ree=1,nee=class{create(e,t,r,n,i){var s;let o={};KT.gridOptions?(qi(o,KT.gridOptions,!0,!0),o=tt(tt({},o),t)):o=t;const a=Qt.getCoercedGridOptions(o),l=!!a.debug,c=(s=a.gridId)!=null?s:String(ree++),u=this.getRegisteredModules(i,c),d=this.createBeansList(a.rowModelType,u,c),p=this.createProvidedBeans(e,a,i);if(!d){ed("Failed to create grid.");return}const f={providedBeanInstances:p,beanClasses:d,debug:l,gridId:c},m=new Tk("Context",()=>f.debug),y=new pX(f,m),C=y.getBean("beans");return this.registerModuleUserComponents(C,u),this.registerStackComponents(C,u),this.registerControllers(C,u),r(y),C.syncService.start(),n&&n(y),y.getBean("gridApi")}registerControllers(e,t){t.forEach(r=>{r.controllers&&r.controllers.forEach(n=>e.ctrlsFactory.register(n))})}registerStackComponents(e,t){const r=this.createAgStackComponentsList(t);e.agStackComponentsRegistry.setupComponents(r)}getRegisteredModules(e,t){const r=e?e.modules:null,n=Yt.__getRegisteredModules(t),i=[],s={},o=(a,l,c)=>{(d=>{s[d.moduleName]||(s[d.moduleName]=!0,i.push(d),Yt.__register(d,a,c))})(l),l.dependantModules&&l.dependantModules.forEach(d=>o(a,d,c))};return r&&r.forEach(a=>o(!0,a,t)),n&&n.forEach(a=>o(!Yt.__isPackageBased(),a,void 0)),i}registerModuleUserComponents(e,t){this.extractModuleEntity(t,n=>n.userComponents?n.userComponents:[]).forEach(n=>{e.userComponentRegistry.registerDefaultComponent(n.componentName,n.componentClass)})}createProvidedBeans(e,t,r){let n=r?r.frameworkOverrides:null;gt(n)&&(n=new tU);const i={gridOptions:t,eGridDiv:e,globalEventListener:r?r.globalEventListener:null,globalSyncEventListener:r?r.globalSyncEventListener:null,frameworkOverrides:n};return r&&r.providedBeanInstances&&Object.assign(i,r.providedBeanInstances),i}createAgStackComponentsList(e){let t=[{componentName:"AgCheckbox",componentClass:VS},{componentName:"AgRadioButton",componentClass:Jz},{componentName:"AgToggleButton",componentClass:Y$},{componentName:"AgInputTextField",componentClass:ch},{componentName:"AgInputTextArea",componentClass:RJ},{componentName:"AgInputNumberField",componentClass:dk},{componentName:"AgInputDateField",componentClass:TJ},{componentName:"AgInputRange",componentClass:AJ},{componentName:"AgRichSelect",componentClass:nx},{componentName:"AgSelect",componentClass:BS},{componentName:"AgSlider",componentClass:DJ},{componentName:"AgGridBody",componentClass:ea},{componentName:"AgHeaderRoot",componentClass:xJ},{componentName:"AgSortIndicator",componentClass:pk},{componentName:"AgPagination",componentClass:as},{componentName:"AgPageSizeSelector",componentClass:_k},{componentName:"AgOverlayWrapper",componentClass:UJ},{componentName:"AgGroupComponent",componentClass:kJ},{componentName:"AgRowContainer",componentClass:Sf},{componentName:"AgFakeHorizontalScroll",componentClass:WJ},{componentName:"AgFakeVerticalScroll",componentClass:tee},{componentName:"AgAutocomplete",componentClass:LJ}];const r=this.extractModuleEntity(e,n=>n.agStackComponents?n.agStackComponents:[]);return t=t.concat(r),t}createBeansList(e="clientSide",t,r){const n=t.filter(l=>!l.rowModel||l.rowModel===e),i={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!i[e]){ed("Could not find row model for rowModelType = "+e);return}if(!Yt.__assertRegistered(i[e],`rowModelType = '${e}'`,r))return;const s=[At,Zp,zT,Qm,qp,Ft,Cw,Pw,qm,GT,Jc,Qp,zm,WT,Jm,Um,Hm,RT,qo,Qt,xl,jd,no,Mn,Fd,Wm,_s,Sw,Mm,Gd,ci,Ew,ru,xw,Ld,eu,Ct,Kp,sr,fl,Ym,tu,bw,Up,Bd,HT,Km,Xp,Om,Yp,Wp,Oa,TT,$T,Xm,Ma,Jp,Sd,Zm,ef,UT,Vd,Xi,Hd,zd,Ei,$m,Rw,ev,io],o=this.extractModuleEntity(n,l=>l.beans?l.beans:[]);s.push(...o);const a=[];return s.forEach(l=>{a.indexOf(l)<0&&a.push(l)}),a}extractModuleEntity(e,t){return[].concat(...e.map(t))}},iee=class{wrap(e,t,r=[],n){const i=this.createWrapper(e,n);return t.forEach(s=>{this.createMethod(i,s,!0)}),r.forEach(s=>{this.createMethod(i,s,!1)}),i}unwrap(e){return e}createMethod(e,t,r){e.addMethod(t,this.createMethodProxy(e,t,r))}createMethodProxy(e,t,r){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(r&&console.warn("AG Grid: Framework component is missing the method "+t+"()"),null)}}},kf=typeof global>"u"?{}:global;kf.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;kf.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;kf.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;kf.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;kf.Node=typeof Node>"u"?{}:Node;kf.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var Dk=class Fg{constructor(t,r,n,i,s,o){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=t,this.gos=r,this.eventService=n,this.columnModel=i,this.beans=o,this.selectionService=s,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=Fg.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return pt.cloneObject(this.allNodesMap)}getRowNode(t){return this.allNodesMap[t]}setRowData(t){if(typeof t=="string"){console.warn("AG Grid: rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(t);const r=this.rootNode,n=this.rootNode.sibling;r.childrenAfterFilter=null,r.childrenAfterGroup=null,r.childrenAfterAggFilter=null,r.childrenAfterSort=null,r.childrenMapped=null,r.updateHasChildren(),this.nextId=0,this.allNodesMap={},t?r.allLeafChildren=t.map(i=>this.createNode(i,this.rootNode,Fg.TOP_LEVEL)):(r.allLeafChildren=[],r.childrenAfterGroup=[]),n&&(n.childrenAfterFilter=r.childrenAfterFilter,n.childrenAfterGroup=r.childrenAfterGroup,n.childrenAfterAggFilter=r.childrenAfterAggFilter,n.childrenAfterSort=r.childrenAfterSort,n.childrenMapped=r.childrenMapped,n.allLeafChildren=r.allLeafChildren)}updateRowData(t,r){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(t.add);const n={remove:[],update:[],add:[]},i=[];return this.executeRemove(t,n,i),this.executeUpdate(t,n,i),this.executeAdd(t,n),this.updateSelection(i,"rowDataChanged"),r&&pt.sortRowNodesByOrder(this.rootNode.allLeafChildren,r),n}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(t){const r={type:_.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:t!=null&&t.length?t[0]:null};this.eventService.dispatchEvent(r)}updateSelection(t,r){const n=t.length>0;if(n&&this.selectionService.setNodesSelected({newValue:!1,nodes:t,suppressFinishActions:!0,source:r}),this.selectionService.updateGroupsFromChildrenSelections(r),n){const i={type:_.EVENT_SELECTION_CHANGED,source:r};this.eventService.dispatchEvent(i)}}executeAdd(t,r){var n;const{add:i,addIndex:s}=t;if(pt.missingOrEmpty(i))return;const o=i.map(a=>this.createNode(a,this.rootNode,Fg.TOP_LEVEL));if(typeof s=="number"&&s>=0){const{allLeafChildren:a}=this.rootNode,l=a.length;let c=s;if(this.gos.get("treeData")&&s>0&&l>0){for(let f=0;f<l;f++)if(((n=a[f])==null?void 0:n.rowIndex)==s-1){c=f+1;break}}const d=a.slice(0,c),p=a.slice(c,a.length);this.rootNode.allLeafChildren=[...d,...o,...p]}else this.rootNode.allLeafChildren=[...this.rootNode.allLeafChildren,...o];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),r.add=o}executeRemove(t,r,n){const{remove:i}=t;if(pt.missingOrEmpty(i))return;const s={};i.forEach(o=>{const a=this.lookupRowNode(o);a&&(a.isSelected()&&n.push(a),a.clearRowTopAndRowIndex(),s[a.id]=!0,delete this.allNodesMap[a.id],r.remove.push(a))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(o=>!s[o.id]),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(t,r,n){const{update:i}=t;pt.missingOrEmpty(i)||i.forEach(s=>{const o=this.lookupRowNode(s);o&&(o.updateData(s),!o.selectable&&o.isSelected()&&n.push(o),this.setMasterForRow(o,s,Fg.TOP_LEVEL,!1),r.update.push(o))})}lookupRowNode(t){const r=this.gos.getCallback("getRowId");let n;if(r){const i=r({data:t,level:0});if(n=this.allNodesMap[i],!n)return console.error(`AG Grid: could not find row id=${i}, data item was not found for this id`),null}else if(n=this.rootNode.allLeafChildren.find(i=>i.data===t),!n)return console.error("AG Grid: could not find data item as object was not found",t),console.error("Consider using getRowId to help the Grid find matching row data"),null;return n||null}createNode(t,r,n){const i=new Dt(this.beans);i.group=!1,this.setMasterForRow(i,t,n,!0);const s=this.gos.get("suppressParentsInRowNodes");return r&&!s&&(i.parent=r),i.level=n,i.setDataAndId(t,this.nextId.toString()),this.allNodesMap[i.id]&&console.warn(`AG Grid: duplicate node id '${i.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[i.id]=i,this.nextId++,i}setMasterForRow(t,r,n,i){if(this.gos.get("treeData"))t.setMaster(!1),i&&(t.expanded=!1);else{if(this.gos.get("masterDetail")){const a=this.gos.get("isRowMaster");a?t.setMaster(a(r)):t.setMaster(!0)}else t.setMaster(!1);if(i){const a=this.columnModel.getRowGroupColumns(),l=a?a.length:0,c=n+l;t.expanded=t.master?this.isExpanded(c):!1}}}isExpanded(t){const r=this.gos.get("groupDefaultExpanded");return r===-1?!0:t<r}};Dk.TOP_LEVEL=0;Dk.ROOT_NODE_ID="ROOT_NODE_ID";var see=Dk,Pi=class extends Ae{constructor(){super(...arguments),this.onRowHeightChanged_debounced=pt.debounce(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}init(){const e=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),r=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedListener(this.eventService,_.EVENT_NEW_COLUMNS_LOADED,r),this.addManagedListener(this.eventService,_.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,_.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:"pivot"})),this.addManagedListener(this.eventService,_.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,_.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this)),this.addManagedListener(this.eventService,_.EVENT_GRID_READY,()=>this.onGridReady()),this.addPropertyListeners(),this.rootNode=new Dt(this.beans),this.nodeManager=new see(this.rootNode,this.gos,this.eventService,this.columnModel,this.selectionService,this.beans)}addPropertyListeners(){const e=new Set(["treeData","masterDetail"]),t=new Set(["suppressParentsInRowNodes","groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),r=new Set(["excludeChildrenWhenTreeDataFiltering"]),n=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),i=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),s=new Set(["postSortRows","groupDisplayType","accentedSort"]),o=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...e,...t,...r,...n,...n,...i,...s,...o,...a];this.addManagedPropertyListeners(l,c=>{var u;const d=(u=c.changeSet)==null?void 0:u.properties;if(!d)return;const p=f=>d.some(m=>f.has(m));if(p(e)){this.setRowData(this.rootNode.allLeafChildren.map(f=>f.data));return}if(p(t)){this.refreshModel({step:"group"});return}if(p(r)){this.refreshModel({step:"filter"});return}if(p(n)){this.refreshModel({step:"pivot"});return}if(p(i)){this.refreshModel({step:"aggregate"});return}if(p(s)){this.refreshModel({step:"sort"});return}if(p(o)){this.refreshModel({step:"filter_aggregates"});return}p(a)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,r,n){let i,s=!1;do{i=!1;const o=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(o,r),c=Math.min(a,n);for(let u=l;u<=c;u++){const d=this.getRow(u);if(d.rowHeightEstimated){const p=this.gos.getRowHeightForNode(d);d.setRowHeight(p.height),i=!0,s=!0}}i&&this.setRowTopAndRowIndex()}while(i);return s}setRowTopAndRowIndex(){const e=this.environment.getDefaultRowHeight();let t=0;const r=new Set,n=this.gos.isDomLayout("normal");for(let i=0;i<this.rowsToDisplay.length;i++){const s=this.rowsToDisplay[i];if(s.id!=null&&r.add(s.id),s.rowHeight==null){const o=this.gos.getRowHeightForNode(s,n,e);s.setRowHeight(o.height,o.estimated)}s.setRowTop(t),s.setRowIndex(i),t+=s.rowHeight}return r}clearRowTopAndRowIndex(e,t){const r=e.isActive(),n=s=>{s&&s.id!=null&&!t.has(s.id)&&s.clearRowTopAndRowIndex()},i=s=>{if(n(s),n(s.detailNode),n(s.sibling),s.hasChildren()&&s.childrenAfterGroup){const o=s.level==-1;r&&!o&&!s.expanded||s.childrenAfterGroup.forEach(i)}};i(this.rootNode)}ensureRowsAtPixel(e,t,r=0){const n=this.getRowIndexAtPixel(t),i=this.getRow(n),s=!this.gos.get("suppressAnimationFrame");return i===e[0]?!1:(e.forEach(o=>{pt.removeFromArray(this.rootNode.allLeafChildren,o)}),e.forEach((o,a)=>{pt.insertIntoArray(this.rootNode.allLeafChildren,o,Math.max(n+r,0)+a)}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:s}),!0)}highlightRowAtPixel(e,t){const r=t!=null?this.getRowIndexAtPixel(t):null,n=r!=null?this.getRow(r):null;if(!n||!e||n===e||t==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}const i=this.getHighlightPosition(t,n);this.lastHighlightedRow&&this.lastHighlightedRow!==n&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),n.setHighlighted(i),this.lastHighlightedRow=n}getHighlightPosition(e,t){if(!t){const i=this.getRowIndexAtPixel(e);if(t=this.getRow(i||0),!t)return 1}const{rowTop:r,rowHeight:n}=t;return e-r<n/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const t=this.rootNode.childrenAfterAggFilter;return t?t.length:0}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let r=this.rootNode.childrenAfterSort[e];if(this.gos.get("groupHideOpenParents"))for(;r.expanded&&r.childrenAfterSort&&r.childrenAfterSort.length>0;)r=r.childrenAfterSort[0];return r.rowIndex}getRowBounds(e){if(pt.missing(this.rowsToDisplay))return null;const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=this.gos.isAnimateRows();this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=this.gos.isAnimateRows(),n=e.columns.length===0||e.columns.some(i=>i.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:n,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=this.gos.isAnimateRows();this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){const t=pt.missingOrEmpty(e),r=new rx(!1,this.rootNode);return(t||this.gos.get("treeData"))&&r.setInactive(),r}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;const t=e.rowNodeTransactions.filter(n=>n.add!=null&&n.add.length>0||n.remove!=null&&n.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(e){let t="group";const r={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",sort:"sort",pivot:"pivot"};if(pt.exists(e)&&(t=r[e]),pt.missing(t)){console.error(`AG Grid: invalid step ${e}, available steps are ${Object.keys(r).join(", ")}`);return}const n=!this.gos.get("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:n}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.shouldRowModelIgnoreRefresh())return;let t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;const r=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,t.rowNodeOrder,r,!!t.afterColumnsChanged);case"filter":this.doFilter(r);case"pivot":this.doPivot(r);case"aggregate":this.doAggregate(r);case"filter_aggregates":this.doFilterAggregates(r);case"sort":this.doSort(t.rowNodeTransactions,r);case"map":this.doRowsToDisplay()}const n=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(r,n),this.isRefreshingModel=!1;const i={type:_.EVENT_MODEL_UPDATED,animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack};this.eventService.dispatchEvent(i)}isEmpty(){const e=pt.missing(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return pt.missing(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return pt.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let r=!t,n=!1;const i=[],s=this.gos.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(o=>{if(n)return;if(r&&(o===t||o===e)&&(n=!0,o.group&&s)){i.push(...o.allLeafChildren);return}if(!r){if(o!==t&&o!==e)return;r=!0}if(!o.group||!s){i.push(o);return}}),i}setDatasource(e){console.error("AG Grid: should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,r=this.rowsToDisplay.length-1;if(e<=0)return 0;if(pt.last(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let i=-1,s=-1;for(;;){const o=Math.floor((t+r)/2),a=this.rowsToDisplay[o];if(this.isRowInPixel(a,e)||(a.rowTop<e?t=o+1:a.rowTop>e&&(r=o-1),i===t&&s===r))return o;i=t,s=r}}isRowInPixel(e,t){const r=e.rowTop,n=e.rowTop+e.rowHeight;return r<=t&&n>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,r)=>e(t,r))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){const{nodes:t,callback:r,recursionType:n,includeFooterNodes:i}=e;let{index:s}=e;const o=a=>{var l;const c=(l=t[0])==null?void 0:l.parent;if(!c)return;const u=i&&this.gos.getGrandTotalRow(),d=this.gos.getGroupTotalRowCallback(),p=i&&d({node:c});if(c===this.rootNode){u===a&&(c.createFooter(),r(c.sibling,s++));return}p===a&&(c.createFooter(),r(c.sibling,s++))};o("top");for(let a=0;a<t.length;a++){const l=t[a];if(r(l,s++),l.hasChildren()&&!l.footer){let c=null;switch(n){case 0:c=l.childrenAfterGroup;break;case 1:c=l.childrenAfterAggFilter;break;case 2:c=l.childrenAfterSort;break;case 3:c=l.leafGroup?null:l.childrenAfterSort;break}c&&(s=this.recursivelyWalkNodesAndCallback({nodes:[...c],callback:r,recursionType:n,index:s,includeFooterNodes:i}))}}return o("bottom"),s}doAggregate(e){var t;(t=this.aggregationStage)==null||t.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){const t=this.gos.get("treeData"),r=this.columnModel.isPivotActive(),n=o=>{o&&o.forEach(a=>{const l=()=>{a.expanded=e,n(a.childrenAfterGroup)};if(t){pt.exists(a.childrenAfterGroup)&&l();return}if(r){!a.leafGroup&&l();return}a.group&&l()})};this.rootNode&&n(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"});const i=e?"expandAll":"collapseAll",s={type:_.EVENT_EXPAND_COLLAPSE_ALL,source:i};this.eventService.dispatchEvent(s)}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,r,n){if(this.groupStage){if(e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodeOrder:t,changedPath:r}):this.groupStage.execute({rowNode:this.rootNode,changedPath:r,afterColumnsChanged:n}),this.gos.get("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",r)){const s={type:_.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(s)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:_.EVENT_ROW_COUNT_READY}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){var t;(t=this.pivotStage)==null||t.execute({rowNode:this.rootNode,changedPath:e})}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(e){if(typeof e=="string"&&e.indexOf(Dt.ID_PREFIX_ROW_GROUP)==0){let r;return this.forEachNode(n=>{n.id===e&&(r=n)}),r}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){const e={type:_.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(e),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const r=this.gos.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.executeBatchUpdateRowData()},r)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();const e=[],t=[];let r=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(n=>{const i=this.nodeManager.updateRowData(n.rowDataTransaction,void 0);t.push(i),n.callback&&e.push(n.callback.bind(null,i)),typeof n.rowDataTransaction.addIndex=="number"&&(r=!0)}),this.commonUpdateRowData(t,void 0,r),e.length>0&&window.setTimeout(()=>{e.forEach(n=>n())},0),t.length>0){const n={type:_.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:t};this.eventService.dispatchEvent(n)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e,t){this.valueCache.onDataChanged();const r=this.nodeManager.updateRowData(e,t),n=typeof e.addIndex=="number";return this.commonUpdateRowData([r],t,n),r}createRowNodeOrder(){if(this.gos.get("suppressMaintainUnsortedOrder"))return;const t={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let r=0;r<this.rootNode.allLeafChildren.length;r++){const n=this.rootNode.allLeafChildren[r];t[n.id]=r}return t}commonUpdateRowData(e,t,r){if(!this.hasStarted)return;const n=!this.gos.get("suppressAnimationFrame");r&&(t=this.createRowNodeOrder());const i={type:_.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(i),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodeOrder:t,keepRenderedRows:!0,keepEditingRows:!0,animate:n})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const r=t.detailNode;r&&r.setRowHeight(r.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}};S([F("columnModel")],Pi.prototype,"columnModel",2);S([F("selectionService")],Pi.prototype,"selectionService",2);S([F("valueCache")],Pi.prototype,"valueCache",2);S([F("beans")],Pi.prototype,"beans",2);S([F("filterStage")],Pi.prototype,"filterStage",2);S([F("sortStage")],Pi.prototype,"sortStage",2);S([F("flattenStage")],Pi.prototype,"flattenStage",2);S([rr("groupStage")],Pi.prototype,"groupStage",2);S([rr("aggregationStage")],Pi.prototype,"aggregationStage",2);S([rr("pivotStage")],Pi.prototype,"pivotStage",2);S([rr("filterAggregatesStage")],Pi.prototype,"filterAggregatesStage",2);S([_e],Pi.prototype,"init",1);Pi=S([$e("rowModel")],Pi);var Tw=class extends Ae{execute(e){const{changedPath:t}=e;this.filterService.filter(t)}};S([F("filterService")],Tw.prototype,"filterService",2);Tw=S([$e("filterStage")],Tw);var tv=class extends Ae{execute(e){const t=this.sortController.getSortOptions(),r=pt.exists(t)&&t.length>0,n=r&&pt.exists(e.rowNodeTransactions)&&this.gos.get("deltaSort"),i=t.some(s=>this.gos.isColumnsSortingCoupledToGroup()?s.column.isPrimary()&&s.column.isRowGroupActive():!!s.column.getColDef().showRowGroup);this.sortService.sort(t,r,n,e.rowNodeTransactions,e.changedPath,i)}};S([F("sortService")],tv.prototype,"sortService",2);S([F("sortController")],tv.prototype,"sortController",2);tv=S([$e("sortStage")],tv);var Aw=class extends Ae{execute(e){const t=e.rowNode,r=[],n=this.beans.columnModel.isPivotMode(),i=n&&t.leafGroup,s=i?[t]:t.childrenAfterSort,o=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(o,s,r,n,0);const a=r.length>0;if(!i&&a&&o.grandTotalRow){t.createFooter();const c=o.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(o,t.sibling,r,0,c)}return r}getFlattenDetails(){const e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:this.gos.isGroupMultiAutoColumn(),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:this.gos.getGrandTotalRow(),groupTotalRow:this.gos.getGroupTotalRowCallback()}}recursivelyAddToRowsToDisplay(e,t,r,n,i){if(!pt.missingOrEmpty(t))for(let s=0;s<t.length;s++){const o=t[s],a=o.hasChildren(),l=n&&!a,c=e.groupRemoveSingleChildren&&a&&o.childrenAfterGroup.length===1,u=e.groupRemoveLowestSingleChildren&&a&&o.leafGroup&&o.childrenAfterGroup.length===1,d=n&&o.leafGroup,p=e.hideOpenParents&&o.expanded&&!o.master&&!d;if(!l&&!p&&!c&&!u&&this.addRowNodeToRowsToDisplay(e,o,r,i),!(n&&o.leafGroup)){if(a){const m=c||u;if(o.expanded||m){const y=e.groupTotalRow({node:o});y||o.destroyFooter();const C=m?i:i+1;y==="top"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(e,o.sibling,r,C)),this.recursivelyAddToRowsToDisplay(e,o.childrenAfterSort,r,n,C),y==="bottom"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(e,o.sibling,r,C))}}else if(o.master&&o.expanded){const m=this.createDetailNode(o);this.addRowNodeToRowsToDisplay(e,m,r,i)}}}}addRowNodeToRowsToDisplay(e,t,r,n,i){i?r.unshift(t):r.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:n)}createDetailNode(e){if(pt.exists(e.detailNode))return e.detailNode;const t=new Dt(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,pt.exists(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}};S([F("beans")],Aw.prototype,"beans",2);Aw=S([$e("flattenStage")],Aw);var rv=class extends Ae{sort(e,t,r,n,i,s){const o=this.gos.get("groupMaintainOrder"),a=this.columnModel.getAllGridColumns().some(p=>p.isRowGroupActive());let l={};r&&n&&(l=this.calculateDirtyNodes(n));const c=this.columnModel.isPivotMode(),u=this.gos.getCallback("postSortRows"),d=p=>{var f;this.pullDownGroupDataForHideOpenParents(p.childrenAfterAggFilter,!0);const m=c&&p.leafGroup;if(o&&a&&!p.leafGroup&&!s){const C=(f=this.columnModel.getRowGroupColumns())==null?void 0:f[p.level+1],w=(C==null?void 0:C.getSort())===null,b=p.childrenAfterAggFilter.slice(0);if(p.childrenAfterSort&&!w){const x={};p.childrenAfterSort.forEach((E,I)=>{x[E.id]=I}),b.sort((E,I)=>{var k,P;return((k=x[E.id])!=null?k:0)-((P=x[I.id])!=null?P:0)})}p.childrenAfterSort=b}else!t||m?p.childrenAfterSort=p.childrenAfterAggFilter.slice(0):r?p.childrenAfterSort=this.doDeltaSort(p,l,i,e):p.childrenAfterSort=this.rowNodeSorter.doFullSort(p.childrenAfterAggFilter,e);if(p.sibling&&(p.sibling.childrenAfterSort=p.childrenAfterSort),this.updateChildIndexes(p),u){const C={nodes:p.childrenAfterSort};u(C)}};i&&i.forEachChangedNodeDepthFirst(d),this.updateGroupDataForHideOpenParents(i)}calculateDirtyNodes(e){const t={},r=n=>{n&&n.forEach(i=>t[i.id]=!0)};return e&&e.forEach(n=>{r(n.add),r(n.update),r(n.remove)}),t}doDeltaSort(e,t,r,n){const i=e.childrenAfterAggFilter,s=e.childrenAfterSort;if(!s)return this.rowNodeSorter.doFullSort(i,n);const o={},a=[];i.forEach(d=>{t[d.id]||!r.canSkip(d)?a.push(d):o[d.id]=!0});const l=s.filter(d=>o[d.id]),c=(d,p)=>({currentPos:p,rowNode:d}),u=a.map(c).sort((d,p)=>this.rowNodeSorter.compareRowNodes(n,d,p));return this.mergeSortedArrays(n,u,l.map(c)).map(({rowNode:d})=>d)}mergeSortedArrays(e,t,r){const n=[];let i=0,s=0;for(;i<t.length&&s<r.length;)this.rowNodeSorter.compareRowNodes(e,t[i],r[s])<0?n.push(t[i++]):n.push(r[s++]);for(;i<t.length;)n.push(t[i++]);for(;s<r.length;)n.push(r[s++]);return n}updateChildIndexes(e){if(pt.missing(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let r=0;r<t.length;r++){const n=t[r],i=r===0,s=r===e.childrenAfterSort.length-1;n.setFirstChild(i),n.setLastChild(s),n.setChildIndex(r)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return pt.warnOnce("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const t=r=>{this.pullDownGroupDataForHideOpenParents(r.childrenAfterSort,!1),r.childrenAfterSort.forEach(n=>{n.hasChildren()&&t(n)})};e&&e.executeFromRootNode(r=>t(r))}pullDownGroupDataForHideOpenParents(e,t){!this.gos.get("groupHideOpenParents")||pt.missing(e)||e.forEach(r=>{this.columnModel.getGroupDisplayColumns().forEach(i=>{const s=i.getColDef().showRowGroup;if(typeof s!="string"){console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}const o=s,a=this.columnModel.getPrimaryColumn(o);if(a!==r.rowGroupColumn)if(t)r.setGroupValue(i.getId(),void 0);else{const c=r.getFirstChildOfFirstChild(a);c&&r.setGroupValue(i.getId(),c.key)}})})}};S([F("columnModel")],rv.prototype,"columnModel",2);S([F("rowNodeSorter")],rv.prototype,"rowNodeSorter",2);rv=S([$e("sortService")],rv);var _w=class extends Ae{filter(e){const t=this.filterManager.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){const r=(n,i)=>{n.hasChildren()&&e&&!i?n.childrenAfterFilter=n.childrenAfterGroup.filter(s=>{const o=s.childrenAfterFilter&&s.childrenAfterFilter.length>0,a=s.data&&this.filterManager.doesRowPassFilter({rowNode:s});return o||a}):n.childrenAfterFilter=n.childrenAfterGroup,n.sibling&&(n.sibling.childrenAfterFilter=n.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const n=(s,o)=>{if(s.childrenAfterGroup)for(let a=0;a<s.childrenAfterGroup.length;a++){const l=s.childrenAfterGroup[a],c=o||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?n(s.childrenAfterGroup[a],c):r(l,c)}r(s,o)},i=s=>n(s,!1);t.executeFromRootNode(i)}else{const n=i=>r(i,!1);t.forEachChangedNodeDepthFirst(n,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}};S([F("filterManager")],_w.prototype,"filterManager",2);_w=S([$e("filterService")],_w);var $d=class extends Ae{postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){const e=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:e}setRowData(e){const t=this.createTransactionForRowData(e);if(!t)return;const[r,n]=t;this.clientSideRowModel.updateRowData(r,n)}createTransactionForRowData(e){if(pt.missing(this.clientSideRowModel)){console.error("AG Grid: ImmutableService only works with ClientSideRowModel");return}const t=this.gos.getCallback("getRowId");if(t==null){console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}const r={remove:[],update:[],add:[]},n=this.clientSideRowModel.getCopyOfNodesMap(),s=this.gos.get("suppressMaintainUnsortedOrder")?void 0:{};return pt.exists(e)&&e.forEach((o,a)=>{const l=t({data:o,level:0}),c=n[l];s&&(s[l]=a),c?(c.data!==o&&r.update.push(o),n[l]=void 0):r.add.push(o)}),pt.iterateObject(n,(o,a)=>{a&&r.remove.push(a.data)}),[r,s]}onRowDataUpdated(){const e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}};S([F("rowModel")],$d.prototype,"rowModel",2);S([F("rowRenderer")],$d.prototype,"rowRenderer",2);S([F("selectionService")],$d.prototype,"selectionService",2);S([_e],$d.prototype,"postConstruct",1);$d=S([$e("immutableService")],$d);var oee="31.3.4",aee={version:oee,moduleName:"@ag-grid-community/client-side-row-model",rowModel:"clientSide",beans:[Pi,Tw,tv,Aw,rv,_w,$d]},lee=Object.defineProperty,cee=Object.getOwnPropertyDescriptor,Oi=(e,t,r,n)=>{for(var i=n>1?void 0:n?cee(t,r):t,s=e.length-1,o;s>=0;s--)(o=e[s])&&(i=(n?o(t,r,i):o(i))||i);return n&&i&&lee(t,r,i),i},uee=(e,t)=>(r,n)=>t(r,n,e),nv=class extends jT{constructor(e,t,r){super(e),this.parentCache=t,this.params=r,this.startRow=e*r.blockSize,this.endRow=this.startRow+r.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,r){pt.exists(t)?e.setDataAndId(t,r.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(pt.missing(this.params.datasource.getRows)){console.warn("AG Grid: datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,r){this.rowNodes.forEach((n,i)=>{this.startRow+i<r&&e(n,t.next())})}getLastAccessed(){return this.lastAccessed}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());const r=e-this.startRow;return this.rowNodes[r]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){const t=this.startRow+e,r=new Dt(this.beans);r.setRowHeight(this.params.rowHeight),r.uiLevel=0,r.setRowIndex(t),r.setRowTop(this.params.rowHeight*t),this.rowNodes.push(r)}}processServerResult(e){this.rowNodes.forEach((r,n)=>{const i=e.rowData?e.rowData[n]:void 0;!r.id&&r.alreadyRendered&&i&&(this.rowNodes[n]=new Dt(this.beans),this.rowNodes[n].setRowIndex(r.rowIndex),this.rowNodes[n].setRowTop(r.rowTop),this.rowNodes[n].setRowHeight(r.rowHeight),r.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[n],i,this.startRow+n)});const t=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroyRowNodes(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()})}};Oi([F("beans")],nv.prototype,"beans",2);Oi([_e],nv.prototype,"postConstruct",1);Oi([Ni],nv.prototype,"destroyRowNodes",1);var If=class aU extends Ae{constructor(t){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=t.initialRowCount,this.params=t}setBeans(t){this.logger=t.create("InfiniteCache")}getRow(t,r=!1){const n=Math.floor(t/this.params.blockSize);let i=this.blocks[n];if(!i){if(r)return;i=this.createBlock(n)}return i.getRow(t)}createBlock(t){const r=this.createBean(new nv(t,this,this.params));return this.blocks[r.getId()]=r,this.blockCount++,this.purgeBlocksIfNeeded(r),this.params.rowNodeBlockLoader.addBlock(r),r}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(r=>r.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroyAllBlocks(){this.getBlocksInOrder().forEach(t=>this.destroyBlock(t))}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(t,r){this.isAlive()&&(this.logger.log(`onPageLoaded: page = ${t.getId()}, lastRow = ${r}`),this.checkRowCount(t,r),this.onCacheUpdated())}purgeBlocksIfNeeded(t){const r=this.getBlocksInOrder().filter(a=>a!=t),n=(a,l)=>l.getLastAccessed()-a.getLastAccessed();r.sort(n);const i=this.params.maxBlocksInCache>0,s=i?this.params.maxBlocksInCache-1:null,o=aU.MAX_EMPTY_BLOCKS_TO_KEEP-1;r.forEach((a,l)=>{const c=a.getState()===nv.STATE_WAITING_TO_LOAD&&l>=o,u=i?l>=s:!1;if(c||u){if(this.isBlockCurrentlyDisplayed(a)||this.isBlockFocused(a))return;this.removeBlockFromCache(a)}})}isBlockFocused(t){const r=this.focusService.getFocusCellToUseAfterRefresh();if(!r||r.rowPinned!=null)return!1;const n=t.getStartRow(),i=t.getEndRow();return r.rowIndex>=n&&r.rowIndex<i}isBlockCurrentlyDisplayed(t){const r=t.getStartRow(),n=t.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(r,n)}removeBlockFromCache(t){t&&this.destroyBlock(t)}checkRowCount(t,r){if(typeof r=="number"&&r>=0)this.rowCount=r,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const i=(t.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<i&&(this.rowCount=i)}}setRowCount(t,r){this.rowCount=t,pt.exists(r)&&(this.lastRowIndexKnown=r),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(t){const r=new $p;this.getBlocksInOrder().forEach(n=>n.forEachNode(t,r,this.rowCount))}getBlocksInOrder(){const t=(n,i)=>n.getId()-i.getId();return pt.getAllValuesInObject(this.blocks).sort(t)}destroyBlock(t){delete this.blocks[t.getId()],this.destroyBean(t),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(t)}onCacheUpdated(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();const t={type:_.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(t)}}destroyAllBlocksPastVirtualRowCount(){const t=[];this.getBlocksInOrder().forEach(r=>{r.getId()*this.params.blockSize>=this.rowCount&&t.push(r)}),t.length>0&&t.forEach(r=>this.destroyBlock(r))}purgeCache(){this.getBlocksInOrder().forEach(t=>this.removeBlockFromCache(t)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(t,r){const n=[];let i=-1,s=!1;const o=new $p;pt.missing(t)&&(s=!0);let a=!1;return this.getBlocksInOrder().forEach(c=>{if(!a){if(s&&i+1!==c.getId()){a=!0;return}i=c.getId(),c.forEachNode(u=>{const d=u===t||u===r;(s||d)&&n.push(u),d&&(s=!s)},o,this.rowCount)}}),a||s?[]:n}};If.MAX_EMPTY_BLOCKS_TO_KEEP=2;Oi([F("rowRenderer")],If.prototype,"rowRenderer",2);Oi([F("focusService")],If.prototype,"focusService",2);Oi([uee(0,Ys("loggerFactory"))],If.prototype,"setBeans",1);Oi([Ni],If.prototype,"destroyAllBlocks",1);var dee=If,Fa=class extends Ae{getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(e,t,r,n){return!1}init(){this.gos.isRowModelType("infinite")&&(this.rowHeight=this.gos.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&pt.warnOnce("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroyDatasource(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedListener(this.eventService,_.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,_.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,_.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this)),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=this.gos.getRowHeightAsNumber(),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()}isSortModelDifferent(){return!pt.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;this.gos.getCallback("getRowId")!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}createModelUpdatedEvent(){return{type:_.EVENT_MODEL_UPDATED,newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1}}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:this.gos.getRowHeightAsNumber(),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new $p},this.infiniteCache=this.createBean(new dee(this.cacheParams)),this.eventService.dispatchEventOnce({type:_.EVENT_ROW_COUNT_READY});const e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}updateRowHeights(){this.forEachNode(t=>{t.setRowHeight(this.rowHeight),t.setRowTop(this.rowHeight*t.rowIndex)});const e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){const e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode(r=>{r.id===e&&(t=r)}),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),r=this.getRowCount()-1;return t>r?r:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};Oi([F("filterManager")],Fa.prototype,"filterManager",2);Oi([F("sortController")],Fa.prototype,"sortController",2);Oi([F("selectionService")],Fa.prototype,"selectionService",2);Oi([F("rowRenderer")],Fa.prototype,"rowRenderer",2);Oi([F("rowNodeBlockLoader")],Fa.prototype,"rowNodeBlockLoader",2);Oi([_e],Fa.prototype,"init",1);Oi([Ni],Fa.prototype,"destroyDatasource",1);Fa=Oi([$e("rowModel")],Fa);var hee="31.3.4",pee={version:hee,moduleName:"@ag-grid-community/infinite-row-model",rowModel:"infinite",beans:[Fa]},fee=Object.defineProperty,gee=Object.getOwnPropertyDescriptor,ls=(e,t,r,n)=>{for(var i=n>1?void 0:n?gee(t,r):t,s=e.length-1,o;s>=0;s--)(o=e[s])&&(i=(n?o(t,r,i):o(i))||i);return n&&i&&fee(t,r,i),i},mee=class{setBeans(e){this.beans=e}getFileName(e){const t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},vee=class{constructor(e){this.groupColumns=[];const{columnModel:t,valueService:r,gos:n,processCellCallback:i,processHeaderCallback:s,processGroupHeaderCallback:o,processRowGroupCallback:a}=e;this.columnModel=t,this.valueService=r,this.gos=n,this.processCellCallback=i,this.processHeaderCallback=s,this.processGroupHeaderCallback=o,this.processRowGroupCallback=a}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){const t=this.getHeaderName(this.processHeaderCallback,e);return t??""}extractRowCellValue(e,t,r,n,i){const o=(!this.gos.get("groupHideOpenParents")||i.footer)&&this.shouldRenderGroupSummaryCell(i,e,t)?this.createValueForGroupNode(e,i):this.valueService.getValue(e,i);return this.processCell({accumulatedRowIndex:r,rowNode:i,column:e,value:o,processCellCallback:this.processCellCallback,type:n})}shouldRenderGroupSummaryCell(e,t,r){var n;if(!(e&&e.group))return!1;if(this.groupColumns.indexOf(t)!==-1){if(((n=e.groupData)==null?void 0:n[t.getId()])!=null||this.gos.isRowModelType("serverSide")&&e.group)return!0;if(e.footer&&e.level===-1){const a=t.getColDef();return a==null||a.showRowGroup===!0||a.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}const o=this.gos.isGroupUseEntireRow(this.columnModel.isPivotMode());return r===0&&o}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnModel.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));const r=this.gos.get("treeData"),n=this.gos.get("suppressGroupMaintainValueType"),i=l=>{var c,u;if(r||n)return l.key;const d=(c=l.groupData)==null?void 0:c[e.getId()];return!d||!l.rowGroupColumn||l.rowGroupColumn.getColDef().useValueFormatterForExport===!1?d:(u=this.valueService.formatValue(l.rowGroupColumn,l,d))!=null?u:d},s=t.footer,o=[i(t)];if(!this.gos.isGroupMultiAutoColumn())for(;t.parent;)t=t.parent,o.push(i(t));const a=o.reverse().join(" -> ");return s?`Total ${a}`:a}processCell(e){var t;const{accumulatedRowIndex:r,rowNode:n,column:i,value:s,processCellCallback:o,type:a}=e;return o?{value:(t=o(this.gos.addGridCommonParams({accumulatedRowIndex:r,column:i,node:n,value:s,type:a,parseValue:l=>this.valueService.parseValue(i,n,l,this.valueService.getValue(i,n)),formatValue:l=>{var c;return(c=this.valueService.formatValue(i,n,l))!=null?c:l}})))!=null?t:""}:i.getColDef().useValueFormatterForExport!==!1?{value:s??"",valueFormatted:this.valueService.formatValue(i,n,s)}:{value:s??""}}},yee=class{static download(e,t){const r=document.defaultView||window;if(!r){console.warn("AG Grid: There is no `window` associated with the current `document`");return}const n=document.createElement("a"),i=r.URL.createObjectURL(t);n.setAttribute("href",i),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:r})),document.body.removeChild(n),r.setTimeout(()=>{r.URL.revokeObjectURL(i)},0)}},HO=`\r
`,Cee=class extends vee{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:r}=e;this.suppressQuotes=t,this.columnSeparator=r}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,HO),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((r,n)=>{n!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(r.data.value||""),r.mergeAcross&&this.appendEmptyCells(r.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,r,n){r!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(n)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,r){var n;t!=0&&(this.result+=this.columnSeparator);const i=this.extractRowCellValue(e,t,t,"csv",r);this.result+=this.putInQuotes((n=i.valueFormatted)!=null?n:i.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(console.warn("AG Grid: unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=HO),this.isFirstLine=!1}},nu=class extends mee{postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration.");return}const t=this.getMergedParams(e),r=this.getData(t),n=new Blob(["\uFEFF",r],{type:"text/plain"}),i=typeof t.fileName=="function"?t.fileName(this.gos.getGridCommonParams()):t.fileName;yee.download(this.getFileName(i),n)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const r=t?Object.assign({},e):this.getMergedParams(e);return this.getData(r)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{columnModel:t,valueService:r,gos:n}=this,{processCellCallback:i,processHeaderCallback:s,processGroupHeaderCallback:o,processRowGroupCallback:a,suppressQuotes:l,columnSeparator:c}=e;return new Cee({columnModel:t,valueService:r,gos:n,processCellCallback:i||void 0,processHeaderCallback:s||void 0,processGroupHeaderCallback:o||void 0,processRowGroupCallback:a||void 0,suppressQuotes:l||!1,columnSeparator:c||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};ls([F("columnModel")],nu.prototype,"columnModel",2);ls([F("valueService")],nu.prototype,"valueService",2);ls([F("gridSerializer")],nu.prototype,"gridSerializer",2);ls([F("gridOptionsService")],nu.prototype,"gos",2);ls([_e],nu.prototype,"postConstruct",1);nu=ls([$e("csvCreator")],nu);var La=class extends Ae{serialize(e,t={}){const{allColumns:r,columnKeys:n,skipRowGroups:i}=t,s=this.getColumnsToExport(r,i,n);return pt.compose(this.prepareSession(s),this.prependContent(t),this.exportColumnGroups(t,s),this.exportHeaders(t,s),this.processPinnedTopRows(t,s),this.processRows(t,s),this.processPinnedBottomRows(t,s),this.appendContent(t))(e).parse()}processRow(e,t,r,n){const i=t.shouldRowBeSkipped||(()=>!1),s=this.gos.get("groupRemoveSingleChildren"),o=this.gos.get("groupRemoveLowestSingleChildren"),l=t.rowPositions!=null||!!t.onlySelected,c=this.gos.get("groupHideOpenParents")&&!l,u=this.columnModel.isPivotMode()?n.leafGroup:!n.group,d=!!n.footer;t.skipRowGroups;const p=o&&n.leafGroup,f=n.allChildrenCount===1&&(s||p);if(!u&&!d&&(t.skipRowGroups||f||c)||t.onlySelected&&!n.isSelected()||t.skipPinnedTop&&n.rowPinned==="top"||t.skipPinnedBottom&&n.rowPinned==="bottom"||n.level===-1&&!u&&!d||i(this.gos.addGridCommonParams({node:n})))return;const C=e.onNewBodyRow(n);if(r.forEach((w,b)=>{C.onColumn(w,b,n)}),t.getCustomContentBelowRow){const w=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:n}));w&&e.addCustomContent(w)}}appendContent(e){return t=>{const r=e.appendContent;return r&&t.addCustomContent(r),t}}prependContent(e){return t=>{const r=e.prependContent;return r&&t.addCustomContent(r),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return r=>{if(!e.skipColumnGroupHeaders){const n=new X4,i=this.displayedGroupCreator.createDisplayedGroups(t,n,null);this.recursivelyAddHeaderGroups(i,r,e.processGroupHeaderCallback)}return r}}exportHeaders(e,t){return r=>{if(!e.skipColumnHeaders){const n=r.onNewHeaderRow();t.forEach((i,s)=>{n.onColumn(i,s,void 0)})}return r}}processPinnedTopRows(e,t){return r=>{const n=this.processRow.bind(this,r,e,t);return e.rowPositions?e.rowPositions.filter(i=>i.rowPinned==="top").sort((i,s)=>i.rowIndex-s.rowIndex).map(i=>this.pinnedRowModel.getPinnedTopRow(i.rowIndex)).forEach(n):this.pinnedRowModel.forEachPinnedTopRow(n),r}}processRows(e,t){return r=>{const n=this.rowModel,i=n.getType(),s=i==="clientSide",o=i==="serverSide",a=!s&&e.onlySelected,l=this.processRow.bind(this,r,e,t),{exportedRows:c="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(u=>u.rowPinned==null).sort((u,d)=>u.rowIndex-d.rowIndex).map(u=>n.getRow(u.rowIndex)).forEach(l);else if(this.columnModel.isPivotMode())s?n.forEachPivotNode(l,!0):o?n.forEachNodeAfterFilterAndSort(l,!0):n.forEachNode(l);else if(e.onlySelectedAllPages||a){const u=this.selectionService.getSelectedNodes();this.replicateSortedOrder(u),u.forEach(l)}else c==="all"?n.forEachNode(l):s||o?n.forEachNodeAfterFilterAndSort(l,!0):n.forEachNode(l);return r}}replicateSortedOrder(e){const t=this.sortController.getSortOptions(),r=(n,i)=>{var s,o,a,l;return n.rowIndex!=null&&i.rowIndex!=null?n.rowIndex-i.rowIndex:n.level===i.level?((s=n.parent)==null?void 0:s.id)===((o=i.parent)==null?void 0:o.id)?this.rowNodeSorter.compareRowNodes(t,{rowNode:n,currentPos:(a=n.rowIndex)!=null?a:-1},{rowNode:i,currentPos:(l=i.rowIndex)!=null?l:-1}):r(n.parent,i.parent):n.level>i.level?r(n.parent,i):r(n,i.parent)};e.sort(r)}processPinnedBottomRows(e,t){return r=>{const n=this.processRow.bind(this,r,e,t);return e.rowPositions?e.rowPositions.filter(i=>i.rowPinned==="bottom").sort((i,s)=>i.rowIndex-s.rowIndex).map(i=>this.pinnedRowModel.getPinnedBottomRow(i.rowIndex)).forEach(n):this.pinnedRowModel.forEachPinnedBottomRow(n),r}}getColumnsToExport(e=!1,t=!1,r){const n=this.columnModel.isPivotMode();if(r&&r.length)return this.columnModel.getGridColumns(r);const i=this.gos.get("treeData");let s=[];return e&&!n?s=this.columnModel.getAllGridColumns():s=this.columnModel.getAllDisplayedColumns(),t&&!i&&(s=s.filter(o=>o.getColId()!==Bp)),s}recursivelyAddHeaderGroups(e,t,r){const n=[];e.forEach(i=>{const s=i;s.getChildren&&s.getChildren().forEach(o=>n.push(o))}),e.length>0&&e[0]instanceof wn&&this.doAddHeaderHeader(t,e,r),n&&n.length>0&&this.recursivelyAddHeaderGroups(n,t,r)}doAddHeaderHeader(e,t,r){const n=e.onNewHeaderGroupingRow();let i=0;t.forEach(s=>{const o=s;let a;r?a=r(this.gos.addGridCommonParams({columnGroup:o})):a=this.columnModel.getDisplayNameForColumnGroup(o,"header");const l=o.getLeafColumns().reduce((c,u,d,p)=>{let f=pt.last(c);return u.getColumnGroupShow()==="open"?(!f||f[1]!=null)&&(f=[d],c.push(f)):f&&f[1]==null&&(f[1]=d-1),d===p.length-1&&f&&f[1]==null&&(f[1]=d),c},[]);n.onColumn(o,a||"",i++,o.getLeafColumns().length-1,l)})}};ls([F("displayedGroupCreator")],La.prototype,"displayedGroupCreator",2);ls([F("columnModel")],La.prototype,"columnModel",2);ls([F("rowModel")],La.prototype,"rowModel",2);ls([F("pinnedRowModel")],La.prototype,"pinnedRowModel",2);ls([F("selectionService")],La.prototype,"selectionService",2);ls([F("rowNodeSorter")],La.prototype,"rowNodeSorter",2);ls([F("sortController")],La.prototype,"sortController",2);La=ls([$e("gridSerializer")],La);var wee="31.3.4",bee={version:wee,moduleName:"@ag-grid-community/csv-export",beans:[nu,La]},{utf8_encode:EIe}=pt;Yt.__registerModules([aee,pee,bee],!1,void 0);var Nf={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lU=v;function Mt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vi=Object.prototype.hasOwnProperty,See=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zO={},$O={};function cU(e){return Vi.call($O,e)?!0:Vi.call(zO,e)?!1:See.test(e)?$O[e]=!0:(zO[e]=!0,!1)}function Fi(e,t,r,n,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qn[e]=new Fi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qn[t]=new Fi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qn[e]=new Fi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qn[e]=new Fi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qn[e]=new Fi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qn[e]=new Fi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qn[e]=new Fi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qn[e]=new Fi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qn[e]=new Fi(e,5,!1,e.toLowerCase(),null,!1,!1)});var kk=/[\-:]([a-z])/g;function Ik(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(kk,Ik);qn[t]=new Fi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(kk,Ik);qn[t]=new Fi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(kk,Ik);qn[t]=new Fi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qn[e]=new Fi(e,1,!1,e.toLowerCase(),null,!1,!1)});qn.xlinkHref=new Fi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qn[e]=new Fi(e,1,!1,e.toLowerCase(),null,!0,!0)});var p0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xee=["Webkit","ms","Moz","O"];Object.keys(p0).forEach(function(e){xee.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),p0[t]=p0[e]})});var Eee=/["'&<>]/;function wi(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=Eee.exec(e);if(t){var r="",n,i=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}i!==n&&(r+=e.substring(i,n)),i=n+1,r+=t}e=i!==n?r+e.substring(i,n):r}return e}var Pee=/([A-Z])/g,Ree=/^ms-/,qT=Array.isArray;function Ya(e,t){return{insertionMode:e,selectedValue:t}}function Tee(e,t,r){switch(t){case"select":return Ya(1,r.value!=null?r.value:r.defaultValue);case"svg":return Ya(2,null);case"math":return Ya(3,null);case"foreignObject":return Ya(1,null);case"table":return Ya(4,null);case"thead":case"tbody":case"tfoot":return Ya(5,null);case"colgroup":return Ya(7,null);case"tr":return Ya(6,null)}return 4<=e.insertionMode||e.insertionMode===0?Ya(1,null):e}var UO=new Map;function uU(e,t,r){if(typeof r!="object")throw Error(Mt(62));t=!0;for(var n in r)if(Vi.call(r,n)){var i=r[n];if(i!=null&&typeof i!="boolean"&&i!==""){if(n.indexOf("--")===0){var s=wi(n);i=wi((""+i).trim())}else{s=n;var o=UO.get(s);o!==void 0||(o=wi(s.replace(Pee,"-$1").toLowerCase().replace(Ree,"-ms-")),UO.set(s,o)),s=o,i=typeof i=="number"?i===0||Vi.call(p0,n)?""+i:i+"px":wi((""+i).trim())}t?(t=!1,e.push(' style="',s,":",i)):e.push(";",s,":",i)}}t||e.push('"')}function ps(e,t,r,n){switch(r){case"style":uU(e,t,n);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N"){if(t=qn.hasOwnProperty(r)?qn[r]:null,t!==null){switch(typeof n){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(r=t.attributeName,t.type){case 3:n&&e.push(" ",r,'=""');break;case 4:n===!0?e.push(" ",r,'=""'):n!==!1&&e.push(" ",r,'="',wi(n),'"');break;case 5:isNaN(n)||e.push(" ",r,'="',wi(n),'"');break;case 6:!isNaN(n)&&1<=n&&e.push(" ",r,'="',wi(n),'"');break;default:t.sanitizeURL&&(n=""+n),e.push(" ",r,'="',wi(n),'"')}}else if(cU(r)){switch(typeof n){case"function":case"symbol":return;case"boolean":if(t=r.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(" ",r,'="',wi(n),'"')}}}function f0(e,t,r){if(t!=null){if(r!=null)throw Error(Mt(60));if(typeof t!="object"||!("__html"in t))throw Error(Mt(61));t=t.__html,t!=null&&e.push(""+t)}}function Aee(e){var t="";return lU.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function PP(e,t,r,n){e.push(ua(r));var i=r=null,s;for(s in t)if(Vi.call(t,s)){var o=t[s];if(o!=null)switch(s){case"children":r=o;break;case"dangerouslySetInnerHTML":i=o;break;default:ps(e,n,s,o)}}return e.push(">"),f0(e,i,r),typeof r=="string"?(e.push(wi(r)),null):r}var _ee=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,WO=new Map;function ua(e){var t=WO.get(e);if(t===void 0){if(!_ee.test(e))throw Error(Mt(65,e));t="<"+e,WO.set(e,t)}return t}function Dee(e,t,r,n,i){switch(t){case"select":e.push(ua("select"));var s=null,o=null;for(u in r)if(Vi.call(r,u)){var a=r[u];if(a!=null)switch(u){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"defaultValue":case"value":break;default:ps(e,n,u,a)}}return e.push(">"),f0(e,o,s),s;case"option":o=i.selectedValue,e.push(ua("option"));var l=a=null,c=null,u=null;for(s in r)if(Vi.call(r,s)){var d=r[s];if(d!=null)switch(s){case"children":a=d;break;case"selected":c=d;break;case"dangerouslySetInnerHTML":u=d;break;case"value":l=d;default:ps(e,n,s,d)}}if(o!=null)if(r=l!==null?""+l:Aee(a),qT(o)){for(n=0;n<o.length;n++)if(""+o[n]===r){e.push(' selected=""');break}}else""+o===r&&e.push(' selected=""');else c&&e.push(' selected=""');return e.push(">"),f0(e,u,a),a;case"textarea":e.push(ua("textarea")),u=o=s=null;for(a in r)if(Vi.call(r,a)&&(l=r[a],l!=null))switch(a){case"children":u=l;break;case"value":s=l;break;case"defaultValue":o=l;break;case"dangerouslySetInnerHTML":throw Error(Mt(91));default:ps(e,n,a,l)}if(s===null&&o!==null&&(s=o),e.push(">"),u!=null){if(s!=null)throw Error(Mt(92));if(qT(u)&&1<u.length)throw Error(Mt(93));s=""+u}return typeof s=="string"&&s[0]===`
`&&e.push(`
`),s!==null&&e.push(wi(""+s)),null;case"input":e.push(ua("input")),l=u=a=s=null;for(o in r)if(Vi.call(r,o)&&(c=r[o],c!=null))switch(o){case"children":case"dangerouslySetInnerHTML":throw Error(Mt(399,"input"));case"defaultChecked":l=c;break;case"defaultValue":a=c;break;case"checked":u=c;break;case"value":s=c;break;default:ps(e,n,o,c)}return u!==null?ps(e,n,"checked",u):l!==null&&ps(e,n,"checked",l),s!==null?ps(e,n,"value",s):a!==null&&ps(e,n,"value",a),e.push("/>"),null;case"menuitem":e.push(ua("menuitem"));for(var p in r)if(Vi.call(r,p)&&(s=r[p],s!=null))switch(p){case"children":case"dangerouslySetInnerHTML":throw Error(Mt(400));default:ps(e,n,p,s)}return e.push(">"),null;case"title":e.push(ua("title")),s=null;for(d in r)if(Vi.call(r,d)&&(o=r[d],o!=null))switch(d){case"children":s=o;break;case"dangerouslySetInnerHTML":throw Error(Mt(434));default:ps(e,n,d,o)}return e.push(">"),s;case"listing":case"pre":e.push(ua(t)),o=s=null;for(l in r)if(Vi.call(r,l)&&(a=r[l],a!=null))switch(l){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;default:ps(e,n,l,a)}if(e.push(">"),o!=null){if(s!=null)throw Error(Mt(60));if(typeof o!="object"||!("__html"in o))throw Error(Mt(61));r=o.__html,r!=null&&(typeof r=="string"&&0<r.length&&r[0]===`
`?e.push(`
`,r):e.push(""+r))}return typeof s=="string"&&s[0]===`
`&&e.push(`
`),s;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(ua(t));for(var f in r)if(Vi.call(r,f)&&(s=r[f],s!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(Mt(399,t));default:ps(e,n,f,s)}return e.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return PP(e,r,t,n);case"html":return i.insertionMode===0&&e.push("<!DOCTYPE html>"),PP(e,r,t,n);default:if(t.indexOf("-")===-1&&typeof r.is!="string")return PP(e,r,t,n);e.push(ua(t)),o=s=null;for(c in r)if(Vi.call(r,c)&&(a=r[c],a!=null))switch(c){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"style":uU(e,n,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:cU(c)&&typeof a!="function"&&typeof a!="symbol"&&e.push(" ",c,'="',wi(a),'"')}return e.push(">"),f0(e,o,s),s}}function KO(e,t,r){if(e.push('<!--$?--><template id="'),r===null)throw Error(Mt(395));return e.push(r),e.push('"></template>')}function kee(e,t,r,n){switch(r.insertionMode){case 0:case 1:return e.push('<div hidden id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');case 2:return e.push('<svg aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');case 3:return e.push('<math aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');case 4:return e.push('<table hidden id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');case 5:return e.push('<table hidden><tbody id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');case 6:return e.push('<table hidden><tr id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');case 7:return e.push('<table hidden><colgroup id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');default:throw Error(Mt(397))}}function Iee(e,t){switch(t.insertionMode){case 0:case 1:return e.push("</div>");case 2:return e.push("</svg>");case 3:return e.push("</math>");case 4:return e.push("</table>");case 5:return e.push("</tbody></table>");case 6:return e.push("</tr></table>");case 7:return e.push("</colgroup></table>");default:throw Error(Mt(397))}}var Nee=/[<\u2028\u2029]/g;function RP(e){return JSON.stringify(e).replace(Nee,function(t){switch(t){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function Mee(e,t){return t=t===void 0?"":t,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:t+"P:",segmentPrefix:t+"S:",boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:e}}function qO(e,t,r,n){return r.generateStaticMarkup?(e.push(wi(t)),!1):(t===""?e=n:(n&&e.push("<!-- -->"),e.push(wi(t)),e=!0),e)}var om=Object.assign,Oee=Symbol.for("react.element"),dU=Symbol.for("react.portal"),hU=Symbol.for("react.fragment"),pU=Symbol.for("react.strict_mode"),fU=Symbol.for("react.profiler"),gU=Symbol.for("react.provider"),mU=Symbol.for("react.context"),vU=Symbol.for("react.forward_ref"),yU=Symbol.for("react.suspense"),CU=Symbol.for("react.suspense_list"),wU=Symbol.for("react.memo"),Nk=Symbol.for("react.lazy"),Fee=Symbol.for("react.scope"),Lee=Symbol.for("react.debug_trace_mode"),Gee=Symbol.for("react.legacy_hidden"),jee=Symbol.for("react.default_value"),YO=Symbol.iterator;function YT(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hU:return"Fragment";case dU:return"Portal";case fU:return"Profiler";case pU:return"StrictMode";case yU:return"Suspense";case CU:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case mU:return(e.displayName||"Context")+".Consumer";case gU:return(e._context.displayName||"Context")+".Provider";case vU:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wU:return t=e.displayName||null,t!==null?t:YT(e.type)||"Memo";case Nk:t=e._payload,e=e._init;try{return YT(e(t))}catch{}}return null}var bU={};function QO(e,t){if(e=e.contextTypes,!e)return bU;var r={},n;for(n in e)r[n]=t[n];return r}var rd=null;function sx(e,t){if(e!==t){e.context._currentValue2=e.parentValue,e=e.parent;var r=t.parent;if(e===null){if(r!==null)throw Error(Mt(401))}else{if(r===null)throw Error(Mt(401));sx(e,r)}t.context._currentValue2=t.value}}function SU(e){e.context._currentValue2=e.parentValue,e=e.parent,e!==null&&SU(e)}function xU(e){var t=e.parent;t!==null&&xU(t),e.context._currentValue2=e.value}function EU(e,t){if(e.context._currentValue2=e.parentValue,e=e.parent,e===null)throw Error(Mt(402));e.depth===t.depth?sx(e,t):EU(e,t)}function PU(e,t){var r=t.parent;if(r===null)throw Error(Mt(402));e.depth===r.depth?sx(e,r):PU(e,r),t.context._currentValue2=t.value}function Dw(e){var t=rd;t!==e&&(t===null?xU(e):e===null?SU(t):t.depth===e.depth?sx(t,e):t.depth>e.depth?EU(t,e):PU(t,e),rd=e)}var XO={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function ZO(e,t,r,n){var i=e.state!==void 0?e.state:null;e.updater=XO,e.props=r,e.state=i;var s={queue:[],replace:!1};e._reactInternals=s;var o=t.contextType;if(e.context=typeof o=="object"&&o!==null?o._currentValue2:n,o=t.getDerivedStateFromProps,typeof o=="function"&&(o=o(r,i),i=o==null?i:om({},i,o),e.state=i),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&XO.enqueueReplaceState(e,e.state,null),s.queue!==null&&0<s.queue.length)if(t=s.queue,o=s.replace,s.queue=null,s.replace=!1,o&&t.length===1)e.state=t[0];else{for(s=o?t[0]:e.state,i=!0,o=o?1:0;o<t.length;o++){var a=t[o];a=typeof a=="function"?a.call(e,s,r,n):a,a!=null&&(i?(i=!1,s=om({},s,a)):om(s,a))}e.state=s}else s.queue=null}var Bee={id:1,overflow:""};function QT(e,t,r){var n=e.id;e=e.overflow;var i=32-g0(n)-1;n&=~(1<<i),r+=1;var s=32-g0(t)+i;if(30<s){var o=i-i%5;return s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,{id:1<<32-g0(t)+i|r<<i|n,overflow:s+e}}return{id:1<<s|r<<i|n,overflow:e}}var g0=Math.clz32?Math.clz32:zee,Vee=Math.log,Hee=Math.LN2;function zee(e){return e>>>=0,e===0?32:31-(Vee(e)/Hee|0)|0}function $ee(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Uee=typeof Object.is=="function"?Object.is:$ee,El=null,Mk=null,m0=null,Cr=null,Lg=!1,kw=!1,iv=0,Ic=null,ox=0;function Wu(){if(El===null)throw Error(Mt(321));return El}function JO(){if(0<ox)throw Error(Mt(312));return{memoizedState:null,queue:null,next:null}}function Ok(){return Cr===null?m0===null?(Lg=!1,m0=Cr=JO()):(Lg=!0,Cr=m0):Cr.next===null?(Lg=!1,Cr=Cr.next=JO()):(Lg=!0,Cr=Cr.next),Cr}function Fk(){Mk=El=null,kw=!1,m0=null,ox=0,Cr=Ic=null}function RU(e,t){return typeof t=="function"?t(e):t}function eF(e,t,r){if(El=Wu(),Cr=Ok(),Lg){var n=Cr.queue;if(t=n.dispatch,Ic!==null&&(r=Ic.get(n),r!==void 0)){Ic.delete(n),n=Cr.memoizedState;do n=e(n,r.action),r=r.next;while(r!==null);return Cr.memoizedState=n,[n,t]}return[Cr.memoizedState,t]}return e=e===RU?typeof t=="function"?t():t:r!==void 0?r(t):t,Cr.memoizedState=e,e=Cr.queue={last:null,dispatch:null},e=e.dispatch=Wee.bind(null,El,e),[Cr.memoizedState,e]}function tF(e,t){if(El=Wu(),Cr=Ok(),t=t===void 0?null:t,Cr!==null){var r=Cr.memoizedState;if(r!==null&&t!==null){var n=r[1];e:if(n===null)n=!1;else{for(var i=0;i<n.length&&i<t.length;i++)if(!Uee(t[i],n[i])){n=!1;break e}n=!0}if(n)return r[0]}}return e=e(),Cr.memoizedState=[e,t],e}function Wee(e,t,r){if(25<=ox)throw Error(Mt(301));if(e===El)if(kw=!0,e={action:r,next:null},Ic===null&&(Ic=new Map),r=Ic.get(t),r===void 0)Ic.set(t,e);else{for(t=r;t.next!==null;)t=t.next;t.next=e}}function Kee(){throw Error(Mt(394))}function xC(){}var rF={readContext:function(e){return e._currentValue2},useContext:function(e){return Wu(),e._currentValue2},useMemo:tF,useReducer:eF,useRef:function(e){El=Wu(),Cr=Ok();var t=Cr.memoizedState;return t===null?(e={current:e},Cr.memoizedState=e):t},useState:function(e){return eF(RU,e)},useInsertionEffect:xC,useLayoutEffect:function(){},useCallback:function(e,t){return tF(function(){return e},t)},useImperativeHandle:xC,useEffect:xC,useDebugValue:xC,useDeferredValue:function(e){return Wu(),e},useTransition:function(){return Wu(),[!1,Kee]},useId:function(){var e=Mk.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-g0(e)-1)).toString(32)+t;var r=v0;if(r===null)throw Error(Mt(404));return t=iv++,e=":"+r.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return Wu(),t(e._source)},useSyncExternalStore:function(e,t,r){if(r===void 0)throw Error(Mt(407));return r()}},v0=null,TP=lU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function qee(e){return console.error(e),null}function Gg(){}function Yee(e,t,r,n,i,s,o,a,l){var c=[],u=new Set;return t={destination:null,responseState:t,progressiveChunkSize:n===void 0?12800:n,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:c,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?qee:i,onAllReady:Gg,onShellReady:o===void 0?Gg:o,onShellError:Gg,onFatalError:Gg},r=Iw(t,0,null,r,!1,!1),r.parentFlushed=!0,e=Lk(t,e,null,r,u,bU,null,Bee),c.push(e),t}function Lk(e,t,r,n,i,s,o,a){e.allPendingTasks++,r===null?e.pendingRootTasks++:r.pendingTasks++;var l={node:t,ping:function(){var c=e.pingedTasks;c.push(l),c.length===1&&_U(e)},blockedBoundary:r,blockedSegment:n,abortSet:i,legacyContext:s,context:o,treeContext:a};return i.add(l),l}function Iw(e,t,r,n,i,s){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:n,boundary:r,lastPushedText:i,textEmbedded:s}}function sv(e,t){if(e=e.onError(t),e!=null&&typeof e!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function Nw(e,t){var r=e.onShellError;r(t),r=e.onFatalError,r(t),e.destination!==null?(e.status=2,e.destination.destroy(t)):(e.status=1,e.fatalError=t)}function nF(e,t,r,n,i){for(El={},Mk=t,iv=0,e=r(n,i);kw;)kw=!1,iv=0,ox+=1,Cr=null,e=r(n,i);return Fk(),e}function iF(e,t,r,n){var i=r.render(),s=n.childContextTypes;if(s!=null){var o=t.legacyContext;if(typeof r.getChildContext!="function")n=o;else{r=r.getChildContext();for(var a in r)if(!(a in s))throw Error(Mt(108,YT(n)||"Unknown",a));n=om({},o,r)}t.legacyContext=n,ms(e,t,i),t.legacyContext=o}else ms(e,t,i)}function sF(e,t){if(e&&e.defaultProps){t=om({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function XT(e,t,r,n,i){if(typeof r=="function")if(r.prototype&&r.prototype.isReactComponent){i=QO(r,t.legacyContext);var s=r.contextType;s=new r(n,typeof s=="object"&&s!==null?s._currentValue2:i),ZO(s,r,n,i),iF(e,t,s,r)}else{s=QO(r,t.legacyContext),i=nF(e,t,r,n,s);var o=iv!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)ZO(i,r,n,s),iF(e,t,i,r);else if(o){n=t.treeContext,t.treeContext=QT(n,1,0);try{ms(e,t,i)}finally{t.treeContext=n}}else ms(e,t,i)}else if(typeof r=="string"){switch(i=t.blockedSegment,s=Dee(i.chunks,r,n,e.responseState,i.formatContext),i.lastPushedText=!1,o=i.formatContext,i.formatContext=Tee(o,r,n),ZT(e,t,s),i.formatContext=o,r){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push("</",r,">")}i.lastPushedText=!1}else{switch(r){case Gee:case Lee:case pU:case fU:case hU:ms(e,t,n.children);return;case CU:ms(e,t,n.children);return;case Fee:throw Error(Mt(343));case yU:e:{r=t.blockedBoundary,i=t.blockedSegment,s=n.fallback,n=n.children,o=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:o,errorDigest:null},l=Iw(e,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(l),i.lastPushedText=!1;var c=Iw(e,0,null,i.formatContext,!1,!1);c.parentFlushed=!0,t.blockedBoundary=a,t.blockedSegment=c;try{if(ZT(e,t,n),e.responseState.generateStaticMarkup||c.lastPushedText&&c.textEmbedded&&c.chunks.push("<!-- -->"),c.status=1,Mw(a,c),a.pendingTasks===0)break e}catch(u){c.status=4,a.forceClientRender=!0,a.errorDigest=sv(e,u)}finally{t.blockedBoundary=r,t.blockedSegment=i}t=Lk(e,s,r,l,o,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof r=="object"&&r!==null)switch(r.$$typeof){case vU:if(n=nF(e,t,r.render,n,i),iv!==0){r=t.treeContext,t.treeContext=QT(r,1,0);try{ms(e,t,n)}finally{t.treeContext=r}}else ms(e,t,n);return;case wU:r=r.type,n=sF(r,n),XT(e,t,r,n,i);return;case gU:if(i=n.children,r=r._context,n=n.value,s=r._currentValue2,r._currentValue2=n,o=rd,rd=n={parent:o,depth:o===null?0:o.depth+1,context:r,parentValue:s,value:n},t.context=n,ms(e,t,i),e=rd,e===null)throw Error(Mt(403));n=e.parentValue,e.context._currentValue2=n===jee?e.context._defaultValue:n,e=rd=e.parent,t.context=e;return;case mU:n=n.children,n=n(r._currentValue2),ms(e,t,n);return;case Nk:i=r._init,r=i(r._payload),n=sF(r,n),XT(e,t,r,n,void 0);return}throw Error(Mt(130,r==null?r:typeof r,""))}}function ms(e,t,r){if(t.node=r,typeof r=="object"&&r!==null){switch(r.$$typeof){case Oee:XT(e,t,r.type,r.props,r.ref);return;case dU:throw Error(Mt(257));case Nk:var n=r._init;r=n(r._payload),ms(e,t,r);return}if(qT(r)){oF(e,t,r);return}if(r===null||typeof r!="object"?n=null:(n=YO&&r[YO]||r["@@iterator"],n=typeof n=="function"?n:null),n&&(n=n.call(r))){if(r=n.next(),!r.done){var i=[];do i.push(r.value),r=n.next();while(!r.done);oF(e,t,i)}return}throw e=Object.prototype.toString.call(r),Error(Mt(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}typeof r=="string"?(n=t.blockedSegment,n.lastPushedText=qO(t.blockedSegment.chunks,r,e.responseState,n.lastPushedText)):typeof r=="number"&&(n=t.blockedSegment,n.lastPushedText=qO(t.blockedSegment.chunks,""+r,e.responseState,n.lastPushedText))}function oF(e,t,r){for(var n=r.length,i=0;i<n;i++){var s=t.treeContext;t.treeContext=QT(s,n,i);try{ZT(e,t,r[i])}finally{t.treeContext=s}}}function ZT(e,t,r){var n=t.blockedSegment.formatContext,i=t.legacyContext,s=t.context;try{return ms(e,t,r)}catch(l){if(Fk(),typeof l=="object"&&l!==null&&typeof l.then=="function"){r=l;var o=t.blockedSegment,a=Iw(e,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,e=Lk(e,t.node,t.blockedBoundary,a,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,r.then(e,e),t.blockedSegment.formatContext=n,t.legacyContext=i,t.context=s,Dw(s)}else throw t.blockedSegment.formatContext=n,t.legacyContext=i,t.context=s,Dw(s),l}}function Qee(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,AU(this,t,e)}function TU(e,t,r){var n=e.blockedBoundary;e.blockedSegment.status=3,n===null?(t.allPendingTasks--,t.status!==2&&(t.status=2,t.destination!==null&&t.destination.push(null))):(n.pendingTasks--,n.forceClientRender||(n.forceClientRender=!0,e=r===void 0?Error(Mt(432)):r,n.errorDigest=t.onError(e),n.parentFlushed&&t.clientRenderedBoundaries.push(n)),n.fallbackAbortableTasks.forEach(function(i){return TU(i,t,r)}),n.fallbackAbortableTasks.clear(),t.allPendingTasks--,t.allPendingTasks===0&&(n=t.onAllReady,n()))}function Mw(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var r=t.children[0];r.id=t.id,r.parentFlushed=!0,r.status===1&&Mw(e,r)}else e.completedSegments.push(t)}function AU(e,t,r){if(t===null){if(r.parentFlushed){if(e.completedRootSegment!==null)throw Error(Mt(389));e.completedRootSegment=r}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=Gg,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(r.parentFlushed&&r.status===1&&Mw(t,r),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(Qee,e),t.fallbackAbortableTasks.clear()):r.parentFlushed&&r.status===1&&(Mw(t,r),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function _U(e){if(e.status!==2){var t=rd,r=TP.current;TP.current=rF;var n=v0;v0=e.responseState;try{var i=e.pingedTasks,s;for(s=0;s<i.length;s++){var o=i[s],a=e,l=o.blockedSegment;if(l.status===0){Dw(o.context);try{ms(a,o,o.node),a.responseState.generateStaticMarkup||l.lastPushedText&&l.textEmbedded&&l.chunks.push("<!-- -->"),o.abortSet.delete(o),l.status=1,AU(a,o.blockedBoundary,l)}catch(m){if(Fk(),typeof m=="object"&&m!==null&&typeof m.then=="function"){var c=o.ping;m.then(c,c)}else{o.abortSet.delete(o),l.status=4;var u=o.blockedBoundary,d=m,p=sv(a,d);if(u===null?Nw(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=p,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,a.allPendingTasks===0){var f=a.onAllReady;f()}}}finally{}}}i.splice(0,s),e.destination!==null&&Gk(e,e.destination)}catch(m){sv(e,m),Nw(e,m)}finally{v0=n,TP.current=r,r===rF&&Dw(t)}}}function EC(e,t,r){switch(r.parentFlushed=!0,r.status){case 0:var n=r.id=e.nextSegmentId++;return r.lastPushedText=!1,r.textEmbedded=!1,e=e.responseState,t.push('<template id="'),t.push(e.placeholderPrefix),e=n.toString(16),t.push(e),t.push('"></template>');case 1:r.status=2;var i=!0;n=r.chunks;var s=0;r=r.children;for(var o=0;o<r.length;o++){for(i=r[o];s<i.index;s++)t.push(n[s]);i=ax(e,t,i)}for(;s<n.length-1;s++)t.push(n[s]);return s<n.length&&(i=t.push(n[s])),i;default:throw Error(Mt(390))}}function ax(e,t,r){var n=r.boundary;if(n===null)return EC(e,t,r);if(n.parentFlushed=!0,n.forceClientRender)return e.responseState.generateStaticMarkup||(n=n.errorDigest,t.push("<!--$!-->"),t.push("<template"),n&&(t.push(' data-dgst="'),n=wi(n),t.push(n),t.push('"')),t.push("></template>")),EC(e,t,r),e=e.responseState.generateStaticMarkup?!0:t.push("<!--/$-->"),e;if(0<n.pendingTasks){n.rootSegmentID=e.nextSegmentId++,0<n.completedSegments.length&&e.partialBoundaries.push(n);var i=e.responseState,s=i.nextSuspenseID++;return i=i.boundaryPrefix+s.toString(16),n=n.id=i,KO(t,e.responseState,n),EC(e,t,r),t.push("<!--/$-->")}if(n.byteSize>e.progressiveChunkSize)return n.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(n),KO(t,e.responseState,n.id),EC(e,t,r),t.push("<!--/$-->");if(e.responseState.generateStaticMarkup||t.push("<!--$-->"),r=n.completedSegments,r.length!==1)throw Error(Mt(391));return ax(e,t,r[0]),e=e.responseState.generateStaticMarkup?!0:t.push("<!--/$-->"),e}function aF(e,t,r){return kee(t,e.responseState,r.formatContext,r.id),ax(e,t,r),Iee(t,r.formatContext)}function lF(e,t,r){for(var n=r.completedSegments,i=0;i<n.length;i++)DU(e,t,r,n[i]);if(n.length=0,e=e.responseState,n=r.id,r=r.rootSegmentID,t.push(e.startInlineScript),e.sentCompleteBoundaryFunction?t.push('$RC("'):(e.sentCompleteBoundaryFunction=!0,t.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),n===null)throw Error(Mt(395));return r=r.toString(16),t.push(n),t.push('","'),t.push(e.segmentPrefix),t.push(r),t.push('")<\/script>')}function DU(e,t,r,n){if(n.status===2)return!0;var i=n.id;if(i===-1){if((n.id=r.rootSegmentID)===-1)throw Error(Mt(392));return aF(e,t,n)}return aF(e,t,n),e=e.responseState,t.push(e.startInlineScript),e.sentCompleteSegmentFunction?t.push('$RS("'):(e.sentCompleteSegmentFunction=!0,t.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),t.push(e.segmentPrefix),i=i.toString(16),t.push(i),t.push('","'),t.push(e.placeholderPrefix),t.push(i),t.push('")<\/script>')}function Gk(e,t){try{var r=e.completedRootSegment;if(r!==null&&e.pendingRootTasks===0){ax(e,t,r),e.completedRootSegment=null;var n=e.responseState.bootstrapChunks;for(r=0;r<n.length-1;r++)t.push(n[r]);r<n.length&&t.push(n[r])}var i=e.clientRenderedBoundaries,s;for(s=0;s<i.length;s++){var o=i[s];n=t;var a=e.responseState,l=o.id,c=o.errorDigest,u=o.errorMessage,d=o.errorComponentStack;if(n.push(a.startInlineScript),a.sentClientRenderFunction?n.push('$RX("'):(a.sentClientRenderFunction=!0,n.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),l===null)throw Error(Mt(395));if(n.push(l),n.push('"'),c||u||d){n.push(",");var p=RP(c||"");n.push(p)}if(u||d){n.push(",");var f=RP(u||"");n.push(f)}if(d){n.push(",");var m=RP(d);n.push(m)}if(!n.push(")<\/script>")){e.destination=null,s++,i.splice(0,s);return}}i.splice(0,s);var y=e.completedBoundaries;for(s=0;s<y.length;s++)if(!lF(e,t,y[s])){e.destination=null,s++,y.splice(0,s);return}y.splice(0,s);var C=e.partialBoundaries;for(s=0;s<C.length;s++){var w=C[s];e:{i=e,o=t;var b=w.completedSegments;for(a=0;a<b.length;a++)if(!DU(i,o,w,b[a])){a++,b.splice(0,a);var x=!1;break e}b.splice(0,a),x=!0}if(!x){e.destination=null,s++,C.splice(0,s);return}}C.splice(0,s);var E=e.completedBoundaries;for(s=0;s<E.length;s++)if(!lF(e,t,E[s])){e.destination=null,s++,E.splice(0,s);return}E.splice(0,s)}finally{e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.push(null)}}function Xee(e,t){try{var r=e.abortableTasks;r.forEach(function(n){return TU(n,e,t)}),r.clear(),e.destination!==null&&Gk(e,e.destination)}catch(n){sv(e,n),Nw(e,n)}}function Zee(){}function kU(e,t,r,n){var i=!1,s=null,o="",a={push:function(c){return c!==null&&(o+=c),!0},destroy:function(c){i=!0,s=c}},l=!1;if(e=Yee(e,Mee(r,t?t.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,Zee,void 0,function(){l=!0}),_U(e),Xee(e,n),e.status===1)e.status=2,a.destroy(e.fatalError);else if(e.status!==2&&e.destination===null){e.destination=a;try{Gk(e,a)}catch(c){sv(e,c),Nw(e,c)}}if(i)throw s;if(!l)throw Error(Mt(426));return o}Nf.renderToNodeStream=function(){throw Error(Mt(207))};Nf.renderToStaticMarkup=function(e,t){return kU(e,t,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Nf.renderToStaticNodeStream=function(){throw Error(Mt(208))};Nf.renderToString=function(e,t){return kU(e,t,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Nf.version="18.3.1";var jk={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IU=v;function Gt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vs=null,ys=0;function lt(e,t){if(t.length!==0)if(512<t.length)0<ys&&(e.enqueue(new Uint8Array(vs.buffer,0,ys)),vs=new Uint8Array(512),ys=0),e.enqueue(t);else{var r=vs.length-ys;r<t.length&&(r===0?e.enqueue(vs):(vs.set(t.subarray(0,r),ys),e.enqueue(vs),t=t.subarray(r)),vs=new Uint8Array(512),ys=0),vs.set(t,ys),ys+=t.length}}function _r(e,t){return lt(e,t),!0}function cF(e){vs&&0<ys&&(e.enqueue(new Uint8Array(vs.buffer,0,ys)),vs=null,ys=0)}var NU=new TextEncoder;function Ht(e){return NU.encode(e)}function Ye(e){return NU.encode(e)}function MU(e,t){typeof e.error=="function"?e.error(t):e.close()}var Hi=Object.prototype.hasOwnProperty,Jee=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uF={},dF={};function OU(e){return Hi.call(dF,e)?!0:Hi.call(uF,e)?!1:Jee.test(e)?dF[e]=!0:(uF[e]=!0,!1)}function Li(e,t,r,n,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Yn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Yn[e]=new Li(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Yn[t]=new Li(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Yn[e]=new Li(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Yn[e]=new Li(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Yn[e]=new Li(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Yn[e]=new Li(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Yn[e]=new Li(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Yn[e]=new Li(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Yn[e]=new Li(e,5,!1,e.toLowerCase(),null,!1,!1)});var Bk=/[\-:]([a-z])/g;function Vk(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Bk,Vk);Yn[t]=new Li(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Bk,Vk);Yn[t]=new Li(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Bk,Vk);Yn[t]=new Li(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Yn[e]=new Li(e,1,!1,e.toLowerCase(),null,!1,!1)});Yn.xlinkHref=new Li("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Yn[e]=new Li(e,1,!1,e.toLowerCase(),null,!0,!0)});var y0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ete=["Webkit","ms","Moz","O"];Object.keys(y0).forEach(function(e){ete.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),y0[t]=y0[e]})});var tte=/["'&<>]/;function $n(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=tte.exec(e);if(t){var r="",n,i=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}i!==n&&(r+=e.substring(i,n)),i=n+1,r+=t}e=i!==n?r+e.substring(i,n):r}return e}var rte=/([A-Z])/g,nte=/^ms-/,JT=Array.isArray,ite=Ye("<script>"),ste=Ye("<\/script>"),ote=Ye('<script src="'),ate=Ye('<script type="module" src="'),hF=Ye('" async=""><\/script>'),lte=/(<\/|<)(s)(cript)/gi;function cte(e,t,r,n){return""+t+(r==="s"?"\\u0073":"\\u0053")+n}function ute(e,t,r,n,i){e=e===void 0?"":e,t=t===void 0?ite:Ye('<script nonce="'+$n(t)+'">');var s=[];if(r!==void 0&&s.push(t,Ht((""+r).replace(lte,cte)),ste),n!==void 0)for(r=0;r<n.length;r++)s.push(ote,Ht($n(n[r])),hF);if(i!==void 0)for(n=0;n<i.length;n++)s.push(ate,Ht($n(i[n])),hF);return{bootstrapChunks:s,startInlineScript:t,placeholderPrefix:Ye(e+"P:"),segmentPrefix:Ye(e+"S:"),boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function da(e,t){return{insertionMode:e,selectedValue:t}}function dte(e){return da(e==="http://www.w3.org/2000/svg"?2:e==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function hte(e,t,r){switch(t){case"select":return da(1,r.value!=null?r.value:r.defaultValue);case"svg":return da(2,null);case"math":return da(3,null);case"foreignObject":return da(1,null);case"table":return da(4,null);case"thead":case"tbody":case"tfoot":return da(5,null);case"colgroup":return da(7,null);case"tr":return da(6,null)}return 4<=e.insertionMode||e.insertionMode===0?da(1,null):e}var Hk=Ye("<!-- -->");function pF(e,t,r,n){return t===""?n:(n&&e.push(Hk),e.push(Ht($n(t))),!0)}var fF=new Map,pte=Ye(' style="'),gF=Ye(":"),fte=Ye(";");function FU(e,t,r){if(typeof r!="object")throw Error(Gt(62));t=!0;for(var n in r)if(Hi.call(r,n)){var i=r[n];if(i!=null&&typeof i!="boolean"&&i!==""){if(n.indexOf("--")===0){var s=Ht($n(n));i=Ht($n((""+i).trim()))}else{s=n;var o=fF.get(s);o!==void 0||(o=Ye($n(s.replace(rte,"-$1").toLowerCase().replace(nte,"-ms-"))),fF.set(s,o)),s=o,i=typeof i=="number"?i===0||Hi.call(y0,n)?Ht(""+i):Ht(i+"px"):Ht($n((""+i).trim()))}t?(t=!1,e.push(pte,s,gF,i)):e.push(fte,s,gF,i)}}t||e.push(Ku)}var cc=Ye(" "),jh=Ye('="'),Ku=Ye('"'),mF=Ye('=""');function fs(e,t,r,n){switch(r){case"style":FU(e,t,n);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N"){if(t=Yn.hasOwnProperty(r)?Yn[r]:null,t!==null){switch(typeof n){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(r=Ht(t.attributeName),t.type){case 3:n&&e.push(cc,r,mF);break;case 4:n===!0?e.push(cc,r,mF):n!==!1&&e.push(cc,r,jh,Ht($n(n)),Ku);break;case 5:isNaN(n)||e.push(cc,r,jh,Ht($n(n)),Ku);break;case 6:!isNaN(n)&&1<=n&&e.push(cc,r,jh,Ht($n(n)),Ku);break;default:t.sanitizeURL&&(n=""+n),e.push(cc,r,jh,Ht($n(n)),Ku)}}else if(OU(r)){switch(typeof n){case"function":case"symbol":return;case"boolean":if(t=r.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(cc,Ht(r),jh,Ht($n(n)),Ku)}}}var uc=Ye(">"),vF=Ye("/>");function C0(e,t,r){if(t!=null){if(r!=null)throw Error(Gt(60));if(typeof t!="object"||!("__html"in t))throw Error(Gt(61));t=t.__html,t!=null&&e.push(Ht(""+t))}}function gte(e){var t="";return IU.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}var AP=Ye(' selected=""');function _P(e,t,r,n){e.push(ha(r));var i=r=null,s;for(s in t)if(Hi.call(t,s)){var o=t[s];if(o!=null)switch(s){case"children":r=o;break;case"dangerouslySetInnerHTML":i=o;break;default:fs(e,n,s,o)}}return e.push(uc),C0(e,i,r),typeof r=="string"?(e.push(Ht($n(r))),null):r}var DP=Ye(`
`),mte=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,yF=new Map;function ha(e){var t=yF.get(e);if(t===void 0){if(!mte.test(e))throw Error(Gt(65,e));t=Ye("<"+e),yF.set(e,t)}return t}var vte=Ye("<!DOCTYPE html>");function yte(e,t,r,n,i){switch(t){case"select":e.push(ha("select"));var s=null,o=null;for(u in r)if(Hi.call(r,u)){var a=r[u];if(a!=null)switch(u){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"defaultValue":case"value":break;default:fs(e,n,u,a)}}return e.push(uc),C0(e,o,s),s;case"option":o=i.selectedValue,e.push(ha("option"));var l=a=null,c=null,u=null;for(s in r)if(Hi.call(r,s)){var d=r[s];if(d!=null)switch(s){case"children":a=d;break;case"selected":c=d;break;case"dangerouslySetInnerHTML":u=d;break;case"value":l=d;default:fs(e,n,s,d)}}if(o!=null)if(r=l!==null?""+l:gte(a),JT(o)){for(n=0;n<o.length;n++)if(""+o[n]===r){e.push(AP);break}}else""+o===r&&e.push(AP);else c&&e.push(AP);return e.push(uc),C0(e,u,a),a;case"textarea":e.push(ha("textarea")),u=o=s=null;for(a in r)if(Hi.call(r,a)&&(l=r[a],l!=null))switch(a){case"children":u=l;break;case"value":s=l;break;case"defaultValue":o=l;break;case"dangerouslySetInnerHTML":throw Error(Gt(91));default:fs(e,n,a,l)}if(s===null&&o!==null&&(s=o),e.push(uc),u!=null){if(s!=null)throw Error(Gt(92));if(JT(u)&&1<u.length)throw Error(Gt(93));s=""+u}return typeof s=="string"&&s[0]===`
`&&e.push(DP),s!==null&&e.push(Ht($n(""+s))),null;case"input":e.push(ha("input")),l=u=a=s=null;for(o in r)if(Hi.call(r,o)&&(c=r[o],c!=null))switch(o){case"children":case"dangerouslySetInnerHTML":throw Error(Gt(399,"input"));case"defaultChecked":l=c;break;case"defaultValue":a=c;break;case"checked":u=c;break;case"value":s=c;break;default:fs(e,n,o,c)}return u!==null?fs(e,n,"checked",u):l!==null&&fs(e,n,"checked",l),s!==null?fs(e,n,"value",s):a!==null&&fs(e,n,"value",a),e.push(vF),null;case"menuitem":e.push(ha("menuitem"));for(var p in r)if(Hi.call(r,p)&&(s=r[p],s!=null))switch(p){case"children":case"dangerouslySetInnerHTML":throw Error(Gt(400));default:fs(e,n,p,s)}return e.push(uc),null;case"title":e.push(ha("title")),s=null;for(d in r)if(Hi.call(r,d)&&(o=r[d],o!=null))switch(d){case"children":s=o;break;case"dangerouslySetInnerHTML":throw Error(Gt(434));default:fs(e,n,d,o)}return e.push(uc),s;case"listing":case"pre":e.push(ha(t)),o=s=null;for(l in r)if(Hi.call(r,l)&&(a=r[l],a!=null))switch(l){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;default:fs(e,n,l,a)}if(e.push(uc),o!=null){if(s!=null)throw Error(Gt(60));if(typeof o!="object"||!("__html"in o))throw Error(Gt(61));r=o.__html,r!=null&&(typeof r=="string"&&0<r.length&&r[0]===`
`?e.push(DP,Ht(r)):e.push(Ht(""+r)))}return typeof s=="string"&&s[0]===`
`&&e.push(DP),s;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(ha(t));for(var f in r)if(Hi.call(r,f)&&(s=r[f],s!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(Gt(399,t));default:fs(e,n,f,s)}return e.push(vF),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return _P(e,r,t,n);case"html":return i.insertionMode===0&&e.push(vte),_P(e,r,t,n);default:if(t.indexOf("-")===-1&&typeof r.is!="string")return _P(e,r,t,n);e.push(ha(t)),o=s=null;for(c in r)if(Hi.call(r,c)&&(a=r[c],a!=null))switch(c){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"style":FU(e,n,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:OU(c)&&typeof a!="function"&&typeof a!="symbol"&&e.push(cc,Ht(c),jh,Ht($n(a)),Ku)}return e.push(uc),C0(e,o,s),s}}var Cte=Ye("</"),wte=Ye(">"),bte=Ye('<template id="'),Ste=Ye('"></template>'),xte=Ye("<!--$-->"),Ete=Ye('<!--$?--><template id="'),Pte=Ye('"></template>'),Rte=Ye("<!--$!-->"),Tte=Ye("<!--/$-->"),Ate=Ye("<template"),_te=Ye('"'),Dte=Ye(' data-dgst="');Ye(' data-msg="');Ye(' data-stck="');var kte=Ye("></template>");function CF(e,t,r){if(lt(e,Ete),r===null)throw Error(Gt(395));return lt(e,r),_r(e,Pte)}var Ite=Ye('<div hidden id="'),Nte=Ye('">'),Mte=Ye("</div>"),Ote=Ye('<svg aria-hidden="true" style="display:none" id="'),Fte=Ye('">'),Lte=Ye("</svg>"),Gte=Ye('<math aria-hidden="true" style="display:none" id="'),jte=Ye('">'),Bte=Ye("</math>"),Vte=Ye('<table hidden id="'),Hte=Ye('">'),zte=Ye("</table>"),$te=Ye('<table hidden><tbody id="'),Ute=Ye('">'),Wte=Ye("</tbody></table>"),Kte=Ye('<table hidden><tr id="'),qte=Ye('">'),Yte=Ye("</tr></table>"),Qte=Ye('<table hidden><colgroup id="'),Xte=Ye('">'),Zte=Ye("</colgroup></table>");function Jte(e,t,r,n){switch(r.insertionMode){case 0:case 1:return lt(e,Ite),lt(e,t.segmentPrefix),lt(e,Ht(n.toString(16))),_r(e,Nte);case 2:return lt(e,Ote),lt(e,t.segmentPrefix),lt(e,Ht(n.toString(16))),_r(e,Fte);case 3:return lt(e,Gte),lt(e,t.segmentPrefix),lt(e,Ht(n.toString(16))),_r(e,jte);case 4:return lt(e,Vte),lt(e,t.segmentPrefix),lt(e,Ht(n.toString(16))),_r(e,Hte);case 5:return lt(e,$te),lt(e,t.segmentPrefix),lt(e,Ht(n.toString(16))),_r(e,Ute);case 6:return lt(e,Kte),lt(e,t.segmentPrefix),lt(e,Ht(n.toString(16))),_r(e,qte);case 7:return lt(e,Qte),lt(e,t.segmentPrefix),lt(e,Ht(n.toString(16))),_r(e,Xte);default:throw Error(Gt(397))}}function ere(e,t){switch(t.insertionMode){case 0:case 1:return _r(e,Mte);case 2:return _r(e,Lte);case 3:return _r(e,Bte);case 4:return _r(e,zte);case 5:return _r(e,Wte);case 6:return _r(e,Yte);case 7:return _r(e,Zte);default:throw Error(Gt(397))}}var tre=Ye('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),rre=Ye('$RS("'),nre=Ye('","'),ire=Ye('")<\/script>'),sre=Ye('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),ore=Ye('$RC("'),are=Ye('","'),lre=Ye('")<\/script>'),cre=Ye('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),ure=Ye('$RX("'),dre=Ye('"'),hre=Ye(")<\/script>"),kP=Ye(","),pre=/[<\u2028\u2029]/g;function IP(e){return JSON.stringify(e).replace(pre,function(t){switch(t){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var am=Object.assign,fre=Symbol.for("react.element"),LU=Symbol.for("react.portal"),GU=Symbol.for("react.fragment"),jU=Symbol.for("react.strict_mode"),BU=Symbol.for("react.profiler"),VU=Symbol.for("react.provider"),HU=Symbol.for("react.context"),zU=Symbol.for("react.forward_ref"),$U=Symbol.for("react.suspense"),UU=Symbol.for("react.suspense_list"),WU=Symbol.for("react.memo"),zk=Symbol.for("react.lazy"),gre=Symbol.for("react.scope"),mre=Symbol.for("react.debug_trace_mode"),vre=Symbol.for("react.legacy_hidden"),yre=Symbol.for("react.default_value"),wF=Symbol.iterator;function eA(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case GU:return"Fragment";case LU:return"Portal";case BU:return"Profiler";case jU:return"StrictMode";case $U:return"Suspense";case UU:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case HU:return(e.displayName||"Context")+".Consumer";case VU:return(e._context.displayName||"Context")+".Provider";case zU:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case WU:return t=e.displayName||null,t!==null?t:eA(e.type)||"Memo";case zk:t=e._payload,e=e._init;try{return eA(e(t))}catch{}}return null}var KU={};function bF(e,t){if(e=e.contextTypes,!e)return KU;var r={},n;for(n in e)r[n]=t[n];return r}var nd=null;function lx(e,t){if(e!==t){e.context._currentValue=e.parentValue,e=e.parent;var r=t.parent;if(e===null){if(r!==null)throw Error(Gt(401))}else{if(r===null)throw Error(Gt(401));lx(e,r)}t.context._currentValue=t.value}}function qU(e){e.context._currentValue=e.parentValue,e=e.parent,e!==null&&qU(e)}function YU(e){var t=e.parent;t!==null&&YU(t),e.context._currentValue=e.value}function QU(e,t){if(e.context._currentValue=e.parentValue,e=e.parent,e===null)throw Error(Gt(402));e.depth===t.depth?lx(e,t):QU(e,t)}function XU(e,t){var r=t.parent;if(r===null)throw Error(Gt(402));e.depth===r.depth?lx(e,r):XU(e,r),t.context._currentValue=t.value}function Ow(e){var t=nd;t!==e&&(t===null?YU(e):e===null?qU(t):t.depth===e.depth?lx(t,e):t.depth>e.depth?QU(t,e):XU(t,e),nd=e)}var SF={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function xF(e,t,r,n){var i=e.state!==void 0?e.state:null;e.updater=SF,e.props=r,e.state=i;var s={queue:[],replace:!1};e._reactInternals=s;var o=t.contextType;if(e.context=typeof o=="object"&&o!==null?o._currentValue:n,o=t.getDerivedStateFromProps,typeof o=="function"&&(o=o(r,i),i=o==null?i:am({},i,o),e.state=i),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&SF.enqueueReplaceState(e,e.state,null),s.queue!==null&&0<s.queue.length)if(t=s.queue,o=s.replace,s.queue=null,s.replace=!1,o&&t.length===1)e.state=t[0];else{for(s=o?t[0]:e.state,i=!0,o=o?1:0;o<t.length;o++){var a=t[o];a=typeof a=="function"?a.call(e,s,r,n):a,a!=null&&(i?(i=!1,s=am({},s,a)):am(s,a))}e.state=s}else s.queue=null}var Cre={id:1,overflow:""};function tA(e,t,r){var n=e.id;e=e.overflow;var i=32-w0(n)-1;n&=~(1<<i),r+=1;var s=32-w0(t)+i;if(30<s){var o=i-i%5;return s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,{id:1<<32-w0(t)+i|r<<i|n,overflow:s+e}}return{id:1<<s|r<<i|n,overflow:e}}var w0=Math.clz32?Math.clz32:Sre,wre=Math.log,bre=Math.LN2;function Sre(e){return e>>>=0,e===0?32:31-(wre(e)/bre|0)|0}function xre(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ere=typeof Object.is=="function"?Object.is:xre,Pl=null,$k=null,b0=null,wr=null,jg=!1,Fw=!1,ov=0,Nc=null,cx=0;function qu(){if(Pl===null)throw Error(Gt(321));return Pl}function EF(){if(0<cx)throw Error(Gt(312));return{memoizedState:null,queue:null,next:null}}function Uk(){return wr===null?b0===null?(jg=!1,b0=wr=EF()):(jg=!0,wr=b0):wr.next===null?(jg=!1,wr=wr.next=EF()):(jg=!0,wr=wr.next),wr}function Wk(){$k=Pl=null,Fw=!1,b0=null,cx=0,wr=Nc=null}function ZU(e,t){return typeof t=="function"?t(e):t}function PF(e,t,r){if(Pl=qu(),wr=Uk(),jg){var n=wr.queue;if(t=n.dispatch,Nc!==null&&(r=Nc.get(n),r!==void 0)){Nc.delete(n),n=wr.memoizedState;do n=e(n,r.action),r=r.next;while(r!==null);return wr.memoizedState=n,[n,t]}return[wr.memoizedState,t]}return e=e===ZU?typeof t=="function"?t():t:r!==void 0?r(t):t,wr.memoizedState=e,e=wr.queue={last:null,dispatch:null},e=e.dispatch=Pre.bind(null,Pl,e),[wr.memoizedState,e]}function RF(e,t){if(Pl=qu(),wr=Uk(),t=t===void 0?null:t,wr!==null){var r=wr.memoizedState;if(r!==null&&t!==null){var n=r[1];e:if(n===null)n=!1;else{for(var i=0;i<n.length&&i<t.length;i++)if(!Ere(t[i],n[i])){n=!1;break e}n=!0}if(n)return r[0]}}return e=e(),wr.memoizedState=[e,t],e}function Pre(e,t,r){if(25<=cx)throw Error(Gt(301));if(e===Pl)if(Fw=!0,e={action:r,next:null},Nc===null&&(Nc=new Map),r=Nc.get(t),r===void 0)Nc.set(t,e);else{for(t=r;t.next!==null;)t=t.next;t.next=e}}function Rre(){throw Error(Gt(394))}function PC(){}var TF={readContext:function(e){return e._currentValue},useContext:function(e){return qu(),e._currentValue},useMemo:RF,useReducer:PF,useRef:function(e){Pl=qu(),wr=Uk();var t=wr.memoizedState;return t===null?(e={current:e},wr.memoizedState=e):t},useState:function(e){return PF(ZU,e)},useInsertionEffect:PC,useLayoutEffect:function(){},useCallback:function(e,t){return RF(function(){return e},t)},useImperativeHandle:PC,useEffect:PC,useDebugValue:PC,useDeferredValue:function(e){return qu(),e},useTransition:function(){return qu(),[!1,Rre]},useId:function(){var e=$k.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-w0(e)-1)).toString(32)+t;var r=S0;if(r===null)throw Error(Gt(404));return t=ov++,e=":"+r.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return qu(),t(e._source)},useSyncExternalStore:function(e,t,r){if(r===void 0)throw Error(Gt(407));return r()}},S0=null,NP=IU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Tre(e){return console.error(e),null}function Bg(){}function Are(e,t,r,n,i,s,o,a,l){var c=[],u=new Set;return t={destination:null,responseState:t,progressiveChunkSize:n===void 0?12800:n,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:c,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?Tre:i,onAllReady:s===void 0?Bg:s,onShellReady:o===void 0?Bg:o,onShellError:a===void 0?Bg:a,onFatalError:l===void 0?Bg:l},r=Lw(t,0,null,r,!1,!1),r.parentFlushed=!0,e=Kk(t,e,null,r,u,KU,null,Cre),c.push(e),t}function Kk(e,t,r,n,i,s,o,a){e.allPendingTasks++,r===null?e.pendingRootTasks++:r.pendingTasks++;var l={node:t,ping:function(){var c=e.pingedTasks;c.push(l),c.length===1&&tW(e)},blockedBoundary:r,blockedSegment:n,abortSet:i,legacyContext:s,context:o,treeContext:a};return i.add(l),l}function Lw(e,t,r,n,i,s){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:n,boundary:r,lastPushedText:i,textEmbedded:s}}function av(e,t){if(e=e.onError(t),e!=null&&typeof e!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function Gw(e,t){var r=e.onShellError;r(t),r=e.onFatalError,r(t),e.destination!==null?(e.status=2,MU(e.destination,t)):(e.status=1,e.fatalError=t)}function AF(e,t,r,n,i){for(Pl={},$k=t,ov=0,e=r(n,i);Fw;)Fw=!1,ov=0,cx+=1,wr=null,e=r(n,i);return Wk(),e}function _F(e,t,r,n){var i=r.render(),s=n.childContextTypes;if(s!=null){var o=t.legacyContext;if(typeof r.getChildContext!="function")n=o;else{r=r.getChildContext();for(var a in r)if(!(a in s))throw Error(Gt(108,eA(n)||"Unknown",a));n=am({},o,r)}t.legacyContext=n,Cs(e,t,i),t.legacyContext=o}else Cs(e,t,i)}function DF(e,t){if(e&&e.defaultProps){t=am({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function rA(e,t,r,n,i){if(typeof r=="function")if(r.prototype&&r.prototype.isReactComponent){i=bF(r,t.legacyContext);var s=r.contextType;s=new r(n,typeof s=="object"&&s!==null?s._currentValue:i),xF(s,r,n,i),_F(e,t,s,r)}else{s=bF(r,t.legacyContext),i=AF(e,t,r,n,s);var o=ov!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)xF(i,r,n,s),_F(e,t,i,r);else if(o){n=t.treeContext,t.treeContext=tA(n,1,0);try{Cs(e,t,i)}finally{t.treeContext=n}}else Cs(e,t,i)}else if(typeof r=="string"){switch(i=t.blockedSegment,s=yte(i.chunks,r,n,e.responseState,i.formatContext),i.lastPushedText=!1,o=i.formatContext,i.formatContext=hte(o,r,n),nA(e,t,s),i.formatContext=o,r){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push(Cte,Ht(r),wte)}i.lastPushedText=!1}else{switch(r){case vre:case mre:case jU:case BU:case GU:Cs(e,t,n.children);return;case UU:Cs(e,t,n.children);return;case gre:throw Error(Gt(343));case $U:e:{r=t.blockedBoundary,i=t.blockedSegment,s=n.fallback,n=n.children,o=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:o,errorDigest:null},l=Lw(e,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(l),i.lastPushedText=!1;var c=Lw(e,0,null,i.formatContext,!1,!1);c.parentFlushed=!0,t.blockedBoundary=a,t.blockedSegment=c;try{if(nA(e,t,n),c.lastPushedText&&c.textEmbedded&&c.chunks.push(Hk),c.status=1,jw(a,c),a.pendingTasks===0)break e}catch(u){c.status=4,a.forceClientRender=!0,a.errorDigest=av(e,u)}finally{t.blockedBoundary=r,t.blockedSegment=i}t=Kk(e,s,r,l,o,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof r=="object"&&r!==null)switch(r.$$typeof){case zU:if(n=AF(e,t,r.render,n,i),ov!==0){r=t.treeContext,t.treeContext=tA(r,1,0);try{Cs(e,t,n)}finally{t.treeContext=r}}else Cs(e,t,n);return;case WU:r=r.type,n=DF(r,n),rA(e,t,r,n,i);return;case VU:if(i=n.children,r=r._context,n=n.value,s=r._currentValue,r._currentValue=n,o=nd,nd=n={parent:o,depth:o===null?0:o.depth+1,context:r,parentValue:s,value:n},t.context=n,Cs(e,t,i),e=nd,e===null)throw Error(Gt(403));n=e.parentValue,e.context._currentValue=n===yre?e.context._defaultValue:n,e=nd=e.parent,t.context=e;return;case HU:n=n.children,n=n(r._currentValue),Cs(e,t,n);return;case zk:i=r._init,r=i(r._payload),n=DF(r,n),rA(e,t,r,n,void 0);return}throw Error(Gt(130,r==null?r:typeof r,""))}}function Cs(e,t,r){if(t.node=r,typeof r=="object"&&r!==null){switch(r.$$typeof){case fre:rA(e,t,r.type,r.props,r.ref);return;case LU:throw Error(Gt(257));case zk:var n=r._init;r=n(r._payload),Cs(e,t,r);return}if(JT(r)){kF(e,t,r);return}if(r===null||typeof r!="object"?n=null:(n=wF&&r[wF]||r["@@iterator"],n=typeof n=="function"?n:null),n&&(n=n.call(r))){if(r=n.next(),!r.done){var i=[];do i.push(r.value),r=n.next();while(!r.done);kF(e,t,i)}return}throw e=Object.prototype.toString.call(r),Error(Gt(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}typeof r=="string"?(n=t.blockedSegment,n.lastPushedText=pF(t.blockedSegment.chunks,r,e.responseState,n.lastPushedText)):typeof r=="number"&&(n=t.blockedSegment,n.lastPushedText=pF(t.blockedSegment.chunks,""+r,e.responseState,n.lastPushedText))}function kF(e,t,r){for(var n=r.length,i=0;i<n;i++){var s=t.treeContext;t.treeContext=tA(s,n,i);try{nA(e,t,r[i])}finally{t.treeContext=s}}}function nA(e,t,r){var n=t.blockedSegment.formatContext,i=t.legacyContext,s=t.context;try{return Cs(e,t,r)}catch(l){if(Wk(),typeof l=="object"&&l!==null&&typeof l.then=="function"){r=l;var o=t.blockedSegment,a=Lw(e,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,e=Kk(e,t.node,t.blockedBoundary,a,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,r.then(e,e),t.blockedSegment.formatContext=n,t.legacyContext=i,t.context=s,Ow(s)}else throw t.blockedSegment.formatContext=n,t.legacyContext=i,t.context=s,Ow(s),l}}function _re(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,eW(this,t,e)}function JU(e,t,r){var n=e.blockedBoundary;e.blockedSegment.status=3,n===null?(t.allPendingTasks--,t.status!==2&&(t.status=2,t.destination!==null&&t.destination.close())):(n.pendingTasks--,n.forceClientRender||(n.forceClientRender=!0,e=r===void 0?Error(Gt(432)):r,n.errorDigest=t.onError(e),n.parentFlushed&&t.clientRenderedBoundaries.push(n)),n.fallbackAbortableTasks.forEach(function(i){return JU(i,t,r)}),n.fallbackAbortableTasks.clear(),t.allPendingTasks--,t.allPendingTasks===0&&(n=t.onAllReady,n()))}function jw(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var r=t.children[0];r.id=t.id,r.parentFlushed=!0,r.status===1&&jw(e,r)}else e.completedSegments.push(t)}function eW(e,t,r){if(t===null){if(r.parentFlushed){if(e.completedRootSegment!==null)throw Error(Gt(389));e.completedRootSegment=r}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=Bg,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(r.parentFlushed&&r.status===1&&jw(t,r),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(_re,e),t.fallbackAbortableTasks.clear()):r.parentFlushed&&r.status===1&&(jw(t,r),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function tW(e){if(e.status!==2){var t=nd,r=NP.current;NP.current=TF;var n=S0;S0=e.responseState;try{var i=e.pingedTasks,s;for(s=0;s<i.length;s++){var o=i[s],a=e,l=o.blockedSegment;if(l.status===0){Ow(o.context);try{Cs(a,o,o.node),l.lastPushedText&&l.textEmbedded&&l.chunks.push(Hk),o.abortSet.delete(o),l.status=1,eW(a,o.blockedBoundary,l)}catch(m){if(Wk(),typeof m=="object"&&m!==null&&typeof m.then=="function"){var c=o.ping;m.then(c,c)}else{o.abortSet.delete(o),l.status=4;var u=o.blockedBoundary,d=m,p=av(a,d);if(u===null?Gw(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=p,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,a.allPendingTasks===0){var f=a.onAllReady;f()}}}finally{}}}i.splice(0,s),e.destination!==null&&qk(e,e.destination)}catch(m){av(e,m),Gw(e,m)}finally{S0=n,NP.current=r,r===TF&&Ow(t)}}}function RC(e,t,r){switch(r.parentFlushed=!0,r.status){case 0:var n=r.id=e.nextSegmentId++;return r.lastPushedText=!1,r.textEmbedded=!1,e=e.responseState,lt(t,bte),lt(t,e.placeholderPrefix),e=Ht(n.toString(16)),lt(t,e),_r(t,Ste);case 1:r.status=2;var i=!0;n=r.chunks;var s=0;r=r.children;for(var o=0;o<r.length;o++){for(i=r[o];s<i.index;s++)lt(t,n[s]);i=ux(e,t,i)}for(;s<n.length-1;s++)lt(t,n[s]);return s<n.length&&(i=_r(t,n[s])),i;default:throw Error(Gt(390))}}function ux(e,t,r){var n=r.boundary;if(n===null)return RC(e,t,r);if(n.parentFlushed=!0,n.forceClientRender)n=n.errorDigest,_r(t,Rte),lt(t,Ate),n&&(lt(t,Dte),lt(t,Ht($n(n))),lt(t,_te)),_r(t,kte),RC(e,t,r);else if(0<n.pendingTasks){n.rootSegmentID=e.nextSegmentId++,0<n.completedSegments.length&&e.partialBoundaries.push(n);var i=e.responseState,s=i.nextSuspenseID++;i=Ye(i.boundaryPrefix+s.toString(16)),n=n.id=i,CF(t,e.responseState,n),RC(e,t,r)}else if(n.byteSize>e.progressiveChunkSize)n.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(n),CF(t,e.responseState,n.id),RC(e,t,r);else{if(_r(t,xte),r=n.completedSegments,r.length!==1)throw Error(Gt(391));ux(e,t,r[0])}return _r(t,Tte)}function IF(e,t,r){return Jte(t,e.responseState,r.formatContext,r.id),ux(e,t,r),ere(t,r.formatContext)}function NF(e,t,r){for(var n=r.completedSegments,i=0;i<n.length;i++)rW(e,t,r,n[i]);if(n.length=0,e=e.responseState,n=r.id,r=r.rootSegmentID,lt(t,e.startInlineScript),e.sentCompleteBoundaryFunction?lt(t,ore):(e.sentCompleteBoundaryFunction=!0,lt(t,sre)),n===null)throw Error(Gt(395));return r=Ht(r.toString(16)),lt(t,n),lt(t,are),lt(t,e.segmentPrefix),lt(t,r),_r(t,lre)}function rW(e,t,r,n){if(n.status===2)return!0;var i=n.id;if(i===-1){if((n.id=r.rootSegmentID)===-1)throw Error(Gt(392));return IF(e,t,n)}return IF(e,t,n),e=e.responseState,lt(t,e.startInlineScript),e.sentCompleteSegmentFunction?lt(t,rre):(e.sentCompleteSegmentFunction=!0,lt(t,tre)),lt(t,e.segmentPrefix),i=Ht(i.toString(16)),lt(t,i),lt(t,nre),lt(t,e.placeholderPrefix),lt(t,i),_r(t,ire)}function qk(e,t){vs=new Uint8Array(512),ys=0;try{var r=e.completedRootSegment;if(r!==null&&e.pendingRootTasks===0){ux(e,t,r),e.completedRootSegment=null;var n=e.responseState.bootstrapChunks;for(r=0;r<n.length-1;r++)lt(t,n[r]);r<n.length&&_r(t,n[r])}var i=e.clientRenderedBoundaries,s;for(s=0;s<i.length;s++){var o=i[s];n=t;var a=e.responseState,l=o.id,c=o.errorDigest,u=o.errorMessage,d=o.errorComponentStack;if(lt(n,a.startInlineScript),a.sentClientRenderFunction?lt(n,ure):(a.sentClientRenderFunction=!0,lt(n,cre)),l===null)throw Error(Gt(395));lt(n,l),lt(n,dre),(c||u||d)&&(lt(n,kP),lt(n,Ht(IP(c||"")))),(u||d)&&(lt(n,kP),lt(n,Ht(IP(u||"")))),d&&(lt(n,kP),lt(n,Ht(IP(d)))),_r(n,hre)}i.splice(0,s);var p=e.completedBoundaries;for(s=0;s<p.length;s++)NF(e,t,p[s]);p.splice(0,s),cF(t),vs=new Uint8Array(512),ys=0;var f=e.partialBoundaries;for(s=0;s<f.length;s++){var m=f[s];e:{i=e,o=t;var y=m.completedSegments;for(a=0;a<y.length;a++)if(!rW(i,o,m,y[a])){a++,y.splice(0,a);var C=!1;break e}y.splice(0,a),C=!0}if(!C){e.destination=null,s++,f.splice(0,s);return}}f.splice(0,s);var w=e.completedBoundaries;for(s=0;s<w.length;s++)NF(e,t,w[s]);w.splice(0,s)}finally{cF(t),e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.close()}}function MF(e,t){try{var r=e.abortableTasks;r.forEach(function(n){return JU(n,e,t)}),r.clear(),e.destination!==null&&qk(e,e.destination)}catch(n){av(e,n),Gw(e,n)}}jk.renderToReadableStream=function(e,t){return new Promise(function(r,n){var i,s,o=new Promise(function(u,d){s=u,i=d}),a=Are(e,ute(t?t.identifierPrefix:void 0,t?t.nonce:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),dte(t?t.namespaceURI:void 0),t?t.progressiveChunkSize:void 0,t?t.onError:void 0,s,function(){var u=new ReadableStream({type:"bytes",pull:function(d){if(a.status===1)a.status=2,MU(d,a.fatalError);else if(a.status!==2&&a.destination===null){a.destination=d;try{qk(a,d)}catch(p){av(a,p),Gw(a,p)}}},cancel:function(){MF(a)}},{highWaterMark:0});u.allReady=o,r(u)},function(u){o.catch(function(){}),n(u)},i);if(t&&t.signal){var l=t.signal,c=function(){MF(a,l.reason),l.removeEventListener("abort",c)};l.addEventListener("abort",c)}tW(a)})};jk.version="18.3.1";var Mf,nW;Mf=Nf,nW=jk;Mf.version;Mf.renderToString;var Dre=Mf.renderToStaticMarkup;Mf.renderToNodeStream;Mf.renderToStaticNodeStream;nW.renderToReadableStream;var kre=Object.defineProperty,Ire=Object.defineProperties,Nre=Object.getOwnPropertyDescriptors,OF=Object.getOwnPropertySymbols,Mre=Object.prototype.hasOwnProperty,Ore=Object.prototype.propertyIsEnumerable,FF=(e,t,r)=>t in e?kre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ir=(e,t)=>{for(var r in t||(t={}))Mre.call(t,r)&&FF(e,r,t[r]);if(OF)for(var r of OF(t))Ore.call(t,r)&&FF(e,r,t[r]);return e},Ri=(e,t)=>Ire(e,Nre(t)),Yk=v.createContext({setMethods:()=>{}}),Fre=e=>{const{initialProps:t,addUpdateCallback:r,CustomComponentClass:n,setMethods:i}=e,[s,o]=v.useState(t);return v.useEffect(()=>{r(a=>o(a))},[]),Ne.createElement(Yk.Provider,{value:{setMethods:i}},Ne.createElement(n,Ir({},s)))},Lre=v.memo(Fre),Gre=0;function LF(){return`agPortalKey_${++Gre}`}var iW=class{constructor(e,t,r,n){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=r,this.suppressFallbackMethods=!!n,this.statelessComponent=this.isStateless(this.reactComponent),this.key=LF(),this.portalKey=LF(),this.instanceCreated=this.isStatelessComponent()?on.resolve(!1):new on(i=>{this.resolveInstanceCreated=i})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){return this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy(),this.portalManager.destroyPortal(this.portal)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),r=document.createElement(t||"div");return r.classList.add("ag-react-container"),e.reactContainer=r,r}addParentContainerStyleAndClasses(){this.componentInstance&&(this.componentInstance.getReactContainerStyle&&this.componentInstance.getReactContainerStyle()&&(pt.warnOnce('Since v31.1 "getReactContainerStyle" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),Object.assign(this.eParentElement.style,this.componentInstance.getReactContainerStyle())),this.componentInstance.getReactContainerClasses&&this.componentInstance.getReactContainerClasses()&&(pt.warnOnce('Since v31.1 "getReactContainerClasses" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),this.componentInstance.getReactContainerClasses().forEach(t=>this.eParentElement.classList.add(t))))}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const r=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!r){setTimeout(()=>this.callMethod(e,t));return}const n=r[e];if(n)return n.apply(r,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.params=e,this.createOrUpdatePortal(e),new on(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{var r;this.componentInstance=t,this.addParentContainerStyleAndClasses(),(r=this.resolveInstanceCreated)==null||r.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,Ri(Ir({},e),{key:this.key})),this.portal=oh.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return v.createElement(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,t=>{e(t)})}isNullValue(){return this.valueRenderedIsNull(this.params)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}valueRenderedIsNull(e){if(!this.componentType.cellRenderer)return!1;const t=console.error;try{return console.error=()=>{},Dre(v.createElement(this.reactComponent,e))===""}catch{}finally{console.error=t}return!1}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const r=this[`${e}Component`];if(!this.suppressFallbackMethods&&r)return r.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function Qk(e,t,r){e.forEach(n=>{const i=t[n];i&&(r[n]=i)})}var Su=class extends iW{constructor(){super(...arguments),this.awaitUpdateCallback=new on(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=Lre}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:r=>this.setMethods(r),addUpdateCallback:r=>{this.updateCallback=()=>(r(this.getProps()),new on(n=>{setTimeout(()=>{n()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,Qk(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return Ri(Ir({},this.sourceParams),{key:this.key,ref:this.ref})}refreshProps(){return this.updateCallback?this.updateCallback():new on(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},jre=class extends Su{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Bre=class extends Su{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterChangedCallback()}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.model=e,this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}updateModel(e){this.setModel(e).then(()=>this.sourceParams.filterChangedCallback())}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,delete e.valueGetter,e}};function sW(e,t){e.parentFilterInstance(r=>{(r.setModel(t)||on.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var Vre=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=r=>this.updateModel(r)}getProps(){return Ri(Ir({},this.floatingFilterParams),{model:this.model,onModelChange:this.onModelChange})}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Qk(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),sW(this.floatingFilterParams,e)}},Hre=class extends Su{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),sW(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},zre=class extends Su{refresh(e){this.sourceParams=e,this.refreshProps()}},$re=class extends Su{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},Ure=class extends Su{refresh(e){this.sourceParams=e,this.refreshProps()}},Wre=class extends Su{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Kre=class extends Su{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}},oW=class aW{constructor(t,r,n){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=r||"div",this.refresher=t,this.maxComponentCreationTimeMs=n||aW.MAX_COMPONENT_CREATION_TIME_IN_MS}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(t){this.portals=this.portals.filter(r=>r!==t),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(t,r,n){this.portals=[...this.portals,t],this.waitForInstance(r,n),this.batchUpdate()}updateReactPortal(t,r){this.portals[this.portals.indexOf(t)]=r,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(t,r,n=Date.now()){if(this.destroyed){r(null);return}if(t.rendered())r(t);else{if(Date.now()-n>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){if(t.isNullValue()){r(t);return}console.error(`AG Grid: React Component '${t.getReactComponentName()}' not created within ${this.maxComponentCreationTimeMs}ms.`),console.error("    If the component is using `forwardRef` but not `useImperativeHandle`, add the following: `useImperativeHandle(ref, () => ({}));`");return}window.setTimeout(()=>{this.waitForInstance(t,r,n)})}}};oW.MAX_COMPONENT_CREATION_TIME_IN_MS=1e3;var qre=oW,Gi=Ne.createContext({}),No=(...e)=>e.filter(r=>r!=null&&r!=="").join(" "),Qs=class lW{constructor(...t){this.classesMap={},t.forEach(r=>{this.classesMap[r]=!0})}setClass(t,r){if(!!this.classesMap[t]==r)return this;const i=new lW;return i.classesMap=Ir({},this.classesMap),i.classesMap[t]=r,i}toString(){return Object.keys(this.classesMap).filter(r=>this.classesMap[r]).join(" ")}},Of=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,r=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===r()},Yre=gT.createRoot!=null&&gT.flushSync!=null,x0=!1;function Qre(e){return x0||setTimeout(()=>x0=!1,0),x0=!0,e()}var Xk=(e,t)=>{Yre&&e&&!x0?gT.flushSync(t):t()};function Zk(e,t,r){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(r||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const n=[],i=[],s=new Map,o=new Map;for(let a=0;a<t.length;a++){const l=t[a];o.set(l.getInstanceId(),l)}for(let a=0;a<e.length;a++){const l=e[a];s.set(l.getInstanceId(),l),o.has(l.getInstanceId())&&n.push(l)}for(let a=0;a<t.length;a++){const l=t[a],c=l.getInstanceId();s.has(c)||i.push(l)}return n.length===e.length&&i.length===0?e:n.length===0&&i.length===t.length?t:n.length===0?i:i.length===0?n:[...n,...i]}var my=(e,t,r,n)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const s=e.newAgStackInstance();if(!s)return;let o,a,l=!1;return s.then(c=>{if(l){t.destroyBean(c);return}o=c,a=o.getGui(),r.appendChild(a),GF(n,o)}),()=>{l=!0,o&&(a&&a.parentElement&&a.parentElement.removeChild(a),t.destroyBean(o),n&&GF(n,void 0))}},GF=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const r=e;r.current=t}},Xre=e=>{const t=e.newAgStackInstance();if(t)return t.resolveNow(null,r=>r)},cW=v.forwardRef((e,t)=>{var r;const n=v.useContext(Gi).context,i=v.useRef(null),s=v.useRef(null),o=v.useRef(null),a=v.useRef(null),l=v.useRef(null),c=v.useRef(),[u,d]=v.useState(),[p,f]=v.useState(),[m,y]=v.useState(),[C,w]=v.useState(()=>new Qs),[b,x]=v.useState(()=>new Qs("ag-hidden")),[E,I]=v.useState(()=>new Qs("ag-hidden")),[k,P]=v.useState(()=>new Qs("ag-invisible"));v.useImperativeHandle(t,()=>({refresh(){return!1}})),v.useLayoutEffect(()=>my(u,n,s.current),[u]);const A=v.useCallback(W=>{if(i.current=W,!i.current){n.destroyBean(c.current),c.current=null;return}const ne={setInnerRenderer:(J,ye)=>{d(J),y(ye)},setChildCount:J=>f(J),addOrRemoveCssClass:(J,ye)=>w(Pe=>Pe.setClass(J,ye)),setContractedDisplayed:J=>I(ye=>ye.setClass("ag-hidden",!J)),setExpandedDisplayed:J=>x(ye=>ye.setClass("ag-hidden",!J)),setCheckboxVisible:J=>P(ye=>ye.setClass("ag-invisible",!J))};c.current=n.createBean(new dh),c.current.init(ne,i.current,o.current,a.current,l.current,cW,e)},[]),D=v.useMemo(()=>`ag-cell-wrapper ${C.toString()}`,[C]),L=v.useMemo(()=>`ag-group-expanded ${b.toString()}`,[b]),M=v.useMemo(()=>`ag-group-contracted ${E.toString()}`,[E]),T=v.useMemo(()=>`ag-group-checkbox ${k.toString()}`,[k]),O=u&&u.componentFromFramework,Q=O?u.componentClass:void 0,X=u==null&&m!=null,B=pt.escapeString(m,!0);return Ne.createElement("span",Ir({className:D,ref:A},e.colDef?{}:{role:(r=c.current)==null?void 0:r.getCellAriaRole()}),Ne.createElement("span",{className:L,ref:a}),Ne.createElement("span",{className:M,ref:l}),Ne.createElement("span",{className:T,ref:o}),Ne.createElement("span",{className:"ag-group-value",ref:s},X&&Ne.createElement(Ne.Fragment,null,B),O&&Ne.createElement(Q,Ir({},u.params))),Ne.createElement("span",{className:"ag-group-child-count"},p))}),jF=cW,Zre=e=>{const{ctrl:t}=e,r=t.isAlive(),{context:n}=v.useContext(Gi),i=r?t.getColId():void 0,[s,o]=v.useState(),a=v.useRef(null),l=v.useRef(null),c=v.useRef(null),u=v.useRef();let d=v.useRef();r&&!d.current&&(d.current=new ry(()=>a.current));const p=v.useCallback(C=>{var w;if(a.current=C,!a.current||!r)return;const b={setWidth:E=>{a.current&&(a.current.style.width=E)},addOrRemoveCssClass:(E,I)=>d.current.addOrRemoveCssClass(E,I),setAriaSort:E=>{a.current&&(E?pt.setAriaSort(a.current,E):pt.removeAriaSort(a.current))},setUserCompDetails:E=>o(E),getUserCompInstance:()=>u.current||void 0};t.setComp(b,a.current,l.current,c.current);const x=t.getSelectAllGui();(w=l.current)==null||w.insertAdjacentElement("afterend",x)},[]);v.useLayoutEffect(()=>my(s,n,c.current,u),[s]),v.useEffect(()=>{t.setDragSource(a.current)},[s]);const f=v.useMemo(()=>!!((s==null?void 0:s.componentFromFramework)&&Of(s.componentClass)),[s]),m=s&&s.componentFromFramework,y=s&&s.componentClass;return Ne.createElement("div",{ref:p,className:"ag-header-cell","col-id":i,role:"columnheader"},Ne.createElement("div",{ref:l,className:"ag-header-cell-resize",role:"presentation"}),Ne.createElement("div",{ref:c,className:"ag-header-cell-comp-wrapper",role:"presentation"},m&&f&&Ne.createElement(y,Ir({},s.params)),m&&!f&&Ne.createElement(y,Ri(Ir({},s.params),{ref:u}))))},Jre=v.memo(Zre),ene=e=>{const{context:t}=v.useContext(Gi),{ctrl:r}=e,[n,i]=v.useState(()=>new Qs),[s,o]=v.useState(()=>new Qs),[a,l]=v.useState("false"),[c,u]=v.useState(),[d,p]=v.useState(),f=v.useMemo(()=>r.getColId(),[]),m=v.useRef(null),y=v.useRef(null),C=v.useRef(),w=v.useCallback(P=>{if(m.current=P,!m.current)return;const A={setWidth:D=>{m.current&&(m.current.style.width=D)},addOrRemoveCssClass:(D,L)=>i(M=>M.setClass(D,L)),setUserCompDetails:D=>p(D),setResizableDisplayed:D=>{o(L=>L.setClass("ag-hidden",!D)),l(D?"false":"true")},setAriaExpanded:D=>u(D),getUserCompInstance:()=>C.current||void 0};r.setComp(A,m.current,y.current)},[]);v.useLayoutEffect(()=>my(d,t,m.current),[d]),v.useEffect(()=>{m.current&&r.setDragSource(m.current)},[d]);const b=v.useMemo(()=>!!((d==null?void 0:d.componentFromFramework)&&Of(d.componentClass)),[d]),x=v.useMemo(()=>"ag-header-group-cell "+n.toString(),[n]),E=v.useMemo(()=>"ag-header-cell-resize "+s.toString(),[s]),I=d&&d.componentFromFramework,k=d&&d.componentClass;return Ne.createElement("div",{ref:w,className:x,"col-id":f,role:"columnheader","aria-expanded":c},I&&b&&Ne.createElement(k,Ir({},d.params)),I&&!b&&Ne.createElement(k,Ri(Ir({},d.params),{ref:C})),Ne.createElement("div",{ref:y,"aria-hidden":a,className:E}))},tne=v.memo(ene);function Jk(){pt.warnOnce("Using custom components without `reactiveCustomComponents = true` is deprecated.")}var rne=e=>{const{context:t,gos:r}=v.useContext(Gi),[n,i]=v.useState(()=>new Qs("ag-header-cell","ag-floating-filter")),[s,o]=v.useState(()=>new Qs),[a,l]=v.useState(()=>new Qs("ag-floating-filter-button","ag-hidden")),[c,u]=v.useState("false"),[d,p]=v.useState(),[f,m]=v.useState(1),y=v.useRef(null),C=v.useRef(null),w=v.useRef(null),b=v.useRef(null),x=v.useRef(),E=v.useRef(),I=W=>{W!=null&&x.current&&x.current(W)},{ctrl:k}=e,P=v.useCallback(W=>{if(y.current=W,!y.current)return;E.current=new on(J=>{x.current=J});const ne={addOrRemoveCssClass:(J,ye)=>i(Pe=>Pe.setClass(J,ye)),addOrRemoveBodyCssClass:(J,ye)=>o(Pe=>Pe.setClass(J,ye)),setButtonWrapperDisplayed:J=>{l(ye=>ye.setClass("ag-hidden",!J)),u(J?"false":"true")},setWidth:J=>{y.current&&(y.current.style.width=J)},setCompDetails:J=>p(J),getFloatingFilterComp:()=>E.current?E.current:null,setMenuIcon:J=>{var ye;return(ye=b.current)==null?void 0:ye.appendChild(J)}};k.setComp(ne,y.current,b.current,C.current)},[]);v.useLayoutEffect(()=>my(d,t,C.current,I),[d]);const A=v.useMemo(()=>n.toString(),[n]),D=v.useMemo(()=>s.toString(),[s]),L=v.useMemo(()=>a.toString(),[a]),M=v.useMemo(()=>!!(d&&d.componentFromFramework&&Of(d.componentClass)),[d]),T=v.useMemo(()=>r.get("reactiveCustomComponents"),[]),O=v.useMemo(()=>{if(d)if(T){const W=new Vre(d.params,()=>m(ne=>ne+1));return I(W),W}else d.componentFromFramework&&Jk()},[d]),Q=O==null?void 0:O.getProps(),X=d&&d.componentFromFramework,B=d&&d.componentClass;return Ne.createElement("div",{ref:P,className:A,role:"gridcell"},Ne.createElement("div",{ref:C,className:D,role:"presentation"},X&&!T&&Ne.createElement(B,Ri(Ir({},d.params),{ref:M?()=>{}:I})),X&&T&&Ne.createElement(Yk.Provider,{value:{setMethods:W=>O.setMethods(W)}},Ne.createElement(B,Ir({},Q)))),Ne.createElement("div",{ref:w,"aria-hidden":c,className:L,role:"presentation"},Ne.createElement("button",{ref:b,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},nne=v.memo(rne),ine=e=>{const{ctrl:t}=e,{topOffset:r,rowHeight:n}=v.useMemo(()=>t.getTopAndHeight(),[]),i=t.getAriaRowIndex(),s=t.getHeaderRowClass(),[o,a]=v.useState(()=>n+"px"),[l,c]=v.useState(()=>r+"px"),u=v.useRef(null),d=v.useRef(null),[p,f]=v.useState(()=>t.getHeaderCtrls()),m=v.useRef(null),y=v.useCallback(b=>{if(m.current=b,!b)return;const x={setHeight:E=>a(E),setTop:E=>c(E),setHeaderCtrls:(E,I,k)=>{d.current=u.current,u.current=E;const P=Zk(d.current,E,I);P!==d.current&&Xk(k,()=>f(P))},setWidth:E=>{m.current&&(m.current.style.width=E)}};t.setComp(x,!1)},[]),C=v.useMemo(()=>({height:o,top:l}),[o,l]),w=v.useCallback(b=>{switch(t.getType()){case LT.COLUMN_GROUP:return Ne.createElement(tne,{ctrl:b,key:b.getInstanceId()});case LT.FLOATING_FILTER:return Ne.createElement(nne,{ctrl:b,key:b.getInstanceId()});default:return Ne.createElement(Jre,{ctrl:b,key:b.getInstanceId()})}},[]);return Ne.createElement("div",{ref:y,className:s,role:"row",style:C,"aria-rowindex":i},p.map(w))},sne=v.memo(ine),one=e=>{const[t,r]=v.useState(!0),[n,i]=v.useState([]),{context:s}=v.useContext(Gi),o=v.useRef(null),a=v.useRef(null),l=v.useRef(null),c=e.pinned==="left",u=e.pinned==="right",d=!c&&!u,p=v.useCallback(y=>{if(o.current=y,!o.current){s.destroyBean(l.current),l.current=null;return}const C={setDisplayed:r,setCtrls:w=>i(w),setCenterWidth:w=>{a.current&&(a.current.style.width=w)},setViewportScrollLeft:w=>{o.current&&(o.current.scrollLeft=w)},setPinnedContainerWidth:w=>{o.current&&(o.current.style.width=w,o.current.style.minWidth=w,o.current.style.maxWidth=w)}};l.current=s.createBean(new mu(e.pinned)),l.current.setComp(C,o.current)},[]),f=t?"":"ag-hidden",m=()=>n.map(y=>Ne.createElement(sne,{ctrl:y,key:y.getInstanceId()}));return Ne.createElement(Ne.Fragment,null,c&&Ne.createElement("div",{ref:p,className:"ag-pinned-left-header "+f,"aria-hidden":!t,role:"rowgroup"},m()),u&&Ne.createElement("div",{ref:p,className:"ag-pinned-right-header "+f,"aria-hidden":!t,role:"rowgroup"},m()),d&&Ne.createElement("div",{ref:p,className:"ag-header-viewport "+f,role:"presentation"},Ne.createElement("div",{ref:a,className:"ag-header-container",role:"rowgroup"},m())))},MP=v.memo(one),ane=()=>{const[e,t]=v.useState(()=>new Qs),[r,n]=v.useState(),{context:i}=v.useContext(Gi),s=v.useRef(null),o=v.useRef(null),a=v.useCallback(u=>{if(s.current=u,!u){i.destroyBean(o.current),o.current=null;return}const d={addOrRemoveCssClass:(p,f)=>t(m=>m.setClass(p,f)),setHeightAndMinHeight:p=>n(p)};o.current=i.createBean(new vu),o.current.setComp(d,s.current,s.current)},[]),l=v.useMemo(()=>"ag-header "+e.toString(),[e]),c=v.useMemo(()=>({height:r,minHeight:r}),[r]);return Ne.createElement("div",{ref:a,className:l,style:c,role:"presentation"},Ne.createElement(MP,{pinned:"left"}),Ne.createElement(MP,{pinned:null}),Ne.createElement(MP,{pinned:"right"}))},lne=v.memo(ane),cne=(e,t)=>{v.useEffect(()=>{const r=t.current;if(r){const n=r.parentElement;if(n){const i=document.createComment(e);return n.insertBefore(i,r),()=>{n.removeChild(i)}}}},[e])},Yu=cne,une=e=>{const t=v.useRef(e),r=v.useRef(),n=v.useRef(!1),i=v.useRef(!1),[,s]=v.useState(0);n.current&&(i.current=!0),v.useEffect(()=>(n.current||(r.current=t.current(),n.current=!0),s(o=>o+1),()=>{i.current&&r.current&&r.current()}),[])},dne=e=>{const[t,r]=v.useState(),{context:n,popupService:i,localeService:s,gos:o}=v.useContext(Gi);return une(()=>{const{editDetails:a,cellCtrl:l,eParentCell:c}=e,{compDetails:u}=a,d=o.get("stopEditingWhenCellsLoseFocus"),p=n.createBean(new H$(u.params)),f=p.getGui();if(e.jsChildComp){const x=e.jsChildComp.getGui();x&&f.appendChild(x)}const m={column:l.getColumn(),rowNode:l.getRowNode(),type:"popupCellEditor",eventSource:c,ePopup:f,position:a.popupPosition,keepWithinBounds:!0},y=i.positionPopupByComponent.bind(i,m),C=s.getLocaleTextFunc(),w=i.addPopup({modal:d,eChild:f,closeOnEsc:!0,closedCallback:()=>{l.onPopupEditorClosed()},anchorToElement:c,positionCallback:y,ariaLabel:C("ariaLabelCellEditor","Cell Editor")}),b=w?w.hideFunc:void 0;return r(p),e.jsChildComp&&e.jsChildComp.afterGuiAttached&&e.jsChildComp.afterGuiAttached(),()=>{b!=null&&b(),n.destroyBean(p)}}),Ne.createElement(Ne.Fragment,null,t&&e.wrappedContent&&oh.createPortal(e.wrappedContent,t.getGui()))},BF=v.memo(dne),hne=(e,t,r,n,i,s)=>{const{context:o}=v.useContext(Gi),a=v.useCallback(()=>{const l=i.current;if(!l)return;const c=l.getGui();c&&c.parentElement&&c.parentElement.removeChild(c),o.destroyBean(l),i.current=void 0},[]);v.useEffect(()=>{const l=e!=null,c=e&&e.compDetails&&!e.compDetails.componentFromFramework,u=t&&r==null;if(!(l&&c&&!u)){a();return}const p=e.compDetails;if(i.current){const w=i.current,x=w.refresh!=null&&e.force==!1?w.refresh(p.params):!1;if(x===!0||x===void 0)return;a()}const f=p.newAgStackInstance();if(!f)return;const m=f.resolveNow(null,w=>w);if(!m)return;const y=m.getGui();if(!y)return;(t?r:s.current).appendChild(y),i.current=m},[e,t,n]),v.useEffect(()=>a,[])},pne=hne,fne=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new on(r=>{this.resolveInstanceCreated=r}),this.onValueChange=r=>this.updateValue(r),this.value=e.value}getProps(){return Ri(Ir({},this.cellEditorParams),{initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange})}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){Qk(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){var t;this.componentInstance=e,(t=this.resolveInstanceCreated)==null||t.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},gne=(e,t,r)=>{const n=r.getColumn();if(!e&&t.isPopup&&t.isPopup()){const i=`AG Grid: Found an issue in column ${n.getColId()}. If using React, specify an editor is a popup using colDef.cellEditorPopup=true. AG Grid React cannot depend on the editor component specifying if it's in a popup (via the isPopup() method on the editor), as React needs to know this information BEFORE the component is created.`;pt.doOnce(()=>console.warn(i),"jsEditorComp-isPopup-"+r.getColumn().getColId())}if(e&&t.getPopupPosition&&t.getPopupPosition()!=null){const i=`AG Grid: Found an issue in column ${n.getColId()}. If using React, specify an editor popup position using colDef.cellEditorPopupPosition=true. AG Grid React cannot depend on the editor component specifying it's position (via the getPopupPosition() method on the editor), as React needs to know this information BEFORE the component is created.`;pt.doOnce(()=>console.warn(i),"jsEditorComp-getPopupPosition-"+r.getColumn().getColId())}},mne=(e,t,r)=>{const{compProxy:n}=e;r(n);const i=n.getProps(),s=Of(t);return Ne.createElement(Yk.Provider,{value:{setMethods:o=>n.setMethods(o)}},s&&Ne.createElement(t,Ir({},i)),!s&&Ne.createElement(t,Ri(Ir({},i),{ref:o=>n.setRef(o)})))},VF=(e,t,r)=>{const n=e.compProxy;return Ne.createElement(Ne.Fragment,null,!n&&Ne.createElement(t,Ri(Ir({},e.compDetails.params),{ref:r})),n&&mne(e,t,r))},vne=(e,t,r,n,i,s)=>{const o=e.compDetails,a=o.componentClass,l=o.componentFromFramework&&!e.popup,c=o.componentFromFramework&&e.popup,u=!o.componentFromFramework&&e.popup;return Ne.createElement(Ne.Fragment,null,l&&VF(e,a,t),c&&Ne.createElement(BF,{editDetails:e,cellCtrl:i,eParentCell:n,wrappedContent:VF(e,a,r)}),u&&s&&Ne.createElement(BF,{editDetails:e,cellCtrl:i,eParentCell:n,jsChildComp:s}))},yne=(e,t,r,n,i,s,o)=>{const{compDetails:a,value:l}=e,c=!a,u=a&&a.componentFromFramework,d=a&&a.componentClass,p=l!=null&&l.toString?l.toString():l,f=()=>Ne.createElement(Ne.Fragment,null,c&&Ne.createElement(Ne.Fragment,null,p),u&&!s&&Ne.createElement(d,Ri(Ir({},a.params),{key:t,ref:n})),u&&s&&Ne.createElement(d,Ri(Ir({},a.params),{key:t})));return Ne.createElement(Ne.Fragment,null,i?Ne.createElement("span",{role:"presentation",id:`cell-${r}`,className:"ag-cell-value",ref:o},f()):f())},Cne=e=>{const{context:t}=v.useContext(Gi),{cellCtrl:r,printLayout:n,editingRow:i}=e,s=r.getTabIndex(),o=r.getColumnIdSanitised(),a=r.getInstanceId(),[l,c]=v.useState(()=>r.isCellRenderer()?void 0:{compDetails:void 0,value:r.getValueToDisplay(),force:!1}),[u,d]=v.useState(),[p,f]=v.useState(1),[m,y]=v.useState(),[C,w]=v.useState(!1),[b,x]=v.useState(!1),[E,I]=v.useState(!1),[k,P]=v.useState(),A=v.useMemo(()=>r.isForceWrapper(),[r]),D=v.useMemo(()=>r.getCellAriaRole(),[r]),L=v.useRef(null),M=v.useRef(null),T=v.useRef(),O=v.useRef(),Q=v.useRef(),X=v.useRef([]),B=v.useRef(),[W,ne]=v.useState(0),J=v.useCallback(G=>{B.current=G,ne(H=>H+1)},[]),ye=l!=null&&(C||E||b),Pe=A||ye,ue=v.useCallback((G,H)=>{O.current=H,H&&(gne(G,H,r),H.isCancelBeforeStart&&H.isCancelBeforeStart()&&setTimeout(()=>{r.stopEditing(!0),r.focusCell(!0)}))},[r]),Z=v.useCallback(G=>ue(!0,G),[ue]),Ve=v.useCallback(G=>ue(!1,G),[ue]);let ve=v.useRef();ve.current||(ve.current=new ry(()=>L.current)),pne(l,Pe,B.current,W,T,L);const Ze=v.useRef();v.useLayoutEffect(()=>{const G=Ze.current,H=l;if(Ze.current=l,G==null||G.compDetails==null||H==null||H.compDetails==null)return;const ce=G.compDetails,te=H.compDetails;if(ce.componentClass!=te.componentClass||M.current==null||M.current.refresh==null)return;M.current.refresh(te.params)!=!0&&f(K=>K+1)},[l]),v.useLayoutEffect(()=>{if(!(u&&!u.compDetails.componentFromFramework))return;const H=u.compDetails,ce=u.popup===!0,te=Xre(H);if(!te)return;const ee=te.getGui();if(ue(ce,te),!ce){const K=(A?Q:L).current;K==null||K.appendChild(ee),te.afterGuiAttached&&te.afterGuiAttached()}return P(te),()=>{t.destroyBean(te),ue(ce,void 0),P(void 0),ee&&ee.parentElement&&ee.parentElement.removeChild(ee)}},[u]);const je=v.useCallback(G=>{if(Q.current=G,!Q.current){X.current.forEach(ce=>ce()),X.current=[];return}const H=ce=>{var te;if(ce){const ee=ce.getGui();(te=Q.current)==null||te.insertAdjacentElement("afterbegin",ee),X.current.push(()=>{t.destroyBean(ce),pt.removeFromParent(ee)})}return ce};if(C){const ce=r.createSelectionCheckbox();H(ce)}E&&H(r.createDndSource()),b&&H(r.createRowDragComp())},[r,t,E,b,C]),de=v.useCallback(G=>{if(L.current=G,!L.current||!r)return;const H={addOrRemoveCssClass:(te,ee)=>ve.current.addOrRemoveCssClass(te,ee),setUserStyles:te=>y(te),getFocusableElement:()=>L.current,setIncludeSelection:te=>w(te),setIncludeRowDrag:te=>x(te),setIncludeDndSource:te=>I(te),getCellEditor:()=>O.current||null,getCellRenderer:()=>M.current?M.current:T.current,getParentOfValue:()=>B.current?B.current:Q.current?Q.current:L.current,setRenderDetails:(te,ee,K)=>{c(U=>(U==null?void 0:U.compDetails)!==te||(U==null?void 0:U.value)!==ee||(U==null?void 0:U.force)!==K?{value:ee,compDetails:te,force:K}:U)},setEditDetails:(te,ee,K,U)=>{if(te){let j;U?j=new fne(te.params,()=>f(re=>re+1)):te.componentFromFramework&&Jk(),d({compDetails:te,popup:ee,popupPosition:K,compProxy:j}),ee||c(void 0)}else d(j=>{j!=null&&j.compProxy&&(O.current=void 0)})}},ce=Q.current||void 0;r.setComp(H,L.current,ce,n,i)},[]),q=v.useMemo(()=>!!(l&&l.compDetails&&l.compDetails.componentFromFramework&&Of(l.compDetails.componentClass)),[l]);v.useLayoutEffect(()=>{var G;L.current&&(ve.current.addOrRemoveCssClass("ag-cell-value",!Pe),ve.current.addOrRemoveCssClass("ag-cell-inline-editing",!!u&&!u.popup),ve.current.addOrRemoveCssClass("ag-cell-popup-editing",!!u&&!!u.popup),ve.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!u||!!u.popup),(G=r.getRowCtrl())==null||G.setInlineEditingCss(!!u),r.shouldRestoreFocus()&&!r.isEditing()&&L.current.focus({preventScroll:!0}))});const le=()=>Ne.createElement(Ne.Fragment,null,l!=null&&yne(l,p,a,M,Pe,q,J),u!=null&&vne(u,Ve,Z,L.current,r,k));return Ne.createElement("div",{ref:de,style:m,tabIndex:s,role:D,"col-id":o},Pe?Ne.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:je},le()):le())},wne=v.memo(Cne),bne=e=>{const{context:t,gos:r}=v.useContext(Gi),{rowCtrl:n,containerType:i}=e,s=n.getTabIndex(),o=v.useRef(n.getDomOrder()),a=n.isFullWidth(),l=n.getRowNode().displayed,[c,u]=v.useState(()=>l?n.getRowIndex():null),[d,p]=v.useState(()=>n.getRowId()),[f,m]=v.useState(()=>n.getBusinessKey()),[y,C]=v.useState(()=>n.getRowStyles()),w=v.useRef(null),b=v.useRef(null),[x,E]=v.useState(()=>null),[I,k]=v.useState(),[P,A]=v.useState(()=>l?n.getInitialRowTop(i):void 0),[D,L]=v.useState(()=>l?n.getInitialTransform(i):void 0),M=v.useRef(null),T=v.useRef(),O=v.useRef(!1),[Q,X]=v.useState(0);v.useEffect(()=>{var ve;if(O.current||!I||Q>10)return;const Ze=(ve=M.current)==null?void 0:ve.firstChild;Ze?(n.setupDetailRowAutoHeight(Ze),O.current=!0):X(je=>je+1)},[I,Q]);let B=v.useRef();B.current||(B.current=new ry(()=>M.current));const W=v.useCallback(ve=>{if(M.current=ve,!M.current){n.unsetComp(i);return}if(!n.isAlive())return;const Ze={setTop:A,setTransform:L,addOrRemoveCssClass:(je,de)=>B.current.addOrRemoveCssClass(je,de),setDomOrder:je=>o.current=je,setRowIndex:u,setRowId:p,setRowBusinessKey:m,setUserStyles:C,setCellCtrls:(je,de)=>{b.current=w.current,w.current=je;const q=Zk(b.current,je,o.current);q!==b.current&&Xk(de,()=>E(q))},showFullWidth:je=>k(je),getFullWidthCellRenderer:()=>T.current,refreshFullWidth:je=>ue.current?(k(de=>Ri(Ir({},de),{params:je()})),!0):!T.current||!T.current.refresh?!1:T.current.refresh(je())};n.setComp(Ze,M.current,i)},[]);v.useLayoutEffect(()=>my(I,t,M.current,T),[I]);const ne=v.useMemo(()=>{const ve={top:P,transform:D};return Object.assign(ve,y),ve},[P,D,y]),J=a&&I&&I.componentFromFramework,ye=!a&&x!=null,Pe=v.useMemo(()=>!!((I==null?void 0:I.componentFromFramework)&&Of(I.componentClass)),[I]),ue=v.useRef(!1);v.useEffect(()=>{ue.current=Pe&&!!I&&!!r.get("reactiveCustomComponents")},[Pe,I]);const Z=()=>x==null?void 0:x.map(ve=>Ne.createElement(wne,{cellCtrl:ve,editingRow:n.isEditing(),printLayout:n.isPrintLayout(),key:ve.getInstanceId()})),Ve=()=>{const ve=I.componentClass;return Ne.createElement(Ne.Fragment,null,Pe&&Ne.createElement(ve,Ir({},I.params)),!Pe&&Ne.createElement(ve,Ri(Ir({},I.params),{ref:T})))};return Ne.createElement("div",{ref:W,role:"row",style:ne,"row-index":c,"row-id":d,"row-business-key":f,tabIndex:s},ye&&Z(),J&&Ve())},Sne=v.memo(bne),xne=e=>{const{context:t}=v.useContext(Gi),{name:r}=e,n=v.useMemo(()=>j$(r),[r]),i=v.useRef(null),s=v.useRef(null),o=v.useRef([]),a=v.useRef([]),[l,c]=v.useState(()=>[]),u=v.useRef(!1),d=v.useRef(),p=v.useMemo(()=>ww.getRowContainerCssClasses(r),[r]),f=v.useMemo(()=>No(p.viewport),[p]),m=v.useMemo(()=>No(p.container),[p]),y=r===vr.CENTER||r===vr.TOP_CENTER||r===vr.BOTTOM_CENTER||r===vr.STICKY_TOP_CENTER||r===vr.STICKY_BOTTOM_CENTER,C=y?i:s;Yu(" AG Row Container "+r+" ",C);const w=v.useCallback(()=>y?i.current!=null&&s.current!=null:s.current!=null,[]),b=v.useCallback(()=>y?i.current==null&&s.current==null:s.current==null,[]),x=v.useCallback(()=>{if(b()&&(t.destroyBean(d.current),d.current=null),w()){const P=D=>{const L=Zk(a.current,o.current,u.current);L!==a.current&&(a.current=L,Xk(D,()=>c(L)))},A={setViewportHeight:D=>{i.current&&(i.current.style.height=D)},setRowCtrls:({rowCtrls:D,useFlushSync:L})=>{const M=!!L&&o.current.length>0&&D.length>0;o.current=D,P(M)},setDomOrder:D=>{u.current!=D&&(u.current=D,P(!1))},setContainerWidth:D=>{s.current&&(s.current.style.width=D)}};d.current=t.createBean(new ww(r)),d.current.setComp(A,s.current,i.current)}},[w,b]),E=v.useCallback(P=>{s.current=P,x()},[x]),I=v.useCallback(P=>{i.current=P,x()},[x]),k=()=>Ne.createElement("div",{className:m,ref:E,role:"rowgroup"},l.map(P=>Ne.createElement(Sne,{rowCtrl:P,containerType:n,key:P.getInstanceId()})));return Ne.createElement(Ne.Fragment,null,y?Ne.createElement("div",{className:f,ref:I,role:"presentation"},k()):k())},Ene=v.memo(xne),Pne=()=>{const{context:e,agStackComponentsRegistry:t,resizeObserverService:r}=v.useContext(Gi),[n,i]=v.useState(""),[s,o]=v.useState(0),[a,l]=v.useState(0),[c,u]=v.useState("0px"),[d,p]=v.useState("0px"),[f,m]=v.useState("100%"),[y,C]=v.useState("0px"),[w,b]=v.useState("0px"),[x,E]=v.useState("100%"),[I,k]=v.useState(""),[P,A]=v.useState(""),[D,L]=v.useState(null),[M,T]=v.useState(""),[O,Q]=v.useState(null),[X,B]=v.useState("ag-layout-normal");let W=v.useRef();W.current||(W.current=new ry(()=>ne.current));const ne=v.useRef(null),J=v.useRef(null),ye=v.useRef(null),Pe=v.useRef(null),ue=v.useRef(null),Z=v.useRef(null),Ve=v.useRef(null),ve=v.useRef([]),Ze=v.useRef([]);Yu(" AG Grid Body ",ne),Yu(" AG Pinned Top ",J),Yu(" AG Sticky Top ",ye),Yu(" AG Middle ",Z),Yu(" AG Pinned Bottom ",Ve);const je=v.useCallback(Ce=>{if(ne.current=Ce,!ne.current){e.destroyBeans(ve.current),Ze.current.forEach(Se=>Se()),ve.current=[],Ze.current=[];return}if(!e)return;const be=Se=>{const De=t.getComponentClass(Se),Be=e.createBean(new De);return ve.current.push(Be),Be},me=(Se,De)=>{Se.appendChild(De),Ze.current.push(()=>Se.removeChild(De))};me(ne.current,document.createComment(" AG Fake Horizontal Scroll ")),me(ne.current,be("AG-FAKE-HORIZONTAL-SCROLL").getGui()),me(ne.current,document.createComment(" AG Overlay Wrapper ")),me(ne.current,be("AG-OVERLAY-WRAPPER").getGui()),ue.current&&(me(ue.current,document.createComment(" AG Fake Vertical Scroll ")),me(ue.current,be("AG-FAKE-VERTICAL-SCROLL").getGui()));const ie={setRowAnimationCssOnBodyViewport:i,setColumnCount:Se=>{ne.current&&pt.setAriaColCount(ne.current,Se)},setRowCount:Se=>{ne.current&&pt.setAriaRowCount(ne.current,Se)},setTopHeight:o,setBottomHeight:l,setStickyTopHeight:u,setStickyTopTop:p,setStickyTopWidth:m,setTopDisplay:k,setBottomDisplay:A,setColumnMovingCss:(Se,De)=>W.current.addOrRemoveCssClass(Se,De),updateLayoutClasses:B,setAlwaysVerticalScrollClass:L,setPinnedTopBottomOverflowY:T,setCellSelectableCss:(Se,De)=>Q(De?Se:null),setBodyViewportWidth:Se=>{Z.current&&(Z.current.style.width=Se)},registerBodyViewportResizeListener:Se=>{if(Z.current){const De=r.observeResize(Z.current,Se);Ze.current.push(()=>De())}},setStickyBottomHeight:C,setStickyBottomBottom:b,setStickyBottomWidth:E},he=e.createBean(new di);ve.current.push(he),he.setComp(ie,ne.current,Z.current,J.current,Ve.current,ye.current,Pe.current)},[]),de=v.useMemo(()=>No("ag-root","ag-unselectable",X),[X]),q=v.useMemo(()=>No("ag-body-viewport",n,X,D,O),[n,X,D,O]),le=v.useMemo(()=>No("ag-body",X),[X]),G=v.useMemo(()=>No("ag-floating-top",O),[O]),H=v.useMemo(()=>No("ag-sticky-top",O),[O]),ce=v.useMemo(()=>No("ag-sticky-bottom",O),[O]),te=v.useMemo(()=>No("ag-floating-bottom",O),[O]),ee=v.useMemo(()=>({height:s,minHeight:s,display:I,overflowY:M}),[s,I,M]),K=v.useMemo(()=>({height:c,top:d,width:f}),[c,d,f]),U=v.useMemo(()=>({height:y,bottom:w,width:x}),[y,w,x]),j=v.useMemo(()=>({height:a,minHeight:a,display:P,overflowY:M}),[a,P,M]),re=Ce=>Ne.createElement(Ene,{name:Ce,key:`${Ce}-container`}),se=({section:Ce,children:be,className:me,style:ie})=>Ne.createElement("div",{ref:Ce,className:me,role:"presentation",style:ie},be.map(re));return Ne.createElement("div",{ref:je,className:de,role:"treegrid"},Ne.createElement(lne,null),se({section:J,className:G,style:ee,children:[vr.TOP_LEFT,vr.TOP_CENTER,vr.TOP_RIGHT,vr.TOP_FULL_WIDTH]}),Ne.createElement("div",{className:le,ref:ue,role:"presentation"},se({section:Z,className:q,children:[vr.LEFT,vr.CENTER,vr.RIGHT,vr.FULL_WIDTH]})),se({section:ye,className:H,style:K,children:[vr.STICKY_TOP_LEFT,vr.STICKY_TOP_CENTER,vr.STICKY_TOP_RIGHT,vr.STICKY_TOP_FULL_WIDTH]}),se({section:Pe,className:ce,style:U,children:[vr.STICKY_BOTTOM_LEFT,vr.STICKY_BOTTOM_CENTER,vr.STICKY_BOTTOM_RIGHT,vr.STICKY_BOTTOM_FULL_WIDTH]}),se({section:Ve,className:te,style:j,children:[vr.BOTTOM_LEFT,vr.BOTTOM_CENTER,vr.BOTTOM_RIGHT,vr.BOTTOM_FULL_WIDTH]}))},Rne=v.memo(Pne),Tne=(e,t)=>{const{children:r,eFocusableElement:n,onTabKeyDown:i,gridCtrl:s,forceFocusOutWhenTabGuardsAreEmpty:o}=e,{context:a}=v.useContext(Gi),l=v.useRef(null),c=v.useRef(null),u=v.useRef(),d=C=>{const w=C==null?void 0:parseInt(C,10).toString();[l,c].forEach(b=>{var x,E;w===void 0?(x=b.current)==null||x.removeAttribute("tabindex"):(E=b.current)==null||E.setAttribute("tabindex",w)})};v.useImperativeHandle(t,()=>({forceFocusOutOfContainer(C){var w;(w=u.current)==null||w.forceFocusOutOfContainer(C)}}));const p=v.useCallback(()=>{if(!l.current&&!c.current){a.destroyBean(u.current),u.current=null;return}if(l.current&&c.current){const C={setTabIndex:d};u.current=a.createBean(new ex({comp:C,eTopGuard:l.current,eBottomGuard:c.current,eFocusableElement:n,onTabKeyDown:i,forceFocusOutWhenTabGuardsAreEmpty:o,focusInnerElement:w=>s.focusInnerElement(w)}))}},[]),f=v.useCallback(C=>{l.current=C,p()},[p]),m=v.useCallback(C=>{c.current=C,p()},[p]),y=C=>{const w=C==="top"?d0.TAB_GUARD_TOP:d0.TAB_GUARD_BOTTOM;return Ne.createElement("div",{className:`${d0.TAB_GUARD} ${w}`,role:"presentation",ref:C==="top"?f:m})};return Ne.createElement(Ne.Fragment,null,y("top"),r,y("bottom"))},Ane=v.forwardRef(Tne),_ne=v.memo(Ane),Dne=({context:e})=>{const[t,r]=v.useState(""),[n,i]=v.useState(""),[s,o]=v.useState(""),[a,l]=v.useState(null),[c,u]=v.useState(null),[d,p]=v.useState(!1),[f,m]=v.useState(),y=v.useRef(null),C=v.useRef(null),w=v.useRef(),[b,x]=v.useState(null),E=v.useRef(()=>{}),I=v.useCallback(()=>{},[]),k=v.useMemo(()=>e.isDestroyed()?null:e.getBean("beans"),[e]);Yu(" AG Grid ",C);const P=v.useCallback(T=>{if(C.current=T,!C.current){e.destroyBean(y.current),y.current=null;return}if(e.isDestroyed())return;y.current=e.createBean(new bu);const O=y.current;E.current=O.focusInnerElement.bind(O);const Q={destroyGridUi:()=>{},setRtlClass:r,forceFocusOutOfContainer:X=>{var B;(B=w.current)==null||B.forceFocusOutOfContainer(X)},updateLayoutClasses:o,getFocusableContainers:()=>{var X,B;const W=[],ne=(X=C.current)==null?void 0:X.querySelector(".ag-root"),J=(B=C.current)==null?void 0:B.querySelector(".ag-side-bar:not(.ag-hidden)");return ne&&W.push(ne),J&&W.push(J),W},setCursor:l,setUserSelect:u};O.setComp(Q,C.current,C.current),p(!0)},[]);v.useEffect(()=>{if(!f||!k||!y.current||!b||!C.current)return;const T=y.current,O=[],{agStackComponentsRegistry:Q}=k,X=Q.getComponentClass("AG-GRID-HEADER-DROP-ZONES"),B=Q.getComponentClass("AG-SIDE-BAR"),W=Q.getComponentClass("AG-STATUS-BAR"),ne=Q.getComponentClass("AG-WATERMARK"),J=Q.getComponentClass("AG-PAGINATION"),ye=[],Pe=C.current;if(T.showDropZones()&&X){const ue=e.createBean(new X),Z=ue.getGui();Pe.insertAdjacentElement("afterbegin",Z),ye.push(Z),O.push(ue)}if(T.showSideBar()&&B){const ue=e.createBean(new B),Z=ue.getGui(),Ve=b.querySelector(".ag-tab-guard-bottom");Ve&&(Ve.insertAdjacentElement("beforebegin",Z),ye.push(Z)),O.push(ue)}if(T.showStatusBar()&&W){const ue=e.createBean(new W),Z=ue.getGui();Pe.insertAdjacentElement("beforeend",Z),ye.push(Z),O.push(ue)}if(J){const ue=e.createBean(new J),Z=ue.getGui();Pe.insertAdjacentElement("beforeend",Z),ye.push(Z),O.push(ue)}if(T.showWatermark()&&ne){const ue=e.createBean(new ne),Z=ue.getGui();Pe.insertAdjacentElement("beforeend",Z),ye.push(Z),O.push(ue)}return()=>{e.destroyBeans(O),ye.forEach(ue=>{ue.parentElement&&ue.parentElement.removeChild(ue)})}},[f,b,k]);const A=v.useMemo(()=>No("ag-root-wrapper",t,n,s),[t,n,s]),D=v.useMemo(()=>No("ag-root-wrapper-body","ag-focus-managed",s),[s]),L=v.useMemo(()=>({userSelect:c??"",WebkitUserSelect:c??"",cursor:a??""}),[c,a]),M=v.useCallback(T=>{w.current=T,m(T!==null)},[]);return Ne.createElement("div",{ref:P,className:A,style:L,role:"presentation"},Ne.createElement("div",{className:D,ref:x,role:"presentation"},d&&b&&k&&Ne.createElement(Gi.Provider,{value:k},Ne.createElement(_ne,{ref:M,eFocusableElement:b,onTabKeyDown:I,gridCtrl:y.current,forceFocusOutWhenTabGuardsAreEmpty:!0},Ne.createElement(Rne,null)))))},kne=v.memo(Dne),uW=e=>{var t,r;const n=v.useRef(),i=v.useRef(null),s=v.useRef(null),o=v.useRef([]),a=v.useRef([]),l=v.useRef(e),c=v.useRef(!1),[u,d]=v.useState(void 0),[,p]=v.useState(0),f=v.useCallback(C=>{if(i.current=C,!i.current){o.current.forEach(P=>P()),o.current.length=0;return}const w=e.modules||[];s.current||(s.current=new qre(()=>p(P=>P+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),o.current.push(()=>{var P;(P=s.current)==null||P.destroy(),s.current=null}));const b=gw.combineAttributesAndGridOptions(e.gridOptions,e),x={providedBeanInstances:{frameworkComponentWrapper:new Nne(s.current,!!b.reactiveCustomComponents)},modules:w,frameworkOverrides:new One},E=P=>{d(P),o.current.push(()=>{P.destroy()}),P.getBean(Sd.NAME).whenReady(()=>{if(P.isDestroyed())return;const D=n.current;D&&e.setGridApi&&e.setGridApi(D,new Kp(D))})},I=P=>{P.getBean(Sd.NAME).whenReady(()=>{a.current.forEach(D=>D()),a.current.length=0,c.current=!0})},k=new nee;n.current=k.create(i.current,b,E,I,x)},[]),m=v.useMemo(()=>Ir({height:"100%"},e.containerStyle||{}),[e.containerStyle]),y=v.useCallback(C=>{c.current?C():a.current.push(C)},[]);return v.useEffect(()=>{const C=Ine(l.current,e);l.current=e,y(()=>{n.current&&gw.processOnChange(C,n.current)})},[e]),Ne.createElement("div",{style:m,className:e.className,ref:f},u&&!u.isDestroyed()?Ne.createElement(kne,{context:u}):null,(r=(t=s.current)==null?void 0:t.getPortals())!=null?r:null)};function Ine(e,t){const r={};return Object.keys(t).forEach(n=>{const i=t[n];e[n]!==i&&(r[n]=i)}),r}var Nne=class extends iee{constructor(e,t){super(),this.parent=e,this.reactiveCustomComponents=t}createWrapper(e,t){if(this.reactiveCustomComponents){const i=(s=>{switch(s){case"filter":return Bre;case"floatingFilterComponent":return Hre;case"dateComponent":return jre;case"loadingOverlayComponent":return zre;case"noRowsOverlayComponent":return Ure;case"statusPanel":return Wre;case"toolPanel":return Kre;case"menuItem":return $re}})(t.propertyName);if(i)return new i(e,this.parent,t)}else switch(t.propertyName){case"filter":case"floatingFilterComponent":case"dateComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":Jk();break}const r=!t.cellRenderer&&t.propertyName!=="toolPanel";return new iW(e,this.parent,t,r)}},Mne=v.forwardRef((e,t)=>{const{ctrlsFactory:r,context:n,gos:i,resizeObserverService:s,clientSideRowModel:o,serverSideRowModel:a}=v.useContext(Gi),[l,c]=v.useState(()=>new Qs),[u,d]=v.useState(()=>new Qs),[p,f]=v.useState(),[m,y]=v.useState(),C=v.useRef(),w=v.useRef(null),b=v.useRef(),x=v.useMemo(()=>Yt.__getGridRegisteredModules(e.api.getGridId()),[e]),E=v.useMemo(()=>l.toString()+" ag-details-row",[l]),I=v.useMemo(()=>u.toString()+" ag-details-grid",[u]);t&&v.useImperativeHandle(t,()=>({refresh(){var A,D;return(D=(A=C.current)==null?void 0:A.refresh())!=null?D:!1}})),e.template&&pt.warnOnce("detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/");const k=v.useCallback(A=>{if(w.current=A,!w.current){n.destroyBean(C.current),b.current&&b.current();return}const D={addOrRemoveCssClass:(M,T)=>c(O=>O.setClass(M,T)),addOrRemoveDetailGridCssClass:(M,T)=>d(O=>O.setClass(M,T)),setDetailGrid:M=>f(M),setRowData:M=>y(M),getGui:()=>w.current},L=r.getInstance("detailCellRenderer");if(L&&(n.createBean(L),L.init(D,e),C.current=L,i.get("detailRowAutoHeight"))){const M=()=>{if(w.current==null)return;const T=w.current.clientHeight;T!=null&&T>0&&setTimeout(()=>{e.node.setRowHeight(T),o?o.onRowHeightChanged():a&&a.onRowHeightChanged()},0)};b.current=s.observeResize(w.current,M),M()}},[]),P=v.useCallback((A,D)=>{var L;(L=C.current)==null||L.registerDetailWithMaster(A,D)},[]);return Ne.createElement("div",{className:E,ref:k},p&&Ne.createElement(uW,Ri(Ir({className:I},p),{modules:x,rowData:m,setGridApi:P})))}),One=class extends tU{constructor(){super("react"),this.frameworkComponents={agGroupCellRenderer:jF,agGroupRowRenderer:jF,agDetailCellRenderer:Mne},this.wrapIncoming=(e,t)=>t==="ensureVisible"?Qre(e):e(),this.renderingEngine="react"}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}},Fne=class extends v.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=(e,t)=>{this.api=e,this.columnApi=t,this.apiListeners.forEach(r=>r(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return Ne.createElement(uW,Ri(Ir({},this.props),{setGridApi:this.setGridApi}))}};const Lne={},HF=e=>{let t;const r=new Set,n=(u,d)=>{const p=typeof u=="function"?u(t):u;if(!Object.is(p,t)){const f=t;t=d??(typeof p!="object"||p===null)?p:Object.assign({},t,p),r.forEach(m=>m(t,f))}},i=()=>t,l={setState:n,getState:i,getInitialState:()=>c,subscribe:u=>(r.add(u),()=>r.delete(u)),destroy:()=>{(Lne?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},c=t=e(n,i,l);return l},Gne=e=>e?HF(e):HF;var dW={exports:{}},hW={},pW={exports:{}},fW={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tf=v;function jne(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bne=typeof Object.is=="function"?Object.is:jne,Vne=tf.useState,Hne=tf.useEffect,zne=tf.useLayoutEffect,$ne=tf.useDebugValue;function Une(e,t){var r=t(),n=Vne({inst:{value:r,getSnapshot:t}}),i=n[0].inst,s=n[1];return zne(function(){i.value=r,i.getSnapshot=t,OP(i)&&s({inst:i})},[e,r,t]),Hne(function(){return OP(i)&&s({inst:i}),e(function(){OP(i)&&s({inst:i})})},[e]),$ne(r),r}function OP(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Bne(e,r)}catch{return!0}}function Wne(e,t){return t()}var Kne=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Wne:Une;fW.useSyncExternalStore=tf.useSyncExternalStore!==void 0?tf.useSyncExternalStore:Kne;pW.exports=fW;var qne=pW.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dx=v,Yne=qne;function Qne(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xne=typeof Object.is=="function"?Object.is:Qne,Zne=Yne.useSyncExternalStore,Jne=dx.useRef,eie=dx.useEffect,tie=dx.useMemo,rie=dx.useDebugValue;hW.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var s=Jne(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=tie(function(){function l(f){if(!c){if(c=!0,u=f,f=n(f),i!==void 0&&o.hasValue){var m=o.value;if(i(m,f))return d=m}return d=f}if(m=d,Xne(u,f))return m;var y=n(f);return i!==void 0&&i(m,y)?(u=f,m):(u=f,d=y)}var c=!1,u,d,p=r===void 0?null:r;return[function(){return l(t())},p===null?void 0:function(){return l(p())}]},[t,r,n,i]);var a=Zne(e,s[0],s[1]);return eie(function(){o.hasValue=!0,o.value=a},[a]),rie(a),a};dW.exports=hW;var gW=dW.exports;const nie=lo(gW),mW={},{useDebugValue:iie}=Ne,{useSyncExternalStoreWithSelector:sie}=nie;let zF=!1;const oie=e=>e;function aie(e,t=oie,r){(mW?"production":void 0)!=="production"&&r&&!zF&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),zF=!0);const n=sie(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return iie(n),n}const lie=e=>{(mW?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Gne(e):e,r=(n,i)=>aie(t,n,i);return Object.assign(r,t),r},cie=e=>lie,uie={};function die(e,t){let r;try{r=e()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,void 0),a=(s=r.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>r.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>r.removeItem(i)}}const lv=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return lv(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return lv(n)(r)}}}},hie=(e,t)=>(r,n,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:C=>C,version:0,merge:(C,w)=>({...w,...C}),...t},o=!1;const a=new Set,l=new Set;let c;try{c=s.getStorage()}catch{}if(!c)return e((...C)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...C)},n,i);const u=lv(s.serialize),d=()=>{const C=s.partialize({...n()});let w;const b=u({state:C,version:s.version}).then(x=>c.setItem(s.name,x)).catch(x=>{w=x});if(w)throw w;return b},p=i.setState;i.setState=(C,w)=>{p(C,w),d()};const f=e((...C)=>{r(...C),d()},n,i);let m;const y=()=>{var C;if(!c)return;o=!1,a.forEach(b=>b(n()));const w=((C=s.onRehydrateStorage)==null?void 0:C.call(s,n()))||void 0;return lv(c.getItem.bind(c))(s.name).then(b=>{if(b)return s.deserialize(b)}).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==s.version){if(s.migrate)return s.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var x;return m=s.merge(b,(x=n())!=null?x:f),r(m,!0),d()}).then(()=>{w==null||w(m,void 0),o=!0,l.forEach(b=>b(m))}).catch(b=>{w==null||w(void 0,b)})};return i.persist={setOptions:C=>{s={...s,...C},C.getStorage&&(c=C.getStorage())},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:C=>(a.add(C),()=>{a.delete(C)}),onFinishHydration:C=>(l.add(C),()=>{l.delete(C)})},y(),m||f},pie=(e,t)=>(r,n,i)=>{let s={storage:die(()=>localStorage),partialize:y=>y,version:0,merge:(y,C)=>({...C,...y}),...t},o=!1;const a=new Set,l=new Set;let c=s.storage;if(!c)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...y)},n,i);const u=()=>{const y=s.partialize({...n()});return c.setItem(s.name,{state:y,version:s.version})},d=i.setState;i.setState=(y,C)=>{d(y,C),u()};const p=e((...y)=>{r(...y),u()},n,i);i.getInitialState=()=>p;let f;const m=()=>{var y,C;if(!c)return;o=!1,a.forEach(b=>{var x;return b((x=n())!=null?x:p)});const w=((C=s.onRehydrateStorage)==null?void 0:C.call(s,(y=n())!=null?y:p))||void 0;return lv(c.getItem.bind(c))(s.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==s.version){if(s.migrate)return[!0,s.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var x;const[E,I]=b;if(f=s.merge(I,(x=n())!=null?x:p),r(f,!0),E)return u()}).then(()=>{w==null||w(f,void 0),f=n(),o=!0,l.forEach(b=>b(f))}).catch(b=>{w==null||w(void 0,b)})};return i.persist={setOptions:y=>{s={...s,...y},y.storage&&(c=y.storage)},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:y=>(a.add(y),()=>{a.delete(y)}),onFinishHydration:y=>(l.add(y),()=>{l.delete(y)})},s.skipHydration||m(),f||p},fie=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((uie?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),hie(e,t)):pie(e,t),gie=fie,gr=["verified_foods","foods","manual_foods","user_added","ai_enhanced","ai_manually_added","tesco_products","uk_foods_cleaned","fast_foods_database","generic_database","consumer_foods"],mie={verified_foods:"verifiedFoods",foods:"foods",manual_foods:"manualFoods",user_added:"userAdded",ai_enhanced:"aiEnhanced",ai_manually_added:"aiManuallyAdded",tesco_products:"tescoProducts",uk_foods_cleaned:null,fast_foods_database:null,generic_database:null,consumer_foods:"consumer_foods"},vie=["uk_foods_cleaned","fast_foods_database","generic_database"],$F={searchQuery:"",indices:[...gr],verified:"all",hasIssues:!1,hasDuplicates:!1,hasBarcode:!1,zeroCalories:!1,hasReport:!1},yie=["selection","imageUrl","name","brandName","barcode","_sourceIndex","calories","protein","carbs","fat","fiber","sugar","sodium","servingSizeG","servingDescription","isVerified","_reviewFlags","actions"],gl=cie()(gie((e,t)=>({foods:[],searchResults:[],isSearching:!1,selectedFoodIds:[],duplicateGroups:[],isLoading:!1,loadingProgress:0,loadingMessage:"",filters:$F,stats:null,undoStack:[],redoStack:[],columnOrder:yie,dirtyFoodIds:new Set,foodReportIds:new Set,setFoods:r=>e({foods:r,dirtyFoodIds:new Set}),addFoods:r=>e(n=>({foods:[...n.foods,...r]})),updateFood:(r,n)=>e(i=>{const s=i.foods.findIndex(d=>d._id===r);if(s===-1)return i;const o=i.foods[s],a={...o,...n,_isDirty:!0},l=[...i.foods];l[s]=a;const c=new Set(i.dirtyFoodIds);c.add(r);const u={type:"update",food:a,previousState:o};return{foods:l,dirtyFoodIds:c,undoStack:[...i.undoStack,u],redoStack:[]}}),markFoodDeleted:r=>e(n=>{const i=n.foods.findIndex(l=>l._id===r);if(i===-1)return n;const s=n.foods[i],o=[...n.foods];o[i]={...s,_isDeleted:!0};const a={type:"delete",food:o[i],previousState:s};return{foods:o,undoStack:[...n.undoStack,a],redoStack:[]}}),restoreFood:r=>e(n=>{const i=n.foods.findIndex(o=>o._id===r);if(i===-1)return n;const s=[...n.foods];return s[i]={...s[i],_isDeleted:!1},{foods:s}}),setSelectedFoodIds:r=>e({selectedFoodIds:r}),toggleFoodSelection:r=>e(n=>({selectedFoodIds:n.selectedFoodIds.includes(r)?n.selectedFoodIds.filter(s=>s!==r):[...n.selectedFoodIds,r]})),selectAll:()=>e(()=>({selectedFoodIds:t().getFilteredFoods().map(r=>r._id)})),deselectAll:()=>e({selectedFoodIds:[]}),setFilters:r=>e(n=>({filters:{...n.filters,...r}})),clearFilters:()=>e({filters:$F}),setLoading:(r,n="")=>e({isLoading:r,loadingMessage:n}),setLoadingProgress:r=>e({loadingProgress:r}),setStats:r=>e({stats:r}),setDuplicateGroups:r=>e({duplicateGroups:r}),setColumnOrder:r=>e({columnOrder:r}),undo:()=>e(r=>{if(r.undoStack.length===0)return r;const n=r.undoStack[r.undoStack.length-1],i=r.undoStack.slice(0,-1);if(!n.previousState)return{undoStack:i};const s=r.foods.findIndex(a=>a._id===n.food._id);if(s===-1)return{undoStack:i};const o=[...r.foods];return o[s]=n.previousState,{foods:o,undoStack:i,redoStack:[...r.redoStack,n]}}),redo:()=>e(r=>{if(r.redoStack.length===0)return r;const n=r.redoStack[r.redoStack.length-1],i=r.redoStack.slice(0,-1),s=r.foods.findIndex(a=>a._id===n.food._id);if(s===-1)return{redoStack:i};const o=[...r.foods];return o[s]=n.food,{foods:o,redoStack:i,undoStack:[...r.undoStack,n]}}),pushUndo:r=>e(n=>({undoStack:[...n.undoStack,r],redoStack:[]})),clearDirty:()=>e(r=>({dirtyFoodIds:new Set,foods:r.foods.map(n=>({...n,_isDirty:!1}))})),getDirtyFoods:()=>t().foods.filter(n=>n._isDirty),setSearchResults:r=>e({searchResults:r,isSearching:!0}),setIsSearching:r=>e({isSearching:r}),clearSearch:()=>e({searchResults:[],isSearching:!1}),setFoodReportIds:r=>e({foodReportIds:r}),getFilteredFoods:()=>{const r=t(),{filters:n,foods:i,searchResults:s,isSearching:o}=r;return(o?s:i).filter(l=>{if(l._isDeleted||!n.indices.includes(l._sourceIndex)||n.verified==="verified"&&!l.isVerified||n.verified==="unverified"&&l.isVerified||n.hasIssues&&l._reviewFlags.length===0||n.hasBarcode&&!l.barcode||n.zeroCalories&&l.calories!==0||n.hasReport&&!r.foodReportIds.has(l.objectID))return!1;if(!o&&n.searchQuery){const c=n.searchQuery.toLowerCase();if(!`${l.name} ${l.brandName||""} ${l.barcode||""} ${l.ingredientsText||""}`.toLowerCase().includes(c))return!1}return!0})},getFoodById:r=>{const n=t();return n.foods.find(i=>i._id===r)||n.searchResults.find(i=>i._id===r)}}),{name:"nutrasafe-grid-store",partialize:e=>({columnOrder:e.columnOrder,filters:{indices:e.filters.indices}})})),UF=()=>`serving_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Cie=[{name:"100g",servingSize:100,unit:"g"},{name:"1 serving (30g)",servingSize:30,unit:"g"},{name:"1 cup (240ml)",servingSize:240,unit:"ml"},{name:"1 tablespoon (15g)",servingSize:15,unit:"g"},{name:"1 teaspoon (5g)",servingSize:5,unit:"g"},{name:"1 piece",servingSize:0,unit:"g"},{name:"1 can (330ml)",servingSize:330,unit:"ml"},{name:"1 bottle (500ml)",servingSize:500,unit:"ml"},{name:"1 slice",servingSize:0,unit:"g"},{name:"1 portion",servingSize:0,unit:"g"}],vW=({servingTypes:e,onChange:t,className:r=""})=>{const[n,i]=v.useState(!1),[s,o]=v.useState(null),a=v.useCallback(()=>{const f={id:UF(),name:"",servingSize:100,unit:"g",isDefault:e.length===0};t([...e,f]),o(f.id)},[e,t]),l=v.useCallback(f=>{const m={id:UF(),name:f.name,servingSize:f.servingSize,unit:f.unit,isDefault:e.length===0};t([...e,m]),i(!1)},[e,t]),c=v.useCallback((f,m)=>{t(e.map(y=>y.id===f?{...y,...m}:y))},[e,t]),u=v.useCallback(f=>{const m=e.filter(y=>y.id!==f);m.length>0&&!m.some(y=>y.isDefault)&&(m[0].isDefault=!0),t(m)},[e,t]),d=v.useCallback(f=>{t(e.map(m=>({...m,isDefault:m.id===f})))},[e,t]),p=v.useCallback((f,m)=>{const y=e.findIndex(b=>b.id===f);if(y===-1)return;const C=m==="up"?y-1:y+1;if(C<0||C>=e.length)return;const w=[...e];[w[y],w[C]]=[w[C],w[y]],t(w)},[e,t]);return h.jsxs("div",{className:`space-y-3 ${r}`,children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Serving Options (",e.length,")"]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("div",{className:"relative",children:[h.jsx("button",{type:"button",onClick:()=>i(!n),className:"px-2 py-1 text-xs text-blue-600 hover:bg-blue-50 rounded transition-colors",children:"+ Add Preset"}),n&&h.jsx("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10 max-h-64 overflow-auto",children:Cie.map((f,m)=>h.jsxs("button",{type:"button",onClick:()=>l(f),className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center justify-between",children:[h.jsx("span",{children:f.name}),h.jsx("span",{className:"text-gray-400 text-xs",children:f.servingSize>0?`${f.servingSize}${f.unit}`:"custom"})]},m))})]}),h.jsx("button",{type:"button",onClick:a,className:"px-2 py-1 text-xs text-green-600 hover:bg-green-50 rounded transition-colors",children:"+ Custom"})]})]}),e.length===0?h.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg border border-dashed border-gray-200",children:[h.jsx("svg",{className:"w-8 h-8 mx-auto text-gray-300 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),h.jsx("p",{className:"text-sm text-gray-500",children:"No serving types defined"}),h.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Add serving options for users to choose from"})]}):h.jsx("div",{className:"space-y-2",children:e.map((f,m)=>h.jsxs("div",{className:`relative p-3 rounded-lg border transition-all ${f.isDefault?"bg-blue-50 border-blue-200":"bg-white border-gray-200 hover:border-gray-300"}`,children:[f.isDefault&&h.jsx("span",{className:"absolute -top-2 left-3 px-2 py-0.5 bg-blue-500 text-white text-[10px] font-medium rounded",children:"DEFAULT"}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsxs("div",{className:"flex flex-col gap-0.5 pt-1",children:[h.jsx("button",{type:"button",onClick:()=>p(f.id,"up"),disabled:m===0,className:"p-0.5 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),h.jsx("button",{type:"button",onClick:()=>p(f.id,"down"),disabled:m===e.length-1,className:"p-0.5 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),h.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-2",children:[h.jsxs("div",{className:"col-span-3 sm:col-span-1",children:[h.jsx("label",{className:"block text-[10px] text-gray-400 mb-0.5",children:"Name"}),h.jsx("input",{type:"text",value:f.name,onChange:y=>c(f.id,{name:y.target.value}),placeholder:"e.g., 1 slice",className:"w-full px-2 py-1.5 text-sm border border-gray-200 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onFocus:()=>o(f.id),onBlur:()=>o(null),autoFocus:s===f.id&&!f.name})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[10px] text-gray-400 mb-0.5",children:"Size"}),h.jsx("input",{type:"number",value:f.servingSize||"",onChange:y=>c(f.id,{servingSize:parseFloat(y.target.value)||0}),placeholder:"100",min:"0",step:"0.1",className:"w-full px-2 py-1.5 text-sm border border-gray-200 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[10px] text-gray-400 mb-0.5",children:"Unit"}),h.jsxs("select",{value:f.unit,onChange:y=>c(f.id,{unit:y.target.value}),className:"w-full px-2 py-1.5 text-sm border border-gray-200 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[h.jsx("option",{value:"g",children:"g (grams)"}),h.jsx("option",{value:"ml",children:"ml (milliliters)"})]})]})]}),h.jsxs("div",{className:"flex items-center gap-1 pt-4",children:[!f.isDefault&&h.jsx("button",{type:"button",onClick:()=>d(f.id),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Set as default",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),h.jsx("button",{type:"button",onClick:()=>u(f.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},f.id))}),h.jsx("p",{className:"text-xs text-gray-400",children:"The default serving will be shown first when users add this food. Other options appear in the serving selector."})]})},wie="https://us-central1-nutrasafe-705c7.cloudfunctions.net",bie=({food:e,onClose:t,onSaved:r})=>{const[n,i]=v.useState(!1),[s,o]=v.useState(null),a=v.useCallback(()=>{const f=e.suggestedServingUnit==="ml"?"ml":"g";return e.servingTypes&&Array.isArray(e.servingTypes)?e.servingTypes.map((m,y)=>({id:m.id||`serving_${y}_${Date.now()}`,name:m.name||"",servingSize:m.servingSize||m.serving_g||0,unit:m.unit||f,isDefault:m.isDefault||y===0})):e.portions&&Array.isArray(e.portions)?e.portions.map((m,y)=>({id:`portion_${y}_${Date.now()}`,name:m.name||"",servingSize:m.serving_g||0,unit:f,isDefault:y===0})):e.servingDescription||e.servingSizeG?[{id:`default_${Date.now()}`,name:e.servingDescription||`${e.servingSizeG||100}${f}`,servingSize:e.servingSizeG||100,unit:f,isDefault:!0}]:[]},[e]),[l,c]=v.useState(()=>{var f,m,y,C,w,b,x,E,I;return{name:e.name||"",brandName:e.brandName||"",barcode:e.barcode||"",servingDescription:e.servingDescription||"",servingSizeG:((f=e.servingSizeG)==null?void 0:f.toString())||"",servingUnit:e.suggestedServingUnit==="ml"?"ml":"g",servingTypes:a(),category:e.category||"",ingredients:e.ingredientsText||(Array.isArray(e.ingredients)?e.ingredients.join(", "):e.ingredients||""),calories:((m=e.calories)==null?void 0:m.toString())||"",protein:((y=e.protein)==null?void 0:y.toString())||"",carbs:((C=e.carbs)==null?void 0:C.toString())||"",fat:((w=e.fat)==null?void 0:w.toString())||"",fiber:((b=e.fiber)==null?void 0:b.toString())||"",sugar:((x=e.sugar)==null?void 0:x.toString())||"",salt:((E=e.salt)==null?void 0:E.toString())||"",saturatedFat:((I=e.saturatedFat)==null?void 0:I.toString())||"",imageUrl:e.imageUrl||"",isPerUnit:e.isPerUnit||!1}}),u=(f,m)=>{o({message:f,type:m}),setTimeout(()=>o(null),3e3)},d=v.useCallback(f=>{const m=f.find(y=>y.isDefault)||f[0];c(y=>{var C;return{...y,servingTypes:f,servingDescription:(m==null?void 0:m.name)||y.servingDescription,servingSizeG:((C=m==null?void 0:m.servingSize)==null?void 0:C.toString())||y.servingSizeG,servingUnit:(m==null?void 0:m.unit)||y.servingUnit}})},[]),p=v.useCallback(async()=>{i(!0);try{const f=l.servingTypes.find(x=>x.isDefault)||l.servingTypes[0],m=l.servingTypes.length>0?l.servingTypes.map(x=>({id:x.id,name:x.name,servingSize:x.servingSize,unit:x.unit,isDefault:x.isDefault})):null,y=l.servingTypes.length>0?l.servingTypes.map(x=>({name:x.name,serving_g:x.servingSize,calories:0})):null,C={foodId:e.objectID,indexName:e._sourceIndex,updates:{foodName:l.name,brandName:l.brandName,barcode:l.barcode,servingSize:(f==null?void 0:f.name)||l.servingDescription,servingSizeG:(f==null?void 0:f.servingSize)||parseFloat(l.servingSizeG)||null,servingUnit:(f==null?void 0:f.unit)||l.servingUnit,suggestedServingUnit:(f==null?void 0:f.unit)||l.servingUnit,suggestedServingSize:(f==null?void 0:f.servingSize)||null,suggestedServingDescription:(f==null?void 0:f.name)||null,servingTypes:m,portions:y,category:l.category,ingredients:l.ingredients.split(",").map(x=>x.trim()).filter(x=>x),imageUrl:l.imageUrl||null,isPerUnit:l.isPerUnit,nutrition:{calories:parseFloat(l.calories)||null,protein:parseFloat(l.protein)||null,carbs:parseFloat(l.carbs)||null,fat:parseFloat(l.fat)||null,fiber:parseFloat(l.fiber)||null,sugar:parseFloat(l.sugar)||null,salt:parseFloat(l.salt)||null,sodium:Math.round((parseFloat(l.salt)||0)*1e3/2.5)||null,saturatedFat:parseFloat(l.saturatedFat)||null}}};console.log(" SAVING FOOD:",C);const b=await(await fetch(`${wie}/adminSaveFood`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).json();if(b.success){u("Food saved successfully","success");const x={...e,name:l.name,brandName:l.brandName||null,barcode:l.barcode||null,servingDescription:(f==null?void 0:f.name)||l.servingDescription||null,servingSizeG:(f==null?void 0:f.servingSize)||parseFloat(l.servingSizeG)||null,suggestedServingUnit:(f==null?void 0:f.unit)||l.servingUnit,suggestedServingSize:(f==null?void 0:f.servingSize)||null,suggestedServingDescription:(f==null?void 0:f.name)||null,servingTypes:m,portions:y,category:l.category||null,calories:parseFloat(l.calories)||0,protein:parseFloat(l.protein)||0,carbs:parseFloat(l.carbs)||0,fat:parseFloat(l.fat)||0,fiber:parseFloat(l.fiber)||0,sugar:parseFloat(l.sugar)||0,salt:parseFloat(l.salt)||0,saturatedFat:parseFloat(l.saturatedFat)||null,imageUrl:l.imageUrl||null,isPerUnit:l.isPerUnit};r(x),setTimeout(t,1e3)}else u(b.error||"Error saving food","error")}catch(f){console.error("Error saving food:",f),u("Error saving food","error")}finally{i(!1)}},[e,l,t,r]);return h.jsxs("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:t,children:[s&&h.jsx("div",{className:`fixed top-4 right-4 z-[60] px-4 py-3 rounded-lg shadow-lg ${s.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:s.message}),h.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:f=>f.stopPropagation(),children:[h.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between bg-gradient-to-r from-blue-50 to-indigo-50",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Edit Food"}),h.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[h.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-700 rounded",children:e._sourceIndex}),e.objectID&&h.jsx("span",{className:"text-xs text-gray-400 font-mono",children:e.objectID})]})]}),h.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-white/50 rounded-lg transition-colors",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),h.jsx("div",{className:"flex-1 overflow-auto p-6",children:h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Food Name"}),h.jsx("input",{type:"text",value:l.name,onChange:f=>c({...l,name:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Brand"}),h.jsx("input",{type:"text",value:l.brandName,onChange:f=>c({...l,brandName:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Barcode"}),h.jsx("input",{type:"text",value:l.barcode,onChange:f=>c({...l,barcode:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Category"}),h.jsx("input",{type:"text",value:l.category,onChange:f=>c({...l,category:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Nutrition Type"}),h.jsxs("select",{value:l.isPerUnit?"unit":"100g",onChange:f=>c({...l,isPerUnit:f.target.value==="unit"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[h.jsx("option",{value:"100g",children:"Per 100g/ml"}),h.jsx("option",{value:"unit",children:"Per Unit"})]})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Image URL"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"url",value:l.imageUrl,onChange:f=>c({...l,imageUrl:f.target.value}),placeholder:"https://example.com/image.jpg",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),l.imageUrl&&h.jsx("img",{src:l.imageUrl,alt:"",className:"w-10 h-10 object-cover rounded border border-gray-200",onError:f=>{f.target.style.display="none"}})]})]}),h.jsxs("div",{className:"p-4 bg-indigo-50 rounded-xl border border-indigo-100",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})}),h.jsx("h3",{className:"font-medium text-indigo-900",children:"Serving Options"})]}),h.jsx(vW,{servingTypes:l.servingTypes,onChange:d})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Ingredients"}),h.jsx("textarea",{value:l.ingredients,onChange:f=>c({...l,ingredients:f.target.value}),rows:2,placeholder:"Enter ingredients separated by commas...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Nutrition ",l.isPerUnit?"(per unit)":`(per 100${l.servingUnit})`]}),h.jsxs("span",{className:`px-2 py-0.5 text-[10px] font-bold rounded-full ${l.servingUnit==="g"?"bg-gray-100 text-gray-600":"bg-blue-100 text-blue-600"}`,children:[l.servingUnit.toUpperCase()," MODE"]})]}),h.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{key:"calories",label:"Calories",unit:"kcal"},{key:"protein",label:"Protein",unit:"g"},{key:"carbs",label:"Carbs",unit:"g"},{key:"fat",label:"Fat",unit:"g"},{key:"saturatedFat",label:"Sat Fat",unit:"g"},{key:"fiber",label:"Fibre",unit:"g"},{key:"sugar",label:"Sugar",unit:"g"},{key:"salt",label:"Salt",unit:"g"}].map(({key:f,label:m,unit:y})=>h.jsxs("div",{children:[h.jsx("label",{className:"block text-[10px] text-gray-400 mb-1",children:m}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"number",step:"0.1",value:l[f],onChange:C=>c({...l,[f]:C.target.value}),className:"w-full px-2 py-1.5 pr-7 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),h.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-[10px] text-gray-400",children:y})]})]},f))})]})]})}),h.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-end gap-3 bg-gray-50",children:[h.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),h.jsx("button",{onClick:p,disabled:n,className:`px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors flex items-center gap-2 ${n?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:n?h.jsxs(h.Fragment,{children:[h.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Saving..."]}):h.jsxs(h.Fragment,{children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save Changes"]})})]})]})]})},FP="https://us-central1-nutrasafe-705c7.cloudfunctions.net",Sie=({food:e,onClose:t,onDelete:r,onSaveImage:n,isDeleting:i,isSaving:s})=>{const[o,a]=v.useState(e.imageUrl||""),[l,c]=v.useState(e.imageUrl||""),u=o!==(e.imageUrl||""),d=()=>{c(o)},p=()=>{o.trim()&&n(o.trim())};return h.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,children:h.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-2xl w-full mx-4 overflow-hidden",onClick:f=>f.stopPropagation(),children:[h.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),e.brandName&&h.jsx("p",{className:"text-sm text-gray-500",children:e.brandName})]}),h.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 p-1",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),h.jsx("div",{className:"p-6 bg-gray-50 flex items-center justify-center min-h-[300px]",children:l?h.jsx("img",{src:l,alt:e.name,className:"max-h-[400px] max-w-full object-contain rounded-lg shadow",onError:f=>{f.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"%3E%3Crect fill="%23f3f4f6" width="200" height="200"/%3E%3Ctext fill="%239ca3af" x="50%25" y="50%25" text-anchor="middle" dy=".3em" font-size="14"%3EImage failed to load%3C/text%3E%3C/svg%3E'}}):h.jsxs("div",{className:"text-gray-400 text-center",children:[h.jsx("svg",{className:"w-16 h-16 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),h.jsx("p",{children:"No image"})]})}),h.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URL"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"url",value:o,onChange:f=>a(f.target.value),placeholder:"https://example.com/image.jpg",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"}),h.jsx("button",{onClick:d,disabled:!o.trim(),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Preview"})]})]}),h.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between bg-white",children:[h.jsxs("div",{className:"text-sm text-gray-500",children:["Source: ",h.jsx("span",{className:"font-medium",children:e._sourceIndex})]}),h.jsxs("div",{className:"flex gap-2",children:[e.imageUrl&&h.jsx("button",{onClick:r,disabled:i||s,className:`px-4 py-2 rounded-lg font-medium flex items-center gap-2 ${i||s?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-red-50 text-red-600 hover:bg-red-100"}`,children:i?h.jsxs(h.Fragment,{children:[h.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Deleting..."]}):h.jsxs(h.Fragment,{children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})}),u&&o.trim()&&h.jsx("button",{onClick:p,disabled:s||i,className:`px-4 py-2 rounded-lg font-medium flex items-center gap-2 ${s||i?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:s?h.jsxs(h.Fragment,{children:[h.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Saving..."]}):h.jsxs(h.Fragment,{children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save Image"]})})]})]})]})})};let Bw=null;const xie=e=>{const t=e.value,r=e.data,n=()=>{r&&Bw&&Bw(r)};return t?h.jsx("img",{src:t,alt:"",className:"w-12 h-12 object-cover rounded cursor-pointer hover:opacity-80 transition-opacity",onClick:n,title:"Click to view image",onError:i=>{i.target.style.display="none"}}):h.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gray-100 rounded text-gray-400 text-xs cursor-pointer hover:bg-gray-200",onClick:n,title:"Click to view/add image",children:"No img"})},Eie=e=>{var s;const t=e.value,r=(s=e.data)==null?void 0:s._id,n=gl(o=>o.foodReportIds),i=r&&n.has(r);return h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{children:t}),i&&h.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium bg-yellow-100 text-yellow-700",title:"Has user report",children:""})]})},Pie=e=>{const t=e.value,r={verified_foods:"bg-green-100 text-green-800",foods:"bg-blue-100 text-blue-800",manual_foods:"bg-purple-100 text-purple-800",user_added:"bg-yellow-100 text-yellow-800",ai_enhanced:"bg-pink-100 text-pink-800",ai_manually_added:"bg-indigo-100 text-indigo-800",tesco_products:"bg-orange-100 text-orange-800",uk_foods_cleaned:"bg-cyan-100 text-cyan-800",fast_foods_database:"bg-red-100 text-red-800",generic_database:"bg-gray-100 text-gray-800",consumer_foods:"bg-teal-100 text-teal-800"},n={verified_foods:"Verified",foods:"Foods",manual_foods:"Manual",user_added:"User",ai_enhanced:"AI",ai_manually_added:"AI Manual",tesco_products:"Tesco",uk_foods_cleaned:"UK Clean",fast_foods_database:"Fast Food",generic_database:"Generic",consumer_foods:"Consumer"};return h.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${r[t]}`,children:n[t]})},Rie=e=>{const t=e.value;return h.jsx("span",{className:`inline-flex items-center ${t?"text-green-600":"text-gray-400"}`,children:t?h.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("circle",{cx:"12",cy:"12",r:"10",strokeWidth:"2"})})})},Tie=e=>{const t=e.value;return h.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${t?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-600"}`,children:t?"Per Unit":"Per 100g"})},Aie=e=>{var s;const t=((s=e.data)==null?void 0:s._reviewFlags)||[];if(t.length===0)return h.jsx("span",{className:"text-gray-400 text-xs",children:"None"});const r=t.filter(o=>o.severity==="error").length,n=t.filter(o=>o.severity==="warning").length,i=t.filter(o=>o.severity==="info").length;return h.jsxs("div",{className:"flex gap-1",children:[r>0&&h.jsx("span",{className:"px-1.5 py-0.5 bg-red-100 text-red-700 rounded text-xs",title:t.filter(o=>o.severity==="error").map(o=>o.message).join(`
`),children:r}),n>0&&h.jsx("span",{className:"px-1.5 py-0.5 bg-yellow-100 text-yellow-700 rounded text-xs",title:t.filter(o=>o.severity==="warning").map(o=>o.message).join(`
`),children:n}),i>0&&h.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-700 rounded text-xs",title:t.filter(o=>o.severity==="info").map(o=>o.message).join(`
`),children:i})]})},Mu=e=>{const t=e.value;if(t==null)return h.jsx("span",{className:"text-gray-400",children:"-"});const r=Number.isInteger(t)?t.toString():t.toFixed(1);return h.jsx("span",{className:"font-mono text-right",children:r})},_ie=()=>{const e=v.useRef(null),t=v.useRef(null),r=v.useRef(null),n=v.useRef(new Map),[i,s]=v.useState("idle"),[o,a]=v.useState(null),[l,c]=v.useState(!1),[u,d]=v.useState(!1),[p,f]=v.useState(null);v.useEffect(()=>(Bw=a,()=>{Bw=null}),[]);const{getFilteredFoods:m,setSelectedFoodIds:y,updateFood:C,setColumnOrder:w}=gl(),b=m(),x=v.useCallback(async B=>{try{const W={foodId:B.objectID,indexName:B._sourceIndex,updates:{foodName:B.name,brandName:B.brandName,barcode:B.barcode,servingSizeG:B.servingSizeG,servingSize:B.servingDescription,isPerUnit:B.isPerUnit,nutrition:{calories:B.calories,protein:B.protein,carbs:B.carbs,fat:B.fat,fiber:B.fiber,sugar:B.sugar,sodium:B.sodium,saturatedFat:B.saturatedFat}}};return console.log(" Saving to backend:",JSON.stringify(W,null,2)),(await(await fetch(`${FP}/adminSaveFood`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)})).json()).success}catch(W){return console.error("Auto-save error:",W),!1}},[]),E=v.useCallback(B=>{n.current.set(B._id,B),r.current&&clearTimeout(r.current),s("saving"),r.current=setTimeout(async()=>{const W=Array.from(n.current.values());n.current.clear();let ne=!0;for(const J of W)await x(J)||(ne=!1);s(ne?"saved":"error"),setTimeout(()=>s("idle"),2e3)},1e3)},[x]),I=v.useMemo(()=>[{headerCheckboxSelection:!0,checkboxSelection:!0,width:50,pinned:"left",lockPosition:!0,suppressMenu:!0,resizable:!1},{field:"imageUrl",headerName:"Image",width:80,cellRenderer:xie,editable:!1,filter:!1,sortable:!1},{field:"name",headerName:"Name",width:250,editable:!0,filter:"agTextColumnFilter",sortable:!0,cellClass:"font-medium",cellRenderer:Eie},{field:"brandName",headerName:"Brand",width:150,editable:!0,filter:"agTextColumnFilter",sortable:!0},{field:"barcode",headerName:"Barcode",width:130,editable:!0,filter:"agTextColumnFilter",sortable:!0,cellClass:"font-mono text-sm"},{field:"_sourceIndex",headerName:"Source",width:100,cellRenderer:Pie,editable:!1,filter:"agSetColumnFilter",filterParams:{values:[...gr]},sortable:!0},{field:"calories",headerName:"Cal",width:80,editable:!0,cellRenderer:Mu,filter:"agNumberColumnFilter",sortable:!0,type:"numericColumn"},{field:"protein",headerName:"Protein",width:80,editable:!0,cellRenderer:Mu,filter:"agNumberColumnFilter",sortable:!0,type:"numericColumn"},{field:"carbs",headerName:"Carbs",width:80,editable:!0,cellRenderer:Mu,filter:"agNumberColumnFilter",sortable:!0,type:"numericColumn"},{field:"fat",headerName:"Fat",width:70,editable:!0,cellRenderer:Mu,filter:"agNumberColumnFilter",sortable:!0,type:"numericColumn"},{field:"fiber",headerName:"Fibre",width:70,editable:!0,cellRenderer:Mu,filter:"agNumberColumnFilter",sortable:!0,type:"numericColumn"},{field:"sugar",headerName:"Sugar",width:70,editable:!0,cellRenderer:Mu,filter:"agNumberColumnFilter",sortable:!0,type:"numericColumn"},{field:"sodium",headerName:"Sodium",width:80,editable:!0,cellRenderer:Mu,filter:"agNumberColumnFilter",sortable:!0,type:"numericColumn"},{field:"servingSizeG",headerName:"Serving (g)",width:100,editable:!0,valueGetter:B=>{var W;return(W=B.data)==null?void 0:W.servingSizeG},valueFormatter:B=>B.value==null?"-":`${B.value}g`,valueParser:B=>{if(!B.newValue)return null;const W=String(B.newValue).toLowerCase().replace(/[^0-9.]/g,""),ne=parseFloat(W);return console.log(`servingSizeG parser: "${B.newValue}" -> ${ne}`),isNaN(ne)?null:ne},filter:"agNumberColumnFilter",sortable:!0,type:"numericColumn"},{field:"servingDescription",headerName:"Serving Desc",width:120,editable:!0,valueFormatter:B=>B.value||"-",filter:"agTextColumnFilter",sortable:!0},{field:"isPerUnit",headerName:"Per Unit",width:90,cellRenderer:Tie,editable:!0,filter:"agSetColumnFilter",filterParams:{values:[!0,!1],valueFormatter:B=>B.value?"Per Unit":"Per 100g"},sortable:!0,cellEditor:"agSelectCellEditor",cellEditorParams:{values:[!0,!1]},valueFormatter:B=>B.value?"Per Unit":"Per 100g"},{field:"isVerified",headerName:"Verified",width:90,cellRenderer:Rie,editable:!1,filter:"agSetColumnFilter",filterParams:{values:[!0,!1],valueFormatter:B=>B.value?"Verified":"Unverified"},sortable:!0},{field:"_reviewFlags",headerName:"Issues",width:100,cellRenderer:Aie,editable:!1,filter:!1,sortable:!1},{field:"_confidenceScore",headerName:"Score",width:80,editable:!1,filter:"agNumberColumnFilter",sortable:!0,type:"numericColumn",valueFormatter:B=>B.value?`${B.value}%`:"-"}],[]),k=v.useMemo(()=>({resizable:!0,suppressMovable:!1}),[]),P=v.useCallback(B=>{t.current=B.api},[]),A=v.useCallback(B=>{if(B.data&&B.colDef.field){const W=B.colDef.field;C(B.data._id,{[W]:B.newValue});const ne={...B.data,[W]:B.newValue};E(ne)}},[C,E]),D=v.useCallback(B=>{if(t.current){const W=t.current.getSelectedRows();y(W.map(ne=>ne._id))}},[y]),L=v.useCallback(B=>{if(t.current){const ne=t.current.getAllDisplayedColumns().map(J=>J.getColId());w(ne)}},[w]),M=v.useCallback(B=>{B.data&&f(B.data)},[]),T=v.useCallback(B=>{C(B._id,{name:B.name,brandName:B.brandName,barcode:B.barcode,servingDescription:B.servingDescription,servingSizeG:B.servingSizeG,category:B.category,calories:B.calories,protein:B.protein,carbs:B.carbs,fat:B.fat,fiber:B.fiber,sugar:B.sugar,salt:B.salt,saturatedFat:B.saturatedFat,imageUrl:B.imageUrl,isPerUnit:B.isPerUnit}),t.current&&t.current.refreshCells({force:!0})},[C]);v.useEffect(()=>{const B=W=>{(W.metaKey||W.ctrlKey)&&W.key==="s"&&(W.preventDefault(),console.log("Save triggered")),(W.metaKey||W.ctrlKey)&&W.key==="z"&&!W.shiftKey&&(W.preventDefault(),gl.getState().undo()),(W.metaKey||W.ctrlKey)&&W.key==="z"&&W.shiftKey&&(W.preventDefault(),gl.getState().redo())};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[]);const O=v.useMemo(()=>({"bg-red-50":B=>{var W;return((W=B.data)==null?void 0:W._isDeleted)===!0},"bg-yellow-50":B=>{var W;return((W=B.data)==null?void 0:W._isDirty)===!0},"bg-red-100":B=>{var W,ne;return((ne=(W=B.data)==null?void 0:W._reviewFlags)==null?void 0:ne.some(J=>J.severity==="error"))===!0}}),[]),Q=v.useCallback(async()=>{if(!(!o||!window.confirm(`Are you sure you want to delete the image for "${o.name}"?

This action cannot be undone.`))){c(!0);try{const W={foodId:o.objectID,indexName:o._sourceIndex,updates:{imageUrl:null}};console.log(" Deleting image:",W);const J=await(await fetch(`${FP}/adminSaveFood`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)})).json();if(J.success)C(o._id,{imageUrl:null}),t.current&&t.current.refreshCells({force:!0}),a(null),console.log(" Image deleted successfully");else throw new Error(J.error||"Failed to delete image")}catch(W){console.error("Delete image error:",W),alert(`Failed to delete image: ${W instanceof Error?W.message:String(W)}`)}finally{c(!1)}}},[o,C]),X=v.useCallback(async B=>{if(o){d(!0);try{const W={foodId:o.objectID,indexName:o._sourceIndex,updates:{imageUrl:B}};console.log(" Saving image:",W);const J=await(await fetch(`${FP}/adminSaveFood`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)})).json();if(J.success)C(o._id,{imageUrl:B}),t.current&&t.current.refreshCells({force:!0}),a(null),console.log(" Image saved successfully");else throw new Error(J.error||"Failed to save image")}catch(W){console.error("Save image error:",W),alert(`Failed to save image: ${W instanceof Error?W.message:String(W)}`)}finally{d(!1)}}},[o,C]);return h.jsxs("div",{className:"ag-theme-alpine w-full h-full relative",children:[i!=="idle"&&h.jsxs("div",{className:`absolute top-2 right-2 z-10 px-3 py-1.5 rounded-full text-sm font-medium shadow-lg flex items-center gap-2 ${i==="saving"?"bg-yellow-100 text-yellow-800":i==="saved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[i==="saving"&&h.jsxs(h.Fragment,{children:[h.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Saving..."]}),i==="saved"&&h.jsxs(h.Fragment,{children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Saved"]}),i==="error"&&h.jsxs(h.Fragment,{children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Save failed"]})]}),h.jsx(Fne,{ref:e,rowData:b,columnDefs:I,defaultColDef:k,rowSelection:"multiple",suppressRowClickSelection:!0,getRowId:B=>B.data._id,onGridReady:P,onCellValueChanged:A,onRowSelected:D,onColumnMoved:L,onRowDoubleClicked:M,rowClassRules:O,animateRows:!0,enableCellTextSelection:!0,suppressCopyRowsToClipboard:!1,rowBuffer:20,cacheBlockSize:100,maxBlocksInCache:10,rowHeight:56,headerHeight:40}),o&&h.jsx(Sie,{food:o,onClose:()=>a(null),onDelete:Q,onSaveImage:X,isDeleting:l,isSaving:u}),p&&h.jsx(bie,{food:p,onClose:()=>f(null),onSaved:T})]})};var yW={exports:{}};/*! algoliasearch-lite.umd.js | 4.25.3 |  Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */(function(e,t){(function(r,n){e.exports=n()})(rq,function(){function r(de,q,le){return q in de?Object.defineProperty(de,q,{value:le,enumerable:!0,configurable:!0,writable:!0}):de[q]=le,de}function n(de,q){var le=Object.keys(de);if(Object.getOwnPropertySymbols){var G=Object.getOwnPropertySymbols(de);q&&(G=G.filter(function(H){return Object.getOwnPropertyDescriptor(de,H).enumerable})),le.push.apply(le,G)}return le}function i(de){for(var q=1;q<arguments.length;q++){var le=arguments[q]!=null?arguments[q]:{};q%2?n(Object(le),!0).forEach(function(G){r(de,G,le[G])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(le)):n(Object(le)).forEach(function(G){Object.defineProperty(de,G,Object.getOwnPropertyDescriptor(le,G))})}return de}function s(de,q){if(de==null)return{};var le,G,H=function(te,ee){if(te==null)return{};var K,U,j={},re=Object.keys(te);for(U=0;U<re.length;U++)K=re[U],ee.indexOf(K)>=0||(j[K]=te[K]);return j}(de,q);if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(de);for(G=0;G<ce.length;G++)le=ce[G],q.indexOf(le)>=0||Object.prototype.propertyIsEnumerable.call(de,le)&&(H[le]=de[le])}return H}function o(de,q){return function(le){if(Array.isArray(le))return le}(de)||function(le,G){if(Symbol.iterator in Object(le)||Object.prototype.toString.call(le)==="[object Arguments]"){var H=[],ce=!0,te=!1,ee=void 0;try{for(var K,U=le[Symbol.iterator]();!(ce=(K=U.next()).done)&&(H.push(K.value),!G||H.length!==G);ce=!0);}catch(j){te=!0,ee=j}finally{try{ce||U.return==null||U.return()}finally{if(te)throw ee}}return H}}(de,q)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(de){return function(q){if(Array.isArray(q)){for(var le=0,G=new Array(q.length);le<q.length;le++)G[le]=q[le];return G}}(de)||function(q){if(Symbol.iterator in Object(q)||Object.prototype.toString.call(q)==="[object Arguments]")return Array.from(q)}(de)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(de){var q,le="algoliasearch-client-js-".concat(de.key),G=function(){return q===void 0&&(q=de.localStorage||window.localStorage),q},H=function(){return JSON.parse(G().getItem(le)||"{}")},ce=function(ee){G().setItem(le,JSON.stringify(ee))},te=function(){var ee=de.timeToLive?1e3*de.timeToLive:null,K=H(),U=Object.fromEntries(Object.entries(K).filter(function(re){return o(re,2)[1].timestamp!==void 0}));if(ce(U),ee){var j=Object.fromEntries(Object.entries(U).filter(function(re){var se=o(re,2)[1],Ce=new Date().getTime();return!(se.timestamp+ee<Ce)}));ce(j)}};return{get:function(ee,K){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){te();var j=JSON.stringify(ee);return H()[j]}).then(function(j){return Promise.all([j?j.value:K(),j!==void 0])}).then(function(j){var re=o(j,2),se=re[0],Ce=re[1];return Promise.all([se,Ce||U.miss(se)])}).then(function(j){return o(j,1)[0]})},set:function(ee,K){return Promise.resolve().then(function(){var U=H();return U[JSON.stringify(ee)]={timestamp:new Date().getTime(),value:K},G().setItem(le,JSON.stringify(U)),K})},delete:function(ee){return Promise.resolve().then(function(){var K=H();delete K[JSON.stringify(ee)],G().setItem(le,JSON.stringify(K))})},clear:function(){return Promise.resolve().then(function(){G().removeItem(le)})}}}function c(de){var q=a(de.caches),le=q.shift();return le===void 0?{get:function(G,H){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},te=H();return te.then(function(ee){return Promise.all([ee,ce.miss(ee)])}).then(function(ee){return o(ee,1)[0]})},set:function(G,H){return Promise.resolve(H)},delete:function(G){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(G,H){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return le.get(G,H,ce).catch(function(){return c({caches:q}).get(G,H,ce)})},set:function(G,H){return le.set(G,H).catch(function(){return c({caches:q}).set(G,H)})},delete:function(G){return le.delete(G).catch(function(){return c({caches:q}).delete(G)})},clear:function(){return le.clear().catch(function(){return c({caches:q}).clear()})}}}function u(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{serializable:!0},q={};return{get:function(le,G){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},ce=JSON.stringify(le);if(ce in q)return Promise.resolve(de.serializable?JSON.parse(q[ce]):q[ce]);var te=G(),ee=H&&H.miss||function(){return Promise.resolve()};return te.then(function(K){return ee(K)}).then(function(){return te})},set:function(le,G){return q[JSON.stringify(le)]=de.serializable?JSON.stringify(G):G,Promise.resolve(G)},delete:function(le){return delete q[JSON.stringify(le)],Promise.resolve()},clear:function(){return q={},Promise.resolve()}}}function d(de){for(var q=de.length-1;q>0;q--){var le=Math.floor(Math.random()*(q+1)),G=de[q];de[q]=de[le],de[le]=G}return de}function p(de,q){return q&&Object.keys(q).forEach(function(le){de[le]=q[le](de)}),de}function f(de){for(var q=arguments.length,le=new Array(q>1?q-1:0),G=1;G<q;G++)le[G-1]=arguments[G];var H=0;return de.replace(/%s/g,function(){return encodeURIComponent(le[H++])})}var m={WithinQueryParameters:0,WithinHeaders:1};function y(de,q){var le=de||{},G=le.data||{};return Object.keys(le).forEach(function(H){["timeout","headers","queryParameters","data","cacheable"].indexOf(H)===-1&&(G[H]=le[H])}),{data:Object.entries(G).length>0?G:void 0,timeout:le.timeout||q,headers:le.headers||{},queryParameters:le.queryParameters||{},cacheable:le.cacheable}}var C={Read:1,Write:2,Any:3},w=1,b=2,x=3;function E(de){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w;return i(i({},de),{},{status:q,lastUpdate:Date.now()})}function I(de){return typeof de=="string"?{protocol:"https",url:de,accept:C.Any}:{protocol:de.protocol||"https",url:de.url,accept:de.accept||C.Any}}var k="GET",P="POST";function A(de,q){return Promise.all(q.map(function(le){return de.get(le,function(){return Promise.resolve(E(le))})})).then(function(le){var G=le.filter(function(te){return function(ee){return ee.status===w||Date.now()-ee.lastUpdate>12e4}(te)}),H=le.filter(function(te){return function(ee){return ee.status===x&&Date.now()-ee.lastUpdate<=12e4}(te)}),ce=[].concat(a(G),a(H));return{getTimeout:function(te,ee){return(H.length===0&&te===0?1:H.length+3+te)*ee},statelessHosts:ce.length>0?ce.map(function(te){return I(te)}):q}})}function D(de,q,le,G){var H=[],ce=function(se,Ce){if(!(se.method===k||se.data===void 0&&Ce.data===void 0)){var be=Array.isArray(se.data)?se.data:i(i({},se.data),Ce.data);return JSON.stringify(be)}}(le,G),te=function(se,Ce){var be=i(i({},se.headers),Ce.headers),me={};return Object.keys(be).forEach(function(ie){var he=be[ie];me[ie.toLowerCase()]=he}),me}(de,G),ee=le.method,K=le.method!==k?{}:i(i({},le.data),G.data),U=i(i(i({"x-algolia-agent":de.userAgent.value},de.queryParameters),K),G.queryParameters),j=0,re=function se(Ce,be){var me=Ce.pop();if(me===void 0)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, please reach out to the Algolia Support team: https://alg.li/support .",transporterStackTrace:O(H)};var ie={data:ce,headers:te,method:ee,url:M(me,le.path,U),connectTimeout:be(j,de.timeouts.connect),responseTimeout:be(j,G.timeout)},he=function(De){var Be={request:ie,response:De,host:me,triesLeft:Ce.length};return H.push(Be),Be},Se={onSuccess:function(De){return function(Be){try{return JSON.parse(Be.content)}catch(Et){throw function(ut,ct){return{name:"DeserializationError",message:ut,response:ct}}(Et.message,Be)}}(De)},onRetry:function(De){var Be=he(De);return De.isTimedOut&&j++,Promise.all([de.logger.info("Retryable failure",Q(Be)),de.hostsCache.set(me,E(me,De.isTimedOut?x:b))]).then(function(){return se(Ce,be)})},onFail:function(De){throw he(De),function(Be,Et){var ut=Be.content,ct=Be.status,vt=ut;try{vt=JSON.parse(ut).message}catch{}return function(nt,oe,kt){return{name:"ApiError",message:nt,status:oe,transporterStackTrace:kt}}(vt,ct,Et)}(De,O(H))}};return de.requester.send(ie).then(function(De){return function(Be,Et){return function(ut){var ct=ut.status;return ut.isTimedOut||function(vt){var nt=vt.isTimedOut,oe=vt.status;return!nt&&~~oe==0}(ut)||~~(ct/100)!=2&&~~(ct/100)!=4}(Be)?Et.onRetry(Be):~~(Be.status/100)==2?Et.onSuccess(Be):Et.onFail(Be)}(De,Se)})};return A(de.hostsCache,q).then(function(se){return re(a(se.statelessHosts).reverse(),se.getTimeout)})}function L(de){var q={value:"Algolia for JavaScript (".concat(de,")"),add:function(le){var G="; ".concat(le.segment).concat(le.version!==void 0?" (".concat(le.version,")"):"");return q.value.indexOf(G)===-1&&(q.value="".concat(q.value).concat(G)),q}};return q}function M(de,q,le){var G=T(le),H="".concat(de.protocol,"://").concat(de.url,"/").concat(q.charAt(0)==="/"?q.substr(1):q);return G.length&&(H+="?".concat(G)),H}function T(de){return Object.keys(de).map(function(q){return f("%s=%s",q,(le=de[q],Object.prototype.toString.call(le)==="[object Object]"||Object.prototype.toString.call(le)==="[object Array]"?JSON.stringify(de[q]):de[q]));var le}).join("&")}function O(de){return de.map(function(q){return Q(q)})}function Q(de){var q=de.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return i(i({},de),{},{request:i(i({},de.request),{},{headers:i(i({},de.request.headers),q)})})}var X=function(de){var q=de.appId,le=function(H,ce,te){var ee={"x-algolia-api-key":te,"x-algolia-application-id":ce};return{headers:function(){return H===m.WithinHeaders?ee:{}},queryParameters:function(){return H===m.WithinQueryParameters?ee:{}}}}(de.authMode!==void 0?de.authMode:m.WithinHeaders,q,de.apiKey),G=function(H){var ce=H.hostsCache,te=H.logger,ee=H.requester,K=H.requestsCache,U=H.responsesCache,j=H.timeouts,re=H.userAgent,se=H.hosts,Ce=H.queryParameters,be={hostsCache:ce,logger:te,requester:ee,requestsCache:K,responsesCache:U,timeouts:j,userAgent:re,headers:H.headers,queryParameters:Ce,hosts:se.map(function(me){return I(me)}),read:function(me,ie){var he=y(ie,be.timeouts.read),Se=function(){return D(be,be.hosts.filter(function(Be){return(Be.accept&C.Read)!=0}),me,he)};if((he.cacheable!==void 0?he.cacheable:me.cacheable)!==!0)return Se();var De={request:me,mappedRequestOptions:he,transporter:{queryParameters:be.queryParameters,headers:be.headers}};return be.responsesCache.get(De,function(){return be.requestsCache.get(De,function(){return be.requestsCache.set(De,Se()).then(function(Be){return Promise.all([be.requestsCache.delete(De),Be])},function(Be){return Promise.all([be.requestsCache.delete(De),Promise.reject(Be)])}).then(function(Be){var Et=o(Be,2);return Et[0],Et[1]})})},{miss:function(Be){return be.responsesCache.set(De,Be)}})},write:function(me,ie){return D(be,be.hosts.filter(function(he){return(he.accept&C.Write)!=0}),me,y(ie,be.timeouts.write))}};return be}(i(i({hosts:[{url:"".concat(q,"-dsn.algolia.net"),accept:C.Read},{url:"".concat(q,".algolia.net"),accept:C.Write}].concat(d([{url:"".concat(q,"-1.algolianet.com")},{url:"".concat(q,"-2.algolianet.com")},{url:"".concat(q,"-3.algolianet.com")}]))},de),{},{headers:i(i(i({},le.headers()),{"content-type":"application/x-www-form-urlencoded"}),de.headers),queryParameters:i(i({},le.queryParameters()),de.queryParameters)}));return p({transporter:G,appId:q,addAlgoliaAgent:function(H,ce){G.userAgent.add({segment:H,version:ce})},clearCache:function(){return Promise.all([G.requestsCache.clear(),G.responsesCache.clear()]).then(function(){})}},de.methods)},B=function(de){return function(q,le){return q.method===k?de.transporter.read(q,le):de.transporter.write(q,le)}},W=function(de){return function(q){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G={transporter:de.transporter,appId:de.appId,indexName:q};return p(G,le.methods)}},ne=function(de){return function(q,le){var G=q.map(function(H){return i(i({},H),{},{params:T(H.params||{})})});return de.transporter.read({method:P,path:"1/indexes/*/queries",data:{requests:G},cacheable:!0},le)}},J=function(de){return function(q,le){return Promise.all(q.map(function(G){var H=G.params,ce=H.facetName,te=H.facetQuery,ee=s(H,["facetName","facetQuery"]);return W(de)(G.indexName,{methods:{searchForFacetValues:ue}}).searchForFacetValues(ce,te,i(i({},le),ee))}))}},ye=function(de){return function(q,le,G){return de.transporter.read({method:P,path:f("1/answers/%s/prediction",de.indexName),data:{query:q,queryLanguages:le},cacheable:!0},G)}},Pe=function(de){return function(q,le){return de.transporter.read({method:P,path:f("1/indexes/%s/query",de.indexName),data:{query:q},cacheable:!0},le)}},ue=function(de){return function(q,le,G){return de.transporter.read({method:P,path:f("1/indexes/%s/facets/%s/query",de.indexName,q),data:{facetQuery:le},cacheable:!0},G)}},Z=1,Ve=2,ve=3,Ze=function(de){return function(q,le){var G=q.map(function(H){return i(i({},H),{},{threshold:H.threshold||0})});return de.transporter.read({method:P,path:"1/indexes/*/recommendations",data:{requests:G},cacheable:!0},le)}};function je(de,q,le){var G,H={appId:de,apiKey:q,timeouts:{connect:1,read:2,write:30},requester:{send:function(ce){return new Promise(function(te){var ee=new XMLHttpRequest;ee.open(ce.method,ce.url,!0),Object.keys(ce.headers).forEach(function(re){return ee.setRequestHeader(re,ce.headers[re])});var K,U=function(re,se){return setTimeout(function(){ee.abort(),te({status:0,content:se,isTimedOut:!0})},1e3*re)},j=U(ce.connectTimeout,"Connection timeout");ee.onreadystatechange=function(){ee.readyState>ee.OPENED&&K===void 0&&(clearTimeout(j),K=U(ce.responseTimeout,"Socket timeout"))},ee.onerror=function(){ee.status===0&&(clearTimeout(j),clearTimeout(K),te({content:ee.responseText||"Network request failed",status:ee.status,isTimedOut:!1}))},ee.onload=function(){clearTimeout(j),clearTimeout(K),te({content:ee.responseText,status:ee.status,isTimedOut:!1})},ee.send(ce.data)})}},logger:(G=ve,{debug:function(ce,te){return Z>=G&&console.debug(ce,te),Promise.resolve()},info:function(ce,te){return Ve>=G&&console.info(ce,te),Promise.resolve()},error:function(ce,te){return console.error(ce,te),Promise.resolve()}}),responsesCache:u(),requestsCache:u({serializable:!1}),hostsCache:c({caches:[l({key:"".concat("4.25.3","-").concat(de)}),u()]}),userAgent:L("4.25.3").add({segment:"Browser",version:"lite"}),authMode:m.WithinQueryParameters};return X(i(i(i({},H),le),{},{methods:{search:ne,searchForFacetValues:J,multipleQueries:ne,multipleSearchForFacetValues:J,customRequest:B,initIndex:function(ce){return function(te){return W(ce)(te,{methods:{search:Pe,searchForFacetValues:ue,findAnswers:ye}})}},getRecommendations:Ze}}))}return je.version="4.25.3",je})})(yW);var Die=yW.exports;const kie=lo(Die),Iie="WK0TIF84M2",Nie="577cc4ee3fed660318917bbb54abfb2e",eI=kie(Iie,Nie);function CW(e,t){var J,ye;const r=e.objectID||"",n=e.name||e.foodName||e.title||"",i=e.brandName||e.brand||null,s=e.barcode||e.gtin||e.ean||null;let o=[],a=null;e.ingredients&&(Array.isArray(e.ingredients)?(o=e.ingredients,a=o.join(", ")):typeof e.ingredients=="string"&&(a=e.ingredients,o=e.ingredients.split(/,\s*/))),e.extractedIngredients&&(a=e.extractedIngredients,o.length||(o=a.split(/,\s*/)));const l=Number(e.calories||e.energyKcal||0),c=Number(e.protein||0),u=Number(e.carbs||e.carbohydrate||e.carbohydrates||0),d=Number(e.fat||0),p=e.saturatedFat!==void 0?Number(e.saturatedFat||e.saturates||0):null,f=Number(e.fiber||e.fibre||0),m=Number(e.sugar||e.sugars||0),y=Number(e.sodium||0),C=e.salt!==void 0?Number(e.salt):null,w=e.servingDescription||e.servingSize||e.serving_description||null,b=e.servingSizeG!==void 0?Number(e.servingSizeG||e.serving_size_g||0):null,x=!!(e.per_unit_nutrition||e.isPerUnit),E=e.suggestedServingUnit||null,I=e.suggestedServingSize!==void 0?Number(e.suggestedServingSize):null,k=e.suggestedServingDescription||null;let P=null;Array.isArray(e.servingTypes)&&(P=e.servingTypes.map((Pe,ue)=>({id:Pe.id||`serving_${ue}`,name:String(Pe.name||""),servingSize:Number(Pe.servingSize||0),unit:Pe.unit==="ml"?"ml":"g",isDefault:!!(Pe.isDefault||ue===0)})));let A=null;Array.isArray(e.portions)&&(A=e.portions.map(Pe=>({name:String(Pe.name||""),serving_g:Number(Pe.serving_g||0),calories:Number(Pe.calories||0)})));const D=!!(e.verified||e.isVerified),L=e.verifiedBy||null,M=e.verifiedAt?new Date(e.verifiedAt):null,T=e.imageUrl||e.image_url||null,O=e.category||e.department||null,Q=e.source||null,X=e.createdAt?new Date((J=e.createdAt)!=null&&J._seconds?e.createdAt._seconds*1e3:e.createdAt*1e3):null,B=e.updatedAt?new Date((ye=e.updatedAt)!=null&&ye._seconds?e.updatedAt._seconds*1e3:e.updatedAt*1e3):null,W=Mie({name:n,calories:l,protein:c,carbs:u,fat:d,barcode:s,ingredients:o}),ne=Oie({name:n,brandName:i,barcode:s,ingredients:o,calories:l,isVerified:D,imageUrl:T});return{_id:`${t}:${r}`,objectID:r,_sourceIndex:t,_firestoreCollection:mie[t],_hasFirestoreBacking:!vie.includes(t),name:n,brandName:i,barcode:s,barcodes:s?[s]:[],ingredients:o,ingredientsText:a,calories:l,protein:c,carbs:u,fat:d,saturatedFat:p,fiber:f,sugar:m,sodium:y,salt:C,servingDescription:w,servingSizeG:b,isPerUnit:x,suggestedServingUnit:E,suggestedServingSize:I,suggestedServingDescription:k,servingTypes:P,portions:A,isVerified:D,verifiedBy:L,verifiedAt:M,imageUrl:T,category:O,source:Q,createdAt:X,updatedAt:B,_confidenceScore:ne,_reviewFlags:W,_duplicateCandidates:[],_isDirty:!1,_isDeleted:!1}}function Mie(e){const t=[];if((!e.name||e.name.trim()==="")&&t.push({type:"missing_name",severity:"error",message:"Missing product name"}),e.calories===0&&e.protein===0&&e.carbs===0&&e.fat===0&&t.push({type:"missing_nutrition",severity:"error",message:"All nutrition values are zero"}),e.calories>900&&t.push({type:"implausible_calories",severity:"error",message:`Calories (${e.calories}) exceed 900 per 100g`}),e.calories>0){const s=e.protein*4+e.carbs*4+e.fat*9;Math.abs(e.calories-s)/e.calories>.3&&s>0&&t.push({type:"implausible_macros",severity:"warning",message:`Macros (${Math.round(s)} cal) don't match calories (${e.calories})`})}const r=["color","flavor","fiber","center"],n=`${e.name} ${e.ingredients.join(" ")}`.toLowerCase();return r.some(s=>n.includes(s))&&t.push({type:"non_uk",severity:"warning",message:"Contains US spelling (may not be UK product)"}),e.barcode||t.push({type:"missing_barcode",severity:"info",message:"No barcode available"}),e.ingredients.length||t.push({type:"missing_ingredients",severity:"info",message:"No ingredients listed"}),t}function Oie(e){let t=0;return e.name&&e.name.trim()&&(t+=20),e.brandName&&(t+=10),e.barcode&&(t+=15),e.ingredients.length>0&&(t+=15),e.calories>0&&(t+=15),e.isVerified&&(t+=15),e.imageUrl&&(t+=10),Math.min(100,t)}async function wW(e,t="",r={}){const{page:n=0,hitsPerPage:i=100,filters:s}=r,o=eI.initIndex(e);try{const a=await o.search(t,{page:n,hitsPerPage:i,filters:s});return{foods:a.hits.map(c=>CW(c,e)),total:a.nbHits,page:a.page}}catch(a){return console.error(`Error searching index ${e}:`,a),{foods:[],total:0,page:0}}}async function bW(e="",t=[...gr],r={}){const{hitsPerPage:n=1e3}=r,i=await Promise.all(t.map(async c=>{const u=await wW(c,e,{hitsPerPage:n});return{indexName:c,...u}})),s=[],o={},a=["verified_foods","uk_foods_cleaned","tesco_products","manual_foods","ai_enhanced","user_added","foods","ai_manually_added","fast_foods_database","generic_database"];return i.sort((c,u)=>{const d=a.indexOf(c.indexName),p=a.indexOf(u.indexName);return(d===-1?999:d)-(p===-1?999:p)}).forEach(c=>{s.push(...c.foods),o[c.indexName]=c.total}),{foods:s,totalByIndex:o}}async function SW(e,t=[...gr]){const r=await Promise.all(t.map(async a=>{const l=await wW(a,"",{hitsPerPage:100,filters:`barcode:"${e}"`});return{indexName:a,...l}})),n=[],i={},s=["verified_foods","uk_foods_cleaned","tesco_products","manual_foods","ai_enhanced","user_added","foods","ai_manually_added","fast_foods_database","generic_database"];return r.sort((a,l)=>{const c=s.indexOf(a.indexName),u=s.indexOf(l.indexName);return(c===-1?999:c)-(u===-1?999:u)}).forEach(a=>{n.push(...a.foods),i[a.indexName]=a.total}),{foods:n,totalByIndex:i}}async function Fie(){const e={};return await Promise.all(gr.map(async t=>{try{const n=await eI.initIndex(t).search("",{hitsPerPage:0,analytics:!1});e[t]={entries:n.nbHits}}catch(r){console.error(`Error getting stats for ${t}:`,r),e[t]={entries:0}}})),e}async function WF(e){for(const t of gr)try{const n=await eI.initIndex(t).search("",{filters:`objectID:${e}`,hitsPerPage:1});if(n.hits.length>0)return CW(n.hits[0],t)}catch{continue}return null}const Lie=({onSave:e,onRefresh:t,onDeleteSelected:r,onMoveSelected:n,onReports:i,pendingReportsCount:s=0,isSaving:o,isDeleting:a,isMoving:l=!1})=>{const{filters:c,setFilters:u,selectedFoodIds:d,deselectAll:p,stats:f,getDirtyFoods:m,setSearchResults:y,clearSearch:C,isSearching:w}=gl(),[b,x]=v.useState(!1),[E,I]=v.useState(!1),[k,P]=v.useState(!1),[A,D]=v.useState(""),[L,M]=v.useState(!1),T=v.useRef(null),O=m().length,Q=v.useCallback(async ue=>{if(!ue.trim()){C();return}P(!0);try{const{foods:Z}=await bW(ue,c.indices,{hitsPerPage:500});y(Z)}catch(Z){console.error("Search error:",Z)}finally{P(!1)}},[c.indices,y,C]),X=v.useCallback(ue=>{const Z=ue.target.value;u({searchQuery:Z}),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{Q(Z)},300)},[u,Q]);v.useEffect(()=>()=>{T.current&&clearTimeout(T.current)},[]);const B=v.useCallback(async()=>{if(A.trim()){M(!0);try{const{foods:ue}=await SW(A.trim(),c.indices);y(ue),u({searchQuery:`Barcode: ${A}`})}catch(ue){console.error("Barcode search error:",ue)}finally{M(!1)}}},[A,c.indices,y,u]),W=v.useCallback(ue=>{u({verified:ue})},[u]),ne=v.useCallback(ue=>{const Z=c.indices,Ve=Z.includes(ue)?Z.filter(ve=>ve!==ue):[...Z,ue];u({indices:Ve})},[c.indices,u]),J=v.useCallback(()=>{u({indices:[...gr]})},[u]),ye=v.useCallback(()=>{u({indices:[]})},[u]),Pe={verified_foods:"Verified",foods:"Foods",manual_foods:"Manual",user_added:"User",ai_enhanced:"AI Enhanced",ai_manually_added:"AI Manual",tesco_products:"Tesco",uk_foods_cleaned:"UK Cleaned",fast_foods_database:"Fast Food",generic_database:"Generic",consumer_foods:"Consumer"};return h.jsx("header",{className:"bg-white border-b border-gray-200 px-4 py-3",children:h.jsxs("div",{className:"flex items-center justify-between gap-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:h.jsx("span",{className:"text-white font-bold text-sm",children:"NS"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Food Database Manager"}),f&&h.jsxs("p",{className:"text-xs text-gray-500",children:[f.totalFoods.toLocaleString()," foods across ",gr.length," indices"]})]})]}),h.jsxs("div",{className:"flex-1 max-w-md",children:[h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",placeholder:"Search all foods across Algolia...",value:c.searchQuery,onChange:X,className:`w-full px-4 py-2 pl-10 pr-10 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent ${w?"border-primary-400 bg-primary-50":"border-gray-300"}`}),k?h.jsxs("svg",{className:"absolute left-3 top-2.5 w-5 h-5 text-primary-500 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):h.jsx("svg",{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),c.searchQuery&&h.jsx("button",{onClick:()=>{u({searchQuery:""}),C()},className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),w&&h.jsx("p",{className:"mt-1 text-xs text-primary-600",children:"Searching across all Algolia indices"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",placeholder:"Barcode...",value:A,onChange:ue=>D(ue.target.value),onKeyDown:ue=>{ue.key==="Enter"&&B()},className:"w-36 px-3 py-2 pl-8 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),h.jsx("svg",{className:"absolute left-2.5 top-2.5 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})]}),h.jsxs("button",{onClick:B,disabled:!A.trim()||L,className:"flex items-center gap-1.5 px-3 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[L?h.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Search"]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:"flex rounded-lg border border-gray-300 overflow-hidden",children:[h.jsx("button",{onClick:()=>W("all"),className:`px-3 py-1.5 text-sm ${c.verified==="all"?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"All"}),h.jsx("button",{onClick:()=>W("verified"),className:`px-3 py-1.5 text-sm border-l ${c.verified==="verified"?"bg-green-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Verified"}),h.jsx("button",{onClick:()=>W("unverified"),className:`px-3 py-1.5 text-sm border-l ${c.verified==="unverified"?"bg-yellow-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Unverified"})]}),h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>x(!b),className:"flex items-center gap-2 px-3 py-1.5 text-sm border border-gray-300 rounded-lg bg-white hover:bg-gray-50",children:[h.jsxs("span",{children:["Indices (",c.indices.length,")"]}),h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&h.jsxs("div",{className:"absolute right-0 mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[h.jsxs("div",{className:"p-2 border-b border-gray-100 flex justify-between",children:[h.jsx("button",{onClick:J,className:"text-xs text-primary-600 hover:underline",children:"Select All"}),h.jsx("button",{onClick:ye,className:"text-xs text-gray-500 hover:underline",children:"Deselect All"})]}),h.jsx("div",{className:"p-2 max-h-64 overflow-y-auto",children:gr.map(ue=>{var Z;return h.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 hover:bg-gray-50 rounded cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:c.indices.includes(ue),onChange:()=>ne(ue),className:"rounded text-primary-600 focus:ring-primary-500"}),h.jsx("span",{className:"text-sm text-gray-700",children:Pe[ue]}),f&&h.jsx("span",{className:"text-xs text-gray-400 ml-auto",children:((Z=f.byIndex[ue])==null?void 0:Z.toLocaleString())||0})]},ue)})})]})]}),h.jsx("button",{onClick:()=>u({hasIssues:!c.hasIssues}),className:`px-3 py-1.5 text-sm border rounded-lg ${c.hasIssues?"bg-red-100 text-red-700 border-red-300":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Issues"}),h.jsx("button",{onClick:()=>u({zeroCalories:!c.zeroCalories}),className:`px-3 py-1.5 text-sm border rounded-lg ${c.zeroCalories?"bg-orange-100 text-orange-700 border-orange-300":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Show only foods with 0 calories",children:"0 Cal"}),h.jsx("button",{onClick:()=>u({hasReport:!c.hasReport}),className:`px-3 py-1.5 text-sm border rounded-lg ${c.hasReport?"bg-yellow-100 text-yellow-700 border-yellow-300":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Show only foods with user reports",children:" Reports"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[d.length>0&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-primary-50 text-primary-700 rounded-lg",children:[h.jsxs("span",{className:"text-sm font-medium",children:[d.length," selected"]}),h.jsx("button",{onClick:p,className:"text-primary-600 hover:text-primary-800",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n&&h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>I(!E),disabled:l,className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[l?h.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),h.jsx("span",{className:"text-sm font-medium",children:"Move To"}),h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),E&&!l&&h.jsxs("div",{className:"absolute left-0 mt-1 w-56 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[h.jsx("div",{className:"p-2 border-b border-gray-100",children:h.jsxs("p",{className:"text-xs text-gray-600 font-medium",children:["Move ",d.length," food(s) to:"]})}),h.jsx("div",{className:"p-2 max-h-64 overflow-y-auto",children:gr.map(ue=>{var Z;return h.jsxs("button",{onClick:()=>{n(ue),I(!1)},className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-blue-50 rounded transition-colors",children:[Pe[ue],f&&h.jsxs("span",{className:"text-xs text-gray-400 ml-2",children:["(",((Z=f.byIndex[ue])==null?void 0:Z.toLocaleString())||0," foods)"]})]},ue)})})]})]}),h.jsxs("button",{onClick:r,disabled:a,className:"flex items-center gap-2 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[a?h.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),h.jsx("span",{className:"text-sm font-medium",children:"Delete"})]})]}),i&&h.jsxs("button",{onClick:i,className:`relative p-2 rounded-lg transition-colors ${s>0?"text-orange-600 hover:text-orange-700 hover:bg-orange-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,title:`User Reports${s>0?` (${s} pending)`:""}`,children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),s>0&&h.jsx("span",{className:"absolute -top-1 -right-1 flex items-center justify-center min-w-[18px] h-[18px] px-1 text-[10px] font-bold text-white bg-orange-500 rounded-full border-2 border-white",children:s>99?"99+":s})]}),h.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",title:"Refresh data",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),h.jsxs("button",{onClick:e,disabled:O===0||o,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${O>0?"bg-primary-600 text-white hover:bg-primary-700":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[o?h.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),h.jsxs("span",{children:["Save ",O>0?`(${O})`:""]})]})]})]})})},Gie=({onDetectDuplicates:e,onLookupOFF:t,onImageProcessing:r,onGoogleScraper:n,onReports:i,onMasterBuilder:s,onFoodCategorizer:o,onAnalytics:a,isDetectingDuplicates:l,pendingReportsCount:c=0})=>{const{stats:u,duplicateGroups:d,filters:p,setFilters:f,getFilteredFoods:m,selectedFoodIds:y}=gl(),C=m(),w=C.filter(E=>E._reviewFlags.length>0).length,b={verified_foods:"bg-green-500",foods:"bg-blue-500",manual_foods:"bg-purple-500",user_added:"bg-yellow-500",ai_enhanced:"bg-pink-500",ai_manually_added:"bg-indigo-500",tesco_products:"bg-orange-500",uk_foods_cleaned:"bg-cyan-500",fast_foods_database:"bg-red-500",generic_database:"bg-gray-500",consumer_foods:"bg-teal-500"},x={verified_foods:"Verified",foods:"Foods",manual_foods:"Manual",user_added:"User",ai_enhanced:"AI",ai_manually_added:"AI Manual",tesco_products:"Tesco",uk_foods_cleaned:"UK",fast_foods_database:"Fast",generic_database:"Generic",consumer_foods:"Consumer"};return h.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[h.jsxs("div",{className:"p-4 border-b border-gray-100",children:[h.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Overview"}),h.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[h.jsx("div",{className:"text-2xl font-bold text-gray-900",children:C.length.toLocaleString()}),h.jsx("div",{className:"text-xs text-gray-500",children:"Showing"})]}),h.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[h.jsx("div",{className:"text-2xl font-bold text-gray-900",children:(u==null?void 0:u.totalFoods.toLocaleString())||"-"}),h.jsx("div",{className:"text-xs text-gray-500",children:"Total"})]})]})]}),h.jsxs("div",{className:"p-4 border-b border-gray-100 flex-1 overflow-auto",children:[h.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Indices"}),h.jsx("div",{className:"space-y-2",children:gr.map(E=>{const I=(u==null?void 0:u.byIndex[E])||0,k=p.indices.includes(E),P=u!=null&&u.totalFoods?I/u.totalFoods*100:0;return h.jsxs("button",{onClick:()=>{k&&p.indices.length===1?f({indices:[...gr]}):f(k?{indices:p.indices.filter(A=>A!==E)}:{indices:[E]})},className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${k?"bg-gray-100":"hover:bg-gray-50 opacity-60"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${b[E]}`}),h.jsx("span",{className:"text-sm font-medium text-gray-700",children:x[E]})]}),h.jsx("span",{className:"text-sm text-gray-500",children:I.toLocaleString()})]}),h.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1",children:h.jsx("div",{className:`${b[E]} h-1 rounded-full transition-all`,style:{width:`${P}%`}})})]},E)})})]}),h.jsxs("div",{className:"p-4 border-b border-gray-100",children:[h.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Data Quality"}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-green-50 rounded-lg",children:[h.jsx("span",{className:"text-sm text-green-700",children:"Verified"}),h.jsx("span",{className:"text-sm font-medium text-green-700",children:(u==null?void 0:u.verified.toLocaleString())||0})]}),h.jsxs("button",{onClick:()=>f({hasIssues:!p.hasIssues}),className:`w-full flex items-center justify-between px-3 py-2 rounded-lg transition-colors ${p.hasIssues?"bg-red-100":"bg-red-50 hover:bg-red-100"}`,children:[h.jsx("span",{className:"text-sm text-red-700",children:"With Issues"}),h.jsx("span",{className:"text-sm font-medium text-red-700",children:w.toLocaleString()})]}),h.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-yellow-50 rounded-lg",children:[h.jsx("span",{className:"text-sm text-yellow-700",children:"Duplicates"}),h.jsx("span",{className:"text-sm font-medium text-yellow-700",children:d.length})]})]})]}),h.jsxs("div",{className:"p-4",children:[h.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Actions"}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("button",{onClick:e,disabled:l,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-gray-700 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:[l?h.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),h.jsx("span",{children:"Detect Duplicates"})]}),h.jsxs("button",{onClick:t,className:`w-full flex items-center gap-2 px-3 py-2 text-sm rounded-lg transition-colors ${y.length>0?"text-primary-700 bg-primary-50 hover:bg-primary-100":"text-gray-700 bg-gray-50 hover:bg-gray-100"}`,children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),h.jsx("span",{children:y.length>0?`Check UK Status (${y.length})`:"OpenFoodFacts Lookup"})]}),h.jsxs("button",{className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-gray-700 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),h.jsx("span",{children:"Add New Food"})]}),h.jsxs("button",{onClick:r,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-primary-700 bg-primary-50 hover:bg-primary-100 rounded-lg transition-colors",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),h.jsx("span",{children:"Image Processing"})]}),h.jsxs("button",{onClick:n,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-purple-700 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})}),h.jsx("span",{children:"Google Image Scraper"})]}),h.jsxs("button",{onClick:i,className:`w-full flex items-center justify-between px-3 py-2 text-sm rounded-lg transition-colors ${c>0?"text-orange-700 bg-orange-50 hover:bg-orange-100":"text-gray-700 bg-gray-50 hover:bg-gray-100"}`,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),h.jsx("span",{children:"User Reports"})]}),c>0&&h.jsx("span",{className:"flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-bold text-white bg-orange-500 rounded-full",children:c>99?"99+":c})]}),h.jsxs("button",{onClick:a,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-cyan-700 bg-cyan-50 hover:bg-cyan-100 rounded-lg transition-colors font-semibold",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),h.jsx("span",{children:"Analytics"})]}),h.jsxs("button",{onClick:s,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-green-700 bg-green-50 hover:bg-green-100 rounded-lg transition-colors font-semibold",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),h.jsx("span",{children:"Master Builder"})]}),h.jsxs("button",{onClick:o,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-purple-700 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors font-semibold",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),h.jsx("span",{children:"Food Categorizer"})]})]})]})]})},jie=({message:e,progress:t})=>h.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"mb-4",children:h.jsxs("svg",{className:"w-12 h-12 text-primary-600 animate-spin mx-auto",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),h.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:e}),t!==void 0&&h.jsxs("div",{className:"w-64 mx-auto",children:[h.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-1",children:[h.jsx("span",{children:"Loading..."}),h.jsxs("span",{children:[Math.round(t),"%"]})]}),h.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:h.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${t}%`}})})]})]})}),Bie="https://uk.openfoodfacts.org/api/v2",Vie="https://world.openfoodfacts.org/api/v2",KF=["en:united-kingdom","en:great-britain","en:england","en:scotland","en:wales","en:northern-ireland","en:uk"],Hie=["50","539"],qF=["tesco","sainsbury","sainsburys","sainsbury's","asda","morrisons","waitrose","aldi","lidl","co-op","coop","marks & spencer","m&s","iceland","ocado","booths","budgens","costcutter","spar","londis","nisa","premier","one stop","farmfoods","heron foods","b&m","home bargains","poundland","wilko","superdrug","boots"],zie=["en:tesco","en:sainsburys","en:asda","en:morrisons","en:waitrose","en:aldi","en:lidl","en:co-op","en:marks-and-spencer","en:iceland","en:ocado","en:boots","en:superdrug","en:holland-and-barrett"],YF=[["colour","color"],["flavour","flavor"],["fibre","fiber"],["centre","center"],["litre","liter"],["grey","gray"],["organise","organize"],["recognise","recognize"],["favourite","favorite"],["honour","honor"],["defence","defense"],["licence","license"],["stabiliser","stabilizer"],["pasteurised","pasteurized"],["homogenised","homogenized"],["flavouring","flavoring"],["colouring","coloring"],["sulphur","sulfur"],["sulphite","sulfite"]],$ie=["skimmed milk","semi-skimmed","full fat milk","double cream","single cream","clotted cream","cornflour","bicarbonate of soda","caster sugar","demerara","muscovado","golden syrup","treacle","marmite","bovril","hp sauce","worcestershire","crisps","biscuit","aubergine","courgette","coriander","rocket","swede","spring onion","porridge"];function Uie(e){const t=[];let r=0,n=0;const i=30;r+=i;const s=e.countries_tags||[],o=s.some(ve=>KF.includes(ve.toLowerCase()));o?(n+=i,t.push({signal:"Country tags include UK",matched:!0,weight:i,details:s.filter(ve=>KF.includes(ve.toLowerCase())).join(", ")})):t.push({signal:"Country tags include UK",matched:!1,weight:i,details:s.length>0?`Found: ${s.slice(0,3).join(", ")}`:"No country tags"});const a=25;r+=a;const l=e.code||"",c=Hie.some(ve=>l.startsWith(ve));c?(n+=a,t.push({signal:"UK barcode prefix (50/539)",matched:!0,weight:a,details:`Barcode: ${l}`})):t.push({signal:"UK barcode prefix (50/539)",matched:!1,weight:a,details:l?`Barcode starts with: ${l.substring(0,3)}`:"No barcode"});const u=20;r+=u;const d=(e.brands||"").toLowerCase(),p=(e.brands_tags||[]).map(ve=>ve.toLowerCase()),f=qF.find(ve=>d.includes(ve)||p.some(Ze=>Ze.includes(ve.replace(/[^a-z]/g,""))));f?(n+=u,t.push({signal:"UK retailer brand",matched:!0,weight:u,details:`Matched: ${f}`})):t.push({signal:"UK retailer brand",matched:!1,weight:u,details:d||"No brand"});const m=15;r+=m;const y=e.stores_tags||[],C=e.purchase_places_tags||[],w=[...y,...C].map(ve=>ve.toLowerCase());w.some(ve=>zie.some(Ze=>ve.includes(Ze.replace("en:",""))))||w.some(ve=>qF.some(Ze=>ve.includes(Ze.replace(/[^a-z]/g,""))))?(n+=m,t.push({signal:"UK store/purchase location",matched:!0,weight:m,details:w.slice(0,3).join(", ")})):t.push({signal:"UK store/purchase location",matched:!1,weight:m,details:w.length>0?w.slice(0,3).join(", "):"No store data"});const x=10;r+=x;const E=((e.ingredients_text||"")+" "+(e.ingredients_text_en||"")).toLowerCase(),I=((e.product_name||"")+" "+(e.product_name_en||"")).toLowerCase(),k=E+" "+I,P=YF.filter(([ve])=>k.includes(ve)).map(([ve])=>ve),A=YF.filter(([,ve])=>k.includes(ve)).map(([,ve])=>ve);P.length>0&&P.length>=A.length?(n+=x,t.push({signal:"UK spelling patterns",matched:!0,weight:x,details:P.slice(0,3).join(", ")})):A.length>P.length?t.push({signal:"UK spelling patterns",matched:!1,weight:x,details:`US spellings found: ${A.slice(0,3).join(", ")}`}):t.push({signal:"UK spelling patterns",matched:!1,weight:x,details:"No distinctive spelling found"});const D=10;r+=D;const L=$ie.filter(ve=>k.includes(ve.toLowerCase()));L.length>0?(n+=D,t.push({signal:"UK-specific terms",matched:!0,weight:D,details:L.slice(0,3).join(", ")})):t.push({signal:"UK-specific terms",matched:!1,weight:D,details:"No UK-specific terms found"});const M=5;r+=M;const T=e.nutriments||{},O=T.salt_100g!==void 0&&T.salt_100g>0,Q=T.sodium_100g!==void 0&&!O;O?(n+=M,t.push({signal:"Salt labeling (UK style)",matched:!0,weight:M,details:`Salt: ${T.salt_100g}g per 100g`})):Q?t.push({signal:"Salt labeling (UK style)",matched:!1,weight:M,details:"Sodium only (US style)"}):t.push({signal:"Salt labeling (UK style)",matched:!1,weight:M,details:"No salt/sodium data"});const X=10;r+=X;const B=(e.origins||"").toLowerCase(),W=(e.origins_tags||[]).map(ve=>ve.toLowerCase()),ne=(e.manufacturing_places||"").toLowerCase(),J=(e.manufacturing_places_tags||[]).map(ve=>ve.toLowerCase()),ye=[B,...W,ne,...J].join(" ");["united kingdom","uk","britain","england","scotland","wales","northern ireland"].some(ve=>ye.includes(ve))?(n+=X,t.push({signal:"UK manufacturing/origin",matched:!0,weight:X,details:ye.substring(0,50)})):t.push({signal:"UK manufacturing/origin",matched:!1,weight:X,details:ye.length>0?ye.substring(0,50):"No origin data"});const Z=Math.round(n/r*100);return{isUKProduct:Z>=40||o||c,confidenceScore:Z,signals:t.sort((ve,Ze)=>Ze.weight-ve.weight)}}async function Wie(e,t="UK"){var n,i,s,o,a;const r=(s=(i=(n=e.selected_images)==null?void 0:n.front)==null?void 0:i.display)==null?void 0:s.en;if(r)return{best_image_url:r,image_confidence_score:8,is_region_match:!0};if((a=(o=e.selected_images)==null?void 0:o.front)!=null&&a.display){const l=e.selected_images.front.display;for(const u of["en","uk","gb"])if(l[u])return{best_image_url:l[u],image_confidence_score:7,is_region_match:u==="en"};const c=Object.keys(l)[0];if(c&&l[c])return{best_image_url:l[c],image_confidence_score:6,is_region_match:!1}}if(e.image_front_url){const l=e.image_front_url.includes("front_en")||e.image_front_url.includes("front_uk");return{best_image_url:e.image_front_url,image_confidence_score:5,is_region_match:l}}return{best_image_url:null,image_confidence_score:0,is_region_match:!1}}async function QF(e,t="UK"){const r=e.replace(/\D/g,"");if(!r||r.length<8)return{product:null,isUKProduct:!1,ukConfidenceScore:0,ukSignals:[],bestImageUrl:null,imageConfidenceScore:0,isRegionMatch:!1,error:"Invalid barcode"};try{let n=await fetch(`${Bie}/product/${r}.json`),i=await n.json();if((i.status!==1||!i.product)&&(n=await fetch(`${Vie}/product/${r}.json`),i=await n.json()),i.status!==1||!i.product)return{product:null,isUKProduct:!1,ukConfidenceScore:0,ukSignals:[],bestImageUrl:null,imageConfidenceScore:0,isRegionMatch:!1,error:"Product not found"};const s=i.product,o=Uie(s),a=await Wie(s,t);return{product:s,isUKProduct:o.isUKProduct,ukConfidenceScore:o.confidenceScore,ukSignals:o.signals,bestImageUrl:a.best_image_url,imageConfidenceScore:a.image_confidence_score,isRegionMatch:a.is_region_match}}catch(n){return console.error("Error looking up product:",n),{product:null,isUKProduct:!1,ukConfidenceScore:0,ukSignals:[],bestImageUrl:null,imageConfidenceScore:0,isRegionMatch:!1,error:String(n)}}}function LP(e){const t=e.nutriments||{};return{name:e.product_name_en||e.product_name||"Unknown Product",brandName:e.brands||null,barcode:e.code,ingredientsText:e.ingredients_text_en||e.ingredients_text||null,calories:t["energy-kcal_100g"]||0,protein:t.proteins_100g||0,carbs:t.carbohydrates_100g||0,fat:t.fat_100g||0,saturatedFat:t["saturated-fat_100g"]??null,fiber:t.fiber_100g||0,sugar:t.sugars_100g||0,sodium:t.sodium_100g?t.sodium_100g*1e3:0,salt:t.salt_100g??null}}var XF={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xW=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=i&63|128):(i&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=i&63|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=i&63|128)}return t},Kie=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const i=e[r++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[r++];t[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[r++],o=e[r++],a=e[r++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[n++]=String.fromCharCode(55296+(l>>10)),t[n++]=String.fromCharCode(56320+(l&1023))}else{const s=e[r++],o=e[r++];t[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},EW={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,l=i+2<e.length,c=l?e[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(p=64)),n.push(r[u],r[d],r[p],r[f])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(xW(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Kie(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<e.length;){const s=r[e.charAt(i++)],a=i<e.length?r[e.charAt(i)]:0;++i;const c=i<e.length?r[e.charAt(i)]:64;++i;const d=i<e.length?r[e.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new qie;const p=s<<2|a>>4;if(n.push(p),c!==64){const f=a<<4&240|c>>2;if(n.push(f),d!==64){const m=c<<6&192|d;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class qie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Yie=function(e){const t=xW(e);return EW.encodeByteArray(t,!0)},Vw=function(e){return Yie(e).replace(/\./g,"")},PW=function(e){try{return EW.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xie=()=>Qie().__FIREBASE_DEFAULTS__,Zie=()=>{if(typeof process>"u"||typeof XF>"u")return;const e=XF.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Jie=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&PW(e[1]);return t&&JSON.parse(t)},tI=()=>{try{return Xie()||Zie()||Jie()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},RW=e=>{var t,r;return(r=(t=tI())===null||t===void 0?void 0:t.emulatorHosts)===null||r===void 0?void 0:r[e]},TW=e=>{const t=RW(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},AW=()=>{var e;return(e=tI())===null||e===void 0?void 0:e.config},_W=e=>{var t;return(t=tI())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ese{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tse(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Vw(JSON.stringify(r)),Vw(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rse(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ti())}function nse(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ise(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function sse(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ose(){const e=Ti();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ase(){try{return typeof indexedDB=="object"}catch{return!1}}function lse(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cse="FirebaseError";class Ha extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=cse,Object.setPrototypeOf(this,Ha.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vy.prototype.create)}}class vy{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?use(s,n):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ha(i,a,n)}}function use(e,t){return e.replace(dse,(r,n)=>{const i=t[n];return i!=null?String(i):`<${n}?>`})}const dse=/\{\$([^}]+)}/g;function hse(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Hw(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const i of r){if(!n.includes(i))return!1;const s=e[i],o=t[i];if(ZF(s)&&ZF(o)){if(!Hw(s,o))return!1}else if(s!==o)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function ZF(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(i=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function Vg(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");t[decodeURIComponent(i)]=decodeURIComponent(s)}}),t}function Hg(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function pse(e,t){const r=new fse(e,t);return r.subscribe.bind(r)}class fse{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let i;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");gse(t,["next","error","complete"])?i=t:i={next:t,error:r,complete:n},i.next===void 0&&(i.next=GP),i.error===void 0&&(i.error=GP),i.complete===void 0&&(i.complete=GP);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gse(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function GP(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(e){return e&&e._delegate?e._delegate:e}class iu{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mse=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new ese;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){var r;const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(r=t==null?void 0:t.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(yse(t))try{this.getOrInitializeService({instanceIdentifier:Hu})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(t=Hu){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Hu){return this.instances.has(t)}getOptions(t=Hu){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);n===a&&o.resolve(i)}return i}onInit(t,r){var n;const i=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:vse(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Hu){return this.component?this.component.multipleInstances?t:Hu:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function vse(e){return e===Hu?void 0:e}function yse(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cse{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new mse(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var or;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(or||(or={}));const wse={debug:or.DEBUG,verbose:or.VERBOSE,info:or.INFO,warn:or.WARN,error:or.ERROR,silent:or.SILENT},bse=or.INFO,Sse={[or.DEBUG]:"log",[or.VERBOSE]:"log",[or.INFO]:"info",[or.WARN]:"warn",[or.ERROR]:"error"},xse=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),i=Sse[t];if(i)console[i](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class rI{constructor(t){this.name=t,this._logLevel=bse,this._logHandler=xse,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in or))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?wse[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,or.DEBUG,...t),this._logHandler(this,or.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,or.VERBOSE,...t),this._logHandler(this,or.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,or.INFO,...t),this._logHandler(this,or.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,or.WARN,...t),this._logHandler(this,or.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,or.ERROR,...t),this._logHandler(this,or.ERROR,...t)}}const Ese=(e,t)=>t.some(r=>e instanceof r);let JF,eL;function Pse(){return JF||(JF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rse(){return eL||(eL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DW=new WeakMap,iA=new WeakMap,kW=new WeakMap,jP=new WeakMap,nI=new WeakMap;function Tse(e){const t=new Promise((r,n)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{r($c(e.result)),i()},o=()=>{n(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(r=>{r instanceof IDBCursor&&DW.set(r,e)}).catch(()=>{}),nI.set(t,e),t}function Ase(e){if(iA.has(e))return;const t=new Promise((r,n)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{r(),i()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});iA.set(e,t)}let sA={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return iA.get(e);if(t==="objectStoreNames")return e.objectStoreNames||kW.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return $c(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function _se(e){sA=e(sA)}function Dse(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(BP(this),t,...r);return kW.set(n,t.sort?t.sort():[t]),$c(n)}:Rse().includes(e)?function(...t){return e.apply(BP(this),t),$c(DW.get(this))}:function(...t){return $c(e.apply(BP(this),t))}}function kse(e){return typeof e=="function"?Dse(e):(e instanceof IDBTransaction&&Ase(e),Ese(e,Pse())?new Proxy(e,sA):e)}function $c(e){if(e instanceof IDBRequest)return Tse(e);if(jP.has(e))return jP.get(e);const t=kse(e);return t!==e&&(jP.set(e,t),nI.set(t,e)),t}const BP=e=>nI.get(e);function Ise(e,t,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=$c(o);return n&&o.addEventListener("upgradeneeded",l=>{n($c(o.result),l.oldVersion,l.newVersion,$c(o.transaction),l)}),r&&o.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Nse=["get","getKey","getAll","getAllKeys","count"],Mse=["put","add","delete","clear"],VP=new Map;function tL(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(VP.get(t))return VP.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,i=Mse.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Nse.includes(r)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(a.shift())),(await Promise.all([c[r](...a),i&&l.done]))[0]};return VP.set(t,s),s}_se(e=>({...e,get:(t,r,n)=>tL(t,r)||e.get(t,r,n),has:(t,r)=>!!tL(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ose{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Fse(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Fse(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const oA="@firebase/app",rL="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl=new rI("@firebase/app"),Lse="@firebase/app-compat",Gse="@firebase/analytics-compat",jse="@firebase/analytics",Bse="@firebase/app-check-compat",Vse="@firebase/app-check",Hse="@firebase/auth",zse="@firebase/auth-compat",$se="@firebase/database",Use="@firebase/data-connect",Wse="@firebase/database-compat",Kse="@firebase/functions",qse="@firebase/functions-compat",Yse="@firebase/installations",Qse="@firebase/installations-compat",Xse="@firebase/messaging",Zse="@firebase/messaging-compat",Jse="@firebase/performance",eoe="@firebase/performance-compat",toe="@firebase/remote-config",roe="@firebase/remote-config-compat",noe="@firebase/storage",ioe="@firebase/storage-compat",soe="@firebase/firestore",ooe="@firebase/vertexai-preview",aoe="@firebase/firestore-compat",loe="firebase",coe="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="[DEFAULT]",uoe={[oA]:"fire-core",[Lse]:"fire-core-compat",[jse]:"fire-analytics",[Gse]:"fire-analytics-compat",[Vse]:"fire-app-check",[Bse]:"fire-app-check-compat",[Hse]:"fire-auth",[zse]:"fire-auth-compat",[$se]:"fire-rtdb",[Use]:"fire-data-connect",[Wse]:"fire-rtdb-compat",[Kse]:"fire-fn",[qse]:"fire-fn-compat",[Yse]:"fire-iid",[Qse]:"fire-iid-compat",[Xse]:"fire-fcm",[Zse]:"fire-fcm-compat",[Jse]:"fire-perf",[eoe]:"fire-perf-compat",[toe]:"fire-rc",[roe]:"fire-rc-compat",[noe]:"fire-gcs",[ioe]:"fire-gcs-compat",[soe]:"fire-fst",[aoe]:"fire-fst-compat",[ooe]:"fire-vertex","fire-js":"fire-js",[loe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=new Map,doe=new Map,lA=new Map;function nL(e,t){try{e.container.addComponent(t)}catch(r){Rl.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function Ud(e){const t=e.name;if(lA.has(t))return Rl.debug(`There were multiple attempts to register component ${t}.`),!1;lA.set(t,e);for(const r of zw.values())nL(r,e);for(const r of doe.values())nL(r,e);return!0}function hx(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function al(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hoe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Uc=new vy("app","Firebase",hoe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class poe{constructor(t,r,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new iu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Uc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff=coe;function IW(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n=Object.assign({name:aA,automaticDataCollectionEnabled:!1},t),i=n.name;if(typeof i!="string"||!i)throw Uc.create("bad-app-name",{appName:String(i)});if(r||(r=AW()),!r)throw Uc.create("no-options");const s=zw.get(i);if(s){if(Hw(r,s.options)&&Hw(n,s.config))return s;throw Uc.create("duplicate-app",{appName:i})}const o=new Cse(i);for(const l of lA.values())o.addComponent(l);const a=new poe(r,n,o);return zw.set(i,a),a}function iI(e=aA){const t=zw.get(e);if(!t&&e===aA&&AW())return IW();if(!t)throw Uc.create("no-app",{appName:e});return t}function Aa(e,t,r){var n;let i=(n=uoe[e])!==null&&n!==void 0?n:e;r&&(i+=`-${r}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Rl.warn(a.join(" "));return}Ud(new iu(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const foe="firebase-heartbeat-database",goe=1,cv="firebase-heartbeat-store";let HP=null;function NW(){return HP||(HP=Ise(foe,goe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(cv)}catch(r){console.warn(r)}}}}).catch(e=>{throw Uc.create("idb-open",{originalErrorMessage:e.message})})),HP}async function moe(e){try{const r=(await NW()).transaction(cv),n=await r.objectStore(cv).get(MW(e));return await r.done,n}catch(t){if(t instanceof Ha)Rl.warn(t.message);else{const r=Uc.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Rl.warn(r.message)}}}async function iL(e,t){try{const n=(await NW()).transaction(cv,"readwrite");await n.objectStore(cv).put(t,MW(e)),await n.done}catch(r){if(r instanceof Ha)Rl.warn(r.message);else{const n=Uc.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Rl.warn(n.message)}}}function MW(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const voe=1024,yoe=30*24*60*60*1e3;class Coe{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new boe(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=sL();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=yoe}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Rl.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=sL(),{heartbeatsToSend:n,unsentEntries:i}=woe(this._heartbeatsCache.heartbeats),s=Vw(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return Rl.warn(r),""}}}function sL(){return new Date().toISOString().substring(0,10)}function woe(e,t=voe){const r=[];let n=e.slice();for(const i of e){const s=r.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),oL(r)>t){s.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),oL(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class boe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ase()?lse().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await moe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return iL(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return iL(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function oL(e){return Vw(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Soe(e){Ud(new iu("platform-logger",t=>new Ose(t),"PRIVATE")),Ud(new iu("heartbeat",t=>new Coe(t),"PRIVATE")),Aa(oA,rL,e),Aa(oA,rL,"esm2017"),Aa("fire-js","")}Soe("");var xoe="firebase",Eoe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Aa(xoe,Eoe,"app");var aL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var OW;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(P,A){function D(){}D.prototype=A.prototype,P.D=A.prototype,P.prototype=new D,P.prototype.constructor=P,P.C=function(L,M,T){for(var O=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)O[Q-2]=arguments[Q];return A.prototype[M].apply(L,O)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,A,D){D||(D=0);var L=Array(16);if(typeof A=="string")for(var M=0;16>M;++M)L[M]=A.charCodeAt(D++)|A.charCodeAt(D++)<<8|A.charCodeAt(D++)<<16|A.charCodeAt(D++)<<24;else for(M=0;16>M;++M)L[M]=A[D++]|A[D++]<<8|A[D++]<<16|A[D++]<<24;A=P.g[0],D=P.g[1],M=P.g[2];var T=P.g[3],O=A+(T^D&(M^T))+L[0]+3614090360&4294967295;A=D+(O<<7&4294967295|O>>>25),O=T+(M^A&(D^M))+L[1]+3905402710&4294967295,T=A+(O<<12&4294967295|O>>>20),O=M+(D^T&(A^D))+L[2]+606105819&4294967295,M=T+(O<<17&4294967295|O>>>15),O=D+(A^M&(T^A))+L[3]+3250441966&4294967295,D=M+(O<<22&4294967295|O>>>10),O=A+(T^D&(M^T))+L[4]+4118548399&4294967295,A=D+(O<<7&4294967295|O>>>25),O=T+(M^A&(D^M))+L[5]+1200080426&4294967295,T=A+(O<<12&4294967295|O>>>20),O=M+(D^T&(A^D))+L[6]+2821735955&4294967295,M=T+(O<<17&4294967295|O>>>15),O=D+(A^M&(T^A))+L[7]+4249261313&4294967295,D=M+(O<<22&4294967295|O>>>10),O=A+(T^D&(M^T))+L[8]+1770035416&4294967295,A=D+(O<<7&4294967295|O>>>25),O=T+(M^A&(D^M))+L[9]+2336552879&4294967295,T=A+(O<<12&4294967295|O>>>20),O=M+(D^T&(A^D))+L[10]+4294925233&4294967295,M=T+(O<<17&4294967295|O>>>15),O=D+(A^M&(T^A))+L[11]+2304563134&4294967295,D=M+(O<<22&4294967295|O>>>10),O=A+(T^D&(M^T))+L[12]+1804603682&4294967295,A=D+(O<<7&4294967295|O>>>25),O=T+(M^A&(D^M))+L[13]+4254626195&4294967295,T=A+(O<<12&4294967295|O>>>20),O=M+(D^T&(A^D))+L[14]+2792965006&4294967295,M=T+(O<<17&4294967295|O>>>15),O=D+(A^M&(T^A))+L[15]+1236535329&4294967295,D=M+(O<<22&4294967295|O>>>10),O=A+(M^T&(D^M))+L[1]+4129170786&4294967295,A=D+(O<<5&4294967295|O>>>27),O=T+(D^M&(A^D))+L[6]+3225465664&4294967295,T=A+(O<<9&4294967295|O>>>23),O=M+(A^D&(T^A))+L[11]+643717713&4294967295,M=T+(O<<14&4294967295|O>>>18),O=D+(T^A&(M^T))+L[0]+3921069994&4294967295,D=M+(O<<20&4294967295|O>>>12),O=A+(M^T&(D^M))+L[5]+3593408605&4294967295,A=D+(O<<5&4294967295|O>>>27),O=T+(D^M&(A^D))+L[10]+38016083&4294967295,T=A+(O<<9&4294967295|O>>>23),O=M+(A^D&(T^A))+L[15]+3634488961&4294967295,M=T+(O<<14&4294967295|O>>>18),O=D+(T^A&(M^T))+L[4]+3889429448&4294967295,D=M+(O<<20&4294967295|O>>>12),O=A+(M^T&(D^M))+L[9]+568446438&4294967295,A=D+(O<<5&4294967295|O>>>27),O=T+(D^M&(A^D))+L[14]+3275163606&4294967295,T=A+(O<<9&4294967295|O>>>23),O=M+(A^D&(T^A))+L[3]+4107603335&4294967295,M=T+(O<<14&4294967295|O>>>18),O=D+(T^A&(M^T))+L[8]+1163531501&4294967295,D=M+(O<<20&4294967295|O>>>12),O=A+(M^T&(D^M))+L[13]+2850285829&4294967295,A=D+(O<<5&4294967295|O>>>27),O=T+(D^M&(A^D))+L[2]+4243563512&4294967295,T=A+(O<<9&4294967295|O>>>23),O=M+(A^D&(T^A))+L[7]+1735328473&4294967295,M=T+(O<<14&4294967295|O>>>18),O=D+(T^A&(M^T))+L[12]+2368359562&4294967295,D=M+(O<<20&4294967295|O>>>12),O=A+(D^M^T)+L[5]+4294588738&4294967295,A=D+(O<<4&4294967295|O>>>28),O=T+(A^D^M)+L[8]+2272392833&4294967295,T=A+(O<<11&4294967295|O>>>21),O=M+(T^A^D)+L[11]+1839030562&4294967295,M=T+(O<<16&4294967295|O>>>16),O=D+(M^T^A)+L[14]+4259657740&4294967295,D=M+(O<<23&4294967295|O>>>9),O=A+(D^M^T)+L[1]+2763975236&4294967295,A=D+(O<<4&4294967295|O>>>28),O=T+(A^D^M)+L[4]+1272893353&4294967295,T=A+(O<<11&4294967295|O>>>21),O=M+(T^A^D)+L[7]+4139469664&4294967295,M=T+(O<<16&4294967295|O>>>16),O=D+(M^T^A)+L[10]+3200236656&4294967295,D=M+(O<<23&4294967295|O>>>9),O=A+(D^M^T)+L[13]+681279174&4294967295,A=D+(O<<4&4294967295|O>>>28),O=T+(A^D^M)+L[0]+3936430074&4294967295,T=A+(O<<11&4294967295|O>>>21),O=M+(T^A^D)+L[3]+3572445317&4294967295,M=T+(O<<16&4294967295|O>>>16),O=D+(M^T^A)+L[6]+76029189&4294967295,D=M+(O<<23&4294967295|O>>>9),O=A+(D^M^T)+L[9]+3654602809&4294967295,A=D+(O<<4&4294967295|O>>>28),O=T+(A^D^M)+L[12]+3873151461&4294967295,T=A+(O<<11&4294967295|O>>>21),O=M+(T^A^D)+L[15]+530742520&4294967295,M=T+(O<<16&4294967295|O>>>16),O=D+(M^T^A)+L[2]+3299628645&4294967295,D=M+(O<<23&4294967295|O>>>9),O=A+(M^(D|~T))+L[0]+4096336452&4294967295,A=D+(O<<6&4294967295|O>>>26),O=T+(D^(A|~M))+L[7]+1126891415&4294967295,T=A+(O<<10&4294967295|O>>>22),O=M+(A^(T|~D))+L[14]+2878612391&4294967295,M=T+(O<<15&4294967295|O>>>17),O=D+(T^(M|~A))+L[5]+4237533241&4294967295,D=M+(O<<21&4294967295|O>>>11),O=A+(M^(D|~T))+L[12]+1700485571&4294967295,A=D+(O<<6&4294967295|O>>>26),O=T+(D^(A|~M))+L[3]+2399980690&4294967295,T=A+(O<<10&4294967295|O>>>22),O=M+(A^(T|~D))+L[10]+4293915773&4294967295,M=T+(O<<15&4294967295|O>>>17),O=D+(T^(M|~A))+L[1]+2240044497&4294967295,D=M+(O<<21&4294967295|O>>>11),O=A+(M^(D|~T))+L[8]+1873313359&4294967295,A=D+(O<<6&4294967295|O>>>26),O=T+(D^(A|~M))+L[15]+4264355552&4294967295,T=A+(O<<10&4294967295|O>>>22),O=M+(A^(T|~D))+L[6]+2734768916&4294967295,M=T+(O<<15&4294967295|O>>>17),O=D+(T^(M|~A))+L[13]+1309151649&4294967295,D=M+(O<<21&4294967295|O>>>11),O=A+(M^(D|~T))+L[4]+4149444226&4294967295,A=D+(O<<6&4294967295|O>>>26),O=T+(D^(A|~M))+L[11]+3174756917&4294967295,T=A+(O<<10&4294967295|O>>>22),O=M+(A^(T|~D))+L[2]+718787259&4294967295,M=T+(O<<15&4294967295|O>>>17),O=D+(T^(M|~A))+L[9]+3951481745&4294967295,P.g[0]=P.g[0]+A&4294967295,P.g[1]=P.g[1]+(M+(O<<21&4294967295|O>>>11))&4294967295,P.g[2]=P.g[2]+M&4294967295,P.g[3]=P.g[3]+T&4294967295}n.prototype.u=function(P,A){A===void 0&&(A=P.length);for(var D=A-this.blockSize,L=this.B,M=this.h,T=0;T<A;){if(M==0)for(;T<=D;)i(this,P,T),T+=this.blockSize;if(typeof P=="string"){for(;T<A;)if(L[M++]=P.charCodeAt(T++),M==this.blockSize){i(this,L),M=0;break}}else for(;T<A;)if(L[M++]=P[T++],M==this.blockSize){i(this,L),M=0;break}}this.h=M,this.o+=A},n.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var A=1;A<P.length-8;++A)P[A]=0;var D=8*this.o;for(A=P.length-8;A<P.length;++A)P[A]=D&255,D/=256;for(this.u(P),P=Array(16),A=D=0;4>A;++A)for(var L=0;32>L;L+=8)P[D++]=this.g[A]>>>L&255;return P};function s(P,A){var D=a;return Object.prototype.hasOwnProperty.call(D,P)?D[P]:D[P]=A(P)}function o(P,A){this.h=A;for(var D=[],L=!0,M=P.length-1;0<=M;M--){var T=P[M]|0;L&&T==A||(D[M]=T,L=!1)}this.g=D}var a={};function l(P){return-128<=P&&128>P?s(P,function(A){return new o([A|0],0>A?-1:0)}):new o([P|0],0>P?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return d;if(0>P)return C(c(-P));for(var A=[],D=1,L=0;P>=D;L++)A[L]=P/D|0,D*=4294967296;return new o(A,0)}function u(P,A){if(P.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(P.charAt(0)=="-")return C(u(P.substring(1),A));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=c(Math.pow(A,8)),L=d,M=0;M<P.length;M+=8){var T=Math.min(8,P.length-M),O=parseInt(P.substring(M,M+T),A);8>T?(T=c(Math.pow(A,T)),L=L.j(T).add(c(O))):(L=L.j(D),L=L.add(c(O)))}return L}var d=l(0),p=l(1),f=l(16777216);e=o.prototype,e.m=function(){if(y(this))return-C(this).m();for(var P=0,A=1,D=0;D<this.g.length;D++){var L=this.i(D);P+=(0<=L?L:4294967296+L)*A,A*=4294967296}return P},e.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(m(this))return"0";if(y(this))return"-"+C(this).toString(P);for(var A=c(Math.pow(P,6)),D=this,L="";;){var M=E(D,A).g;D=w(D,M.j(A));var T=((0<D.g.length?D.g[0]:D.h)>>>0).toString(P);if(D=M,m(D))return T+L;for(;6>T.length;)T="0"+T;L=T+L}},e.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function m(P){if(P.h!=0)return!1;for(var A=0;A<P.g.length;A++)if(P.g[A]!=0)return!1;return!0}function y(P){return P.h==-1}e.l=function(P){return P=w(this,P),y(P)?-1:m(P)?0:1};function C(P){for(var A=P.g.length,D=[],L=0;L<A;L++)D[L]=~P.g[L];return new o(D,~P.h).add(p)}e.abs=function(){return y(this)?C(this):this},e.add=function(P){for(var A=Math.max(this.g.length,P.g.length),D=[],L=0,M=0;M<=A;M++){var T=L+(this.i(M)&65535)+(P.i(M)&65535),O=(T>>>16)+(this.i(M)>>>16)+(P.i(M)>>>16);L=O>>>16,T&=65535,O&=65535,D[M]=O<<16|T}return new o(D,D[D.length-1]&-2147483648?-1:0)};function w(P,A){return P.add(C(A))}e.j=function(P){if(m(this)||m(P))return d;if(y(this))return y(P)?C(this).j(C(P)):C(C(this).j(P));if(y(P))return C(this.j(C(P)));if(0>this.l(f)&&0>P.l(f))return c(this.m()*P.m());for(var A=this.g.length+P.g.length,D=[],L=0;L<2*A;L++)D[L]=0;for(L=0;L<this.g.length;L++)for(var M=0;M<P.g.length;M++){var T=this.i(L)>>>16,O=this.i(L)&65535,Q=P.i(M)>>>16,X=P.i(M)&65535;D[2*L+2*M]+=O*X,b(D,2*L+2*M),D[2*L+2*M+1]+=T*X,b(D,2*L+2*M+1),D[2*L+2*M+1]+=O*Q,b(D,2*L+2*M+1),D[2*L+2*M+2]+=T*Q,b(D,2*L+2*M+2)}for(L=0;L<A;L++)D[L]=D[2*L+1]<<16|D[2*L];for(L=A;L<2*A;L++)D[L]=0;return new o(D,0)};function b(P,A){for(;(P[A]&65535)!=P[A];)P[A+1]+=P[A]>>>16,P[A]&=65535,A++}function x(P,A){this.g=P,this.h=A}function E(P,A){if(m(A))throw Error("division by zero");if(m(P))return new x(d,d);if(y(P))return A=E(C(P),A),new x(C(A.g),C(A.h));if(y(A))return A=E(P,C(A)),new x(C(A.g),A.h);if(30<P.g.length){if(y(P)||y(A))throw Error("slowDivide_ only works with positive integers.");for(var D=p,L=A;0>=L.l(P);)D=I(D),L=I(L);var M=k(D,1),T=k(L,1);for(L=k(L,2),D=k(D,2);!m(L);){var O=T.add(L);0>=O.l(P)&&(M=M.add(D),T=O),L=k(L,1),D=k(D,1)}return A=w(P,M.j(A)),new x(M,A)}for(M=d;0<=P.l(A);){for(D=Math.max(1,Math.floor(P.m()/A.m())),L=Math.ceil(Math.log(D)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),T=c(D),O=T.j(A);y(O)||0<O.l(P);)D-=L,T=c(D),O=T.j(A);m(T)&&(T=p),M=M.add(T),P=w(P,O)}return new x(M,P)}e.A=function(P){return E(this,P).h},e.and=function(P){for(var A=Math.max(this.g.length,P.g.length),D=[],L=0;L<A;L++)D[L]=this.i(L)&P.i(L);return new o(D,this.h&P.h)},e.or=function(P){for(var A=Math.max(this.g.length,P.g.length),D=[],L=0;L<A;L++)D[L]=this.i(L)|P.i(L);return new o(D,this.h|P.h)},e.xor=function(P){for(var A=Math.max(this.g.length,P.g.length),D=[],L=0;L<A;L++)D[L]=this.i(L)^P.i(L);return new o(D,this.h^P.h)};function I(P){for(var A=P.g.length+1,D=[],L=0;L<A;L++)D[L]=P.i(L)<<1|P.i(L-1)>>>31;return new o(D,P.h)}function k(P,A){var D=A>>5;A%=32;for(var L=P.g.length-D,M=[],T=0;T<L;T++)M[T]=0<A?P.i(T+D)>>>A|P.i(T+D+1)<<32-A:P.i(T+D);return new o(M,P.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,OW=o}).apply(typeof aL<"u"?aL:typeof self<"u"?self:typeof window<"u"?window:{});var TC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,R,N){return g==Array.prototype||g==Object.prototype||(g[R]=N.value),g};function r(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof TC=="object"&&TC];for(var R=0;R<g.length;++R){var N=g[R];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var n=r(this);function i(g,R){if(R)e:{var N=n;g=g.split(".");for(var V=0;V<g.length-1;V++){var pe=g[V];if(!(pe in N))break e;N=N[pe]}g=g[g.length-1],V=N[g],R=R(V),R!=V&&R!=null&&t(N,g,{configurable:!0,writable:!0,value:R})}}function s(g,R){g instanceof String&&(g+="");var N=0,V=!1,pe={next:function(){if(!V&&N<g.length){var we=N++;return{value:R(we,g[we]),done:!1}}return V=!0,{done:!0,value:void 0}}};return pe[Symbol.iterator]=function(){return pe},pe}i("Array.prototype.values",function(g){return g||function(){return s(this,function(R,N){return N})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(g){var R=typeof g;return R=R!="object"?R:g?Array.isArray(g)?"array":R:"null",R=="array"||R=="object"&&typeof g.length=="number"}function c(g){var R=typeof g;return R=="object"&&g!=null||R=="function"}function u(g,R,N){return g.call.apply(g.bind,arguments)}function d(g,R,N){if(!g)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var pe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(pe,V),g.apply(R,pe)}}return function(){return g.apply(R,arguments)}}function p(g,R,N){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,p.apply(null,arguments)}function f(g,R){var N=Array.prototype.slice.call(arguments,1);return function(){var V=N.slice();return V.push.apply(V,arguments),g.apply(this,V)}}function m(g,R){function N(){}N.prototype=R.prototype,g.aa=R.prototype,g.prototype=new N,g.prototype.constructor=g,g.Qb=function(V,pe,we){for(var ze=Array(arguments.length-2),fr=2;fr<arguments.length;fr++)ze[fr-2]=arguments[fr];return R.prototype[pe].apply(V,ze)}}function y(g){const R=g.length;if(0<R){const N=Array(R);for(let V=0;V<R;V++)N[V]=g[V];return N}return[]}function C(g,R){for(let N=1;N<arguments.length;N++){const V=arguments[N];if(l(V)){const pe=g.length||0,we=V.length||0;g.length=pe+we;for(let ze=0;ze<we;ze++)g[pe+ze]=V[ze]}else g.push(V)}}class w{constructor(R,N){this.i=R,this.j=N,this.h=0,this.g=null}get(){let R;return 0<this.h?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function b(g){return/^[\s\xa0]*$/.test(g)}function x(){var g=a.navigator;return g&&(g=g.userAgent)?g:""}function E(g){return E[" "](g),g}E[" "]=function(){};var I=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function k(g,R,N){for(const V in g)R.call(N,g[V],V,g)}function P(g,R){for(const N in g)R.call(void 0,g[N],N,g)}function A(g){const R={};for(const N in g)R[N]=g[N];return R}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(g,R){let N,V;for(let pe=1;pe<arguments.length;pe++){V=arguments[pe];for(N in V)g[N]=V[N];for(let we=0;we<D.length;we++)N=D[we],Object.prototype.hasOwnProperty.call(V,N)&&(g[N]=V[N])}}function M(g){var R=1;g=g.split(":");const N=[];for(;0<R&&g.length;)N.push(g.shift()),R--;return g.length&&N.push(g.join(":")),N}function T(g){a.setTimeout(()=>{throw g},0)}function O(){var g=J;let R=null;return g.g&&(R=g.g,g.g=g.g.next,g.g||(g.h=null),R.next=null),R}class Q{constructor(){this.h=this.g=null}add(R,N){const V=X.get();V.set(R,N),this.h?this.h.next=V:this.g=V,this.h=V}}var X=new w(()=>new B,g=>g.reset());class B{constructor(){this.next=this.g=this.h=null}set(R,N){this.h=R,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let W,ne=!1,J=new Q,ye=()=>{const g=a.Promise.resolve(void 0);W=()=>{g.then(Pe)}};var Pe=()=>{for(var g;g=O();){try{g.h.call(g.g)}catch(N){T(N)}var R=X;R.j(g),100>R.h&&(R.h++,g.next=R.g,R.g=g)}ne=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(g,R){this.type=g,this.g=this.target=R,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var g=!1,R=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const N=()=>{};a.addEventListener("test",N,R),a.removeEventListener("test",N,R)}catch{}return g}();function ve(g,R){if(Z.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var N=this.type=g.type,V=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=R,R=g.relatedTarget){if(I){e:{try{E(R.nodeName);var pe=!0;break e}catch{}pe=!1}pe||(R=null)}}else N=="mouseover"?R=g.fromElement:N=="mouseout"&&(R=g.toElement);this.relatedTarget=R,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Ze[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&ve.aa.h.call(this)}}m(ve,Z);var Ze={2:"touch",3:"pen",4:"mouse"};ve.prototype.h=function(){ve.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),de=0;function q(g,R,N,V,pe){this.listener=g,this.proxy=null,this.src=R,this.type=N,this.capture=!!V,this.ha=pe,this.key=++de,this.da=this.fa=!1}function le(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function G(g){this.src=g,this.g={},this.h=0}G.prototype.add=function(g,R,N,V,pe){var we=g.toString();g=this.g[we],g||(g=this.g[we]=[],this.h++);var ze=ce(g,R,V,pe);return-1<ze?(R=g[ze],N||(R.fa=!1)):(R=new q(R,this.src,we,!!V,pe),R.fa=N,g.push(R)),R};function H(g,R){var N=R.type;if(N in g.g){var V=g.g[N],pe=Array.prototype.indexOf.call(V,R,void 0),we;(we=0<=pe)&&Array.prototype.splice.call(V,pe,1),we&&(le(R),g.g[N].length==0&&(delete g.g[N],g.h--))}}function ce(g,R,N,V){for(var pe=0;pe<g.length;++pe){var we=g[pe];if(!we.da&&we.listener==R&&we.capture==!!N&&we.ha==V)return pe}return-1}var te="closure_lm_"+(1e6*Math.random()|0),ee={};function K(g,R,N,V,pe){if(Array.isArray(R)){for(var we=0;we<R.length;we++)K(g,R[we],N,V,pe);return null}return N=he(N),g&&g[je]?g.K(R,N,c(V)?!!V.capture:!1,pe):U(g,R,N,!1,V,pe)}function U(g,R,N,V,pe,we){if(!R)throw Error("Invalid event type");var ze=c(pe)?!!pe.capture:!!pe,fr=me(g);if(fr||(g[te]=fr=new G(g)),N=fr.add(R,N,V,ze,we),N.proxy)return N;if(V=j(),N.proxy=V,V.src=g,V.listener=N,g.addEventListener)Ve||(pe=ze),pe===void 0&&(pe=!1),g.addEventListener(R.toString(),V,pe);else if(g.attachEvent)g.attachEvent(Ce(R.toString()),V);else if(g.addListener&&g.removeListener)g.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return N}function j(){function g(N){return R.call(g.src,g.listener,N)}const R=be;return g}function re(g,R,N,V,pe){if(Array.isArray(R))for(var we=0;we<R.length;we++)re(g,R[we],N,V,pe);else V=c(V)?!!V.capture:!!V,N=he(N),g&&g[je]?(g=g.i,R=String(R).toString(),R in g.g&&(we=g.g[R],N=ce(we,N,V,pe),-1<N&&(le(we[N]),Array.prototype.splice.call(we,N,1),we.length==0&&(delete g.g[R],g.h--)))):g&&(g=me(g))&&(R=g.g[R.toString()],g=-1,R&&(g=ce(R,N,V,pe)),(N=-1<g?R[g]:null)&&se(N))}function se(g){if(typeof g!="number"&&g&&!g.da){var R=g.src;if(R&&R[je])H(R.i,g);else{var N=g.type,V=g.proxy;R.removeEventListener?R.removeEventListener(N,V,g.capture):R.detachEvent?R.detachEvent(Ce(N),V):R.addListener&&R.removeListener&&R.removeListener(V),(N=me(R))?(H(N,g),N.h==0&&(N.src=null,R[te]=null)):le(g)}}}function Ce(g){return g in ee?ee[g]:ee[g]="on"+g}function be(g,R){if(g.da)g=!0;else{R=new ve(R,this);var N=g.listener,V=g.ha||g.src;g.fa&&se(g),g=N.call(V,R)}return g}function me(g){return g=g[te],g instanceof G?g:null}var ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function he(g){return typeof g=="function"?g:(g[ie]||(g[ie]=function(R){return g.handleEvent(R)}),g[ie])}function Se(){ue.call(this),this.i=new G(this),this.M=this,this.F=null}m(Se,ue),Se.prototype[je]=!0,Se.prototype.removeEventListener=function(g,R,N,V){re(this,g,R,N,V)};function De(g,R){var N,V=g.F;if(V)for(N=[];V;V=V.F)N.push(V);if(g=g.M,V=R.type||R,typeof R=="string")R=new Z(R,g);else if(R instanceof Z)R.target=R.target||g;else{var pe=R;R=new Z(V,g),L(R,pe)}if(pe=!0,N)for(var we=N.length-1;0<=we;we--){var ze=R.g=N[we];pe=Be(ze,V,!0,R)&&pe}if(ze=R.g=g,pe=Be(ze,V,!0,R)&&pe,pe=Be(ze,V,!1,R)&&pe,N)for(we=0;we<N.length;we++)ze=R.g=N[we],pe=Be(ze,V,!1,R)&&pe}Se.prototype.N=function(){if(Se.aa.N.call(this),this.i){var g=this.i,R;for(R in g.g){for(var N=g.g[R],V=0;V<N.length;V++)le(N[V]);delete g.g[R],g.h--}}this.F=null},Se.prototype.K=function(g,R,N,V){return this.i.add(String(g),R,!1,N,V)},Se.prototype.L=function(g,R,N,V){return this.i.add(String(g),R,!0,N,V)};function Be(g,R,N,V){if(R=g.i.g[String(R)],!R)return!0;R=R.concat();for(var pe=!0,we=0;we<R.length;++we){var ze=R[we];if(ze&&!ze.da&&ze.capture==N){var fr=ze.listener,jn=ze.ha||ze.src;ze.fa&&H(g.i,ze),pe=fr.call(jn,V)!==!1&&pe}}return pe&&!V.defaultPrevented}function Et(g,R,N){if(typeof g=="function")N&&(g=p(g,N));else if(g&&typeof g.handleEvent=="function")g=p(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(R)?-1:a.setTimeout(g,R||0)}function ut(g){g.g=Et(()=>{g.g=null,g.i&&(g.i=!1,ut(g))},g.l);const R=g.h;g.h=null,g.m.apply(null,R)}class ct extends ue{constructor(R,N){super(),this.m=R,this.l=N,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:ut(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vt(g){ue.call(this),this.h=g,this.g={}}m(vt,ue);var nt=[];function oe(g){k(g.g,function(R,N){this.g.hasOwnProperty(N)&&se(R)},g),g.g={}}vt.prototype.N=function(){vt.aa.N.call(this),oe(this)},vt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kt=a.JSON.stringify,pr=a.JSON.parse,Os=class{stringify(g){return a.JSON.stringify(g,void 0)}parse(g){return a.JSON.parse(g,void 0)}};function Wr(){}Wr.prototype.h=null;function Pr(g){return g.h||(g.h=g.i())}function fo(){}var ji={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ds(){Z.call(this,"d")}m(ds,Z);function Qn(){Z.call(this,"c")}m(Qn,Z);var go={},Au=null;function _u(){return Au=Au||new Se}go.La="serverreachability";function Du(g){Z.call(this,go.La,g)}m(Du,Z);function mo(g){const R=_u();De(R,new Du(R))}go.STAT_EVENT="statevent";function pi(g,R){Z.call(this,go.STAT_EVENT,g),this.stat=R}m(pi,Z);function Br(g){const R=_u();De(R,new pi(R,g))}go.Ma="timingevent";function ra(g,R){Z.call(this,go.Ma,g),this.size=R}m(ra,Z);function vo(g,R){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){g()},R)}function fi(){this.g=!0}fi.prototype.xa=function(){this.g=!1};function yo(g,R,N,V,pe,we){g.info(function(){if(g.g)if(we)for(var ze="",fr=we.split("&"),jn=0;jn<fr.length;jn++){var Jt=fr[jn].split("=");if(1<Jt.length){var Zn=Jt[0];Jt=Jt[1];var Jn=Zn.split("_");ze=2<=Jn.length&&Jn[1]=="type"?ze+(Zn+"="+Jt+"&"):ze+(Zn+"=redacted&")}}else ze=null;else ze=we;return"XMLHTTP REQ ("+V+") [attempt "+pe+"]: "+R+`
`+N+`
`+ze})}function Eh(g,R,N,V,pe,we,ze){g.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+pe+"]: "+R+`
`+N+`
`+we+" "+ze})}function Co(g,R,N,V){g.info(function(){return"XMLHTTP TEXT ("+R+"): "+Xl(g,N)+(V?" "+V:"")})}function Bi(g,R){g.info(function(){return"TIMEOUT: "+R})}fi.prototype.info=function(){};function Xl(g,R){if(!g.g)return R;if(!R)return null;try{var N=JSON.parse(R);if(N){for(g=0;g<N.length;g++)if(Array.isArray(N[g])){var V=N[g];if(!(2>V.length)){var pe=V[1];if(Array.isArray(pe)&&!(1>pe.length)){var we=pe[0];if(we!="noop"&&we!="stop"&&we!="close")for(var ze=1;ze<pe.length;ze++)pe[ze]=""}}}}return kt(N)}catch{return R}}var Wa={NO_ERROR:0,TIMEOUT:8},AE={},Jf;function Ph(){}m(Ph,Wr),Ph.prototype.g=function(){return new XMLHttpRequest},Ph.prototype.i=function(){return{}},Jf=new Ph;function na(g,R,N,V){this.j=g,this.i=R,this.l=N,this.R=V||1,this.U=new vt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $}function $(){this.i=null,this.g="",this.h=!1}var ae={},z={};function Re(g,R,N){g.L=1,g.v=Mr(We(R)),g.m=N,g.P=!0,fe(g,null)}function fe(g,R){g.F=Date.now(),Te(g),g.A=We(g.v);var N=g.A,V=g.R;Array.isArray(V)||(V=[String(V)]),BN(N.i,"t",V),g.C=0,N=g.j.J,g.h=new $,g.g=iM(g.j,N?R:null,!g.m),0<g.O&&(g.M=new ct(p(g.Y,g,g.g),g.O)),R=g.U,N=g.g,V=g.ca;var pe="readystatechange";Array.isArray(pe)||(pe&&(nt[0]=pe.toString()),pe=nt);for(var we=0;we<pe.length;we++){var ze=K(N,pe[we],V||R.handleEvent,!1,R.h||R);if(!ze)break;R.g[ze.key]=ze}R=g.H?A(g.H):{},g.m?(g.u||(g.u="POST"),R["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,R)):(g.u="GET",g.g.ea(g.A,g.u,null,R)),mo(),yo(g.i,g.u,g.A,g.l,g.R,g.m)}na.prototype.ca=function(g){g=g.target;const R=this.M;R&&qa(g)==3?R.j():this.Y(g)},na.prototype.Y=function(g){try{if(g==this.g)e:{const Jn=qa(this.g);var R=this.g.Ba();const Ah=this.g.Z();if(!(3>Jn)&&(Jn!=3||this.g&&(this.h.h||this.g.oa()||KN(this.g)))){this.J||Jn!=4||R==7||(R==8||0>=Ah?mo(3):mo(2)),Ge(this);var N=this.g.Z();this.X=N;t:if(Oe(this)){var V=KN(this.g);g="";var pe=V.length,we=qa(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ue(this),Ie(this);var ze="";break t}this.h.i=new a.TextDecoder}for(R=0;R<pe;R++)this.h.h=!0,g+=this.h.i.decode(V[R],{stream:!(we&&R==pe-1)});V.length=0,this.h.g+=g,this.C=0,ze=this.h.g}else ze=this.g.oa();if(this.o=N==200,Eh(this.i,this.u,this.A,this.l,this.R,Jn,N),this.o){if(this.T&&!this.K){t:{if(this.g){var fr,jn=this.g;if((fr=jn.g?jn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(fr)){var Jt=fr;break t}}Jt=null}if(N=Jt)Co(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pt(this,N);else{this.o=!1,this.s=3,Br(12),Ue(this),Ie(this);break e}}if(this.P){N=!0;let bo;for(;!this.J&&this.C<ze.length;)if(bo=ke(this,ze),bo==z){Jn==4&&(this.s=4,Br(14),N=!1),Co(this.i,this.l,null,"[Incomplete Response]");break}else if(bo==ae){this.s=4,Br(15),Co(this.i,this.l,ze,"[Invalid Chunk]"),N=!1;break}else Co(this.i,this.l,bo,null),Pt(this,bo);if(Oe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jn!=4||ze.length!=0||this.h.h||(this.s=1,Br(16),N=!1),this.o=this.o&&N,!N)Co(this.i,this.l,ze,"[Invalid Chunked Response]"),Ue(this),Ie(this);else if(0<ze.length&&!this.W){this.W=!0;var Zn=this.j;Zn.g==this&&Zn.ba&&!Zn.M&&(Zn.j.info("Great, no buffering proxy detected. Bytes received: "+ze.length),IE(Zn),Zn.M=!0,Br(11))}}else Co(this.i,this.l,ze,null),Pt(this,ze);Jn==4&&Ue(this),this.o&&!this.J&&(Jn==4?eM(this.j,this):(this.o=!1,Te(this)))}else X7(this.g),N==400&&0<ze.indexOf("Unknown SID")?(this.s=3,Br(12)):(this.s=0,Br(13)),Ue(this),Ie(this)}}}catch{}finally{}};function Oe(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function ke(g,R){var N=g.C,V=R.indexOf(`
`,N);return V==-1?z:(N=Number(R.substring(N,V)),isNaN(N)?ae:(V+=1,V+N>R.length?z:(R=R.slice(V,V+N),g.C=V+N,R)))}na.prototype.cancel=function(){this.J=!0,Ue(this)};function Te(g){g.S=Date.now()+g.I,He(g,g.I)}function He(g,R){if(g.B!=null)throw Error("WatchDog timer not null");g.B=vo(p(g.ba,g),R)}function Ge(g){g.B&&(a.clearTimeout(g.B),g.B=null)}na.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(Bi(this.i,this.A),this.L!=2&&(mo(),Br(17)),Ue(this),this.s=2,Ie(this)):He(this,this.S-g)};function Ie(g){g.j.G==0||g.J||eM(g.j,g)}function Ue(g){Ge(g);var R=g.M;R&&typeof R.ma=="function"&&R.ma(),g.M=null,oe(g.U),g.g&&(R=g.g,g.g=null,R.abort(),R.ma())}function Pt(g,R){try{var N=g.j;if(N.G!=0&&(N.g==g||Nt(N.h,g))){if(!g.K&&Nt(N.h,g)&&N.G==3){try{var V=N.Da.g.parse(R)}catch{V=null}if(Array.isArray(V)&&V.length==3){var pe=V;if(pe[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<g.F)Jy(N),Xy(N);else break e;kE(N),Br(18)}}else N.za=pe[1],0<N.za-N.T&&37500>pe[2]&&N.F&&N.v==0&&!N.C&&(N.C=vo(p(N.Za,N),6e3));if(1>=_t(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else Nu(N,11)}else if((g.K||N.g==g)&&Jy(N),!b(R))for(pe=N.Da.g.parse(R),R=0;R<pe.length;R++){let Jt=pe[R];if(N.T=Jt[0],Jt=Jt[1],N.G==2)if(Jt[0]=="c"){N.K=Jt[1],N.ia=Jt[2];const Zn=Jt[3];Zn!=null&&(N.la=Zn,N.j.info("VER="+N.la));const Jn=Jt[4];Jn!=null&&(N.Aa=Jn,N.j.info("SVER="+N.Aa));const Ah=Jt[5];Ah!=null&&typeof Ah=="number"&&0<Ah&&(V=1.5*Ah,N.L=V,N.j.info("backChannelRequestTimeoutMs_="+V)),V=N;const bo=g.g;if(bo){const eC=bo.g?bo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eC){var we=V.h;we.g||eC.indexOf("spdy")==-1&&eC.indexOf("quic")==-1&&eC.indexOf("h2")==-1||(we.j=we.l,we.g=new Set,we.h&&(Xn(we,we.h),we.h=null))}if(V.D){const NE=bo.g?bo.g.getResponseHeader("X-HTTP-Session-Id"):null;NE&&(V.ya=NE,st(V.I,V.D,NE))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-g.F,N.j.info("Handshake RTT: "+N.R+"ms")),V=N;var ze=g;if(V.qa=nM(V,V.J?V.ia:null,V.W),ze.K){Vr(V.h,ze);var fr=ze,jn=V.L;jn&&(fr.I=jn),fr.B&&(Ge(fr),Te(fr)),V.g=ze}else ZN(V);0<N.i.length&&Zy(N)}else Jt[0]!="stop"&&Jt[0]!="close"||Nu(N,7);else N.G==3&&(Jt[0]=="stop"||Jt[0]=="close"?Jt[0]=="stop"?Nu(N,7):DE(N):Jt[0]!="noop"&&N.l&&N.l.ta(Jt),N.v=0)}}mo(4)}catch{}}var It=class{constructor(g,R){this.g=g,this.map=R}};function Rt(g){this.l=g||10,a.PerformanceNavigationTiming?(g=a.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ft(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function _t(g){return g.h?1:g.g?g.g.size:0}function Nt(g,R){return g.h?g.h==R:g.g?g.g.has(R):!1}function Xn(g,R){g.g?g.g.add(R):g.h=R}function Vr(g,R){g.h&&g.h==R?g.h=null:g.g&&g.g.has(R)&&g.g.delete(R)}Rt.prototype.cancel=function(){if(this.i=Nr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Nr(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let R=g.i;for(const N of g.g.values())R=R.concat(N.D);return R}return y(g.i)}function Ka(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(l(g)){for(var R=[],N=g.length,V=0;V<N;V++)R.push(g[V]);return R}R=[],N=0;for(V in g)R[N++]=g[V];return R}function ku(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(l(g)||typeof g=="string"){var R=[];g=g.length;for(var N=0;N<g;N++)R.push(N);return R}R=[],N=0;for(const V in g)R[N++]=V;return R}}}function Iu(g,R){if(g.forEach&&typeof g.forEach=="function")g.forEach(R,void 0);else if(l(g)||typeof g=="string")Array.prototype.forEach.call(g,R,void 0);else for(var N=ku(g),V=Ka(g),pe=V.length,we=0;we<pe;we++)R.call(void 0,V[we],N&&N[we],g)}var yt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dt(g,R){if(g){g=g.split("&");for(var N=0;N<g.length;N++){var V=g[N].indexOf("="),pe=null;if(0<=V){var we=g[N].substring(0,V);pe=g[N].substring(V+1)}else we=g[N];R(we,pe?decodeURIComponent(pe.replace(/\+/g," ")):"")}}}function ht(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof ht){this.h=g.h,Qe(this,g.j),this.o=g.o,this.g=g.g,qe(this,g.s),this.l=g.l;var R=g.i,N=new eg;N.i=R.i,R.g&&(N.g=new Map(R.g),N.h=R.h),Vt(this,N),this.m=g.m}else g&&(R=String(g).match(yt))?(this.h=!1,Qe(this,R[1]||"",!0),this.o=mn(R[2]||""),this.g=mn(R[3]||"",!0),qe(this,R[4]),this.l=mn(R[5]||"",!0),Vt(this,R[6]||"",!0),this.m=mn(R[7]||"")):(this.h=!1,this.i=new eg(null,this.h))}ht.prototype.toString=function(){var g=[],R=this.j;R&&g.push(wo(R,nr,!0),":");var N=this.g;return(N||R=="file")&&(g.push("//"),(R=this.o)&&g.push(wo(R,nr,!0),"@"),g.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&g.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&g.push("/"),g.push(wo(N,N.charAt(0)=="/"?Pn:Zl,!0))),(N=this.i.toString())&&g.push("?",N),(N=this.m)&&g.push("#",wo(N,z7)),g.join("")};function We(g){return new ht(g)}function Qe(g,R,N){g.j=N?mn(R,!0):R,g.j&&(g.j=g.j.replace(/:$/,""))}function qe(g,R){if(R){if(R=Number(R),isNaN(R)||0>R)throw Error("Bad port number "+R);g.s=R}else g.s=null}function Vt(g,R,N){R instanceof eg?(g.i=R,$7(g.i,g.h)):(N||(R=wo(R,LN)),g.i=new eg(R,g.h))}function st(g,R,N){g.i.set(R,N)}function Mr(g){return st(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function mn(g,R){return g?R?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function wo(g,R,N){return typeof g=="string"?(g=encodeURI(g).replace(R,Ky),N&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Ky(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var nr=/[#\/\?@]/g,Zl=/[#\?:]/g,Pn=/[#\?]/g,LN=/[#\?@]/g,z7=/#/g;function eg(g,R){this.h=this.g=null,this.i=g||null,this.j=!!R}function Jl(g){g.g||(g.g=new Map,g.h=0,g.i&&dt(g.i,function(R,N){g.add(decodeURIComponent(R.replace(/\+/g," ")),N)}))}e=eg.prototype,e.add=function(g,R){Jl(this),this.i=null,g=Rh(this,g);var N=this.g.get(g);return N||this.g.set(g,N=[]),N.push(R),this.h+=1,this};function GN(g,R){Jl(g),R=Rh(g,R),g.g.has(R)&&(g.i=null,g.h-=g.g.get(R).length,g.g.delete(R))}function jN(g,R){return Jl(g),R=Rh(g,R),g.g.has(R)}e.forEach=function(g,R){Jl(this),this.g.forEach(function(N,V){N.forEach(function(pe){g.call(R,pe,V,this)},this)},this)},e.na=function(){Jl(this);const g=Array.from(this.g.values()),R=Array.from(this.g.keys()),N=[];for(let V=0;V<R.length;V++){const pe=g[V];for(let we=0;we<pe.length;we++)N.push(R[V])}return N},e.V=function(g){Jl(this);let R=[];if(typeof g=="string")jN(this,g)&&(R=R.concat(this.g.get(Rh(this,g))));else{g=Array.from(this.g.values());for(let N=0;N<g.length;N++)R=R.concat(g[N])}return R},e.set=function(g,R){return Jl(this),this.i=null,g=Rh(this,g),jN(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[R]),this.h+=1,this},e.get=function(g,R){return g?(g=this.V(g),0<g.length?String(g[0]):R):R};function BN(g,R,N){GN(g,R),0<N.length&&(g.i=null,g.g.set(Rh(g,R),y(N)),g.h+=N.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],R=Array.from(this.g.keys());for(var N=0;N<R.length;N++){var V=R[N];const we=encodeURIComponent(String(V)),ze=this.V(V);for(V=0;V<ze.length;V++){var pe=we;ze[V]!==""&&(pe+="="+encodeURIComponent(String(ze[V]))),g.push(pe)}}return this.i=g.join("&")};function Rh(g,R){return R=String(R),g.j&&(R=R.toLowerCase()),R}function $7(g,R){R&&!g.j&&(Jl(g),g.i=null,g.g.forEach(function(N,V){var pe=V.toLowerCase();V!=pe&&(GN(this,V),BN(this,pe,N))},g)),g.j=R}function U7(g,R){const N=new fi;if(a.Image){const V=new Image;V.onload=f(ec,N,"TestLoadImage: loaded",!0,R,V),V.onerror=f(ec,N,"TestLoadImage: error",!1,R,V),V.onabort=f(ec,N,"TestLoadImage: abort",!1,R,V),V.ontimeout=f(ec,N,"TestLoadImage: timeout",!1,R,V),a.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=g}else R(!1)}function W7(g,R){const N=new fi,V=new AbortController,pe=setTimeout(()=>{V.abort(),ec(N,"TestPingServer: timeout",!1,R)},1e4);fetch(g,{signal:V.signal}).then(we=>{clearTimeout(pe),we.ok?ec(N,"TestPingServer: ok",!0,R):ec(N,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(pe),ec(N,"TestPingServer: error",!1,R)})}function ec(g,R,N,V,pe){try{pe&&(pe.onload=null,pe.onerror=null,pe.onabort=null,pe.ontimeout=null),V(N)}catch{}}function K7(){this.g=new Os}function q7(g,R,N){const V=N||"";try{Iu(g,function(pe,we){let ze=pe;c(pe)&&(ze=kt(pe)),R.push(V+we+"="+encodeURIComponent(ze))})}catch(pe){throw R.push(V+"type="+encodeURIComponent("_badmap")),pe}}function qy(g){this.l=g.Ub||null,this.j=g.eb||!1}m(qy,Wr),qy.prototype.g=function(){return new Yy(this.l,this.j)},qy.prototype.i=function(g){return function(){return g}}({});function Yy(g,R){Se.call(this),this.D=g,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Yy,Se),e=Yy.prototype,e.open=function(g,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=R,this.readyState=1,rg(this)},e.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const R={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(R.body=g),(this.D||a).fetch(new Request(this.A,R)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,tg(this)),this.readyState=0},e.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,rg(this)),this.g&&(this.readyState=3,rg(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;VN(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function VN(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}e.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var R=g.value?g.value:new Uint8Array(0);(R=this.v.decode(R,{stream:!g.done}))&&(this.response=this.responseText+=R)}g.done?tg(this):rg(this),this.readyState==3&&VN(this)}},e.Ra=function(g){this.g&&(this.response=this.responseText=g,tg(this))},e.Qa=function(g){this.g&&(this.response=g,tg(this))},e.ga=function(){this.g&&tg(this)};function tg(g){g.readyState=4,g.l=null,g.j=null,g.v=null,rg(g)}e.setRequestHeader=function(g,R){this.u.append(g,R)},e.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],R=this.h.entries();for(var N=R.next();!N.done;)N=N.value,g.push(N[0]+": "+N[1]),N=R.next();return g.join(`\r
`)};function rg(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Yy.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function HN(g){let R="";return k(g,function(N,V){R+=V,R+=":",R+=N,R+=`\r
`}),R}function _E(g,R,N){e:{for(V in N){var V=!1;break e}V=!0}V||(N=HN(N),typeof g=="string"?N!=null&&encodeURIComponent(String(N)):st(g,R,N))}function tn(g){Se.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(tn,Se);var Y7=/^https?$/i,Q7=["POST","PUT"];e=tn.prototype,e.Ha=function(g){this.J=g},e.ea=function(g,R,N,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);R=R?R.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jf.g(),this.v=this.o?Pr(this.o):Pr(Jf),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(R,String(g),!0),this.B=!1}catch(we){zN(this,we);return}if(g=N||"",N=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var pe in V)N.set(pe,V[pe]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const we of V.keys())N.set(we,V.get(we));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(N.keys()).find(we=>we.toLowerCase()=="content-type"),pe=a.FormData&&g instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Q7,R,void 0))||V||pe||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[we,ze]of N)this.g.setRequestHeader(we,ze);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{WN(this),this.u=!0,this.g.send(g),this.u=!1}catch(we){zN(this,we)}};function zN(g,R){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=R,g.m=5,$N(g),Qy(g)}function $N(g){g.A||(g.A=!0,De(g,"complete"),De(g,"error"))}e.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,De(this,"complete"),De(this,"abort"),Qy(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qy(this,!0)),tn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?UN(this):this.bb())},e.bb=function(){UN(this)};function UN(g){if(g.h&&typeof o<"u"&&(!g.v[1]||qa(g)!=4||g.Z()!=2)){if(g.u&&qa(g)==4)Et(g.Ea,0,g);else if(De(g,"readystatechange"),qa(g)==4){g.h=!1;try{const ze=g.Z();e:switch(ze){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var N;if(!(N=R)){var V;if(V=ze===0){var pe=String(g.D).match(yt)[1]||null;!pe&&a.self&&a.self.location&&(pe=a.self.location.protocol.slice(0,-1)),V=!Y7.test(pe?pe.toLowerCase():"")}N=V}if(N)De(g,"complete"),De(g,"success");else{g.m=6;try{var we=2<qa(g)?g.g.statusText:""}catch{we=""}g.l=we+" ["+g.Z()+"]",$N(g)}}finally{Qy(g)}}}}function Qy(g,R){if(g.g){WN(g);const N=g.g,V=g.v[0]?()=>{}:null;g.g=null,g.v=null,R||De(g,"ready");try{N.onreadystatechange=V}catch{}}}function WN(g){g.I&&(a.clearTimeout(g.I),g.I=null)}e.isActive=function(){return!!this.g};function qa(g){return g.g?g.g.readyState:0}e.Z=function(){try{return 2<qa(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(g){if(this.g){var R=this.g.responseText;return g&&R.indexOf(g)==0&&(R=R.substring(g.length)),pr(R)}};function KN(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function X7(g){const R={};g=(g.g&&2<=qa(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<g.length;V++){if(b(g[V]))continue;var N=M(g[V]);const pe=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const we=R[pe]||[];R[pe]=we,we.push(N)}P(R,function(V){return V.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ng(g,R,N){return N&&N.internalChannelParams&&N.internalChannelParams[g]||R}function qN(g){this.Aa=0,this.i=[],this.j=new fi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ng("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ng("baseRetryDelayMs",5e3,g),this.cb=ng("retryDelaySeedMs",1e4,g),this.Wa=ng("forwardChannelMaxRetries",2,g),this.wa=ng("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Rt(g&&g.concurrentRequestLimit),this.Da=new K7,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=qN.prototype,e.la=8,e.G=1,e.connect=function(g,R,N,V){Br(0),this.W=g,this.H=R||{},N&&V!==void 0&&(this.H.OSID=N,this.H.OAID=V),this.F=this.X,this.I=nM(this,null,this.W),Zy(this)};function DE(g){if(YN(g),g.G==3){var R=g.U++,N=We(g.I);if(st(N,"SID",g.K),st(N,"RID",R),st(N,"TYPE","terminate"),ig(g,N),R=new na(g,g.j,R),R.L=2,R.v=Mr(We(N)),N=!1,a.navigator&&a.navigator.sendBeacon)try{N=a.navigator.sendBeacon(R.v.toString(),"")}catch{}!N&&a.Image&&(new Image().src=R.v,N=!0),N||(R.g=iM(R.j,null),R.g.ea(R.v)),R.F=Date.now(),Te(R)}rM(g)}function Xy(g){g.g&&(IE(g),g.g.cancel(),g.g=null)}function YN(g){Xy(g),g.u&&(a.clearTimeout(g.u),g.u=null),Jy(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&a.clearTimeout(g.s),g.s=null)}function Zy(g){if(!ft(g.h)&&!g.s){g.s=!0;var R=g.Ga;W||ye(),ne||(W(),ne=!0),J.add(R,g),g.B=0}}function Z7(g,R){return _t(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=R.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=vo(p(g.Ga,g,R),tM(g,g.B)),g.B++,!0)}e.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const pe=new na(this,this.j,g);let we=this.o;if(this.S&&(we?(we=A(we),L(we,this.S)):we=this.S),this.m!==null||this.O||(pe.H=we,we=null),this.P)e:{for(var R=0,N=0;N<this.i.length;N++){t:{var V=this.i[N];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(R+=V,4096<R){R=N;break e}if(R===4096||N===this.i.length-1){R=N+1;break e}}R=1e3}else R=1e3;R=XN(this,pe,R),N=We(this.I),st(N,"RID",g),st(N,"CVER",22),this.D&&st(N,"X-HTTP-Session-Id",this.D),ig(this,N),we&&(this.O?R="headers="+encodeURIComponent(String(HN(we)))+"&"+R:this.m&&_E(N,this.m,we)),Xn(this.h,pe),this.Ua&&st(N,"TYPE","init"),this.P?(st(N,"$req",R),st(N,"SID","null"),pe.T=!0,Re(pe,N,null)):Re(pe,N,R),this.G=2}}else this.G==3&&(g?QN(this,g):this.i.length==0||ft(this.h)||QN(this))};function QN(g,R){var N;R?N=R.l:N=g.U++;const V=We(g.I);st(V,"SID",g.K),st(V,"RID",N),st(V,"AID",g.T),ig(g,V),g.m&&g.o&&_E(V,g.m,g.o),N=new na(g,g.j,N,g.B+1),g.m===null&&(N.H=g.o),R&&(g.i=R.D.concat(g.i)),R=XN(g,N,1e3),N.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Xn(g.h,N),Re(N,V,R)}function ig(g,R){g.H&&k(g.H,function(N,V){st(R,V,N)}),g.l&&Iu({},function(N,V){st(R,V,N)})}function XN(g,R,N){N=Math.min(g.i.length,N);var V=g.l?p(g.l.Na,g.l,g):null;e:{var pe=g.i;let we=-1;for(;;){const ze=["count="+N];we==-1?0<N?(we=pe[0].g,ze.push("ofs="+we)):we=0:ze.push("ofs="+we);let fr=!0;for(let jn=0;jn<N;jn++){let Jt=pe[jn].g;const Zn=pe[jn].map;if(Jt-=we,0>Jt)we=Math.max(0,pe[jn].g-100),fr=!1;else try{q7(Zn,ze,"req"+Jt+"_")}catch{V&&V(Zn)}}if(fr){V=ze.join("&");break e}}}return g=g.i.splice(0,N),R.D=g,V}function ZN(g){if(!g.g&&!g.u){g.Y=1;var R=g.Fa;W||ye(),ne||(W(),ne=!0),J.add(R,g),g.v=0}}function kE(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=vo(p(g.Fa,g),tM(g,g.v)),g.v++,!0)}e.Fa=function(){if(this.u=null,JN(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=vo(p(this.ab,this),g)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Br(10),Xy(this),JN(this))};function IE(g){g.A!=null&&(a.clearTimeout(g.A),g.A=null)}function JN(g){g.g=new na(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var R=We(g.qa);st(R,"RID","rpc"),st(R,"SID",g.K),st(R,"AID",g.T),st(R,"CI",g.F?"0":"1"),!g.F&&g.ja&&st(R,"TO",g.ja),st(R,"TYPE","xmlhttp"),ig(g,R),g.m&&g.o&&_E(R,g.m,g.o),g.L&&(g.g.I=g.L);var N=g.g;g=g.ia,N.L=1,N.v=Mr(We(R)),N.m=null,N.P=!0,fe(N,g)}e.Za=function(){this.C!=null&&(this.C=null,Xy(this),kE(this),Br(19))};function Jy(g){g.C!=null&&(a.clearTimeout(g.C),g.C=null)}function eM(g,R){var N=null;if(g.g==R){Jy(g),IE(g),g.g=null;var V=2}else if(Nt(g.h,R))N=R.D,Vr(g.h,R),V=1;else return;if(g.G!=0){if(R.o)if(V==1){N=R.m?R.m.length:0,R=Date.now()-R.F;var pe=g.B;V=_u(),De(V,new ra(V,N)),Zy(g)}else ZN(g);else if(pe=R.s,pe==3||pe==0&&0<R.X||!(V==1&&Z7(g,R)||V==2&&kE(g)))switch(N&&0<N.length&&(R=g.h,R.i=R.i.concat(N)),pe){case 1:Nu(g,5);break;case 4:Nu(g,10);break;case 3:Nu(g,6);break;default:Nu(g,2)}}}function tM(g,R){let N=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(N*=2),N*R}function Nu(g,R){if(g.j.info("Error code "+R),R==2){var N=p(g.fb,g),V=g.Xa;const pe=!V;V=new ht(V||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Qe(V,"https"),Mr(V),pe?U7(V.toString(),N):W7(V.toString(),N)}else Br(2);g.G=0,g.l&&g.l.sa(R),rM(g),YN(g)}e.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Br(2)):(this.j.info("Failed to ping google.com"),Br(1))};function rM(g){if(g.G=0,g.ka=[],g.l){const R=Nr(g.h);(R.length!=0||g.i.length!=0)&&(C(g.ka,R),C(g.ka,g.i),g.h.i.length=0,y(g.i),g.i.length=0),g.l.ra()}}function nM(g,R,N){var V=N instanceof ht?We(N):new ht(N);if(V.g!="")R&&(V.g=R+"."+V.g),qe(V,V.s);else{var pe=a.location;V=pe.protocol,R=R?R+"."+pe.hostname:pe.hostname,pe=+pe.port;var we=new ht(null);V&&Qe(we,V),R&&(we.g=R),pe&&qe(we,pe),N&&(we.l=N),V=we}return N=g.D,R=g.ya,N&&R&&st(V,N,R),st(V,"VER",g.la),ig(g,V),V}function iM(g,R,N){if(R&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return R=g.Ca&&!g.pa?new tn(new qy({eb:N})):new tn(g.pa),R.Ha(g.J),R}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function sM(){}e=sM.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Fs(g,R){Se.call(this),this.g=new qN(R),this.l=g,this.h=R&&R.messageUrlParams||null,g=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(g?g["X-WebChannel-Content-Type"]=R.messageContentType:g={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.va&&(g?g["X-WebChannel-Client-Profile"]=R.va:g={"X-WebChannel-Client-Profile":R.va}),this.g.S=g,(g=R&&R.Sb)&&!b(g)&&(this.g.m=g),this.v=R&&R.supportsCrossDomainXhr||!1,this.u=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!b(R)&&(this.g.D=R,g=this.h,g!==null&&R in g&&(g=this.h,R in g&&delete g[R])),this.j=new Th(this)}m(Fs,Se),Fs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fs.prototype.close=function(){DE(this.g)},Fs.prototype.o=function(g){var R=this.g;if(typeof g=="string"){var N={};N.__data__=g,g=N}else this.u&&(N={},N.__data__=kt(g),g=N);R.i.push(new It(R.Ya++,g)),R.G==3&&Zy(R)},Fs.prototype.N=function(){this.g.l=null,delete this.j,DE(this.g),delete this.g,Fs.aa.N.call(this)};function oM(g){ds.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var R=g.__sm__;if(R){e:{for(const N in R){g=N;break e}g=void 0}(this.i=g)&&(g=this.i,R=R!==null&&g in R?R[g]:void 0),this.data=R}else this.data=g}m(oM,ds);function aM(){Qn.call(this),this.status=1}m(aM,Qn);function Th(g){this.g=g}m(Th,sM),Th.prototype.ua=function(){De(this.g,"a")},Th.prototype.ta=function(g){De(this.g,new oM(g))},Th.prototype.sa=function(g){De(this.g,new aM)},Th.prototype.ra=function(){De(this.g,"b")},Fs.prototype.send=Fs.prototype.o,Fs.prototype.open=Fs.prototype.m,Fs.prototype.close=Fs.prototype.close,Wa.NO_ERROR=0,Wa.TIMEOUT=8,Wa.HTTP_ERROR=6,AE.COMPLETE="complete",fo.EventType=ji,ji.OPEN="a",ji.CLOSE="b",ji.ERROR="c",ji.MESSAGE="d",Se.prototype.listen=Se.prototype.K,tn.prototype.listenOnce=tn.prototype.L,tn.prototype.getLastError=tn.prototype.Ka,tn.prototype.getLastErrorCode=tn.prototype.Ba,tn.prototype.getStatus=tn.prototype.Z,tn.prototype.getResponseJson=tn.prototype.Oa,tn.prototype.getResponseText=tn.prototype.oa,tn.prototype.send=tn.prototype.ea,tn.prototype.setWithCredentials=tn.prototype.Ha}).apply(typeof TC<"u"?TC:typeof self<"u"?self:typeof window<"u"?window:{});const lL="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}vi.UNAUTHENTICATED=new vi(null),vi.GOOGLE_CREDENTIALS=new vi("google-credentials-uid"),vi.FIRST_PARTY=new vi("first-party-uid"),vi.MOCK_USER=new vi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cy="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=new rI("@firebase/firestore");function Vo(e,...t){if(rf.logLevel<=or.DEBUG){const r=t.map(sI);rf.debug(`Firestore (${Cy}): ${e}`,...r)}}function FW(e,...t){if(rf.logLevel<=or.ERROR){const r=t.map(sI);rf.error(`Firestore (${Cy}): ${e}`,...r)}}function Poe(e,...t){if(rf.logLevel<=or.WARN){const r=t.map(sI);rf.warn(`Firestore (${Cy}): ${e}`,...r)}}function sI(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(e="Unexpected state"){const t=`FIRESTORE (${Cy}) INTERNAL ASSERTION FAILED: `+e;throw FW(t),new Error(t)}function lm(e,t){e||oI()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class Wi extends Ha{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Roe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(vi.UNAUTHENTICATED))}shutdown(){}}class Toe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Aoe{constructor(t){this.t=t,this.currentUser=vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){lm(this.o===void 0);let n=this.i;const i=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let s=new cm;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new cm,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Vo("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Vo("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new cm)}},0),o()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(Vo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(lm(typeof n.accessToken=="string"),new LW(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return lm(t===null||typeof t=="string"),new vi(t)}}class _oe{constructor(t,r,n){this.l=t,this.h=r,this.P=n,this.type="FirstParty",this.user=vi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Doe{constructor(t,r,n){this.l=t,this.h=r,this.P=n}getToken(){return Promise.resolve(new _oe(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(vi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class koe{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ioe{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,r){lm(this.o===void 0);const n=s=>{s.error!=null&&Vo("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Vo("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const i=s=>{Vo("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Vo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(lm(typeof r.token=="string"),this.R=r.token,new koe(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Noe(e){return e.name==="IndexedDbTransactionError"}class $w{constructor(t,r){this.projectId=t,this.database=r||"(default)"}static empty(){return new $w("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof $w&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cL,Kt;(Kt=cL||(cL={}))[Kt.OK=0]="OK",Kt[Kt.CANCELLED=1]="CANCELLED",Kt[Kt.UNKNOWN=2]="UNKNOWN",Kt[Kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kt[Kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kt[Kt.NOT_FOUND=5]="NOT_FOUND",Kt[Kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kt[Kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kt[Kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kt[Kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kt[Kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kt[Kt.ABORTED=10]="ABORTED",Kt[Kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kt[Kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kt[Kt.INTERNAL=13]="INTERNAL",Kt[Kt.UNAVAILABLE=14]="UNAVAILABLE",Kt[Kt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new OW([4294967295,4294967295],0);function zP(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Moe{constructor(t,r,n=1e3,i=1.5,s=6e4){this.ui=t,this.timerId=r,this.ko=n,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-n);i>0&&Vo("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(t,r,n,i,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new cm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,i,s){const o=Date.now()+n,a=new aI(t,r,o,i,s);return a.start(n),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Wi(Ui.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var uL,dL;(dL=uL||(uL={})).ea="default",dL.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ooe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=new Map;function Foe(e,t,r,n){if(t===!0&&n===!0)throw new Wi(Ui.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function Loe(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":oI()}function Goe(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wi(Ui.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Loe(e);throw new Wi(Ui.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(t){var r,n;if(t.host===void 0){if(t.ssl!==void 0)throw new Wi(Ui.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(r=t.ssl)===null||r===void 0||r;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Wi(Ui.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Foe("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ooe((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Wi(Ui.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Wi(Ui.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Wi(Ui.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class GW{constructor(t,r,n,i){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pL({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Wi(Ui.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Wi(Ui.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pL(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Roe;switch(n.type){case"firstParty":return new Doe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Wi(Ui.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=hL.get(r);n&&(Vo("ComponentProvider","Removing Datastore"),hL.delete(r),n.terminate())}(this),Promise.resolve()}}function joe(e,t,r,n={}){var i;const s=(e=Goe(e,GW))._getSettings(),o=`${t}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Poe("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let a,l;if(typeof n.mockUserToken=="string")a=n.mockUserToken,l=vi.MOCK_USER;else{a=tse(n.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new Wi(Ui.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new vi(c)}e._authCredentials=new Toe(new LW(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Moe(this,"async_queue_retry"),this.Vu=()=>{const n=zP();n&&Vo("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=t;const r=zP();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const r=zP();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new cm;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!Noe(t))throw t;Vo("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const r=this.mu.then(()=>(this.du=!0,t().catch(n=>{this.Eu=n,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(n);throw FW("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(t,r,n){this.fu(),this.Ru.indexOf(t)>-1&&(r=0);const i=aI.createAndSchedule(this,t,r,n,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&oI()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const r of this.Tu)if(r.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const r=this.Tu.indexOf(t);this.Tu.splice(r,1)}}class Boe extends GW{constructor(t,r,n,i){super(t,r,n,i),this.type="firestore",this._queue=new fL,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new fL(t),this._firestoreClient=void 0,await t}}}function Voe(e,t){const r=typeof e=="object"?e:iI(),n=typeof e=="string"?e:"(default)",i=hx(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=TW("firestore");s&&joe(i,...s)}return i}(function(t,r=!0){(function(i){Cy=i})(Ff),Ud(new iu("firestore",(n,{instanceIdentifier:i,options:s})=>{const o=n.getProvider("app").getImmediate(),a=new Boe(new Aoe(n.getProvider("auth-internal")),new Ioe(n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Wi(Ui.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $w(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:r},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Aa(lL,"4.7.3",t),Aa(lL,"4.7.3","esm2017")})();function lI(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function jW(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Hoe=jW,BW=new vy("auth","Firebase",jW());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=new rI("@firebase/auth");function zoe(e,...t){Uw.logLevel<=or.WARN&&Uw.warn(`Auth (${Ff}): ${e}`,...t)}function E0(e,...t){Uw.logLevel<=or.ERROR&&Uw.error(`Auth (${Ff}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(e,...t){throw cI(e,...t)}function _a(e,...t){return cI(e,...t)}function VW(e,t,r){const n=Object.assign(Object.assign({},Hoe()),{[t]:r});return new vy("auth","Firebase",n).create(t,{appName:e.name})}function Wc(e){return VW(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cI(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return BW.create(e,...t)}function St(e,t,...r){if(!e)throw cI(t,...r)}function ll(e){const t="INTERNAL ASSERTION FAILED: "+e;throw E0(t),new Error(t)}function Tl(e,t){e||ll(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function $oe(){return gL()==="http:"||gL()==="https:"}function gL(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uoe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($oe()||ise()||"connection"in navigator)?navigator.onLine:!0}function Woe(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(t,r){this.shortDelay=t,this.longDelay=r,Tl(r>t,"Short delay should be less than long delay!"),this.isMobile=rse()||sse()}get(){return Uoe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(e,t){Tl(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HW{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ll("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ll("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ll("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Koe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qoe=new wy(3e4,6e4);function Ch(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function xu(e,t,r,n,i={}){return zW(e,i,async()=>{let s={},o={};n&&(t==="GET"?o=n:s={body:JSON.stringify(n)});const a=yy(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=Object.assign({method:t,headers:l},s);return nse()||(c.referrerPolicy="no-referrer"),HW.fetch()($W(e,e.config.apiHost,r,a),c)})}async function zW(e,t,r){e._canInitEmulator=!1;const n=Object.assign(Object.assign({},Koe),t);try{const i=new Qoe(e),s=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw AC(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw AC(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw AC(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw AC(e,"user-disabled",o);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw VW(e,u,c);Qo(e,u)}}catch(i){if(i instanceof Ha)throw i;Qo(e,"network-request-failed",{message:String(i)})}}async function px(e,t,r,n,i={}){const s=await xu(e,t,r,n,i);return"mfaPendingCredential"in s&&Qo(e,"multi-factor-auth-required",{_serverResponse:s}),s}function $W(e,t,r,n){const i=`${t}${r}?${n}`;return e.config.emulator?uI(e.config,i):`${e.config.apiScheme}://${i}`}function Yoe(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Qoe{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(_a(this.auth,"network-request-failed")),qoe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function AC(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=_a(e,t,n);return i.customData._tokenResponse=r,i}function mL(e){return e!==void 0&&e.enterprise!==void 0}class Xoe{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return Yoe(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}}async function Zoe(e,t){return xu(e,"GET","/v2/recaptchaConfig",Ch(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Joe(e,t){return xu(e,"POST","/v1/accounts:delete",t)}async function UW(e,t){return xu(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function eae(e,t=!1){const r=ho(e),n=await r.getIdToken(t),i=dI(n);St(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:um($P(i.auth_time)),issuedAtTime:um($P(i.iat)),expirationTime:um($P(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function $P(e){return Number(e)*1e3}function dI(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return E0("JWT malformed, contained fewer than 3 sections"),null;try{const i=PW(r);return i?JSON.parse(i):(E0("Failed to decode base64 JWT payload"),null)}catch(i){return E0("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function vL(e){const t=dI(e);return St(t,"internal-error"),St(typeof t.exp<"u","internal-error"),St(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uv(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof Ha&&tae(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function tae({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rae{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var r;if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=um(this.lastLoginAt),this.creationTime=um(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ww(e){var t;const r=e.auth,n=await e.getIdToken(),i=await uv(e,UW(r,{idToken:n}));St(i==null?void 0:i.users.length,r,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?WW(s.providerUserInfo):[],a=iae(e.providerData,o),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new uA(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function nae(e){const t=ho(e);await Ww(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function iae(e,t){return[...e.filter(n=>!t.some(i=>i.providerId===n.providerId)),...t]}function WW(e){return e.map(t=>{var{providerId:r}=t,n=lI(t,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sae(e,t){const r=await zW(e,{},async()=>{const n=yy({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=$W(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",HW.fetch()(o,{method:"POST",headers:a,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function oae(e,t){return xu(e,"POST","/v2/accounts:revokeToken",Ch(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){St(t.idToken,"internal-error"),St(typeof t.idToken<"u","internal-error"),St(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):vL(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){St(t.length!==0,"internal-error");const r=vL(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(St(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:i,expiresIn:s}=await sae(t,r);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:i,expirationTime:s}=r,o=new mp;return n&&(St(typeof n=="string","internal-error",{appName:t}),o.refreshToken=n),i&&(St(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(St(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new mp,this.toJSON())}_performRefresh(){return ll("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(e,t){St(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class cl{constructor(t){var{uid:r,auth:n,stsTokenManager:i}=t,s=lI(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rae(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new uA(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const r=await uv(this,this.stsTokenManager.getToken(this.auth,t));return St(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return eae(this,t)}reload(){return nae(this)}_assign(t){this!==t&&(St(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>Object.assign({},r)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new cl(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(t){St(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await Ww(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(al(this.auth.app))return Promise.reject(Wc(this.auth));const t=await this.getIdToken();return await uv(this,Joe(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){var n,i,s,o,a,l,c,u;const d=(n=r.displayName)!==null&&n!==void 0?n:void 0,p=(i=r.email)!==null&&i!==void 0?i:void 0,f=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=r.photoURL)!==null&&o!==void 0?o:void 0,y=(a=r.tenantId)!==null&&a!==void 0?a:void 0,C=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=r.createdAt)!==null&&c!==void 0?c:void 0,b=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:x,emailVerified:E,isAnonymous:I,providerData:k,stsTokenManager:P}=r;St(x&&P,t,"internal-error");const A=mp.fromJSON(this.name,P);St(typeof x=="string",t,"internal-error"),nc(d,t.name),nc(p,t.name),St(typeof E=="boolean",t,"internal-error"),St(typeof I=="boolean",t,"internal-error"),nc(f,t.name),nc(m,t.name),nc(y,t.name),nc(C,t.name),nc(w,t.name),nc(b,t.name);const D=new cl({uid:x,auth:t,email:p,emailVerified:E,displayName:d,isAnonymous:I,photoURL:m,phoneNumber:f,tenantId:y,stsTokenManager:A,createdAt:w,lastLoginAt:b});return k&&Array.isArray(k)&&(D.providerData=k.map(L=>Object.assign({},L))),C&&(D._redirectEventId=C),D}static async _fromIdTokenResponse(t,r,n=!1){const i=new mp;i.updateFromServerResponse(r);const s=new cl({uid:r.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await Ww(s),s}static async _fromGetAccountInfoResponse(t,r,n){const i=r.users[0];St(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?WW(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new mp;a.updateFromIdToken(n);const l=new cl({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new uA(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=new Map;function ul(e){Tl(e instanceof Function,"Expected a class definition");let t=yL.get(e);return t?(Tl(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,yL.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KW{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}KW.type="NONE";const CL=KW;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(e,t,r){return`firebase:${e}:${t}:${r}`}class vp{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=P0(this.userKey,i.apiKey,s),this.fullPersistenceKey=P0("persistence",i.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?cl._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new vp(ul(CL),t,n);const i=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||ul(CL);const o=P0(n,t.config.apiKey,t.name);let a=null;for(const c of r)try{const u=await c._get(o);if(u){const d=cl._fromJSON(t,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new vp(s,t,n):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(r.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new vp(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(XW(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(qW(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(JW(t))return"Blackberry";if(e3(t))return"Webos";if(YW(t))return"Safari";if((t.includes("chrome/")||QW(t))&&!t.includes("edge/"))return"Chrome";if(ZW(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function qW(e=Ti()){return/firefox\//i.test(e)}function YW(e=Ti()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function QW(e=Ti()){return/crios\//i.test(e)}function XW(e=Ti()){return/iemobile/i.test(e)}function ZW(e=Ti()){return/android/i.test(e)}function JW(e=Ti()){return/blackberry/i.test(e)}function e3(e=Ti()){return/webos/i.test(e)}function hI(e=Ti()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function aae(e=Ti()){var t;return hI(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function lae(){return ose()&&document.documentMode===10}function t3(e=Ti()){return hI(e)||ZW(e)||e3(e)||JW(e)||/windows phone/i.test(e)||XW(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(e,t=[]){let r;switch(e){case"Browser":r=wL(Ti());break;case"Worker":r=`${wL(Ti())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Ff}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cae{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((o,a)=>{try{const l=t(s);o(l)}catch(l){a(l)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uae(e,t={}){return xu(e,"GET","/v2/passwordPolicy",Ch(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dae=6;class hae{constructor(t){var r,n,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:dae,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=t.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var r,n,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),i&&(r.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<t.length;i++)n=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pae{constructor(t,r,n,i){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bL(this),this.idTokenSubscription=new bL(this),this.beforeStateQueue=new cae(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BW,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=ul(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await vp.create(this,t),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await UW(this,{idToken:t}),n=await cl._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(al(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(t);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return St(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await Ww(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Woe()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(al(this.app))return Promise.reject(Wc(this));const r=t?ho(t):null;return r&&St(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&St(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return al(this.app)?Promise.reject(Wc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return al(this.app)?Promise.reject(Wc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ul(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await uae(this),r=new hae(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new vy("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await oae(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&ul(t)||this._popupRedirectResolver;St(r,this,"argument-error"),this.redirectPersistenceManager=await vp.create(this,[ul(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,i){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(St(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const l=t.addObserver(r,n,i);return()=>{o=!0,l()}}else{const l=t.addObserver(r);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return St(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=r3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var t;const r=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return r!=null&&r.error&&zoe(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Lf(e){return ho(e)}class bL{constructor(t){this.auth=t,this.observer=null,this.addObserver=pse(r=>this.observer=r)}get next(){return St(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fae(e){fx=e}function n3(e){return fx.loadJS(e)}function gae(){return fx.recaptchaEnterpriseScript}function mae(){return fx.gapiScript}function vae(e){return`__${e}${Math.floor(Math.random()*1e6)}`}const yae="recaptcha-enterprise",Cae="NO_RECAPTCHA";class wae{constructor(t){this.type=yae,this.auth=Lf(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{Zoe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new Xoe(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;mL(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:t}).then(c=>{o(c)}).catch(()=>{o(Cae)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{n(this.auth).then(a=>{if(!r&&mL(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=gae();l.length!==0&&(l+=a),n3(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function SL(e,t,r,n=!1){const i=new wae(e);let s;try{s=await i.verify(r)}catch{s=await i.verify(r,!0)}const o=Object.assign({},t);return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function xL(e,t,r,n){var i;if(!((i=e._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await SL(e,t,r,r==="getOobCode");return n(e,s)}else return n(e,t).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await SL(e,t,r,r==="getOobCode");return n(e,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bae(e,t){const r=hx(e,"auth");if(r.isInitialized()){const i=r.getImmediate(),s=r.getOptions();if(Hw(s,t??{}))return i;Qo(i,"already-initialized")}return r.initialize({options:t})}function Sae(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(ul);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function xae(e,t,r){const n=Lf(e);St(n._canInitEmulator,n,"emulator-config-failed"),St(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const i=!1,s=i3(t),{host:o,port:a}=Eae(t),l=a===null?"":`:${a}`;n.config.emulator={url:`${s}//${o}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Pae()}function i3(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Eae(e){const t=i3(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:EL(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:EL(o)}}}function EL(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Pae(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return ll("not implemented")}_getIdTokenResponse(t){return ll("not implemented")}_linkToIdToken(t,r){return ll("not implemented")}_getReauthenticationResolver(t){return ll("not implemented")}}async function Rae(e,t){return xu(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tae(e,t){return px(e,"POST","/v1/accounts:signInWithPassword",Ch(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aae(e,t){return px(e,"POST","/v1/accounts:signInWithEmailLink",Ch(e,t))}async function _ae(e,t){return px(e,"POST","/v1/accounts:signInWithEmailLink",Ch(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv extends pI{constructor(t,r,n,i=null){super("password",n),this._email=t,this._password=r,this._tenantId=i}static _fromEmailAndPassword(t,r){return new dv(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new dv(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xL(t,r,"signInWithPassword",Tae);case"emailLink":return Aae(t,{email:this._email,oobCode:this._password});default:Qo(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xL(t,n,"signUpPassword",Rae);case"emailLink":return _ae(t,{idToken:r,email:this._email,oobCode:this._password});default:Qo(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yp(e,t){return px(e,"POST","/v1/accounts:signInWithIdp",Ch(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dae="http://localhost";class Wd extends pI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Wd(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Qo("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:i}=r,s=lI(r,["providerId","signInMethod"]);if(!n||!i)return null;const o=new Wd(n,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const r=this.buildRequest();return yp(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,yp(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,yp(t,r)}buildRequest(){const t={requestUri:Dae,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=yy(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kae(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Iae(e){const t=Vg(Hg(e)).link,r=t?Vg(Hg(t)).deep_link_id:null,n=Vg(Hg(e)).deep_link_id;return(n?Vg(Hg(n)).link:null)||n||r||t||e}class fI{constructor(t){var r,n,i,s,o,a;const l=Vg(Hg(t)),c=(r=l.apiKey)!==null&&r!==void 0?r:null,u=(n=l.oobCode)!==null&&n!==void 0?n:null,d=kae((i=l.mode)!==null&&i!==void 0?i:null);St(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(t){const r=Iae(t);try{return new fI(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(){this.providerId=Gf.PROVIDER_ID}static credential(t,r){return dv._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=fI.parseLink(r);return St(n,"argument-error"),dv._fromEmailAndCode(t,n.code,n.tenantId)}}Gf.PROVIDER_ID="password";Gf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Gf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by extends s3{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc extends by{constructor(){super("facebook.com")}static credential(t){return Wd._fromParams({providerId:Cc.PROVIDER_ID,signInMethod:Cc.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Cc.credentialFromTaggedObject(t)}static credentialFromError(t){return Cc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Cc.credential(t.oauthAccessToken)}catch{return null}}}Cc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends by{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Wd._fromParams({providerId:wc.PROVIDER_ID,signInMethod:wc.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return wc.credentialFromTaggedObject(t)}static credentialFromError(t){return wc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return wc.credential(r,n)}catch{return null}}}wc.GOOGLE_SIGN_IN_METHOD="google.com";wc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc extends by{constructor(){super("github.com")}static credential(t){return Wd._fromParams({providerId:bc.PROVIDER_ID,signInMethod:bc.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bc.credentialFromTaggedObject(t)}static credentialFromError(t){return bc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bc.credential(t.oauthAccessToken)}catch{return null}}}bc.GITHUB_SIGN_IN_METHOD="github.com";bc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends by{constructor(){super("twitter.com")}static credential(t,r){return Wd._fromParams({providerId:Sc.PROVIDER_ID,signInMethod:Sc.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return Sc.credentialFromTaggedObject(t)}static credentialFromError(t){return Sc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return Sc.credential(r,n)}catch{return null}}}Sc.TWITTER_SIGN_IN_METHOD="twitter.com";Sc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,i=!1){const s=await cl._fromIdTokenResponse(t,n,i),o=PL(n);return new nf({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const i=PL(n);return new nf({user:t,providerId:i,_tokenResponse:n,operationType:r})}}function PL(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw extends Ha{constructor(t,r,n,i){var s;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Kw.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,i){return new Kw(t,r,n,i)}}function o3(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Kw._fromErrorAndOperation(e,s,t,n):s})}async function Nae(e,t,r=!1){const n=await uv(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return nf._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mae(e,t,r=!1){const{auth:n}=e;if(al(n.app))return Promise.reject(Wc(n));const i="reauthenticate";try{const s=await uv(e,o3(n,i,t,e),r);St(s.idToken,n,"internal-error");const o=dI(s.idToken);St(o,n,"internal-error");const{sub:a}=o;return St(e.uid===a,n,"user-mismatch"),nf._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Qo(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a3(e,t,r=!1){if(al(e.app))return Promise.reject(Wc(e));const n="signIn",i=await o3(e,n,t),s=await nf._fromIdTokenResponse(e,n,i);return r||await e._updateCurrentUser(s.user),s}async function Oae(e,t){return a3(Lf(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fae(e){const t=Lf(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function Lae(e,t,r){return al(e.app)?Promise.reject(Wc(e)):Oae(ho(e),Gf.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Fae(e),n})}function Gae(e,t,r,n){return ho(e).onIdTokenChanged(t,r,n)}function jae(e,t,r){return ho(e).beforeAuthStateChanged(t,r)}function Bae(e,t,r,n){return ho(e).onAuthStateChanged(t,r,n)}function Vae(e){return ho(e).signOut()}const qw="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(qw,"1"),this.storage.removeItem(qw),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hae=1e3,zae=10;class c3 extends l3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=t3(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&t(r,i,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const n=t.key;r?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);lae()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,zae):i()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},Hae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}c3.type="LOCAL";const $ae=c3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3 extends l3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}u3.type="SESSION";const d3=u3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uae(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(i=>i.isListeningto(t));if(r)return r;const n=new gx(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:i,data:s}=r.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const a=Array.from(o).map(async c=>c(r.origin,s)),l=await Uae(a);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wae{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=gI("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:c,data:r},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(){return window}function Kae(e){Da().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(){return typeof Da().WorkerGlobalScope<"u"&&typeof Da().importScripts=="function"}async function qae(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Yae(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Qae(){return h3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3="firebaseLocalStorageDb",Xae=1,Yw="firebaseLocalStorage",f3="fbase_key";class Sy{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function mx(e,t){return e.transaction([Yw],t?"readwrite":"readonly").objectStore(Yw)}function Zae(){const e=indexedDB.deleteDatabase(p3);return new Sy(e).toPromise()}function dA(){const e=indexedDB.open(p3,Xae);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(Yw,{keyPath:f3})}catch(i){r(i)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Yw)?t(n):(n.close(),await Zae(),t(await dA()))})})}async function RL(e,t,r){const n=mx(e,!0).put({[f3]:t,value:r});return new Sy(n).toPromise()}async function Jae(e,t){const r=mx(e,!1).get(t),n=await new Sy(r).toPromise();return n===void 0?null:n.value}function TL(e,t){const r=mx(e,!0).delete(t);return new Sy(r).toPromise()}const ele=800,tle=3;class g3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dA(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>tle)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return h3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gx._getInstance(Qae()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await qae(),!this.activeServiceWorker)return;this.sender=new Wae(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((t=n[0])===null||t===void 0)&&t.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Yae()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await dA();return await RL(t,qw,"1"),await TL(t,qw),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>RL(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>Jae(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>TL(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=mx(i,!1).getAll();return new Sy(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ele)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}g3.type="LOCAL";const rle=g3;new wy(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nle(e,t){return t?ul(t):(St(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI extends pI{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return yp(t,this._buildIdpRequest())}_linkToIdToken(t,r){return yp(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return yp(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function ile(e){return a3(e.auth,new mI(e),e.bypassAuthState)}function sle(e){const{auth:t,user:r}=e;return St(r,t,"internal-error"),Mae(r,new mI(e),e.bypassAuthState)}async function ole(e){const{auth:t,user:r}=e;return St(r,t,"internal-error"),Nae(r,new mI(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(t,r,n,i,s=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return ile;case"linkViaPopup":case"linkViaRedirect":return ole;case"reauthViaPopup":case"reauthViaRedirect":return sle;default:Qo(this.auth,"internal-error")}}resolve(t){Tl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Tl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ale=new wy(2e3,1e4);class rp extends m3{constructor(t,r,n,i,s){super(t,r,i,s),this.provider=n,this.authWindow=null,this.pollId=null,rp.currentPopupAction&&rp.currentPopupAction.cancel(),rp.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return St(t,this.auth,"internal-error"),t}async onExecution(){Tl(this.filter.length===1,"Popup operations only handle one event");const t=gI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(_a(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(_a(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rp.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_a(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,ale.get())};t()}}rp.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lle="pendingRedirect",R0=new Map;class cle extends m3{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=R0.get(this.auth._key());if(!t){try{const n=await ule(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}R0.set(this.auth._key(),t)}return this.bypassAuthState||R0.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ule(e,t){const r=ple(t),n=hle(e);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function dle(e,t){R0.set(e._key(),t)}function hle(e){return ul(e._redirectPersistence)}function ple(e){return P0(lle,e.config.apiKey,e.name)}async function fle(e,t,r=!1){if(al(e.app))return Promise.reject(Wc(e));const n=Lf(e),i=nle(n,t),o=await new cle(n,i,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gle=10*60*1e3;class mle{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!vle(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!v3(t)){const i=((n=t.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(_a(this.auth,i))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=gle&&this.cachedEventUids.clear(),this.cachedEventUids.has(AL(t))}saveEventToCache(t){this.cachedEventUids.add(AL(t)),this.lastProcessedEventTime=Date.now()}}function AL(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function v3({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function vle(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return v3(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yle(e,t={}){return xu(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cle=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wle=/^https?/;async function ble(e){if(e.config.emulator)return;const{authorizedDomains:t}=await yle(e);for(const r of t)try{if(Sle(r))return}catch{}Qo(e,"unauthorized-domain")}function Sle(e){const t=cA(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!wle.test(r))return!1;if(Cle.test(e))return n===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xle=new wy(3e4,6e4);function _L(){const e=Da().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function Ele(e){return new Promise((t,r)=>{var n,i,s;function o(){_L(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{_L(),r(_a(e,"network-request-failed"))},timeout:xle.get()})}if(!((i=(n=Da().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Da().gapi)===null||s===void 0)&&s.load)o();else{const a=vae("iframefcb");return Da()[a]=()=>{gapi.load?o():r(_a(e,"network-request-failed"))},n3(`${mae()}?onload=${a}`).catch(l=>r(l))}}).catch(t=>{throw T0=null,t})}let T0=null;function Ple(e){return T0=T0||Ele(e),T0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rle=new wy(5e3,15e3),Tle="__/auth/iframe",Ale="emulator/auth/iframe",_le={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Dle=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kle(e){const t=e.config;St(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?uI(t,Ale):`https://${e.config.authDomain}/${Tle}`,n={apiKey:t.apiKey,appName:e.name,v:Ff},i=Dle.get(e.config.apiHost);i&&(n.eid=i);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${yy(n).slice(1)}`}async function Ile(e){const t=await Ple(e),r=Da().gapi;return St(r,e,"internal-error"),t.open({where:document.body,url:kle(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_le,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const o=_a(e,"network-request-failed"),a=Da().setTimeout(()=>{s(o)},Rle.get());function l(){Da().clearTimeout(a),i(n)}n.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nle={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Mle=500,Ole=600,Fle="_blank",Lle="http://localhost";class DL{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Gle(e,t,r,n=Mle,i=Ole){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Nle),{width:n.toString(),height:i.toString(),top:s,left:o}),c=Ti().toLowerCase();r&&(a=QW(c)?Fle:r),qW(c)&&(t=t||Lle,l.scrollbars="yes");const u=Object.entries(l).reduce((p,[f,m])=>`${p}${f}=${m},`,"");if(aae(c)&&a!=="_self")return jle(t||"",a),new DL(null);const d=window.open(t||"",a,u);St(d,e,"popup-blocked");try{d.focus()}catch{}return new DL(d)}function jle(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ble="__/auth/handler",Vle="emulator/auth/handler",Hle=encodeURIComponent("fac");async function kL(e,t,r,n,i,s){St(e.config.authDomain,e,"auth-domain-config-required"),St(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:Ff,eventId:i};if(t instanceof s3){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",hse(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(t instanceof by){const u=t.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${Hle}=${encodeURIComponent(l)}`:"";return`${zle(e)}?${yy(a).slice(1)}${c}`}function zle({config:e}){return e.emulator?uI(e,Vle):`https://${e.authDomain}/${Ble}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="webStorageSupport";class $le{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=d3,this._completeRedirectFn=fle,this._overrideRedirectResult=dle}async _openPopup(t,r,n,i){var s;Tl((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await kL(t,r,n,cA(),i);return Gle(t,o,gI())}async _openRedirect(t,r,n,i){await this._originValidation(t);const s=await kL(t,r,n,cA(),i);return Kae(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:i,promise:s}=this.eventManagers[r];return i?Promise.resolve(i):(Tl(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await Ile(t),n=new mle(t);return r.register("authEvent",i=>(St(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(UP,{type:UP},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[UP];o!==void 0&&r(!!o),Qo(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=ble(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return t3()||YW()||hI()}}const Ule=$le;var IL="@firebase/auth",NL="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wle{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){St(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kle(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qle(e){Ud(new iu("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=n.options;St(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:r3(e)},c=new pae(n,i,s,l);return Sae(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),Ud(new iu("auth-internal",t=>{const r=Lf(t.getProvider("auth").getImmediate());return(n=>new Wle(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Aa(IL,NL,Kle(e)),Aa(IL,NL,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yle=5*60,Qle=_W("authIdTokenMaxAge")||Yle;let ML=null;const Xle=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Qle)return;const i=r==null?void 0:r.token;ML!==i&&(ML=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Zle(e=iI()){const t=hx(e,"auth");if(t.isInitialized())return t.getImmediate();const r=bae(e,{popupRedirectResolver:Ule,persistence:[rle,$ae,d3]}),n=_W("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=Xle(s.toString());jae(r,o,()=>o(r.currentUser)),Gae(r,a=>o(a))}}const i=RW("auth");return i&&xae(r,`http://${i}`),r}function Jle(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}fae({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=i=>{const s=_a("internal-error");s.customData=i,r(s)},n.type="text/javascript",n.charset="UTF-8",Jle().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qle("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ece="type.googleapis.com/google.protobuf.Int64Value",tce="type.googleapis.com/google.protobuf.UInt64Value";function y3(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function hA(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>hA(t));if(typeof e=="function"||typeof e=="object")return y3(e,t=>hA(t));throw new Error("Data cannot be encoded in JSON: "+e)}function Qw(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case ece:case tce:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>Qw(t)):typeof e=="function"||typeof e=="object"?y3(e,t=>Qw(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Cp extends Ha{constructor(t,r,n){super(`${vI}/${t}`,r||""),this.details=n}}function rce(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function nce(e,t){let r=rce(e),n=r,i;try{const s=t&&t.error;if(s){const o=s.status;if(typeof o=="string"){if(!OL[o])return new Cp("internal","internal");r=OL[o],n=o}const a=s.message;typeof a=="string"&&(n=a),i=s.details,i!==void 0&&(i=Qw(i))}}catch{}return r==="ok"?null:new Cp(r,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ice{constructor(t,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||n.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),i=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="us-central1";function sce(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new Cp("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class oce{constructor(t,r,n,i,s=pA,o){this.app=t,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new ice(r,n,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=pA}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function ace(e,t,r){e.emulatorOrigin=`http://${t}:${r}`}function lce(e,t,r){return n=>uce(e,t,n,{})}async function cce(e,t,r,n){r["Content-Type"]="application/json";let i;try{i=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}function uce(e,t,r,n){const i=e._url(t);return dce(e,i,r,n)}async function dce(e,t,r,n){r=hA(r);const i={data:r},s={},o=await e.contextProvider.getContext(n.limitedUseAppCheckTokens);o.authToken&&(s.Authorization="Bearer "+o.authToken),o.messagingToken&&(s["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(s["X-Firebase-AppCheck"]=o.appCheckToken);const a=n.timeout||7e4,l=sce(a),c=await Promise.race([cce(t,i,s,e.fetchImpl),l.promise,e.cancelAllRequests]);if(l.cancel(),!c)throw new Cp("cancelled","Firebase Functions instance was deleted.");const u=nce(c.status,c.json);if(u)throw u;if(!c.json)throw new Cp("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new Cp("internal","Response is missing data field.");return{data:Qw(d)}}const FL="@firebase/functions",LL="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hce="auth-internal",pce="app-check-internal",fce="messaging-internal";function gce(e,t){const r=(n,{instanceIdentifier:i})=>{const s=n.getProvider("app").getImmediate(),o=n.getProvider(hce),a=n.getProvider(fce),l=n.getProvider(pce);return new oce(s,o,a,l,i,e)};Ud(new iu(vI,r,"PUBLIC").setMultipleInstances(!0)),Aa(FL,LL,t),Aa(FL,LL,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mce(e=iI(),t=pA){const n=hx(ho(e),vI).getImmediate({identifier:t}),i=TW("functions");return i&&vce(n,...i),n}function vce(e,t,r){ace(ho(e),t,r)}function C3(e,t,r){return lce(ho(e),t)}gce(fetch.bind(self));const yce={apiKey:"AIzaSyAW1cyvgMe7jU38P6b1RgAOd7w6lCGK5lE",authDomain:"nutrasafe-705c7.firebaseapp.com",projectId:"nutrasafe-705c7",storageBucket:"nutrasafe-705c7.appspot.com",messagingSenderId:"1043273165814",appId:"1:1043273165814:web:c3e98e4d8f5a6b7c8d9e0f"};let Dh,GL,Xw,Zw;function yI(){return Dh||(Dh=IW(yce),GL=Voe(Dh),Xw=Zle(Dh),Zw=mce(Dh)),{app:Dh,db:GL,auth:Xw,functions:Zw}}function CI(){return Xw||yI(),Xw}function w3(){return Zw||yI(),Zw}async function Cce(e,t){const r=CI();return(await Lae(r,e,t)).user}async function wce(){const e=CI();await Vae(e)}function bce(e){const t=CI();return Bae(t,e)}const hv="https://us-central1-nutrasafe-705c7.cloudfunctions.net";async function zg(e,t){const{objectID:r,_hasFirestoreBacking:n,_firestoreCollection:i,_sourceIndex:s}=e,o={foodId:r,collection:n?i:s,foodName:t.name,brandName:t.brandName,barcode:t.barcode,extractedIngredients:t.ingredientsText,nutritionData:{calories:t.calories,protein:t.protein,carbs:t.carbs,fat:t.fat,saturatedFat:t.saturatedFat,fiber:t.fiber,sugar:t.sugar,sodium:t.sodium,salt:t.salt},servingSize:t.servingDescription,servingSizeG:t.servingSizeG,isPerUnit:t.isPerUnit,source:t.source};try{const l=await(await fetch(`${hv}/updateVerifiedFood`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).json();return l.success?{success:!0}:{success:!1,error:l.error||"Unknown error"}}catch(a){return console.error("Error updating food:",a),{success:!1,error:String(a)}}}async function Sce(e){var i,s;const{_sourceIndex:t,objectID:r,barcode:n}=e;try{let o=await fetch(`${hv}/deleteFoodComprehensive`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({foodId:r,indexName:t,barcode:n,deleteFromAllIndices:!0})});o.ok||(console.log("Comprehensive delete unavailable, using single-index delete"),o=await fetch(`${hv}/deleteFoodFromAlgolia`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({foodId:r,indexName:t})}));const a=await o.json();return a.success?(console.log(` Deleted food from ${((i=a.deletedFrom)==null?void 0:i.length)||1} location(s)`),{success:!0,deletedFrom:((s=a.deletedFrom)==null?void 0:s.length)||1}):{success:!1,error:a.error||"Unknown error"}}catch(o){return console.error("Error deleting food:",o),{success:!1,error:String(o)}}}async function xce(e){let t=0,r=0;const n=[],i=5;for(let s=0;s<e.length;s+=i){const o=e.slice(s,s+i);(await Promise.all(o.map(({food:l,updates:c})=>zg(l,c)))).forEach((l,c)=>{l.success?t++:(r++,n.push(`${o[c].food.name}: ${l.error}`))})}return{success:t,failed:r,errors:n}}async function Ece(e){let t=0,r=0;const n=[],i=5;for(let s=0;s<e.length;s+=i){const o=e.slice(s,s+i);(await Promise.all(o.map(l=>Sce(l)))).forEach((l,c)=>{l.success?t++:(r++,n.push(`${o[c].name}: ${l.error}`))})}return{success:t,failed:r,errors:n}}async function Pce(e){try{const r=await(await fetch(`${hv}/addVerifiedFood`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({foodName:e.name,brandName:e.brandName,barcode:e.barcode,extractedIngredients:e.ingredientsText,nutritionData:{calories:e.calories,protein:e.protein,carbs:e.carbs,fat:e.fat,saturatedFat:e.saturatedFat,fiber:e.fiber,sugar:e.sugar,sodium:e.sodium,salt:e.salt},servingSize:e.servingDescription})})).json();return r.success?{success:!0,foodId:r.foodId}:{success:!1,error:r.error||"Unknown error"}}catch(t){return console.error("Error adding food:",t),{success:!1,error:String(t)}}}async function Rce(e,t){const r=new Map;e.forEach(o=>{const a=o._sourceIndex;r.has(a)||r.set(a,[]),r.get(a).push(o.objectID)});let n=0,i=0;const s=[];for(const[o,a]of r.entries()){if(o===t){console.log(`Skipping ${a.length} foods already in ${t}`),n+=a.length;continue}try{const l=await fetch(`${hv}/moveFoodsBetweenIndices`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({foodIds:a,fromIndex:o,toIndex:t})});if(!l.ok){const u=await l.text();console.error(` Move failed (HTTP ${l.status}):`,u),i+=a.length,s.push(`${o}  ${t}: HTTP ${l.status} - ${u}`);continue}const c=await l.json();if(console.log("Move result:",c),c.success)n+=c.moved||0,i+=c.failed||0,c.errors&&c.errors.length>0&&s.push(...c.errors),console.log(` Moved ${c.moved} foods from ${o} to ${t}`);else{i+=a.length;const u=c.details||c.error||"Unknown error";console.error(" Move failed:",u),s.push(`${o}  ${t}: ${u}`)}}catch(l){console.error(` Error moving foods from ${o}:`,l),i+=a.length,s.push(`${o}  ${t}: ${String(l)}`)}}return{success:n,failed:i,errors:s}}const Tce="modulepreload",Ace=function(e){return"/admin-v2/"+e},jL={},BL=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=Ace(l),l in jL)return;jL[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Tce,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((p,f)=>{d.addEventListener("load",p),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};var _ce=Object.create,b3=Object.defineProperty,Dce=Object.getOwnPropertyDescriptor,S3=Object.getOwnPropertyNames,kce=Object.getPrototypeOf,Ice=Object.prototype.hasOwnProperty,wI=(e,t)=>function(){return t||(0,e[S3(e)[0]])((t={exports:{}}).exports,t),t.exports},Nce=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of S3(t))!Ice.call(e,i)&&i!==r&&b3(e,i,{get:()=>t[i],enumerable:!(n=Dce(t,i))||n.enumerable});return e},vx=(e,t,r)=>(r=e!=null?_ce(kce(e)):{},Nce(!e||!e.__esModule?b3(r,"default",{value:e,enumerable:!0}):r,e)),Mce=wI({"../../node_modules/.pnpm/iota-array@1.0.0/node_modules/iota-array/iota.js"(e,t){function r(n){for(var i=new Array(n),s=0;s<n;++s)i[s]=s;return i}t.exports=r}}),Oce=wI({"../../node_modules/.pnpm/is-buffer@1.1.6/node_modules/is-buffer/index.js"(e,t){t.exports=function(i){return i!=null&&(r(i)||n(i)||!!i._isBuffer)};function r(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function n(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&r(i.slice(0,0))}}}),yx=wI({"../../node_modules/.pnpm/ndarray@1.0.19/node_modules/ndarray/ndarray.js"(e,t){var r=Mce(),n=Oce(),i=typeof Float64Array<"u";function s(d,p){return d[0]-p[0]}function o(){var d=this.stride,p=new Array(d.length),f;for(f=0;f<p.length;++f)p[f]=[Math.abs(d[f]),f];p.sort(s);var m=new Array(p.length);for(f=0;f<m.length;++f)m[f]=p[f][1];return m}function a(d,p){var f=["View",p,"d",d].join("");p<0&&(f="View_Nil"+d);var m=d==="generic";if(p===-1){var y="function "+f+"(a){this.data=a;};var proto="+f+".prototype;proto.dtype='"+d+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+f+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+f+"(a){return new "+f+"(a);}",L=new Function(y);return L()}else if(p===0){var y="function "+f+"(a,d) {this.data = a;this.offset = d};var proto="+f+".prototype;proto.dtype='"+d+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+f+"_copy() {return new "+f+"(this.data,this.offset)};proto.pick=function "+f+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+f+"_get(){return "+(m?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+f+"_set(v){return "+(m?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+f+"(a,b,c,d){return new "+f+"(a,d)}",L=new Function("TrivialArray",y);return L(c[d][0])}var y=["'use strict'"],C=r(p),w=C.map(function(M){return"i"+M}),b="this.offset+"+C.map(function(M){return"this.stride["+M+"]*i"+M}).join("+"),x=C.map(function(M){return"b"+M}).join(","),E=C.map(function(M){return"c"+M}).join(",");y.push("function "+f+"(a,"+x+","+E+",d){this.data=a","this.shape=["+x+"]","this.stride=["+E+"]","this.offset=d|0}","var proto="+f+".prototype","proto.dtype='"+d+"'","proto.dimension="+p),y.push("Object.defineProperty(proto,'size',{get:function "+f+"_size(){return "+C.map(function(M){return"this.shape["+M+"]"}).join("*"),"}})"),p===1?y.push("proto.order=[0]"):(y.push("Object.defineProperty(proto,'order',{get:"),p<4?(y.push("function "+f+"_order(){"),p===2?y.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):p===3&&y.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):y.push("ORDER})")),y.push("proto.set=function "+f+"_set("+w.join(",")+",v){"),m?y.push("return this.data.set("+b+",v)}"):y.push("return this.data["+b+"]=v}"),y.push("proto.get=function "+f+"_get("+w.join(",")+"){"),m?y.push("return this.data.get("+b+")}"):y.push("return this.data["+b+"]}"),y.push("proto.index=function "+f+"_index(",w.join(),"){return "+b+"}"),y.push("proto.hi=function "+f+"_hi("+w.join(",")+"){return new "+f+"(this.data,"+C.map(function(M){return["(typeof i",M,"!=='number'||i",M,"<0)?this.shape[",M,"]:i",M,"|0"].join("")}).join(",")+","+C.map(function(M){return"this.stride["+M+"]"}).join(",")+",this.offset)}");var I=C.map(function(M){return"a"+M+"=this.shape["+M+"]"}),k=C.map(function(M){return"c"+M+"=this.stride["+M+"]"});y.push("proto.lo=function "+f+"_lo("+w.join(",")+"){var b=this.offset,d=0,"+I.join(",")+","+k.join(","));for(var P=0;P<p;++P)y.push("if(typeof i"+P+"==='number'&&i"+P+">=0){d=i"+P+"|0;b+=c"+P+"*d;a"+P+"-=d}");y.push("return new "+f+"(this.data,"+C.map(function(M){return"a"+M}).join(",")+","+C.map(function(M){return"c"+M}).join(",")+",b)}"),y.push("proto.step=function "+f+"_step("+w.join(",")+"){var "+C.map(function(M){return"a"+M+"=this.shape["+M+"]"}).join(",")+","+C.map(function(M){return"b"+M+"=this.stride["+M+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var P=0;P<p;++P)y.push("if(typeof i"+P+"==='number'){d=i"+P+"|0;if(d<0){c+=b"+P+"*(a"+P+"-1);a"+P+"=ceil(-a"+P+"/d)}else{a"+P+"=ceil(a"+P+"/d)}b"+P+"*=d}");y.push("return new "+f+"(this.data,"+C.map(function(M){return"a"+M}).join(",")+","+C.map(function(M){return"b"+M}).join(",")+",c)}");for(var A=new Array(p),D=new Array(p),P=0;P<p;++P)A[P]="a[i"+P+"]",D[P]="b[i"+P+"]";y.push("proto.transpose=function "+f+"_transpose("+w+"){"+w.map(function(M,T){return M+"=("+M+"===undefined?"+T+":"+M+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+f+"(this.data,"+A.join(",")+","+D.join(",")+",this.offset)}"),y.push("proto.pick=function "+f+"_pick("+w+"){var a=[],b=[],c=this.offset");for(var P=0;P<p;++P)y.push("if(typeof i"+P+"==='number'&&i"+P+">=0){c=(c+this.stride["+P+"]*i"+P+")|0}else{a.push(this.shape["+P+"]);b.push(this.stride["+P+"])}");y.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),y.push("return function construct_"+f+"(data,shape,stride,offset){return new "+f+"(data,"+C.map(function(M){return"shape["+M+"]"}).join(",")+","+C.map(function(M){return"stride["+M+"]"}).join(",")+",offset)}");var L=new Function("CTOR_LIST","ORDER",y.join(`
`));return L(c[d],o)}function l(d){if(n(d))return"buffer";if(i)switch(Object.prototype.toString.call(d)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(d)?"array":"generic"}var c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function u(d,p,f,m){if(d===void 0){var E=c.array[0];return E([])}else typeof d=="number"&&(d=[d]);p===void 0&&(p=[d.length]);var y=p.length;if(f===void 0){f=new Array(y);for(var C=y-1,w=1;C>=0;--C)f[C]=w,w*=p[C]}if(m===void 0){m=0;for(var C=0;C<y;++C)f[C]<0&&(m-=(p[C]-1)*f[C])}for(var b=l(d),x=c[b];x.length<=y+1;)x.push(a(b,x.length-1));var E=x[y+1];return E(d,p,f,m)}t.exports=u}}),Fce=typeof global=="object"&&global&&global.Object===Object&&global,Lce=Fce,Gce=typeof self=="object"&&self&&self.Object===Object&&self,jce=Lce||Gce||Function("return this")(),bI=jce,Bce=bI.Symbol,Jw=Bce,x3=Object.prototype,Vce=x3.hasOwnProperty,Hce=x3.toString,fg=Jw?Jw.toStringTag:void 0;function zce(e){var t=Vce.call(e,fg),r=e[fg];try{e[fg]=void 0;var n=!0}catch{}var i=Hce.call(e);return n&&(t?e[fg]=r:delete e[fg]),i}var $ce=zce,Uce=Object.prototype,Wce=Uce.toString;function Kce(e){return Wce.call(e)}var qce=Kce,Yce="[object Null]",Qce="[object Undefined]",VL=Jw?Jw.toStringTag:void 0;function Xce(e){return e==null?e===void 0?Qce:Yce:VL&&VL in Object(e)?$ce(e):qce(e)}var Zce=Xce;function Jce(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var E3=Jce,eue="[object AsyncFunction]",tue="[object Function]",rue="[object GeneratorFunction]",nue="[object Proxy]";function iue(e){if(!E3(e))return!1;var t=Zce(e);return t==tue||t==rue||t==eue||t==nue}var sue=iue,oue=bI["__core-js_shared__"],WP=oue,HL=function(){var e=/[^.]+$/.exec(WP&&WP.keys&&WP.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function aue(e){return!!HL&&HL in e}var lue=aue,cue=Function.prototype,uue=cue.toString;function due(e){if(e!=null){try{return uue.call(e)}catch{}try{return e+""}catch{}}return""}var hue=due,pue=/[\\^$.*+?()[\]{}|]/g,fue=/^\[object .+?Constructor\]$/,gue=Function.prototype,mue=Object.prototype,vue=gue.toString,yue=mue.hasOwnProperty,Cue=RegExp("^"+vue.call(yue).replace(pue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wue(e){if(!E3(e)||lue(e))return!1;var t=sue(e)?Cue:fue;return t.test(hue(e))}var bue=wue;function Sue(e,t){return e==null?void 0:e[t]}var xue=Sue;function Eue(e,t){var r=xue(e,t);return bue(r)?r:void 0}var P3=Eue,Pue=P3(Object,"create"),pv=Pue;function Rue(){this.__data__=pv?pv(null):{},this.size=0}var Tue=Rue;function Aue(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _ue=Aue,Due="__lodash_hash_undefined__",kue=Object.prototype,Iue=kue.hasOwnProperty;function Nue(e){var t=this.__data__;if(pv){var r=t[e];return r===Due?void 0:r}return Iue.call(t,e)?t[e]:void 0}var Mue=Nue,Oue=Object.prototype,Fue=Oue.hasOwnProperty;function Lue(e){var t=this.__data__;return pv?t[e]!==void 0:Fue.call(t,e)}var Gue=Lue,jue="__lodash_hash_undefined__";function Bue(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=pv&&t===void 0?jue:t,this}var Vue=Bue;function jf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}jf.prototype.clear=Tue;jf.prototype.delete=_ue;jf.prototype.get=Mue;jf.prototype.has=Gue;jf.prototype.set=Vue;var zL=jf;function Hue(){this.__data__=[],this.size=0}var zue=Hue;function $ue(e,t){return e===t||e!==e&&t!==t}var Uue=$ue;function Wue(e,t){for(var r=e.length;r--;)if(Uue(e[r][0],t))return r;return-1}var Cx=Wue,Kue=Array.prototype,que=Kue.splice;function Yue(e){var t=this.__data__,r=Cx(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():que.call(t,r,1),--this.size,!0}var Que=Yue;function Xue(e){var t=this.__data__,r=Cx(t,e);return r<0?void 0:t[r][1]}var Zue=Xue;function Jue(e){return Cx(this.__data__,e)>-1}var ede=Jue;function tde(e,t){var r=this.__data__,n=Cx(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var rde=tde;function Bf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Bf.prototype.clear=zue;Bf.prototype.delete=Que;Bf.prototype.get=Zue;Bf.prototype.has=ede;Bf.prototype.set=rde;var nde=Bf,ide=P3(bI,"Map"),sde=ide;function ode(){this.size=0,this.__data__={hash:new zL,map:new(sde||nde),string:new zL}}var ade=ode;function lde(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var cde=lde;function ude(e,t){var r=e.__data__;return cde(t)?r[typeof t=="string"?"string":"hash"]:r.map}var wx=ude;function dde(e){var t=wx(this,e).delete(e);return this.size-=t?1:0,t}var hde=dde;function pde(e){return wx(this,e).get(e)}var fde=pde;function gde(e){return wx(this,e).has(e)}var mde=gde;function vde(e,t){var r=wx(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var yde=vde;function Vf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Vf.prototype.clear=ade;Vf.prototype.delete=hde;Vf.prototype.get=fde;Vf.prototype.has=mde;Vf.prototype.set=yde;var R3=Vf,Cde="Expected a function";function SI(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Cde);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=e.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(SI.Cache||R3),r}SI.Cache=R3;var wde=SI,xI=vx(yx()),T3=class fA{constructor(t,r){this.type="application/octet-stream",this.params={},this.type=t,this.params=r}toString(){const t=[];for(const r in this.params){const n=this.params[r];t.push(`${r}=${n}`)}return[this.type,...t].join(";")}static create(t,r){return new fA(t,r)}isIdentical(t){return this.type===t.type&&this.params===t.params}isEqual(t){return this.type===t.type}static fromString(t){const[r,...n]=t.split(";"),i={};for(const s of n){const[o,a]=s.split("=");i[o.trim()]=a.trim()}return new fA(r,i)}},KP=vx(yx());async function bde(e){const t=T3.fromString(e.type);switch(t.type){case"image/x-alpha8":{const r=parseInt(t.params.width),n=parseInt(t.params.height);return(0,KP.default)(new Uint8Array(await e.arrayBuffer()),[n,r,1])}case"image/x-rgba8":{const r=parseInt(t.params.width),n=parseInt(t.params.height);return(0,KP.default)(new Uint8Array(await e.arrayBuffer()),[n,r,4])}case"application/octet-stream":case"image/png":case"image/jpeg":case"image/jpg":case"image/webp":{const r=await createImageBitmap(e),n=Pde(r);return(0,KP.default)(new Uint8Array(n.data),[n.height,n.width,4])}default:throw new Error(`Invalid format: ${t.type} with params: ${t.params}`)}}async function Sde(e,t=.8,r="image/png"){const[n,i,s]=e.shape;switch(r){case"image/x-alpha8":case"image/x-rgba8":{const l=T3.create(r,{width:i.toString(),height:n.toString()});return new Blob([e.data],{type:l.toString()})}case"image/png":case"image/jpeg":case"image/webp":{const l=new ImageData(new Uint8ClampedArray(e.data),i,n);var o=A3(l.width,l.height),a=o.getContext("2d");return a.putImageData(l,0,0),o.convertToBlob({quality:t,type:r})}default:throw new Error(`Invalid format: ${r}`)}}function xde(e){return new RegExp("^(?:[a-z+]+:)?//","i").test(e)}function Ede(e,t){return xde(e)?e:new URL(e,t).href}function Pde(e){var t=A3(e.width,e.height),r=t.getContext("2d");return r.drawImage(e,0,0),r.getImageData(0,0,t.width,t.height)}function Rde(e){if(typeof Uint8Array<"u")return new Uint8Array(e);if(typeof Uint8ClampedArray<"u")return new Uint8ClampedArray(e);if(typeof Uint16Array<"u")return new Uint16Array(e);if(typeof Uint32Array<"u")return new Uint32Array(e);if(typeof Float32Array<"u")return new Float32Array(e);if(typeof Float64Array<"u")return new Float64Array(e);throw new Error("TypedArray not supported")}function $L(e,t,r,n=!1){const[i,s,o]=e.shape;let a=s/t,l=i/r;n&&(a=l=Math.max(a,l)>1?Math.max(a,l):Math.min(a,l));const c=(0,xI.default)(Rde(o*t*r),[r,t,o]);for(let u=0;u<r;u++)for(let d=0;d<t;d++){const p=d*a,f=u*l,m=Math.max(Math.floor(p),0),y=Math.min(Math.ceil(p),s-1),C=Math.max(Math.floor(f),0),w=Math.min(Math.ceil(f),i-1),b=p-m,x=f-C;for(let E=0;E<o;E++){const I=e.get(C,m,E),k=e.get(C,y,E),P=e.get(w,m,E),A=e.get(w,y,E),D=(1-b)*(1-x)*I+b*(1-x)*k+(1-b)*x*P+b*x*A;c.set(u,d,E,D)}}return c}function Tde(e,t=[128,128,128],r=[256,256,256]){var n=e.data;const[i,s,o]=e.shape,a=i*s,l=new Float32Array(3*a);for(let c=0,u=0;c<n.length;c+=4,u+=1)l[u]=(n[c]-t[0])/r[0],l[u+a]=(n[c+1]-t[1])/r[1],l[u+a+a]=(n[c+2]-t[2])/r[2];return(0,xI.default)(l,[1,3,i,s])}async function Ade(e,t){return typeof e=="string"&&(e=Ede(e,t.publicPath),e=new URL(e)),e instanceof URL&&(e=await(await fetch(e,{})).blob()),(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e=new Blob([e])),e instanceof Blob&&(e=await bde(e)),e}function _de(e){const t=new Uint8Array(e.data.length);for(let r=0;r<e.data.length;r++)t[r]=e.data[r]*255;return(0,xI.default)(t,e.shape)}function A3(e,t){let r;if(typeof OffscreenCanvas<"u"?r=new OffscreenCanvas(e,t):r=document.createElement("canvas"),!r)throw new Error("Canvas nor OffscreenCanvas are available in the current context.");return r}var Dde=vx(yx()),_3=async()=>navigator.gpu===void 0?!1:await navigator.gpu.requestAdapter()!==null,kde=()=>navigator.hardwareConcurrency??4;async function UL(e,t){return URL.createObjectURL(await D3(e,t))}async function D3(e,t){const r=new URL("resources.json",t.publicPath),n=await fetch(r);if(!n.ok)throw new Error("Resource metadata not found. Ensure that the config.publicPath is configured correctly.");const s=(await n.json())[e];if(!s)throw new Error(`Resource ${e} not found. Ensure that the config.publicPath is configured correctly.`);const o=s.chunks;let a=0;const l=o.map(async d=>{const p=d.offsets[1]-d.offsets[0],f=t.publicPath?new URL(d.name,t.publicPath).toString():d.name,y=await(await fetch(f,t.fetchArgs)).blob();if(p!==y.size)throw new Error(`Failed to fetch ${e} with size ${p} but got ${y.size}`);return t.progress&&(a+=p,t.progress(`fetch:${e}`,a,s.size)),y}),c=await Promise.all(l),u=new Blob(c,{type:s.mime});if(u.size!==s.size)throw new Error(`Failed to fetch ${e} with size ${s.size} but got ${u.size}`);return u}var gg=null,k3=async e=>(gg!==null||(e?gg=(await BL(async()=>{const{default:t}=await import("./ort.webgpu.bundle.min-OqVjPHQG.js");return{default:t}},[])).default:gg=(await BL(async()=>{const{default:t}=await import("./ort.bundle.min-fzhtFWcq.js");return{default:t}},[])).default),gg);async function Ide(e,t){const r=t.device==="gpu"&&await _3(),n=r&&t.proxyToWorker,i=[r?"webgpu":"wasm"],s=await k3(r);t.debug&&(console.debug("	Using WebGPU:",r),console.debug("	Proxy to Worker:",n),s.env.debug=!0,s.env.logLevel="verbose"),s.env.wasm.numThreads=kde(),s.env.wasm.proxy=n;const o=r?"/onnxruntime-web/ort-wasm-simd-threaded.jsep":"/onnxruntime-web/ort-wasm-simd-threaded",a=await UL(`${o}.wasm`,t),l=await UL(`${o}.mjs`,t);s.env.wasm.wasmPaths={mjs:l,wasm:a},t.debug&&console.debug("ort.env.wasm:",s.env.wasm);const c={executionProviders:i,graphOptimizationLevel:"all",executionMode:"parallel",enableCpuMemArena:!0};return await s.InferenceSession.create(e,c).catch(d=>{throw new Error(`Failed to create session: "${d}". Please check if the publicPath is set correctly.`)})}async function Nde(e,t,r,n){const i=n.device==="gpu"&&await _3(),s=await k3(i),o={};for(const[c,u]of t)o[c]=new s.Tensor("float32",new Float32Array(u.data),u.shape);const a=await e.run(o,{}),l=[];for(const c of r){const u=a[c],d=u.dims,p=u.data,f=(0,Dde.default)(p,d);l.push(f)}return l}var qt;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function r(i){throw new Error}e.assertNever=r,e.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},e.getValidEnumValues=i=>{const s=e.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(s){return i[s]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},e.find=(i,s)=>{for(const o of i)if(s(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}e.joinValues=n,e.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(qt||(qt={}));var gA;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(gA||(gA={}));var Je=qt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),tl=e=>{switch(typeof e){case"undefined":return Je.undefined;case"string":return Je.string;case"number":return isNaN(e)?Je.nan:Je.number;case"boolean":return Je.boolean;case"function":return Je.function;case"bigint":return Je.bigint;case"symbol":return Je.symbol;case"object":return Array.isArray(e)?Je.array:e===null?Je.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Je.promise:typeof Map<"u"&&e instanceof Map?Je.map:typeof Set<"u"&&e instanceof Set?Je.set:typeof Date<"u"&&e instanceof Date?Je.date:Je.object;default:return Je.unknown}},Fe=qt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Mde=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),Uo=class I3 extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(s){return s.message},n={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(r(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),n}static assert(t){if(!(t instanceof I3))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,qt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Uo.create=e=>new Uo(e);var sf=(e,t)=>{let r;switch(e.code){case Fe.invalid_type:e.received===Je.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case Fe.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,qt.jsonStringifyReplacer)}`;break;case Fe.unrecognized_keys:r=`Unrecognized key(s) in object: ${qt.joinValues(e.keys,", ")}`;break;case Fe.invalid_union:r="Invalid input";break;case Fe.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${qt.joinValues(e.options)}`;break;case Fe.invalid_enum_value:r=`Invalid enum value. Expected ${qt.joinValues(e.options)}, received '${e.received}'`;break;case Fe.invalid_arguments:r="Invalid function arguments";break;case Fe.invalid_return_type:r="Invalid function return type";break;case Fe.invalid_date:r="Invalid date";break;case Fe.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:qt.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case Fe.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case Fe.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case Fe.custom:r="Invalid input";break;case Fe.invalid_intersection_types:r="Intersection results could not be merged";break;case Fe.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case Fe.not_finite:r="Number must be finite";break;default:r=t.defaultError,qt.assertNever(e)}return{message:r}},N3=sf;function Ode(e){N3=e}function eb(){return N3}var tb=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const l=n.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:t,defaultError:a}).message;return{...i,path:s,message:a}},Fde=[];function Ke(e,t){const r=eb(),n=tb({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===sf?void 0:sf].filter(i=>!!i)});e.common.issues.push(n)}var is=class M3{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const i of r){if(i.status==="aborted")return xt;i.status==="dirty"&&t.dirty(),n.push(i.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const i of r){const s=await i.key,o=await i.value;n.push({key:s,value:o})}return M3.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const i of r){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return xt;s.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(n[s.value]=o.value)}return{status:t.value,value:n}}},xt=Object.freeze({status:"aborted"}),np=e=>({status:"dirty",value:e}),Ai=e=>({status:"valid",value:e}),mA=e=>e.status==="aborted",vA=e=>e.status==="dirty",Kd=e=>e.status==="valid",fv=e=>typeof Promise<"u"&&e instanceof Promise;function rb(e,t,r,n){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function O3(e,t,r,n,i){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r}var at;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(at||(at={}));var $g,Ug,Ga=class{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},WL=(e,t)=>{if(Kd(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Uo(e.common.issues);return this._error=r,this._error}}};function Ot(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(o,a)=>{var l,c;const{message:u}=e;return o.code==="invalid_enum_value"?{message:u??a.defaultError}:typeof a.data>"u"?{message:(l=u??n)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(c=u??r)!==null&&c!==void 0?c:a.defaultError}},description:i}}var Lt=class{get description(){return this._def.description}_getType(e){return tl(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:tl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new is,ctx:{common:e.parent.common,data:e.data,parsedType:tl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(fv(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const n={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tl(e)},i=this._parseSync({data:e,path:n.path,parent:n});return WL(n,i)}"~validate"(e){var t,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tl(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return Kd(i)?{value:i.value}:{issues:n.common.issues}}catch(i){!((r=(t=i==null?void 0:i.message)===null||t===void 0?void 0:t.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>Kd(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tl(e)},n=this._parse({data:e,path:r.path,parent:r}),i=await(fv(n)?n:Promise.resolve(n));return WL(r,i)}refine(e,t){const r=n=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(n):t;return this._refinement((n,i)=>{const s=e(n),o=()=>i.addIssue({code:Fe.custom,...r(n)});return typeof Promise<"u"&&s instanceof Promise?s.then(a=>a?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(e,t){return this._refinement((r,n)=>e(r)?!0:(n.addIssue(typeof t=="function"?t(r,n):t),!1))}_refinement(e){return new Xo({schema:this,typeName:wt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return ka.create(this,this._def)}nullable(){return ou.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return qd.create(this)}promise(){return lf.create(this,this._def)}or(e){return bv.create([this,e],this._def)}and(e){return Sv.create(this,e,this._def)}transform(e){return new Xo({...Ot(this._def),schema:this,typeName:wt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Rv({...Ot(this._def),innerType:this,defaultValue:t,typeName:wt.ZodDefault})}brand(){return new EI({typeName:wt.ZodBranded,type:this,...Ot(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Tv({...Ot(this._def),innerType:this,catchValue:t,typeName:wt.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return PI.create(this,e)}readonly(){return Av.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Lde=/^c[^\s-]{8,}$/i,Gde=/^[0-9a-z]+$/,jde=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Bde=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Vde=/^[a-z0-9_-]{21}$/i,Hde=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,zde=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,$de=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ude="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",qP,Wde=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Kde=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,qde=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Yde=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Qde=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Xde=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,F3="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Zde=new RegExp(`^${F3}$`);function L3(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function Jde(e){return new RegExp(`^${L3(e)}$`)}function G3(e){let t=`${F3}T${L3(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function ehe(e,t){return!!((t==="v4"||!t)&&Wde.test(e)||(t==="v6"||!t)&&qde.test(e))}function the(e,t){if(!Hde.test(e))return!1;try{const[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||t&&i.alg!==t)}catch{return!1}}function rhe(e,t){return!!((t==="v4"||!t)&&Kde.test(e)||(t==="v6"||!t)&&Yde.test(e))}var of=class Wg extends Lt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Je.string){const s=this._getOrReturnCtx(t);return Ke(s,{code:Fe.invalid_type,expected:Je.string,received:s.parsedType}),xt}const n=new is;let i;for(const s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(i=this._getOrReturnCtx(t,i),Ke(i,{code:Fe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")t.data.length>s.value&&(i=this._getOrReturnCtx(t,i),Ke(i,{code:Fe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const o=t.data.length>s.value,a=t.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(t,i),o?Ke(i,{code:Fe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Ke(i,{code:Fe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")$de.test(t.data)||(i=this._getOrReturnCtx(t,i),Ke(i,{validation:"email",code:Fe.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")qP||(qP=new RegExp(Ude,"u")),qP.test(t.data)||(i=this._getOrReturnCtx(t,i),Ke(i,{validation:"emoji",code:Fe.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")Bde.test(t.data)||(i=this._getOrReturnCtx(t,i),Ke(i,{validation:"uuid",code:Fe.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")Vde.test(t.data)||(i=this._getOrReturnCtx(t,i),Ke(i,{validation:"nanoid",code:Fe.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")Lde.test(t.data)||(i=this._getOrReturnCtx(t,i),Ke(i,{validation:"cuid",code:Fe.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")Gde.test(t.data)||(i=this._getOrReturnCtx(t,i),Ke(i,{validation:"cuid2",code:Fe.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")jde.test(t.data)||(i=this._getOrReturnCtx(t,i),Ke(i,{validation:"ulid",code:Fe.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),Ke(i,{validation:"url",code:Fe.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),Ke(i,{validation:"regex",code:Fe.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(t,i),Ke(i,{code:Fe.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(i=this._getOrReturnCtx(t,i),Ke(i,{code:Fe.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(i=this._getOrReturnCtx(t,i),Ke(i,{code:Fe.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?G3(s).test(t.data)||(i=this._getOrReturnCtx(t,i),Ke(i,{code:Fe.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?Zde.test(t.data)||(i=this._getOrReturnCtx(t,i),Ke(i,{code:Fe.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?Jde(s).test(t.data)||(i=this._getOrReturnCtx(t,i),Ke(i,{code:Fe.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?zde.test(t.data)||(i=this._getOrReturnCtx(t,i),Ke(i,{validation:"duration",code:Fe.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?ehe(t.data,s.version)||(i=this._getOrReturnCtx(t,i),Ke(i,{validation:"ip",code:Fe.invalid_string,message:s.message}),n.dirty()):s.kind==="jwt"?the(t.data,s.alg)||(i=this._getOrReturnCtx(t,i),Ke(i,{validation:"jwt",code:Fe.invalid_string,message:s.message}),n.dirty()):s.kind==="cidr"?rhe(t.data,s.version)||(i=this._getOrReturnCtx(t,i),Ke(i,{validation:"cidr",code:Fe.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?Qde.test(t.data)||(i=this._getOrReturnCtx(t,i),Ke(i,{validation:"base64",code:Fe.invalid_string,message:s.message}),n.dirty()):s.kind==="base64url"?Xde.test(t.data)||(i=this._getOrReturnCtx(t,i),Ke(i,{validation:"base64url",code:Fe.invalid_string,message:s.message}),n.dirty()):qt.assertNever(s);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(i=>t.test(i),{validation:r,code:Fe.invalid_string,...at.errToObj(n)})}_addCheck(t){return new Wg({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...at.errToObj(t)})}url(t){return this._addCheck({kind:"url",...at.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...at.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...at.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...at.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...at.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...at.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...at.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...at.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...at.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...at.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...at.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...at.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!==null&&r!==void 0?r:!1,local:(n=t==null?void 0:t.local)!==null&&n!==void 0?n:!1,...at.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...at.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...at.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...at.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...at.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...at.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...at.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...at.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...at.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...at.errToObj(r)})}nonempty(t){return this.min(1,at.errToObj(t))}trim(){return new Wg({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Wg({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Wg({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};of.create=e=>{var t;return new of({checks:[],typeName:wt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ot(e)})};function nhe(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(e.toFixed(i).replace(".","")),o=parseInt(t.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}var gv=class yA extends Lt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Je.number){const s=this._getOrReturnCtx(t);return Ke(s,{code:Fe.invalid_type,expected:Je.number,received:s.parsedType}),xt}let n;const i=new is;for(const s of this._def.checks)s.kind==="int"?qt.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),Ke(n,{code:Fe.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),Ke(n,{code:Fe.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),Ke(n,{code:Fe.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?nhe(t.data,s.value)!==0&&(n=this._getOrReturnCtx(t,n),Ke(n,{code:Fe.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),Ke(n,{code:Fe.not_finite,message:s.message}),i.dirty()):qt.assertNever(s);return{status:i.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,at.toString(r))}gt(t,r){return this.setLimit("min",t,!1,at.toString(r))}lte(t,r){return this.setLimit("max",t,!0,at.toString(r))}lt(t,r){return this.setLimit("max",t,!1,at.toString(r))}setLimit(t,r,n,i){return new yA({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:at.toString(i)}]})}_addCheck(t){return new yA({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:at.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:at.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:at.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:at.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:at.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:at.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:at.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:at.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:at.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&qt.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}};gv.create=e=>new gv({checks:[],typeName:wt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ot(e)});var mv=class CA extends Lt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Je.bigint)return this._getInvalidInput(t);let n;const i=new is;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),Ke(n,{code:Fe.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),Ke(n,{code:Fe.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),Ke(n,{code:Fe.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):qt.assertNever(s);return{status:i.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return Ke(r,{code:Fe.invalid_type,expected:Je.bigint,received:r.parsedType}),xt}gte(t,r){return this.setLimit("min",t,!0,at.toString(r))}gt(t,r){return this.setLimit("min",t,!1,at.toString(r))}lte(t,r){return this.setLimit("max",t,!0,at.toString(r))}lt(t,r){return this.setLimit("max",t,!1,at.toString(r))}setLimit(t,r,n,i){return new CA({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:at.toString(i)}]})}_addCheck(t){return new CA({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:at.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:at.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:at.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:at.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:at.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};mv.create=e=>{var t;return new mv({checks:[],typeName:wt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ot(e)})};var vv=class extends Lt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Je.boolean){const r=this._getOrReturnCtx(e);return Ke(r,{code:Fe.invalid_type,expected:Je.boolean,received:r.parsedType}),xt}return Ai(e.data)}};vv.create=e=>new vv({typeName:wt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ot(e)});var yv=class j3 extends Lt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Je.date){const s=this._getOrReturnCtx(t);return Ke(s,{code:Fe.invalid_type,expected:Je.date,received:s.parsedType}),xt}if(isNaN(t.data.getTime())){const s=this._getOrReturnCtx(t);return Ke(s,{code:Fe.invalid_date}),xt}const n=new is;let i;for(const s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(i=this._getOrReturnCtx(t,i),Ke(i,{code:Fe.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(i=this._getOrReturnCtx(t,i),Ke(i,{code:Fe.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):qt.assertNever(s);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new j3({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:at.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:at.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}};yv.create=e=>new yv({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:wt.ZodDate,...Ot(e)});var nb=class extends Lt{_parse(e){if(this._getType(e)!==Je.symbol){const r=this._getOrReturnCtx(e);return Ke(r,{code:Fe.invalid_type,expected:Je.symbol,received:r.parsedType}),xt}return Ai(e.data)}};nb.create=e=>new nb({typeName:wt.ZodSymbol,...Ot(e)});var Cv=class extends Lt{_parse(e){if(this._getType(e)!==Je.undefined){const r=this._getOrReturnCtx(e);return Ke(r,{code:Fe.invalid_type,expected:Je.undefined,received:r.parsedType}),xt}return Ai(e.data)}};Cv.create=e=>new Cv({typeName:wt.ZodUndefined,...Ot(e)});var wv=class extends Lt{_parse(e){if(this._getType(e)!==Je.null){const r=this._getOrReturnCtx(e);return Ke(r,{code:Fe.invalid_type,expected:Je.null,received:r.parsedType}),xt}return Ai(e.data)}};wv.create=e=>new wv({typeName:wt.ZodNull,...Ot(e)});var af=class extends Lt{constructor(){super(...arguments),this._any=!0}_parse(e){return Ai(e.data)}};af.create=e=>new af({typeName:wt.ZodAny,...Ot(e)});var xd=class extends Lt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ai(e.data)}};xd.create=e=>new xd({typeName:wt.ZodUnknown,...Ot(e)});var Al=class extends Lt{_parse(e){const t=this._getOrReturnCtx(e);return Ke(t,{code:Fe.invalid_type,expected:Je.never,received:t.parsedType}),xt}};Al.create=e=>new Al({typeName:wt.ZodNever,...Ot(e)});var ib=class extends Lt{_parse(e){if(this._getType(e)!==Je.undefined){const r=this._getOrReturnCtx(e);return Ke(r,{code:Fe.invalid_type,expected:Je.void,received:r.parsedType}),xt}return Ai(e.data)}};ib.create=e=>new ib({typeName:wt.ZodVoid,...Ot(e)});var qd=class A0 extends Lt{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),i=this._def;if(r.parsedType!==Je.array)return Ke(r,{code:Fe.invalid_type,expected:Je.array,received:r.parsedType}),xt;if(i.exactLength!==null){const o=r.data.length>i.exactLength.value,a=r.data.length<i.exactLength.value;(o||a)&&(Ke(r,{code:o?Fe.too_big:Fe.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(Ke(r,{code:Fe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(Ke(r,{code:Fe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>i.type._parseAsync(new Ga(r,o,r.path,a)))).then(o=>is.mergeArray(n,o));const s=[...r.data].map((o,a)=>i.type._parseSync(new Ga(r,o,r.path,a)));return is.mergeArray(n,s)}get element(){return this._def.type}min(t,r){return new A0({...this._def,minLength:{value:t,message:at.toString(r)}})}max(t,r){return new A0({...this._def,maxLength:{value:t,message:at.toString(r)}})}length(t,r){return new A0({...this._def,exactLength:{value:t,message:at.toString(r)}})}nonempty(t){return this.min(1,t)}};qd.create=(e,t)=>new qd({type:e,minLength:null,maxLength:null,exactLength:null,typeName:wt.ZodArray,...Ot(t)});function Bh(e){if(e instanceof so){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=ka.create(Bh(n))}return new so({...e._def,shape:()=>t})}else return e instanceof qd?new qd({...e._def,type:Bh(e.element)}):e instanceof ka?ka.create(Bh(e.unwrap())):e instanceof ou?ou.create(Bh(e.unwrap())):e instanceof su?su.create(e.items.map(t=>Bh(t))):e}var so=class xo extends Lt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=qt.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==Je.object){const c=this._getOrReturnCtx(t);return Ke(c,{code:Fe.invalid_type,expected:Je.object,received:c.parsedType}),xt}const{status:n,ctx:i}=this._processInputParams(t),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Al&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],d=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Ga(i,d,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof Al){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")a.length>0&&(Ke(i,{code:Fe.unrecognized_keys,keys:a}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Ga(i,d,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,p=await u.value;c.push({key:d,value:p,alwaysSet:u.alwaysSet})}return c}).then(c=>is.mergeObjectSync(n,c)):is.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(t){return at.errToObj,new xo({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var i,s,o,a;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=at.errToObj(t).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new xo({...this._def,unknownKeys:"strip"})}passthrough(){return new xo({...this._def,unknownKeys:"passthrough"})}extend(t){return new xo({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new xo({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:wt.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new xo({...this._def,catchall:t})}pick(t){const r={};return qt.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new xo({...this._def,shape:()=>r})}omit(t){const r={};return qt.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new xo({...this._def,shape:()=>r})}deepPartial(){return Bh(this)}partial(t){const r={};return qt.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];t&&!t[n]?r[n]=i:r[n]=i.optional()}),new xo({...this._def,shape:()=>r})}required(t){const r={};return qt.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof ka;)s=s._def.innerType;r[n]=s}}),new xo({...this._def,shape:()=>r})}keyof(){return U3(qt.objectKeys(this.shape))}};so.create=(e,t)=>new so({shape:()=>e,unknownKeys:"strip",catchall:Al.create(),typeName:wt.ZodObject,...Ot(t)});so.strictCreate=(e,t)=>new so({shape:()=>e,unknownKeys:"strict",catchall:Al.create(),typeName:wt.ZodObject,...Ot(t)});so.lazycreate=(e,t)=>new so({shape:e,unknownKeys:"strip",catchall:Al.create(),typeName:wt.ZodObject,...Ot(t)});var bv=class extends Lt{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function n(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const s=i.map(o=>new Uo(o.ctx.common.issues));return Ke(t,{code:Fe.invalid_union,unionErrors:s}),xt}if(t.common.async)return Promise.all(r.map(async i=>{const s={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:s}),ctx:s}})).then(n);{let i;const s=[];for(const a of r){const l={...t,common:{...t.common,issues:[]},parent:null},c=a._parseSync({data:t.data,path:t.path,parent:l});if(c.status==="valid")return c;c.status==="dirty"&&!i&&(i={result:c,ctx:l}),l.common.issues.length&&s.push(l.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const o=s.map(a=>new Uo(a));return Ke(t,{code:Fe.invalid_union,unionErrors:o}),xt}}get options(){return this._def.options}};bv.create=(e,t)=>new bv({options:e,typeName:wt.ZodUnion,...Ot(t)});var Xa=e=>e instanceof xv?Xa(e.schema):e instanceof Xo?Xa(e.innerType()):e instanceof Ev?[e.value]:e instanceof xy?e.options:e instanceof Pv?qt.objectValues(e.enum):e instanceof Rv?Xa(e._def.innerType):e instanceof Cv?[void 0]:e instanceof wv?[null]:e instanceof ka?[void 0,...Xa(e.unwrap())]:e instanceof ou?[null,...Xa(e.unwrap())]:e instanceof EI||e instanceof Av?Xa(e.unwrap()):e instanceof Tv?Xa(e._def.innerType):[],B3=class V3 extends Lt{_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Je.object)return Ke(r,{code:Fe.invalid_type,expected:Je.object,received:r.parsedType}),xt;const n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(Ke(r,{code:Fe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),xt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){const i=new Map;for(const s of r){const o=Xa(s.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(a)}`);i.set(a,s)}}return new V3({typeName:wt.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:i,...Ot(n)})}};function wA(e,t){const r=tl(e),n=tl(t);if(e===t)return{valid:!0,data:e};if(r===Je.object&&n===Je.object){const i=qt.objectKeys(t),s=qt.objectKeys(e).filter(a=>i.indexOf(a)!==-1),o={...e,...t};for(const a of s){const l=wA(e[a],t[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(r===Je.array&&n===Je.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let s=0;s<e.length;s++){const o=e[s],a=t[s],l=wA(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===Je.date&&n===Je.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var Sv=class extends Lt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(i,s)=>{if(mA(i)||mA(s))return xt;const o=wA(i.value,s.value);return o.valid?((vA(i)||vA(s))&&t.dirty(),{status:t.value,value:o.data}):(Ke(r,{code:Fe.invalid_intersection_types}),xt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,s])=>n(i,s)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};Sv.create=(e,t,r)=>new Sv({left:e,right:t,typeName:wt.ZodIntersection,...Ot(r)});var su=class H3 extends Lt{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Je.array)return Ke(n,{code:Fe.invalid_type,expected:Je.array,received:n.parsedType}),xt;if(n.data.length<this._def.items.length)return Ke(n,{code:Fe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),xt;!this._def.rest&&n.data.length>this._def.items.length&&(Ke(n,{code:Fe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Ga(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(s).then(o=>is.mergeArray(r,o)):is.mergeArray(r,s)}get items(){return this._def.items}rest(t){return new H3({...this._def,rest:t})}};su.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new su({items:e,typeName:wt.ZodTuple,rest:null,...Ot(t)})};var z3=class bA extends Lt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Je.object)return Ke(n,{code:Fe.invalid_type,expected:Je.object,received:n.parsedType}),xt;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in n.data)i.push({key:s._parse(new Ga(n,a,n.path,a)),value:o._parse(new Ga(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?is.mergeObjectAsync(r,i):is.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof Lt?new bA({keyType:t,valueType:r,typeName:wt.ZodRecord,...Ot(n)}):new bA({keyType:of.create(),valueType:t,typeName:wt.ZodRecord,...Ot(r)})}},sb=class extends Lt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Je.map)return Ke(r,{code:Fe.invalid_type,expected:Je.map,received:r.parsedType}),xt;const n=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(([o,a],l)=>({key:n._parse(new Ga(r,o,r.path,[l,"key"])),value:i._parse(new Ga(r,a,r.path,[l,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const a of s){const l=await a.key,c=await a.value;if(l.status==="aborted"||c.status==="aborted")return xt;(l.status==="dirty"||c.status==="dirty")&&t.dirty(),o.set(l.value,c.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const a of s){const l=a.key,c=a.value;if(l.status==="aborted"||c.status==="aborted")return xt;(l.status==="dirty"||c.status==="dirty")&&t.dirty(),o.set(l.value,c.value)}return{status:t.value,value:o}}}};sb.create=(e,t,r)=>new sb({valueType:t,keyType:e,typeName:wt.ZodMap,...Ot(r)});var ob=class SA extends Lt{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Je.set)return Ke(n,{code:Fe.invalid_type,expected:Je.set,received:n.parsedType}),xt;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(Ke(n,{code:Fe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(Ke(n,{code:Fe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return xt;u.status==="dirty"&&r.dirty(),c.add(u.value)}return{status:r.value,value:c}}const a=[...n.data.values()].map((l,c)=>s._parse(new Ga(n,l,n.path,c)));return n.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(t,r){return new SA({...this._def,minSize:{value:t,message:at.toString(r)}})}max(t,r){return new SA({...this._def,maxSize:{value:t,message:at.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}};ob.create=(e,t)=>new ob({valueType:e,minSize:null,maxSize:null,typeName:wt.ZodSet,...Ot(t)});var $3=class _0 extends Lt{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Je.function)return Ke(r,{code:Fe.invalid_type,expected:Je.function,received:r.parsedType}),xt;function n(a,l){return tb({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,eb(),sf].filter(c=>!!c),issueData:{code:Fe.invalid_arguments,argumentsError:l}})}function i(a,l){return tb({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,eb(),sf].filter(c=>!!c),issueData:{code:Fe.invalid_return_type,returnTypeError:l}})}const s={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof lf){const a=this;return Ai(async function(...l){const c=new Uo([]),u=await a._def.args.parseAsync(l,s).catch(f=>{throw c.addIssue(n(l,f)),c}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,s).catch(f=>{throw c.addIssue(i(d,f)),c})})}else{const a=this;return Ai(function(...l){const c=a._def.args.safeParse(l,s);if(!c.success)throw new Uo([n(l,c.error)]);const u=Reflect.apply(o,this,c.data),d=a._def.returns.safeParse(u,s);if(!d.success)throw new Uo([i(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new _0({...this._def,args:su.create(t).rest(xd.create())})}returns(t){return new _0({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new _0({args:t||su.create([]).rest(xd.create()),returns:r||xd.create(),typeName:wt.ZodFunction,...Ot(n)})}},xv=class extends Lt{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};xv.create=(e,t)=>new xv({getter:e,typeName:wt.ZodLazy,...Ot(t)});var Ev=class extends Lt{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Ke(t,{received:t.data,code:Fe.invalid_literal,expected:this._def.value}),xt}return{status:"valid",value:e.data}}get value(){return this._def.value}};Ev.create=(e,t)=>new Ev({value:e,typeName:wt.ZodLiteral,...Ot(t)});function U3(e,t){return new xy({values:e,typeName:wt.ZodEnum,...Ot(t)})}var xy=class xA extends Lt{constructor(){super(...arguments),$g.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return Ke(r,{expected:qt.joinValues(n),received:r.parsedType,code:Fe.invalid_type}),xt}if(rb(this,$g)||O3(this,$g,new Set(this._def.values)),!rb(this,$g).has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return Ke(r,{received:r.data,code:Fe.invalid_enum_value,options:n}),xt}return Ai(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return xA.create(t,{...this._def,...r})}exclude(t,r=this._def){return xA.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}};$g=new WeakMap;xy.create=U3;var Pv=class extends Lt{constructor(){super(...arguments),Ug.set(this,void 0)}_parse(e){const t=qt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Je.string&&r.parsedType!==Je.number){const n=qt.objectValues(t);return Ke(r,{expected:qt.joinValues(n),received:r.parsedType,code:Fe.invalid_type}),xt}if(rb(this,Ug)||O3(this,Ug,new Set(qt.getValidEnumValues(this._def.values))),!rb(this,Ug).has(e.data)){const n=qt.objectValues(t);return Ke(r,{received:r.data,code:Fe.invalid_enum_value,options:n}),xt}return Ai(e.data)}get enum(){return this._def.values}};Ug=new WeakMap;Pv.create=(e,t)=>new Pv({values:e,typeName:wt.ZodNativeEnum,...Ot(t)});var lf=class extends Lt{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Je.promise&&t.common.async===!1)return Ke(t,{code:Fe.invalid_type,expected:Je.promise,received:t.parsedType}),xt;const r=t.parsedType===Je.promise?t.data:Promise.resolve(t.data);return Ai(r.then(n=>this._def.type.parseAsync(n,{path:t.path,errorMap:t.common.contextualErrorMap})))}};lf.create=(e,t)=>new lf({type:e,typeName:wt.ZodPromise,...Ot(t)});var Xo=class extends Lt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===wt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:s=>{Ke(r,s),s.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){const s=n.transform(r.data,i);if(r.common.async)return Promise.resolve(s).then(async o=>{if(t.value==="aborted")return xt;const a=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return a.status==="aborted"?xt:a.status==="dirty"||t.value==="dirty"?np(a.value):a});{if(t.value==="aborted")return xt;const o=this._def.schema._parseSync({data:s,path:r.path,parent:r});return o.status==="aborted"?xt:o.status==="dirty"||t.value==="dirty"?np(o.value):o}}if(n.type==="refinement"){const s=o=>{const a=n.refinement(o,i);if(r.common.async)return Promise.resolve(a);if(a instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?xt:(o.status==="dirty"&&t.dirty(),s(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?xt:(o.status==="dirty"&&t.dirty(),s(o.value).then(()=>({status:t.value,value:o.value}))))}if(n.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Kd(s))return s;const o=n.transform(s.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>Kd(s)?Promise.resolve(n.transform(s.value,i)).then(o=>({status:t.value,value:o})):s);qt.assertNever(n)}};Xo.create=(e,t,r)=>new Xo({schema:e,typeName:wt.ZodEffects,effect:t,...Ot(r)});Xo.createWithPreprocess=(e,t,r)=>new Xo({schema:t,effect:{type:"preprocess",transform:e},typeName:wt.ZodEffects,...Ot(r)});var ka=class extends Lt{_parse(e){return this._getType(e)===Je.undefined?Ai(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ka.create=(e,t)=>new ka({innerType:e,typeName:wt.ZodOptional,...Ot(t)});var ou=class extends Lt{_parse(e){return this._getType(e)===Je.null?Ai(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ou.create=(e,t)=>new ou({innerType:e,typeName:wt.ZodNullable,...Ot(t)});var Rv=class extends Lt{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===Je.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};Rv.create=(e,t)=>new Rv({innerType:e,typeName:wt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ot(t)});var Tv=class extends Lt{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return fv(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Uo(r.common.issues)},input:r.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Uo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};Tv.create=(e,t)=>new Tv({innerType:e,typeName:wt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ot(t)});var ab=class extends Lt{_parse(e){if(this._getType(e)!==Je.nan){const r=this._getOrReturnCtx(e);return Ke(r,{code:Fe.invalid_type,expected:Je.nan,received:r.parsedType}),xt}return{status:"valid",value:e.data}}};ab.create=e=>new ab({typeName:wt.ZodNaN,...Ot(e)});var ihe=Symbol("zod_brand"),EI=class extends Lt{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}},PI=class W3 extends Lt{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?xt:s.status==="dirty"?(r.dirty(),np(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?xt:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(t,r){return new W3({in:t,out:r,typeName:wt.ZodPipeline})}},Av=class extends Lt{_parse(e){const t=this._def.innerType._parse(e),r=n=>(Kd(n)&&(n.value=Object.freeze(n.value)),n);return fv(t)?t.then(n=>r(n)):r(t)}unwrap(){return this._def.innerType}};Av.create=(e,t)=>new Av({innerType:e,typeName:wt.ZodReadonly,...Ot(t)});function KL(e,t){const r=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof r=="string"?{message:r}:r}function K3(e,t={},r){return e?af.create().superRefine((n,i)=>{var s,o;const a=e(n);if(a instanceof Promise)return a.then(l=>{var c,u;if(!l){const d=KL(t,n),p=(u=(c=d.fatal)!==null&&c!==void 0?c:r)!==null&&u!==void 0?u:!0;i.addIssue({code:"custom",...d,fatal:p})}});if(!a){const l=KL(t,n),c=(o=(s=l.fatal)!==null&&s!==void 0?s:r)!==null&&o!==void 0?o:!0;i.addIssue({code:"custom",...l,fatal:c})}}):af.create()}var she={object:so.lazycreate},wt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(wt||(wt={}));var ohe=(e,t={message:`Input not instance of ${e.name}`})=>K3(r=>r instanceof e,t),q3=of.create,Y3=gv.create,ahe=ab.create,lhe=mv.create,Q3=vv.create,che=yv.create,uhe=nb.create,dhe=Cv.create,hhe=wv.create,phe=af.create,fhe=xd.create,ghe=Al.create,mhe=ib.create,vhe=qd.create,yhe=so.create,Che=so.strictCreate,whe=bv.create,bhe=B3.create,She=Sv.create,xhe=su.create,Ehe=z3.create,Phe=sb.create,Rhe=ob.create,The=$3.create,Ahe=xv.create,_he=Ev.create,Dhe=xy.create,khe=Pv.create,Ihe=lf.create,qL=Xo.create,Nhe=ka.create,Mhe=ou.create,Ohe=Xo.createWithPreprocess,Fhe=PI.create,Lhe=()=>q3().optional(),Ghe=()=>Y3().optional(),jhe=()=>Q3().optional(),Bhe={string:e=>of.create({...e,coerce:!0}),number:e=>gv.create({...e,coerce:!0}),boolean:e=>vv.create({...e,coerce:!0}),bigint:e=>mv.create({...e,coerce:!0}),date:e=>yv.create({...e,coerce:!0})},Vhe=xt,Bn=Object.freeze({__proto__:null,defaultErrorMap:sf,setErrorMap:Ode,getErrorMap:eb,makeIssue:tb,EMPTY_PATH:Fde,addIssueToContext:Ke,ParseStatus:is,INVALID:xt,DIRTY:np,OK:Ai,isAborted:mA,isDirty:vA,isValid:Kd,isAsync:fv,get util(){return qt},get objectUtil(){return gA},ZodParsedType:Je,getParsedType:tl,ZodType:Lt,datetimeRegex:G3,ZodString:of,ZodNumber:gv,ZodBigInt:mv,ZodBoolean:vv,ZodDate:yv,ZodSymbol:nb,ZodUndefined:Cv,ZodNull:wv,ZodAny:af,ZodUnknown:xd,ZodNever:Al,ZodVoid:ib,ZodArray:qd,ZodObject:so,ZodUnion:bv,ZodDiscriminatedUnion:B3,ZodIntersection:Sv,ZodTuple:su,ZodRecord:z3,ZodMap:sb,ZodSet:ob,ZodFunction:$3,ZodLazy:xv,ZodLiteral:Ev,ZodEnum:xy,ZodNativeEnum:Pv,ZodPromise:lf,ZodEffects:Xo,ZodTransformer:Xo,ZodOptional:ka,ZodNullable:ou,ZodDefault:Rv,ZodCatch:Tv,ZodNaN:ab,BRAND:ihe,ZodBranded:EI,ZodPipeline:PI,ZodReadonly:Av,custom:K3,Schema:Lt,ZodSchema:Lt,late:she,get ZodFirstPartyTypeKind(){return wt},coerce:Bhe,any:phe,array:vhe,bigint:lhe,boolean:Q3,date:che,discriminatedUnion:bhe,effect:qL,enum:Dhe,function:The,instanceof:ohe,intersection:She,lazy:Ahe,literal:_he,map:Phe,nan:ahe,nativeEnum:khe,never:ghe,null:hhe,nullable:Mhe,number:Y3,object:yhe,oboolean:jhe,onumber:Ghe,optional:Nhe,ostring:Lhe,pipeline:Fhe,preprocess:Ohe,promise:Ihe,record:Ehe,set:Rhe,strictObject:Che,string:q3,symbol:uhe,transformer:qL,tuple:xhe,undefined:dhe,union:whe,unknown:fhe,void:mhe,NEVER:Vhe,ZodIssueCode:Fe,quotelessJson:Mde,ZodError:Uo}),YL={name:"@imgly/background-removal",version:"1.7.0"},Hhe=Bn.object({publicPath:Bn.string().optional().describe("The public path to the wasm files and the onnx model.").default("https://staticimgly.com/@imgly/background-removal-data/${PACKAGE_VERSION}/dist/").transform(e=>e.replace("${PACKAGE_NAME}",YL.name).replace("${PACKAGE_VERSION}",YL.version)),debug:Bn.boolean().default(!1).describe("Whether to enable debug logging."),rescale:Bn.boolean().default(!0).describe("Whether to rescale the image."),device:Bn.enum(["cpu","gpu"]).default("cpu").describe("The device to run the model on."),proxyToWorker:Bn.boolean().default(!1).describe("Whether to proxy inference to a web worker."),fetchArgs:Bn.any().default({}).describe("Arguments to pass to fetch when loading the model."),progress:Bn.function().args(Bn.string(),Bn.number(),Bn.number()).returns(Bn.void()).describe("Progress callback.").optional(),model:Bn.preprocess(e=>{switch(e){case"large":return"isnet";case"small":return"isnet_quint8";case"medium":return"isnet_fp16";default:return e}},Bn.enum(["isnet","isnet_fp16","isnet_quint8"])).default("medium"),output:Bn.object({format:Bn.enum(["image/png","image/jpeg","image/webp","image/x-rgba8","image/x-alpha8"]).default("image/png"),quality:Bn.number().default(.8)}).default({})}).default({}).transform(e=>(e.debug&&console.log("Config:",e),e.debug&&!e.progress&&(e.progress=e.progress??((t,r,n)=>{console.debug(`Downloading ${t}: ${r} of ${n}`)}),crossOriginIsolated||e.debug&&console.debug("Cross-Origin-Isolated is not enabled. Performance will be degraded. Please see  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer.")),e));function zhe(e){return Hhe.parse(e??{})}var $he=vx(yx());async function Uhe(e){e.debug&&console.debug("Loading model...",e.model);const t=e.model,n=await(await D3(`/models/${t}`,e)).arrayBuffer();return await Ide(n,e)}async function Whe(e){e=zhe(e);const t=await Uhe(e);return{config:e,session:{base:t}}}async function Khe(e,t,r){const[i,s,o]=e.shape,a=!1;let l=$L(e,1024,1024,a);const c=Tde(l);let u=await Nde(r.base,[["input",c]],["output"],t),d=(0,$he.default)(u[0].data,[1024,1024,1]),p=_de(d);return t.rescale?(p=$L(p,s,i,a),[p,e]):[p,l]}var qhe=wde(Whe,e=>JSON.stringify(e));async function Yhe(e,t){var p,f,m,y;const{config:r,session:n}=await qhe(t);r.progress&&r.progress("compute:decode",0,4);const i=await Ade(e,r);(p=r.progress)==null||p.call(r,"compute:inference",1,4);const[s,o]=await Khe(i,r,n);(f=r.progress)==null||f.call(r,"compute:mask",2,4);const a=o,[l,c]=a.shape,u=l*c;for(let C=0;C<u;C+=1)a.data[4*C+3]=s.data[C];(m=r.progress)==null||m.call(r,"compute:encode",3,4);const d=await Sde(a,r.output.quality,r.output.format);return(y=r.progress)==null||y.call(r,"compute:encode",4,4),d}/*! Bundled license information:

is-buffer/index.js:
  (*!
   * Determine if an object is a Buffer
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
*/const X3="https://rembg-service-128150759188.us-central1.run.app";async function Qhe(e){try{const t=await fetch(`${X3}/remove-background`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:e})});if(!t.ok)throw new Error(`Cloud service error: ${t.status}`);const r=await t.json();if(!r.success)throw new Error(r.error||"Unknown error");const n=r.imageData.split(",")[1],i=atob(n),s=new Uint8Array(i.length);for(let l=0;l<i.length;l++)s[l]=i.charCodeAt(l);const o=new Blob([s],{type:"image/png"});return{success:!0,processedUrl:URL.createObjectURL(o),blob:o,method:"cloud"}}catch(t){return console.error("Cloud background removal error:",t),{success:!1,error:t instanceof Error?t.message:String(t),method:"cloud"}}}async function Xhe(e,t){try{const r=await fetch(e);if(!r.ok)throw new Error(`Failed to fetch image: ${r.status}`);const n=await r.blob(),i=await Yhe(n,{progress:(o,a,l)=>{t&&l>0&&t(Math.round(a/l*100))}});return{success:!0,processedUrl:URL.createObjectURL(i),blob:i,method:"browser"}}catch(r){return console.error("Browser background removal error:",r),{success:!1,error:r instanceof Error?r.message:String(r),method:"browser"}}}async function Z3(e,t,r){{const n=await Qhe(e);if(n.success)return n;console.warn("Cloud processing failed, falling back to browser:",n.error)}return Xhe(e,t)}async function Zhe(){try{return(await(await fetch(X3,{method:"GET"})).json()).status==="healthy"}catch{return!1}}function Jhe(e){return new Promise((t,r)=>{const n=new FileReader;n.onloadend=()=>t(n.result),n.onerror=r,n.readAsDataURL(e)})}function Ou(e,t,r){if(t===null&&r===null)return{field:e,ours:t,theirs:r,difference:null,theirsIsBetter:!1,matches:!0};if(t===null&&r!==null)return{field:e,ours:t,theirs:r,difference:null,theirsIsBetter:!0,matches:!1};if(t!==null&&r===null)return{field:e,ours:t,theirs:r,difference:null,theirsIsBetter:!1,matches:!1};const n=t!==0?Math.abs((r-t)/t*100):r!==0?100:0,i=n<10;return{field:e,ours:t,theirs:r,difference:Math.round(n),theirsIsBetter:!1,matches:i}}function epe(e){const t=["calories","protein","carbs","fat","fiber","sugar","sodium"],r=e.filter(i=>t.includes(i.field));if(r.length===0)return 0;const n=r.filter(i=>i.matches).length;return Math.round(n/r.length*100)}const tpe=({onClose:e,onImport:t,selectedFoods:r=[]})=>{const[n,i]=v.useState(""),[s,o]=v.useState(!1),[a,l]=v.useState(null),[c,u]=v.useState(!1),[d,p]=v.useState([]),[f,m]=v.useState(r.length>0),[y,C]=v.useState(0),[w,b]=v.useState(null);v.useEffect(()=>{r.length>0&&x()},[]);const x=async()=>{const T=r.filter(Q=>Q.barcode);if(T.length===0){p(r.map(Q=>({food:Q,offResult:null,offTransformed:null,isLoading:!1,error:"No barcode",comparison:[],hasImage:!1,hasBetterImage:!1,nutritionMatches:!1,nutritionScore:0,isApplying:!1,applied:"none",isCleaningImage:!1,cleaningProgress:0,cleanedImageUrl:null,cleanedImageBlob:null})));return}p(r.map(Q=>({food:Q,offResult:null,offTransformed:null,isLoading:!!Q.barcode,error:Q.barcode?void 0:"No barcode",comparison:[],hasImage:!1,hasBetterImage:!1,nutritionMatches:!1,nutritionScore:0,isApplying:!1,applied:"none",isCleaningImage:!1,cleaningProgress:0,cleanedImageUrl:null,cleanedImageBlob:null})));let O=0;for(const Q of r)if(Q.barcode){try{const X=await QF(Q.barcode,"UK");if(X.product){const B=LP(X.product),W=[Ou("calories",Q.calories,B.calories),Ou("protein",Q.protein,B.protein),Ou("carbs",Q.carbs,B.carbs),Ou("fat",Q.fat,B.fat),Ou("fiber",Q.fiber,B.fiber),Ou("sugar",Q.sugar,B.sugar),Ou("sodium",Q.sodium,B.sodium)],ne=epe(W),J=!!X.bestImageUrl,ye=J&&(!Q.imageUrl||Q.imageUrl.includes("placeholder"));p(Pe=>Pe.map(ue=>ue.food._id===Q._id?{...ue,offResult:X,offTransformed:B,isLoading:!1,comparison:W,hasImage:J,hasBetterImage:ye,nutritionMatches:ne>=70,nutritionScore:ne}:ue))}else p(B=>B.map(W=>W.food._id===Q._id?{...W,offResult:X,isLoading:!1,error:"Not found in OFF"}:W))}catch(X){p(B=>B.map(W=>W.food._id===Q._id?{...W,isLoading:!1,error:String(X)}:W))}O++,C(Math.round(O/T.length*100))}},E=async T=>{var O;if((O=T.offResult)!=null&&O.bestImageUrl){p(Q=>Q.map(X=>X.food._id===T.food._id?{...X,isApplying:!0}:X));try{await zg(T.food,{imageUrl:T.offResult.bestImageUrl}),p(Q=>Q.map(X=>X.food._id===T.food._id?{...X,isApplying:!1,applied:"image"}:X))}catch(Q){console.error("Failed to apply image:",Q),alert(`Failed to apply image: ${Q}`),p(X=>X.map(B=>B.food._id===T.food._id?{...B,isApplying:!1}:B))}}},I=async T=>{if(T.offTransformed){p(O=>O.map(Q=>Q.food._id===T.food._id?{...Q,isApplying:!0}:Q));try{await zg(T.food,{calories:T.offTransformed.calories,protein:T.offTransformed.protein,carbs:T.offTransformed.carbs,fat:T.offTransformed.fat,saturatedFat:T.offTransformed.saturatedFat,fiber:T.offTransformed.fiber,sugar:T.offTransformed.sugar,sodium:T.offTransformed.sodium,salt:T.offTransformed.salt}),p(O=>O.map(Q=>Q.food._id===T.food._id?{...Q,isApplying:!1,applied:"nutrition"}:Q))}catch(O){console.error("Failed to apply nutrition:",O),alert(`Failed to apply nutrition: ${O}`),p(Q=>Q.map(X=>X.food._id===T.food._id?{...X,isApplying:!1}:X))}}},k=async T=>{if(!(!T.offTransformed||!T.offResult)){p(O=>O.map(Q=>Q.food._id===T.food._id?{...Q,isApplying:!0}:Q));try{await zg(T.food,{imageUrl:T.offResult.bestImageUrl||T.food.imageUrl,calories:T.offTransformed.calories,protein:T.offTransformed.protein,carbs:T.offTransformed.carbs,fat:T.offTransformed.fat,saturatedFat:T.offTransformed.saturatedFat,fiber:T.offTransformed.fiber,sugar:T.offTransformed.sugar,sodium:T.offTransformed.sodium,salt:T.offTransformed.salt,ingredientsText:T.offTransformed.ingredientsText||T.food.ingredientsText}),p(O=>O.map(Q=>Q.food._id===T.food._id?{...Q,isApplying:!1,applied:"all"}:Q))}catch(O){console.error("Failed to apply all:",O),alert(`Failed to apply changes: ${O}`),p(Q=>Q.map(X=>X.food._id===T.food._id?{...X,isApplying:!1}:X))}}},P=async T=>{var Q;const O=((Q=T.offResult)==null?void 0:Q.bestImageUrl)||T.food.imageUrl;if(O){p(X=>X.map(B=>B.food._id===T.food._id?{...B,isCleaningImage:!0,cleaningProgress:0}:B));try{const X=await Z3(O,B=>{p(W=>W.map(ne=>ne.food._id===T.food._id?{...ne,cleaningProgress:B}:ne))});if(X.success&&X.processedUrl&&X.blob)p(B=>B.map(W=>W.food._id===T.food._id?{...W,isCleaningImage:!1,cleanedImageUrl:X.processedUrl,cleanedImageBlob:X.blob}:W));else throw new Error(X.error||"Failed to process image")}catch(X){console.error("Failed to clean image:",X),alert(`Failed to clean image: ${X}`),p(B=>B.map(W=>W.food._id===T.food._id?{...W,isCleaningImage:!1}:W))}}},A=async T=>{if(T.cleanedImageBlob){p(O=>O.map(Q=>Q.food._id===T.food._id?{...Q,isApplying:!0}:Q));try{const O=await Jhe(T.cleanedImageBlob);await zg(T.food,{imageUrl:O}),p(Q=>Q.map(X=>X.food._id===T.food._id?{...X,isApplying:!1,applied:"image"}:X))}catch(O){console.error("Failed to apply cleaned image:",O),alert(`Failed to apply cleaned image: ${O}`),p(Q=>Q.map(X=>X.food._id===T.food._id?{...X,isApplying:!1}:X))}}},D=v.useCallback(async()=>{if(n.trim()){o(!0),l(null);try{const T=await QF(n.trim(),"UK");l(T)}catch(T){console.error("Lookup error:",T),l({product:null,isUKProduct:!1,ukConfidenceScore:0,ukSignals:[],bestImageUrl:null,imageConfidenceScore:0,isRegionMatch:!1,error:String(T)})}finally{o(!1)}}},[n]),L=v.useCallback(async()=>{var T,O,Q;if(a!=null&&a.product){u(!0);try{const X=LP(a.product),B=await Pce({objectID:`off_${a.product.code}`,name:X.name,brandName:X.brandName,barcode:X.barcode,barcodes:[a.product.code],ingredients:((T=X.ingredientsText)==null?void 0:T.split(/,\s*/))||[],ingredientsText:X.ingredientsText,calories:X.calories,protein:X.protein,carbs:X.carbs,fat:X.fat,saturatedFat:X.saturatedFat,fiber:X.fiber,sugar:X.sugar,sodium:X.sodium,salt:X.salt,servingDescription:a.product.serving_size||null,servingSizeG:null,isPerUnit:!1,suggestedServingUnit:null,suggestedServingSize:null,suggestedServingDescription:null,servingTypes:null,portions:null,isVerified:!1,verifiedBy:null,verifiedAt:null,imageUrl:a.bestImageUrl,category:((Q=(O=a.product.categories)==null?void 0:O.split(",")[0])==null?void 0:Q.trim())||null,source:"OpenFoodFacts",createdAt:new Date,updatedAt:new Date});B.success?(t(),e(),i(""),l(null)):alert(`Failed to import: ${B.error}`)}catch(X){console.error("Import error:",X),alert(`Import error: ${X}`)}finally{u(!1)}}},[a,t,e]),M=v.useCallback(T=>{T.key==="Enter"&&n.trim()&&D(),T.key==="Escape"&&e()},[n,D,e]);return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"OpenFoodFacts Lookup"}),h.jsx("p",{className:"text-sm text-gray-500",children:f?`Checking ${r.length} selected item${r.length>1?"s":""} for UK products`:"Smart UK product detection"})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[r.length>0&&h.jsx("button",{onClick:()=>m(!f),className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50",children:f?"Manual Search":`Back to Selected (${r.length})`}),h.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),f?h.jsxs(h.Fragment,{children:[y>0&&y<100&&h.jsx("div",{className:"px-6 py-2 bg-gray-50 border-b border-gray-100",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:h.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all",style:{width:`${y}%`}})}),h.jsxs("span",{className:"text-sm text-gray-500",children:[y,"%"]})]})}),h.jsx("div",{className:"flex-1 overflow-y-auto divide-y divide-gray-200",children:d.map(T=>{var O,Q,X,B;return h.jsx("div",{className:"p-4",children:h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Ours"}),T.food.imageUrl?h.jsx("img",{src:T.food.imageUrl,alt:"",className:"w-16 h-16 object-cover rounded border border-gray-200"}):h.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded border border-gray-200 flex items-center justify-center text-gray-400 text-xs",children:"None"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"OFF"}),(O=T.offResult)!=null&&O.bestImageUrl?h.jsx("img",{src:T.offResult.bestImageUrl,alt:"",className:"w-16 h-16 object-cover rounded border-2 border-green-400"}):h.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded border border-gray-200 flex items-center justify-center text-gray-400 text-xs",children:T.isLoading?"...":"None"})]}),(T.cleanedImageUrl||T.isCleaningImage)&&h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-xs text-orange-500 mb-1 font-medium",children:"Cleaned"}),T.cleanedImageUrl?h.jsx("img",{src:T.cleanedImageUrl,alt:"Cleaned",className:"w-16 h-16 object-contain rounded border-2 border-orange-400 bg-white",style:{imageRendering:"auto"}}):h.jsx("div",{className:"w-16 h-16 bg-orange-50 rounded border-2 border-orange-200 flex items-center justify-center",children:h.jsxs("svg",{className:"w-5 h-5 animate-spin text-orange-500",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})})]})]}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-start justify-between gap-2",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium text-gray-900",children:T.food.name}),T.food.brandName&&h.jsx("p",{className:"text-sm text-gray-500",children:T.food.brandName}),h.jsx("p",{className:"text-xs text-gray-400 font-mono mt-1",children:T.food.barcode||"No barcode"})]}),h.jsxs("div",{className:"flex flex-col items-end gap-1",children:[T.isLoading?h.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full",children:[h.jsxs("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Searching"]}):T.error?h.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full",children:T.error}):(Q=T.offResult)!=null&&Q.product?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${T.offResult.isUKProduct?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:T.offResult.isUKProduct?` UK (${T.offResult.ukConfidenceScore}%)`:` Non-UK (${T.offResult.ukConfidenceScore}%)`}),h.jsxs("span",{className:`px-2 py-1 text-xs rounded-full ${T.nutritionScore>=70?"bg-green-100 text-green-700":T.nutritionScore>=40?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:["Nutrition: ",T.nutritionScore,"% match"]}),T.hasBetterImage&&h.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded-full",children:"Better image available"})]}):h.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-500 rounded-full",children:"Not in OFF"}),T.applied!=="none"&&h.jsxs("span",{className:"px-2 py-1 text-xs bg-green-500 text-white rounded-full",children:[" Applied ",T.applied]})]})]}),((X=T.offResult)==null?void 0:X.product)&&T.comparison.length>0&&h.jsxs("div",{className:"mt-3",children:[h.jsxs("button",{onClick:()=>b(w===T.food._id?null:T.food._id),className:"text-xs text-primary-600 hover:underline",children:[w===T.food._id?"Hide":"Show"," nutrition comparison"]}),w===T.food._id&&h.jsxs("div",{className:"mt-2 grid grid-cols-7 gap-1 text-xs",children:[h.jsx("div",{className:"font-medium text-gray-500"}),T.comparison.slice(0,6).map(W=>h.jsx("div",{className:"font-medium text-gray-500 text-center capitalize",children:W.field.slice(0,3)},W.field)),h.jsx("div",{className:"text-gray-500",children:"Ours"}),T.comparison.slice(0,6).map(W=>h.jsx("div",{className:"text-center text-gray-700",children:W.ours!==null?W.ours:"-"},`ours-${W.field}`)),h.jsx("div",{className:"text-gray-500",children:"OFF"}),T.comparison.slice(0,6).map(W=>h.jsx("div",{className:`text-center ${W.matches?"text-green-600":W.difference&&W.difference>20?"text-red-600 font-medium":"text-yellow-600"}`,children:W.theirs!==null?W.theirs:"-"},`theirs-${W.field}`)),h.jsx("div",{className:"text-gray-400",children:"Diff"}),T.comparison.slice(0,6).map(W=>h.jsx("div",{className:`text-center text-xs ${W.matches?"text-green-500":W.difference&&W.difference>20?"text-red-500":"text-yellow-500"}`,children:W.difference!==null?`${W.difference}%`:"-"},`diff-${W.field}`))]})]})]}),((B=T.offResult)==null?void 0:B.product)&&T.applied==="none"&&h.jsx("div",{className:"flex flex-col gap-2 flex-shrink-0",children:T.isApplying?h.jsx("div",{className:"flex items-center justify-center p-4",children:h.jsxs("svg",{className:"w-5 h-5 animate-spin text-primary-600",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})}):h.jsxs(h.Fragment,{children:[(T.hasImage||T.food.imageUrl)&&!T.cleanedImageUrl&&h.jsx("button",{onClick:()=>P(T),disabled:T.isCleaningImage,className:"px-3 py-1.5 text-xs bg-orange-50 text-orange-700 rounded hover:bg-orange-100 whitespace-nowrap disabled:opacity-50",children:T.isCleaningImage?h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsxs("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),T.cleaningProgress,"%"]}):"Clean Image"}),T.cleanedImageUrl&&h.jsx("button",{onClick:()=>A(T),className:"px-3 py-1.5 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200 whitespace-nowrap font-medium",children:"Apply Cleaned"}),T.hasImage&&!T.cleanedImageUrl&&h.jsx("button",{onClick:()=>E(T),className:"px-3 py-1.5 text-xs bg-blue-50 text-blue-700 rounded hover:bg-blue-100 whitespace-nowrap",children:"Apply Original"}),h.jsx("button",{onClick:()=>I(T),className:"px-3 py-1.5 text-xs bg-purple-50 text-purple-700 rounded hover:bg-purple-100 whitespace-nowrap",children:"Apply Nutrition"}),h.jsx("button",{onClick:()=>k(T),className:"px-3 py-1.5 text-xs bg-green-600 text-white rounded hover:bg-green-700 whitespace-nowrap font-medium",children:"Apply All"})]})})]})},T.food._id)})}),h.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[h.jsxs("span",{className:"text-gray-500",children:["Found: ",h.jsx("span",{className:"font-medium text-green-600",children:d.filter(T=>{var O;return(O=T.offResult)==null?void 0:O.product}).length})]}),h.jsxs("span",{className:"text-gray-500",children:["UK: ",h.jsx("span",{className:"font-medium text-green-600",children:d.filter(T=>{var O;return(O=T.offResult)==null?void 0:O.isUKProduct}).length})]}),h.jsxs("span",{className:"text-gray-500",children:["Better Images: ",h.jsx("span",{className:"font-medium text-blue-600",children:d.filter(T=>T.hasBetterImage).length})]}),h.jsxs("span",{className:"text-gray-500",children:["Applied: ",h.jsx("span",{className:"font-medium text-green-600",children:d.filter(T=>T.applied!=="none").length})]})]}),h.jsx("div",{className:"flex gap-2",children:h.jsx("button",{onClick:()=>{t(),e()},className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Done"})})]})})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:h.jsxs("div",{className:"flex gap-3",children:[h.jsx("input",{type:"text",value:n,onChange:T=>i(T.target.value),onKeyDown:M,placeholder:"Enter barcode (e.g., 5000128000000)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",autoFocus:!f}),h.jsxs("button",{onClick:D,disabled:!n.trim()||s,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s?h.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),h.jsx("span",{children:"Search"})]})]})}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[(a==null?void 0:a.error)&&!a.product&&h.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:[h.jsx("p",{className:"font-medium",children:"Error"}),h.jsx("p",{className:"text-sm",children:a.error})]}),(a==null?void 0:a.product)&&h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex gap-6",children:[h.jsxs("div",{className:"flex-shrink-0",children:[a.bestImageUrl?h.jsx("img",{src:a.bestImageUrl,alt:a.product.product_name||"Product",className:"w-32 h-32 object-cover rounded-lg border border-gray-200"}):h.jsx("div",{className:"w-32 h-32 bg-gray-100 rounded-lg flex items-center justify-center text-gray-400",children:h.jsx("span",{className:"text-sm",children:"No image"})}),a.imageConfidenceScore>0&&h.jsxs("div",{className:"mt-2 text-xs text-center text-gray-500",children:["Image score: ",a.imageConfidenceScore,"/10",a.isRegionMatch&&h.jsx("span",{className:"ml-1 text-green-600",children:"UK"})]})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a.product.product_name_en||a.product.product_name||"Unknown Product"}),a.product.brands&&h.jsx("p",{className:"text-gray-600",children:a.product.brands}),h.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Barcode: ",a.product.code]}),h.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[h.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${a.isUKProduct?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:a.isUKProduct?" UK Product":" Non-UK Product"}),h.jsxs("span",{className:"text-sm text-gray-500",children:[a.ukConfidenceScore,"% confidence"]})]})]})]}),h.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[h.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[h.jsx("svg",{className:"w-5 h-5 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"UK Detection Signals"]}),h.jsx("div",{className:"space-y-2",children:a.ukSignals.map((T,O)=>h.jsxs("div",{className:`flex items-start gap-3 p-2 rounded ${T.matched?"bg-green-50":"bg-white"}`,children:[h.jsx("div",{className:`mt-0.5 ${T.matched?"text-green-600":"text-gray-400"}`,children:T.matched?h.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):h.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:`text-sm font-medium ${T.matched?"text-green-800":"text-gray-600"}`,children:T.signal}),h.jsxs("span",{className:"text-xs text-gray-400",children:["Weight: ",T.weight]})]}),T.details&&h.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:T.details})]})]},O))})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Nutrition (per 100g)"}),h.jsx("div",{className:"grid grid-cols-4 gap-3",children:(()=>{const T=LP(a.product);return h.jsxs(h.Fragment,{children:[h.jsx(ic,{label:"Calories",value:T.calories,unit:"kcal"}),h.jsx(ic,{label:"Protein",value:T.protein,unit:"g"}),h.jsx(ic,{label:"Carbs",value:T.carbs,unit:"g"}),h.jsx(ic,{label:"Fat",value:T.fat,unit:"g"}),h.jsx(ic,{label:"Sat. Fat",value:T.saturatedFat,unit:"g"}),h.jsx(ic,{label:"Fibre",value:T.fiber,unit:"g"}),h.jsx(ic,{label:"Sugar",value:T.sugar,unit:"g"}),h.jsx(ic,{label:"Salt",value:T.salt,unit:"g"})]})})()})]}),a.product.ingredients_text_en||a.product.ingredients_text?h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Ingredients"}),h.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:a.product.ingredients_text_en||a.product.ingredients_text})]}):null]}),!a&&!s&&h.jsxs("div",{className:"text-center py-12 text-gray-500",children:[h.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),h.jsx("p",{children:"Enter a barcode to search OpenFoodFacts"}),h.jsx("p",{className:"text-sm mt-1",children:"UK products will be automatically detected"})]})]}),(a==null?void 0:a.product)&&h.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between bg-gray-50",children:[h.jsx("div",{className:"text-sm text-gray-500",children:!a.isUKProduct&&h.jsx("span",{className:"text-yellow-600",children:"This may not be a UK product. Import with caution."})}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:e,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100",children:"Cancel"}),h.jsxs("button",{onClick:L,disabled:c,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 flex items-center gap-2",children:[c?h.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),h.jsx("span",{children:"Import to Database"})]})]})]})]})]})})},ic=({label:e,value:t,unit:r})=>h.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 text-center",children:[h.jsx("p",{className:"text-xs text-gray-500",children:e}),h.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t!==null?t.toFixed(1):"-"}),h.jsx("p",{className:"text-xs text-gray-400",children:r})]});function _l(e){return Array.isArray?Array.isArray(e):t5(e)==="[object Array]"}function rpe(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function npe(e){return e==null?"":rpe(e)}function wa(e){return typeof e=="string"}function J3(e){return typeof e=="number"}function ipe(e){return e===!0||e===!1||spe(e)&&t5(e)=="[object Boolean]"}function e5(e){return typeof e=="object"}function spe(e){return e5(e)&&e!==null}function ws(e){return e!=null}function YP(e){return!e.trim().length}function t5(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const ope="Incorrect 'index' type",ape=e=>`Invalid value for key ${e}`,lpe=e=>`Pattern length exceeds max of ${e}.`,cpe=e=>`Missing ${e} property in key`,upe=e=>`Property 'weight' in key '${e}' must be a positive integer`,QL=Object.prototype.hasOwnProperty;class dpe{constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(n=>{let i=r5(n);this._keys.push(i),this._keyMap[i.id]=i,r+=i.weight}),this._keys.forEach(n=>{n.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function r5(e){let t=null,r=null,n=null,i=1,s=null;if(wa(e)||_l(e))n=e,t=XL(e),r=EA(e);else{if(!QL.call(e,"name"))throw new Error(cpe("name"));const o=e.name;if(n=o,QL.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(upe(o));t=XL(o),r=EA(o),s=e.getFn}return{path:t,id:r,weight:i,src:n,getFn:s}}function XL(e){return _l(e)?e:e.split(".")}function EA(e){return _l(e)?e.join("."):e}function hpe(e,t){let r=[],n=!1;const i=(s,o,a)=>{if(ws(s))if(!o[a])r.push(s);else{let l=o[a];const c=s[l];if(!ws(c))return;if(a===o.length-1&&(wa(c)||J3(c)||ipe(c)))r.push(npe(c));else if(_l(c)){n=!0;for(let u=0,d=c.length;u<d;u+=1)i(c[u],o,a+1)}else o.length&&i(c,o,a+1)}};return i(e,wa(t)?t.split("."):t,0),n?r:r[0]}const ppe={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},fpe={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},gpe={location:0,threshold:.6,distance:100},mpe={useExtendedSearch:!1,getFn:hpe,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var bt={...fpe,...ppe,...gpe,...mpe};const vpe=/[^ ]+/g;function ype(e=1,t=3){const r=new Map,n=Math.pow(10,t);return{get(i){const s=i.match(vpe).length;if(r.has(s))return r.get(s);const o=1/Math.pow(s,.5*e),a=parseFloat(Math.round(o*n)/n);return r.set(s,a),a},clear(){r.clear()}}}class RI{constructor({getFn:t=bt.getFn,fieldNormWeight:r=bt.fieldNormWeight}={}){this.norm=ype(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,wa(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){const r=this.size();wa(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!ws(t)||YP(t))return;let n={v:t,i:r,n:this.norm.get(t)};this.records.push(n)}_addObject(t,r){let n={i:r,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(t):this.getFn(t,i.path);if(ws(o)){if(_l(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:c,value:u}=l.pop();if(ws(u))if(wa(u)&&!YP(u)){let d={v:u,i:c,n:this.norm.get(u)};a.push(d)}else _l(u)&&u.forEach((d,p)=>{l.push({nestedArrIndex:p,value:d})})}n.$[s]=a}else if(wa(o)&&!YP(o)){let a={v:o,n:this.norm.get(o)};n.$[s]=a}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function n5(e,t,{getFn:r=bt.getFn,fieldNormWeight:n=bt.fieldNormWeight}={}){const i=new RI({getFn:r,fieldNormWeight:n});return i.setKeys(e.map(r5)),i.setSources(t),i.create(),i}function Cpe(e,{getFn:t=bt.getFn,fieldNormWeight:r=bt.fieldNormWeight}={}){const{keys:n,records:i}=e,s=new RI({getFn:t,fieldNormWeight:r});return s.setKeys(n),s.setIndexRecords(i),s}function _C(e,{errors:t=0,currentLocation:r=0,expectedLocation:n=0,distance:i=bt.distance,ignoreLocation:s=bt.ignoreLocation}={}){const o=t/e.length;if(s)return o;const a=Math.abs(n-r);return i?o+a/i:a?1:o}function wpe(e=[],t=bt.minMatchCharLength){let r=[],n=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let a=e[s];a&&n===-1?n=s:!a&&n!==-1&&(i=s-1,i-n+1>=t&&r.push([n,i]),n=-1)}return e[s-1]&&s-n>=t&&r.push([n,s-1]),r}const Qu=32;function bpe(e,t,r,{location:n=bt.location,distance:i=bt.distance,threshold:s=bt.threshold,findAllMatches:o=bt.findAllMatches,minMatchCharLength:a=bt.minMatchCharLength,includeMatches:l=bt.includeMatches,ignoreLocation:c=bt.ignoreLocation}={}){if(t.length>Qu)throw new Error(lpe(Qu));const u=t.length,d=e.length,p=Math.max(0,Math.min(n,d));let f=s,m=p;const y=a>1||l,C=y?Array(d):[];let w;for(;(w=e.indexOf(t,m))>-1;){let P=_C(t,{currentLocation:w,expectedLocation:p,distance:i,ignoreLocation:c});if(f=Math.min(P,f),m=w+u,y){let A=0;for(;A<u;)C[w+A]=1,A+=1}}m=-1;let b=[],x=1,E=u+d;const I=1<<u-1;for(let P=0;P<u;P+=1){let A=0,D=E;for(;A<D;)_C(t,{errors:P,currentLocation:p+D,expectedLocation:p,distance:i,ignoreLocation:c})<=f?A=D:E=D,D=Math.floor((E-A)/2+A);E=D;let L=Math.max(1,p-D+1),M=o?d:Math.min(p+D,d)+u,T=Array(M+2);T[M+1]=(1<<P)-1;for(let Q=M;Q>=L;Q-=1){let X=Q-1,B=r[e.charAt(X)];if(y&&(C[X]=+!!B),T[Q]=(T[Q+1]<<1|1)&B,P&&(T[Q]|=(b[Q+1]|b[Q])<<1|1|b[Q+1]),T[Q]&I&&(x=_C(t,{errors:P,currentLocation:X,expectedLocation:p,distance:i,ignoreLocation:c}),x<=f)){if(f=x,m=X,m<=p)break;L=Math.max(1,2*p-m)}}if(_C(t,{errors:P+1,currentLocation:p,expectedLocation:p,distance:i,ignoreLocation:c})>f)break;b=T}const k={isMatch:m>=0,score:Math.max(.001,x)};if(y){const P=wpe(C,a);P.length?l&&(k.indices=P):k.isMatch=!1}return k}function Spe(e){let t={};for(let r=0,n=e.length;r<n;r+=1){const i=e.charAt(r);t[i]=(t[i]||0)|1<<n-r-1}return t}const lb=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class i5{constructor(t,{location:r=bt.location,threshold:n=bt.threshold,distance:i=bt.distance,includeMatches:s=bt.includeMatches,findAllMatches:o=bt.findAllMatches,minMatchCharLength:a=bt.minMatchCharLength,isCaseSensitive:l=bt.isCaseSensitive,ignoreDiacritics:c=bt.ignoreDiacritics,ignoreLocation:u=bt.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreDiacritics:c,ignoreLocation:u},t=l?t:t.toLowerCase(),t=c?lb(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const d=(f,m)=>{this.chunks.push({pattern:f,alphabet:Spe(f),startIndex:m})},p=this.pattern.length;if(p>Qu){let f=0;const m=p%Qu,y=p-m;for(;f<y;)d(this.pattern.substr(f,Qu),f),f+=Qu;if(m){const C=p-Qu;d(this.pattern.substr(C),C)}}else d(this.pattern,0)}searchIn(t){const{isCaseSensitive:r,ignoreDiacritics:n,includeMatches:i}=this.options;if(t=r?t:t.toLowerCase(),t=n?lb(t):t,this.pattern===t){let y={isMatch:!0,score:0};return i&&(y.indices=[[0,t.length-1]]),y}const{location:s,distance:o,threshold:a,findAllMatches:l,minMatchCharLength:c,ignoreLocation:u}=this.options;let d=[],p=0,f=!1;this.chunks.forEach(({pattern:y,alphabet:C,startIndex:w})=>{const{isMatch:b,score:x,indices:E}=bpe(t,y,C,{location:s+w,distance:o,threshold:a,findAllMatches:l,minMatchCharLength:c,includeMatches:i,ignoreLocation:u});b&&(f=!0),p+=x,b&&E&&(d=[...d,...E])});let m={isMatch:f,score:f?p/this.chunks.length:1};return f&&i&&(m.indices=d),m}}class Eu{constructor(t){this.pattern=t}static isMultiMatch(t){return ZL(t,this.multiRegex)}static isSingleMatch(t){return ZL(t,this.singleRegex)}search(){}}function ZL(e,t){const r=e.match(t);return r?r[1]:null}class xpe extends Eu{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class Epe extends Eu{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Ppe extends Eu{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class Rpe extends Eu{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class Tpe extends Eu{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Ape extends Eu{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class s5 extends Eu{constructor(t,{location:r=bt.location,threshold:n=bt.threshold,distance:i=bt.distance,includeMatches:s=bt.includeMatches,findAllMatches:o=bt.findAllMatches,minMatchCharLength:a=bt.minMatchCharLength,isCaseSensitive:l=bt.isCaseSensitive,ignoreDiacritics:c=bt.ignoreDiacritics,ignoreLocation:u=bt.ignoreLocation}={}){super(t),this._bitapSearch=new i5(t,{location:r,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreDiacritics:c,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class o5 extends Eu{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,n;const i=[],s=this.pattern.length;for(;(n=t.indexOf(this.pattern,r))>-1;)r=n+s,i.push([n,r-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const PA=[xpe,o5,Ppe,Rpe,Ape,Tpe,Epe,s5],JL=PA.length,_pe=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Dpe="|";function kpe(e,t={}){return e.split(Dpe).map(r=>{let n=r.trim().split(_pe).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=n.length;s<o;s+=1){const a=n[s];let l=!1,c=-1;for(;!l&&++c<JL;){const u=PA[c];let d=u.isMultiMatch(a);d&&(i.push(new u(d,t)),l=!0)}if(!l)for(c=-1;++c<JL;){const u=PA[c];let d=u.isSingleMatch(a);if(d){i.push(new u(d,t));break}}}return i})}const Ipe=new Set([s5.type,o5.type]);class Npe{constructor(t,{isCaseSensitive:r=bt.isCaseSensitive,ignoreDiacritics:n=bt.ignoreDiacritics,includeMatches:i=bt.includeMatches,minMatchCharLength:s=bt.minMatchCharLength,ignoreLocation:o=bt.ignoreLocation,findAllMatches:a=bt.findAllMatches,location:l=bt.location,threshold:c=bt.threshold,distance:u=bt.distance}={}){this.query=null,this.options={isCaseSensitive:r,ignoreDiacritics:n,includeMatches:i,minMatchCharLength:s,findAllMatches:a,ignoreLocation:o,location:l,threshold:c,distance:u},t=r?t:t.toLowerCase(),t=n?lb(t):t,this.pattern=t,this.query=kpe(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i,ignoreDiacritics:s}=this.options;t=i?t:t.toLowerCase(),t=s?lb(t):t;let o=0,a=[],l=0;for(let c=0,u=r.length;c<u;c+=1){const d=r[c];a.length=0,o=0;for(let p=0,f=d.length;p<f;p+=1){const m=d[p],{isMatch:y,indices:C,score:w}=m.search(t);if(y){if(o+=1,l+=w,n){const b=m.constructor.type;Ipe.has(b)?a=[...a,...C]:a.push(C)}}else{l=0,o=0,a.length=0;break}}if(o){let p={isMatch:!0,score:l/o};return n&&(p.indices=a),p}}return{isMatch:!1,score:1}}}const RA=[];function Mpe(...e){RA.push(...e)}function TA(e,t){for(let r=0,n=RA.length;r<n;r+=1){let i=RA[r];if(i.condition(e,t))return new i(e,t)}return new i5(e,t)}const cb={AND:"$and",OR:"$or"},AA={PATH:"$path",PATTERN:"$val"},_A=e=>!!(e[cb.AND]||e[cb.OR]),Ope=e=>!!e[AA.PATH],Fpe=e=>!_l(e)&&e5(e)&&!_A(e),e2=e=>({[cb.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function a5(e,t,{auto:r=!0}={}){const n=i=>{let s=Object.keys(i);const o=Ope(i);if(!o&&s.length>1&&!_A(i))return n(e2(i));if(Fpe(i)){const l=o?i[AA.PATH]:s[0],c=o?i[AA.PATTERN]:i[l];if(!wa(c))throw new Error(ape(l));const u={keyId:EA(l),pattern:c};return r&&(u.searcher=TA(c,t)),u}let a={children:[],operator:s[0]};return s.forEach(l=>{const c=i[l];_l(c)&&c.forEach(u=>{a.children.push(n(u))})}),a};return _A(e)||(e=e2(e)),n(e)}function Lpe(e,{ignoreFieldNorm:t=bt.ignoreFieldNorm}){e.forEach(r=>{let n=1;r.matches.forEach(({key:i,norm:s,score:o})=>{const a=i?i.weight:null;n*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(t?1:s))}),r.score=n})}function Gpe(e,t){const r=e.matches;t.matches=[],ws(r)&&r.forEach(n=>{if(!ws(n.indices)||!n.indices.length)return;const{indices:i,value:s}=n;let o={indices:i,value:s};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),t.matches.push(o)})}function jpe(e,t){t.score=e.score}function Bpe(e,t,{includeMatches:r=bt.includeMatches,includeScore:n=bt.includeScore}={}){const i=[];return r&&i.push(Gpe),n&&i.push(jpe),e.map(s=>{const{idx:o}=s,a={item:t[o],refIndex:o};return i.length&&i.forEach(l=>{l(s,a)}),a})}class Hf{constructor(t,r={},n){this.options={...bt,...r},this.options.useExtendedSearch,this._keyStore=new dpe(this.options.keys),this.setCollection(t,n)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof RI))throw new Error(ope);this._myIndex=r||n5(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){ws(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const r=[];for(let n=0,i=this._docs.length;n<i;n+=1){const s=this._docs[n];t(s,n)&&(this.removeAt(n),n-=1,i-=1,r.push(s))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let l=wa(t)?wa(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Lpe(l,{ignoreFieldNorm:a}),s&&l.sort(o),J3(r)&&r>-1&&(l=l.slice(0,r)),Bpe(l,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(t){const r=TA(t,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:s,i:o,n:a})=>{if(!ws(s))return;const{isMatch:l,score:c,indices:u}=r.searchIn(s);l&&i.push({item:s,idx:o,matches:[{score:c,value:s,norm:a,indices:u}]})}),i}_searchLogical(t){const r=a5(t,this.options),n=(a,l,c)=>{if(!a.children){const{keyId:d,searcher:p}=a,f=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(l,d),searcher:p});return f&&f.length?[{idx:c,item:l,matches:f}]:[]}const u=[];for(let d=0,p=a.children.length;d<p;d+=1){const f=a.children[d],m=n(f,l,c);if(m.length)u.push(...m);else if(a.operator===cb.AND)return[]}return u},i=this._myIndex.records,s={},o=[];return i.forEach(({$:a,i:l})=>{if(ws(a)){let c=n(r,a,l);c.length&&(s[l]||(s[l]={idx:l,item:a,matches:[]},o.push(s[l])),c.forEach(({matches:u})=>{s[l].matches.push(...u)}))}}),o}_searchObjectList(t){const r=TA(t,this.options),{keys:n,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:a})=>{if(!ws(o))return;let l=[];n.forEach((c,u)=>{l.push(...this._findMatches({key:c,value:o[u],searcher:r}))}),l.length&&s.push({idx:a,item:o,matches:l})}),s}_findMatches({key:t,value:r,searcher:n}){if(!ws(r))return[];let i=[];if(_l(r))r.forEach(({v:s,i:o,n:a})=>{if(!ws(s))return;const{isMatch:l,score:c,indices:u}=n.searchIn(s);l&&i.push({score:c,key:t,value:s,idx:o,norm:a,indices:u})});else{const{v:s,n:o}=r,{isMatch:a,score:l,indices:c}=n.searchIn(s);a&&i.push({score:l,key:t,value:s,norm:o,indices:c})}return i}}Hf.version="7.1.0";Hf.createIndex=n5;Hf.parseIndex=Cpe;Hf.config=bt;Hf.parseQuery=a5;Mpe(Npe);const Vpe=["tesco","sainsbury","sainsburys","sainsbury's","asda","morrisons","waitrose","aldi","lidl","co-op","coop","marks & spencer","m&s","iceland","ocado","booths","budgens","costcutter","spar","londis"],Hpe=[["colour","color"],["flavour","flavor"],["fibre","fiber"],["centre","center"],["litre","liter"],["grey","gray"],["organise","organize"],["recognise","recognize"],["favourite","favorite"],["honour","honor"]],dc={barcodeExact:50,barcodePresent:10,nameExact:20,nameFuzzy:15,brandExact:10,ukRetailerBrand:5,ingredientOverlap:10,ukSpelling:5};function ba(e){return e.toLowerCase().trim().replace(/[^\w\s]/g," ").replace(/\s+/g," ")}function t2(e){if(!e)return!1;const t=ba(e);return Vpe.some(r=>t.includes(r))}function r2(e){const t=ba(e);return Hpe.some(([r])=>t.includes(r))}function zpe(e,t){if(e.size===0&&t.size===0)return 0;const r=new Set([...e].filter(i=>t.has(i))),n=new Set([...e,...t]);return r.size/n.size}function $pe(e,t){const r=new Set(e.ingredients.map(s=>ba(s)).filter(s=>s.length>2)),n=new Set(t.ingredients.map(s=>ba(s)).filter(s=>s.length>2));return zpe(r,n)*dc.ingredientOverlap}function Upe(e,t){let r=0;const n=[];e.barcode&&t.barcode&&e.barcode===t.barcode&&(r+=dc.barcodeExact,n.push(`Exact barcode match: ${e.barcode}`)),e.barcode&&t.barcode&&(r+=dc.barcodePresent);const i=ba(e.name),s=ba(t.name);if(i===s)r+=dc.nameExact,n.push("Exact name match");else{const c=new Hf([i],{threshold:.4,includeScore:!0}).search(s);if(c.length>0&&c[0].score!==void 0){const u=(1-c[0].score)*dc.nameFuzzy;u>5&&(r+=u,n.push(`Fuzzy name match (${Math.round(u)} pts)`))}}if(e.brandName&&t.brandName){const l=ba(e.brandName),c=ba(t.brandName);l===c&&(r+=dc.brandExact,n.push("Exact brand match"))}if(t2(e.brandName)&&t2(t.brandName)&&(r+=dc.ukRetailerBrand,n.push("Both are UK retailer products")),e.ingredients.length>0&&t.ingredients.length>0){const l=$pe(e,t);l>2&&(r+=l,n.push(`Ingredient overlap (${Math.round(l)} pts)`))}const o=`${e.name} ${e.ingredientsText||""}`,a=`${t.name} ${t.ingredientsText||""}`;return r2(o)&&r2(a)&&(r+=dc.ukSpelling,n.push("Both have UK spelling")),{score:r,reasons:n}}function Wpe(e){const t=new Map;return e.forEach(r=>{if(r.barcode){const n=t.get(r.barcode)||[];n.push(r),t.set(r.barcode,n)}}),t}function Kpe(e){const t=new Map;return e.forEach(r=>{const n=ba(r.name),i=r.brandName?`${n}|${ba(r.brandName)}`:n,s=t.get(i)||[];s.push(r),t.set(i,s)}),t}function qpe(e,t={}){const{minScore:r=30,maxGroups:n=500}=t,i=[],s=new Set,o=new Set,a=Wpe(e),l=Kpe(e);return a.forEach((c,u)=>{if(c.length>1){const d=`barcode-${u}`,p=[...c].sort((y,C)=>y.isVerified!==C.isVerified?y.isVerified?-1:1:C._confidenceScore-y._confidenceScore),f=p[0],m=p.slice(1).map(y=>y._id);i.push({id:d,masterFoodId:f._id,duplicateIds:m,matchScore:100,matchReasons:[`Exact barcode match: ${u}`]}),c.forEach(y=>o.add(y._id))}}),l.forEach(c=>{if(c.length>1){const u=c.filter(d=>!o.has(d._id));if(u.length>1)for(let d=0;d<u.length;d++)for(let p=d+1;p<u.length;p++){const f=u[d],m=u[p];if(f._sourceIndex===m._sourceIndex)continue;const y=[f._id,m._id].sort().join("|");if(s.has(y))continue;s.add(y);const{score:C,reasons:w}=Upe(f,m);if(C>=r){const b=f._confidenceScore>=m._confidenceScore?f:m,x=b===f?m:f;i.push({id:`name-${y}`,masterFoodId:b._id,duplicateIds:[x._id],matchScore:Math.min(100,C),matchReasons:w}),o.add(f._id),o.add(m._id)}}}}),i.sort((c,u)=>u.matchScore-c.matchScore),i.slice(0,n)}function Ype(e,t){const r={...e},n=new Set;if(e.barcode&&n.add(e.barcode),t.forEach(i=>{i.barcode&&n.add(i.barcode)}),r.barcodes=[...n],r.barcode=r.barcodes[0]||null,!r.imageUrl){const i=t.find(s=>s.imageUrl);i&&(r.imageUrl=i.imageUrl)}if(!r.ingredientsText||r.ingredientsText.length<20){const i=t.find(s=>{var o;return s.ingredientsText&&s.ingredientsText.length>(((o=r.ingredientsText)==null?void 0:o.length)||0)});i&&(r.ingredientsText=i.ingredientsText,r.ingredients=i.ingredients)}return r._isDirty=!0,r}const Qpe=({onClose:e})=>{const{duplicateGroups:t,setDuplicateGroups:r,getFoodById:n,updateFood:i}=gl(),[s,o]=v.useState(null),[a,l]=v.useState(null),c=async p=>{const f=n(p.masterFoodId);if(!f)return;const m=p.duplicateIds.map(y=>n(y)).filter(y=>y!==void 0);if(m.length!==0){l(p.id);try{const y=Ype(f,m);i(f._id,{barcodes:y.barcodes,barcode:y.barcode,imageUrl:y.imageUrl,ingredientsText:y.ingredientsText,ingredients:y.ingredients}),m.forEach(C=>{i(C._id,{_isDeleted:!0})}),r(t.filter(C=>C.id!==p.id)),console.log(`Merged ${m.length} duplicates into ${f.name}`)}catch(y){console.error("Error merging duplicates:",y),alert("Failed to merge duplicates")}finally{l(null)}}},u=p=>{r(t.filter(f=>f.id!==p.id))},d=()=>{confirm("Dismiss all duplicate groups? This cannot be undone.")&&r([])};return t.length===0?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsx("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl p-6",children:h.jsxs("div",{className:"text-center py-8",children:[h.jsx("svg",{className:"w-16 h-16 mx-auto text-green-500 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Duplicates Found"}),h.jsx("p",{className:"text-gray-500 mb-6",children:"Your database looks clean!"}),h.jsx("button",{onClick:e,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Close"})]})})}):h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Duplicate Detection"}),h.jsxs("p",{className:"text-sm text-gray-500",children:["Found ",t.length," potential duplicate group",t.length!==1?"s":""]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("button",{onClick:d,className:"px-3 py-1.5 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg",children:"Dismiss All"}),h.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),h.jsx("div",{className:"flex-1 overflow-y-auto divide-y divide-gray-200",children:t.map(p=>{const f=n(p.masterFoodId),m=p.duplicateIds.map(w=>n(w)).filter(w=>w!==void 0);if(!f)return null;const y=s===p.id,C=a===p.id;return h.jsx("div",{className:"p-4",children:h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("div",{className:"flex-shrink-0",children:f.imageUrl?h.jsx("img",{src:f.imageUrl,alt:"",className:"w-16 h-16 object-cover rounded border border-gray-200"}):h.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded border border-gray-200 flex items-center justify-center text-gray-400 text-xs",children:"No img"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-start justify-between gap-2",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium text-gray-900",children:f.name}),f.brandName&&h.jsx("p",{className:"text-sm text-gray-500",children:f.brandName}),h.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[h.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:["Master: ",f._sourceIndex]}),h.jsxs("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded",children:[m.length," duplicate",m.length!==1?"s":""]})]})]}),h.jsxs("div",{className:"text-right",children:[h.jsxs("div",{className:`text-lg font-bold ${p.matchScore>=80?"text-red-600":p.matchScore>=50?"text-yellow-600":"text-gray-600"}`,children:[p.matchScore,"%"]}),h.jsx("div",{className:"text-xs text-gray-400",children:"match"})]})]}),h.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[p.matchReasons.slice(0,y?void 0:2).map((w,b)=>h.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded",children:w},b)),!y&&p.matchReasons.length>2&&h.jsxs("span",{className:"text-xs text-gray-400",children:["+",p.matchReasons.length-2," more"]})]}),h.jsx("button",{onClick:()=>o(y?null:p.id),className:"mt-2 text-xs text-primary-600 hover:underline",children:y?"Hide details":"Show details"}),y&&h.jsxs("div",{className:"mt-3 space-y-2",children:[h.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase",children:"Duplicates:"}),m.map(w=>h.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded",children:[w.imageUrl?h.jsx("img",{src:w.imageUrl,alt:"",className:"w-10 h-10 object-cover rounded"}):h.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded flex items-center justify-center text-gray-400 text-xs",children:"-"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-sm font-medium text-gray-700 truncate",children:w.name}),h.jsxs("p",{className:"text-xs text-gray-500",children:[w._sourceIndex,"  ",w.barcode||"No barcode"]})]})]},w._id))]})]}),h.jsxs("div",{className:"flex flex-col gap-2 flex-shrink-0",children:[h.jsx("button",{onClick:()=>c(p),disabled:C,className:"px-3 py-1.5 text-xs bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 whitespace-nowrap",children:C?h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsxs("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Merging"]}):"Merge"}),h.jsx("button",{onClick:()=>u(p),className:"px-3 py-1.5 text-xs bg-gray-100 text-gray-600 rounded hover:bg-gray-200 whitespace-nowrap",children:"Dismiss"})]})]})},p.id)})}),h.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"text-sm text-gray-500",children:[h.jsx("span",{className:"font-medium text-red-600",children:t.filter(p=>p.matchScore>=80).length})," high confidence ",h.jsx("span",{className:"font-medium text-yellow-600 ml-1",children:t.filter(p=>p.matchScore>=50&&p.matchScore<80).length})," medium ",h.jsx("span",{className:"font-medium text-gray-600 ml-1",children:t.filter(p=>p.matchScore<50).length})," low"]}),h.jsx("button",{onClick:e,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Done"})]})})]})})},n2="WK0TIF84M2",Xpe="577cc4ee3fed660318917bbb54abfb2e";async function Zpe(e,t,r){try{console.log(`[Upload] Starting upload for ${t} from ${r}`);const n=await new Promise((o,a)=>{const l=new FileReader;l.onloadend=()=>o(l.result),l.onerror=a,l.readAsDataURL(e)}),s=await(await fetch("https://us-central1-nutrasafe-705c7.cloudfunctions.net/uploadFoodImage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({foodId:t,objectID:t,imageData:n,sourceIndex:r})})).json();return console.log(`[Upload] Result for ${t}:`,s),s}catch(n){return console.error(`[Upload] Error for ${t}:`,n),{success:!1,error:n instanceof Error?n.message:String(n)}}}const Jpe=({onBack:e})=>{const[t,r]=v.useState([]),[n,i]=v.useState(!1),[s,o]=v.useState(0),[a,l]=v.useState(""),[c,u]=v.useState(!1),[d,p]=v.useState(!1),[f,m]=v.useState(!1),[y,C]=v.useState("with_barcode"),[w,b]=v.useState(0),[x,E]=v.useState({total:0,withBarcode:0,completed:0,failed:0,noImage:0,processing:0,skipped:0}),[I,k]=v.useState([]),[P,A]=v.useState(new Set(gr)),[D,L]=v.useState(!0),M=v.useRef(!1),T=v.useRef(!1),O=100,[Q,X]=v.useState(null),B=K=>{console.log(K),k(U=>[...U.slice(-50),`${new Date().toLocaleTimeString()}: ${K}`])};v.useEffect(()=>{Zhe().then(K=>{m(K),B(`Cloud rembg available: ${K}`)})},[]),v.useEffect(()=>{const K=U=>{U.key==="Escape"&&Q&&X(null)};return window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)},[Q]);const W=v.useCallback(async()=>{var re;if(P.size===0){B("No indices selected");return}i(!0),L(!1),o(0),B("Starting to load foods from Algolia...");const K=[],U=new Set,j=Array.from(P);try{for(let se=0;se<j.length;se++){const Ce=j[se];l(`Loading ${Ce}...`),o(Math.round(se/j.length*100)),B(`Loading index: ${Ce}`);const be=`https://${n2}-dsn.algolia.net/1/indexes/${Ce}/query`;try{const me=await fetch(be,{method:"POST",headers:{"X-Algolia-Application-Id":n2,"X-Algolia-API-Key":Xpe,"Content-Type":"application/json"},body:JSON.stringify({query:"",hitsPerPage:1e3,attributesToRetrieve:["objectID","name","foodName","brandName","brand","barcode","barcodes","imageUrl"]})});if(!me.ok){B(`Error loading ${Ce}: ${me.status}`);continue}const he=(await me.json()).hits||[];B(`${Ce}: ${he.length} records`);for(const Se of he){const De=Se.barcode||((re=Se.barcodes)==null?void 0:re[0])||null;De&&U.has(De)||(De&&U.add(De),K.push({id:`${Ce}:${Se.objectID}`,objectID:Se.objectID,name:Se.name||Se.foodName||"Unknown",brandName:Se.brandName||Se.brand||null,barcode:De,currentImageUrl:Se.imageUrl||null,offImageUrl:null,processedBlob:null,status:"pending",sourceIndex:Ce,selected:!1}))}}catch(me){B(`Error loading ${Ce}: ${me}`)}}B(`Total foods loaded: ${K.length}`),B(`Foods with barcodes: ${K.filter(se=>se.barcode).length}`),r(K),ne(K),o(100),l("")}catch(se){B(`Error loading foods: ${se}`)}finally{i(!1)}},[P]),ne=K=>{E({total:K.length,withBarcode:K.filter(U=>U.barcode).length,completed:K.filter(U=>U.status==="completed").length,failed:K.filter(U=>U.status==="failed").length,noImage:K.filter(U=>U.status==="no_image").length,processing:K.filter(U=>["fetching_off","processing","uploading"].includes(U.status)).length,skipped:K.filter(U=>U.status==="skipped").length})},J=K=>{r(U=>U.map(j=>j.id===K?{...j,selected:!j.selected}:j))},ye=()=>{const K=de(),U=new Set(K.map(j=>j.id));r(j=>j.map(re=>U.has(re.id)?{...re,selected:!0}:re))},Pe=()=>{r(K=>K.map(U=>({...U,selected:!1})))},ue=async K=>{var j,re,se,Ce,be,me,ie,he,Se,De,Be,Et,ut,ct,vt,nt,oe,kt,pr,Os,Wr,Pr,fo,ji,ds,Qn,go,Au;const U=[`https://uk.openfoodfacts.org/api/v0/product/${K}.json`,`https://world.openfoodfacts.org/api/v0/product/${K}.json`];for(const _u of U)try{const Du=await fetch(_u);if(!Du.ok)continue;const mo=await Du.json();if(mo.status===1&&mo.product){const pi=mo.product,Br=((Ce=(se=(re=(j=pi.images)==null?void 0:j.front)==null?void 0:re.sizes)==null?void 0:se.full)==null?void 0:Ce.w)||((he=(ie=(me=(be=pi.images)==null?void 0:be.front)==null?void 0:me.sizes)==null?void 0:ie["400"])==null?void 0:he.w)||0,ra=((Et=(Be=(De=(Se=pi.images)==null?void 0:Se.front)==null?void 0:De.sizes)==null?void 0:Be.full)==null?void 0:Et.h)||((nt=(vt=(ct=(ut=pi.images)==null?void 0:ut.front)==null?void 0:ct.sizes)==null?void 0:vt["400"])==null?void 0:nt.h)||0;if(Br>0&&ra>0){const fi=Math.min(Br,ra),Eh=Math.max(Br,ra)/fi;if(fi<200){B(`Skipping ${K}: image too small (${Br}x${ra})`);continue}if(Eh>2.5){B(`Skipping ${K}: bad aspect ratio ${Eh.toFixed(1)} (likely cropped)`);continue}}const vo=((pr=(kt=(oe=pi.selected_images)==null?void 0:oe.front)==null?void 0:kt.display)==null?void 0:pr.en)||((Pr=(Wr=(Os=pi.selected_images)==null?void 0:Os.front)==null?void 0:Wr.display)==null?void 0:Pr.uk)||((ds=(ji=(fo=pi.selected_images)==null?void 0:fo.front)==null?void 0:ji.url)==null?void 0:ds.en)||((Au=(go=(Qn=pi.selected_images)==null?void 0:Qn.front)==null?void 0:go.url)==null?void 0:Au.uk)||pi.image_front_url||pi.image_url;if(vo){try{const fi=await fetch(vo,{method:"HEAD"});if(!fi.ok){B(`Skipping ${K}: image URL returned ${fi.status}`);continue}const yo=fi.headers.get("content-length");if(yo&&parseInt(yo)<5e3){B(`Skipping ${K}: image file too small (${yo} bytes)`);continue}}catch{}return B(`Found valid OFF image for ${K} (${Br}x${ra})`),vo}}}catch{continue}return null},Z=async K=>{if(T.current)return{...K,status:"pending"};for(;M.current;)if(await new Promise(U=>setTimeout(U,100)),T.current)return{...K,status:"pending"};if(!K.barcode)return B(`Skipping ${K.name}: no barcode`),{...K,status:"skipped",error:"No barcode"};if(K.currentImageUrl&&K.currentImageUrl.includes("storage.googleapis.com"))return B(`Skipping ${K.name}: already has processed image`),{...K,status:"skipped",error:"Already processed"};B(`Processing: ${K.name} (${K.barcode})`);try{r(se=>se.map(Ce=>Ce.id===K.id?{...Ce,status:"fetching_off"}:Ce));const U=await ue(K.barcode);if(!U)return B(`No OFF image for ${K.barcode}`),{...K,status:"no_image",error:"No image on OpenFoodFacts"};B(`Removing background for ${K.name}...`),r(se=>se.map(Ce=>Ce.id===K.id?{...Ce,offImageUrl:U,status:"processing"}:Ce));const j=await Z3(U);if(!j.success||!j.blob)return B(`Background removal failed for ${K.name}: ${j.error}`),{...K,offImageUrl:U,status:"failed",error:j.error||"Processing failed"};B(`Background removed for ${K.name}, uploading...`),r(se=>se.map(Ce=>Ce.id===K.id?{...Ce,offImageUrl:U,processedBlob:j.blob,status:"uploading"}:Ce));const re=await Zpe(j.blob,K.objectID,K.sourceIndex);return re.success?(B(`Completed: ${K.name}`),{...K,offImageUrl:U,processedBlob:j.blob,currentImageUrl:re.url??null,status:"completed"}):(B(`Upload failed for ${K.name}: ${re.error}`),{...K,offImageUrl:U,processedBlob:j.blob,status:"failed",error:re.error||"Upload failed"})}catch(U){return B(`Error processing ${K.name}: ${U}`),{...K,status:"failed",error:U instanceof Error?U.message:String(U)}}},Ve=async()=>{u(!0),M.current=!1,T.current=!1;const K=t.filter(j=>j.selected),U=K.length>0?K.filter(j=>j.barcode):t.filter(j=>j.status==="pending"&&j.barcode);if(B(`Starting batch processing of ${U.length} foods`),U.length===0){B("No foods to process!"),u(!1);return}for(let j=0;j<U.length;j++){if(T.current){B("Processing stopped by user");break}const re=U[j];B(`[${j+1}/${U.length}] Processing ${re.name}`);const se=await Z(re);r(Ce=>{const be=Ce.map(me=>me.id===re.id?se:me);return ne(be),be}),await new Promise(Ce=>setTimeout(Ce,300))}B("Batch processing complete"),u(!1),p(!1)},ve=()=>{M.current=!0,p(!0),B("Paused")},Ze=()=>{M.current=!1,p(!1),B("Resumed")},je=()=>{T.current=!0,u(!1),p(!1),B("Stopped")},de=v.useCallback(()=>{switch(y){case"with_barcode":return t.filter(K=>K.barcode);case"no_image":return t.filter(K=>!K.currentImageUrl);case"pending":return t.filter(K=>K.status==="pending"&&K.barcode);case"selected":return t.filter(K=>K.selected);default:return t}},[t,y]),q=de(),le=q.slice(w*O,(w+1)*O),G=Math.ceil(q.length/O),H=t.filter(K=>K.selected).length,ce=t.filter(K=>K.status==="pending"&&K.barcode).length,te={pending:"bg-gray-100 text-gray-600",fetching_off:"bg-blue-100 text-blue-600",processing:"bg-yellow-100 text-yellow-600",uploading:"bg-purple-100 text-purple-600",completed:"bg-green-100 text-green-600",failed:"bg-red-100 text-red-600",no_image:"bg-gray-200 text-gray-500",skipped:"bg-gray-100 text-gray-400"},ee={pending:"Pending",fetching_off:"Fetching...",processing:"Cleaning...",uploading:"Uploading...",completed:"Done",failed:"Failed",no_image:"No OFF Image",skipped:"Skipped"};return h.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[h.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Batch Image Processing"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Pull from OpenFoodFacts  Remove backgrounds  Upload to Firebase"})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[t.length>0&&!c&&h.jsxs("button",{onClick:()=>{r([]),L(!0),E({total:0,withBarcode:0,completed:0,failed:0,noImage:0,processing:0,skipped:0})},className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Change Indices"]}),h.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm ${f?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${f?"bg-green-500":"bg-yellow-500"}`}),f?"Cloud rembg":"Browser mode"]}),c?h.jsxs(h.Fragment,{children:[d?h.jsx("button",{onClick:Ze,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Resume"}):h.jsx("button",{onClick:ve,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700",children:"Pause"}),h.jsx("button",{onClick:je,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Stop"})]}):h.jsxs("button",{onClick:Ve,disabled:n||H===0&&ce===0,className:"flex items-center gap-2 px-5 py-2.5 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:[h.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),H>0?`Process Selected (${H})`:`Process All (${ce})`]})]})]}),h.jsxs("div",{className:"space-y-3",children:[n&&h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-primary-500 transition-all",style:{width:`${s}%`}})}),h.jsx("span",{className:"text-sm text-gray-500",children:a||`Loading... ${s}%`})]}),!n&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden flex",children:[h.jsx("div",{className:"h-full bg-green-500 transition-all",style:{width:`${x.completed/Math.max(x.withBarcode,1)*100}%`}}),h.jsx("div",{className:"h-full bg-red-400 transition-all",style:{width:`${x.failed/Math.max(x.withBarcode,1)*100}%`}}),h.jsx("div",{className:"h-full bg-gray-400 transition-all",style:{width:`${x.noImage/Math.max(x.withBarcode,1)*100}%`}}),h.jsx("div",{className:"h-full bg-yellow-400 animate-pulse",style:{width:`${x.processing/Math.max(x.withBarcode,1)*100}%`}})]}),h.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[h.jsxs("span",{className:"text-gray-600",children:["Total: ",h.jsx("strong",{children:x.total.toLocaleString()})]}),h.jsxs("span",{className:"text-gray-600",children:["With Barcode: ",h.jsx("strong",{children:x.withBarcode.toLocaleString()})]}),h.jsxs("span",{className:"text-green-600",children:["Completed: ",h.jsx("strong",{children:x.completed.toLocaleString()})]}),h.jsxs("span",{className:"text-red-600",children:["Failed: ",h.jsx("strong",{children:x.failed.toLocaleString()})]}),h.jsxs("span",{className:"text-gray-500",children:["No OFF: ",h.jsx("strong",{children:x.noImage.toLocaleString()})]}),x.processing>0&&h.jsxs("span",{className:"text-yellow-600 animate-pulse",children:["Processing: ",h.jsx("strong",{children:x.processing})]}),H>0&&h.jsxs("span",{className:"text-primary-600",children:["Selected: ",h.jsx("strong",{children:H})]})]})]})]})]}),h.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 flex items-center justify-between",children:[h.jsx("div",{className:"flex gap-1",children:[{value:"all",label:"All",count:t.length},{value:"with_barcode",label:"With Barcode",count:x.withBarcode},{value:"pending",label:"Pending",count:ce},{value:"no_image",label:"No Image",count:t.filter(K=>!K.currentImageUrl).length},{value:"selected",label:"Selected",count:H}].map(K=>h.jsxs("button",{onClick:()=>{C(K.value),b(0)},className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${y===K.value?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[K.label," (",K.count.toLocaleString(),")"]},K.value))}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:ye,className:"px-3 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded",children:"Select All"}),h.jsx("button",{onClick:Pe,className:"px-3 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded",children:"Deselect All"})]})]}),h.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[h.jsx("div",{className:"flex-1 overflow-auto p-6",children:D&&!n&&t.length===0?h.jsx("div",{className:"max-w-3xl mx-auto",children:h.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:[h.jsxs("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 px-6 py-5 text-white",children:[h.jsx("h2",{className:"text-xl font-bold",children:"Batch Image Processing"}),h.jsx("p",{className:"text-primary-100 text-sm mt-1",children:"Fetch images from OpenFoodFacts, remove backgrounds, straighten products, and upload to Firebase"})]}),h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-gray-500",children:[h.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-primary-600 text-white rounded-full text-xs font-bold",children:"1"}),h.jsx("span",{className:"font-medium text-gray-700",children:"Select indices to load foods from"})]}),h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 mb-6",children:gr.map(K=>h.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border-2 cursor-pointer transition-all ${P.has(K)?"border-primary-500 bg-primary-50 shadow-sm":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[h.jsx("input",{type:"checkbox",checked:P.has(K),onChange:()=>{A(U=>{const j=new Set(U);return j.has(K)?j.delete(K):j.add(K),j})},className:"w-4 h-4 text-primary-600 rounded"}),h.jsx("span",{className:"text-sm font-medium text-gray-700 truncate",children:K.replace(/_/g," ")})]},K))}),h.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-6 border-b border-gray-200",children:[h.jsx("button",{onClick:()=>A(new Set(gr)),className:"px-3 py-1.5 text-sm text-primary-700 bg-primary-50 hover:bg-primary-100 rounded-lg transition-colors",children:"Select All"}),h.jsx("button",{onClick:()=>A(new Set),className:"px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Clear All"}),h.jsxs("span",{className:"text-sm text-gray-400",children:[P.size," of ",gr.length," selected"]})]}),h.jsxs("button",{onClick:W,disabled:P.size===0,className:"w-full flex items-center justify-center gap-3 px-6 py-4 text-lg font-semibold text-white bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 rounded-xl shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none",children:[h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Load ",P.size>0?`Foods from ${P.size} ${P.size===1?"Index":"Indices"}`:"Foods"]}),P.size===0&&h.jsx("p",{className:"text-center text-sm text-red-500 mt-3",children:"Select at least one index to continue"})]})]})}):n?h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsxs("div",{className:"flex flex-col items-center gap-3",children:[h.jsxs("svg",{className:"w-8 h-8 animate-spin text-primary-600",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),h.jsx("span",{className:"text-gray-500",children:a||"Loading foods..."})]})}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"grid gap-2",children:le.map(K=>h.jsxs("div",{className:`bg-white rounded-lg border p-3 flex items-center gap-3 cursor-pointer transition-colors ${K.selected?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>J(K.id),children:[h.jsx("input",{type:"checkbox",checked:K.selected,onChange:()=>J(K.id),onClick:U=>U.stopPropagation(),className:"w-4 h-4 text-primary-600 rounded"}),h.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[h.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center overflow-hidden cursor-pointer hover:ring-2 hover:ring-primary-400 transition-all",onClick:U=>{U.stopPropagation(),K.currentImageUrl&&X({url:K.currentImageUrl,title:`${K.name} - Current`})},children:K.currentImageUrl?h.jsx("img",{src:K.currentImageUrl,alt:"",className:"w-full h-full object-contain"}):h.jsx("span",{className:"text-[8px] text-gray-400",children:"None"})}),h.jsx("svg",{className:"w-3 h-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),h.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center overflow-hidden cursor-pointer hover:ring-2 hover:ring-blue-400 transition-all",onClick:U=>{U.stopPropagation(),K.offImageUrl&&X({url:K.offImageUrl,title:`${K.name} - OpenFoodFacts`})},children:K.offImageUrl?h.jsx("img",{src:K.offImageUrl,alt:"",className:"w-full h-full object-contain"}):h.jsx("span",{className:"text-[8px] text-gray-400",children:"OFF"})}),h.jsx("svg",{className:"w-3 h-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),h.jsx("div",{className:"w-10 h-10 bg-[#e8e8e8] rounded flex items-center justify-center overflow-hidden cursor-pointer hover:ring-2 hover:ring-green-400 transition-all",onClick:U=>{U.stopPropagation(),K.processedBlob&&X({url:URL.createObjectURL(K.processedBlob),title:`${K.name} - Cleaned`})},children:K.processedBlob?h.jsx("img",{src:URL.createObjectURL(K.processedBlob),alt:"",className:"w-full h-full object-contain"}):h.jsx("span",{className:"text-[8px] text-gray-400",children:"Clean"})})]}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:"font-medium text-gray-900 truncate text-sm",children:K.name}),h.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[K.barcode&&h.jsx("span",{className:"font-mono",children:K.barcode}),h.jsx("span",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-[10px]",children:K.sourceIndex.replace(/_/g," ")})]})]}),h.jsxs("div",{className:"flex-shrink-0 text-right",children:[h.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${te[K.status]}`,children:[["fetching_off","processing","uploading"].includes(K.status)&&h.jsxs("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),ee[K.status]]}),K.error&&h.jsx("div",{className:"text-[10px] text-red-500 mt-0.5 max-w-[100px] truncate",title:K.error,children:K.error})]})]},K.id))}),G>1&&h.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4",children:[h.jsx("button",{onClick:()=>b(K=>Math.max(0,K-1)),disabled:w===0,className:"px-3 py-1 text-sm bg-white border rounded hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),h.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",w+1," of ",G]}),h.jsx("button",{onClick:()=>b(K=>Math.min(G-1,K+1)),disabled:w>=G-1,className:"px-3 py-1 text-sm bg-white border rounded hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})]})}),h.jsxs("div",{className:"w-80 border-l border-gray-200 bg-gray-900 flex flex-col",children:[h.jsx("div",{className:"px-4 py-2 border-b border-gray-700 text-gray-400 text-xs font-medium uppercase",children:"Processing Log"}),h.jsx("div",{className:"flex-1 overflow-auto p-3 font-mono text-xs text-gray-300 space-y-1",children:I.length===0?h.jsx("div",{className:"text-gray-500",children:"No activity yet..."}):I.map((K,U)=>h.jsx("div",{className:"break-all",children:K},U))})]})]}),Q&&h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:()=>X(null),children:h.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh] flex flex-col items-center",children:[h.jsx("button",{onClick:()=>X(null),className:"absolute -top-12 right-0 p-2 text-white/80 hover:text-white transition-colors",children:h.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),h.jsx("div",{className:"absolute -top-12 left-0 text-white font-medium",children:Q.title}),h.jsx("div",{className:"rounded-lg overflow-hidden shadow-2xl",style:{backgroundImage:"linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%)",backgroundSize:"20px 20px",backgroundPosition:"0 0, 0 10px, 10px -10px, -10px 0px",backgroundColor:"#fff"},onClick:K=>K.stopPropagation(),children:h.jsx("img",{src:Q.url,alt:Q.title,className:"max-w-[85vw] max-h-[80vh] object-contain"})}),h.jsx("div",{className:"mt-4 text-white/60 text-sm",children:"Click outside or press ESC to close"})]})})]})},DA="gRLnCJAV5rWycCc6PKrAUYHb",efe=["nestle.com","unilever.com","pepsico.com","cocacola.com","kellogs.com","kraftheinz.com","danone.com","generalmills.com","mondelez.com","mars.com","ferrero.com","heinz.com","campbells.com","kelloggs.co.uk","walkers.co.uk","cadbury.co.uk","mcvities.co.uk","weetabix.co.uk","muller.co.uk","warburtons.co.uk","hovis.co.uk","primula.co.uk"],tfe=["tesco.com","sainsburys.co.uk","asda.com","morrisons.com","waitrose.com","ocado.com","amazon.co.uk","ebay.co.uk"];async function QP(e,t,r=10,n){let i="";if(n==="fast_foods_database"){if(t&&t.trim())i=`${t} restaurant outlet storefront`;else{const s=e.split(" ");i=`${s.slice(0,Math.min(2,s.length)).join(" ")} restaurant outlet storefront`}console.log(` Fast food mode: Original "${t} ${e}"  Restaurant search "${i}"`)}else t&&t.trim()?i=`${t} ${e}`:i=e,i=i.replace(/\b(zero sugar|sugar free|no sugar|caffeine free)\b/gi,"").replace(/\b\d+ml\b/gi,"").replace(/\b\d+g\b/gi,"").replace(/\bpack of \d+\b/gi,"").replace(/\bmultipack\b/gi,"").replace(/\s+/g," ").trim(),console.log(`Original: "${t} ${e}"  Cleaned: "${i}"`);try{console.log("[searchSerpApiImages] About to call searchGoogleImagesViaSearchAPI with query:",i);const s=await rfe(i,r);return console.log("[searchSerpApiImages] Got results back:",s.length),s}catch(s){throw console.error("[searchSerpApiImages] SearchAPI search error:",s),s}}async function rfe(e,t){var l;console.log("[searchGoogleImagesViaSearchAPI] ENTRY - query:",e,"maxResults:",t),console.log("[searchGoogleImagesViaSearchAPI] API KEY exists:",DA.length>0);const r=new URLSearchParams({api_key:DA,engine:"google_images",q:e,hl:"en",gl:"uk",num:String(Math.min(t,20))});console.log("[searchGoogleImagesViaSearchAPI] URL:",`https://www.searchapi.io/api/v1/search?${r}`);const n=await fetch(`https://www.searchapi.io/api/v1/search?${r}`,{method:"GET",headers:{Accept:"application/json"}});if(!n.ok){let c="SearchAPI request failed";try{const u=await n.json();console.error("SearchAPI error response:",u),c=u.error||u.message||c}catch{c=`HTTP ${n.status}: ${n.statusText}`}throw new Error(c)}const i=await n.json();console.log("SearchAPI response for query:",e),console.log("Response keys:",Object.keys(i)),console.log("Number of results:",((l=i.images)==null?void 0:l.length)||0);const s=i.images||[];return s.length===0&&console.warn("No images found in SearchAPI response:",i),s.map((c,u)=>({...c,position:u+1})).map(c=>{var y,C,w,b,x,E,I,k;const u=((y=c.original)==null?void 0:y.link)||c.thumbnail||"";let d="";try{d=((C=c.source)==null?void 0:C.name)||new URL(((w=c.source)==null?void 0:w.link)||u).hostname.replace("www.","")}catch{d=""}const p=efe.some(P=>d.includes(P)),f=tfe.some(P=>d.includes(P));let m=50;return p&&(m+=30),c.position<=3&&(m+=10),((b=c.original)==null?void 0:b.width)>800&&(m+=10),((x=c.original)==null?void 0:x.height)>800&&(m+=10),{url:u,thumbnail:c.thumbnail||u,title:c.title||"",domain:d,width:(E=c.original)==null?void 0:E.width,height:(I=c.original)==null?void 0:I.height,isManufacturerSite:p,qualityScore:m,disqualified:f,disqualifyReason:f?`Retailer site (${d})`:void 0,source:(k=c.source)==null?void 0:k.name}}).sort((c,u)=>u.qualityScore-c.qualityScore)}async function XP(e,t){return new Promise((r,n)=>{const i=new Image;i.crossOrigin="anonymous",i.onload=()=>{try{let s=function(G,H){const ce=G[H],te=G[H+1],ee=G[H+2],K=G[H+3];if(x++,K<200){C++;return}if(ce>240&&te>240&&ee>240){y++;return}if(o(ce,te,ee)){b++,w++;return}w++},o=function(G,H,ce){if(G>H&&H>ce){const te=G/H,ee=G/ce;if(te>1.05&&te<1.7&&ee>1.2&&ee<2.5){const K=(G+H+ce)/3;if(K>60&&K<220)return!0}}return!1};t==null||t(20);const a=document.createElement("canvas"),l=a.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("Could not get canvas context");const c=Math.min(1,400/Math.max(i.width,i.height));a.width=i.width*c,a.height=i.height*c,l.drawImage(i,0,0,a.width,a.height),t==null||t(30);const d=l.getImageData(0,0,a.width,a.height).data,p=d.length/4,f=Math.floor(a.width*.1),m=Math.floor(a.height*.1);let y=0,C=0,w=0,b=0,x=0;for(let G=0;G<m;G++)for(let H=0;H<a.width;H+=2){const ce=(G*a.width+H)*4;s(d,ce)}for(let G=a.height-m;G<a.height;G++)for(let H=0;H<a.width;H+=2){const ce=(G*a.width+H)*4;s(d,ce)}for(let G=m;G<a.height-m;G+=2){for(let H=0;H<f;H++){const ce=(G*a.width+H)*4;s(d,ce)}for(let H=a.width-f;H<a.width;H++){const ce=(G*a.width+H)*4;s(d,ce)}}t==null||t(50);const E=x>0?y/x:0,I=x>0?C/x:0,k=E+I,P=x>0?b/x:0,A=E>.7,D=I>.5,L=k>.75,M=P>.05;t==null||t(60);const T=[];let O=!1,Q=0;for(let G=1;G<a.height-1;G+=2)for(let H=1;H<a.width-1;H+=2){const ce=(G*a.width+H)*4,te=(d[ce]+d[ce+1]+d[ce+2])/3,ee=ce+4,K=ce+a.width*4;if(ee<d.length&&K<d.length){const U=(d[ee]+d[ee+1]+d[ee+2])/3,j=(d[K]+d[K+1]+d[K+2])/3;(Math.abs(te-U)>100||Math.abs(te-j)>100)&&Q++}}Q/(p/4)>.08&&(O=!0,T.push("Text detected")),t==null||t(75);let B=0,W=0,ne=0;for(let G=0;G<d.length;G+=16){const H=d[G],ce=d[G+1],te=d[G+2],ee=Math.max(H,ce,te),K=Math.min(H,ce,te),U=ee>0?(ee-K)/ee:0,j=(H+ce+te)/3;U>.5&&j>150&&(B++,H>200&&ce<100&&te<100&&W++,H>200&&ce>180&&te<100&&ne++)}const J=B/(d.length/16),ye=(W+ne)/(d.length/16);J>.1&&(O=!0,T.push("Promotional graphics")),ye>.02&&(O=!0,T.includes("Promotional banner")||T.push("Promotional banner"));let Pe=0,ue=0;const Z=Math.floor(a.width*.2),Ve=Math.floor(a.width*.8),ve=Math.floor(a.height*.2),Ze=Math.floor(a.height*.8);for(let G=ve;G<Ze;G+=3)for(let H=Z;H<Ve;H+=3){const ce=(G*a.width+H)*4;ue++,o(d[ce],d[ce+1],d[ce+2])&&Pe++}const je=ue>0?Pe/ue:0,de=M||je>.03;de&&(O=!0,T.push("Person/hand detected")),t==null||t(90);let q=0;A?q+=50:D?q+=45:L?q+=30:q+=0,O?(T.includes("Text detected")&&(q-=20),T.includes("Promotional graphics")&&(q-=15),T.includes("Promotional banner")&&(q-=15),T.includes("Person/hand detected")&&(q-=30)):q+=40,de||(q+=10),q=Math.max(0,Math.min(100,q));const le=L&&!O&&!de;t==null||t(100),r({hasWhiteBackground:A||D,backgroundConfidence:Math.round(k*100),hasOverlay:O,overlayTypes:T,isCleanProductShot:le,qualityScore:Math.round(q)})}catch(s){n(s)}},i.onerror=()=>{n(new Error("Failed to load image for analysis"))},i.src=e})}function nfe(){return DA.length>0}function i2(){return`To use SearchAPI Image Search, you need to:

1. Get a SearchAPI API Key:
   - Go to https://www.searchapi.io/
   - Sign up for an account
   - Copy your API key from the dashboard

2. Update .env.local:
   - Add: VITE_SEARCHAPI_KEY=your_api_key_here

Note: SearchAPI has a free tier of 100 searches/month, then paid plans starting at $20/month.`}const s2=[{us:/\bcolor\b/gi,uk:"colour"},{us:/\bflavor\b/gi,uk:"flavour"},{us:/\bfavorite\b/gi,uk:"favourite"},{us:/\bhonor\b/gi,uk:"honour"},{us:/\btheater\b/gi,uk:"theatre"},{us:/\bcenter\b/gi,uk:"centre"},{us:/\bmeter\b/gi,uk:"metre"},{us:/\bliter\b/gi,uk:"litre"},{us:/\bfiber\b/gi,uk:"fibre"},{us:/\bdefense\b/gi,uk:"defence"},{us:/\bpractice\b/gi,uk:"practise"},{us:/\banalyze\b/gi,uk:"analyse"},{us:/\borganize\b/gi,uk:"organise"},{us:/\brealize\b/gi,uk:"realise"},{us:/\bcriticize\b/gi,uk:"criticise"},{us:/\bspecialize\b/gi,uk:"specialise"},{us:/\bcandy\b/gi,uk:"sweets"},{us:/\bcookies?\b/gi,uk:"biscuits"},{us:/\bfries\b/gi,uk:"chips"},{us:/\bchips\b/gi,uk:"crisps"},{us:/\beggplant\b/gi,uk:"aubergine"},{us:/\bzucchini\b/gi,uk:"courgette"},{us:/\bcilantro\b/gi,uk:"coriander"},{us:/\barugula\b/gi,uk:"rocket"},{us:/\bbell pepper\b/gi,uk:"pepper"}],ife=["kraft singles","jell-o","cool whip","velveeta","cheez whiz","pop tarts","goldfish crackers","cheetos","doritos nacho cheese","mountain dew","dr pepper","root beer","gatorade","big red","saltines","graham crackers","hershey","reese's","butterfinger","twinkie","hostess","wonder bread","hawaiian punch","kool-aid"],sfe=["tesco","sainsbury","asda","waitrose","morrisons","co-op","marks & spencer","boots","greggs","pret","costa","walkers","cadbury","mcvitie","hobnob","jaffa cake","penguin","yorkshire","tetley","pg tips","hovis","warburtons","kingsmill","heinz beans","branston","marmite","bovril","oxo","bisto","robinsons","ribena","lucozade","irn-bru","vimto","quorn","linda mccartney","richmond","birds eye","galaxy","wispa","crunchie","dairy milk","flake","curly wurly"],mg={easternEuropean:/[]/gi,asian:/[\u4e00-\u9fff\u3040-\u309f\u30a0-\u30ff\uac00-\ud7af]/g,cyrillic:/[--]/g,arabic:/[\u0600-\u06FF]/g,excessiveAccents:/[]/gi};function ofe(e,t,r){const n=`${t||""} ${e}`.toLowerCase(),i=[];let s=50;const o=sfe.some(C=>n.includes(C.toLowerCase()));o&&(s+=40,i.push("UK brand detected"));const a=ife.some(C=>n.includes(C.toLowerCase()));a&&(s-=40,i.push("US brand detected"));let l=0;for(const C of s2){const w=n.match(C.us);w&&(l+=w.length,i.push(`US spelling: "${w[0]}" (UK: ${C.uk})`))}if(l>0&&(s-=l*15),r&&typeof r=="string"){const C=r.toLowerCase(),w=C.replace(/[,()[\].:;]/g," ").split(/\s+/).filter(E=>E.length>2);let b=0;const x=[];for(const E of s2){const I=C.match(E.us);I&&(b+=I.length,x.push(...I))}if(w.length>0){const E=b/w.length*100;E>5?(s=0,i.push(`REJECT: ${Math.round(E)}% of ingredients use US spelling (${b}/${w.length} words: ${x.join(", ")})`)):E>2?(s-=25,i.push(`Ingredients contain ${Math.round(E)}% US spelling (${b}/${w.length} words: ${x.join(", ")})`)):b>0&&(s-=10,i.push(`Some US spelling in ingredients: ${x.join(", ")}`))}}let c=0;const u=n.match(mg.easternEuropean);u&&(c+=u.length,i.push(`Eastern European characters: ${u.join(", ")}`));const d=n.match(mg.asian);d&&(c+=d.length*2,i.push("Asian characters detected"));const p=n.match(mg.cyrillic);p&&(c+=p.length*2,i.push("Cyrillic characters detected"));const f=n.match(mg.arabic);f&&(c+=f.length*2,i.push("Arabic characters detected"));const m=n.match(mg.excessiveAccents);if(m){const C=m.length/n.length;C>.15?(c+=m.length,i.push(`Excessive accents (${Math.round(C*100)}% of text)`)):C>.05&&C<=.15&&(s-=10,i.push(`Some French accents (${Math.round(C*100)}% - possibly UK French product)`))}return c>0&&(s-=c*5),/\b(ml|cl|litre|gramme?s?)\b/gi.test(n)&&(s+=5),/\b(fl oz|fluid ounce|oz|ounce)\b/gi.test(n)&&(s-=10,i.push("US measurements detected")),/\b(crisps|biscuits|courgette|aubergine)\b/gi.test(n)&&(s+=10,i.push("UK terminology detected")),s=Math.max(0,Math.min(100,s)),{isLikelyUK:s>=40,confidence:s,flags:i,usSpellingCount:l,foreignCharCount:c,ukBrandMatch:o,usBrandMatch:a}}function dm(e,t=40){const r=[],n=[];for(const a of e)ofe(a.name,a.brandName,a.ingredients||null).confidence>=t?r.push(a):n.push(a);const i=e.length,s=r.length,o=n.length;return{ukProducts:r,nonUkProducts:n,stats:{total:i,ukCount:s,nonUkCount:o,ukPercentage:i>0?Math.round(s/i*100):0,nonUkPercentage:i>0?Math.round(o/i*100):0}}}const o2="WK0TIF84M2",afe="577cc4ee3fed660318917bbb54abfb2e",lfe=({onBack:e})=>{const[t,r]=v.useState([]),[n,i]=v.useState(!1),[s,o]=v.useState(0),[a,l]=v.useState(""),[c,u]=v.useState(!1),[d,p]=v.useState(!1),[f,m]=v.useState(0),[y,C]=v.useState(0),[w,b]=v.useState("pending"),[x,E]=v.useState(0),[I,k]=v.useState({total:0,completed:0,failed:0,noResults:0,processing:0}),[P,A]=v.useState([]),[D,L]=v.useState(new Set),[M,T]=v.useState(!0),[O,Q]=v.useState(!1),[X,B]=v.useState(!1),[W,ne]=v.useState(!1),[J,ye]=v.useState(!1),[Pe,ue]=v.useState(!1),[Z,Ve]=v.useState(!1),[ve,Ze]=v.useState(!1),[je,de]=v.useState(!1),[q,le]=v.useState(!1),[G,H]=v.useState(null),[ce,te]=v.useState(null),[ee,K]=v.useState(""),[U,j]=v.useState(!1),[re,se]=v.useState(""),[Ce,be]=v.useState(!1),[me,ie]=v.useState(null),he=v.useRef(!1),Se=v.useRef(!1),De=500,Be="nutrasafe_image_scraper_progress",Et=v.useRef(null),ut=v.useCallback(()=>{if(t.length===0)return;const $={savedAt:new Date().toISOString(),foods:t.map(ae=>({id:ae.id,objectID:ae.objectID,name:ae.name,brandName:ae.brandName,barcode:ae.barcode,currentImageUrl:ae.currentImageUrl,sourceIndex:ae.sourceIndex,status:ae.status,selectedImageUrl:ae.selectedImageUrl,confidence:ae.confidence,nutritionData:ae.nutritionData,nutritionStatus:ae.nutritionStatus,error:ae.error,wasProcessed:ae.wasProcessed})),stats:I,processingLog:P.slice(-20),currentProcessingIndex:f,totalToProcess:y,isPaused:d,settings:{scrapeNutrition:Z,scrapeServingSize:ve,scrapeIngredients:je,nutritionOnlyMode:q,filterUKOnly:X,filterNoImages:W,filterZeroCalories:J,excludeDrinks:Pe}};try{localStorage.setItem(Be,JSON.stringify($)),console.log(` Progress saved: ${t.length} foods`)}catch(ae){console.warn("Failed to save progress to localStorage:",ae)}},[t,I,P,f,y,d,Z,ve,je,q,X,W,J,Pe]);v.useEffect(()=>{if(t.length!==0)return Et.current&&clearTimeout(Et.current),Et.current=setTimeout(()=>{ut()},2e3),()=>{Et.current&&clearTimeout(Et.current)}},[t,ut]),v.useEffect(()=>{var $;try{const ae=localStorage.getItem(Be);if(ae){const z=JSON.parse(ae),Re=new Date(z.savedAt);if((Date.now()-Re.getTime())/(1e3*60*60)<24&&(($=z.foods)==null?void 0:$.length)>0){console.log(` Found saved progress from ${Re.toLocaleString()} (${z.foods.length} foods)`);const Oe=z.settings||{},ke=[];Oe.nutritionOnlyMode?ke.push(" Nutrition only (no images)"):ke.push(" Image search"),Oe.scrapeNutrition&&ke.push("nutrition"),Oe.scrapeServingSize&&ke.push("serving size"),Oe.scrapeIngredients&&ke.push("ingredients");const Te=z.foods.filter(Ie=>Ie.wasProcessed||Ie.status==="ready"||Ie.status==="completed").length,He=z.foods.length-Te;if(window.confirm(`Found saved progress from ${Re.toLocaleString()}:

 ${z.foods.length} foods loaded
 ${Te} processed / ${He} remaining
 Settings: ${ke.join(", ")||"default"}

Restore this progress?
(Settings will be restored as they were. You can change them later without losing progress.)`)){const Ie=z.foods.map(Ue=>({...Ue,selected:!1,calories:Ue.calories||void 0,dontShowImage:Ue.dontShowImage||!1,searchResults:[],analysis:null,analysisProgress:0,wasProcessed:Ue.wasProcessed||!1}));r(Ie),z.stats&&k(z.stats),z.processingLog&&A(z.processingLog),z.currentProcessingIndex!==void 0&&m(z.currentProcessingIndex),z.totalToProcess!==void 0&&C(z.totalToProcess),z.isPaused!==void 0&&(p(z.isPaused),he.current=z.isPaused),Oe.scrapeNutrition!==void 0&&Ve(Oe.scrapeNutrition),Oe.scrapeServingSize!==void 0&&Ze(Oe.scrapeServingSize),Oe.scrapeIngredients!==void 0&&de(Oe.scrapeIngredients),Oe.nutritionOnlyMode!==void 0&&le(Oe.nutritionOnlyMode),Oe.filterUKOnly!==void 0&&B(Oe.filterUKOnly),Oe.filterNoImages!==void 0&&ne(Oe.filterNoImages),Oe.filterZeroCalories!==void 0&&ye(Oe.filterZeroCalories),Oe.excludeDrinks!==void 0&&ue(Oe.excludeDrinks),T(!1),console.log(` Restored ${Ie.length} foods from saved progress`),console.log(" Restored settings:",Oe),z.currentProcessingIndex>0&&console.log(` Processing was at item ${z.currentProcessingIndex}/${z.totalToProcess}`)}}}}catch(ae){console.warn("Failed to load saved progress:",ae)}},[]);const ct=v.useCallback(()=>{localStorage.removeItem(Be),console.log(" Cleared saved progress")},[]),vt=v.useCallback(()=>{r($=>$.map(ae=>({...ae,wasProcessed:!1}))),A($=>[...$,`${new Date().toLocaleTimeString()}:  Reset all processed flags - foods can be reprocessed`])},[]),nt=$=>{if(!$)return!1;const ae=$.toLowerCase();return["water","drink","juice","soda","cola","pepsi","coke","tea","coffee","latte","cappuccino","espresso","mocha","beverage","smoothie","shake","milkshake","frappuccino","lemonade","squash","cordial","pop","fizzy","sprite","fanta","irn bru","ribena","lucozade","energy drink","sports drink","vitamin water","iced tea","green tea","black tea","herbal tea","hot chocolate","cocoa drink","chocolate drink","milk drink","flavoured milk","almond milk","oat milk","soy milk","protein shake","meal replacement drink"].some(Re=>ae.includes(Re))},oe=$=>{console.log($),A(ae=>[...ae.slice(-50),`${new Date().toLocaleTimeString()}: ${$}`])},kt=async $=>{try{const ae="gRLnCJAV5rWycCc6PKrAUYHb";let z=`${$.brandName||""} ${$.name} nutrition serving size site:asda.com OR site:tesco.com`.trim();const Re=new URLSearchParams({api_key:ae,engine:"google",q:z,hl:"en",gl:"uk",num:"5"}),fe=await fetch(`https://www.searchapi.io/api/v1/search?${Re}`,{method:"GET",headers:{Accept:"application/json"}});if(!fe.ok)return console.error("SearchAPI nutrition request failed:",fe.status),null;const Oe=await fe.json(),ke=Oe.knowledge_graph,Te=Oe.answer_box;if(ke&&ke.nutrition_facts){const Ge=ke.nutrition_facts,Ie={calories:parseFloat(Ge.calories)||void 0,protein:parseFloat(Ge.protein)||void 0,carbs:parseFloat(Ge.carbohydrates)||void 0,fat:parseFloat(Ge.fat)||void 0,saturatedFat:parseFloat(Ge.saturated_fat)||void 0,fiber:parseFloat(Ge.fiber)||void 0,sugar:parseFloat(Ge.sugar)||void 0,sodium:parseFloat(Ge.sodium)||void 0,servingSize:Ge.serving_size,source:"Google Knowledge Graph"},Ue={source:Ie.source};return Z&&(Ie.calories!==void 0&&(Ue.calories=Ie.calories),Ie.protein!==void 0&&(Ue.protein=Ie.protein),Ie.carbs!==void 0&&(Ue.carbs=Ie.carbs),Ie.fat!==void 0&&(Ue.fat=Ie.fat),Ie.saturatedFat!==void 0&&(Ue.saturatedFat=Ie.saturatedFat),Ie.fiber!==void 0&&(Ue.fiber=Ie.fiber),Ie.sugar!==void 0&&(Ue.sugar=Ie.sugar),Ie.sodium!==void 0&&(Ue.sodium=Ie.sodium)),ve&&Ie.servingSize&&(Ue.servingSize=Ie.servingSize),Ue}if(Te&&Te.nutrition_info){const Ge=Te.nutrition_info,Ie={calories:parseFloat(Ge.calories)||void 0,protein:parseFloat(Ge.protein)||void 0,carbs:parseFloat(Ge.carbs)||void 0,fat:parseFloat(Ge.fat)||void 0,source:"Google Answer Box"},Ue={source:Ie.source};return Z&&(Ie.calories!==void 0&&(Ue.calories=Ie.calories),Ie.protein!==void 0&&(Ue.protein=Ie.protein),Ie.carbs!==void 0&&(Ue.carbs=Ie.carbs),Ie.fat!==void 0&&(Ue.fat=Ie.fat)),Ue}const He=Oe.organic_results||[];if(He.length>0){let Ge=null;for(let yt=0;yt<Math.min(3,He.length);yt++){const ht=He[yt].link;if(ht)try{const We=`https://corsproxy.io/?${encodeURIComponent(ht)}`;console.log(`Fetching page ${yt+1}: ${ht}`);const Qe=await fetch(We,{headers:{Accept:"text/html,application/xhtml+xml,application/xml"}});if(!Qe.ok){console.log(`Page fetch failed with status ${Qe.status}`);continue}const qe=await Qe.text();console.log(`Fetched ${qe.length} bytes from page ${yt+1}`);const Vt=qe.toLowerCase(),st=/per\s*100\s*g/i.test(Vt),Mr=[...Vt.matchAll(/per\s+[^\s<]{1,20}/gi)];console.log(` Page ${yt+1} - All "per X" patterns found:`,Mr.slice(0,10).map(Zl=>Zl[0]));const mn=/per\s+(?!100\s*g)(\d+\s*g\b|piece|bar|slice|serving|portion|biscuit|pack|sachet|pot|unit|item|cookie|cracker|tablet|capsule|scoop)/i.test(Vt),wo=mn,Ky=st&&!wo;console.log(` Page ${yt+1} - has100g=${st}, hasOtherPerColumn=${mn}, hasOnly100g=${Ky}`);const nr=pr(qe);if(nr&&Object.keys(nr).length>2){const Zl=new URL(ht).hostname.replace("www.","");if(wo){console.log(` Page ${yt+1} has per-serving data - using this source`);const Pn={source:Zl,sourceUrl:ht};if(Z&&(nr.calories!==void 0&&(Pn.calories=nr.calories),nr.protein!==void 0&&(Pn.protein=nr.protein),nr.carbs!==void 0&&(Pn.carbs=nr.carbs),nr.fat!==void 0&&(Pn.fat=nr.fat),nr.saturatedFat!==void 0&&(Pn.saturatedFat=nr.saturatedFat),nr.fiber!==void 0&&(Pn.fiber=nr.fiber),nr.sugar!==void 0&&(Pn.sugar=nr.sugar),nr.sodium!==void 0&&(Pn.sodium=nr.sodium),nr.salt!==void 0&&(Pn.salt=nr.salt)),ve&&nr.servingSize&&(Pn.servingSize=nr.servingSize),je&&nr.ingredients&&(Pn.ingredients=nr.ingredients),ve){if(!Pn.servingSize){console.log(` Page ${yt+1} has "per serving" indicators but NO serving size quantity found`),console.log('   Looked for: "serving size: Xg", "per piece (Xg)", header "Per Xg"'),console.log("   Rejecting data - will try next site"),Ge||(Ge={data:nr,source:Zl,url:ht});continue}if(["per serving","per portion","serving","portion"].includes(String(Pn.servingSize).toLowerCase().trim())){console.log(` Page ${yt+1} has vague serving size "${Pn.servingSize}" (no quantity)`),console.log('   Need specific size like "30g", "per piece (50g)", etc.'),Ge||(Ge={data:nr,source:Zl,url:ht});continue}}return console.log(` Page ${yt+1} validated: per-serving data with serving size "${Pn.servingSize}"`),Pn}Ky&&!Ge&&(console.log(` Page ${yt+1} only has per-100g data - saving as fallback, trying next site...`),Ge={data:nr,source:Zl,url:ht})}else console.log(`Insufficient nutrition data from page ${yt+1}: ${Object.keys(nr||{}).length} fields`)}catch(We){console.log(`Failed to fetch page ${yt+1}:`,We instanceof Error?We.message:"Unknown error");continue}}const Ie=$.sourceIndex==="fast_foods_database",Ue=ve||Ie;if(Ge&&Ue)Ie?(console.log(" Fast food: No per-meal data found - per-100g data REJECTED"),console.log('   Fast food must have per-meal nutrition (e.g., "1 Big Mac = 550 kcal")')):(console.log(" No per-serving data found in 3 sites - per-100g data REJECTED"),console.log(`   Found per-100g data from ${Ge.source} but no serving size specified`),console.log('   To accept this data, page must have serving size like "per 30g serving" or "per piece (50g)"'));else if(Ge&&!Ue){console.log(" No per-serving data found - using per-100g fallback (serving size scraping disabled)");const yt={source:Ge.source+" (per 100g)",sourceUrl:Ge.url};if(Z){const dt=Ge.data;dt.calories!==void 0&&(yt.calories=dt.calories),dt.protein!==void 0&&(yt.protein=dt.protein),dt.carbs!==void 0&&(yt.carbs=dt.carbs),dt.fat!==void 0&&(yt.fat=dt.fat),dt.saturatedFat!==void 0&&(yt.saturatedFat=dt.saturatedFat),dt.fiber!==void 0&&(yt.fiber=dt.fiber),dt.sugar!==void 0&&(yt.sugar=dt.sugar),dt.sodium!==void 0&&(yt.sodium=dt.sodium),dt.salt!==void 0&&(yt.salt=dt.salt)}return ve&&Ge.data.servingSize&&(yt.servingSize=Ge.data.servingSize),je&&Ge.data.ingredients&&(yt.ingredients=Ge.data.ingredients),yt}const Pt=He.slice(0,3).map(yt=>`${yt.snippet||""} ${yt.title||""}`).join(" "),It=Pt.match(/(\d+(?:\.\d+)?)\s*(?:calories|kcal|cal)/i),Rt=Pt.match(/(\d+(?:\.\d+)?)\s*g?\s*protein/i),ft=Pt.match(/(\d+(?:\.\d+)?)\s*g?\s*(?:carb(?:ohydrate)?s?|carbs)/i),_t=Pt.match(/(\d+(?:\.\d+)?)\s*g?\s*(?:total\s+)?fat/i),Nt=Pt.match(/(\d+(?:\.\d+)?)\s*g?\s*saturated\s*fat/i),Xn=Pt.match(/(\d+(?:\.\d+)?)\s*g?\s*(?:fiber|fibre)/i),Vr=Pt.match(/(\d+(?:\.\d+)?)\s*g?\s*sugar/i),Nr=Pt.match(/(\d+(?:\.\d+)?)\s*(?:mg|g)?\s*sodium/i),Ka=Pt.match(/(\d+(?:\.\d+)?)\s*g?\s*salt/i),ku=Pt.match(/(?:serving\s+size|per\s+serving):\s*([^.,;\n]*?\d+\s*(?:g|ml|oz|fl\s*oz|cup|tbsp|tsp|litre|liter|l)[^.,;\n]*)/i),Iu=Pt.match(/ingredients?[:\s]+([^.]{30,500})/i);if(It||Rt||ft||_t){const yt={source:"Google Snippets"};if(Z&&(It&&(yt.calories=parseFloat(It[1])),Rt&&(yt.protein=parseFloat(Rt[1])),ft&&(yt.carbs=parseFloat(ft[1])),_t&&(yt.fat=parseFloat(_t[1])),Nt&&(yt.saturatedFat=parseFloat(Nt[1])),Xn&&(yt.fiber=parseFloat(Xn[1])),Vr&&(yt.sugar=parseFloat(Vr[1])),Nr&&(yt.sodium=parseFloat(Nr[1])),Ka&&(yt.salt=parseFloat(Ka[1]))),ve&&ku&&(yt.servingSize=ku[1].trim()),je&&Iu&&(yt.ingredients=Iu[1].trim()),ve&&!yt.servingSize)console.log(" Google Snippets: Found nutrition but NO serving size - rejecting"),console.log('   Need serving size to accept data when "Require Serving Size" is enabled');else return yt}}if($.barcode){console.log(` Final fallback: Trying Open Food Facts API with barcode: ${$.barcode}`);try{const Ge=await fetch(`https://world.openfoodfacts.org/api/v2/product/${$.barcode}.json`,{headers:{Accept:"application/json"}});if(Ge.ok){const Ie=await Ge.json();if(Ie.status===1&&Ie.product){const Ue=Ie.product,Pt=Ue.nutriments||{},It=Pt["energy-kcal_serving"]!==void 0||Pt.energy_serving!==void 0;if(It||Pt["energy-kcal_100g"]!==void 0){const Rt=It,ft=Rt?"_serving":"_100g";let _t;Ue.serving_size?_t=Ue.serving_size:Ue.serving_quantity&&(_t=`${Ue.serving_quantity}g`);const Nt={calories:Pt[`energy-kcal${ft}`]||(Pt[`energy${ft}`]?Pt[`energy${ft}`]/4.184:void 0),protein:Pt[`proteins${ft}`],carbs:Pt[`carbohydrates${ft}`],fat:Pt[`fat${ft}`],saturatedFat:Pt[`saturated-fat${ft}`],fiber:Pt[`fiber${ft}`],sugar:Pt[`sugars${ft}`],sodium:Pt[`sodium${ft}`],salt:Pt[`salt${ft}`],servingSize:_t,ingredients:Ue.ingredients_text_en||Ue.ingredients_text,source:`Open Food Facts (${Rt?"per serving":"per 100g"})`},Xn=Object.entries(Nt).filter(([Vr,Nr])=>Nr!==void 0&&Vr!=="source"&&Vr!=="ingredients"&&Vr!=="servingSize").length;if(Xn>=3){console.log(` Open Food Facts found ${Xn} nutrition fields (${Rt?"per serving":"per 100g"})`),_t&&console.log(`    Serving size: ${_t}`);const Vr=`https://world.openfoodfacts.org/product/${$.barcode}`,Nr={source:Nt.source,sourceUrl:Vr};Z&&(Nt.calories!==void 0&&(Nr.calories=Nt.calories),Nt.protein!==void 0&&(Nr.protein=Nt.protein),Nt.carbs!==void 0&&(Nr.carbs=Nt.carbs),Nt.fat!==void 0&&(Nr.fat=Nt.fat),Nt.saturatedFat!==void 0&&(Nr.saturatedFat=Nt.saturatedFat),Nt.fiber!==void 0&&(Nr.fiber=Nt.fiber),Nt.sugar!==void 0&&(Nr.sugar=Nt.sugar),Nt.sodium!==void 0&&(Nr.sodium=Nt.sodium),Nt.salt!==void 0&&(Nr.salt=Nt.salt)),ve&&Nt.servingSize&&(Nr.servingSize=Nt.servingSize),je&&Nt.ingredients&&(Nr.ingredients=Nt.ingredients);const Ka=$.sourceIndex==="fast_foods_database";return(ve||Ka)&&!Nr.servingSize?(Ka?(console.log(" Fast food: Open Food Facts has per-100g data but NO per-meal data - rejecting"),console.log("   Fast food items must have per-meal nutrition, not per 100g")):(console.log(" Open Food Facts: Has per-100g data but NO serving size - rejecting"),console.log('   Need serving size to accept data when "Require Serving Size" is enabled'),console.log("   To accept this data, Open Food Facts needs serving_size or serving_quantity in the API response")),null):(console.log(`   Filtered to ${Object.keys(Nr).length-1} fields based on checkboxes`),Nr)}}}}console.log(`   Open Food Facts: No data found for barcode ${$.barcode}`)}catch(Ge){console.log("   Open Food Facts API error:",Ge)}}return null}catch(ae){return console.error("Error scraping nutrition from Google:",ae),null}},pr=$=>{var yt;console.log(` Parsing HTML: ${$.length} bytes`);const ae=$.toLowerCase(),z={};console.log(" Step 1: Checking for JSON-LD structured data...");const Re=$.matchAll(/<script[^>]*type=["']application\/ld\+json["'][^>]*>(.*?)<\/script>/gis);for(const dt of Re)try{const ht=JSON.parse(dt[1]);if(ht.nutrition||ht["@type"]==="NutritionInformation"){const We=ht.nutrition||ht;if(We.calories&&(z.calories=parseFloat(String(We.calories).replace(/[^0-9.]/g,""))),We.proteinContent&&(z.protein=parseFloat(String(We.proteinContent).replace(/[^0-9.]/g,""))),We.carbohydrateContent&&(z.carbs=parseFloat(String(We.carbohydrateContent).replace(/[^0-9.]/g,""))),We.fatContent&&(z.fat=parseFloat(String(We.fatContent).replace(/[^0-9.]/g,""))),We.saturatedFatContent&&(z.saturatedFat=parseFloat(String(We.saturatedFatContent).replace(/[^0-9.]/g,""))),We.fiberContent&&(z.fiber=parseFloat(String(We.fiberContent).replace(/[^0-9.]/g,""))),We.sugarContent&&(z.sugar=parseFloat(String(We.sugarContent).replace(/[^0-9.]/g,""))),We.sodiumContent&&(z.sodium=parseFloat(String(We.sodiumContent).replace(/[^0-9.]/g,""))),We.servingSize&&(z.servingSize=String(We.servingSize)),Object.keys(z).length>=3)return console.log(` Step 1 success: Found ${Object.keys(z).length} fields from JSON-LD`),z}}catch{}console.log(` Step 1 complete: ${Object.keys(z).length} fields from JSON-LD (need 3+ for early return)`),console.log(" Step 2: Checking for per-serving sections (per piece, per bar, per 30g, etc)...");const fe=ae.match(/(per\s+(?!100\s*g)(?:\d+\s*g|piece|bar|slice|serving|portion|biscuit|pack|sachet|pot|unit|item)[^<]*?(?:<[^>]+>[^<]*?){0,50}?(?:calories|kcal|energy|protein|fat|carb)[^<]*?(?:<[^>]+>[^<]*?){0,100})/gis),Oe=fe?null:ae.match(/(per\s*100\s*g[^<]*?(?:<[^>]+>[^<]*?){0,50}?(?:calories|kcal|energy|protein|fat|carb)[^<]*?(?:<[^>]+>[^<]*?){0,100})/gis),ke=fe||Oe;if(ke){const ht=ke[0].matchAll(/(\w+)[:\s]*(\d+(?:\.\d+)?)\s*(g|mg|kcal)?/gi);for(const We of ht){const Qe=We[1].toLowerCase(),qe=parseFloat(We[2]);Qe.includes("calor")||Qe.includes("kcal")||Qe.includes("energy")?z.calories=qe:Qe.includes("protein")?z.protein=qe:Qe.includes("carb")?z.carbs=qe:Qe.includes("fat")&&!Qe.includes("saturat")?z.fat=qe:Qe.includes("saturat")?z.saturatedFat=qe:Qe.includes("sugar")?z.sugar=qe:Qe.includes("fib")?z.fiber=qe:Qe.includes("sodium")?z.sodium=qe:Qe.includes("salt")&&(z.salt=qe)}}console.log(` Step 2 complete: ${Object.keys(z).length} fields total`),console.log(" Step 2.5: Extracting from HTML tables (looking for per-serving column)...");const Te=[...ae.matchAll(/per\s+(\d+\s*g|100\s*g|\w+)/gi)],He=[];for(const dt of Te){const ht=dt[0].toLowerCase(),We=/per\s*100\s*g/i.test(ht);He.find(Qe=>Qe.text===ht)||He.push({text:ht,is100g:We})}console.log(`   Found ${He.length} "per" headers:`,He.map(dt=>dt.text));let Ge=-1,Ie=-1,Ue=!1;const Pt=[...$.matchAll(/<tr[^>]*>(.*?)<\/tr>/gis)];for(const dt of Pt){const We=[...dt[1].matchAll(/<t[dh][^>]*>(.*?)<\/t[dh]>/gis)];for(let Qe=0;Qe<We.length;Qe++){const qe=We[Qe][1].replace(/<[^>]*>/g," ").toLowerCase().trim();if(console.log(`      Cell ${Qe}: "${qe.substring(0,50)}"`),/(?:per|for)[:\s]*100\s*g/i.test(qe)||/\b100\s*g\b/i.test(qe))Ie=Qe,console.log(`   Found "per 100g" in column ${Qe}`);else if(/(?:per|for)[:\s]+(?!100\s*g)/i.test(qe)&&!/per\s*kg/i.test(qe)&&!/inspiration/i.test(qe)){Ge=Qe,Ue=!0,console.log(`   Found serving column "${qe.substring(0,30)}" in column ${Qe}`);const Vt=qe.match(/per\s+(?:(\d+(?:\.\d+)?)\s*(g|ml)|(\w+)\s*\((\d+(?:\.\d+)?)\s*(g|ml)\))/i);Vt&&!z.servingSize&&(Vt[1]?(z.servingSize=`${Vt[1]}${Vt[2]}`,console.log(`    Extracted serving size from header: ${z.servingSize}`)):Vt[3]&&Vt[4]&&(z.servingSize=`per ${Vt[3]} (${Vt[4]}${Vt[5]})`,console.log(`    Extracted serving size from header: ${z.servingSize}`)))}}if(Ie>=0&&Ge>=0)break}Ie>=0&&Ge<0&&(Ge=Ie+1,console.log(`    Inferring serving column as ${Ge} (RISKY - not explicitly found in header)`),console.log("      Will validate that this column exists in data rows and has different values"),console.log("      If validation fails, this page likely only has per-100g data"));const It=Ie>=0,Rt=Ge>=0&&!Ue;console.log(`   Table structure: servingCol=${Ge}, per100gCol=${Ie}, isMultiColumn=${It}, servingColInferred=${Rt}`);let ft=!1,_t=!1;const Nt=$.matchAll(/<tr[^>]*>(.*?)<\/tr>/gis);for(const dt of Nt){const ht=dt[1],We=ht.toLowerCase();if(!/calor|kcal|protein|carb|fat|sugar|fib|sodium|salt/i.test(We))continue;const qe=[...ht.matchAll(/<t[dh][^>]*>(.*?)<\/t[dh]>/gis)],Vt=[];for(let Mr=0;Mr<qe.length;Mr++){const mn=qe[Mr][1],wo=mn.match(/(\d+(?:\.\d+)?)/);wo&&Vt.push({index:Mr,value:parseFloat(wo[1]),text:mn})}if(Vt.length===0)continue;console.log(`   Row cells: ${Vt.map(Mr=>`[${Mr.index}]=${Mr.value}`).join(", ")}`);let st=0;if(Ge>=0){const Mr=Vt.find(mn=>mn.index===Ge);if(Mr)st=Mr.value,ft=!0,console.log(`    Using serving column ${Ge}: ${st}`);else{_t=!0,console.log(`    Serving column ${Ge} doesn't exist in data row (cells: ${Vt.map(mn=>mn.index).join(",")}) - skipping row to avoid per-100g`);continue}}else if(Ie>=0&&Vt.length>=2){const Mr=Vt.find(mn=>mn.index!==Ie);Mr&&(st=Mr.value,ft=!0,console.log(`    Using non-100g column ${Mr.index}: ${st}`))}else if(It&&Vt.length>=2)st=Vt[1].value,ft=!0,console.log(`    Fallback: using second value: ${st}`);else{console.log("    Single-column table (likely per-100g only) - skipping to find per-serving data");continue}st===0||st>=1e4||(!z.calories&&/calor|kcal|energy/i.test(We)?st<=2e3&&(z.calories=st):!z.protein&&/protein/i.test(We)?st<=200&&(z.protein=st):!z.carbs&&/carb/i.test(We)&&!/fib/i.test(We)?st<=200&&(z.carbs=st):!z.fat&&/\bfat\b/i.test(We)&&!/saturat/i.test(We)?st<=200&&(z.fat=st):!z.saturatedFat&&/saturat/i.test(We)?st<=100&&(z.saturatedFat=st):!z.sugar&&/sugar/i.test(We)?st<=200&&(z.sugar=st):!z.fiber&&/fib/i.test(We)?st<=100&&(z.fiber=st):!z.sodium&&/sodium/i.test(We)?st<=1e4&&(z.sodium=st):!z.salt&&/\bsalt\b/i.test(We)&&!/unsalt/i.test(We)&&st<=20&&(z.salt=st))}let Xn=!1;if(_t&&!ft?(console.log("    Table has per-100g column but inferred serving column doesn't exist in data rows - NO per-serving data extracted"),Xn=!0):ft&&z.servingSize?console.log("    Table: Extracted per-serving data WITH serving size"):ft&&!z.servingSize&&(console.log("    Table: Extracted per-serving data but NO serving size found"),console.log("      This data will be rejected unless serving size is found elsewhere")),!z.servingSize){const dt=[/serving\s+size[:\s]*(\d+(?:\.\d+)?)\s*(g|ml|oz|fl\s*oz)/gi,/per\s+serving[:\s]*(\d+(?:\.\d+)?)\s*(g|ml)/gi,/per\s+portion[:\s]*(\d+(?:\.\d+)?)\s*(g|ml)/gi,/recommended\s+serving[:\s]*(\d+(?:\.\d+)?)\s*(g|ml)/gi,/typical\s+serving[:\s]*(\d+(?:\.\d+)?)\s*(g|ml)/gi,/serves?\s+(\d+(?:\.\d+)?)\s*(g|ml)/gi,/per\s+(?:piece|portion|bar|slice|biscuit|serving)\s*\((\d+(?:\.\d+)?)\s*(g|ml)\)/gi];for(const ht of dt){const We=ae.matchAll(ht);for(const Qe of We)if(Qe[1]&&Qe[2]){const qe=parseFloat(Qe[1]),Vt=Qe[2].trim();if(qe>=1&&qe<=5e3){z.servingSize=`${qe}${Vt}`;const st=Qe[0],Mr=Qe.index||0,mn=ae.substring(Math.max(0,Mr-50),Math.min(ae.length,Mr+st.length+50));console.log(`    Serving size matched: "${st}"  ${qe}${Vt}`),console.log(`      Context: ...${mn.replace(/\s+/g," ")}...`);break}}if(z.servingSize)break}z.servingSize?console.log(`    Serving size found: "${z.servingSize}"`):(console.log(`    No serving size found - tried ${dt.length} patterns`),console.log('      Patterns checked: "serving size: Xg", "per serving: Xg", "per piece (Xg)", etc.'))}if(console.log(` Step 2.5 complete: ${Object.keys(z).length} fields total`),Xn)return console.log(" Step 3: SKIPPED - page appears to have per-100g only, trying next site instead"),console.log(` Returning with ${Object.keys(z).length} fields (may be insufficient to trigger fallback)`),z;if(console.log(" Step 3: Aggressive pattern matching for nutrients..."),!z.calories){const dt=[/calories[:\s]*(\d+(?:\.\d+)?)/gi,/(\d+(?:\.\d+)?)\s*(?:kcal|calories|cal)(?:\s*\/?\s*100\s*g)?/gi,/energy[:\s]*(\d+(?:\.\d+)?)\s*kcal/gi,/per\s*100\s*g[:\s]*(\d+(?:\.\d+)?)\s*cal/gi,/(\d+(?:\.\d+)?)\s*kj\s*\/\s*(\d+(?:\.\d+)?)\s*kcal/gi];for(const ht of dt){const We=[...ae.matchAll(ht)];for(const Qe of We){const qe=Qe[0].match(/(\d+(?:\.\d+)?)\s*kcal/i)||Qe;if(qe&&qe[1]){const Vt=parseFloat(qe[1]);if(Vt>0&&Vt<=900){z.calories=Vt;break}}}if(z.calories)break}}if(!z.protein){const dt=[/protein[:\s]*(\d+(?:\.\d+)?)\s*g/gi,/(\d+(?:\.\d+)?)\s*g\s*protein/gi,/protein[:\s<>]*(\d+(?:\.\d+)?)/gi];for(const ht of dt){const We=[...ae.matchAll(ht)];for(const Qe of We)if(Qe[1]){const qe=parseFloat(Qe[1]);if(qe>=0&&qe<=100){z.protein=qe;break}}if(z.protein)break}}if(!z.carbs){const dt=[/carbohydrate[s]?[:\s]*(\d+(?:\.\d+)?)\s*g/gi,/carbs[:\s]*(\d+(?:\.\d+)?)\s*g/gi,/(\d+(?:\.\d+)?)\s*g\s*carb/gi,/carbohydrate[s]?[:\s<>]*(\d+(?:\.\d+)?)/gi];for(const ht of dt){const We=[...ae.matchAll(ht)];for(const Qe of We)if(Qe[1]){const qe=parseFloat(Qe[1]);if(qe>=0&&qe<=100){z.carbs=qe;break}}if(z.carbs)break}}if(!z.fat){const dt=[/(?:total\s+)?fat[:\s]*(\d+(?:\.\d+)?)\s*g/gi,/(\d+(?:\.\d+)?)\s*g\s*(?:total\s+)?fat/gi,/(?:total\s+)?fat[:\s<>]*(\d+(?:\.\d+)?)/gi];for(const ht of dt){const We=[...ae.matchAll(ht)];for(const Qe of We)if(!Qe[0].toLowerCase().includes("saturat")&&Qe[1]){const qe=parseFloat(Qe[1]);if(qe>=0&&qe<=100){z.fat=qe;break}}if(z.fat)break}}if(!z.saturatedFat){const dt=[/saturated[s]?\s*fat[:\s]*(\d+(?:\.\d+)?)\s*g/gi,/saturates[:\s]*(\d+(?:\.\d+)?)\s*g/gi,/of\s*which\s*saturates[:\s]*(\d+(?:\.\d+)?)/gi,/saturated[s]?\s*fat[:\s<>]*(\d+(?:\.\d+)?)/gi];for(const ht of dt){const We=[...ae.matchAll(ht)];for(const Qe of We)if(Qe[1]){const qe=parseFloat(Qe[1]);if(qe>=0&&qe<=100){z.saturatedFat=qe;break}}if(z.saturatedFat)break}}if(!z.sugar){const dt=[/sugar[s]?[:\s]*(\d+(?:\.\d+)?)\s*g/gi,/(\d+(?:\.\d+)?)\s*g\s*sugar/gi,/of\s*which\s*sugars[:\s]*(\d+(?:\.\d+)?)/gi,/sugar[s]?[:\s<>]*(\d+(?:\.\d+)?)/gi];for(const ht of dt){const We=[...ae.matchAll(ht)];for(const Qe of We)if(Qe[1]){const qe=parseFloat(Qe[1]);if(qe>=0&&qe<=100){z.sugar=qe;break}}if(z.sugar)break}}if(!z.fiber){const dt=[/fib[re]{2}[:\s]*(\d+(?:\.\d+)?)\s*g/gi,/(\d+(?:\.\d+)?)\s*g\s*fib[re]{2}/gi,/fib[re]{2}[:\s<>]*(\d+(?:\.\d+)?)/gi,/dietary\s*fib[re]{2}[:\s]*(\d+(?:\.\d+)?)/gi];for(const ht of dt){const We=[...ae.matchAll(ht)];for(const Qe of We)if(Qe[1]){const qe=parseFloat(Qe[1]);if(qe>=0&&qe<=50){z.fiber=qe;break}}if(z.fiber)break}}if(!z.sodium){const dt=[/sodium[:\s]*(\d+(?:\.\d+)?)\s*mg/gi,/(\d+(?:\.\d+)?)\s*mg\s*sodium/gi,/sodium[:\s<>]*(\d+(?:\.\d+)?)\s*mg/gi];for(const ht of dt){const We=[...ae.matchAll(ht)];for(const Qe of We)if(Qe[1]){const qe=parseFloat(Qe[1]);if(qe>=0&&qe<=5e3){z.sodium=qe;break}}if(z.sodium)break}}if(!z.salt){const dt=[/salt[:\s]*(\d+(?:\.\d+)?)\s*g/gi,/(\d+(?:\.\d+)?)\s*g\s*salt/gi,/salt[:\s<>]*(\d+(?:\.\d+)?)/gi];for(const ht of dt){const We=[...ae.matchAll(ht)];for(const Qe of We)if(!(Qe[0].toLowerCase().includes("unsalt")||Qe[0].toLowerCase().includes("no salt"))&&Qe[1]){const qe=parseFloat(Qe[1]);if(qe>=0&&qe<=10){z.salt=qe;break}}if(z.salt)break}}if(console.log(" Step 4: Extracting ingredients..."),!z.ingredients){const dt=[/ingredients?[:\s]*([^<.]*(?:flour|sugar|water|salt|oil|milk|egg|butter|corn|wheat|soy|palm)[^<.]*)/gi,/<[^>]*>ingredients?[:\s]*<\/[^>]*>([^<]+)/gi,/(?:contains?|made with)[:\s]*([^<.]*(?:flour|sugar|water|salt|oil|milk)[^<.]*)/gi];for(const We of dt){const Qe=[...ae.matchAll(We)];for(const qe of Qe){const Vt=(yt=qe[1])==null?void 0:yt.trim();if(Vt&&Vt.length>20&&Vt.length<2e3){const st=Vt.replace(/<[^>]+>/g,"").replace(/&[a-z]+;/gi," ").replace(/\s+/g," ").trim();if(st.length>20){z.ingredients=st,console.log(` Found ingredients: ${st.substring(0,100)}...`);break}}}if(z.ingredients)break}const ht=$.match(/"ingredients":\s*"([^"]+)"/i);!z.ingredients&&ht&&(z.ingredients=ht[1].replace(/\\n/g," ").trim(),console.log(` Found ingredients from JSON: ${z.ingredients.substring(0,100)}...`))}console.log(` Step 4 complete: ${z.ingredients?"Found ingredients":"No ingredients"}`);const Vr=Object.keys(z).length,Nr=z.calories!==void 0,Ka=z.protein!==void 0,ku=z.carbs!==void 0,Iu=z.fat!==void 0;return console.log(" Final nutrition data:",z),console.log(` Found fields (${Vr}): ${Object.keys(z).join(", ")}`),Nr&&(Ka||ku||Iu)?(console.log(` SUCCESS: Found calories + macros (${Vr} fields total)`),z):Vr>=3?(console.log(` SUCCESS: Found ${Vr} fields total`),z):(console.log(` INSUFFICIENT: Only ${Vr} fields found, need calories+macro or 3+ fields`),null)};v.useEffect(()=>{const $=nfe();Q($),oe($?" SearchAPI configured":" SearchAPI not configured")},[]),v.useEffect(()=>{const $=ae=>{ae.key==="Escape"&&me&&ie(null)};return window.addEventListener("keydown",$),()=>window.removeEventListener("keydown",$)},[me]);const Os=v.useCallback(async()=>{if(D.size===0){oe("No indices selected");return}i(!0),T(!1),o(0),oe(" Loading ALL foods from selected indices (with pagination)...");const $=[],ae=Array.from(D),z=5e3,Re="https://us-central1-nutrasafe-705c7.cloudfunctions.net";try{for(let ke=0;ke<ae.length;ke++){const Te=ae[ke];oe(` Loading ${Te}...`);let He=0,Ge=!0,Ie=[],Ue=0;const Pt=2e3;let It=0;for(;Ge&&It<Pt;){It++,It>1&&It%5===0&&oe(`   ${Te}: ${Ie.length.toLocaleString()} products pulled, fetching more...`);const Rt=await fetch(`${Re}/browseAllIndices`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({indices:[Te],offset:He,pageSize:z})});if(!Rt.ok){oe(` ${Te}: HTTP ${Rt.status}`);break}const ft=await Rt.json();if(ft.success&&ft.products){const _t=ft.products||[],Nt=ft.pagination||{};if(_t.length===0){oe(`   ${Te}: Reached end (0 products returned)`),Ge=!1;break}_t.length<z&&(oe(`   ${Te}: Last page (${_t.length} products)`),Ge=!1),Ie.push(..._t),Ue=(Nt==null?void 0:Nt.total)||Ie.length;const Xn=Math.floor((ke+Ie.length/Math.max(Ue,1))/ae.length*100);o(Xn);const Vr=Ue>0?Math.round(Ie.length/Ue*100):0;oe(`   Page ${It}: ${Ie.length.toLocaleString()} / ${Ue.toLocaleString()} (${Vr}%)`),Nt.hasMore?(Ge=!0,He+=z):(oe(`   ${Te}: Backend says no more data`),Ge=!1),Ue>0&&Ie.length>=Ue&&(oe(`   ${Te}: Reached total count (${Ie.length} >= ${Ue})`),Ge=!1)}else{oe(` ${Te}: ${ft.error||"Failed"}`);break}}It>=Pt&&oe(` ${Te}: Hit safety limit (${Pt} iterations)`),oe(` ${Te}: Loaded ${Ie.length.toLocaleString()} products`);for(const Rt of Ie)$.push({id:`${Te}:${Rt.objectID}`,objectID:Rt.objectID,name:Rt.name||Rt.foodName||"Unknown",brandName:Rt.brandName||Rt.brand||null,barcode:Rt.barcode||null,currentImageUrl:Rt.imageUrl||null,sourceIndex:Te,calories:Rt.calories,dontShowImage:Rt.dontShowImage||!1,selected:!1,searchResults:[],selectedImageUrl:null,analysis:null,nutritionData:null,nutritionStatus:"pending",status:"pending",analysisProgress:0});o(Math.round((ke+1)/ae.length*100))}oe(` Total foods loaded: ${$.length.toLocaleString()}`);let fe=$;if(X){const ke=dm($,40);fe=ke.ukProducts,H(ke.stats),oe(` UK filter applied: ${ke.stats.ukCount.toLocaleString()} UK products (${ke.stats.ukPercentage}%), ${ke.stats.nonUkCount.toLocaleString()} filtered out (${ke.stats.nonUkPercentage}%)`)}else H(null);const Oe=fe.length;if(W){const ke=fe.filter(He=>He.currentImageUrl),Te=fe.filter(He=>!He.currentImageUrl);te({total:Oe,withImages:ke.length,withoutImages:Te.length}),fe=Te,oe(` Image filter applied: ${Te.length.toLocaleString()} without images, ${ke.length.toLocaleString()} with images hidden`)}else te(null);if(J){const ke=fe.length;fe=fe.filter(Ge=>{const Ie=Ge.calories!==void 0&&Ge.calories>=0&&Ge.calories<=5;return Ie&&Pe?!nt(Ge.name):Ie});const Te=ke-fe.length;oe(`0 Very low calorie filter${Pe?" (drinks excluded)":""}: ${fe.length.toLocaleString()} with 0-5 kcal, ${Te.toLocaleString()} filtered out`)}r(fe),ji(fe),o(100),l("")}catch(fe){oe(` Error: ${fe}`)}finally{i(!1)}},[D,X,W,J,Pe]),Wr=v.useCallback(async()=>{if(!re.trim()){oe(" No search query entered");return}if(D.size===0){oe(" No indices selected");return}be(!0),i(!0),T(!1),o(0),oe(` Searching for: ${re}`);const $=[],ae=Array.from(D);try{for(let Re=0;Re<ae.length;Re++){const fe=ae[Re];l(`Searching ${fe}...`),o(Math.round(Re/ae.length*100));const Oe=`https://${o2}-dsn.algolia.net/1/indexes/${fe}/query`;try{const ke=await fetch(Oe,{method:"POST",headers:{"X-Algolia-Application-Id":o2,"X-Algolia-API-Key":afe,"Content-Type":"application/json"},body:JSON.stringify({query:re.trim(),hitsPerPage:1e3,attributesToRetrieve:["objectID","name","foodName","brandName","brand","barcode","imageUrl","calories","dontShowImage"]})});if(!ke.ok){oe(`Error searching ${fe}: ${ke.status}`);continue}const He=(await ke.json()).hits||[];oe(`${fe}: ${He.length} results`);for(const Ge of He)$.push({id:`${fe}:${Ge.objectID}`,objectID:Ge.objectID,name:Ge.name||Ge.foodName||"Unknown",brandName:Ge.brandName||Ge.brand||null,barcode:Ge.barcode||null,currentImageUrl:Ge.imageUrl||null,sourceIndex:fe,calories:Ge.calories,dontShowImage:Ge.dontShowImage||!1,selected:!1,searchResults:[],selectedImageUrl:null,analysis:null,nutritionData:null,nutritionStatus:"pending",status:"pending",analysisProgress:0})}catch(ke){oe(`Error searching ${fe}: ${ke}`)}}oe(` Found ${$.length} foods matching "${re}"`);let z=$;if(X){const Re=dm($,40);z=Re.ukProducts,H(Re.stats),oe(` UK Filter: ${Re.ukProducts.length} kept, ${Re.nonUkProducts.length} filtered`)}if(W){const Re=z.filter(Oe=>Oe.currentImageUrl),fe=z.filter(Oe=>!Oe.currentImageUrl);te({total:z.length,withImages:Re.length,withoutImages:fe.length}),z=fe,oe(` Image Filter: ${fe.length} without images, ${Re.length} with images hidden`)}else te(null);if(J){const Re=z.length;z=z.filter(ke=>{const Te=ke.calories!==void 0&&ke.calories>=0&&ke.calories<=5;return Te&&Pe?!nt(ke.name):Te});const fe=Re-z.length;oe(`0 Very Low Cal Filter${Pe?" (drinks excluded)":""}: ${z.length} with 0-5 kcal, ${fe} filtered out`)}r(z),k({total:z.length,completed:0,failed:0,noResults:0,processing:0})}catch(z){oe(` Search failed: ${z}`)}finally{be(!1),i(!1),o(100)}},[re,D,X,W,J,Pe,oe]),Pr=v.useCallback(async()=>{if(!ee.trim()){oe(" No barcode entered");return}j(!0),i(!0),T(!1),o(0),oe(` Searching for barcode: ${ee}`);try{const{foods:$}=await SW(ee.trim(),Array.from(D));if($.length===0){oe(` No foods found with barcode: ${ee}`),i(!1),j(!1);return}oe(` Found ${$.length} food(s) with barcode ${ee}`),oe(` Will search Google Images using barcode: ${ee}`);const ae=$.map(z=>({id:z._id,objectID:z.objectID,name:z.name,brandName:z.brandName,barcode:z.barcode,currentImageUrl:z.imageUrl,sourceIndex:z._sourceIndex,calories:z.calories,dontShowImage:z.dontShowImage||!1,selected:!0,searchResults:[],selectedImageUrl:null,analysis:null,nutritionData:null,nutritionStatus:"pending",status:"pending",analysisProgress:0}));r(ae),k({total:ae.length,completed:0,failed:0,noResults:0,processing:0}),oe(` Loaded ${ae.length} food(s) for image scraping`),i(!1),j(!1),setTimeout(()=>{fo(ae,ee.trim())},500)}catch($){oe(` Barcode search failed: ${$}`),i(!1),j(!1)}},[ee,D,oe]),fo=async($,ae)=>{if(!O){oe(" SearchAPI not configured. Please set SERP_API_KEY in .env");return}u(!0),he.current=!1,Se.current=!1;const z=$.filter(Re=>Re.selected);if(z.length===0){oe("No foods selected for processing"),u(!1);return}oe(` Starting image search for ${z.length} food(s) using barcode: ${ae}`);for(const Re of z){if(Se.current){oe(" Processing aborted");break}for(;he.current;)await new Promise(fe=>setTimeout(fe,500));try{ds(Re.id,"searching",0),oe(` Searching Google Images for barcode: ${ae} (${Re.name})`);const fe=await QP(ae);if(fe.length===0){ds(Re.id,"no_results"),oe(` No images found for barcode: ${ae}`);continue}oe(` Found ${fe.length} images for ${ae}`),r(Te=>Te.map(He=>He.id===Re.id?{...He,searchResults:fe,status:"analyzing"}:He)),ds(Re.id,"analyzing",0);const Oe=[];for(let Te=0;Te<fe.length;Te++){const He=fe[Te],Ge=Math.round((Te+1)/fe.length*100);ds(Re.id,"analyzing",Ge);try{const Ie=await XP(He.url);Oe.push({...He,analysis:Ie})}catch(Ie){console.error("Analysis error:",Ie)}}const ke=Oe.map(Te=>{let He=0;return Te.analysis.backgroundConfidence>=95&&Te.analysis.hasWhiteBackground?He=95:(Te.analysis.hasWhiteBackground&&(He+=40),Te.analysis.hasOverlay||(He+=30),He+=Math.min(20,Te.analysis.backgroundConfidence*.2)),Te.isManufacturerSite&&(He+=5),{...Te,confidence:He}}).sort((Te,He)=>He.confidence-Te.confidence);if(ke.length>0){const Te=ke[0];r(He=>He.map(Ge=>Ge.id===Re.id?{...Ge,searchResults:ke,selectedImageUrl:Te.confidence>=80?Te.url:null,analysis:Te.analysis,status:Te.confidence>=80?"ready":"pending",confidence:Te.confidence}:Ge)),Te.confidence>=80?oe(` ${Re.name}: Auto-selected image (${Te.confidence}% confidence)`):oe(` ${Re.name}: Manual selection needed (${Te.confidence}% confidence)`)}}catch(fe){ds(Re.id,"failed",0,String(fe)),oe(` Error processing ${Re.name}: ${fe}`)}}u(!1),oe(" Processing complete")},ji=$=>{k({total:$.length,completed:$.filter(ae=>ae.status==="completed").length,failed:$.filter(ae=>ae.status==="failed").length,noResults:$.filter(ae=>ae.status==="no_results").length,processing:$.filter(ae=>["searching","analyzing","uploading"].includes(ae.status)).length})},ds=($,ae,z,Re)=>{r(fe=>{const Oe=fe.map(ke=>ke.id===$?{...ke,status:ae,analysisProgress:z!==void 0?z:ke.analysisProgress,error:Re}:ke);return ji(Oe),Oe})},Qn=$=>{r(ae=>ae.map(z=>z.id===$?{...z,selected:!z.selected}:z))},go=()=>{const $=fi(),ae=new Set($.map(z=>z.id));r(z=>z.map(Re=>ae.has(Re.id)?{...Re,selected:!0}:Re))},Au=()=>{r($=>$.map(ae=>({...ae,selected:!1})))},_u=async $=>{if(Se.current)return{...$,status:"pending"};for(;he.current;)if(await new Promise(z=>setTimeout(z,100)),Se.current)return{...$,status:"pending"};const ae=$.brandName?`${$.brandName} ${$.name}`:$.name;oe(`Searching SearchAPI for: ${ae}`);try{r(It=>It.map(Rt=>Rt.id===$.id?{...Rt,status:"searching"}:Rt));const z=await QP($.name,$.brandName,10,$.sourceIndex);if(z.length===0)return oe(`No results for ${$.name}`),{...$,status:"no_results",searchResults:[],error:"No images found"};oe(`Found ${z.length} images for ${$.name}`);const Re=z.filter(It=>!It.disqualified);if(Re.length===0)return oe(`All images disqualified for ${$.name}`),{...$,status:"no_results",searchResults:z,error:"All images disqualified"};let fe=null,Oe=null,ke=0;for(let It=0;It<Math.min(Re.length,8);It++){const Rt=Re[It];oe(`Analyzing result ${It+1}/${Re.length} for ${$.name} (${Rt.domain})`),r(ft=>ft.map(_t=>_t.id===$.id?{..._t,status:"analyzing",searchResults:z,selectedImageUrl:Rt.url}:_t));try{const ft=await XP(Rt.url,Nt=>{r(Xn=>Xn.map(Vr=>Vr.id===$.id?{...Vr,analysisProgress:Nt}:Vr))});let _t=0;if($.sourceIndex==="fast_foods_database"?(_t=50,It<3&&(_t+=20),ft.hasOverlay||(_t+=20),Rt.width&&Rt.width>800&&(_t+=10),oe(` Fast food restaurant: ${$.name} - Confidence: ${Math.round(_t)}% (Rank: ${It+1}, Overlay: ${ft.hasOverlay?"Yes":"No"})`)):(ft.backgroundConfidence>=95&&ft.hasWhiteBackground?_t=95:(ft.hasWhiteBackground&&(_t+=40),ft.hasOverlay||(_t+=30),_t+=Math.min(20,ft.backgroundConfidence*.2)),Rt.isManufacturerSite&&(_t+=5),oe(`Analysis: ${$.name} - Confidence: ${Math.round(_t)}% (BG: ${ft.backgroundConfidence}%, Overlay: ${ft.hasOverlay?"Yes":"No"})`)),_t>=80){oe(` High confidence (${Math.round(_t)}%) - Auto-selecting`),fe=Rt,Oe=ft,ke=_t;break}_t>ke&&(fe=Rt,Oe=ft,ke=_t)}catch(ft){oe(`Failed to analyze image from ${Rt.domain}: ${ft instanceof Error?ft.message:"CORS error"}`);continue}}if(!fe||!Oe)return oe(`Could not analyze any images for ${$.name} (CORS blocked)`),{...$,searchResults:z,status:"failed",error:"All images blocked by CORS"};const Te=Math.round(ke),He=Te>=80?"ready":"analyzing",Ge=Te>=80?` High confidence (${Te}%) - Ready to use`:` Low confidence (${Te}%) - Review needed`;oe(Ge);const Ie=z.map(It=>({...It,isBestResult:It.url===fe.url}));let Ue=null,Pt="pending";if(Z||ve||je){const It=[];Z&&It.push("nutrition"),ve&&It.push("serving size"),je&&It.push("ingredients"),oe(` Scraping ${It.join(", ")} for ${$.name}...`),r(Rt=>Rt.map(ft=>ft.id===$.id?{...ft,nutritionStatus:"searching"}:ft)),Ue=await kt($),Ue?($.sourceIndex==="fast_foods_database"&&!Ue.servingSize&&(Ue.servingSize="per unit",oe(' Fast food item - defaulting to "per unit" serving size')),Pt="found",oe(` Nutrition found for ${$.name} (${Ue.source})`)):(Pt="not_found",oe(` No nutrition data found for ${$.name}`))}return{...$,searchResults:Ie,selectedImageUrl:fe.url,analysis:Oe,nutritionData:Ue,nutritionStatus:Pt,status:He,confidence:Te,error:Te<80?`Low confidence (${Te}%) - ${Oe.overlayTypes.join(", ")||"Check image quality"}`:void 0,analysisProgress:100,wasProcessed:!0}}catch(z){return oe(`Error searching ${$.name}: ${z}`),{...$,status:"failed",error:z instanceof Error?z.message:String(z),wasProcessed:!0}}},Du=async()=>{u(!0),he.current=!1,Se.current=!1;const $=t.filter(z=>z.selected),ae=$.length>0?$:t.filter(z=>(z.status==="pending"||z.nutritionStatus==="pending")&&!z.wasProcessed);if(oe(` Starting nutrition scraping for ${ae.length} foods`),ae.length===0){const z=t.filter(Re=>!Re.wasProcessed).length;oe(z===0?" All foods have been processed! Select specific foods to reprocess.":"No pending foods to process. Select specific foods or adjust filters."),u(!1);return}C(ae.length),m(0);for(let z=0;z<ae.length;z++){if(m(z+1),Se.current){oe("Nutrition scraping stopped by user");break}for(;he.current&&(await new Promise(Oe=>setTimeout(Oe,500)),!Se.current););const Re=ae[z];oe(`[${z+1}/${ae.length}] Scraping nutrition for ${Re.name}...`),r(Oe=>Oe.map(ke=>ke.id===Re.id?{...ke,nutritionStatus:"searching"}:ke));const fe=await kt(Re);if(fe){Re.sourceIndex==="fast_foods_database"&&!fe.servingSize&&(fe.servingSize="per unit",oe(' Fast food item - defaulting to "per unit" serving size')),r(ke=>ke.map(Te=>Te.id===Re.id?{...Te,nutritionData:fe,nutritionStatus:"found",status:"uploading",wasProcessed:!0}:Te));const Oe=[];fe.calories!==void 0&&Oe.push("calories"),fe.protein!==void 0&&Oe.push("protein"),fe.carbs!==void 0&&Oe.push("carbs"),fe.fat!==void 0&&Oe.push("fat"),fe.sugar!==void 0&&Oe.push("sugar"),fe.fiber!==void 0&&Oe.push("fiber"),fe.servingSize&&Oe.push(`serving: ${fe.servingSize}`),fe.ingredients&&Oe.push("ingredients"),oe(` ${Re.name}: Found ${Oe.length} fields (${fe.source}) ${fe.servingSize?"":""}${fe.ingredients?"":""}`),fe.sourceUrl&&oe(`   Source: ${fe.sourceUrl}`),fe.servingSize&&oe(`   Serving size: ${fe.servingSize}`),fe.ingredients&&oe(`   Ingredients: ${fe.ingredients.substring(0,100)}...`);try{oe(` Saving nutrition for ${Re.name}...`);const ke=Re.sourceIndex==="fast_foods_database";let Te=null;if(ke){const Ie=Re.name.toLowerCase();let Ue="item";if(Ie.includes("burger")?Ue="burger":Ie.includes("sandwich")?Ue="sandwich":Ie.includes("wrap")?Ue="wrap":Ie.includes("salad")?Ue="salad":Ie.includes("fries")||Ie.includes("chips")||Ie.includes("nugget")?Ue="serving":Ie.includes("pizza")&&(Ue="pizza"),fe.servingSize){const Pt=typeof fe.servingSize=="number"?`${fe.servingSize}g`:fe.servingSize;Te=`${Ue} (${Pt})`}else Te=Ue}console.log(" Nutrition payload fields:",Object.keys(fe)),console.log(`   Scrape settings: nutrition=${Z}, serving=${ve}, ingredients=${je}`);const He=ke?{calories:fe.calories??null,protein:fe.protein??null,carbs:fe.carbs??null,fat:fe.fat??null,saturatedFat:fe.saturatedFat??null,fiber:fe.fiber??null,sugar:fe.sugar??null,sodium:fe.sodium??null,salt:fe.salt??null,servingSizeG:1,servingDescription:Te,isPerUnit:!0,ingredients:fe.ingredients??null,sourceUrl:fe.sourceUrl??null}:{...fe.calories!==void 0&&{calories:fe.calories},...fe.protein!==void 0&&{protein:fe.protein},...fe.carbs!==void 0&&{carbs:fe.carbs},...fe.fat!==void 0&&{fat:fe.fat},...fe.saturatedFat!==void 0&&{saturatedFat:fe.saturatedFat},...fe.fiber!==void 0&&{fiber:fe.fiber},...fe.sugar!==void 0&&{sugar:fe.sugar},...fe.sodium!==void 0&&{sodium:fe.sodium},...fe.salt!==void 0&&{salt:fe.salt},...(()=>{const Ie=fe.servingSize;if(!Ie)return{};const Ue=String(Ie).match(/\((\d+(?:\.\d+)?)\s*g\)/i);if(Ue){const _t=parseFloat(Ue[1]),Nt=String(Ie).replace(/\s*\(\d+(?:\.\d+)?\s*g\)\s*/i,"").trim();return{servingSizeG:_t,servingDescription:Nt||"per serving"}}const Pt=String(Ie).match(/^(\d+(?:\.\d+)?)\s*g$/i);if(Pt)return{servingSizeG:parseFloat(Pt[1]),servingDescription:"per serving"};if(typeof Ie=="number")return{servingSizeG:Ie,servingDescription:"per serving"};const It=String(Ie).toLowerCase().trim();return/^\d+\s*(egg|piece|bar|slice|biscuit|item|unit|portion|serving|pack|sachet|pot|cookie|cracker|tablet|capsule|scoop)s?$/i.test(It)?(console.log(`    Rejected vague serving size without weight: "${Ie}"`),{}):["per serving","per portion","serving","portion","per unit","unit"].includes(It)?(console.log(`    Rejected vague serving size: "${Ie}"`),{}):{servingDescription:String(Ie)}})(),...fe.ingredients!==void 0&&{ingredients:fe.ingredients},...fe.sourceUrl!==void 0&&{sourceUrl:fe.sourceUrl}};ke&&(oe(` Fast food mode: Setting isPerUnit=true, servingSizeG=1, description="${Te}"`),oe("   Nutrition values are for FULL UNIT (not per 100g) - won't be multiplied by grams")),console.log(" Sending to backend:",He),oe(` Payload fields: ${Object.keys(He).join(", ")}`);const Ge=await fetch("https://us-central1-nutrasafe-705c7.cloudfunctions.net/updateFoodNutrition",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({index:Re.sourceIndex,objectID:Re.objectID,nutritionData:He})});if(!Ge.ok)throw new Error(`HTTP ${Ge.status}`);r(Ie=>Ie.map(Ue=>Ue.id===Re.id?{...Ue,status:"completed",wasProcessed:!0}:Ue)),oe(` ${Re.name}: Saved to database`)}catch(ke){oe(` ${Re.name}: Nutrition found but save failed - ${ke}`),r(Te=>Te.map(He=>He.id===Re.id?{...He,status:"ready",error:"Save failed",wasProcessed:!0}:He))}}else r(Oe=>Oe.map(ke=>ke.id===Re.id?{...ke,nutritionStatus:"not_found",status:"failed",wasProcessed:!0}:ke)),oe(` ${Re.name}: No nutrition data found`);await new Promise(Oe=>setTimeout(Oe,500))}oe(" Nutrition scraping complete"),u(!1),p(!1),m(0),C(0)},mo=async()=>{if(q)return Du();if(!O){alert("Please configure SearchAPI first. See the console log for instructions."),oe(i2());return}u(!0),he.current=!1,Se.current=!1;const $=t.filter(z=>z.selected),ae=$.length>0?$:t.filter(z=>z.status==="pending"&&!z.wasProcessed);if(oe(`Starting batch search of ${ae.length} foods`),ae.length===0){const z=t.filter(Re=>!Re.wasProcessed).length;oe(z===0?" All foods have been processed! Select specific foods to reprocess.":"No pending foods to process. Select specific foods or adjust filters."),u(!1);return}C(ae.length),m(0);for(let z=0;z<ae.length;z++){if(m(z+1),Se.current){oe("Search stopped by user");break}for(;he.current&&(await new Promise(Oe=>setTimeout(Oe,500)),!Se.current););const Re=ae[z];oe(`[${z+1}/${ae.length}] Processing ${Re.name}`);const fe=await _u(Re);r(Oe=>{const ke=Oe.map(Te=>Te.id===Re.id?fe:Te);return ji(ke),ke}),await new Promise(Oe=>setTimeout(Oe,1e3))}oe("Batch search complete"),u(!1),p(!1),m(0),C(0)},pi=()=>{he.current=!0,p(!0),oe("Paused")},Br=()=>{he.current=!1,p(!1),oe("Resumed")},ra=()=>{Se.current=!0,u(!1),p(!1),oe("Stopped")},vo=v.useCallback(async()=>{if(!O){oe(" SearchAPI not configured. Please set SERP_API_KEY in .env");return}u(!0),he.current=!1,Se.current=!1;const $=t.filter(z=>z.selected),ae=$.length>0?$:t.filter(z=>z.status==="pending"&&!z.wasProcessed);if(ae.length===0){const z=t.filter(Re=>!Re.wasProcessed).length;oe(z===0?" All foods have been processed! Select specific foods to reprocess.":"No pending foods to process. Select specific foods or adjust filters."),u(!1);return}oe(` Starting barcode-based image search for ${ae.length} food(s)`),C(ae.length),m(0);for(let z=0;z<ae.length;z++){if(m(z+1),Se.current){oe("Search stopped by user");break}for(;he.current&&(await new Promise(fe=>setTimeout(fe,500)),!Se.current););const Re=ae[z];if(!Re.barcode){oe(`[${z+1}/${ae.length}]  ${Re.name} - No barcode, skipping`),r(fe=>fe.map(Oe=>Oe.id===Re.id?{...Oe,status:"failed",error:"No barcode",wasProcessed:!0}:Oe));continue}oe(`[${z+1}/${ae.length}] ${Re.name} - Using barcode: ${Re.barcode}`),r(fe=>fe.map(Oe=>Oe.id===Re.id?{...Oe,status:"searching"}:Oe));try{const fe=await QP(Re.barcode,Re.brandName||void 0);if(fe.length===0)oe("   No results found"),r(Oe=>Oe.map(ke=>ke.id===Re.id?{...ke,status:"no_results",wasProcessed:!0}:ke));else{oe(`   Found ${fe.length} images`),r(Te=>Te.map(He=>He.id===Re.id?{...He,status:"analyzing",searchResults:fe}:He));const ke=(await Promise.all(fe.map(Te=>XP(Te.url)))).map((Te,He)=>({analysis:Te,result:fe[He]})).sort((Te,He)=>He.analysis.qualityScore-Te.analysis.qualityScore)[0];ke&&ke.analysis.qualityScore>=70?(oe(`   Best image: ${ke.analysis.qualityScore}% confidence`),r(Te=>Te.map(He=>He.id===Re.id?{...He,status:"ready",selectedImageUrl:ke.result.url,analysis:ke.analysis,confidence:ke.analysis.qualityScore,wasProcessed:!0}:He))):(oe(`   Low quality images (best: ${(ke==null?void 0:ke.analysis.qualityScore)||0}%)`),r(Te=>Te.map(He=>He.id===Re.id?{...He,status:"ready",analysis:(ke==null?void 0:ke.analysis)||null,confidence:(ke==null?void 0:ke.analysis.qualityScore)||0,wasProcessed:!0}:He)))}}catch(fe){oe(`   Error: ${fe instanceof Error?fe.message:"Unknown error"}`),r(Oe=>Oe.map(ke=>ke.id===Re.id?{...ke,status:"failed",error:"Search failed",wasProcessed:!0}:ke))}r(fe=>(ji(fe),fe)),await new Promise(fe=>setTimeout(fe,1e3))}oe("Barcode image search complete"),u(!1),p(!1),m(0),C(0)},[t,O,oe]),fi=v.useCallback(()=>{let $=t;switch(w){case"pending":$=$.filter(ae=>ae.status==="pending");break;case"ready":$=$.filter(ae=>ae.status==="ready");break;case"selected":$=$.filter(ae=>ae.selected);break;case"nutrition_found":$=$.filter(ae=>ae.nutritionStatus==="found");break;case"nutrition_failed":$=$.filter(ae=>ae.nutritionStatus==="not_found"||ae.nutritionStatus==="failed");break}if(re.trim()){const ae=Re=>Re.toLowerCase().replace(/[^\w\s]/g,"").replace(/\s+/g," ").trim(),z=ae(re);$=$.filter(Re=>{var fe;return ae(Re.name).includes(z)||ae(Re.brandName||"").includes(z)||((fe=Re.barcode)==null?void 0:fe.includes(re.trim()))||ae(Re.objectID).includes(z)})}return $},[t,w,re]),yo=fi(),Eh=yo.slice(x*De,(x+1)*De),Co=Math.ceil(yo.length/De),Bi=t.filter($=>$.selected).length,Xl=t.filter($=>$.status==="pending").length,Wa=t.filter($=>$.status==="ready").length,AE=t.filter($=>$.nutritionStatus==="found").length,Jf=t.filter($=>$.nutritionStatus==="not_found"||$.nutritionStatus==="failed").length,Ph={pending:"bg-gray-100 text-gray-600",searching:"bg-blue-100 text-blue-600",analyzing:"bg-yellow-100 text-yellow-600",ready:"bg-green-100 text-green-600",uploading:"bg-purple-100 text-purple-600",completed:"bg-green-500 text-white",failed:"bg-red-100 text-red-600",no_results:"bg-gray-200 text-gray-500"},na={pending:"Pending",searching:"Searching...",analyzing:"Analyzing...",ready:"Ready",uploading:"Uploading...",completed:"Done",failed:"Failed",no_results:"No Results"};return h.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[h.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Google Image Scraper"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Find official white background product images from manufacturer sites"})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[t.length>0&&!c&&h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:()=>{r([]),T(!0),k({total:0,completed:0,failed:0,noResults:0,processing:0})},className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Change Indices"]}),h.jsxs("button",{onClick:()=>{const $=t.filter(ae=>ae.wasProcessed).length;if($===0){alert("No processed foods to reset.");return}confirm(`Reset processed flags for ${$} foods?

This allows reprocessing with different settings without losing data.`)&&vt()},className:"flex items-center gap-2 px-3 py-2 text-sm text-orange-600 hover:bg-orange-50 rounded-lg",title:"Reset processed flags to allow reprocessing with different settings",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset Processed"]}),h.jsxs("button",{onClick:()=>{confirm(`Clear ALL saved data?

This will remove everything from browser storage and reset to empty state.`)&&(ct(),r([]),T(!0),k({total:0,completed:0,failed:0,noResults:0,processing:0}),A([]),m(0),C(0))},className:"flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg",title:"Clear saved progress from browser storage",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Clear All Data"]})]}),h.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm ${O?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${O?"bg-green-500":"bg-red-500"}`}),O?"API Configured":"API Not Configured"]}),c?h.jsxs(h.Fragment,{children:[d?h.jsx("button",{onClick:Br,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Resume"}):h.jsx("button",{onClick:pi,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700",children:"Pause"}),h.jsx("button",{onClick:ra,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Stop"})]}):h.jsxs(h.Fragment,{children:[t.length>0&&h.jsxs("button",{onClick:vo,disabled:n||!O||Bi===0&&Xl===0,className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",title:"Search for images using each food's barcode instead of product name",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),Bi>0?`Search by Barcode (${Bi})`:`Search All by Barcode (${Xl})`]}),h.jsxs("button",{onClick:mo,disabled:n||!q&&!O||Bi===0&&Xl===0,className:"flex items-center gap-2 px-5 py-2.5 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:[q?h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),q?Bi>0?`Scrape Nutrition (${Bi})`:`Scrape All Nutrition (${Xl})`:Bi>0?`Search Selected (${Bi})`:`Search All (${Xl})`]}),Bi>0&&t.some($=>$.selected&&$.nutritionData)&&h.jsxs("button",{onClick:async()=>{const $=t.filter(ae=>ae.selected&&ae.nutritionData);if($.length===0){oe(" No selected items have nutrition data to save");return}oe(` Saving nutrition for ${$.length} selected items...`),u(!0);for(const ae of $){const z=ae.nutritionData;try{oe(` Saving nutrition for ${ae.name}...`);const Re=ae.sourceIndex==="fast_foods_database";let fe=null;if(Re){const Te=ae.name.toLowerCase();let He="item";if(Te.includes("burger")?He="burger":Te.includes("sandwich")?He="sandwich":Te.includes("wrap")?He="wrap":Te.includes("salad")?He="salad":Te.includes("fries")||Te.includes("chips")||Te.includes("nugget")?He="serving":Te.includes("pizza")&&(He="pizza"),z.servingSize){const Ge=typeof z.servingSize=="number"?`${z.servingSize}g`:z.servingSize;fe=`${He} (${Ge})`}else fe=He}const Oe=Re?{calories:z.calories??null,protein:z.protein??null,carbs:z.carbs??null,fat:z.fat??null,saturatedFat:z.saturatedFat??null,fiber:z.fiber??null,sugar:z.sugar??null,sodium:z.sodium??null,salt:z.salt??null,servingSizeG:1,servingDescription:fe,isPerUnit:!0,ingredients:z.ingredients??null,sourceUrl:z.sourceUrl??null}:{...z.calories!==void 0&&{calories:z.calories},...z.protein!==void 0&&{protein:z.protein},...z.carbs!==void 0&&{carbs:z.carbs},...z.fat!==void 0&&{fat:z.fat},...z.saturatedFat!==void 0&&{saturatedFat:z.saturatedFat},...z.fiber!==void 0&&{fiber:z.fiber},...z.sugar!==void 0&&{sugar:z.sugar},...z.sodium!==void 0&&{sodium:z.sodium},...z.salt!==void 0&&{salt:z.salt},...(()=>{const Te=z.servingSize;if(!Te)return{};const He=String(Te).match(/\((\d+(?:\.\d+)?)\s*g\)/i);if(He){const It=parseFloat(He[1]),Rt=String(Te).replace(/\s*\(\d+(?:\.\d+)?\s*g\)\s*/i,"").trim();return{servingSizeG:It,servingDescription:Rt||"per serving"}}const Ge=String(Te).match(/^(\d+(?:\.\d+)?)\s*g$/i);if(Ge)return{servingSizeG:parseFloat(Ge[1]),servingDescription:"per serving"};if(typeof Te=="number")return{servingSizeG:Te,servingDescription:"per serving"};const Ie=String(Te).toLowerCase().trim();return/^\d+\s*(egg|piece|bar|slice|biscuit|item|unit|portion|serving|pack|sachet|pot|cookie|cracker|tablet|capsule|scoop)s?$/i.test(Ie)?(console.log(`    Rejected vague serving size without weight: "${Te}"`),{}):["per serving","per portion","serving","portion","per unit","unit"].includes(Ie)?(console.log(`    Rejected vague serving size: "${Te}"`),{}):{servingDescription:String(Te)}})(),...z.ingredients!==void 0&&{ingredients:z.ingredients},...z.sourceUrl!==void 0&&{sourceUrl:z.sourceUrl}};oe(` Payload fields: ${Object.keys(Oe).join(", ")}`);const ke=await fetch("https://us-central1-nutrasafe-705c7.cloudfunctions.net/updateFoodNutrition",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({index:ae.sourceIndex,objectID:ae.objectID,nutritionData:Oe})});ke.ok?oe(` ${ae.name}: Saved to database`):oe(` ${ae.name}: Save failed - ${ke.status}`)}catch(Re){oe(` ${ae.name}: Save error - ${Re}`)}}oe(` Saved nutrition for ${$.length} items`),u(!1)},disabled:c,className:"flex items-center gap-2 px-5 py-2.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Save Nutrition (",t.filter($=>$.selected&&$.nutritionData).length,")"]}),Wa>0&&h.jsxs("button",{onClick:async()=>{const $=t.filter(ae=>ae.status==="ready"&&ae.selectedImageUrl);oe(`Starting upload of ${$.length} ready items...`);for(const ae of $){r(z=>z.map(Re=>Re.id===ae.id?{...Re,status:"uploading"}:Re));try{oe(`Uploading ${ae.name}...`);const z=await fetch("https://us-central1-nutrasafe-705c7.cloudfunctions.net/uploadFoodImage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:ae.selectedImageUrl,index:ae.sourceIndex,objectID:ae.objectID})});if(!z.ok){const fe=await z.text();throw new Error(`HTTP ${z.status}: ${fe}`)}const Re=await z.json();oe(` ${ae.name}`),r(fe=>fe.map(Oe=>Oe.id===ae.id?{...Oe,status:"completed",currentImageUrl:Re.imageUrl}:Oe)),await new Promise(fe=>setTimeout(fe,500))}catch(z){oe(` ${ae.name}: ${z instanceof Error?z.message:"Unknown error"}`),r(Re=>Re.map(fe=>fe.id===ae.id?{...fe,status:"failed",error:"Upload failed"}:fe))}}oe("Upload batch complete")},className:"flex items-center gap-2 px-5 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload All Ready (",Wa,")"]})]})]})]}),t.length>0&&h.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsxs("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"text-sm font-medium text-blue-900 mb-3",children:"Active Settings (Click to change)"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[h.jsxs("label",{className:"flex items-center gap-2 p-2 rounded bg-white border border-blue-200 cursor-pointer hover:bg-blue-50 transition-colors",children:[h.jsx("input",{type:"checkbox",checked:q,onChange:$=>le($.target.checked),disabled:c,className:"w-4 h-4 text-purple-600 rounded"}),h.jsx("span",{className:"text-sm font-medium",children:" Nutrition Only (No Images)"})]}),h.jsxs("label",{className:"flex items-center gap-2 p-2 rounded bg-white border border-blue-200 cursor-pointer hover:bg-blue-50 transition-colors",children:[h.jsx("input",{type:"checkbox",checked:Z,onChange:$=>Ve($.target.checked),disabled:c,className:"w-4 h-4 text-green-600 rounded"}),h.jsx("span",{className:"text-sm",children:"Nutrition Values"})]}),h.jsxs("label",{className:"flex items-center gap-2 p-2 rounded bg-white border border-blue-200 cursor-pointer hover:bg-blue-50 transition-colors",children:[h.jsx("input",{type:"checkbox",checked:ve,onChange:$=>Ze($.target.checked),disabled:c,className:"w-4 h-4 text-blue-600 rounded"}),h.jsx("span",{className:"text-sm font-medium",children:" Serving Size"})]}),h.jsxs("label",{className:"flex items-center gap-2 p-2 rounded bg-white border border-blue-200 cursor-pointer hover:bg-blue-50 transition-colors",children:[h.jsx("input",{type:"checkbox",checked:je,onChange:$=>de($.target.checked),disabled:c,className:"w-4 h-4 text-purple-600 rounded"}),h.jsx("span",{className:"text-sm",children:" Ingredients"})]}),h.jsxs("label",{className:"flex items-center gap-2 p-2 rounded bg-white border border-blue-200 cursor-pointer hover:bg-blue-50 transition-colors",children:[h.jsx("input",{type:"checkbox",checked:X,onChange:$=>B($.target.checked),disabled:c,className:"w-4 h-4 text-gray-600 rounded"}),h.jsx("span",{className:"text-sm",children:" UK Only"})]}),h.jsxs("label",{className:"flex items-center gap-2 p-2 rounded bg-white border border-blue-200 cursor-pointer hover:bg-blue-50 transition-colors",children:[h.jsx("input",{type:"checkbox",checked:Pe,onChange:$=>ue($.target.checked),disabled:c,className:"w-4 h-4 text-gray-600 rounded"}),h.jsx("span",{className:"text-sm",children:"Exclude Drinks"})]})]}),c&&h.jsx("div",{className:"mt-2 text-xs text-yellow-700 bg-yellow-100 px-2 py-1 rounded",children:" Settings locked during processing. Stop to change settings."})]})]})}),h.jsxs("div",{className:"space-y-3",children:[c&&y>0&&h.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("span",{className:"text-sm font-medium text-blue-900",children:["Processing: ",f," / ",y]}),h.jsxs("span",{className:"text-sm text-blue-700",children:[Math.round(f/y*100),"%"]})]}),h.jsx("div",{className:"h-3 bg-blue-200 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:`${f/y*100}%`}})}),d&&h.jsx("div",{className:"mt-2 text-sm text-yellow-700 font-medium",children:" Paused - Click Resume to continue"})]}),n&&h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-primary-500 transition-all",style:{width:`${s}%`}})}),h.jsx("span",{className:"text-sm text-gray-500",children:a||`Loading... ${s}%`})]}),!n&&t.length>0&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden flex",children:[h.jsx("div",{className:"h-full bg-green-500 transition-all",style:{width:`${I.completed/Math.max(I.total,1)*100}%`}}),h.jsx("div",{className:"h-full bg-blue-400 transition-all",style:{width:`${Wa/Math.max(I.total,1)*100}%`}}),h.jsx("div",{className:"h-full bg-red-400 transition-all",style:{width:`${I.failed/Math.max(I.total,1)*100}%`}}),h.jsx("div",{className:"h-full bg-gray-400 transition-all",style:{width:`${I.noResults/Math.max(I.total,1)*100}%`}}),h.jsx("div",{className:"h-full bg-yellow-400 animate-pulse",style:{width:`${I.processing/Math.max(I.total,1)*100}%`}})]}),h.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[h.jsxs("span",{className:"text-gray-600",children:["Total: ",h.jsx("strong",{children:I.total.toLocaleString()})]}),h.jsxs("span",{className:"text-green-600",children:["Completed: ",h.jsx("strong",{children:I.completed.toLocaleString()})]}),h.jsxs("span",{className:"text-blue-600",children:["Ready: ",h.jsx("strong",{children:Wa.toLocaleString()})]}),h.jsxs("span",{className:"text-red-600",children:["Failed: ",h.jsx("strong",{children:I.failed.toLocaleString()})]}),h.jsxs("span",{className:"text-gray-500",children:["No Results: ",h.jsx("strong",{children:I.noResults.toLocaleString()})]}),I.processing>0&&h.jsxs("span",{className:"text-yellow-600 animate-pulse",children:["Processing: ",h.jsx("strong",{children:I.processing})]}),Bi>0&&h.jsxs("span",{className:"text-primary-600",children:["Selected: ",h.jsx("strong",{children:Bi})]}),(()=>{const $=t.filter(z=>z.wasProcessed).length,ae=t.length-$;return h.jsxs(h.Fragment,{children:[h.jsxs("span",{className:"text-purple-600",children:["Processed: ",h.jsx("strong",{children:$.toLocaleString()})]}),ae>0&&h.jsxs("span",{className:"text-orange-600",children:["Remaining: ",h.jsx("strong",{children:ae.toLocaleString()})]})]})})(),G&&h.jsxs("span",{className:"text-blue-600",children:[" UK Filter: ",h.jsx("strong",{children:G.ukCount})," kept (",G.ukPercentage,"%), ",h.jsx("strong",{children:G.nonUkCount})," filtered (",G.nonUkPercentage,"%)"]}),ce&&h.jsxs("span",{className:"text-purple-600",children:[" Image Filter: ",h.jsx("strong",{children:ce.withoutImages.toLocaleString()})," without images, ",h.jsx("strong",{children:ce.withImages.toLocaleString()})," with images hidden"]})]})]})]})]}),h.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 flex items-center justify-between",children:[h.jsx("div",{className:"flex gap-1",children:[{value:"all",label:"All",count:t.length},{value:"pending",label:"Pending",count:Xl},{value:"ready",label:"Ready",count:Wa},{value:"selected",label:"Selected",count:Bi},{value:"nutrition_found",label:" Nutrition Found",count:AE},{value:"nutrition_failed",label:" No Nutrition",count:Jf}].map($=>h.jsxs("button",{onClick:()=>{b($.value),E(0)},className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${w===$.value?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[$.label," (",$.count.toLocaleString(),")"]},$.value))}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",placeholder:"Search foods...",value:re,onChange:$=>{se($.target.value),E(0)},onKeyDown:$=>{$.key==="Enter"&&re.trim()&&t.length===0&&Wr()},className:"w-64 px-3 py-1.5 pl-9 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),h.jsx("svg",{className:"absolute left-2.5 top-2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),re&&h.jsx("button",{onClick:()=>{se(""),E(0)},className:"absolute right-2 top-2 text-gray-400 hover:text-gray-600",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.length===0&&h.jsxs("button",{onClick:Wr,disabled:!re.trim()||Ce||D.size===0,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[Ce?h.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Search Algolia"]}),re&&t.length>0&&h.jsxs("span",{className:"text-xs text-gray-500",children:[yo.length," result",yo.length!==1?"s":""," (filtered)"]}),h.jsx("button",{onClick:go,className:"px-3 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded",children:"Select All"}),h.jsx("button",{onClick:Au,className:"px-3 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded",children:"Deselect All"})]})]}),h.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[h.jsx("div",{className:"flex-1 overflow-auto p-6",children:M&&!n&&t.length===0?h.jsx("div",{className:"max-w-3xl mx-auto",children:h.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:[h.jsxs("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 px-6 py-5 text-white",children:[h.jsx("h2",{className:"text-xl font-bold",children:"Google Image Scraper"}),h.jsx("p",{className:"text-primary-100 text-sm mt-1",children:"Search Google for official white background product images from manufacturer sites"})]}),!O&&h.jsx("div",{className:"px-6 py-4 bg-yellow-50 border-b border-yellow-100",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("svg",{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Google API Not Configured"}),h.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"You need a Google API key and Custom Search Engine ID. Check the browser console for setup instructions."}),h.jsx("button",{onClick:()=>oe(i2()),className:"mt-2 text-xs text-yellow-800 underline hover:text-yellow-900",children:"Show setup instructions in console"})]})]})}),h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-gray-500",children:[h.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-primary-600 text-white rounded-full text-xs font-bold",children:"1"}),h.jsx("span",{className:"font-medium text-gray-700",children:"Select indices to load foods from"})]}),h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 mb-6",children:gr.map($=>h.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border-2 cursor-pointer transition-all ${D.has($)?"border-primary-500 bg-primary-50 shadow-sm":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[h.jsx("input",{type:"checkbox",checked:D.has($),onChange:()=>{L(ae=>{const z=new Set(ae);return z.has($)?z.delete($):z.add($),z})},className:"w-4 h-4 text-primary-600 rounded"}),h.jsx("span",{className:"text-sm font-medium text-gray-700 truncate",children:$.replace(/_/g," ")})]},$))}),h.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-6 border-b border-gray-200",children:[h.jsx("button",{onClick:()=>L(new Set(gr)),className:"px-3 py-1.5 text-sm text-primary-700 bg-primary-50 hover:bg-primary-100 rounded-lg transition-colors",children:"Select All"}),h.jsx("button",{onClick:()=>L(new Set),className:"px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Clear All"}),h.jsxs("span",{className:"text-sm text-gray-400",children:[D.size," of ",gr.length," selected"]})]}),h.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3 text-sm text-gray-500",children:[h.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-primary-600 text-white rounded-full text-xs font-bold",children:"2"}),h.jsx("span",{className:"font-medium text-gray-700",children:"Filter products by region"})]}),h.jsxs("label",{className:"flex items-start gap-3 p-4 rounded-lg border-2 border-blue-200 bg-blue-50 cursor-pointer hover:bg-blue-100 transition-colors",children:[h.jsx("input",{type:"checkbox",checked:X,onChange:$=>B($.target.checked),className:"w-4 h-4 text-blue-600 rounded mt-0.5"}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm font-medium text-gray-900",children:" UK Products Only"}),h.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold text-blue-700 bg-blue-200 rounded-full",children:"Recommended"})]}),h.jsx("p",{className:"text-xs text-gray-600 mt-1",children:'Filter out non-UK products before searching images. Detects US spelling (color vs colour), foreign languages, and non-UK brands. Allows up to 10% non-UK content to include French-named UK products (e.g., "crme frache").'})]})]}),h.jsxs("label",{className:"flex items-start gap-3 p-4 rounded-lg border-2 border-purple-200 bg-purple-50 cursor-pointer hover:bg-purple-100 transition-colors mt-3",children:[h.jsx("input",{type:"checkbox",checked:W,onChange:$=>ne($.target.checked),className:"w-4 h-4 text-purple-600 rounded mt-0.5"}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm font-medium text-gray-900",children:" Hide Foods With Images"}),h.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold text-purple-700 bg-purple-200 rounded-full",children:"Recommended"})]}),h.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Only show foods that are missing images. This helps you focus on products that actually need image scraping, saving time and API calls."})]})]}),h.jsxs("label",{className:"flex items-start gap-3 p-4 rounded-lg border-2 border-orange-200 bg-orange-50 cursor-pointer hover:bg-orange-100 transition-colors mt-3",children:[h.jsx("input",{type:"checkbox",checked:J,onChange:$=>ye($.target.checked),className:"w-4 h-4 text-orange-600 rounded mt-0.5"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsx("span",{className:"text-sm font-medium text-gray-900",children:"0 Very Low Calorie (0-5 kcal)"})}),h.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Only show foods with 0-5 calories per 100g. Catches zero-calorie sweeteners, diet sodas, condiments, and other ultra-low calorie products (including 1-2 kcal items like sugar-free syrups)."})]})]}),J&&h.jsxs("label",{className:"flex items-start gap-3 p-4 rounded-lg border-2 border-amber-200 bg-amber-50 cursor-pointer hover:bg-amber-100 transition-colors mt-3 ml-6",children:[h.jsx("input",{type:"checkbox",checked:Pe,onChange:$=>ue($.target.checked),className:"w-4 h-4 text-amber-600 rounded mt-0.5"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsx("span",{className:"text-sm font-medium text-gray-900",children:" Exclude Drinks"})}),h.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"When filtering very low calorie items, exclude beverages like water, diet sodas, tea, coffee, and other drinks. Focus on actual food items only."})]})]}),h.jsxs("label",{className:"flex items-start gap-3 p-4 rounded-lg border-2 border-green-200 bg-green-50 cursor-pointer hover:bg-green-100 transition-colors mt-3",children:[h.jsx("input",{type:"checkbox",checked:Z,onChange:$=>Ve($.target.checked),className:"w-4 h-4 text-green-600 rounded mt-0.5"}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm font-medium text-gray-900",children:" Scrape Nutrition Data"}),h.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold text-green-700 bg-green-200 rounded-full",children:"Recommended"})]}),h.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Automatically fetch nutrition information from Google during processing. Includes calories, protein, carbs, fat, fiber, sugar, and sodium."})]})]}),h.jsxs("label",{className:"flex items-start gap-3 p-4 rounded-lg border-2 border-blue-200 bg-blue-50 cursor-pointer hover:bg-blue-100 transition-colors mt-3",children:[h.jsx("input",{type:"checkbox",checked:ve,onChange:$=>Ze($.target.checked),className:"w-4 h-4 text-blue-600 rounded mt-0.5"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsx("span",{className:"text-sm font-medium text-gray-900",children:" Require Serving Size (Recommended)"})}),h.jsx("p",{className:"text-xs text-gray-600 mt-1",children:'Only extract nutrition data if an ACTUAL serving size is specified (e.g., "30g", "per piece (50g)"). Per-100g-only data will be rejected. This ensures all scraped data has real-world portion sizes. Highly recommended to avoid misleading per-100g values.'})]})]}),h.jsxs("label",{className:"flex items-start gap-3 p-4 rounded-lg border-2 border-purple-200 bg-purple-50 cursor-pointer hover:bg-purple-100 transition-colors mt-3",children:[h.jsx("input",{type:"checkbox",checked:je,onChange:$=>de($.target.checked),className:"w-4 h-4 text-purple-600 rounded mt-0.5"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsx("span",{className:"text-sm font-medium text-gray-900",children:" Scrape Ingredients"})}),h.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Automatically extract ingredient lists from product pages. Essential for allergen detection and dietary restrictions."})]})]}),h.jsxs("label",{className:"flex items-start gap-3 p-4 rounded-lg border-2 border-teal-200 bg-teal-50 cursor-pointer hover:bg-teal-100 transition-colors mt-3",children:[h.jsx("input",{type:"checkbox",checked:q,onChange:$=>le($.target.checked),className:"w-4 h-4 text-teal-600 rounded mt-0.5"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsx("span",{className:"text-sm font-medium text-gray-900",children:" Nutrition Only Mode"})}),h.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Skip image scraping entirely - only search for nutrition data. Much faster and uses fewer API calls. Great for quickly filling in missing nutrition information."})]})]})]}),h.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3 text-sm text-gray-500",children:[h.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-primary-600 text-white rounded-full text-xs font-bold",children:"3"}),h.jsx("span",{className:"font-medium text-gray-700",children:"Search by barcode or load all"})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("div",{className:"flex-1",children:h.jsx("input",{type:"text",placeholder:"Enter barcode (e.g., 5000159407236)",value:ee,onChange:$=>K($.target.value),onKeyDown:$=>{$.key==="Enter"&&ee.trim()&&Pr()},className:"w-full px-4 py-3 text-sm border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})}),h.jsxs("button",{onClick:Pr,disabled:!ee.trim()||U||D.size===0,className:"flex items-center gap-2 px-5 py-3 text-sm font-semibold text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg",children:[U?h.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"Search"]})]}),h.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" Search for a specific product by barcode, or load all foods from selected indices below"})]}),h.jsxs("button",{onClick:Os,disabled:D.size===0,className:"w-full flex items-center justify-center gap-3 px-6 py-4 text-lg font-semibold text-white bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 rounded-xl shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none",children:[h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Load All ",D.size>0?`Foods from ${D.size} ${D.size===1?"Index":"Indices"}`:"Foods"]}),D.size===0&&h.jsx("p",{className:"text-center text-sm text-red-500 mt-3",children:"Select at least one index to continue"})]})]})}):n?h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsxs("div",{className:"flex flex-col items-center gap-3",children:[h.jsxs("svg",{className:"w-8 h-8 animate-spin text-primary-600",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),h.jsx("span",{className:"text-gray-500",children:a||"Loading foods..."})]})}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"grid gap-3",children:Eh.map($=>h.jsx("div",{className:`bg-white rounded-lg border p-4 transition-colors ${$.selected?"border-primary-500 bg-primary-50":"border-gray-200"}`,children:h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("input",{type:"checkbox",checked:$.selected,onChange:()=>Qn($.id),className:"w-4 h-4 text-primary-600 rounded mt-1"}),h.jsxs("div",{className:"flex-shrink-0",children:[h.jsx("div",{className:"text-xs text-gray-400 mb-1 text-center",children:$.selectedImageUrl?"Selected":"Current"}),h.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded flex items-center justify-center overflow-hidden cursor-pointer hover:ring-2 hover:ring-primary-400",onClick:()=>{const ae=$.selectedImageUrl||$.currentImageUrl;ae&&ie({url:ae,title:`${$.name}`})},children:$.selectedImageUrl?h.jsx("img",{src:$.selectedImageUrl,alt:"",className:"w-full h-full object-contain"}):$.currentImageUrl?h.jsx("img",{src:$.currentImageUrl,alt:"",className:"w-full h-full object-contain"}):h.jsx("span",{className:"text-xs text-gray-400",children:"None"})})]}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:"font-medium text-gray-900",children:$.name}),$.brandName&&h.jsx("div",{className:"text-sm text-gray-500",children:$.brandName}),h.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-1",children:[h.jsx("span",{className:"px-1.5 py-0.5 bg-gray-100 rounded",children:$.sourceIndex.replace(/_/g," ")}),$.calories!==void 0&&h.jsxs("span",{className:"px-1.5 py-0.5 bg-gray-100 rounded",children:[$.calories," cal"]})]}),$.nutritionData&&h.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded text-xs",children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsxs("div",{className:"font-semibold text-green-900 flex items-center gap-1",children:[" Nutrition (per 100g)",$.nutritionData.servingSize&&h.jsx("span",{className:"text-blue-600",children:""})]}),h.jsx("div",{className:"text-[10px] text-green-700",children:$.nutritionData.sourceUrl?h.jsxs("a",{href:$.nutritionData.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"hover:underline text-blue-600 hover:text-blue-800",children:[$.nutritionData.source," "]}):$.nutritionData.source})]}),$.nutritionData.servingSize&&h.jsxs("div",{className:"px-2 py-1 bg-blue-50 border border-blue-200 rounded text-[11px] text-blue-900 font-medium mb-1",children:[" Serving: ",$.nutritionData.servingSize]}),h.jsxs("div",{className:"grid grid-cols-3 gap-2 text-gray-700",children:[$.nutritionData.calories!==void 0&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:"Cal:"})," ",$.nutritionData.calories]}),$.nutritionData.protein!==void 0&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:"Protein:"})," ",$.nutritionData.protein,"g"]}),$.nutritionData.carbs!==void 0&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:"Carbs:"})," ",$.nutritionData.carbs,"g"]}),$.nutritionData.fat!==void 0&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:"Fat:"})," ",$.nutritionData.fat,"g"]}),$.nutritionData.saturatedFat!==void 0&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:"Sat Fat:"})," ",$.nutritionData.saturatedFat,"g"]}),$.nutritionData.fiber!==void 0&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:"Fiber:"})," ",$.nutritionData.fiber,"g"]}),$.nutritionData.sugar!==void 0&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:"Sugar:"})," ",$.nutritionData.sugar,"g"]}),$.nutritionData.sodium!==void 0&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:"Sodium:"})," ",$.nutritionData.sodium,"mg"]}),$.nutritionData.salt!==void 0&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:"Salt:"})," ",$.nutritionData.salt,"g"]})]})]}),$.nutritionStatus!=="pending"&&!$.nutritionData&&h.jsx("div",{className:"mt-2 text-xs",children:h.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded ${$.nutritionStatus==="searching"?"bg-blue-100 text-blue-700":$.nutritionStatus==="not_found"?"bg-yellow-100 text-yellow-700":$.nutritionStatus==="failed"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:[$.nutritionStatus==="searching"&&" Searching nutrition...",$.nutritionStatus==="not_found"&&" No nutrition data found",$.nutritionStatus==="failed"&&" Nutrition search failed"]})}),$.searchResults.length>0&&h.jsxs("div",{className:"mt-3",children:[h.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Found ",$.searchResults.length," images",$.confidence!==void 0&&h.jsxs("span",{className:`ml-2 font-semibold ${$.confidence>=80?"text-green-600":$.confidence>=60?"text-yellow-600":"text-red-600"}`,children:[$.confidence>=80?"":""," ",$.confidence,"% confidence"]})]}),h.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:$.searchResults.slice(0,10).map((ae,z)=>h.jsxs("div",{className:"flex-shrink-0 relative group",children:[h.jsx("div",{className:`w-20 h-20 bg-gray-100 rounded overflow-hidden cursor-pointer hover:ring-2 hover:ring-blue-400 ${$.selectedImageUrl===ae.url?"ring-2 ring-primary-500":""}`,onClick:()=>{ie({url:ae.url,title:`${$.name} - Result ${z+1} (${ae.domain})`})},children:h.jsx("img",{src:ae.thumbnail,alt:"",className:"w-full h-full object-cover"})}),ae.isManufacturerSite&&h.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:h.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),$.selectedImageUrl===ae.url&&h.jsx("div",{className:"absolute inset-0 bg-primary-500/20 rounded flex items-center justify-center",children:h.jsx("svg",{className:"w-8 h-8 text-primary-600",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),h.jsx("button",{onClick:Re=>{Re.stopPropagation(),r(fe=>fe.map(Oe=>Oe.id===$.id?{...Oe,selectedImageUrl:ae.url,status:"ready",error:void 0}:Oe)),oe(`Selected image for ${$.name} - ready for upload`)},className:"absolute bottom-0 left-0 right-0 bg-primary-600 text-white text-[9px] py-0.5 hover:bg-primary-700 opacity-0 group-hover:opacity-100 transition-opacity",children:"Select This"}),h.jsx("div",{className:"text-[8px] text-gray-400 mt-0.5 truncate w-20 text-center",children:ae.domain})]},z))})]})]}),h.jsxs("div",{className:"flex-shrink-0 text-right",children:[h.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${Ph[$.status]}`,children:[["searching","analyzing","uploading"].includes($.status)&&h.jsxs("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),na[$.status]]}),$.status==="analyzing"&&h.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[$.analysisProgress,"%"]}),$.error&&h.jsx("div",{className:"text-[10px] text-red-500 mt-1 max-w-[120px]",title:$.error,children:$.error})]})]})},$.id))}),Co>1&&h.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4",children:[h.jsx("button",{onClick:()=>E($=>Math.max(0,$-1)),disabled:x===0,className:"px-3 py-1 text-sm bg-white border rounded hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),h.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",x+1," of ",Co]}),h.jsx("button",{onClick:()=>E($=>Math.min(Co-1,$+1)),disabled:x>=Co-1,className:"px-3 py-1 text-sm bg-white border rounded hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})]})}),h.jsxs("div",{className:"w-80 border-l border-gray-200 bg-gray-900 flex flex-col",children:[h.jsx("div",{className:"px-4 py-2 border-b border-gray-700 text-gray-400 text-xs font-medium uppercase",children:"Processing Log"}),h.jsx("div",{className:"flex-1 overflow-auto p-3 font-mono text-xs text-gray-300 space-y-1",children:P.length===0?h.jsx("div",{className:"text-gray-500",children:"No activity yet..."}):P.map(($,ae)=>h.jsx("div",{className:"break-all",children:$},ae))})]})]}),me&&h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:()=>ie(null),children:h.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh] flex flex-col items-center",children:[h.jsx("button",{onClick:()=>ie(null),className:"absolute -top-12 right-0 p-2 text-white/80 hover:text-white transition-colors",children:h.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),h.jsx("div",{className:"absolute -top-12 left-0 text-white font-medium",children:me.title}),h.jsx("div",{className:"rounded-lg overflow-hidden shadow-2xl",style:{backgroundImage:"linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%)",backgroundSize:"20px 20px",backgroundPosition:"0 0, 0 10px, 10px -10px, -10px 0px",backgroundColor:"#fff"},onClick:$=>$.stopPropagation(),children:h.jsx("img",{src:me.url,alt:me.title,className:"max-w-[85vw] max-h-[80vh] object-contain"})}),me.analysis&&h.jsxs("div",{className:"mt-4 bg-white/10 backdrop-blur-md rounded-lg px-4 py-3 text-white text-sm",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("span",{children:["Background: ",me.analysis.hasWhiteBackground?"":""," White (",me.analysis.backgroundConfidence,"%)"]}),h.jsxs("span",{children:["Overlay: ",me.analysis.hasOverlay?" Yes":" None"]}),h.jsxs("span",{children:["Quality: ",me.analysis.qualityScore,"/100"]})]}),me.analysis.overlayTypes.length>0&&h.jsxs("div",{className:"text-xs text-white/70 mt-1",children:["Issues: ",me.analysis.overlayTypes.join(", ")]})]}),h.jsx("div",{className:"mt-4 text-white/60 text-sm",children:"Click outside or press ESC to close"})]})})]})},sc="https://us-central1-nutrasafe-705c7.cloudfunctions.net",cfe=({onBack:e})=>{var q,le;const[t,r]=v.useState([]),[n,i]=v.useState(!0),[s,o]=v.useState("pending"),[a,l]=v.useState(null),[c,u]=v.useState(new Set),[d,p]=v.useState(null),[f,m]=v.useState(!1),[y,C]=v.useState(!1),[w,b]=v.useState(null),[x,E]=v.useState("g"),I=Ne.useRef(null),[k,P]=v.useState(null),A=(G,H)=>{b({message:G,type:H}),setTimeout(()=>b(null),3e3)},D=(G,H,ce)=>G,L=()=>{const G=x==="g"?"ml":"g";if(E(G),d){const H=parseFloat(d.servingSizeG)||0,ce=D(H,d.servingUnit,G);p({...d,servingUnit:G,servingSizeG:ce.toString()})}A(`Switched to ${G.toUpperCase()} mode`,"info")},M=v.useCallback(async()=>{const G=n;i(!!G);try{const ce=await(await fetch(`${sc}/getUserReports`)).json();if(ce.success){const te=ce.reports||[],ee=te.filter(K=>K.status==="pending").length;if(I.current!==null&&ee>I.current){const K=ee-I.current;A(` ${K} new report${K>1?"s":""} received!`,"info")}I.current=ee,r(te),P(new Date)}else G&&A("Error loading reports","error")}catch(H){console.error("Error loading reports:",H),G&&A("Error loading reports","error")}finally{i(!1)}},[n]);v.useEffect(()=>{M()},[M]),v.useEffect(()=>{const G=setInterval(()=>{M()},3e4);return()=>clearInterval(G)},[M]);const T=t.filter(G=>s==="all"?!0:G.status===s),O={all:t.length,pending:t.filter(G=>G.status==="pending").length,in_progress:t.filter(G=>G.status==="in_progress").length,resolved:t.filter(G=>G.status==="resolved").length,dismissed:t.filter(G=>G.status==="dismissed").length},Q=async()=>{var ce,te;if(!confirm("This will fix all foods with missing suggestedServingUnit fields. Continue?"))return;m(!0);let G=0,H=0;try{for(const ee of t){const K=((ce=ee.food)==null?void 0:ce.id)||((te=ee.food)==null?void 0:te.objectID)||ee.foodId;if(!K)continue;let U=null;try{U=await WF(K)}catch{U=ee.food}const j=U||ee.food||{};if(j.suggestedServingUnit)continue;let re="g";j.servingDescription&&j.servingDescription.toLowerCase().includes("ml")&&(re="ml");const se=j._sourceIndex||j.sourceIndex||ee.sourceIndex||"uk_foods_cleaned";try{(await(await fetch(`${sc}/adminSaveFood`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({foodId:K,indexName:se,updates:{suggestedServingUnit:re}})})).json()).success?(G++,console.log(` Fixed ${j.name||K}: ${re}`)):H++}catch(Ce){console.error(` Error fixing ${K}:`,Ce),H++}await new Promise(Ce=>setTimeout(Ce,100))}A(` Fixed ${G} foods, ${H} errors`,"success"),await M()}catch(ee){console.error("Bulk fix error:",ee),A("Error during bulk fix","error")}finally{m(!1)}},X=async G=>{var re,se,Ce,be,me,ie,he,Se,De,Be,Et;l(G);const H=((re=G.food)==null?void 0:re.id)||((se=G.food)==null?void 0:se.objectID)||G.foodId;let ce=null;if(H)try{ce=await WF(H)}catch(ut){console.error("Error fetching full food from Algolia:",ut)}const te=ce||G.food||{};console.log(" FOOD DATA:",{name:te.name,servingUnit:te.servingUnit,suggestedServingUnit:te.suggestedServingUnit,servingDescription:te.servingDescription,category:te.category});let ee="g";te.suggestedServingUnit==="ml"||te.servingUnit==="ml"?(ee="ml",console.log(" Unit from suggestedServingUnit/servingUnit field: ml")):te.servingDescription&&(te.servingDescription.toLowerCase().includes("ml")?(ee="ml",console.log(" Unit inferred from servingDescription: ml")):console.log(" Unit inferred from servingDescription: g")),console.log(" Final initialUnit:",ee),E(ee);const K=te.brandName||te.brand||G.brandName||"",U=Array.isArray(te.ingredients)?te.ingredients.join(", "):te.ingredientsText||te.ingredients||"";let j=[];te.servingTypes&&Array.isArray(te.servingTypes)?j=te.servingTypes.map((ut,ct)=>({id:ut.id||`serving_${ct}_${Date.now()}`,name:ut.name||"",servingSize:ut.servingSize||ut.serving_g||0,unit:ut.unit||ee,isDefault:ut.isDefault||ct===0})):te.portions&&Array.isArray(te.portions)?j=te.portions.map((ut,ct)=>({id:`portion_${ct}_${Date.now()}`,name:ut.name||"",servingSize:ut.serving_g||0,unit:ee,isDefault:ct===0})):(te.servingDescription||te.servingSizeG)&&(j=[{id:`default_${Date.now()}`,name:te.servingDescription||`${te.servingSizeG||100}${ee}`,servingSize:te.servingSizeG||100,unit:ee,isDefault:!0}]),p({name:te.name||G.foodName||"",brandName:K,barcode:te.barcode||G.barcode||"",servingDescription:te.servingDescription||"",servingSizeG:((Ce=te.servingSizeG)==null?void 0:Ce.toString())||"",servingUnit:ee,servingTypes:j,category:te.category||"",ingredients:U,calories:((be=te.calories)==null?void 0:be.toString())||"",protein:((me=te.protein)==null?void 0:me.toString())||"",carbs:((ie=te.carbs)==null?void 0:ie.toString())||"",fat:((he=te.fat)==null?void 0:he.toString())||"",fiber:((Se=te.fiber)==null?void 0:Se.toString())||"",sugar:((De=te.sugar)==null?void 0:De.toString())||"",salt:((Be=te.salt)==null?void 0:Be.toString())||"",saturatedFat:((Et=te.saturatedFat)==null?void 0:Et.toString())||"",imageUrl:te.imageUrl||""})},B=()=>{l(null),p(null)},W=async()=>{if(!(!a||!d)){C(!0);try{const G=d.name,H=d.brandName,te=await(await fetch(`${sc}/aiAnalyzeFood`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:G,brand:H})})).json();if(te.success&&te.data){const{suggestions:ee,nutrition:K}=te.data;p(U=>U&&{...U,...(ee==null?void 0:ee.foodName)&&{name:ee.foodName},...(ee==null?void 0:ee.brandName)&&{brandName:ee.brandName},...(ee==null?void 0:ee.barcode)&&{barcode:ee.barcode},...(ee==null?void 0:ee.servingSize)&&{servingDescription:ee.servingSize},...(ee==null?void 0:ee.ingredients)&&{ingredients:Array.isArray(ee.ingredients)?ee.ingredients.join(", "):ee.ingredients},...(K==null?void 0:K.calories)!==void 0&&{calories:K.calories.toString()},...(K==null?void 0:K.protein)!==void 0&&{protein:K.protein.toString()},...(K==null?void 0:K.carbohydrates)!==void 0&&{carbs:K.carbohydrates.toString()},...(K==null?void 0:K.fat)!==void 0&&{fat:K.fat.toString()},...(K==null?void 0:K.fiber)!==void 0&&{fiber:K.fiber.toString()},...(K==null?void 0:K.sugar)!==void 0&&{sugar:K.sugar.toString()},...(K==null?void 0:K.salt)!==void 0&&{salt:K.salt.toString()},...(K==null?void 0:K.saturatedFat)!==void 0&&{saturatedFat:K.saturatedFat.toString()}}),A("AI suggestions applied","success")}else A("No AI suggestions available","info")}catch(G){console.error("Error getting AI suggestions:",G),A("Error getting AI suggestions","error")}finally{C(!1)}}},ne=async(G=!1)=>{var H,ce,te;if(!(!a||!d)){m(!0);try{const ee=((H=a.food)==null?void 0:H.id)||((ce=a.food)==null?void 0:ce.objectID)||a.foodId,K=((te=a.food)==null?void 0:te._sourceIndex)||a.sourceIndex||"uk_foods_cleaned",U=d.servingTypes.find(me=>me.isDefault)||d.servingTypes[0],j=d.servingTypes.length>0?d.servingTypes.map(me=>({id:me.id,name:me.name,servingSize:me.servingSize,unit:me.unit,isDefault:me.isDefault})):null,re=d.servingTypes.length>0?d.servingTypes.map(me=>({name:me.name,serving_g:me.servingSize,calories:0})):null,se={foodId:ee,indexName:K,updates:{foodName:d.name,brandName:d.brandName,barcode:d.barcode,servingSize:(U==null?void 0:U.name)||d.servingDescription,servingSizeG:(U==null?void 0:U.servingSize)||parseFloat(d.servingSizeG)||null,servingUnit:(U==null?void 0:U.unit)||d.servingUnit,suggestedServingUnit:(U==null?void 0:U.unit)||d.servingUnit,suggestedServingSize:(U==null?void 0:U.servingSize)||null,suggestedServingDescription:(U==null?void 0:U.name)||null,servingTypes:j,portions:re,category:d.category,ingredients:d.ingredients.split(",").map(me=>me.trim()).filter(me=>me),imageUrl:d.imageUrl||null,nutrition:{calories:parseFloat(d.calories)||null,protein:parseFloat(d.protein)||null,carbs:parseFloat(d.carbs)||null,fat:parseFloat(d.fat)||null,fiber:parseFloat(d.fiber)||null,sugar:parseFloat(d.sugar)||null,salt:parseFloat(d.salt)||null,sodium:Math.round((parseFloat(d.salt)||0)*1e3/2.5)||null,saturatedFat:parseFloat(d.saturatedFat)||null}}};console.log(" SAVING FOOD:",{foodName:se.updates.foodName,servingUnit:se.updates.servingUnit,suggestedServingUnit:se.updates.suggestedServingUnit,servingSize:se.updates.servingSize,servingTypes:se.updates.servingTypes,portions:se.updates.portions});const be=await(await fetch(`${sc}/adminSaveFood`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)})).json();be.success?(A("Food saved successfully","success"),G&&(await J(a.id,"resolved"),B())):A(be.error||"Error saving food","error")}catch(ee){console.error("Error saving food:",ee),A("Error saving food","error")}finally{m(!1)}}},J=async(G,H)=>{try{(await(await fetch(`${sc}/updateUserReport`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportId:G,status:H})})).json()).success?(r(ee=>ee.map(K=>K.id===G?{...K,status:H}:K)),A("Report updated","success")):A("Error updating report","error")}catch(ce){console.error("Error updating report:",ce),A("Error updating report","error")}},ye=async()=>{a&&(await J(a.id,"dismissed"),B())},Pe=async G=>{if(confirm("Delete this report? This cannot be undone."))try{(await(await fetch(`${sc}/deleteUserReport`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportId:G})})).json()).success?(r(te=>te.filter(ee=>ee.id!==G)),(a==null?void 0:a.id)===G&&B(),A("Report deleted","success")):A("Error deleting report","error")}catch(H){console.error("Error deleting report:",H),A("Error deleting report","error")}},ue=async()=>{var G,H,ce;if(a&&confirm("Delete this food from the database? This cannot be undone."))try{const te=((G=a.food)==null?void 0:G.id)||((H=a.food)==null?void 0:H.objectID)||a.foodId,ee=((ce=a.food)==null?void 0:ce._sourceIndex)||a.sourceIndex||"uk_foods_cleaned",U=await(await fetch(`${sc}/deleteFood`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({foodId:te,indexName:ee})})).json();U.success?(await J(a.id,"resolved"),B(),A("Food deleted and report resolved","success")):A(U.error||"Error deleting food","error")}catch(te){console.error("Error deleting food:",te),A("Error deleting food","error")}},Z=G=>{u(H=>{const ce=new Set(H);return ce.has(G)?ce.delete(G):ce.add(G),ce})},Ve=()=>{c.size===T.length?u(new Set):u(new Set(T.map(G=>G.id)))},ve=async()=>{if(c.size===0||!confirm(`Delete ${c.size} report(s)? This cannot be undone.`))return;let G=0;for(const H of c)try{(await(await fetch(`${sc}/deleteUserReport`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportId:H})})).json()).success&&(G++,r(ee=>ee.filter(K=>K.id!==H)))}catch(ce){console.error("Error deleting report:",H,ce)}u(new Set),A(`Deleted ${G} reports`,"success")},Ze=G=>new Date(G).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),je={pending:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800",dismissed:"bg-gray-100 text-gray-600"},de={pending:"Pending",in_progress:"In Progress",resolved:"Resolved",dismissed:"Dismissed"};return h.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[w&&h.jsx("div",{className:`fixed top-4 right-4 z-50 px-4 py-3 rounded-lg shadow-lg ${w.type==="success"?"bg-green-500 text-white":w.type==="error"?"bg-red-500 text-white":"bg-blue-500 text-white"}`,children:w.message}),h.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"User Reports"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("p",{className:"text-sm text-gray-500",children:"Review and resolve user-submitted food corrections"}),k&&h.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-gray-400",children:[h.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Updated ",k.toLocaleTimeString()]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("button",{onClick:M,disabled:n,className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg",children:[h.jsx("svg",{className:`w-4 h-4 ${n?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]}),h.jsxs("button",{onClick:Q,disabled:f,className:"flex items-center gap-2 px-4 py-2 text-sm text-white bg-purple-600 hover:bg-purple-700 rounded-lg disabled:opacity-50",title:"Fix all foods with missing suggestedServingUnit",children:[h.jsx("svg",{className:`w-4 h-4 ${f?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Bulk Fix Units"]}),c.size>0&&h.jsxs("button",{onClick:ve,className:"flex items-center gap-2 px-4 py-2 text-sm text-white bg-red-600 hover:bg-red-700 rounded-lg",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete (",c.size,")"]})]})]})}),h.jsx("div",{className:"bg-white border-b border-gray-200 px-6",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex gap-1",children:["all","pending","in_progress","resolved","dismissed"].map(G=>h.jsxs("button",{onClick:()=>o(G),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${s===G?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[G==="all"?"All":G==="in_progress"?"In Progress":G.charAt(0).toUpperCase()+G.slice(1)," ",h.jsx("span",{className:`inline-flex items-center justify-center px-2 py-0.5 rounded-full text-xs ${s===G?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-600"}`,children:O[G]})]},G))}),T.length>0&&h.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600 cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:c.size===T.length&&T.length>0,onChange:Ve,className:"w-4 h-4 text-primary-600 rounded"}),"Select all"]})]})}),h.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[h.jsx("div",{className:`flex-1 overflow-auto p-6 transition-all ${a?"w-1/2":"w-full"}`,children:n?h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsxs("div",{className:"flex flex-col items-center gap-3",children:[h.jsxs("svg",{className:"w-8 h-8 animate-spin text-primary-600",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),h.jsx("span",{className:"text-gray-500",children:"Loading reports..."})]})}):T.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[h.jsx("svg",{className:"w-16 h-16 mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),h.jsx("p",{className:"text-lg font-medium",children:"No reports found"}),h.jsxs("p",{className:"text-sm",children:["No ",s==="all"?"":s," reports to display"]})]}):h.jsx("div",{className:"grid gap-3",children:T.map(G=>{var H,ce,te;return h.jsxs("div",{className:`bg-white rounded-xl border p-4 transition-all cursor-pointer hover:shadow-md ${(a==null?void 0:a.id)===G.id?"border-primary-500 ring-2 ring-primary-100":"border-gray-200"}`,onClick:()=>X(G),children:[h.jsxs("div",{className:"flex items-start gap-3",children:[G.status==="pending"&&h.jsxs("div",{className:"relative flex items-center justify-center w-4 h-4 mt-1",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-3 w-3 rounded-full bg-orange-400 opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-orange-500"})]}),G.status!=="pending"&&h.jsx("div",{className:"w-4 h-4 mt-1"}),h.jsx("input",{type:"checkbox",checked:c.has(G.id),onChange:ee=>{ee.stopPropagation(),Z(G.id)},onClick:ee=>ee.stopPropagation(),className:"mt-1 w-4 h-4 text-primary-600 rounded"}),((H=G.food)==null?void 0:H.imageUrl)&&h.jsx("div",{className:"flex-shrink-0",children:h.jsx("img",{src:G.food.imageUrl,alt:G.foodName,className:"w-16 h-16 object-cover rounded-lg border border-gray-200",onError:ee=>{ee.currentTarget.style.display="none"}})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-start justify-between gap-3",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:G.foodName||"Unknown Food"}),G.brandName&&h.jsx("p",{className:"text-sm text-gray-500",children:G.brandName})]}),h.jsx("span",{className:`flex-shrink-0 px-2.5 py-1 rounded-full text-xs font-medium ${je[G.status]}`,children:de[G.status]})]}),h.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs text-gray-500 flex-wrap",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),G.reportType||"General"]}),h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Ze(G.createdAt)]}),G.barcode&&h.jsx("span",{className:"font-mono",children:G.barcode}),(((ce=G.food)==null?void 0:ce._sourceIndex)||G.sourceIndex)&&h.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 bg-blue-50 text-blue-700 rounded font-medium",children:[h.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})}),((te=G.food)==null?void 0:te._sourceIndex)||G.sourceIndex]})]}),h.jsx("p",{className:"mt-2 text-sm text-gray-600 line-clamp-2",children:G.description||"No description provided."})]})]}),h.jsxs("div",{className:"mt-3 flex items-center gap-2 pt-3 border-t border-gray-100",children:[h.jsx("button",{onClick:ee=>{ee.stopPropagation(),X(G)},className:"flex-1 px-3 py-1.5 text-xs font-medium text-primary-700 bg-primary-50 hover:bg-primary-100 rounded-lg transition-colors",children:"Review"}),G.status==="pending"&&h.jsx("button",{onClick:ee=>{ee.stopPropagation(),J(G.id,"dismissed")},className:"px-3 py-1.5 text-xs font-medium text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Dismiss"}),h.jsx("button",{onClick:ee=>{ee.stopPropagation(),Pe(G.id)},className:"px-3 py-1.5 text-xs font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Delete"})]})]},G.id)})})}),a&&d&&h.jsx("div",{className:"w-1/2 border-l border-gray-200 bg-white overflow-auto",children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Review Report"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Edit and verify food information"})]}),h.jsx("button",{onClick:B,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),h.jsx("div",{className:"mb-6 p-4 bg-yellow-50 rounded-xl border border-yellow-100",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:"font-medium text-yellow-800",children:a.reportType||"General Report"}),(((q=a.food)==null?void 0:q._sourceIndex)||a.sourceIndex)&&h.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:[h.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})}),((le=a.food)==null?void 0:le._sourceIndex)||a.sourceIndex]})]}),h.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:a.description||"No description provided."}),h.jsxs("p",{className:"text-xs text-yellow-600 mt-2",children:["Reported ",Ze(a.createdAt)]})]})]})}),d.imageUrl&&h.jsxs("div",{className:"mb-4 rounded-xl overflow-hidden border border-gray-200",children:[h.jsx("img",{src:d.imageUrl,alt:d.name,className:"w-full h-48 object-cover",onError:G=>{G.currentTarget.style.display="none"}}),h.jsx("div",{className:"p-2 bg-gray-50 text-xs text-gray-600 truncate",title:d.imageUrl,children:d.imageUrl})]}),h.jsxs("button",{onClick:W,disabled:y,className:"w-full mb-4 flex items-center justify-center gap-2 px-4 py-3 text-sm font-medium text-purple-700 bg-purple-50 hover:bg-purple-100 rounded-xl transition-colors disabled:opacity-50",children:[y?h.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),y?"Analyzing...":"Apply AI Suggestions"]}),((a==null?void 0:a.food)||{}).suggestedServingUnit===void 0?h.jsx("div",{className:"mb-4 p-3 bg-yellow-50 rounded-xl border border-yellow-200",children:h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx("svg",{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:"text-sm font-medium text-yellow-900",children:" suggestedServingUnit Not Stored"}),h.jsxs("p",{className:"text-xs text-yellow-700 mt-0.5",children:["iOS app is guessing unit from product name (checks ",h.jsx("code",{children:"suggestedServingUnit"})," field). ",h.jsx("strong",{children:'Click "Save & Resolve"'}),' to store "',d.servingUnit,'" and fix this.']})]})]})}):null,h.jsxs("div",{className:"mb-6 flex items-center justify-between p-3 bg-blue-50 rounded-xl border border-blue-100",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})}),h.jsxs("div",{children:[h.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Unit Mode"}),h.jsxs("p",{className:"text-xs text-blue-600",children:["Current: ",x.toUpperCase()]})]})]}),h.jsxs("button",{onClick:L,className:"relative inline-flex items-center h-7 w-14 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",style:{backgroundColor:x==="ml"?"#3b82f6":"#9ca3af"},children:[h.jsx("span",{className:`inline-block w-5 h-5 transform rounded-full bg-white transition-transform ${x==="ml"?"translate-x-8":"translate-x-1"}`}),h.jsx("span",{className:"absolute left-2 text-[10px] font-bold text-white",style:{opacity:x==="g"?1:.3},children:"g"}),h.jsx("span",{className:"absolute right-1.5 text-[10px] font-bold text-white",style:{opacity:x==="ml"?1:.3},children:"ml"})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Food Name"}),h.jsx("input",{type:"text",value:d.name,onChange:G=>p({...d,name:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Brand Name"}),h.jsx("input",{type:"text",value:d.brandName,onChange:G=>p({...d,brandName:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Barcode"}),h.jsx("input",{type:"text",value:d.barcode,onChange:G=>p({...d,barcode:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Category"}),h.jsx("input",{type:"text",value:d.category,onChange:G=>p({...d,category:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Image URL"}),h.jsx("input",{type:"url",value:d.imageUrl,onChange:G=>p({...d,imageUrl:G.target.value}),placeholder:"https://example.com/image.jpg",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Serving Size"}),h.jsx("input",{type:"text",value:d.servingDescription,onChange:G=>p({...d,servingDescription:G.target.value}),placeholder:"e.g., 1 slice",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Size (g/ml)"}),h.jsx("input",{type:"number",value:d.servingSizeG,onChange:G=>p({...d,servingSizeG:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Unit"}),h.jsxs("select",{value:d.servingUnit,onChange:G=>{const H=G.target.value;console.log(" UNIT CHANGED:",d.servingUnit,"",H),p({...d,servingUnit:H}),E(H)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[h.jsx("option",{value:"g",children:"g"}),h.jsx("option",{value:"ml",children:"ml"})]})]})]}),h.jsx("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-200",children:h.jsx(vW,{servingTypes:d.servingTypes,onChange:G=>{const H=G.find(ce=>ce.isDefault)||G[0];H?(p({...d,servingTypes:G,servingDescription:H.name,servingSizeG:H.servingSize.toString(),servingUnit:H.unit}),E(H.unit)):p({...d,servingTypes:G})}})}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Ingredients"}),h.jsx("textarea",{value:d.ingredients,onChange:G=>p({...d,ingredients:G.target.value}),rows:3,placeholder:"Enter ingredients separated by commas...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Nutrition (per 100",x,")"]}),h.jsxs("span",{className:`px-2 py-0.5 text-[10px] font-bold rounded-full ${x==="g"?"bg-gray-100 text-gray-600":"bg-blue-100 text-blue-600"}`,children:[x.toUpperCase()," MODE"]})]}),h.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{key:"calories",label:"Calories",unit:"kcal"},{key:"protein",label:"Protein",unit:"g"},{key:"carbs",label:"Carbs",unit:"g"},{key:"fat",label:"Fat",unit:"g"},{key:"saturatedFat",label:"Sat Fat",unit:"g"},{key:"fiber",label:"Fibre",unit:"g"},{key:"sugar",label:"Sugar",unit:"g"},{key:"salt",label:"Salt",unit:"g"}].map(({key:G,label:H,unit:ce})=>h.jsxs("div",{children:[h.jsx("label",{className:"block text-[10px] text-gray-400 mb-1",children:H}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"number",step:"0.1",value:d[G],onChange:te=>p({...d,[G]:te.target.value}),className:"w-full px-2 py-1.5 pr-6 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),h.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-[10px] text-gray-400",children:ce})]})]},G))})]})]}),h.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 space-y-3",children:[((a==null?void 0:a.food)||{}).suggestedServingUnit===void 0?h.jsxs("div",{className:"mb-3 p-2 bg-green-50 rounded-lg border border-green-200 text-xs text-green-800",children:[" Saving will store ",h.jsxs("strong",{children:['suggestedServingUnit: "',d.servingUnit,'"']})," (iOS app checks this field)"]}):null,h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("button",{onClick:()=>ne(!0),disabled:f,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-xl transition-colors disabled:opacity-50",children:[f?h.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save & Resolve"]}),h.jsx("button",{onClick:()=>ne(!1),disabled:f,className:"px-4 py-3 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors disabled:opacity-50",children:"Save Only"})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:ye,className:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-xl transition-colors",children:"Dismiss Report"}),h.jsx("button",{onClick:ue,className:"px-4 py-2.5 text-sm font-medium text-red-600 hover:bg-red-50 rounded-xl transition-colors",children:"Delete Food"})]})]})]})})]})]})},vg="https://us-central1-nutrasafe-705c7.cloudfunctions.net",ufe=({onBack:e})=>{const[t,r]=v.useState(()=>new Set(gr)),[n,i]=v.useState(!1),[s,o]=v.useState(!1),[a,l]=v.useState(!1),[c,u]=v.useState(!1),[d,p]=v.useState([]),[f,m]=v.useState({totalScanned:0,duplicateGroups:0,productsToMerge:0,filteredForeign:0,finalMasterCount:0,processing:!1}),[y,C]=v.useState(null),[w,b]=v.useState([]),[x,E]=v.useState([]),[I,k]=v.useState(0),[P,A]=v.useState(!1),[D,L]=v.useState({}),[M,T]=v.useState(!1),[O,Q]=v.useState(""),[X,B]=v.useState(""),[W,ne]=v.useState("all"),[J,ye]=v.useState(new Set),[Pe,ue]=v.useState(!1),Z=v.useCallback(j=>{const re=new Date().toLocaleTimeString();E(se=>[...se.slice(-100),`${re}: ${j}`]),console.log(j)},[]),Ve=v.useCallback(()=>{const j=X?d.filter(se=>{const Ce=X.toLowerCase().trim(),be=(se.name||se.foodName||"").toLowerCase(),me=(se.brand||se.brandName||"").toLowerCase(),ie=Array.isArray(se.barcode)?se.barcode.join(" ").toLowerCase():(se.barcode||"").toLowerCase();return W==="all"?be.includes(Ce)||me.includes(Ce)||ie.includes(Ce):W==="brand"?me.includes(Ce):W==="name"?be.includes(Ce):W==="barcode"?ie.includes(Ce):!1}):d,re=new Set(j.map(se=>se.objectID));ye(re)},[X,W,d]),ve=v.useCallback(()=>{ye(new Set)},[]),Ze=v.useCallback(j=>{ye(re=>{const se=new Set(re);return se.has(j)?se.delete(j):se.add(j),se})},[]),je=v.useCallback(async()=>{if(J.size===0){alert("No products selected");return}if(window.confirm(`Are you sure you want to DELETE ${J.size} product(s)? This action CANNOT be undone!`)){ue(!0),Z(` Deleting ${J.size} selected products...`);try{const re=new Map;for(const be of J){const me=d.find(ie=>ie.objectID===be);if(me){const ie=me.sourceIndex;re.has(ie)||re.set(ie,[]),re.get(ie).push(be)}}let se=0,Ce=0;for(const[be,me]of re){Z(`   Deleting ${me.length} products from ${be}...`);const ie=await fetch(`${vg}/deleteFromIndex`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({indexName:be,objectIDs:me})});if(ie.ok){const he=await ie.json();he.success?(se+=me.length,Z(`   Deleted ${me.length} from ${be}`)):(Ce+=me.length,Z(`   Failed to delete from ${be}: ${he.error}`))}else Ce+=me.length,Z(`   Failed to delete from ${be}: HTTP ${ie.status}`)}if(se>0){const be=new Set(J),me=d.filter(ie=>!be.has(ie.objectID));p(me),ye(new Set),Z(` Successfully deleted ${se} products`),Ce>0&&Z(` Failed to delete ${Ce} products`)}else Z(" No products were deleted")}catch(re){Z(` Error deleting products: ${re}`),alert("Error deleting products. Check logs for details.")}finally{ue(!1)}}},[J,d,Z]),de=(j,re)=>{try{if(!j||!re||typeof j!="string"||typeof re!="string")return Math.max((j==null?void 0:j.length)||0,(re==null?void 0:re.length)||0);const se=1e3,Ce=j.length>se?j.substring(0,se):j,be=re.length>se?re.substring(0,se):re,me=[];for(let ie=0;ie<=be.length;ie++)me[ie]=[ie];for(let ie=0;ie<=Ce.length;ie++)me[0][ie]=ie;for(let ie=1;ie<=be.length;ie++)for(let he=1;he<=Ce.length;he++)be.charAt(ie-1)===Ce.charAt(he-1)?me[ie][he]=me[ie-1][he-1]:me[ie][he]=Math.min(me[ie-1][he-1]+1,me[ie][he-1]+1,me[ie-1][he]+1);return me[be.length][Ce.length]}catch{return Math.max((j==null?void 0:j.length)||0,(re==null?void 0:re.length)||0)}},q=j=>{try{return!j||typeof j!="string"?"":j.toLowerCase().trim().replace(/[^\w\s]/g,"").replace(/\s+/g," ")}catch{return""}},le=(j,re)=>{if(!j||!re)return{score:0,reasons:["Invalid product(s)"]};let se=0;const Ce=[];try{const be=typeof j.barcode=="string"?[j.barcode]:Array.isArray(j.barcode)?j.barcode.filter(he=>he&&typeof he=="string"):[],me=typeof re.barcode=="string"?[re.barcode]:Array.isArray(re.barcode)?re.barcode.filter(he=>he&&typeof he=="string"):[],ie=be.find(he=>he&&me.includes(he));if(ie)return se=100,Ce.push(`Exact barcode match: ${ie}`),{score:se,reasons:Ce}}catch{}try{const be=q(j.brandName||j.brand||""),me=q(re.brandName||re.brand||"");if(be&&me)if(be===me)se+=30,Ce.push("Exact brand match");else{const ie=de(be,me),he=Math.max(be.length,me.length);if(he>0){const Se=1-ie/he;if(Se>=.8){const De=Math.round(Se*30);se+=De,Ce.push(`Fuzzy brand match (${Math.round(Se*100)}% similar)`)}}}}catch{}try{const be=q(j.name||j.foodName||""),me=q(re.name||re.foodName||"");if(be&&me)if(be===me)se+=40,Ce.push("Exact name match");else{const ie=de(be,me),he=Math.max(be.length,me.length);if(he>0){const Se=1-ie/he;if(Se>=.7){const De=Math.round(Se*40);se+=De,Ce.push(`Fuzzy name match (${Math.round(Se*100)}% similar)`)}}}}catch{}try{const be=he=>{try{const Se=he.calories||0,De=he.protein||0,Be=he.carbs||0,Et=he.fat||0;if(Se>900||De>100||Be>100||Et>100)return!1;const ut=De*4+Be*4+Et*9,ct=Math.abs(Se-ut),vt=Math.max(ut*.2,1);return ct<=vt}catch{return!1}},ie=((he,Se)=>{try{const De=[{key:"calories",tolerance:.1},{key:"protein",tolerance:.1},{key:"carbs",tolerance:.1},{key:"fat",tolerance:.1}];let Be=0,Et=0;for(const ut of De){const ct=he[ut.key]||0,vt=Se[ut.key]||0;if(ct===0&&vt===0)continue;Et++;const nt=Math.abs(ct-vt),oe=(ct+vt)/2;oe>0&&nt<=oe*ut.tolerance&&Be++}return Et>0?Be/Et:0}catch{return 0}})(j,re);if(ie>=.75){const he=Math.round(ie*30);se+=he,Ce.push(`Macros match (${Math.round(ie*100)}% similar)`)}if(se>=50){const he=be(j),Se=be(re);he&&!Se?Ce.push("p1 has valid macros, p2 has invalid macros"):!he&&Se&&Ce.push("p2 has valid macros, p1 has invalid macros")}}catch{}return{score:se,reasons:Ce}},G=j=>{const re=j.calories||0,se=j.protein||0,Ce=j.carbs||0,be=j.fat||0;if(re>900||se>100||Ce>100||be>100)return!1;const me=se*4+Ce*4+be*9,ie=Math.abs(re-me),he=me*.2;return ie<=he},H=j=>{var re;try{if(!j)return 0;let se=0;try{const be=dm([{id:j.objectID,objectID:j.objectID,name:j.name||j.foodName||"",brandName:j.brandName||j.brand||null,ingredients:j.ingredients||null,barcode:typeof j.barcode=="string"?j.barcode:((re=j.barcode)==null?void 0:re[0])||null,currentImageUrl:j.imageUrl||null,sourceIndex:j.sourceIndex,selected:!1,searchResults:[],selectedImageUrl:null,analysis:null,status:"pending",analysisProgress:0}],0).ukProducts.length>0?30:0;se+=be}catch{}try{G(j)&&(se+=20)}catch{}try{const Ce=[j.ingredients,j.imageUrl,j.calories,j.protein,j.carbs,j.fat,j.fiber,j.sugar,j.sodium,j.servingSize],be=Ce.filter(me=>me!=null&&me!=="").length;se+=be/Ce.length*20}catch{}try{j.barcode&&(Array.isArray(j.barcode),j.barcode.length>0)&&(se+=10)}catch{}try{j.imageUrl&&typeof j.imageUrl=="string"&&j.imageUrl.trim().length>0&&(se+=10)}catch{}try{se+={verified_foods:10,uk_foods_cleaned:9,tesco_products:8,manual_foods:7,ai_enhanced:6,foods:5,user_added:4,ai_manually_added:3,fast_foods_database:2,generic_database:1}[j.sourceIndex]||0}catch{}return Math.round(se)}catch{return 0}},ce=v.useCallback(async()=>{if(M&&!O){Z(" No index selected");return}if(!M&&t.size===0){Z(" No indices selected");return}i(!0),k(0),p([]),b([]),Z(" Starting data pull (one index at a time)..."),Z(P?" TEST MODE ENABLED: Limited to 1000 products per index":" FULL SCAN MODE: Pulling ALL products from selected indices");const j=M?[O]:Array.from(t),re=[],se={};try{for(let me=0;me<j.length;me++){const ie=j[me];Z(` Pulling ${ie}...`);let he=0,Se=!0,De=[],Be=0;const Et=2e3;let ut=0;for(;Se&&ut<Et;){ut++,ut>1&&ut%5===0&&Z(`   ${ie}: ${De.length.toLocaleString()} products pulled, fetching more...`);const ct=await fetch(`${vg}/browseAllIndices`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({indices:[ie],offset:he,pageSize:5e3,limit:P?1e3:void 0})});if(!ct.ok){Z(` ${ie}: HTTP ${ct.status}`),se[ie]={count:Be,error:`HTTP ${ct.status}`};break}const vt=await ct.json();if(vt.success&&vt.products){const nt=vt.products||[],oe=vt.pagination||{};if(console.log(`[${ie}] Page ${ut}: Got ${nt.length} products, hasMore=${oe.hasMore}, total=${oe.total}`),nt.length===0){Z(`   ${ie}: Reached end of index (0 products returned)`),Se=!1;break}nt.length<5e3&&(Z(`   ${ie}: Last page (${nt.length} products)`),Se=!1),De.push(...nt),Be=(oe==null?void 0:oe.total)||De.length;const kt=Math.floor((me+De.length/Math.max(Be,1))/j.length*100);k(kt);const pr=Be>0?Math.round(De.length/Be*100):0;Z(`   Page ${ut}: ${De.length.toLocaleString()} / ${Be.toLocaleString()} (${pr}%) - hasMore=${oe.hasMore}`),oe.hasMore?(Se=!0,he+=5e3):(Z(`   ${ie}: Backend says no more data`),Se=!1),Be>0&&De.length>=Be&&(Z(`   ${ie}: Reached total count (${De.length} >= ${Be})`),Se=!1)}else{Z(` ${ie}: ${vt.error||"Failed"}`),se[ie]={count:Be,error:vt.error||"Failed"};break}}ut>=Et&&Z(` ${ie}: Hit safety limit (${Et} iterations), stopping pagination`),De.length>0&&(re.push(...De),se[ie]={count:De.length},Z(` ${ie}: ${De.length.toLocaleString()} products`)),k(Math.floor((me+1)/j.length*100))}Z(` Total: ${re.length.toLocaleString()} products`);const be=re.length*2/1e3;if(re.length>5e4){const me=` LARGE DATASET: ${re.length.toLocaleString()} products (~${Math.round(be)}MB). Consider using single-index mode or test mode to avoid memory issues.`;Z(me),C(me)}else C(null);L(se),p(re),m(me=>({...me,totalScanned:re.length})),Z(" Data pull complete! Ready to scan for duplicates.")}catch(Ce){const be=Ce instanceof Error?Ce.message:String(Ce);Z(` Error: ${be}`)}finally{i(!1)}},[t,P,M,O,Z]),te=v.useCallback(async()=>{if(d.length===0){Z(" No data to scan. Pull data first.");return}o(!0),k(0),Z(" Scanning for duplicates..."),Z(` Analyzing ${d.length.toLocaleString()} products`);try{k(10);const j=M?d:(()=>{Z(" Filtering out non-UK products (US spelling, foreign brands, foreign characters)...");const ct=dm(d.map(nt=>{var oe;return{id:nt.objectID,objectID:nt.objectID,name:nt.name||nt.foodName||"",brandName:nt.brandName||nt.brand||null,ingredients:nt.ingredients||null,barcode:typeof nt.barcode=="string"?nt.barcode:((oe=nt.barcode)==null?void 0:oe[0])||null,currentImageUrl:nt.imageUrl||null,sourceIndex:nt.sourceIndex,selected:!1,searchResults:[],selectedImageUrl:null,analysis:null,status:"pending",analysisProgress:0}}),40),vt=d.filter(nt=>ct.ukProducts.some(oe=>oe.objectID===nt.objectID));return Z(` Kept ${vt.length} UK products, filtered ${d.length-vt.length} foreign products`),vt})();k(70),Z(" OPTIMIZED duplicate detection (hash-based bucketing)..."),Z("   Building barcode and name indices...");const re=new Set,se=[],Ce=Date.now(),be=1e4,me=[];for(let ct=0;ct<j.length;ct+=be)me.push(j.slice(ct,ct+be));Z(`   Processing ${j.length.toLocaleString()} products in ${me.length} chunks of ${be.toLocaleString()}`);const ie=new Map,he=new Map;for(let ct=0;ct<me.length;ct++){const vt=me[ct];ct>0&&ct%5===0&&(Z(`   Indexing chunk ${ct+1}/${me.length}...`),await new Promise(nt=>setTimeout(nt,0)));for(const nt of vt){const oe=typeof nt.barcode=="string"?[nt.barcode]:Array.isArray(nt.barcode)?nt.barcode:[];for(const pr of oe)if(pr&&typeof pr=="string"){const Os=pr.trim();ie.has(Os)||ie.set(Os,[]),ie.get(Os).push(nt)}const kt=q(nt.name||nt.foodName||"");if(kt){const pr=kt.substring(0,15);he.has(pr)||he.set(pr,[]),he.get(pr).push(nt)}}}Z(`   Barcode index: ${ie.size.toLocaleString()} unique codes`),Z(`   Name index: ${he.size.toLocaleString()} buckets`),Z("   Finding duplicates (compares only similar products)..."),k(75);const Se=new Set;let De=0;const Be=ie.size+he.size;for(const[ct,vt]of ie){if(vt.length>1){const nt=vt.filter(oe=>oe&&oe.objectID&&!re.has(oe.objectID));if(nt.length>1){for(const kt of nt)re.add(kt.objectID);const oe=nt.map(kt=>({product:kt,score:H(kt)}));oe.sort((kt,pr)=>pr.score-kt.score),se.push({key:`barcode-${ct}`,products:nt,bestProduct:oe[0].product,allBarcodes:[ct],score:oe[0].score})}}if(De++,De%500===0){const nt=75+Math.round(De/Be*20);k(nt);const oe=(Date.now()-Ce)/1e3,kt=Math.round(De/oe);Z(`   ${De.toLocaleString()} / ${Be.toLocaleString()} buckets (${kt}/sec, ${se.length} groups)`),await new Promise(pr=>setTimeout(pr,0))}}for(const[ct,vt]of he){if(vt.length>1)for(let nt=0;nt<vt.length;nt++){const oe=vt[nt];if(!oe||!oe.objectID||re.has(oe.objectID))continue;const kt=[oe],pr=[],Os=typeof oe.barcode=="string"?[oe.barcode]:Array.isArray(oe.barcode)?oe.barcode:[];pr.push(...Os.filter(Wr=>Wr&&typeof Wr=="string").map(Wr=>Wr.trim()));for(let Wr=nt+1;Wr<vt.length;Wr++){const Pr=vt[Wr];if(!Pr||!Pr.objectID||re.has(Pr.objectID))continue;const fo=[oe.objectID,Pr.objectID].sort().join("|");if(Se.has(fo))continue;Se.add(fo),le(oe,Pr).score>=80&&(kt.push(Pr),re.add(Pr.objectID),(typeof Pr.barcode=="string"?[Pr.barcode]:Array.isArray(Pr.barcode)?Pr.barcode:[]).filter(Qn=>Qn&&typeof Qn=="string").map(Qn=>Qn.trim()).forEach(Qn=>{pr.includes(Qn)||pr.push(Qn)}))}if(kt.length>1){re.add(oe.objectID);const Wr=kt.map(Pr=>({product:Pr,score:H(Pr)}));Wr.sort((Pr,fo)=>fo.score-Pr.score),se.push({key:`name-${ct}-${nt}`,products:kt,bestProduct:Wr[0].product,allBarcodes:[...new Set(pr)],score:Wr[0].score})}}if(De++,De%500===0){const nt=75+Math.round(De/Be*20);k(nt);const oe=(Date.now()-Ce)/1e3,kt=Math.round(De/oe);Z(`   ${De.toLocaleString()} / ${Be.toLocaleString()} buckets (${kt}/sec, ${se.length} groups)`),await new Promise(pr=>setTimeout(pr,0))}}const Et=((Date.now()-Ce)/1e3).toFixed(1);Z(` OPTIMIZED scan: ${Et}s (vs. 16+ hours with old O(n) algorithm!)`),se.sort((ct,vt)=>vt.products.length-ct.products.length),Z(` Found ${se.length} duplicate groups`);const ut=se.reduce((ct,vt)=>ct+vt.products.length,0);Z(` ${ut} products will be merged into ${se.length} master products`),b(se),m({totalScanned:d.length,duplicateGroups:se.length,productsToMerge:ut,filteredForeign:M?0:d.length-j.length,finalMasterCount:j.length-ut+se.length,processing:!1}),k(100),Z(" Scan complete!")}catch(j){Z(` Error during scan: ${j}`)}finally{o(!1)}},[d,M,Z]),ee=v.useCallback(async()=>{if(!M||!O){Z(" This function only works in single-index mode");return}if(w.length===0){Z(" No duplicates to merge. Scan first.");return}u(!0),k(0),Z(" Merging all duplicates and updating database...");try{const j=[],re=new Set,se=[];Z(` Processing ${w.length} duplicate groups...`);for(let ie=0;ie<w.length;ie++){const he=w[ie],Se=he.bestProduct;he.products.forEach(Be=>{re.add(Be.objectID),Be.objectID!==Se.objectID&&se.push(Be.objectID)});const De={...Se,objectID:Se.objectID,barcodes:he.allBarcodes,barcode:he.allBarcodes[0],mergedFrom:he.products.filter(Be=>Be.objectID!==Se.objectID).map(Be=>({objectID:Be.objectID,sourceIndex:Be.sourceIndex})),isMerged:!0,mergedAt:new Date().toISOString(),qualityScore:he.score};j.push(De),k(Math.round(ie/w.length*30))}Z(` Created ${j.length} merged products`),Z(` Marking ${se.length} duplicates for deletion`),Z(" Adding non-duplicate products...");let Ce=0;for(const ie of d)re.has(ie.objectID)||(j.push({...ie,objectID:ie.objectID,barcodes:ie.barcode?Array.isArray(ie.barcode)?ie.barcode:[ie.barcode]:[],barcode:Array.isArray(ie.barcode)?ie.barcode[0]:ie.barcode,isMerged:!1}),Ce++);if(Z(` Added ${Ce} non-duplicate products`),k(50),Z(` Updating ${O} index...`),se.length>0){const he=Math.ceil(se.length/100);for(let Se=0;Se<he;Se++){const De=Se*100,Be=Math.min((Se+1)*100,se.length),Et=se.slice(De,Be);(await fetch(`${vg}/deleteFromIndex`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({indexName:O,objectIDs:Et})})).ok?Z(`   Deleted batch ${Se+1}/${he}`):Z(` Failed to delete batch ${Se+1}/${he}`),k(50+Math.round(Se/he*20))}}const be=100,me=Math.ceil(j.length/be);for(let ie=0;ie<me;ie++){const he=ie*be,Se=Math.min((ie+1)*be,j.length),De=j.slice(he,Se);(await fetch(`${vg}/updateAlgoliaIndex`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({indexName:O,products:De})})).ok?Z(`   Uploaded batch ${ie+1}/${me}`):Z(` Failed to upload batch ${ie+1}/${me}`),k(70+Math.round(ie/me*30))}k(100),Z(` Successfully merged duplicates and updated ${O}!`),Z(` Final count: ${j.length.toLocaleString()} products (removed ${se.length} duplicates)`),b([])}catch(j){Z(` Error merging duplicates: ${j}`)}finally{u(!1)}},[w,d,M,O,Z]),K=v.useCallback(async()=>{if(d.length===0){Z(" No products to build from. Pull data first.");return}l(!0),k(0),Z(" Building master database...");try{const j=[],re=new Set;Z(` Merging ${w.length} duplicate groups...`);for(let ie=0;ie<w.length;ie++){const he=w[ie],Se=he.bestProduct;he.products.forEach(Be=>re.add(Be.objectID));const De={...Se,objectID:Se.objectID,barcodes:he.allBarcodes,barcode:he.allBarcodes[0],mergedFrom:he.products.map(Be=>({objectID:Be.objectID,sourceIndex:Be.sourceIndex})),isMerged:!0,mergedAt:new Date().toISOString(),qualityScore:he.score};j.push(De),k(Math.round(ie/w.length*50))}Z(` Created ${j.length} merged products from duplicate groups`),Z(" Adding non-duplicate products...");const se=d.filter(ie=>{var Se;return dm([{id:ie.objectID,objectID:ie.objectID,name:ie.name||ie.foodName||"",brandName:ie.brandName||ie.brand||null,ingredients:ie.ingredients||null,barcode:typeof ie.barcode=="string"?ie.barcode:((Se=ie.barcode)==null?void 0:Se[0])||null,currentImageUrl:ie.imageUrl||null,sourceIndex:ie.sourceIndex,selected:!1,searchResults:[],selectedImageUrl:null,analysis:null,status:"pending",analysisProgress:0}],40).ukProducts.length>0});let Ce=0;for(let ie=0;ie<se.length;ie++){const he=se[ie];re.has(he.objectID)||(j.push({...he,objectID:he.objectID,barcodes:he.barcode?Array.isArray(he.barcode)?he.barcode:[he.barcode]:[],barcode:Array.isArray(he.barcode)?he.barcode[0]:he.barcode,isMerged:!1}),Ce++,Ce%5e3===0&&k(50+Math.round(ie/se.length*30)))}Z(` Added ${Ce} non-duplicate products`),Z(" Uploading to Firestore...");const be=100,me=Math.ceil(j.length/be);for(let ie=0;ie<me;ie++){const he=ie*be,Se=Math.min((ie+1)*be,j.length),De=j.slice(he,Se);(await fetch(`${vg}/uploadMasterDatabase`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({products:De})})).ok?Z(`   Uploaded batch ${ie+1}/${me}`):Z(` Failed to upload batch ${ie+1}/${me}`),k(Math.round((ie+1)/me*100))}k(100),Z(" Master database built and uploaded to Firestore!"),Z(` Total products in master database: ${j.length.toLocaleString()}`)}catch(j){Z(` Error building master database: ${j}`)}finally{l(!1)}},[w,d,Z]),U=Ne.useMemo(()=>{if(!X.trim())return d;const j=X.toLowerCase().trim();return d.filter(re=>{const se=(re.name||re.foodName||"").toLowerCase(),Ce=(re.brand||re.brandName||"").toLowerCase(),be=Array.isArray(re.barcode)?re.barcode.join(" ").toLowerCase():(re.barcode||"").toLowerCase();switch(W){case"brand":return Ce.includes(j);case"name":return se.includes(j);case"barcode":return be.includes(j);case"all":default:return se.includes(j)||Ce.includes(j)||be.includes(j)}})},[d,X,W]);return h.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[h.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Master Database Builder"}),h.jsx("p",{className:"text-sm text-gray-500",children:M?"Single-Index Mode: Pull  Scan  Merge duplicates within one index":"Multi-Index Mode: Pull  Scan  Build master database from multiple indices"})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-purple-50 text-purple-700 rounded-lg text-sm cursor-pointer hover:bg-purple-100 border border-purple-200",children:[h.jsx("input",{type:"checkbox",checked:M,onChange:()=>{T(!M),p([]),b([]),E([])},className:"w-4 h-4 text-purple-600 rounded"}),h.jsx("span",{className:"font-medium",children:"Single-Index Mode"})]}),h.jsxs("label",{className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm cursor-pointer border-2 transition-all ${P?"bg-yellow-50 text-yellow-800 border-yellow-300 hover:bg-yellow-100":"bg-green-50 text-green-800 border-green-300 hover:bg-green-100"}`,children:[h.jsx("input",{type:"checkbox",checked:P,onChange:()=>A(!P),className:"w-4 h-4 text-primary-600 rounded"}),h.jsx("span",{className:"font-medium",children:P?" Test Mode (1k/index)":" Full Scan (ALL products)"})]}),d.length>0&&!n&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsxs("select",{value:W,onChange:j=>ne(j.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[h.jsx("option",{value:"all",children:"All Fields"}),h.jsx("option",{value:"brand",children:"Brand"}),h.jsx("option",{value:"name",children:"Name"}),h.jsx("option",{value:"barcode",children:"Barcode"})]}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",value:X,onChange:j=>B(j.target.value),placeholder:`Search by ${W==="all"?"any field":W}...`,className:"px-3 py-2 pr-10 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-80"}),X&&h.jsx("button",{onClick:()=>B(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),h.jsx("div",{className:"px-3 py-2 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium",children:X?h.jsxs(h.Fragment,{children:[U.length.toLocaleString()," / ",d.length.toLocaleString()," products"]}):h.jsxs(h.Fragment,{children:[d.length.toLocaleString()," products loaded"]})}),X&&U.length>0&&h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:J.size===U.length?ve:Ve,className:"px-3 py-2 bg-indigo-50 text-indigo-700 hover:bg-indigo-100 rounded-lg text-sm font-medium border border-indigo-200",children:J.size===U.length?"Deselect All":`Select All (${U.length})`}),J.size>0&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"px-3 py-2 bg-purple-50 text-purple-700 rounded-lg text-sm font-medium border border-purple-200",children:[J.size," selected"]}),h.jsx("button",{onClick:je,disabled:Pe,className:"px-3 py-2 bg-red-600 text-white hover:bg-red-700 disabled:opacity-50 rounded-lg text-sm font-medium flex items-center gap-2",children:Pe?h.jsxs(h.Fragment,{children:[h.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Deleting..."]}):h.jsxs(h.Fragment,{children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Selected"]})})]})]})]}),h.jsxs("button",{onClick:ce,disabled:n||s||a||c||(M?!O:t.size===0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 font-medium",children:[n?h.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),M?"Pull Index":"Pull All Data"]}),h.jsxs("button",{onClick:te,disabled:n||s||a||c||d.length===0,className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 font-medium",children:[s?h.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Scan for Duplicates"]}),M?h.jsxs("button",{onClick:ee,disabled:n||s||a||c||w.length===0,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 font-medium",children:[c?h.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Merge All Duplicates"]}):h.jsxs("button",{onClick:K,disabled:n||s||a||c||w.length===0,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 font-medium",children:[a?h.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),"Build Master Database"]})]})]}),y&&h.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-300 rounded-lg text-sm text-yellow-800",children:[h.jsx("strong",{children:" Memory Warning:"})," ",y]}),(n||s||a||c)&&h.jsx("div",{className:"mt-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-primary-500 transition-all",style:{width:`${I}%`}})}),h.jsxs("span",{className:"text-sm text-gray-500",children:[I,"%"]})]})})]}),h.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[h.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[h.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:M?"Select Index to Clean":"Select Indices to Scan"}),M?h.jsxs("div",{className:"space-y-3",children:[h.jsxs("select",{value:O,onChange:j=>Q(j.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none font-medium",children:[h.jsx("option",{value:"",children:"-- Select an index --"}),gr.map(j=>h.jsx("option",{value:j,children:j.replace(/_/g," ")},j))]}),O&&h.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg text-sm text-purple-700",children:[h.jsx("strong",{children:"Selected:"})," ",O.replace(/_/g," ")]})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"grid grid-cols-3 gap-3 mb-4",children:gr.map(j=>h.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border-2 cursor-pointer transition-all ${t.has(j)?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:[h.jsx("input",{type:"checkbox",checked:t.has(j),onChange:()=>{r(re=>{const se=new Set(re);return se.has(j)?se.delete(j):se.add(j),se})},className:"w-4 h-4 text-primary-600 rounded"}),h.jsx("span",{className:"text-sm font-medium text-gray-700",children:j.replace(/_/g," ")})]},j))}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>r(new Set(gr)),className:"px-3 py-1.5 text-sm text-primary-700 bg-primary-50 hover:bg-primary-100 rounded-lg",children:"Select All"}),h.jsx("button",{onClick:()=>r(new Set),className:"px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded-lg",children:"Clear All"}),h.jsxs("span",{className:"px-3 py-1.5 text-sm text-gray-500",children:[t.size," of ",gr.length," selected"]})]})]})]}),Object.keys(D).length>0&&h.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Index Pull Results"}),h.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(D).map(([j,re])=>h.jsxs("div",{className:`rounded-lg p-3 ${re.error?"bg-red-50":"bg-green-50"}`,children:[h.jsx("div",{className:`text-xl font-bold ${re.error?"text-red-900":"text-green-900"}`,children:re.error?"":re.count.toLocaleString()}),h.jsx("div",{className:`text-xs ${re.error?"text-red-700":"text-green-700"}`,children:j.replace(/_/g," ")}),re.error&&h.jsx("div",{className:"text-xs text-red-600 mt-1 truncate",title:re.error,children:re.error})]},j))})]}),h.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Statistics"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[h.jsx("div",{className:"text-3xl font-bold text-blue-900",children:f.totalScanned.toLocaleString()}),h.jsx("div",{className:"text-sm text-blue-700",children:"Total Scanned"})]}),h.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[h.jsx("div",{className:"text-3xl font-bold text-red-900",children:f.filteredForeign.toLocaleString()}),h.jsx("div",{className:"text-sm text-red-700",children:"Filtered (Foreign)"})]}),h.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[h.jsx("div",{className:"text-3xl font-bold text-yellow-900",children:f.duplicateGroups.toLocaleString()}),h.jsx("div",{className:"text-sm text-yellow-700",children:"Duplicate Groups"})]}),h.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[h.jsx("div",{className:"text-3xl font-bold text-purple-900",children:f.productsToMerge.toLocaleString()}),h.jsx("div",{className:"text-sm text-purple-700",children:"Products to Merge"})]}),h.jsxs("div",{className:"bg-green-50 rounded-lg p-4 col-span-2",children:[h.jsx("div",{className:"text-4xl font-bold text-green-900",children:f.finalMasterCount.toLocaleString()}),h.jsx("div",{className:"text-sm text-green-700",children:"Final Master Database Count"})]})]})]}),X&&U.length>0&&h.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:[h.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Search Results (",U.length.toLocaleString()," products)",h.jsxs("span",{className:"ml-2 text-sm font-normal text-blue-600",children:[W==="all"?"All Fields":W.charAt(0).toUpperCase()+W.slice(1),': "',X,'"']})]}),h.jsxs("div",{className:"space-y-3 max-h-96 overflow-auto",children:[U.slice(0,100).map((j,re)=>h.jsx("div",{className:"border border-gray-200 rounded-lg p-3 hover:bg-gray-50",children:h.jsxs("div",{className:"flex items-start justify-between gap-3",children:[h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:"font-medium text-gray-900 truncate",children:j.name||j.foodName}),h.jsx("div",{className:"text-sm text-gray-600 truncate",children:j.brand||j.brandName||"No brand"}),h.jsxs("div",{className:"flex gap-3 mt-1",children:[h.jsxs("span",{className:"text-xs text-gray-500",children:["Index: ",j.sourceIndex]}),j.calories&&h.jsxs("span",{className:"text-xs text-gray-500",children:[j.calories," kcal"]})]}),j.barcode&&h.jsx("div",{className:"text-xs text-gray-400 mt-1 font-mono",children:Array.isArray(j.barcode)?j.barcode.join(", "):j.barcode})]}),h.jsx("div",{className:"flex-shrink-0",children:j.imageUrl&&h.jsx("img",{src:j.imageUrl,alt:j.name||j.foodName,className:"w-16 h-16 object-cover rounded",onError:se=>{se.target.style.display="none"}})})]})},re)),U.length>100&&h.jsxs("div",{className:"text-center text-sm text-gray-500 py-3",children:["Showing first 100 of ",U.length.toLocaleString()," results"]})]})]}),X&&U.length>0&&h.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:[h.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Search Results (",U.length," products)"]}),h.jsx("div",{className:"space-y-2 max-h-96 overflow-auto",children:U.map(j=>h.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-lg border-2 cursor-pointer transition-all ${J.has(j.objectID)?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[h.jsx("input",{type:"checkbox",checked:J.has(j.objectID),onChange:()=>Ze(j.objectID),className:"w-5 h-5 text-indigo-600 rounded mt-0.5 flex-shrink-0"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:"font-medium text-gray-900 truncate",children:j.name||j.foodName||"Unnamed Product"}),h.jsx("div",{className:"text-sm text-gray-500 truncate",children:j.brandName||j.brand||"No brand"}),h.jsxs("div",{className:"flex gap-2 mt-1 flex-wrap",children:[h.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded text-xs",children:j.sourceIndex}),(typeof j.barcode=="string"?[j.barcode]:j.barcode||[]).filter(re=>re).map((re,se)=>h.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs font-mono",children:re},se))]})]})]},j.objectID))})]}),w.length>0&&h.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[h.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Top Duplicate Groups (",w.length," total)"]}),h.jsx("div",{className:"space-y-4 max-h-96 overflow-auto",children:w.slice(0,20).map((j,re)=>{var se,Ce,be,me,ie;return h.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[h.jsxs("div",{className:"flex items-start justify-between mb-2",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-gray-900",children:((se=j.bestProduct)==null?void 0:se.name)||((Ce=j.bestProduct)==null?void 0:Ce.foodName)}),h.jsx("div",{className:"text-sm text-gray-500",children:((be=j.bestProduct)==null?void 0:be.brandName)||((me=j.bestProduct)==null?void 0:me.brand)})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs font-medium rounded",children:[j.products.length," duplicates"]}),h.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded",children:["Score: ",j.score]})]})]}),h.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[h.jsxs("div",{children:["Best from: ",(ie=j.bestProduct)==null?void 0:ie.sourceIndex]}),h.jsxs("div",{children:["All barcodes: ",j.allBarcodes.join(", ")||"None"]}),h.jsx("div",{className:"flex gap-2 flex-wrap mt-2",children:j.products.map((he,Se)=>h.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded text-xs",children:he.sourceIndex},Se))})]})]},re)})})]})]}),h.jsxs("div",{className:"w-96 border-l border-gray-200 bg-gray-900 flex flex-col",children:[h.jsx("div",{className:"px-4 py-2 border-b border-gray-700 text-gray-400 text-xs font-medium uppercase",children:"Processing Log"}),h.jsx("div",{className:"flex-1 overflow-auto p-3 font-mono text-xs text-gray-300 space-y-1",children:x.length===0?h.jsx("div",{className:"text-gray-500",children:'No activity yet. Click "Scan & Detect Duplicates" to start.'}):x.map((j,re)=>h.jsx("div",{className:"break-all",children:j},re))})]})]})]})};function l5(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=l5(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function er(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=l5(e))&&(n&&(n+=" "),n+=t);return n}var dfe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function TI(e){if(typeof e!="string")return!1;var t=dfe;return t.includes(e)}var hfe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],pfe=new Set(hfe);function c5(e){return typeof e!="string"?!1:pfe.has(e)}function u5(e){return typeof e=="string"&&e.startsWith("data-")}function ss(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(c5(r)||u5(r))&&(t[r]=e[r]);return t}function Yd(e){if(e==null)return null;if(v.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return ss(t)}return typeof e=="object"&&!Array.isArray(e)?ss(e):null}function _i(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(c5(r)||u5(r)||TI(r))&&(t[r]=e[r]);return t}function ffe(e){return e==null?null:v.isValidElement(e)?_i(e.props):typeof e=="object"&&!Array.isArray(e)?_i(e):null}var gfe=["children","width","height","viewBox","className","style","title","desc"];function kA(){return kA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kA.apply(null,arguments)}function mfe(e,t){if(e==null)return{};var r,n,i=vfe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function vfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var AI=v.forwardRef((e,t)=>{var{children:r,width:n,height:i,viewBox:s,className:o,style:a,title:l,desc:c}=e,u=mfe(e,gfe),d=s||{width:n,height:i,x:0,y:0},p=er("recharts-surface",o);return v.createElement("svg",kA({},_i(u),{className:p,width:n,height:i,style:a,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height),ref:t}),v.createElement("title",null,l),v.createElement("desc",null,c),r)}),yfe=["children","className"];function IA(){return IA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},IA.apply(null,arguments)}function Cfe(e,t){if(e==null)return{};var r,n,i=wfe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function wfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var an=v.forwardRef((e,t)=>{var{children:r,className:n}=e,i=Cfe(e,yfe),s=er("recharts-layer",n);return v.createElement("g",IA({className:s},_i(i),{ref:t}),r)}),d5=v.createContext(null),bfe=()=>v.useContext(d5);function yr(e){return function(){return e}}const h5=Math.cos,ub=Math.sin,ta=Math.sqrt,db=Math.PI,bx=2*db,NA=Math.PI,MA=2*NA,zu=1e-6,Sfe=MA-zu;function p5(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function xfe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return p5;const r=10**t;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class Efe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?p5:xfe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,s,o){this._append`C${+t},${+r},${+n},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,r,n,i,s){if(t=+t,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=n-t,c=i-r,u=o-t,d=a-r,p=u*u+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>zu)if(!(Math.abs(d*l-c*u)>zu)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let f=n-o,m=i-a,y=l*l+c*c,C=f*f+m*m,w=Math.sqrt(y),b=Math.sqrt(p),x=s*Math.tan((NA-Math.acos((y+p-C)/(2*w*b)))/2),E=x/b,I=x/w;Math.abs(E-1)>zu&&this._append`L${t+E*u},${r+E*d}`,this._append`A${s},${s},0,0,${+(d*f>u*m)},${this._x1=t+I*l},${this._y1=r+I*c}`}}arc(t,r,n,i,s,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(i),l=n*Math.sin(i),c=t+a,u=r+l,d=1^o,p=o?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>zu||Math.abs(this._y1-u)>zu)&&this._append`L${c},${u}`,n&&(p<0&&(p=p%MA+MA),p>Sfe?this._append`A${n},${n},0,1,${d},${t-a},${r-l}A${n},${n},0,1,${d},${this._x1=c},${this._y1=u}`:p>zu&&this._append`A${n},${n},0,${+(p>=NA)},${d},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function _I(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Efe(t)}function DI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function f5(e){this._context=e}f5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Sx(e){return new f5(e)}function g5(e){return e[0]}function m5(e){return e[1]}function v5(e,t){var r=yr(!0),n=null,i=Sx,s=null,o=_I(a);e=typeof e=="function"?e:e===void 0?g5:yr(e),t=typeof t=="function"?t:t===void 0?m5:yr(t);function a(l){var c,u=(l=DI(l)).length,d,p=!1,f;for(n==null&&(s=i(f=o())),c=0;c<=u;++c)!(c<u&&r(d=l[c],c,l))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+e(d,c,l),+t(d,c,l));if(f)return s=null,f+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:yr(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:yr(+l),a):t},a.defined=function(l){return arguments.length?(r=typeof l=="function"?l:yr(!!l),a):r},a.curve=function(l){return arguments.length?(i=l,n!=null&&(s=i(n)),a):i},a.context=function(l){return arguments.length?(l==null?n=s=null:s=i(n=l),a):n},a}function DC(e,t,r){var n=null,i=yr(!0),s=null,o=Sx,a=null,l=_I(c);e=typeof e=="function"?e:e===void 0?g5:yr(+e),t=typeof t=="function"?t:yr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?m5:yr(+r);function c(d){var p,f,m,y=(d=DI(d)).length,C,w=!1,b,x=new Array(y),E=new Array(y);for(s==null&&(a=o(b=l())),p=0;p<=y;++p){if(!(p<y&&i(C=d[p],p,d))===w)if(w=!w)f=p,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),m=p-1;m>=f;--m)a.point(x[m],E[m]);a.lineEnd(),a.areaEnd()}w&&(x[p]=+e(C,p,d),E[p]=+t(C,p,d),a.point(n?+n(C,p,d):x[p],r?+r(C,p,d):E[p]))}if(b)return a=null,b+""||null}function u(){return v5().defined(i).curve(o).context(s)}return c.x=function(d){return arguments.length?(e=typeof d=="function"?d:yr(+d),n=null,c):e},c.x0=function(d){return arguments.length?(e=typeof d=="function"?d:yr(+d),c):e},c.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:yr(+d),c):n},c.y=function(d){return arguments.length?(t=typeof d=="function"?d:yr(+d),r=null,c):t},c.y0=function(d){return arguments.length?(t=typeof d=="function"?d:yr(+d),c):t},c.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:yr(+d),c):r},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(r)},c.lineX1=function(){return u().x(n).y(t)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:yr(!!d),c):i},c.curve=function(d){return arguments.length?(o=d,s!=null&&(a=o(s)),c):o},c.context=function(d){return arguments.length?(d==null?s=a=null:a=o(s=d),c):s},c}class y5{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Pfe(e){return new y5(e,!0)}function Rfe(e){return new y5(e,!1)}const kI={draw(e,t){const r=ta(t/db);e.moveTo(r,0),e.arc(0,0,r,0,bx)}},Tfe={draw(e,t){const r=ta(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},C5=ta(1/3),Afe=C5*2,_fe={draw(e,t){const r=ta(t/Afe),n=r*C5;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Dfe={draw(e,t){const r=ta(t),n=-r/2;e.rect(n,n,r,r)}},kfe=.8908130915292852,w5=ub(db/10)/ub(7*db/10),Ife=ub(bx/10)*w5,Nfe=-h5(bx/10)*w5,Mfe={draw(e,t){const r=ta(t*kfe),n=Ife*r,i=Nfe*r;e.moveTo(0,-r),e.lineTo(n,i);for(let s=1;s<5;++s){const o=bx*s/5,a=h5(o),l=ub(o);e.lineTo(l*r,-a*r),e.lineTo(a*n-l*i,l*n+a*i)}e.closePath()}},ZP=ta(3),Ofe={draw(e,t){const r=-ta(t/(ZP*3));e.moveTo(0,r*2),e.lineTo(-ZP*r,-r),e.lineTo(ZP*r,-r),e.closePath()}},Ls=-.5,Gs=ta(3)/2,OA=1/ta(12),Ffe=(OA/2+1)*3,Lfe={draw(e,t){const r=ta(t/Ffe),n=r/2,i=r*OA,s=n,o=r*OA+r,a=-s,l=o;e.moveTo(n,i),e.lineTo(s,o),e.lineTo(a,l),e.lineTo(Ls*n-Gs*i,Gs*n+Ls*i),e.lineTo(Ls*s-Gs*o,Gs*s+Ls*o),e.lineTo(Ls*a-Gs*l,Gs*a+Ls*l),e.lineTo(Ls*n+Gs*i,Ls*i-Gs*n),e.lineTo(Ls*s+Gs*o,Ls*o-Gs*s),e.lineTo(Ls*a+Gs*l,Ls*l-Gs*a),e.closePath()}};function Gfe(e,t){let r=null,n=_I(i);e=typeof e=="function"?e:yr(e||kI),t=typeof t=="function"?t:yr(t===void 0?64:+t);function i(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:yr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:yr(+s),i):t},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function hb(){}function pb(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function b5(e){this._context=e}b5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:pb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:pb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jfe(e){return new b5(e)}function S5(e){this._context=e}S5.prototype={areaStart:hb,areaEnd:hb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:pb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Bfe(e){return new S5(e)}function x5(e){this._context=e}x5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:pb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Vfe(e){return new x5(e)}function E5(e){this._context=e}E5.prototype={areaStart:hb,areaEnd:hb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Hfe(e){return new E5(e)}function a2(e){return e<0?-1:1}function l2(e,t,r){var n=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(n||i<0&&-0),o=(r-e._y1)/(i||n<0&&-0),a=(s*i+o*n)/(n+i);return(a2(s)+a2(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function c2(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function JP(e,t,r){var n=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-n)/3;e._context.bezierCurveTo(n+a,i+a*t,s-a,o-a*r,s,o)}function fb(e){this._context=e}fb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:JP(this,this._t0,c2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,JP(this,c2(this,r=l2(this,e,t)),r);break;default:JP(this,this._t0,r=l2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function P5(e){this._context=new R5(e)}(P5.prototype=Object.create(fb.prototype)).point=function(e,t){fb.prototype.point.call(this,t,e)};function R5(e){this._context=e}R5.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,s){this._context.bezierCurveTo(t,e,n,r,s,i)}};function zfe(e){return new fb(e)}function $fe(e){return new P5(e)}function T5(e){this._context=e}T5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=u2(e),i=u2(t),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function u2(e){var t,r=e.length-1,n,i=new Array(r),s=new Array(r),o=new Array(r);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,s[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/s[t-1],s[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/s[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Ufe(e){return new T5(e)}function xx(e,t){this._context=e,this._t=t}xx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Wfe(e){return new xx(e,.5)}function Kfe(e){return new xx(e,0)}function qfe(e){return new xx(e,1)}function Qd(e,t){if((o=e.length)>1)for(var r=1,n,i,s=e[t[0]],o,a=s.length;r<o;++r)for(i=s,s=e[t[r]],n=0;n<a;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function FA(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Yfe(e,t){return e[t]}function Qfe(e){const t=[];return t.key=e,t}function Xfe(){var e=yr([]),t=FA,r=Qd,n=Yfe;function i(s){var o=Array.from(e.apply(this,arguments),Qfe),a,l=o.length,c=-1,u;for(const d of s)for(a=0,++c;a<l;++a)(o[a][c]=[0,+n(d,o[a].key,c,s)]).data=d;for(a=0,u=DI(t(o));a<l;++a)o[u[a]].index=a;return r(o,u),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:yr(Array.from(s)),i):e},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:yr(+s),i):n},i.order=function(s){return arguments.length?(t=s==null?FA:typeof s=="function"?s:yr(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(r=s??Qd,i):r},i}function Zfe(e,t){if((n=e.length)>0){for(var r,n,i=0,s=e[0].length,o;i<s;++i){for(o=r=0;r<n;++r)o+=e[r][i][1]||0;if(o)for(r=0;r<n;++r)e[r][i][1]/=o}Qd(e,t)}}function Jfe(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,s=n.length;r<s;++r){for(var o=0,a=0;o<i;++o)a+=e[o][r][1]||0;n[r][1]+=n[r][0]=-a/2}Qd(e,t)}}function ege(e,t){if(!(!((o=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,s,o;n<s;++n){for(var a=0,l=0,c=0;a<o;++a){for(var u=e[t[a]],d=u[n][1]||0,p=u[n-1][1]||0,f=(d-p)/2,m=0;m<a;++m){var y=e[t[m]],C=y[n][1]||0,w=y[n-1][1]||0;f+=C-w}l+=d,c+=f*d}i[n-1][1]+=i[n-1][0]=r,l&&(r-=c/l)}i[n-1][1]+=i[n-1][0]=r,Qd(e,t)}}var Ex={},A5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(A5);var II={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(II);var Px={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Px);var Rx={},_5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(_5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_5,r=Px;function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const s=[],o=i.length;if(o===0)return s;let a=0,l="",c="",u=!1;for(i.charCodeAt(0)===46&&(s.push(""),a++);a<o;){const d=i[a];c?d==="\\"&&a+1<o?(a++,l+=i[a]):d===c?c="":l+=d:u?d==='"'||d==="'"?c=d:d==="]"?(u=!1,s.push(l),l=""):l+=d:d==="["?(u=!0,l&&(s.push(l),l="")):d==="."?l&&(s.push(l),l=""):l+=d,a++}return l&&s.push(l),s}e.toPath=n})(Rx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A5,r=II,n=Px,i=Rx;function s(a,l,c){if(a==null)return c;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?r.isDeepKey(l)?s(a,i.toPath(l),c):c:u}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const u=a[l];return u===void 0?c:u}default:{if(Array.isArray(l))return o(a,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?c:u}}}function o(a,l,c){if(l.length===0)return c;let u=a;for(let d=0;d<l.length;d++){if(u==null||t.isUnsafeProperty(l[d]))return c;u=u[l[d]]}return u===void 0?c:u}e.get=s})(Ex);var tge=Ex.get;const Xd=lo(tge);var rge=4;function Mc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rge,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function Yr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((i,s,o)=>{var a=r[o-1];return typeof a=="string"?i+a+s:a!==void 0?i+Mc(a)+s:i+s},"")}var In=e=>e===0?0:e>0?1:-1,Zo=e=>typeof e=="number"&&e!=+e,Zd=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Xe=e=>(typeof e=="number"||e instanceof Number)&&!Zo(e),ja=e=>Xe(e)||typeof e=="string",nge=0,_v=e=>{var t=++nge;return"".concat(e||"").concat(t)},ai=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Xe(t)&&typeof t!="string")return n;var s;if(Zd(t)){if(r==null)return n;var o=t.indexOf("%");s=r*parseFloat(t.slice(0,o))/100}else s=+t;return Zo(s)&&(s=n),i&&r!=null&&s>r&&(s=r),s},D5=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function Ar(e,t,r){return Xe(e)&&Xe(t)?Mc(e+r*(t-e)):t}function k5(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Xd(n,t))===r)}var Jr=e=>e===null||typeof e>"u",Ey=e=>Jr(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Zi(e){return e!=null}function wh(){}var ige=["type","size","sizeType"];function LA(){return LA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LA.apply(null,arguments)}function d2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function h2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d2(Object(r),!0).forEach(function(n){sge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sge(e,t,r){return(t=oge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oge(e){var t=age(e,"string");return typeof t=="symbol"?t:t+""}function age(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lge(e,t){if(e==null)return{};var r,n,i=cge(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function cge(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var I5={symbolCircle:kI,symbolCross:Tfe,symbolDiamond:_fe,symbolSquare:Dfe,symbolStar:Mfe,symbolTriangle:Ofe,symbolWye:Lfe},uge=Math.PI/180,dge=e=>{var t="symbol".concat(Ey(e));return I5[t]||kI},hge=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*uge;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},pge=(e,t)=>{I5["symbol".concat(Ey(e))]=t},NI=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=lge(e,ige),s=h2(h2({},i),{},{type:t,size:r,sizeType:n}),o="circle";typeof t=="string"&&(o=t);var a=()=>{var p=dge(o),f=Gfe().type(p).size(hge(r,n,o)),m=f();if(m!==null)return m},{className:l,cx:c,cy:u}=s,d=_i(s);return Xe(c)&&Xe(u)&&Xe(r)?v.createElement("path",LA({},d,{className:er("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:a()})):null};NI.registerSymbol=pge;var N5=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,MI=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(v.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{TI(i)&&(n[i]=s=>r[i](r,s))}),n},fge=(e,t,r)=>n=>(e(t,r,n),null),Py=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(i=>{var s=e[i];TI(i)&&typeof s=="function"&&(n||(n={}),n[i]=fge(s,t,r))}),n};function p2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function gge(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p2(Object(r),!0).forEach(function(n){mge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mge(e,t,r){return(t=vge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vge(e){var t=yge(e,"string");return typeof t=="symbol"?t:t+""}function yge(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gn(e,t){var r=gge({},e),n=t,i=Object.keys(t),s=i.reduce((o,a)=>(o[a]===void 0&&n[a]!==void 0&&(o[a]=n[a]),o),r);return s}function gb(){return gb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gb.apply(null,arguments)}function f2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Cge(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f2(Object(r),!0).forEach(function(n){wge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wge(e,t,r){return(t=bge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bge(e){var t=Sge(e,"string");return typeof t=="symbol"?t:t+""}function Sge(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hs=32,xge={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function Ege(e){var{data:t,iconType:r,inactiveColor:n}=e,i=Hs/2,s=Hs/6,o=Hs/3,a=t.inactive?n:t.color,l=r??t.type;if(l==="none")return null;if(l==="plainline"){var c;return v.createElement("line",{strokeWidth:4,fill:"none",stroke:a,strokeDasharray:(c=t.payload)===null||c===void 0?void 0:c.strokeDasharray,x1:0,y1:i,x2:Hs,y2:i,className:"recharts-legend-icon"})}if(l==="line")return v.createElement("path",{strokeWidth:4,fill:"none",stroke:a,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(Hs,"M").concat(2*o,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(l==="rect")return v.createElement("path",{stroke:"none",fill:a,d:"M0,".concat(Hs/8,"h").concat(Hs,"v").concat(Hs*3/4,"h").concat(-Hs,"z"),className:"recharts-legend-icon"});if(v.isValidElement(t.legendIcon)){var u=Cge({},t);return delete u.legendIcon,v.cloneElement(t.legendIcon,u)}return v.createElement(NI,{fill:a,cx:i,cy:i,size:Hs,sizeType:"diameter",type:l})}function Pge(e){var{payload:t,iconSize:r,layout:n,formatter:i,inactiveColor:s,iconType:o}=e,a={x:0,y:0,width:Hs,height:Hs},l={display:n==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,d)=>{var p=u.formatter||i,f=er({"recharts-legend-item":!0,["legend-item-".concat(d)]:!0,inactive:u.inactive});if(u.type==="none")return null;var m=u.inactive?s:u.color,y=p?p(u.value,u,d):u.value;return v.createElement("li",gb({className:f,style:l,key:"legend-item-".concat(d)},Py(e,u,d)),v.createElement(AI,{width:r,height:r,viewBox:a,style:c,"aria-label":"".concat(y," legend icon")},v.createElement(Ege,{data:u,iconType:o,inactiveColor:s})),v.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},y))})}var Rge=e=>{var t=gn(e,xge),{payload:r,layout:n,align:i}=t;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?i:"left"};return v.createElement("ul",{className:"recharts-default-legend",style:s},v.createElement(Pge,gb({},t,{payload:r})))},M5={},O5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const i=new Map;for(let s=0;s<r.length;s++){const o=r[s],a=n(o,s,r);i.has(a)||i.set(a,o)}return Array.from(i.values())}e.uniqBy=t})(O5);var F5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return function(...i){return r.apply(this,i.slice(0,n))}}e.ary=t})(F5);var OI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(OI);var L5={},Tx={},G5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(G5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G5;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Tx);var j5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(j5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tx,r=j5;function n(i){return r.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=n})(L5);var B5={},V5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ex;function r(n){return function(i){return t.get(i,n)}}e.property=r})(V5);var H5={},FI={},z5={},LI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(LI);var GI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(GI);var jI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.isEqualsSameValueZero=t})(jI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LI,r=GI,n=jI;function i(u,d,p){return typeof p!="function"?i(u,d,()=>{}):s(u,d,function f(m,y,C,w,b,x){const E=p(m,y,C,w,b,x);return E!==void 0?!!E:s(m,y,f,x)},new Map)}function s(u,d,p,f){if(d===u)return!0;switch(typeof d){case"object":return o(u,d,p,f);case"function":return Object.keys(d).length>0?s(u,{...d},p,f):n.isEqualsSameValueZero(u,d);default:return t.isObject(u)?typeof d=="string"?d==="":!0:n.isEqualsSameValueZero(u,d)}}function o(u,d,p,f){if(d==null)return!0;if(Array.isArray(d))return l(u,d,p,f);if(d instanceof Map)return a(u,d,p,f);if(d instanceof Set)return c(u,d,p,f);const m=Object.keys(d);if(u==null||r.isPrimitive(u))return m.length===0;if(m.length===0)return!0;if(f!=null&&f.has(d))return f.get(d)===u;f==null||f.set(d,u);try{for(let y=0;y<m.length;y++){const C=m[y];if(!r.isPrimitive(u)&&!(C in u)||d[C]===void 0&&u[C]!==void 0||d[C]===null&&u[C]!==null||!p(u[C],d[C],C,u,d,f))return!1}return!0}finally{f==null||f.delete(d)}}function a(u,d,p,f){if(d.size===0)return!0;if(!(u instanceof Map))return!1;for(const[m,y]of d.entries()){const C=u.get(m);if(p(C,y,m,u,d,f)===!1)return!1}return!0}function l(u,d,p,f){if(d.length===0)return!0;if(!Array.isArray(u))return!1;const m=new Set;for(let y=0;y<d.length;y++){const C=d[y];let w=!1;for(let b=0;b<u.length;b++){if(m.has(b))continue;const x=u[b];let E=!1;if(p(x,C,y,u,d,f)&&(E=!0),E){m.add(b),w=!0;break}}if(!w)return!1}return!0}function c(u,d,p,f){return d.size===0?!0:u instanceof Set?l([...u],[...d],p,f):!1}e.isMatchWith=i,e.isSetMatch=c})(z5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=z5;function r(n,i){return t.isMatchWith(n,i,()=>{})}e.isMatch=r})(FI);var $5={},BI={},U5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(U5);var Ax={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Ax);var VI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",s="[object Arguments]",o="[object Symbol]",a="[object Date]",l="[object Map]",c="[object Set]",u="[object Array]",d="[object Function]",p="[object ArrayBuffer]",f="[object Object]",m="[object Error]",y="[object DataView]",C="[object Uint8Array]",w="[object Uint8ClampedArray]",b="[object Uint16Array]",x="[object Uint32Array]",E="[object BigUint64Array]",I="[object Int8Array]",k="[object Int16Array]",P="[object Int32Array]",A="[object BigInt64Array]",D="[object Float32Array]",L="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=p,e.arrayTag=u,e.bigInt64ArrayTag=A,e.bigUint64ArrayTag=E,e.booleanTag=i,e.dataViewTag=y,e.dateTag=a,e.errorTag=m,e.float32ArrayTag=D,e.float64ArrayTag=L,e.functionTag=d,e.int16ArrayTag=k,e.int32ArrayTag=P,e.int8ArrayTag=I,e.mapTag=l,e.numberTag=n,e.objectTag=f,e.regexpTag=t,e.setTag=c,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=b,e.uint32ArrayTag=x,e.uint8ArrayTag=C,e.uint8ClampedArrayTag=w})(VI);var W5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(W5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U5,r=Ax,n=VI,i=GI,s=W5;function o(u,d){return a(u,void 0,u,new Map,d)}function a(u,d,p,f=new Map,m=void 0){const y=m==null?void 0:m(u,d,p,f);if(y!==void 0)return y;if(i.isPrimitive(u))return u;if(f.has(u))return f.get(u);if(Array.isArray(u)){const C=new Array(u.length);f.set(u,C);for(let w=0;w<u.length;w++)C[w]=a(u[w],w,p,f,m);return Object.hasOwn(u,"index")&&(C.index=u.index),Object.hasOwn(u,"input")&&(C.input=u.input),C}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const C=new RegExp(u.source,u.flags);return C.lastIndex=u.lastIndex,C}if(u instanceof Map){const C=new Map;f.set(u,C);for(const[w,b]of u)C.set(w,a(b,w,p,f,m));return C}if(u instanceof Set){const C=new Set;f.set(u,C);for(const w of u)C.add(a(w,void 0,p,f,m));return C}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(s.isTypedArray(u)){const C=new(Object.getPrototypeOf(u)).constructor(u.length);f.set(u,C);for(let w=0;w<u.length;w++)C[w]=a(u[w],w,p,f,m);return C}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const C=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return f.set(u,C),l(C,u,p,f,m),C}if(typeof File<"u"&&u instanceof File){const C=new File([u],u.name,{type:u.type});return f.set(u,C),l(C,u,p,f,m),C}if(typeof Blob<"u"&&u instanceof Blob){const C=new Blob([u],{type:u.type});return f.set(u,C),l(C,u,p,f,m),C}if(u instanceof Error){const C=new u.constructor;return f.set(u,C),C.message=u.message,C.name=u.name,C.stack=u.stack,C.cause=u.cause,l(C,u,p,f,m),C}if(u instanceof Boolean){const C=new Boolean(u.valueOf());return f.set(u,C),l(C,u,p,f,m),C}if(u instanceof Number){const C=new Number(u.valueOf());return f.set(u,C),l(C,u,p,f,m),C}if(u instanceof String){const C=new String(u.valueOf());return f.set(u,C),l(C,u,p,f,m),C}if(typeof u=="object"&&c(u)){const C=Object.create(Object.getPrototypeOf(u));return f.set(u,C),l(C,u,p,f,m),C}return u}function l(u,d,p=u,f,m){const y=[...Object.keys(d),...t.getSymbols(d)];for(let C=0;C<y.length;C++){const w=y[C],b=Object.getOwnPropertyDescriptor(u,w);(b==null||b.writable)&&(u[w]=a(d[w],w,p,f,m))}}function c(u){switch(r.getTag(u)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=a,e.copyProperties=l})(BI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BI;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})($5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FI,r=$5;function n(i){return i=r.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=n})(H5);var K5={},q5={},Y5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BI,r=Ax,n=VI;function i(s,o){return t.cloneDeepWith(s,(a,l,c,u)=>{const d=o==null?void 0:o(a,l,c,u);if(d!==void 0)return d;if(typeof s=="object"){if(r.getTag(s)===n.objectTag&&typeof s.constructor!="function"){const p={};return u.set(s,p),t.copyProperties(p,s,c,u),p}switch(Object.prototype.toString.call(s)){case n.numberTag:case n.stringTag:case n.booleanTag:{const p=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(p,s),p}case n.argumentsTag:{const p={};return t.copyProperties(p,s),p.length=s.length,p[Symbol.iterator]=s[Symbol.iterator],p}default:return}}})}e.cloneDeepWith=i})(Y5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Y5;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(q5);var Q5={},HI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(HI);var X5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ax;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(X5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=II,r=HI,n=X5,i=Rx;function s(o,a){let l;if(Array.isArray(a)?l=a:typeof a=="string"&&t.isDeepKey(a)&&(o==null?void 0:o[a])==null?l=i.toPath(a):l=[a],l.length===0)return!1;let c=o;for(let u=0;u<l.length;u++){const d=l[u];if((c==null||!Object.hasOwn(c,d))&&!((Array.isArray(c)||n.isArguments(c))&&r.isIndex(d)&&d<c.length))return!1;c=c[d]}return!0}e.has=s})(Q5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FI,r=Px,n=q5,i=Ex,s=Q5;function o(a,l){switch(typeof a){case"object":{Object.is(a==null?void 0:a.valueOf(),-0)&&(a="-0");break}case"number":{a=r.toKey(a);break}}return l=n.cloneDeep(l),function(c){const u=i.get(c,a);return u===void 0?s.has(c,a):l===void 0?u===void 0:t.isMatch(u,l)}}e.matchesProperty=o})(K5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OI,r=V5,n=H5,i=K5;function s(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=s})(B5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O5,r=F5,n=OI,i=L5,s=B5;function o(a,l=n.identity){return i.isArrayLikeObject(a)?t.uniqBy(Array.from(a),r.ary(s.iteratee(l),1)):[]}e.uniqBy=o})(M5);var Tge=M5.uniqBy;const g2=lo(Tge);function Z5(e,t,r){return t===!0?g2(e,r):typeof t=="function"?g2(e,t):e}var zI=v.createContext(null),Age=e=>e,Er=()=>{var e=v.useContext(zI);return e?e.store.dispatch:Age},D0=()=>{},_ge=()=>D0,Dge=(e,t)=>e===t;function it(e){var t=v.useContext(zI),r=v.useMemo(()=>t?n=>{if(n!=null)return e(n)}:D0,[t,e]);return gW.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:_ge,t?t.store.getState:D0,t?t.store.getState:D0,r,Dge)}function kge(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Ige(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Nge(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var m2=e=>Array.isArray(e)?e:[e];function Mge(e){const t=Array.isArray(e[0])?e[0]:e;return Nge(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Oge(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var Fge=class{constructor(e){this.value=e}deref(){return this.value}},Lge=typeof WeakRef<"u"?WeakRef:Fge,Gge=0,v2=1;function kC(){return{s:Gge,v:void 0,o:null,p:null}}function J5(e,t={}){let r=kC();const{resultEqualityCheck:n}=t;let i,s=0;function o(){var d;let a=r;const{length:l}=arguments;for(let p=0,f=l;p<f;p++){const m=arguments[p];if(typeof m=="function"||typeof m=="object"&&m!==null){let y=a.o;y===null&&(a.o=y=new WeakMap);const C=y.get(m);C===void 0?(a=kC(),y.set(m,a)):a=C}else{let y=a.p;y===null&&(a.p=y=new Map);const C=y.get(m);C===void 0?(a=kC(),y.set(m,a)):a=C}}const c=a;let u;if(a.s===v2)u=a.v;else if(u=e.apply(null,arguments),s++,n){const p=((d=i==null?void 0:i.deref)==null?void 0:d.call(i))??i;p!=null&&n(p,u)&&(u=p,s!==0&&s--),i=typeof u=="object"&&u!==null||typeof u=="function"?new Lge(u):u}return c.s=v2,c.v=u,u}return o.clearCache=()=>{r=kC(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function jge(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let s=0,o=0,a,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),kge(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...r,...l},{memoize:d,memoizeOptions:p=[],argsMemoize:f=J5,argsMemoizeOptions:m=[]}=u,y=m2(p),C=m2(m),w=Mge(i),b=d(function(){return s++,c.apply(null,arguments)},...y),x=f(function(){o++;const I=Oge(w,arguments);return a=b.apply(null,I),a},...C);return Object.assign(x,{resultFunc:c,memoizedResultFunc:b,dependencies:w,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:f})};return Object.assign(n,{withTypes:()=>n}),n}var ge=jge(J5),Bge=Object.assign((e,t=ge)=>{Ige(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((o,a,l)=>(o[r[l]]=a,o),{}))},{withTypes:()=>Bge}),e6={},t6={},r6={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,s)=>{if(n!==i){const o=t(n),a=t(i);if(o===a&&o===0){if(n<i)return s==="desc"?1:-1;if(n>i)return s==="desc"?-1:1}return s==="desc"?a-o:o-a}return 0};e.compareValues=r})(r6);var n6={},$I={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})($I);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$I,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||o!=null&&Object.hasOwn(o,s)}e.isKey=i})(n6);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r6,r=n6,n=Rx;function i(s,o,a,l){if(s==null)return[];a=l?void 0:a,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(f=>String(f));const c=(f,m)=>{let y=f;for(let C=0;C<m.length&&y!=null;++C)y=y[m[C]];return y},u=(f,m)=>m==null||f==null?m:typeof f=="object"&&"key"in f?Object.hasOwn(m,f.key)?m[f.key]:c(m,f.path):typeof f=="function"?f(m):Array.isArray(f)?c(m,f):typeof m=="object"?m[f]:m,d=o.map(f=>(Array.isArray(f)&&f.length===1&&(f=f[0]),f==null||typeof f=="function"||Array.isArray(f)||r.isKey(f)?f:{key:f,path:n.toPath(f)}));return s.map(f=>({original:f,criteria:d.map(m=>u(m,f))})).slice().sort((f,m)=>{for(let y=0;y<d.length;y++){const C=t.compareValues(f.criteria[y],m.criteria[y],a[y]);if(C!==0)return C}return 0}).map(f=>f.original)}e.orderBy=i})(t6);var i6={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const i=[],s=Math.floor(n),o=(a,l)=>{for(let c=0;c<a.length;c++){const u=a[c];Array.isArray(u)&&l<s?o(u,l+1):i.push(u)}};return o(r,0),i}e.flatten=t})(i6);var UI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HI,r=Tx,n=LI,i=jI;function s(o,a,l){return n.isObject(l)&&(typeof a=="number"&&r.isArrayLike(l)&&t.isIndex(a)&&a<l.length||typeof a=="string"&&a in l)?i.isEqualsSameValueZero(l[a],o):!1}e.isIterateeCall=s})(UI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=t6,r=i6,n=UI;function i(s,...o){const a=o.length;return a>1&&n.isIterateeCall(s,o[0],o[1])?o=[]:a>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(s,r.flatten(o),["asc"])}e.sortBy=i})(e6);var Vge=e6.sortBy;const _x=lo(Vge);var s6=e=>e.legend.settings,Hge=e=>e.legend.size,zge=e=>e.legend.payload,$ge=ge([zge,s6],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?_x(n,r):n});function Uge(){return it($ge)}var IC=1;function o6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-t.height)>IC||Math.abs(o.left-t.left)>IC||Math.abs(o.top-t.top)>IC||Math.abs(o.width-t.width)>IC)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Vn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Wge=typeof Symbol=="function"&&Symbol.observable||"@@observable",y2=Wge,eR=()=>Math.random().toString(36).substring(7).split("").join("."),Kge={INIT:`@@redux/INIT${eR()}`,REPLACE:`@@redux/REPLACE${eR()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${eR()}`},mb=Kge;function WI(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function a6(e,t,r){if(typeof e!="function")throw new Error(Vn(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Vn(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Vn(1));return r(a6)(e,t)}let n=e,i=t,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach((C,w)=>{o.set(w,C)}))}function u(){if(l)throw new Error(Vn(3));return i}function d(C){if(typeof C!="function")throw new Error(Vn(4));if(l)throw new Error(Vn(5));let w=!0;c();const b=a++;return o.set(b,C),function(){if(w){if(l)throw new Error(Vn(6));w=!1,c(),o.delete(b),s=null}}}function p(C){if(!WI(C))throw new Error(Vn(7));if(typeof C.type>"u")throw new Error(Vn(8));if(typeof C.type!="string")throw new Error(Vn(17));if(l)throw new Error(Vn(9));try{l=!0,i=n(i,C)}finally{l=!1}return(s=o).forEach(b=>{b()}),C}function f(C){if(typeof C!="function")throw new Error(Vn(10));n=C,p({type:mb.REPLACE})}function m(){const C=d;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Vn(11));function b(){const E=w;E.next&&E.next(u())}return b(),{unsubscribe:C(b)}},[y2](){return this}}}return p({type:mb.INIT}),{dispatch:p,subscribe:d,getState:u,replaceReducer:f,[y2]:m}}function qge(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:mb.INIT})>"u")throw new Error(Vn(12));if(typeof r(void 0,{type:mb.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Vn(13))})}function l6(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let i;try{qge(r)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const c={};for(let u=0;u<n.length;u++){const d=n[u],p=r[d],f=o[d],m=p(f,a);if(typeof m>"u")throw a&&a.type,new Error(Vn(14));c[d]=m,l=l||m!==f}return l=l||n.length!==Object.keys(o).length,l?c:o}}function vb(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Yge(...e){return t=>(r,n)=>{const i=t(r,n);let s=()=>{throw new Error(Vn(15))};const o={getState:i.getState,dispatch:(l,...c)=>s(l,...c)},a=e.map(l=>l(o));return s=vb(...a)(i.dispatch),{...i,dispatch:s}}}function c6(e){return WI(e)&&"type"in e&&typeof e.type=="string"}var u6=Symbol.for("immer-nothing"),C2=Symbol.for("immer-draftable"),Di=Symbol.for("immer-state");function Oo(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var xs=Object,cf=xs.getPrototypeOf,yb="constructor",Dx="prototype",GA="configurable",Cb="enumerable",k0="writable",Dv="value",Dl=e=>!!e&&!!e[Di];function Jo(e){var t;return e?d6(e)||Ix(e)||!!e[C2]||!!((t=e[yb])!=null&&t[C2])||Nx(e)||Mx(e):!1}var Qge=xs[Dx][yb].toString(),w2=new WeakMap;function d6(e){if(!e||!KI(e))return!1;const t=cf(e);if(t===null||t===xs[Dx])return!0;const r=xs.hasOwnProperty.call(t,yb)&&t[yb];if(r===Object)return!0;if(!Vh(r))return!1;let n=w2.get(r);return n===void 0&&(n=Function.toString.call(r),w2.set(r,n)),n===Qge}function kx(e,t,r=!0){Ry(e)===0?(r?Reflect.ownKeys(e):xs.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function Ry(e){const t=e[Di];return t?t.type_:Ix(e)?1:Nx(e)?2:Mx(e)?3:0}var b2=(e,t,r=Ry(e))=>r===2?e.has(t):xs[Dx].hasOwnProperty.call(e,t),jA=(e,t,r=Ry(e))=>r===2?e.get(t):e[t],wb=(e,t,r,n=Ry(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function Xge(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Ix=Array.isArray,Nx=e=>e instanceof Map,Mx=e=>e instanceof Set,KI=e=>typeof e=="object",Vh=e=>typeof e=="function",tR=e=>typeof e=="boolean";function Zge(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var rl=e=>e.copy_||e.base_,qI=e=>e.modified_?e.copy_:e.base_;function BA(e,t){if(Nx(e))return new Map(e);if(Mx(e))return new Set(e);if(Ix(e))return Array[Dx].slice.call(e);const r=d6(e);if(t===!0||t==="class_only"&&!r){const n=xs.getOwnPropertyDescriptors(e);delete n[Di];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const o=i[s],a=n[o];a[k0]===!1&&(a[k0]=!0,a[GA]=!0),(a.get||a.set)&&(n[o]={[GA]:!0,[k0]:!0,[Cb]:a[Cb],[Dv]:e[o]})}return xs.create(cf(e),n)}else{const n=cf(e);if(n!==null&&r)return{...e};const i=xs.create(n);return xs.assign(i,e)}}function YI(e,t=!1){return Ox(e)||Dl(e)||!Jo(e)||(Ry(e)>1&&xs.defineProperties(e,{set:NC,add:NC,clear:NC,delete:NC}),xs.freeze(e),t&&kx(e,(r,n)=>{YI(n,!0)},!1)),e}function Jge(){Oo(2)}var NC={[Dv]:Jge};function Ox(e){return e===null||!KI(e)?!0:xs.isFrozen(e)}var bb="MapSet",VA="Patches",S2="ArrayMethods",h6={};function Jd(e){const t=h6[e];return t||Oo(0,e),t}var x2=e=>!!h6[e],kv,p6=()=>kv,eme=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:x2(bb)?Jd(bb):void 0,arrayMethodsPlugin_:x2(S2)?Jd(S2):void 0});function E2(e,t){t&&(e.patchPlugin_=Jd(VA),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function HA(e){zA(e),e.drafts_.forEach(tme),e.drafts_=null}function zA(e){e===kv&&(kv=e.parent_)}var P2=e=>kv=eme(kv,e);function tme(e){const t=e[Di];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function R2(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Di].modified_&&(HA(t),Oo(4)),Jo(e)&&(e=T2(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(r[Di].base_,e,t)}else e=T2(t,r);return rme(t,e,!0),HA(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==u6?e:void 0}function T2(e,t){if(Ox(t))return t;const r=t[Di];if(!r)return Sb(t,e.handledSet_,e);if(!Fx(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);m6(r,e)}return r.copy_}function rme(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&YI(t,r)}function f6(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Fx=(e,t)=>e.scope_===t,nme=[];function g6(e,t,r,n){const i=rl(e),s=e.type_;if(n!==void 0&&jA(i,n,s)===t){wb(i,n,r,s);return}if(!e.draftLocations_){const a=e.draftLocations_=new Map;kx(i,(l,c)=>{if(Dl(c)){const u=a.get(c)||[];u.push(l),a.set(c,u)}})}const o=e.draftLocations_.get(t)??nme;for(const a of o)wb(i,a,r,s)}function ime(e,t,r){e.callbacks_.push(function(i){var a;const s=t;if(!s||!Fx(s,i))return;(a=i.mapSetPlugin_)==null||a.fixSetContents(s);const o=qI(s);g6(e,s.draft_??s,o,r),m6(s,i)})}function m6(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:i}=t;if(i){const s=i.getPath(e);s&&i.generatePatches_(e,s,t)}f6(e)}}function sme(e,t,r){const{scope_:n}=e;if(Dl(r)){const i=r[Di];Fx(i,n)&&i.callbacks_.push(function(){I0(e);const o=qI(i);g6(e,r,o,t)})}else Jo(r)&&e.callbacks_.push(function(){const s=rl(e);e.type_===3?s.has(r)&&Sb(r,n.handledSet_,n):jA(s,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Sb(jA(e.copy_,t,e.type_),n.handledSet_,n)})}function Sb(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Dl(e)||t.has(e)||!Jo(e)||Ox(e)||(t.add(e),kx(e,(n,i)=>{if(Dl(i)){const s=i[Di];if(Fx(s,r)){const o=qI(s);wb(e,n,o,e.type_),f6(s)}}else Jo(i)&&Sb(i,t,r)})),e}function ome(e,t){const r=Ix(e),n={type_:r?1:0,scope_:t?t.scope_:p6(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,s=xb;r&&(i=[n],s=Iv);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return n.draft_=a,n.revoke_=o,[a,n]}var xb={get(e,t){if(t===Di)return e;let r=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof t=="string";if(n&&r!=null&&r.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const i=rl(e);if(!b2(i,t,e.type_))return ame(e,i,t);const s=i[t];if(e.finalized_||!Jo(s)||n&&e.operationMethod&&(r!=null&&r.isMutatingArrayMethod(e.operationMethod))&&Zge(t))return s;if(s===rR(e.base_,t)){I0(e);const o=e.type_===1?+t:t,a=UA(e.scope_,s,e,o);return e.copy_[o]=a}return s},has(e,t){return t in rl(e)},ownKeys(e){return Reflect.ownKeys(rl(e))},set(e,t,r){const n=v6(rl(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=rR(rl(e),t),s=i==null?void 0:i[Di];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(Xge(r,i)&&(r!==void 0||b2(e.base_,t,e.type_)))return!0;I0(e),$A(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),sme(e,t,r)),!0},deleteProperty(e,t){return I0(e),rR(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),$A(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=rl(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[k0]:!0,[GA]:e.type_!==1||t!=="length",[Cb]:n[Cb],[Dv]:r[t]}},defineProperty(){Oo(11)},getPrototypeOf(e){return cf(e.base_)},setPrototypeOf(){Oo(12)}},Iv={};for(let e in xb){let t=xb[e];Iv[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}Iv.deleteProperty=function(e,t){return Iv.set.call(this,e,t,void 0)};Iv.set=function(e,t,r){return xb.set.call(this,e[0],t,r,e[0])};function rR(e,t){const r=e[Di];return(r?rl(r):e)[t]}function ame(e,t,r){var i;const n=v6(t,r);return n?Dv in n?n[Dv]:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function v6(e,t){if(!(t in e))return;let r=cf(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=cf(r)}}function $A(e){e.modified_||(e.modified_=!0,e.parent_&&$A(e.parent_))}function I0(e){e.copy_||(e.assigned_=new Map,e.copy_=BA(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var lme=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(Vh(r)&&!Vh(n)){const o=n;n=r;const a=this;return function(c=o,...u){return a.produce(c,d=>n.call(this,d,...u))}}Vh(n)||Oo(6),i!==void 0&&!Vh(i)&&Oo(7);let s;if(Jo(r)){const o=P2(this),a=UA(o,r,void 0);let l=!0;try{s=n(a),l=!1}finally{l?HA(o):zA(o)}return E2(o,i),R2(s,o)}else if(!r||!KI(r)){if(s=n(r),s===void 0&&(s=r),s===u6&&(s=void 0),this.autoFreeze_&&YI(s,!0),i){const o=[],a=[];Jd(VA).generateReplacementPatches_(r,s,{patches_:o,inversePatches_:a}),i(o,a)}return s}else Oo(1,r)},this.produceWithPatches=(r,n)=>{if(Vh(r))return(a,...l)=>this.produceWithPatches(a,c=>r(c,...l));let i,s;return[this.produce(r,n,(a,l)=>{i=a,s=l}),i,s]},tR(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),tR(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),tR(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Jo(t)||Oo(8),Dl(t)&&(t=Wo(t));const r=P2(this),n=UA(r,t,void 0);return n[Di].isManual_=!0,zA(r),n}finishDraft(t,r){const n=t&&t[Di];(!n||!n.isManual_)&&Oo(9);const{scope_:i}=n;return E2(i,r),R2(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(r=r.slice(n+1));const i=Jd(VA).applyPatches_;return Dl(t)?i(t,r):this.produce(t,s=>i(s,r))}};function UA(e,t,r,n){const[i,s]=Nx(t)?Jd(bb).proxyMap_(t,r):Mx(t)?Jd(bb).proxySet_(t,r):ome(t,r);return((r==null?void 0:r.scope_)??p6()).drafts_.push(i),s.callbacks_=(r==null?void 0:r.callbacks_)??[],s.key_=n,r&&n!==void 0?ime(r,s,n):s.callbacks_.push(function(l){var u;(u=l.mapSetPlugin_)==null||u.fixSetContents(s);const{patchPlugin_:c}=l;s.modified_&&c&&c.generatePatches_(s,[],l)}),i}function Wo(e){return Dl(e)||Oo(10,e),y6(e)}function y6(e){if(!Jo(e)||Ox(e))return e;const t=e[Di];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=BA(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=BA(e,!0);return kx(r,(i,s)=>{wb(r,i,y6(s))},n),t&&(t.finalized_=!1),r}var cme=new lme,C6=cme.produce;function w6(e){return({dispatch:r,getState:n})=>i=>s=>typeof s=="function"?s(r,n,e):i(s)}var ume=w6(),dme=w6,hme=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?vb:vb.apply(null,arguments)};function oo(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(Rs(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>c6(n)&&n.type===e,r}var b6=class Kg extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Kg.prototype)}static get[Symbol.species](){return Kg}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Kg(...t[0].concat(this)):new Kg(...t.concat(this))}};function A2(e){return Jo(e)?C6(e,()=>{}):e}function MC(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function pme(e){return typeof e=="boolean"}var fme=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new b6;return r&&(pme(r)?o.push(ume):o.push(dme(r.extraArgument))),o},S6="RTK_autoBatch",Or=()=>e=>({payload:e,meta:{[S6]:!0}}),_2=e=>t=>{setTimeout(t,e)},x6=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,s=!1,o=!1;const a=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:_2(10):e.type==="callback"?e.queueNotification:_2(e.timeout),c=()=>{o=!1,s&&(s=!1,a.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const d=()=>i&&u(),p=n.subscribe(d);return a.add(u),()=>{p(),a.delete(u)}},dispatch(u){var d;try{return i=!((d=u==null?void 0:u.meta)!=null&&d[S6]),s=!i,s&&(o||(o=!0,l(c))),n.dispatch(u)}finally{i=!0}}})},gme=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new b6(e);return n&&i.push(x6(typeof n=="object"?n:void 0)),i};function mme(e){const t=fme(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof r=="function")a=r;else if(WI(r))a=l6(r);else throw new Error(Rs(1));let l;typeof n=="function"?l=n(t):l=t();let c=vb;i&&(c=hme({trace:!1,...typeof i=="object"&&i}));const u=Yge(...l),d=gme(u);let p=typeof o=="function"?o(d):d();const f=c(...p);return a6(a,s,f)}function E6(e){const t={},r=[];let n;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Rs(28));if(a in t)throw new Error(Rs(29));return t[a]=o,i},addAsyncThunk(s,o){return o.pending&&(t[s.pending.type]=o.pending),o.rejected&&(t[s.rejected.type]=o.rejected),o.fulfilled&&(t[s.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:s.settled,reducer:o.settled}),i},addMatcher(s,o){return r.push({matcher:s,reducer:o}),i},addDefaultCase(s){return n=s,i}};return e(i),[t,r,n]}function vme(e){return typeof e=="function"}function yme(e,t){let[r,n,i]=E6(t),s;if(vme(e))s=()=>A2(e());else{const a=A2(e);s=()=>a}function o(a=s(),l){let c=[r[l.type],...n.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[i]),c.reduce((u,d)=>{if(d)if(Dl(u)){const f=d(u,l);return f===void 0?u:f}else{if(Jo(u))return C6(u,p=>d(p,l));{const p=d(u,l);if(p===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return u},a)}return o.getInitialState=s,o}var Cme="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",wme=(e=21)=>{let t="",r=e;for(;r--;)t+=Cme[Math.random()*64|0];return t},bme=Symbol.for("rtk-slice-createasyncthunk");function Sme(e,t){return`${e}/${t}`}function xme({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[bme];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Rs(11));const a=(typeof i.reducers=="function"?i.reducers(Pme()):i.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(E,I){const k=typeof E=="string"?E:E.type;if(!k)throw new Error(Rs(12));if(k in c.sliceCaseReducersByType)throw new Error(Rs(13));return c.sliceCaseReducersByType[k]=I,u},addMatcher(E,I){return c.sliceMatchers.push({matcher:E,reducer:I}),u},exposeAction(E,I){return c.actionCreators[E]=I,u},exposeCaseReducer(E,I){return c.sliceCaseReducersByName[E]=I,u}};l.forEach(E=>{const I=a[E],k={reducerName:E,type:Sme(s,E),createNotation:typeof i.reducers=="function"};Tme(I)?_me(k,I,u,t):Rme(k,I,u)});function d(){const[E={},I=[],k=void 0]=typeof i.extraReducers=="function"?E6(i.extraReducers):[i.extraReducers],P={...E,...c.sliceCaseReducersByType};return yme(i.initialState,A=>{for(let D in P)A.addCase(D,P[D]);for(let D of c.sliceMatchers)A.addMatcher(D.matcher,D.reducer);for(let D of I)A.addMatcher(D.matcher,D.reducer);k&&A.addDefaultCase(k)})}const p=E=>E,f=new Map,m=new WeakMap;let y;function C(E,I){return y||(y=d()),y(E,I)}function w(){return y||(y=d()),y.getInitialState()}function b(E,I=!1){function k(A){let D=A[E];return typeof D>"u"&&I&&(D=MC(m,k,w)),D}function P(A=p){const D=MC(f,I,()=>new WeakMap);return MC(D,A,()=>{const L={};for(const[M,T]of Object.entries(i.selectors??{}))L[M]=Eme(T,A,()=>MC(m,A,w),I);return L})}return{reducerPath:E,getSelectors:P,get selectors(){return P(k)},selectSlice:k}}const x={name:s,reducer:C,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...b(o),injectInto(E,{reducerPath:I,...k}={}){const P=I??o;return E.inject({reducerPath:P,reducer:C},k),{...x,...b(P,!0)}}};return x}}function Eme(e,t,r,n){function i(s,...o){let a=t(s);return typeof a>"u"&&n&&(a=r()),e(a,...o)}return i.unwrapped=e,i}var cs=xme();function Pme(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Rme({type:e,reducerName:t,createNotation:r},n,i){let s,o;if("reducer"in n){if(r&&!Ame(n))throw new Error(Rs(17));s=n.reducer,o=n.prepare}else s=n;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?oo(e,o):oo(e))}function Tme(e){return e._reducerDefinitionType==="asyncThunk"}function Ame(e){return e._reducerDefinitionType==="reducerWithPrepare"}function _me({type:e,reducerName:t},r,n,i){if(!i)throw new Error(Rs(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:c,options:u}=r,d=i(e,s,u);n.exposeAction(t,d),o&&n.addCase(d.fulfilled,o),a&&n.addCase(d.pending,a),l&&n.addCase(d.rejected,l),c&&n.addMatcher(d.settled,c),n.exposeCaseReducer(t,{fulfilled:o||OC,pending:a||OC,rejected:l||OC,settled:c||OC})}function OC(){}var Dme="task",P6="listener",R6="completed",QI="cancelled",kme=`task-${QI}`,Ime=`task-${R6}`,WA=`${P6}-${QI}`,Nme=`${P6}-${R6}`,Lx=class{constructor(e){ME(this,"name","TaskAbortError");ME(this,"message");this.code=e,this.message=`${Dme} ${QI} (reason: ${e})`}},XI=(e,t)=>{if(typeof e!="function")throw new TypeError(Rs(32))},Eb=()=>{},T6=(e,t=Eb)=>(e.catch(t),e),A6=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Ed=e=>{if(e.aborted)throw new Lx(e.reason)};function _6(e,t){let r=Eb;return new Promise((n,i)=>{const s=()=>i(new Lx(e.reason));if(e.aborted){s();return}r=A6(e,s),t.finally(()=>r()).then(n,i)}).finally(()=>{r=Eb})}var Mme=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Lx?"cancelled":"rejected",error:r}}finally{t==null||t()}},Pb=e=>t=>T6(_6(e,t).then(r=>(Ed(e),r))),D6=e=>{const t=Pb(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:wp}=Object,D2={},Gx="listenerMiddleware",Ome=(e,t)=>{const r=n=>A6(e,()=>n.abort(e.reason));return(n,i)=>{XI(n);const s=new AbortController;r(s);const o=Mme(async()=>{Ed(e),Ed(s.signal);const a=await n({pause:Pb(s.signal),delay:D6(s.signal),signal:s.signal});return Ed(s.signal),a},()=>s.abort(Ime));return i!=null&&i.autoJoin&&t.push(o.catch(Eb)),{result:Pb(e)(o),cancel(){s.abort(kme)}}}},Fme=(e,t)=>{const r=async(n,i)=>{Ed(t);let s=()=>{};const a=[new Promise((l,c)=>{let u=e({predicate:n,effect:(d,p)=>{p.unsubscribe(),l([d,p.getState(),p.getOriginalState()])}});s=()=>{u(),c()}})];i!=null&&a.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await _6(t,Promise.race(a));return Ed(t),l}finally{s()}};return(n,i)=>T6(r(n,i))},k6=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:s}=e;if(t)i=oo(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(Rs(21));return XI(s),{predicate:i,type:t,effect:s}},I6=wp(e=>{const{type:t,predicate:r,effect:n}=k6(e);return{id:wme(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Rs(22))}}},{withTypes:()=>I6}),k2=(e,t)=>{const{type:r,effect:n,predicate:i}=k6(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===i)&&s.effect===n)},KA=e=>{e.pending.forEach(t=>{t.abort(WA)})},Lme=(e,t)=>()=>{for(const r of t.keys())KA(r);e.clear()},I2=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},N6=wp(oo(`${Gx}/add`),{withTypes:()=>N6}),Gme=oo(`${Gx}/removeAll`),M6=wp(oo(`${Gx}/remove`),{withTypes:()=>M6}),jme=(...e)=>{console.error(`${Gx}/error`,...e)},Ty=(e={})=>{const t=new Map,r=new Map,n=f=>{const m=r.get(f)??0;r.set(f,m+1)},i=f=>{const m=r.get(f)??1;m===1?r.delete(f):r.set(f,m-1)},{extra:s,onError:o=jme}=e;XI(o);const a=f=>(f.unsubscribe=()=>t.delete(f.id),t.set(f.id,f),m=>{f.unsubscribe(),m!=null&&m.cancelActive&&KA(f)}),l=f=>{const m=k2(t,f)??I6(f);return a(m)};wp(l,{withTypes:()=>l});const c=f=>{const m=k2(t,f);return m&&(m.unsubscribe(),f.cancelActive&&KA(m)),!!m};wp(c,{withTypes:()=>c});const u=async(f,m,y,C)=>{const w=new AbortController,b=Fme(l,w.signal),x=[];try{f.pending.add(w),n(f),await Promise.resolve(f.effect(m,wp({},y,{getOriginalState:C,condition:(E,I)=>b(E,I).then(Boolean),take:b,delay:D6(w.signal),pause:Pb(w.signal),extra:s,signal:w.signal,fork:Ome(w.signal,x),unsubscribe:f.unsubscribe,subscribe:()=>{t.set(f.id,f)},cancelActiveListeners:()=>{f.pending.forEach((E,I,k)=>{E!==w&&(E.abort(WA),k.delete(E))})},cancel:()=>{w.abort(WA),f.pending.delete(w)},throwIfCancelled:()=>{Ed(w.signal)}})))}catch(E){E instanceof Lx||I2(o,E,{raisedBy:"effect"})}finally{await Promise.all(x),w.abort(Nme),i(f),f.pending.delete(w)}},d=Lme(t,r);return{middleware:f=>m=>y=>{if(!c6(y))return m(y);if(N6.match(y))return l(y.payload);if(Gme.match(y)){d();return}if(M6.match(y))return c(y.payload);let C=f.getState();const w=()=>{if(C===D2)throw new Error(Rs(23));return C};let b;try{if(b=m(y),t.size>0){const x=f.getState(),E=Array.from(t.values());for(const I of E){let k=!1;try{k=I.predicate(y,x,C)}catch(P){k=!1,I2(o,P,{raisedBy:"predicate"})}k&&u(I,y,f,w)}}}finally{C=D2}return b},startListening:l,stopListening:c,clearListeners:d}};function Rs(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Bme={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},O6=cs({name:"chartLayout",initialState:Bme,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,s;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:Vme,setLayout:Hme,setChartSize:zme,setScale:$me}=O6.actions,Ume=O6.reducer;function F6(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Bt(e){return Number.isFinite(e)}function Ba(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function N2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ip(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N2(Object(r),!0).forEach(function(n){Wme(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wme(e,t,r){return(t=Kme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kme(e){var t=qme(e,"string");return typeof t=="symbol"?t:t+""}function qme(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hr(e,t,r){return Jr(e)||Jr(t)?r:ja(t)?Xd(e,t,r):typeof t=="function"?t(e):r}var Yme=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:s,verticalAlign:o,layout:a}=t;if((a==="vertical"||a==="horizontal"&&o==="middle")&&s!=="center"&&Xe(e[s]))return ip(ip({},e),{},{[s]:e[s]+(n||0)});if((a==="horizontal"||a==="vertical"&&s==="center")&&o!=="middle"&&Xe(e[o]))return ip(ip({},e),{},{[o]:e[o]+(i||0)})}return e},za=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",L6=(e,t,r,n)=>{if(n)return e.map(a=>a.coordinate);var i,s,o=e.map(a=>(a.coordinate===t&&(i=!0),a.coordinate===r&&(s=!0),a.coordinate));return i||o.push(t),s||o.push(r),o},G6=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:s,scale:o,realScaleType:a,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:d,niceTicks:p,axisType:f}=e;if(!o)return null;var m=a==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,y=i==="category"&&o.bandwidth?o.bandwidth()/m:0;if(y=f==="angleAxis"&&s&&s.length>=2?In(s[0]-s[1])*2*y:y,d||p){var C=(d||p||[]).map((w,b)=>{var x=n?n.indexOf(w):w,E=o.map(x);return Bt(E)?{coordinate:E+y,value:w,offset:y,index:b}:null}).filter(Zi);return C}return l&&c?c.map((w,b)=>{var x=o.map(w);return Bt(x)?{coordinate:x+y,value:w,index:b,offset:y}:null}).filter(Zi):o.ticks&&u!=null?o.ticks(u).map((w,b)=>{var x=o.map(w);return Bt(x)?{coordinate:x+y,value:w,index:b,offset:y}:null}).filter(Zi):o.domain().map((w,b)=>{var x=o.map(w);return Bt(x)?{coordinate:x+y,value:n?n[w]:w,index:b,offset:y}:null}).filter(Zi)},Qme=(e,t)=>{if(!t||t.length!==2||!Xe(t[0])||!Xe(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!Xe(e[0])||e[0]<r)&&(i[0]=r),(!Xe(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},Xme=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var s=0,o=0,a=0;a<r;++a){var l=e[a],c=l==null?void 0:l[i];if(c!=null){var u=c[1],d=c[0],p=Zo(u)?d:u;p>=0?(c[0]=s,s+=p,c[1]=s):(c[0]=o,o+=p,c[1]=o)}}}},Zme=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var s=0,o=0;o<r;++o){var a=e[o],l=a==null?void 0:a[i];if(l!=null){var c=Zo(l[1])?l[0]:l[1];c>=0?(l[0]=s,s+=c,l[1]=s):(l[0]=0,l[1]=0)}}}},Jme={sign:Xme,expand:Zfe,none:Qd,silhouette:Jfe,wiggle:ege,positive:Zme},eve=(e,t,r)=>{var n,i=(n=Jme[r])!==null&&n!==void 0?n:Qd,s=Xfe().keys(t).value((a,l)=>Number(hr(a,l,0))).order(FA).offset(i),o=s(e);return o.forEach((a,l)=>{a.forEach((c,u)=>{var d=hr(e[u],t[l],0);Array.isArray(d)&&d.length===2&&Xe(d[0])&&Xe(d[1])&&(c[0]=d[0],c[1]=d[1])})}),o};function j6(e){return e==null?void 0:String(e)}function M2(e){var{axis:t,ticks:r,bandSize:n,entry:i,index:s,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Jr(i[t.dataKey])){var a=k5(r,"value",i[t.dataKey]);if(a)return a.coordinate+n/2}return r!=null&&r[s]?r[s].coordinate+n/2:null}var l=hr(i,Jr(o)?t.dataKey:o),c=t.scale.map(l);return Xe(c)?c:null}var O2=e=>{var{axis:t,ticks:r,offset:n,bandSize:i,entry:s,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var a=hr(s,t.dataKey,t.scale.domain()[o]);if(Jr(a))return null;var l=t.scale.map(a);return Xe(l)?l-i/2+n:null},tve=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},rve=e=>{var t=e.flat(2).filter(Xe);return[Math.min(...t),Math.max(...t)]},nve=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],ive=(e,t,r)=>{if(e!=null)return nve(Object.keys(e).reduce((n,i)=>{var s=e[i];if(!s)return n;var{stackedData:o}=s,a=o.reduce((l,c)=>{var u=F6(c,t,r),d=rve(u);return!Bt(d[0])||!Bt(d[1])?l:[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]);return[Math.min(a[0],n[0]),Math.max(a[1],n[1])]},[1/0,-1/0]))},F2=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,L2=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,uf=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=_x(t,u=>u.coordinate),s=1/0,o=1,a=i.length;o<a;o++){var l=i[o],c=i[o-1];s=Math.min(((l==null?void 0:l.coordinate)||0)-((c==null?void 0:c.coordinate)||0),s)}return s===1/0?0:s}return r?void 0:0};function G2(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:s}=e;return ip(ip({},t),{},{dataKey:r,payload:n,value:i,name:s})}function zf(e,t){if(e)return String(e);if(typeof t=="string")return t}var sve=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},ove=(e,t)=>t==="centric"?e.angle:e.radius,$l=e=>e.layout.width,Ul=e=>e.layout.height,ave=e=>e.layout.scale,B6=e=>e.layout.margin,jx=ge(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Bx=ge(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),V6="data-recharts-item-index",H6="data-recharts-item-id",Ay=60;function j2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function FC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j2(Object(r),!0).forEach(function(n){lve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lve(e,t,r){return(t=cve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cve(e){var t=uve(e,"string");return typeof t=="symbol"?t:t+""}function uve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dve=e=>e.brush.height;function hve(e){var t=Bx(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Ay;return r+i}return r},0)}function pve(e){var t=Bx(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Ay;return r+i}return r},0)}function fve(e){var t=jx(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function gve(e){var t=jx(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Sn=ge([$l,Ul,B6,dve,hve,pve,fve,gve,s6,Hge],(e,t,r,n,i,s,o,a,l,c)=>{var u={left:(r.left||0)+i,right:(r.right||0)+s},d={top:(r.top||0)+o,bottom:(r.bottom||0)+a},p=FC(FC({},d),u),f=p.bottom;p.bottom+=n,p=Yme(p,l,c);var m=e-p.left-p.right,y=t-p.top-p.bottom;return FC(FC({brushBottom:f},p),{},{width:Math.max(m,0),height:Math.max(y,0)})}),mve=ge(Sn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),ZI=ge($l,Ul,(e,t)=>({x:0,y:0,width:e,height:t})),vve=v.createContext(null),hi=()=>v.useContext(vve)!=null,Vx=e=>e.brush,Hx=ge([Vx,Sn,B6],(e,t,r)=>({height:e.height,x:Xe(e.x)?e.x:t.left,y:Xe(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Xe(e.width)?e.width:t.width})),z6={},$6={},U6={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:i,edges:s}={}){let o,a=null;const l=s!=null&&s.includes("leading"),c=s==null||s.includes("trailing"),u=()=>{a!==null&&(r.apply(o,a),o=void 0,a=null)},d=()=>{c&&u(),y()};let p=null;const f=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,d()},n)},m=()=>{p!==null&&(clearTimeout(p),p=null)},y=()=>{m(),o=void 0,a=null},C=()=>{u()},w=function(...b){if(i!=null&&i.aborted)return;o=this,a=b;const x=p==null;f(),l&&x&&u()};return w.schedule=f,w.cancel=y,w.flush=C,i==null||i.addEventListener("abort",y,{once:!0}),w}e.debounce=t})(U6);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U6;function r(n,i=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:a=!0,maxWait:l}=s,c=Array(2);o&&(c[0]="leading"),a&&(c[1]="trailing");let u,d=null;const p=t.debounce(function(...y){u=n.apply(this,y),d=null},i,{edges:c}),f=function(...y){return l!=null&&(d===null&&(d=Date.now()),Date.now()-d>=l)?(u=n.apply(this,y),d=Date.now(),p.cancel(),p.schedule(),u):(p.apply(this,y),u)},m=()=>(p.flush(),u);return f.cancel=p.cancel,f.flush=m,f}e.debounce=r})($6);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$6;function r(n,i=0,s={}){const{leading:o=!0,trailing:a=!0}=s;return t.debounce(n,i,{leading:o,maxWait:i,trailing:a})}e.throttle=r})(z6);var yve=z6.throttle;const Cve=lo(yve);var Rb=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(r.replace(/%s/g,()=>i[o++]))}},Sa={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},W6=(e,t,r)=>{var{width:n=Sa.width,height:i=Sa.height,aspect:s,maxHeight:o}=r,a=Zd(n)?e:Number(n),l=Zd(i)?t:Number(i);return s&&s>0&&(a?l=a/s:l&&(a=l*s),o&&l!=null&&l>o&&(l=o)),{calculatedWidth:a,calculatedHeight:l}},wve={width:0,height:0,overflow:"visible"},bve={width:0,overflowX:"visible"},Sve={height:0,overflowY:"visible"},xve={},Eve=e=>{var{width:t,height:r}=e,n=Zd(t),i=Zd(r);return n&&i?wve:n?bve:i?Sve:xve};function Pve(e){var{width:t,height:r,aspect:n}=e,i=t,s=r;return i===void 0&&s===void 0?(i=Sa.width,s=Sa.height):i===void 0?i=n&&n>0?void 0:Sa.width:s===void 0&&(s=n&&n>0?void 0:Sa.height),{width:i,height:s}}function qA(){return qA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qA.apply(null,arguments)}function B2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function V2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B2(Object(r),!0).forEach(function(n){Rve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rve(e,t,r){return(t=Tve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tve(e){var t=Ave(e,"string");return typeof t=="symbol"?t:t+""}function Ave(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K6=v.createContext(Sa.initialDimension);function _ve(e){return Ba(e.width)&&Ba(e.height)}function q6(e){var{children:t,width:r,height:n}=e,i=v.useMemo(()=>({width:r,height:n}),[r,n]);return _ve(i)?v.createElement(K6.Provider,{value:i},t):null}var JI=()=>v.useContext(K6),Dve=v.forwardRef((e,t)=>{var{aspect:r,initialDimension:n=Sa.initialDimension,width:i,height:s,minWidth:o=Sa.minWidth,minHeight:a,maxHeight:l,children:c,debounce:u=Sa.debounce,id:d,className:p,onResize:f,style:m={}}=e,y=v.useRef(null),C=v.useRef();C.current=f,v.useImperativeHandle(t,()=>y.current);var[w,b]=v.useState({containerWidth:n.width,containerHeight:n.height}),x=v.useCallback((A,D)=>{b(L=>{var M=Math.round(A),T=Math.round(D);return L.containerWidth===M&&L.containerHeight===T?L:{containerWidth:M,containerHeight:T}})},[]);v.useEffect(()=>{if(y.current==null||typeof ResizeObserver>"u")return wh;var A=T=>{var O,Q=T[0];if(Q!=null){var{width:X,height:B}=Q.contentRect;x(X,B),(O=C.current)===null||O===void 0||O.call(C,X,B)}};u>0&&(A=Cve(A,u,{trailing:!0,leading:!1}));var D=new ResizeObserver(A),{width:L,height:M}=y.current.getBoundingClientRect();return x(L,M),D.observe(y.current),()=>{D.disconnect()}},[x,u]);var{containerWidth:E,containerHeight:I}=w;Rb(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:k,calculatedHeight:P}=W6(E,I,{width:i,height:s,aspect:r,maxHeight:l});return Rb(k!=null&&k>0||P!=null&&P>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,P,i,s,o,a,r),v.createElement("div",{id:d?"".concat(d):void 0,className:er("recharts-responsive-container",p),style:V2(V2({},m),{},{width:i,height:s,minWidth:o,minHeight:a,maxHeight:l}),ref:y},v.createElement("div",{style:Eve({width:i,height:s})},v.createElement(q6,{width:k,height:P},c)))}),js=v.forwardRef((e,t)=>{var r=JI();if(Ba(r.width)&&Ba(r.height))return e.children;var{width:n,height:i}=Pve({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:s,calculatedHeight:o}=W6(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return Xe(s)&&Xe(o)?v.createElement(q6,{width:s,height:o},e.children):v.createElement(Dve,qA({},e,{width:n,height:i,ref:t}))});function e1(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var zx=()=>{var e,t=hi(),r=it(mve),n=it(Hx),i=(e=it(Vx))===null||e===void 0?void 0:e.padding;return!t||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},kve={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Y6=()=>{var e;return(e=it(Sn))!==null&&e!==void 0?e:kve},t1=()=>it($l),r1=()=>it(Ul),Ive=()=>it(e=>e.layout.margin),Zt=e=>e.layout.layoutType,bh=()=>it(Zt),n1=()=>{var e=bh();if(e==="horizontal"||e==="vertical")return e},Q6=e=>{var t=e.layout.layoutType;if(t==="centric"||t==="radial")return t},Nve=()=>{var e=bh();return e!==void 0},_y=e=>{var t=Er(),r=hi(),{width:n,height:i}=e,s=JI(),o=n,a=i;return s&&(o=s.width>0?s.width:n,a=s.height>0?s.height:i),v.useEffect(()=>{!r&&Ba(o)&&Ba(a)&&t(zme({width:o,height:a}))},[t,r,o,a]),null},X6=Symbol.for("immer-nothing"),H2=Symbol.for("immer-draftable"),Ds=Symbol.for("immer-state");function Fo(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Nv=Object.getPrototypeOf;function df(e){return!!e&&!!e[Ds]}function eh(e){var t;return e?Z6(e)||Array.isArray(e)||!!e[H2]||!!((t=e.constructor)!=null&&t[H2])||Dy(e)||Ux(e):!1}var Mve=Object.prototype.constructor.toString(),z2=new WeakMap;function Z6(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=z2.get(r);return n===void 0&&(n=Function.toString.call(r),z2.set(r,n)),n===Mve}function Tb(e,t,r=!0){$x(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function $x(e){const t=e[Ds];return t?t.type_:Array.isArray(e)?1:Dy(e)?2:Ux(e)?3:0}function YA(e,t){return $x(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function J6(e,t,r){const n=$x(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Ove(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Dy(e){return e instanceof Map}function Ux(e){return e instanceof Set}function $u(e){return e.copy_||e.base_}function QA(e,t){if(Dy(e))return new Map(e);if(Ux(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Z6(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Ds];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const o=i[s],a=n[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(Nv(e),n)}else{const n=Nv(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function i1(e,t=!1){return Wx(e)||df(e)||!eh(e)||($x(e)>1&&Object.defineProperties(e,{set:LC,add:LC,clear:LC,delete:LC}),Object.freeze(e),t&&Object.values(e).forEach(r=>i1(r,!0))),e}function Fve(){Fo(2)}var LC={value:Fve};function Wx(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Lve={};function th(e){const t=Lve[e];return t||Fo(0,e),t}var Mv;function e9(){return Mv}function Gve(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function $2(e,t){t&&(th("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function XA(e){ZA(e),e.drafts_.forEach(jve),e.drafts_=null}function ZA(e){e===Mv&&(Mv=e.parent_)}function U2(e){return Mv=Gve(Mv,e)}function jve(e){const t=e[Ds];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function W2(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Ds].modified_&&(XA(t),Fo(4)),eh(e)&&(e=Ab(t,e),t.parent_||_b(t,e)),t.patches_&&th("Patches").generateReplacementPatches_(r[Ds].base_,e,t.patches_,t.inversePatches_)):e=Ab(t,r,[]),XA(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==X6?e:void 0}function Ab(e,t,r){if(Wx(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[Ds];if(!i)return Tb(t,(s,o)=>K2(e,i,t,s,o,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return _b(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let o=s,a=!1;i.type_===3&&(o=new Set(s),s.clear(),a=!0),Tb(o,(l,c)=>K2(e,i,s,l,c,r,a),n),_b(e,s,!1),r&&e.patches_&&th("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function K2(e,t,r,n,i,s,o){if(i==null||typeof i!="object"&&!o)return;const a=Wx(i);if(!(a&&!o)){if(df(i)){const l=s&&t&&t.type_!==3&&!YA(t.assigned_,n)?s.concat(n):void 0,c=Ab(e,i,l);if(J6(r,n,c),df(c))e.canAutoFreeze_=!1;else return}else o&&r.add(i);if(eh(i)&&!a){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&a)return;Ab(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Dy(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&_b(e,i)}}}function _b(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&i1(t,r)}function Bve(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:e9(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=s1;r&&(i=[n],s=Ov);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return n.draft_=a,n.revoke_=o,a}var s1={get(e,t){if(t===Ds)return e;const r=$u(e);if(!YA(r,t))return Vve(e,r,t);const n=r[t];return e.finalized_||!eh(n)?n:n===nR(e.base_,t)?(iR(e),e.copy_[t]=e_(n,e)):n},has(e,t){return t in $u(e)},ownKeys(e){return Reflect.ownKeys($u(e))},set(e,t,r){const n=t9($u(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=nR($u(e),t),s=i==null?void 0:i[Ds];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Ove(r,i)&&(r!==void 0||YA(e.base_,t)))return!0;iR(e),JA(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return nR(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,iR(e),JA(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=$u(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Fo(11)},getPrototypeOf(e){return Nv(e.base_)},setPrototypeOf(){Fo(12)}},Ov={};Tb(s1,(e,t)=>{Ov[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ov.deleteProperty=function(e,t){return Ov.set.call(this,e,t,void 0)};Ov.set=function(e,t,r){return s1.set.call(this,e[0],t,r,e[0])};function nR(e,t){const r=e[Ds];return(r?$u(r):e)[t]}function Vve(e,t,r){var i;const n=t9(t,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function t9(e,t){if(!(t in e))return;let r=Nv(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Nv(r)}}function JA(e){e.modified_||(e.modified_=!0,e.parent_&&JA(e.parent_))}function iR(e){e.copy_||(e.copy_=QA(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Hve=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const o=this;return function(l=s,...c){return o.produce(l,u=>r.call(this,u,...c))}}typeof r!="function"&&Fo(6),n!==void 0&&typeof n!="function"&&Fo(7);let i;if(eh(t)){const s=U2(this),o=e_(t,void 0);let a=!0;try{i=r(o),a=!1}finally{a?XA(s):ZA(s)}return $2(s,n),W2(i,s)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===X6&&(i=void 0),this.autoFreeze_&&i1(i,!0),n){const s=[],o=[];th("Patches").generateReplacementPatches_(t,i,s,o),n(s,o)}return i}else Fo(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,l=>t(l,...a));let n,i;return[this.produce(t,r,(o,a)=>{n=o,i=a}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){eh(e)||Fo(8),df(e)&&(e=zve(e));const t=U2(this),r=e_(e,void 0);return r[Ds].isManual_=!0,ZA(t),r}finishDraft(e,t){const r=e&&e[Ds];(!r||!r.isManual_)&&Fo(9);const{scope_:n}=r;return $2(n,t),W2(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=th("Patches").applyPatches_;return df(e)?n(e,t):this.produce(e,i=>n(i,t))}};function e_(e,t){const r=Dy(e)?th("MapSet").proxyMap_(e,t):Ux(e)?th("MapSet").proxySet_(e,t):Bve(e,t);return(t?t.scope_:e9()).drafts_.push(r),r}function zve(e){return df(e)||Fo(10,e),r9(e)}function r9(e){if(!eh(e)||Wx(e))return e;const t=e[Ds];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=QA(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=QA(e,!0);return Tb(r,(i,s)=>{J6(r,i,r9(s))},n),t&&(t.finalized_=!1),r}var $ve=new Hve;$ve.produce;var Uve={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},n9=cs({name:"legend",initialState:Uve,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Or()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Wo(e).payload.indexOf(r);i>-1&&(e.payload[i]=n)},prepare:Or()},removeLegendPayload:{reducer(e,t){var r=Wo(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Or()}}}),{setLegendSize:q2,setLegendSettings:Wve,addLegendPayload:i9,replaceLegendPayload:s9,removeLegendPayload:o9}=n9.actions,Kve=n9.reducer,qve=["contextPayload"];function t_(){return t_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t_.apply(null,arguments)}function Y2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y2(Object(r),!0).forEach(function(n){Yve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yve(e,t,r){return(t=Qve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qve(e){var t=Xve(e,"string");return typeof t=="symbol"?t:t+""}function Xve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zve(e,t){if(e==null)return{};var r,n,i=Jve(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Jve(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function eye(e){return e.value}function tye(e){var{contextPayload:t}=e,r=Zve(e,qve),n=Z5(t,e.payloadUniqBy,eye),i=hf(hf({},r),{},{payload:n});return v.isValidElement(e.content)?v.cloneElement(e.content,i):typeof e.content=="function"?v.createElement(e.content,i):v.createElement(Rge,i)}function rye(e,t,r,n,i,s){var{layout:o,align:a,verticalAlign:l}=t,c,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(a==="center"&&o==="vertical"?c={left:((n||0)-s.width)/2}:c=a==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(l==="middle"?u={top:((i||0)-s.height)/2}:u=l==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),hf(hf({},c),u)}function nye(e){var t=Er();return v.useEffect(()=>{t(Wve(e))},[t,e]),null}function iye(e){var t=Er();return v.useEffect(()=>(t(q2(e)),()=>{t(q2({width:0,height:0}))}),[t,e]),null}function sye(e,t,r,n){return e==="vertical"&&t!=null?{height:t}:e==="horizontal"?{width:r||n}:null}var oye={align:"center",iconSize:14,inactiveColor:"#ccc",itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function N0(e){var t=gn(e,oye),r=Uge(),n=bfe(),i=Ive(),{width:s,height:o,wrapperStyle:a,portal:l}=t,[c,u]=o6([r]),d=t1(),p=r1();if(d==null||p==null)return null;var f=d-((i==null?void 0:i.left)||0)-((i==null?void 0:i.right)||0),m=sye(t.layout,o,s,f),y=l?a:hf(hf({position:"absolute",width:(m==null?void 0:m.width)||s||"auto",height:(m==null?void 0:m.height)||o||"auto"},rye(a,t,i,d,p,c)),a),C=l??n;if(C==null||r==null)return null;var w=v.createElement("div",{className:"recharts-legend-wrapper",style:y,ref:u},v.createElement(nye,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!l&&v.createElement(iye,{width:c.width,height:c.height}),v.createElement(tye,t_({},t,m,{margin:i,chartWidth:d,chartHeight:p,contextPayload:r})));return oh.createPortal(w,C)}N0.displayName="Legend";function r_(){return r_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r_.apply(null,arguments)}function Q2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function yg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q2(Object(r),!0).forEach(function(n){aye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aye(e,t,r){return(t=lye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lye(e){var t=cye(e,"string");return typeof t=="symbol"?t:t+""}function cye(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uye(e){return Array.isArray(e)&&ja(e[0])&&ja(e[1])?e.join(" ~ "):e}var kh={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},dye=e=>{var{separator:t=kh.separator,contentStyle:r,itemStyle:n,labelStyle:i=kh.labelStyle,payload:s,formatter:o,itemSorter:a,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:d,accessibilityLayer:p=kh.accessibilityLayer}=e,f=()=>{if(s&&s.length){var I={padding:0,margin:0},k=(a?_x(s,a):s).map((P,A)=>{if(P.type==="none")return null;var D=P.formatter||o||uye,{value:L,name:M}=P,T=L,O=M;if(D){var Q=D(L,M,P,A,s);if(Array.isArray(Q))[T,O]=Q;else if(Q!=null)T=Q;else return null}var X=yg(yg({},kh.itemStyle),{},{color:P.color||kh.itemStyle.color},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:X},ja(O)?v.createElement("span",{className:"recharts-tooltip-item-name"},O):null,ja(O)?v.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,v.createElement("span",{className:"recharts-tooltip-item-value"},T),v.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:I},k)}return null},m=yg(yg({},kh.contentStyle),r),y=yg({margin:0},i),C=!Jr(u),w=C?u:"",b=er("recharts-default-tooltip",l),x=er("recharts-tooltip-label",c);C&&d&&s!==void 0&&s!==null&&(w=d(u,s));var E=p?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",r_({className:b,style:m},E),v.createElement("p",{className:x,style:y},v.isValidElement(w)?w:"".concat(w)),f())},Cg="recharts-tooltip-wrapper",hye={visibility:"hidden"};function pye(e){var{coordinate:t,translateX:r,translateY:n}=e;return er(Cg,{["".concat(Cg,"-right")]:Xe(r)&&t&&Xe(t.x)&&r>=t.x,["".concat(Cg,"-left")]:Xe(r)&&t&&Xe(t.x)&&r<t.x,["".concat(Cg,"-bottom")]:Xe(n)&&t&&Xe(t.y)&&n>=t.y,["".concat(Cg,"-top")]:Xe(n)&&t&&Xe(t.y)&&n<t.y})}function X2(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offset:i,position:s,reverseDirection:o,tooltipDimension:a,viewBox:l,viewBoxDimension:c}=e;if(s&&Xe(s[n]))return s[n];var u=r[n]-a-(i>0?i:0),d=r[n]+i;if(t[n])return o[n]?u:d;var p=l[n];if(p==null)return 0;if(o[n]){var f=u,m=p;return f<m?Math.max(d,p):Math.max(u,p)}if(c==null)return 0;var y=d+a,C=p+c;return y>C?Math.max(u,p):Math.max(d,p)}function fye(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function gye(e){var{allowEscapeViewBox:t,coordinate:r,offsetTop:n,offsetLeft:i,position:s,reverseDirection:o,tooltipBox:a,useTranslate3d:l,viewBox:c}=e,u,d,p;return a.height>0&&a.width>0&&r?(d=X2({allowEscapeViewBox:t,coordinate:r,key:"x",offset:i,position:s,reverseDirection:o,tooltipDimension:a.width,viewBox:c,viewBoxDimension:c.width}),p=X2({allowEscapeViewBox:t,coordinate:r,key:"y",offset:n,position:s,reverseDirection:o,tooltipDimension:a.height,viewBox:c,viewBoxDimension:c.height}),u=fye({translateX:d,translateY:p,useTranslate3d:l})):u=hye,{cssProperties:u,cssClasses:pye({translateX:d,translateY:p,coordinate:r})}}function Z2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function GC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z2(Object(r),!0).forEach(function(n){n_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function n_(e,t,r){return(t=mye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mye(e){var t=vye(e,"string");return typeof t=="symbol"?t:t+""}function vye(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class yye extends v.PureComponent{constructor(){super(...arguments),n_(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),n_(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:s,coordinate:o,hasPayload:a,isAnimationActive:l,offset:c,position:u,reverseDirection:d,useTranslate3d:p,viewBox:f,wrapperStyle:m,lastBoundingBox:y,innerRef:C,hasPortalFromProps:w}=this.props,b=typeof c=="number"?c:c.x,x=typeof c=="number"?c:c.y,{cssClasses:E,cssProperties:I}=gye({allowEscapeViewBox:r,coordinate:o,offsetLeft:b,offsetTop:x,position:u,reverseDirection:d,tooltipBox:{height:y.height,width:y.width},useTranslate3d:p,viewBox:f}),k=w?{}:GC(GC({transition:l&&t?"transform ".concat(n,"ms ").concat(i):void 0},I),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&a?"visible":"hidden",position:"absolute",top:0,left:0}),P=GC(GC({},k),{},{visibility:!this.state.dismissed&&t&&a?"visible":"hidden"},m);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:P,ref:C},s)}}var a9=()=>{var e;return(e=it(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function i_(){return i_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i_.apply(null,arguments)}function J2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function eG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J2(Object(r),!0).forEach(function(n){Cye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cye(e,t,r){return(t=wye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wye(e){var t=bye(e,"string");return typeof t=="symbol"?t:t+""}function bye(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tG={curveBasisClosed:Bfe,curveBasisOpen:Vfe,curveBasis:jfe,curveBumpX:Pfe,curveBumpY:Rfe,curveLinearClosed:Hfe,curveLinear:Sx,curveMonotoneX:zfe,curveMonotoneY:$fe,curveNatural:Ufe,curveStep:Wfe,curveStepAfter:qfe,curveStepBefore:Kfe},Db=e=>Bt(e.x)&&Bt(e.y),rG=e=>e.base!=null&&Db(e.base)&&Db(e),wg=e=>e.x,bg=e=>e.y,Sye=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Ey(e));if((r==="curveMonotone"||r==="curveBump")&&t){var n=tG["".concat(r).concat(t==="vertical"?"Y":"X")];if(n)return n}return tG[r]||Sx},nG={connectNulls:!1,type:"linear"},xye=e=>{var{type:t=nG.type,points:r=[],baseLine:n,layout:i,connectNulls:s=nG.connectNulls}=e,o=Sye(t,i),a=s?r.filter(Db):r;if(Array.isArray(n)){var l,c=r.map((m,y)=>eG(eG({},m),{},{base:n[y]}));i==="vertical"?l=DC().y(bg).x1(wg).x0(m=>m.base.x):l=DC().x(wg).y1(bg).y0(m=>m.base.y);var u=l.defined(rG).curve(o),d=s?c.filter(rG):c;return u(d)}var p;i==="vertical"&&Xe(n)?p=DC().y(bg).x1(wg).x0(n):Xe(n)?p=DC().x(wg).y1(bg).y0(n):p=v5().x(wg).y(bg);var f=p.defined(Db).curve(o);return f(a)},bp=e=>{var{className:t,points:r,path:n,pathRef:i}=e,s=bh();if((!r||!r.length)&&!n)return null;var o={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||s,connectNulls:e.connectNulls},a=r&&r.length?xye(o):n;return v.createElement("path",i_({},ss(e),MI(e),{className:er("recharts-curve",t),d:a===null?void 0:a,ref:i}))},Eye=["x","y","top","left","width","height","className"];function s_(){return s_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s_.apply(null,arguments)}function iG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Pye(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iG(Object(r),!0).forEach(function(n){Rye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rye(e,t,r){return(t=Tye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tye(e){var t=Aye(e,"string");return typeof t=="symbol"?t:t+""}function Aye(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _ye(e,t){if(e==null)return{};var r,n,i=Dye(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Dye(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var kye=(e,t,r,n,i,s)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),Iye=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:s=0,height:o=0,className:a}=e,l=_ye(e,Eye),c=Pye({x:t,y:r,top:n,left:i,width:s,height:o},l);return!Xe(t)||!Xe(r)||!Xe(s)||!Xe(o)||!Xe(n)||!Xe(i)?null:v.createElement("path",s_({},_i(c),{className:er("recharts-cross",a),d:kye(t,r,s,o,n,i)}))};function Nye(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function sG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function oG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sG(Object(r),!0).forEach(function(n){Mye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mye(e,t,r){return(t=Oye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oye(e){var t=Fye(e,"string");return typeof t=="symbol"?t:t+""}function Fye(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lye=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),l9=(e,t,r)=>e.map(n=>"".concat(Lye(n)," ").concat(t,"ms ").concat(r)).join(","),Gye=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(i=>n.includes(i))),Fv=(e,t)=>Object.keys(t).reduce((r,n)=>oG(oG({},r),{},{[n]:e(n,t[n])}),{});function aG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Cn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aG(Object(r),!0).forEach(function(n){jye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jye(e,t,r){return(t=Bye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bye(e){var t=Vye(e,"string");return typeof t=="symbol"?t:t+""}function Vye(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kb=(e,t,r)=>e+(t-e)*r,o_=e=>{var{from:t,to:r}=e;return t!==r},c9=(e,t,r)=>{var n=Fv((i,s)=>{if(o_(s)){var[o,a]=e(s.from,s.to,s.velocity);return Cn(Cn({},s),{},{from:o,velocity:a})}return s},t);return r<1?Fv((i,s)=>o_(s)&&n[i]!=null?Cn(Cn({},s),{},{velocity:kb(s.velocity,n[i].velocity,r),from:kb(s.from,n[i].from,r)}):s,t):c9(e,n,r-1)};function Hye(e,t,r,n,i,s){var o,a=n.reduce((p,f)=>Cn(Cn({},p),{},{[f]:{from:e[f],velocity:0,to:t[f]}}),{}),l=()=>Fv((p,f)=>f.from,a),c=()=>!Object.values(a).filter(o_).length,u=null,d=p=>{o||(o=p);var f=p-o,m=f/r.dt;a=c9(r,a,m),i(Cn(Cn(Cn({},e),t),l())),o=p,c()||(u=s.setTimeout(d))};return()=>(u=s.setTimeout(d),()=>{var p;(p=u)===null||p===void 0||p()})}function zye(e,t,r,n,i,s,o){var a=null,l=i.reduce((d,p)=>{var f=e[p],m=t[p];return f==null||m==null?d:Cn(Cn({},d),{},{[p]:[f,m]})},{}),c,u=d=>{c||(c=d);var p=(d-c)/n,f=Fv((y,C)=>kb(...C,r(p)),l);if(s(Cn(Cn(Cn({},e),t),f)),p<1)a=o.setTimeout(u);else{var m=Fv((y,C)=>kb(...C,r(1)),l);s(Cn(Cn(Cn({},e),t),m))}};return()=>(a=o.setTimeout(u),()=>{var d;(d=a)===null||d===void 0||d()})}const $ye=(e,t,r,n,i,s)=>{var o=Gye(e,t);return r==null?()=>(i(Cn(Cn({},e),t)),()=>{}):r.isStepper===!0?Hye(e,t,r,o,i,s):zye(e,t,r,n,o,i,s)};var Ib=1e-4,u9=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],d9=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),lG=(e,t)=>r=>{var n=u9(e,t);return d9(n,r)},Uye=(e,t)=>r=>{var n=u9(e,t),i=[...n.map((s,o)=>s*o).slice(1),0];return d9(i,r)},Wye=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var i=n.map(s=>parseFloat(s));return[i[0],i[1],i[2],i[3]]},Kye=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=Wye(r[0]);if(i)return i}}return r.length===4?r:[0,0,1,1]},qye=(e,t,r,n)=>{var i=lG(e,r),s=lG(t,n),o=Uye(e,r),a=c=>c>1?1:c<0?0:c,l=c=>{for(var u=c>1?1:c,d=u,p=0;p<8;++p){var f=i(d)-u,m=o(d);if(Math.abs(f-u)<Ib||m<Ib)return s(d);d=a(d-f/m)}return s(d)};return l.isStepper=!1,l},cG=function(){return qye(...Kye(...arguments))},Yye=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=t,s=(o,a,l)=>{var c=-(o-a)*r,u=l*n,d=l+(c-u)*i/1e3,p=l*i/1e3+o;return Math.abs(p-a)<Ib&&Math.abs(d)<Ib?[a,0]:[p,d]};return s.isStepper=!0,s.dt=i,s},Qye=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return cG(e);case"spring":return Yye();default:if(e.split("(")[0]==="cubic-bezier")return cG(e)}return typeof e=="function"?e:null};function Xye(e){var t,r=()=>null,n=!1,i=null,s=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var a=o,[l,...c]=a;if(typeof l=="number"){i=e.setTimeout(s.bind(null,c),l);return}s(l),i=e.setTimeout(s.bind(null,c));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,i&&(i(),i=null),s(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class Zye{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,s=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function Jye(){return Xye(new Zye)}var eCe=v.createContext(Jye);function tCe(e,t){var r=v.useContext(eCe);return v.useMemo(()=>t??r(e),[e,t,r])}var rCe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),ky={isSsr:rCe()},nCe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},uG={t:0},sR={t:1};function Iy(e){var t=gn(e,nCe),{isActive:r,canBegin:n,duration:i,easing:s,begin:o,onAnimationEnd:a,onAnimationStart:l,children:c}=t,u=r==="auto"?!ky.isSsr:r,d=tCe(t.animationId,t.animationManager),[p,f]=v.useState(u?uG:sR),m=v.useRef(null);return v.useEffect(()=>{u||f(sR)},[u]),v.useEffect(()=>{if(!u||!n)return wh;var y=$ye(uG,sR,Qye(s),i,f,d.getTimeoutController()),C=()=>{m.current=y()};return d.start([l,o,C,i,a]),()=>{d.stop(),m.current&&m.current(),a()}},[u,n,i,s,o,l,a,d]),c(p.t)}function Ny(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(_v(t)),n=v.useRef(e);return n.current!==e&&(r.current=_v(t),n.current=e),r.current}var iCe=["radius"],sCe=["radius"],dG,hG,pG,fG,gG,mG,vG,yG,CG,wG;function bG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function SG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bG(Object(r),!0).forEach(function(n){oCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oCe(e,t,r){return(t=aCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aCe(e){var t=lCe(e,"string");return typeof t=="symbol"?t:t+""}function lCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nb(){return Nb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nb.apply(null,arguments)}function xG(e,t){if(e==null)return{};var r,n,i=cCe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function cCe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function sa(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var EG=(e,t,r,n,i)=>{var s=Mc(r),o=Mc(n),a=Math.min(Math.abs(s)/2,Math.abs(o)/2),l=o>=0?1:-1,c=s>=0?1:-1,u=o>=0&&s>=0||o<0&&s<0?1:0,d;if(a>0&&Array.isArray(i)){for(var p=[0,0,0,0],f=0,m=4;f<m;f++){var y,C=(y=i[f])!==null&&y!==void 0?y:0;p[f]=C>a?a:C}d=Yr(dG||(dG=sa(["M",",",""])),e,t+l*p[0]),p[0]>0&&(d+=Yr(hG||(hG=sa(["A ",",",",0,0,",",",",",""])),p[0],p[0],u,e+c*p[0],t)),d+=Yr(pG||(pG=sa(["L ",",",""])),e+r-c*p[1],t),p[1]>0&&(d+=Yr(fG||(fG=sa(["A ",",",",0,0,",`,
        `,",",""])),p[1],p[1],u,e+r,t+l*p[1])),d+=Yr(gG||(gG=sa(["L ",",",""])),e+r,t+n-l*p[2]),p[2]>0&&(d+=Yr(mG||(mG=sa(["A ",",",",0,0,",`,
        `,",",""])),p[2],p[2],u,e+r-c*p[2],t+n)),d+=Yr(vG||(vG=sa(["L ",",",""])),e+c*p[3],t+n),p[3]>0&&(d+=Yr(yG||(yG=sa(["A ",",",",0,0,",`,
        `,",",""])),p[3],p[3],u,e,t+n-l*p[3])),d+="Z"}else if(a>0&&i===+i&&i>0){var w=Math.min(a,i);d=Yr(CG||(CG=sa(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+l*w,w,w,u,e+c*w,t,e+r-c*w,t,w,w,u,e+r,t+l*w,e+r,t+n-l*w,w,w,u,e+r-c*w,t+n,e+c*w,t+n,w,w,u,e,t+n-l*w)}else d=Yr(wG||(wG=sa(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return d},PG={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},h9=e=>{var t=gn(e,PG),r=v.useRef(null),[n,i]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var W=r.current.getTotalLength();W&&i(W)}catch{}},[]);var{x:s,y:o,width:a,height:l,radius:c,className:u}=t,{animationEasing:d,animationDuration:p,animationBegin:f,isAnimationActive:m,isUpdateAnimationActive:y}=t,C=v.useRef(a),w=v.useRef(l),b=v.useRef(s),x=v.useRef(o),E=v.useMemo(()=>({x:s,y:o,width:a,height:l,radius:c}),[s,o,a,l,c]),I=Ny(E,"rectangle-");if(s!==+s||o!==+o||a!==+a||l!==+l||a===0||l===0)return null;var k=er("recharts-rectangle",u);if(!y){var P=_i(t),{radius:A}=P,D=xG(P,iCe);return v.createElement("path",Nb({},D,{x:Mc(s),y:Mc(o),width:Mc(a),height:Mc(l),radius:typeof c=="number"?c:void 0,className:k,d:EG(s,o,a,l,c)}))}var L=C.current,M=w.current,T=b.current,O=x.current,Q="0px ".concat(n===-1?1:n,"px"),X="".concat(n,"px 0px"),B=l9(["strokeDasharray"],p,typeof d=="string"?d:PG.animationEasing);return v.createElement(Iy,{animationId:I,key:I,canBegin:n>0,duration:p,easing:d,isActive:y,begin:f},W=>{var ne=Ar(L,a,W),J=Ar(M,l,W),ye=Ar(T,s,W),Pe=Ar(O,o,W);r.current&&(C.current=ne,w.current=J,b.current=ye,x.current=Pe);var ue;m?W>0?ue={transition:B,strokeDasharray:X}:ue={strokeDasharray:Q}:ue={strokeDasharray:X};var Z=_i(t),{radius:Ve}=Z,ve=xG(Z,sCe);return v.createElement("path",Nb({},ve,{radius:typeof c=="number"?c:void 0,className:k,d:EG(ye,Pe,ne,J,c),ref:r,style:SG(SG({},ue),t.style)}))})};function RG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function TG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RG(Object(r),!0).forEach(function(n){uCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uCe(e,t,r){return(t=dCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dCe(e){var t=hCe(e,"string");return typeof t=="symbol"?t:t+""}function hCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mb=Math.PI/180,pCe=e=>e*180/Math.PI,hn=(e,t,r,n)=>({x:e+Math.cos(-Mb*n)*r,y:t+Math.sin(-Mb*n)*r}),p9=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},fCe=(e,t)=>{var{x:r,y:n}=e,{x:i,y:s}=t;return Math.sqrt((r-i)**2+(n-s)**2)},gCe=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:s}=t,o=fCe({x:r,y:n},{x:i,y:s});if(o<=0)return{radius:o,angle:0};var a=(r-i)/o,l=Math.acos(a);return n>s&&(l=2*Math.PI-l),{radius:o,angle:pCe(l),angleInRadian:l}},mCe=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),s=Math.min(n,i);return{startAngle:t-s*360,endAngle:r-s*360}},vCe=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(i,s);return e+o*360},yCe=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:i,angle:s}=gCe({x:r,y:n},t),{innerRadius:o,outerRadius:a}=t;if(i<o||i>a||i===0)return null;var{startAngle:l,endAngle:c}=mCe(t),u=s,d;if(l<=c){for(;u>c;)u-=360;for(;u<l;)u+=360;d=u>=l&&u<=c}else{for(;u>l;)u-=360;for(;u<c;)u+=360;d=u>=c&&u<=l}return d?TG(TG({},t),{},{radius:i,angle:vCe(u,t)}):null};function f9(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:s}=e,o=hn(t,r,n,i),a=hn(t,r,n,s);return{points:[o,a],cx:t,cy:r,radius:n,startAngle:i,endAngle:s}}var AG,_G,DG,kG,IG,NG,MG;function a_(){return a_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a_.apply(null,arguments)}function id(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var CCe=(e,t)=>{var r=In(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},jC=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:s,isExternal:o,cornerRadius:a,cornerIsExternal:l}=e,c=a*(o?1:-1)+n,u=Math.asin(a/c)/Mb,d=l?i:i+s*u,p=hn(t,r,c,d),f=hn(t,r,n,d),m=l?i-s*u:i,y=hn(t,r,c*Math.cos(u*Mb),m);return{center:p,circleTangency:f,lineTangency:y,theta:u}},g9=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:s,endAngle:o}=e,a=CCe(s,o),l=s+a,c=hn(t,r,i,s),u=hn(t,r,i,l),d=Yr(AG||(AG=id(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),c.x,c.y,i,i,+(Math.abs(a)>180),+(s>l),u.x,u.y);if(n>0){var p=hn(t,r,n,s),f=hn(t,r,n,l);d+=Yr(_G||(_G=id(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),f.x,f.y,n,n,+(Math.abs(a)>180),+(s<=l),p.x,p.y)}else d+=Yr(DG||(DG=id(["L ",","," Z"])),t,r);return d},wCe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:a,startAngle:l,endAngle:c}=e,u=In(c-l),{circleTangency:d,lineTangency:p,theta:f}=jC({cx:t,cy:r,radius:i,angle:l,sign:u,cornerRadius:s,cornerIsExternal:a}),{circleTangency:m,lineTangency:y,theta:C}=jC({cx:t,cy:r,radius:i,angle:c,sign:-u,cornerRadius:s,cornerIsExternal:a}),w=a?Math.abs(l-c):Math.abs(l-c)-f-C;if(w<0)return o?Yr(kG||(kG=id(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),p.x,p.y,s,s,s*2,s,s,-s*2):g9({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:l,endAngle:c});var b=Yr(IG||(IG=id(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),p.x,p.y,s,s,+(u<0),d.x,d.y,i,i,+(w>180),+(u<0),m.x,m.y,s,s,+(u<0),y.x,y.y);if(n>0){var{circleTangency:x,lineTangency:E,theta:I}=jC({cx:t,cy:r,radius:n,angle:l,sign:u,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),{circleTangency:k,lineTangency:P,theta:A}=jC({cx:t,cy:r,radius:n,angle:c,sign:-u,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),D=a?Math.abs(l-c):Math.abs(l-c)-I-A;if(D<0&&s===0)return"".concat(b,"L").concat(t,",").concat(r,"Z");b+=Yr(NG||(NG=id(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),P.x,P.y,s,s,+(u<0),k.x,k.y,n,n,+(D>180),+(u>0),x.x,x.y,s,s,+(u<0),E.x,E.y)}else b+=Yr(MG||(MG=id(["L",",","Z"])),t,r);return b},bCe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},m9=e=>{var t=gn(e,bCe),{cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u,className:d}=t;if(s<i||c===u)return null;var p=er("recharts-sector",d),f=s-i,m=ai(o,f,0,!0),y;return m>0&&Math.abs(c-u)<360?y=wCe({cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:Math.min(m,f/2),forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u}):y=g9({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:c,endAngle:u}),v.createElement("path",a_({},_i(t),{className:p,d:y}))};function SCe(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(N5(t)){if(e==="centric"){var{cx:n,cy:i,innerRadius:s,outerRadius:o,angle:a}=t,l=hn(n,i,s,a),c=hn(n,i,o,a);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return f9(t)}}var v9={},y9={},C9={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$I;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(C9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C9;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(y9);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UI,r=y9;function n(i,s,o){o&&typeof o!="number"&&t.isIterateeCall(i,s,o)&&(s=o=void 0),i=r.toFinite(i),s===void 0?(s=i,i=0):s=r.toFinite(s),o=o===void 0?i<s?1:-1:r.toFinite(o);const a=Math.max(Math.ceil((s-i)/(o||1)),0),l=new Array(a);for(let c=0;c<a;c++)l[c]=i,i+=o;return l}e.range=n})(v9);var xCe=v9.range;const w9=lo(xCe);function Kc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ECe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function o1(e){let t,r,n;e.length!==2?(t=Kc,r=(a,l)=>Kc(e(a),l),n=(a,l)=>e(a)-l):(t=e===Kc||e===ECe?e:PCe,r=e,n=e);function i(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const d=c+u>>>1;r(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const d=c+u>>>1;r(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function o(a,l,c=0,u=a.length){const d=i(a,l,c,u-1);return d>c&&n(a[d-1],l)>-n(a[d],l)?d-1:d}return{left:i,center:o,right:s}}function PCe(){return 0}function b9(e){return e===null?NaN:+e}function*RCe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const TCe=o1(Kc),My=TCe.right;o1(b9).center;class OG extends Map{constructor(t,r=DCe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(FG(this,t))}has(t){return super.has(FG(this,t))}set(t,r){return super.set(ACe(this,t),r)}delete(t){return super.delete(_Ce(this,t))}}function FG({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function ACe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function _Ce({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function DCe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function kCe(e=Kc){if(e===Kc)return S9;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function S9(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const ICe=Math.sqrt(50),NCe=Math.sqrt(10),MCe=Math.sqrt(2);function Ob(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),o=s>=ICe?10:s>=NCe?5:s>=MCe?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=r&&r<2?Ob(e,t,r*2):[a,l,c]}function l_(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,s,o]=n?Ob(t,e,r):Ob(e,t,r);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(n)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function c_(e,t,r){return t=+t,e=+e,r=+r,Ob(e,t,r)[2]}function u_(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?c_(t,e,r):c_(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function LG(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function GG(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function x9(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?S9:kCe(i);n>r;){if(n-r>600){const l=n-r+1,c=t-r+1,u=Math.log(l),d=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),f=Math.max(r,Math.floor(t-c*d/l+p)),m=Math.min(n,Math.floor(t+(l-c)*d/l+p));x9(e,t,f,m,i)}const s=e[t];let o=r,a=n;for(Sg(e,r,t),i(e[n],s)>0&&Sg(e,r,n);o<a;){for(Sg(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[r],s)===0?Sg(e,r,a):(++a,Sg(e,a,n)),a<=t&&(r=a+1),t<=a&&(n=a-1)}return e}function Sg(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function OCe(e,t,r){if(e=Float64Array.from(RCe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return GG(e);if(t>=1)return LG(e);var n,i=(n-1)*t,s=Math.floor(i),o=LG(x9(e,s).subarray(0,s+1)),a=GG(e.subarray(s+1));return o+(a-o)*(i-s)}}function FCe(e,t,r=b9){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,s=Math.floor(i),o=+r(e[s],s,e),a=+r(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function LCe(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(i);++n<i;)s[n]=e+n*r;return s}function po(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Wl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const d_=Symbol("implicit");function a1(){var e=new OG,t=[],r=[],n=d_;function i(s){let o=e.get(s);if(o===void 0){if(n!==d_)return n;e.set(s,o=t.push(s)-1)}return r[o%r.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new OG;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return a1(t,r).unknown(n)},po.apply(i,arguments),i}function l1(){var e=a1().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,s,o,a=!1,l=0,c=0,u=.5;delete e.unknown;function d(){var p=t().length,f=i<n,m=f?i:n,y=f?n:i;s=(y-m)/Math.max(1,p-l+c*2),a&&(s=Math.floor(s)),m+=(y-m-s*(p-l))*u,o=s*(1-l),a&&(m=Math.round(m),o=Math.round(o));var C=LCe(p).map(function(w){return m+s*w});return r(f?C.reverse():C)}return e.domain=function(p){return arguments.length?(t(p),d()):t()},e.range=function(p){return arguments.length?([n,i]=p,n=+n,i=+i,d()):[n,i]},e.rangeRound=function(p){return[n,i]=p,n=+n,i=+i,a=!0,d()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(p){return arguments.length?(a=!!p,d()):a},e.padding=function(p){return arguments.length?(l=Math.min(1,c=+p),d()):l},e.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),d()):l},e.paddingOuter=function(p){return arguments.length?(c=+p,d()):c},e.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),d()):u},e.copy=function(){return l1(t(),[n,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},po.apply(d(),arguments)}function E9(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return E9(t())},e}function GCe(){return E9(l1.apply(null,arguments).paddingInner(1))}function c1(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function P9(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Oy(){}var Lv=.7,Fb=1/Lv,Sp="\\s*([+-]?\\d+)\\s*",Gv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ia="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jCe=/^#([0-9a-f]{3,8})$/,BCe=new RegExp(`^rgb\\(${Sp},${Sp},${Sp}\\)$`),VCe=new RegExp(`^rgb\\(${Ia},${Ia},${Ia}\\)$`),HCe=new RegExp(`^rgba\\(${Sp},${Sp},${Sp},${Gv}\\)$`),zCe=new RegExp(`^rgba\\(${Ia},${Ia},${Ia},${Gv}\\)$`),$Ce=new RegExp(`^hsl\\(${Gv},${Ia},${Ia}\\)$`),UCe=new RegExp(`^hsla\\(${Gv},${Ia},${Ia},${Gv}\\)$`),jG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};c1(Oy,jv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:BG,formatHex:BG,formatHex8:WCe,formatHsl:KCe,formatRgb:VG,toString:VG});function BG(){return this.rgb().formatHex()}function WCe(){return this.rgb().formatHex8()}function KCe(){return R9(this).formatHsl()}function VG(){return this.rgb().formatRgb()}function jv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=jCe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?HG(t):r===3?new Ji(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?BC(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?BC(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=BCe.exec(e))?new Ji(t[1],t[2],t[3],1):(t=VCe.exec(e))?new Ji(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=HCe.exec(e))?BC(t[1],t[2],t[3],t[4]):(t=zCe.exec(e))?BC(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=$Ce.exec(e))?UG(t[1],t[2]/100,t[3]/100,1):(t=UCe.exec(e))?UG(t[1],t[2]/100,t[3]/100,t[4]):jG.hasOwnProperty(e)?HG(jG[e]):e==="transparent"?new Ji(NaN,NaN,NaN,0):null}function HG(e){return new Ji(e>>16&255,e>>8&255,e&255,1)}function BC(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ji(e,t,r,n)}function qCe(e){return e instanceof Oy||(e=jv(e)),e?(e=e.rgb(),new Ji(e.r,e.g,e.b,e.opacity)):new Ji}function h_(e,t,r,n){return arguments.length===1?qCe(e):new Ji(e,t,r,n??1)}function Ji(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}c1(Ji,h_,P9(Oy,{brighter(e){return e=e==null?Fb:Math.pow(Fb,e),new Ji(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Lv:Math.pow(Lv,e),new Ji(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ji(Pd(this.r),Pd(this.g),Pd(this.b),Lb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zG,formatHex:zG,formatHex8:YCe,formatRgb:$G,toString:$G}));function zG(){return`#${sd(this.r)}${sd(this.g)}${sd(this.b)}`}function YCe(){return`#${sd(this.r)}${sd(this.g)}${sd(this.b)}${sd((isNaN(this.opacity)?1:this.opacity)*255)}`}function $G(){const e=Lb(this.opacity);return`${e===1?"rgb(":"rgba("}${Pd(this.r)}, ${Pd(this.g)}, ${Pd(this.b)}${e===1?")":`, ${e})`}`}function Lb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Pd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function sd(e){return e=Pd(e),(e<16?"0":"")+e.toString(16)}function UG(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Lo(e,t,r,n)}function R9(e){if(e instanceof Lo)return new Lo(e.h,e.s,e.l,e.opacity);if(e instanceof Oy||(e=jv(e)),!e)return new Lo;if(e instanceof Lo)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(r-n)/a+(r<n)*6:r===s?o=(n-t)/a+2:o=(t-r)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Lo(o,a,l,e.opacity)}function QCe(e,t,r,n){return arguments.length===1?R9(e):new Lo(e,t,r,n??1)}function Lo(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}c1(Lo,QCe,P9(Oy,{brighter(e){return e=e==null?Fb:Math.pow(Fb,e),new Lo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Lv:Math.pow(Lv,e),new Lo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Ji(oR(e>=240?e-240:e+120,i,n),oR(e,i,n),oR(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Lo(WG(this.h),VC(this.s),VC(this.l),Lb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Lb(this.opacity);return`${e===1?"hsl(":"hsla("}${WG(this.h)}, ${VC(this.s)*100}%, ${VC(this.l)*100}%${e===1?")":`, ${e})`}`}}));function WG(e){return e=(e||0)%360,e<0?e+360:e}function VC(e){return Math.max(0,Math.min(1,e||0))}function oR(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const u1=e=>()=>e;function XCe(e,t){return function(r){return e+r*t}}function ZCe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function JCe(e){return(e=+e)==1?T9:function(t,r){return r-t?ZCe(t,r,e):u1(isNaN(t)?r:t)}}function T9(e,t){var r=t-e;return r?XCe(e,r):u1(isNaN(e)?t:e)}const KG=function e(t){var r=JCe(t);function n(i,s){var o=r((i=h_(i)).r,(s=h_(s)).r),a=r(i.g,s.g),l=r(i.b,s.b),c=T9(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return n.gamma=e,n}(1);function e0e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=e[i]*(1-s)+t[i]*s;return n}}function t0e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function r0e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)i[o]=$f(e[o],t[o]);for(;o<r;++o)s[o]=t[o];return function(a){for(o=0;o<n;++o)s[o]=i[o](a);return s}}function n0e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Gb(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function i0e(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=$f(e[i],t[i]):n[i]=t[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var p_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aR=new RegExp(p_.source,"g");function s0e(e){return function(){return e}}function o0e(e){return function(t){return e(t)+""}}function a0e(e,t){var r=p_.lastIndex=aR.lastIndex=0,n,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(n=p_.exec(e))&&(i=aR.exec(t));)(s=i.index)>r&&(s=t.slice(r,s),a[o]?a[o]+=s:a[++o]=s),(n=n[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Gb(n,i)})),r=aR.lastIndex;return r<t.length&&(s=t.slice(r),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?o0e(l[0].x):s0e(t):(t=l.length,function(c){for(var u=0,d;u<t;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function $f(e,t){var r=typeof t,n;return t==null||r==="boolean"?u1(t):(r==="number"?Gb:r==="string"?(n=jv(t))?(t=n,KG):a0e:t instanceof jv?KG:t instanceof Date?n0e:t0e(t)?e0e:Array.isArray(t)?r0e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?i0e:Gb)(e,t)}function d1(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function l0e(e,t){t===void 0&&(t=e,e=$f);for(var r=0,n=t.length-1,i=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(i,i=t[++r]);return function(o){var a=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[a](o-a)}}function c0e(e){return function(){return e}}function jb(e){return+e}var qG=[0,1];function Si(e){return e}function f_(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:c0e(isNaN(t)?NaN:.5)}function u0e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function d0e(e,t,r){var n=e[0],i=e[1],s=t[0],o=t[1];return i<n?(n=f_(i,n),s=r(o,s)):(n=f_(n,i),s=r(s,o)),function(a){return s(n(a))}}function h0e(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),s=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)i[o]=f_(e[o],e[o+1]),s[o]=r(t[o],t[o+1]);return function(a){var l=My(e,a,1,n)-1;return s[l](i[l](a))}}function Fy(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Kx(){var e=qG,t=qG,r=$f,n,i,s,o=Si,a,l,c;function u(){var p=Math.min(e.length,t.length);return o!==Si&&(o=u0e(e[0],e[p-1])),a=p>2?h0e:d0e,l=c=null,d}function d(p){return p==null||isNaN(p=+p)?s:(l||(l=a(e.map(n),t,r)))(n(o(p)))}return d.invert=function(p){return o(i((c||(c=a(t,e.map(n),Gb)))(p)))},d.domain=function(p){return arguments.length?(e=Array.from(p,jb),u()):e.slice()},d.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},d.rangeRound=function(p){return t=Array.from(p),r=d1,u()},d.clamp=function(p){return arguments.length?(o=p?!0:Si,u()):o!==Si},d.interpolate=function(p){return arguments.length?(r=p,u()):r},d.unknown=function(p){return arguments.length?(s=p,d):s},function(p,f){return n=p,i=f,u()}}function h1(){return Kx()(Si,Si)}function p0e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Bb(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function pf(e){return e=Bb(Math.abs(e)),e?e[1]:NaN}function f0e(e,t){return function(r,n){for(var i=r.length,s=[],o=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),s.push(r.substring(i-=a,i+a)),!((l+=a+1)>n));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function g0e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var m0e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bv(e){if(!(t=m0e.exec(e)))throw new Error("invalid format: "+e);var t;return new p1({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Bv.prototype=p1.prototype;function p1(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}p1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function v0e(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var Vb;function y0e(e,t){var r=Bb(e,t);if(!r)return Vb=void 0,e.toPrecision(t);var n=r[0],i=r[1],s=i-(Vb=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Bb(e,Math.max(0,t+s-1))[0]}function YG(e,t){var r=Bb(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const QG={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:p0e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>YG(e*100,t),r:YG,s:y0e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function XG(e){return e}var ZG=Array.prototype.map,JG=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function C0e(e){var t=e.grouping===void 0||e.thousands===void 0?XG:f0e(ZG.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?XG:g0e(ZG.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(d,p){d=Bv(d);var f=d.fill,m=d.align,y=d.sign,C=d.symbol,w=d.zero,b=d.width,x=d.comma,E=d.precision,I=d.trim,k=d.type;k==="n"?(x=!0,k="g"):QG[k]||(E===void 0&&(E=12),I=!0,k="g"),(w||f==="0"&&m==="=")&&(w=!0,f="0",m="=");var P=(p&&p.prefix!==void 0?p.prefix:"")+(C==="$"?r:C==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():""),A=(C==="$"?n:/[%p]/.test(k)?o:"")+(p&&p.suffix!==void 0?p.suffix:""),D=QG[k],L=/[defgprs%]/.test(k);E=E===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function M(T){var O=P,Q=A,X,B,W;if(k==="c")Q=D(T)+Q,T="";else{T=+T;var ne=T<0||1/T<0;if(T=isNaN(T)?l:D(Math.abs(T),E),I&&(T=v0e(T)),ne&&+T==0&&y!=="+"&&(ne=!1),O=(ne?y==="("?y:a:y==="-"||y==="("?"":y)+O,Q=(k==="s"&&!isNaN(T)&&Vb!==void 0?JG[8+Vb/3]:"")+Q+(ne&&y==="("?")":""),L){for(X=-1,B=T.length;++X<B;)if(W=T.charCodeAt(X),48>W||W>57){Q=(W===46?i+T.slice(X+1):T.slice(X))+Q,T=T.slice(0,X);break}}}x&&!w&&(T=t(T,1/0));var J=O.length+T.length+Q.length,ye=J<b?new Array(b-J+1).join(f):"";switch(x&&w&&(T=t(ye+T,ye.length?b-Q.length:1/0),ye=""),m){case"<":T=O+T+Q+ye;break;case"=":T=O+ye+T+Q;break;case"^":T=ye.slice(0,J=ye.length>>1)+O+T+Q+ye.slice(J);break;default:T=ye+O+T+Q;break}return s(T)}return M.toString=function(){return d+""},M}function u(d,p){var f=Math.max(-8,Math.min(8,Math.floor(pf(p)/3)))*3,m=Math.pow(10,-f),y=c((d=Bv(d),d.type="f",d),{suffix:JG[8+f/3]});return function(C){return y(m*C)}}return{format:c,formatPrefix:u}}var HC,f1,A9;w0e({thousands:",",grouping:[3],currency:["$",""]});function w0e(e){return HC=C0e(e),f1=HC.format,A9=HC.formatPrefix,HC}function b0e(e){return Math.max(0,-pf(Math.abs(e)))}function S0e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pf(t)/3)))*3-pf(Math.abs(e)))}function x0e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,pf(t)-pf(e))+1}function _9(e,t,r,n){var i=u_(e,t,r),s;switch(n=Bv(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=S0e(i,o))&&(n.precision=s),A9(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=x0e(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=b0e(i))&&(n.precision=s-(n.type==="%")*2);break}}return f1(n)}function Pu(e){var t=e.domain;return e.ticks=function(r){var n=t();return l_(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return _9(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,s=n.length-1,o=n[i],a=n[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);u-- >0;){if(c=c_(o,a,r),c===l)return n[i]=o,n[s]=a,t(n);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function D9(){var e=h1();return e.copy=function(){return Fy(e,D9())},po.apply(e,arguments),Pu(e)}function k9(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,jb),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return k9(e).unknown(t)},e=arguments.length?Array.from(e,jb):[0,1],Pu(r)}function I9(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],s=e[n],o;return s<i&&(o=r,r=n,n=o,o=i,i=s,s=o),e[r]=t.floor(i),e[n]=t.ceil(s),e}function ej(e){return Math.log(e)}function tj(e){return Math.exp(e)}function E0e(e){return-Math.log(-e)}function P0e(e){return-Math.exp(-e)}function R0e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function T0e(e){return e===10?R0e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function A0e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function rj(e){return(t,r)=>-e(-t,r)}function g1(e){const t=e(ej,tj),r=t.domain;let n=10,i,s;function o(){return i=A0e(n),s=T0e(n),r()[0]<0?(i=rj(i),s=rj(s),e(E0e,P0e)):e(ej,tj),t}return t.base=function(a){return arguments.length?(n=+a,o()):n},t.domain=function(a){return arguments.length?(r(a),o()):r()},t.ticks=a=>{const l=r();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let p=i(c),f=i(u),m,y;const C=a==null?10:+a;let w=[];if(!(n%1)&&f-p<C){if(p=Math.floor(p),f=Math.ceil(f),c>0){for(;p<=f;++p)for(m=1;m<n;++m)if(y=p<0?m/s(-p):m*s(p),!(y<c)){if(y>u)break;w.push(y)}}else for(;p<=f;++p)for(m=n-1;m>=1;--m)if(y=p>0?m/s(-p):m*s(p),!(y<c)){if(y>u)break;w.push(y)}w.length*2<C&&(w=l_(c,u,C))}else w=l_(p,f,Math.min(f-p,C)).map(s);return d?w.reverse():w},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=Bv(l)).precision==null&&(l.trim=!0),l=f1(l)),a===1/0)return l;const c=Math.max(1,n*a/t.ticks().length);return u=>{let d=u/s(Math.round(i(u)));return d*n<n-.5&&(d*=n),d<=c?l(u):""}},t.nice=()=>r(I9(r(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function N9(){const e=g1(Kx()).domain([1,10]);return e.copy=()=>Fy(e,N9()).base(e.base()),po.apply(e,arguments),e}function nj(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ij(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function m1(e){var t=1,r=e(nj(t),ij(t));return r.constant=function(n){return arguments.length?e(nj(t=+n),ij(t)):t},Pu(r)}function M9(){var e=m1(Kx());return e.copy=function(){return Fy(e,M9()).constant(e.constant())},po.apply(e,arguments)}function sj(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function _0e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function D0e(e){return e<0?-e*e:e*e}function v1(e){var t=e(Si,Si),r=1;function n(){return r===1?e(Si,Si):r===.5?e(_0e,D0e):e(sj(r),sj(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},Pu(t)}function y1(){var e=v1(Kx());return e.copy=function(){return Fy(e,y1()).exponent(e.exponent())},po.apply(e,arguments),e}function k0e(){return y1.apply(null,arguments).exponent(.5)}function oj(e){return Math.sign(e)*e*e}function I0e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function O9(){var e=h1(),t=[0,1],r=!1,n;function i(s){var o=I0e(e(s));return isNaN(o)?n:r?Math.round(o):o}return i.invert=function(s){return e.invert(oj(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,jb)).map(oj)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return O9(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},po.apply(i,arguments),Pu(i)}function F9(){var e=[],t=[],r=[],n;function i(){var o=0,a=Math.max(1,t.length);for(r=new Array(a-1);++o<a;)r[o-1]=FCe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?n:t[My(r,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?r[a-1]:e[0],a<r.length?r[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Kc),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return F9().domain(e).range(t).unknown(n)},po.apply(s,arguments)}function L9(){var e=0,t=1,r=1,n=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[My(n,l,0,r)]:s}function a(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},o.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,n[0]]:c>=r?[n[r-1],t]:[n[c-1],n[c]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return L9().domain([e,t]).range(i).unknown(s)},po.apply(Pu(o),arguments)}function G9(){var e=[.5],t=[0,1],r,n=1;function i(s){return s!=null&&s<=s?t[My(e,s,0,n)]:r}return i.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return G9().domain(e).range(t).unknown(r)},po.apply(i,arguments)}const lR=new Date,cR=new Date;function xn(e,t,r,n){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),t(s,a),e(s);while(c<s&&s<o);return l},i.filter=s=>xn(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),r&&(i.count=(s,o)=>(lR.setTime(+s),cR.setTime(+o),e(lR),e(cR),Math.floor(r(lR,cR))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?o=>n(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Hb=xn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Hb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?xn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Hb);Hb.range;const dl=1e3,Xs=dl*60,hl=Xs*60,kl=hl*24,C1=kl*7,aj=kl*30,uR=kl*365,od=xn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*dl)},(e,t)=>(t-e)/dl,e=>e.getUTCSeconds());od.range;const w1=xn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*dl)},(e,t)=>{e.setTime(+e+t*Xs)},(e,t)=>(t-e)/Xs,e=>e.getMinutes());w1.range;const b1=xn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Xs)},(e,t)=>(t-e)/Xs,e=>e.getUTCMinutes());b1.range;const S1=xn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*dl-e.getMinutes()*Xs)},(e,t)=>{e.setTime(+e+t*hl)},(e,t)=>(t-e)/hl,e=>e.getHours());S1.range;const x1=xn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*hl)},(e,t)=>(t-e)/hl,e=>e.getUTCHours());x1.range;const Ly=xn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Xs)/kl,e=>e.getDate()-1);Ly.range;const qx=xn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/kl,e=>e.getUTCDate()-1);qx.range;const j9=xn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/kl,e=>Math.floor(e/kl));j9.range;function Sh(e){return xn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Xs)/C1)}const Yx=Sh(0),zb=Sh(1),N0e=Sh(2),M0e=Sh(3),ff=Sh(4),O0e=Sh(5),F0e=Sh(6);Yx.range;zb.range;N0e.range;M0e.range;ff.range;O0e.range;F0e.range;function xh(e){return xn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/C1)}const Qx=xh(0),$b=xh(1),L0e=xh(2),G0e=xh(3),gf=xh(4),j0e=xh(5),B0e=xh(6);Qx.range;$b.range;L0e.range;G0e.range;gf.range;j0e.range;B0e.range;const E1=xn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());E1.range;const P1=xn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());P1.range;const Il=xn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Il.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Il.range;const Nl=xn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Nl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Nl.range;function B9(e,t,r,n,i,s){const o=[[od,1,dl],[od,5,5*dl],[od,15,15*dl],[od,30,30*dl],[s,1,Xs],[s,5,5*Xs],[s,15,15*Xs],[s,30,30*Xs],[i,1,hl],[i,3,3*hl],[i,6,6*hl],[i,12,12*hl],[n,1,kl],[n,2,2*kl],[r,1,C1],[t,1,aj],[t,3,3*aj],[e,1,uR]];function a(c,u,d){const p=u<c;p&&([c,u]=[u,c]);const f=d&&typeof d.range=="function"?d:l(c,u,d),m=f?f.range(c,+u+1):[];return p?m.reverse():m}function l(c,u,d){const p=Math.abs(u-c)/d,f=o1(([,,C])=>C).right(o,p);if(f===o.length)return e.every(u_(c/uR,u/uR,d));if(f===0)return Hb.every(Math.max(u_(c,u,d),1));const[m,y]=o[p/o[f-1][2]<o[f][2]/p?f-1:f];return m.every(y)}return[a,l]}const[V0e,H0e]=B9(Nl,P1,Qx,j9,x1,b1),[z0e,$0e]=B9(Il,E1,Yx,Ly,S1,w1);function dR(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function hR(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function xg(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function U0e(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=Eg(i),u=Pg(i),d=Eg(s),p=Pg(s),f=Eg(o),m=Pg(o),y=Eg(a),C=Pg(a),w=Eg(l),b=Pg(l),x={a:W,A:ne,b:J,B:ye,c:null,d:pj,e:pj,f:fwe,g:Ewe,G:Rwe,H:dwe,I:hwe,j:pwe,L:V9,m:gwe,M:mwe,p:Pe,q:ue,Q:mj,s:vj,S:vwe,u:ywe,U:Cwe,V:wwe,w:bwe,W:Swe,x:null,X:null,y:xwe,Y:Pwe,Z:Twe,"%":gj},E={a:Z,A:Ve,b:ve,B:Ze,c:null,d:fj,e:fj,f:kwe,g:Vwe,G:zwe,H:Awe,I:_we,j:Dwe,L:z9,m:Iwe,M:Nwe,p:je,q:de,Q:mj,s:vj,S:Mwe,u:Owe,U:Fwe,V:Lwe,w:Gwe,W:jwe,x:null,X:null,y:Bwe,Y:Hwe,Z:$we,"%":gj},I={a:L,A:M,b:T,B:O,c:Q,d:dj,e:dj,f:awe,g:uj,G:cj,H:hj,I:hj,j:nwe,L:owe,m:rwe,M:iwe,p:D,q:twe,Q:cwe,s:uwe,S:swe,u:Q0e,U:X0e,V:Z0e,w:Y0e,W:J0e,x:X,X:B,y:uj,Y:cj,Z:ewe,"%":lwe};x.x=k(r,x),x.X=k(n,x),x.c=k(t,x),E.x=k(r,E),E.X=k(n,E),E.c=k(t,E);function k(q,le){return function(G){var H=[],ce=-1,te=0,ee=q.length,K,U,j;for(G instanceof Date||(G=new Date(+G));++ce<ee;)q.charCodeAt(ce)===37&&(H.push(q.slice(te,ce)),(U=lj[K=q.charAt(++ce)])!=null?K=q.charAt(++ce):U=K==="e"?" ":"0",(j=le[K])&&(K=j(G,U)),H.push(K),te=ce+1);return H.push(q.slice(te,ce)),H.join("")}}function P(q,le){return function(G){var H=xg(1900,void 0,1),ce=A(H,q,G+="",0),te,ee;if(ce!=G.length)return null;if("Q"in H)return new Date(H.Q);if("s"in H)return new Date(H.s*1e3+("L"in H?H.L:0));if(le&&!("Z"in H)&&(H.Z=0),"p"in H&&(H.H=H.H%12+H.p*12),H.m===void 0&&(H.m="q"in H?H.q:0),"V"in H){if(H.V<1||H.V>53)return null;"w"in H||(H.w=1),"Z"in H?(te=hR(xg(H.y,0,1)),ee=te.getUTCDay(),te=ee>4||ee===0?$b.ceil(te):$b(te),te=qx.offset(te,(H.V-1)*7),H.y=te.getUTCFullYear(),H.m=te.getUTCMonth(),H.d=te.getUTCDate()+(H.w+6)%7):(te=dR(xg(H.y,0,1)),ee=te.getDay(),te=ee>4||ee===0?zb.ceil(te):zb(te),te=Ly.offset(te,(H.V-1)*7),H.y=te.getFullYear(),H.m=te.getMonth(),H.d=te.getDate()+(H.w+6)%7)}else("W"in H||"U"in H)&&("w"in H||(H.w="u"in H?H.u%7:"W"in H?1:0),ee="Z"in H?hR(xg(H.y,0,1)).getUTCDay():dR(xg(H.y,0,1)).getDay(),H.m=0,H.d="W"in H?(H.w+6)%7+H.W*7-(ee+5)%7:H.w+H.U*7-(ee+6)%7);return"Z"in H?(H.H+=H.Z/100|0,H.M+=H.Z%100,hR(H)):dR(H)}}function A(q,le,G,H){for(var ce=0,te=le.length,ee=G.length,K,U;ce<te;){if(H>=ee)return-1;if(K=le.charCodeAt(ce++),K===37){if(K=le.charAt(ce++),U=I[K in lj?le.charAt(ce++):K],!U||(H=U(q,G,H))<0)return-1}else if(K!=G.charCodeAt(H++))return-1}return H}function D(q,le,G){var H=c.exec(le.slice(G));return H?(q.p=u.get(H[0].toLowerCase()),G+H[0].length):-1}function L(q,le,G){var H=f.exec(le.slice(G));return H?(q.w=m.get(H[0].toLowerCase()),G+H[0].length):-1}function M(q,le,G){var H=d.exec(le.slice(G));return H?(q.w=p.get(H[0].toLowerCase()),G+H[0].length):-1}function T(q,le,G){var H=w.exec(le.slice(G));return H?(q.m=b.get(H[0].toLowerCase()),G+H[0].length):-1}function O(q,le,G){var H=y.exec(le.slice(G));return H?(q.m=C.get(H[0].toLowerCase()),G+H[0].length):-1}function Q(q,le,G){return A(q,t,le,G)}function X(q,le,G){return A(q,r,le,G)}function B(q,le,G){return A(q,n,le,G)}function W(q){return o[q.getDay()]}function ne(q){return s[q.getDay()]}function J(q){return l[q.getMonth()]}function ye(q){return a[q.getMonth()]}function Pe(q){return i[+(q.getHours()>=12)]}function ue(q){return 1+~~(q.getMonth()/3)}function Z(q){return o[q.getUTCDay()]}function Ve(q){return s[q.getUTCDay()]}function ve(q){return l[q.getUTCMonth()]}function Ze(q){return a[q.getUTCMonth()]}function je(q){return i[+(q.getUTCHours()>=12)]}function de(q){return 1+~~(q.getUTCMonth()/3)}return{format:function(q){var le=k(q+="",x);return le.toString=function(){return q},le},parse:function(q){var le=P(q+="",!1);return le.toString=function(){return q},le},utcFormat:function(q){var le=k(q+="",E);return le.toString=function(){return q},le},utcParse:function(q){var le=P(q+="",!0);return le.toString=function(){return q},le}}}var lj={"-":"",_:" ",0:"0"},Fn=/^\s*\d+/,W0e=/^%/,K0e=/[\\^$*+?|[\]().{}]/g;function tr(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(t)+i:i)}function q0e(e){return e.replace(K0e,"\\$&")}function Eg(e){return new RegExp("^(?:"+e.map(q0e).join("|")+")","i")}function Pg(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Y0e(e,t,r){var n=Fn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Q0e(e,t,r){var n=Fn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function X0e(e,t,r){var n=Fn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Z0e(e,t,r){var n=Fn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function J0e(e,t,r){var n=Fn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function cj(e,t,r){var n=Fn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function uj(e,t,r){var n=Fn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function ewe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function twe(e,t,r){var n=Fn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function rwe(e,t,r){var n=Fn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function dj(e,t,r){var n=Fn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function nwe(e,t,r){var n=Fn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function hj(e,t,r){var n=Fn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function iwe(e,t,r){var n=Fn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function swe(e,t,r){var n=Fn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function owe(e,t,r){var n=Fn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function awe(e,t,r){var n=Fn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function lwe(e,t,r){var n=W0e.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function cwe(e,t,r){var n=Fn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function uwe(e,t,r){var n=Fn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function pj(e,t){return tr(e.getDate(),t,2)}function dwe(e,t){return tr(e.getHours(),t,2)}function hwe(e,t){return tr(e.getHours()%12||12,t,2)}function pwe(e,t){return tr(1+Ly.count(Il(e),e),t,3)}function V9(e,t){return tr(e.getMilliseconds(),t,3)}function fwe(e,t){return V9(e,t)+"000"}function gwe(e,t){return tr(e.getMonth()+1,t,2)}function mwe(e,t){return tr(e.getMinutes(),t,2)}function vwe(e,t){return tr(e.getSeconds(),t,2)}function ywe(e){var t=e.getDay();return t===0?7:t}function Cwe(e,t){return tr(Yx.count(Il(e)-1,e),t,2)}function H9(e){var t=e.getDay();return t>=4||t===0?ff(e):ff.ceil(e)}function wwe(e,t){return e=H9(e),tr(ff.count(Il(e),e)+(Il(e).getDay()===4),t,2)}function bwe(e){return e.getDay()}function Swe(e,t){return tr(zb.count(Il(e)-1,e),t,2)}function xwe(e,t){return tr(e.getFullYear()%100,t,2)}function Ewe(e,t){return e=H9(e),tr(e.getFullYear()%100,t,2)}function Pwe(e,t){return tr(e.getFullYear()%1e4,t,4)}function Rwe(e,t){var r=e.getDay();return e=r>=4||r===0?ff(e):ff.ceil(e),tr(e.getFullYear()%1e4,t,4)}function Twe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+tr(t/60|0,"0",2)+tr(t%60,"0",2)}function fj(e,t){return tr(e.getUTCDate(),t,2)}function Awe(e,t){return tr(e.getUTCHours(),t,2)}function _we(e,t){return tr(e.getUTCHours()%12||12,t,2)}function Dwe(e,t){return tr(1+qx.count(Nl(e),e),t,3)}function z9(e,t){return tr(e.getUTCMilliseconds(),t,3)}function kwe(e,t){return z9(e,t)+"000"}function Iwe(e,t){return tr(e.getUTCMonth()+1,t,2)}function Nwe(e,t){return tr(e.getUTCMinutes(),t,2)}function Mwe(e,t){return tr(e.getUTCSeconds(),t,2)}function Owe(e){var t=e.getUTCDay();return t===0?7:t}function Fwe(e,t){return tr(Qx.count(Nl(e)-1,e),t,2)}function $9(e){var t=e.getUTCDay();return t>=4||t===0?gf(e):gf.ceil(e)}function Lwe(e,t){return e=$9(e),tr(gf.count(Nl(e),e)+(Nl(e).getUTCDay()===4),t,2)}function Gwe(e){return e.getUTCDay()}function jwe(e,t){return tr($b.count(Nl(e)-1,e),t,2)}function Bwe(e,t){return tr(e.getUTCFullYear()%100,t,2)}function Vwe(e,t){return e=$9(e),tr(e.getUTCFullYear()%100,t,2)}function Hwe(e,t){return tr(e.getUTCFullYear()%1e4,t,4)}function zwe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?gf(e):gf.ceil(e),tr(e.getUTCFullYear()%1e4,t,4)}function $we(){return"+0000"}function gj(){return"%"}function mj(e){return+e}function vj(e){return Math.floor(+e/1e3)}var Ih,U9,W9;Uwe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Uwe(e){return Ih=U0e(e),U9=Ih.format,Ih.parse,W9=Ih.utcFormat,Ih.utcParse,Ih}function Wwe(e){return new Date(e)}function Kwe(e){return e instanceof Date?+e:+new Date(+e)}function R1(e,t,r,n,i,s,o,a,l,c){var u=h1(),d=u.invert,p=u.domain,f=c(".%L"),m=c(":%S"),y=c("%I:%M"),C=c("%I %p"),w=c("%a %d"),b=c("%b %d"),x=c("%B"),E=c("%Y");function I(k){return(l(k)<k?f:a(k)<k?m:o(k)<k?y:s(k)<k?C:n(k)<k?i(k)<k?w:b:r(k)<k?x:E)(k)}return u.invert=function(k){return new Date(d(k))},u.domain=function(k){return arguments.length?p(Array.from(k,Kwe)):p().map(Wwe)},u.ticks=function(k){var P=p();return e(P[0],P[P.length-1],k??10)},u.tickFormat=function(k,P){return P==null?I:c(P)},u.nice=function(k){var P=p();return(!k||typeof k.range!="function")&&(k=t(P[0],P[P.length-1],k??10)),k?p(I9(P,k)):u},u.copy=function(){return Fy(u,R1(e,t,r,n,i,s,o,a,l,c))},u}function qwe(){return po.apply(R1(z0e,$0e,Il,E1,Yx,Ly,S1,w1,od,U9).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ywe(){return po.apply(R1(V0e,H0e,Nl,P1,Qx,qx,x1,b1,od,W9).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Xx(){var e=0,t=1,r,n,i,s,o=Si,a=!1,l;function c(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(s(d)-r)*i,a?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([e,t]=d,r=s(e=+e),n=s(t=+t),i=r===n?0:1/(n-r),c):[e,t]},c.clamp=function(d){return arguments.length?(a=!!d,c):a},c.interpolator=function(d){return arguments.length?(o=d,c):o};function u(d){return function(p){var f,m;return arguments.length?([f,m]=p,o=d(f,m),c):[o(0),o(1)]}}return c.range=u($f),c.rangeRound=u(d1),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return s=d,r=d(e),n=d(t),i=r===n?0:1/(n-r),c}}function Ru(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function K9(){var e=Pu(Xx()(Si));return e.copy=function(){return Ru(e,K9())},Wl.apply(e,arguments)}function q9(){var e=g1(Xx()).domain([1,10]);return e.copy=function(){return Ru(e,q9()).base(e.base())},Wl.apply(e,arguments)}function Y9(){var e=m1(Xx());return e.copy=function(){return Ru(e,Y9()).constant(e.constant())},Wl.apply(e,arguments)}function T1(){var e=v1(Xx());return e.copy=function(){return Ru(e,T1()).exponent(e.exponent())},Wl.apply(e,arguments)}function Qwe(){return T1.apply(null,arguments).exponent(.5)}function Q9(){var e=[],t=Si;function r(n){if(n!=null&&!isNaN(n=+n))return t((My(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Kc),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>OCe(e,s/n))},r.copy=function(){return Q9(t).domain(e)},Wl.apply(r,arguments)}function Zx(){var e=0,t=.5,r=1,n=1,i,s,o,a,l,c=Si,u,d=!1,p;function f(y){return isNaN(y=+y)?p:(y=.5+((y=+u(y))-s)*(n*y<n*s?a:l),c(d?Math.max(0,Math.min(1,y)):y))}f.domain=function(y){return arguments.length?([e,t,r]=y,i=u(e=+e),s=u(t=+t),o=u(r=+r),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),n=s<i?-1:1,f):[e,t,r]},f.clamp=function(y){return arguments.length?(d=!!y,f):d},f.interpolator=function(y){return arguments.length?(c=y,f):c};function m(y){return function(C){var w,b,x;return arguments.length?([w,b,x]=C,c=l0e(y,[w,b,x]),f):[c(0),c(.5),c(1)]}}return f.range=m($f),f.rangeRound=m(d1),f.unknown=function(y){return arguments.length?(p=y,f):p},function(y){return u=y,i=y(e),s=y(t),o=y(r),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),n=s<i?-1:1,f}}function X9(){var e=Pu(Zx()(Si));return e.copy=function(){return Ru(e,X9())},Wl.apply(e,arguments)}function Z9(){var e=g1(Zx()).domain([.1,1,10]);return e.copy=function(){return Ru(e,Z9()).base(e.base())},Wl.apply(e,arguments)}function J9(){var e=m1(Zx());return e.copy=function(){return Ru(e,J9()).constant(e.constant())},Wl.apply(e,arguments)}function A1(){var e=v1(Zx());return e.copy=function(){return Ru(e,A1()).exponent(e.exponent())},Wl.apply(e,arguments)}function Xwe(){return A1.apply(null,arguments).exponent(.5)}const qg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:l1,scaleDiverging:X9,scaleDivergingLog:Z9,scaleDivergingPow:A1,scaleDivergingSqrt:Xwe,scaleDivergingSymlog:J9,scaleIdentity:k9,scaleImplicit:d_,scaleLinear:D9,scaleLog:N9,scaleOrdinal:a1,scalePoint:GCe,scalePow:y1,scaleQuantile:F9,scaleQuantize:L9,scaleRadial:O9,scaleSequential:K9,scaleSequentialLog:q9,scaleSequentialPow:T1,scaleSequentialQuantile:Q9,scaleSequentialSqrt:Qwe,scaleSequentialSymlog:Y9,scaleSqrt:k0e,scaleSymlog:M9,scaleThreshold:G9,scaleTime:qwe,scaleUtc:Ywe,tickFormat:_9},Symbol.toStringTag,{value:"Module"}));var Kl=e=>e.chartData,Jx=ge([Kl],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),eK=(e,t,r,n)=>n?Jx(e):Kl(e),tK=(e,t,r)=>r?Jx(e):Kl(e);function Ml(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Bt(t)&&Bt(r))return!0}return!1}function yj(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function rK(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,i,s;if(Bt(r))i=r;else if(typeof r=="function")return;if(Bt(n))s=n;else if(typeof n=="function")return;var o=[i,s];if(Ml(o))return o}}function Zwe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Ml(n))return yj(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,o,a;if(i==="auto")t!=null&&(o=Math.min(...t));else if(Xe(i))o=i;else if(typeof i=="function")try{t!=null&&(o=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&F2.test(i)){var l=F2.exec(i);if(l==null||l[1]==null||t==null)o=void 0;else{var c=+l[1];o=t[0]-c}}else o=t==null?void 0:t[0];if(s==="auto")t!=null&&(a=Math.max(...t));else if(Xe(s))a=s;else if(typeof s=="function")try{t!=null&&(a=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&L2.test(s)){var u=L2.exec(s);if(u==null||u[1]==null||t==null)a=void 0;else{var d=+u[1];a=t[1]+d}}else a=t==null?void 0:t[1];var p=[o,a];if(Ml(p))return t==null?p:yj(p,t,r)}}}var Uf=1e9,Jwe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},D1,jr=!0,ao="[DecimalError] ",Rd=ao+"Invalid argument: ",_1=ao+"Exponent out of range: ",Wf=Math.floor,Uu=Math.pow,ebe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,bs,_n=1e7,Tr=7,nK=9007199254740991,Ub=Wf(nK/Tr),rt={};rt.absoluteValue=rt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};rt.comparedTo=rt.cmp=function(e){var t,r,n,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};rt.decimalPlaces=rt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Tr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};rt.dividedBy=rt.div=function(e){return ml(this,new this.constructor(e))};rt.dividedToIntegerBy=rt.idiv=function(e){var t=this,r=t.constructor;return mr(ml(t,new r(e),0,1),r.precision)};rt.equals=rt.eq=function(e){return!this.cmp(e)};rt.exponent=function(){return fn(this)};rt.greaterThan=rt.gt=function(e){return this.cmp(e)>0};rt.greaterThanOrEqualTo=rt.gte=function(e){return this.cmp(e)>=0};rt.isInteger=rt.isint=function(){return this.e>this.d.length-2};rt.isNegative=rt.isneg=function(){return this.s<0};rt.isPositive=rt.ispos=function(){return this.s>0};rt.isZero=function(){return this.s===0};rt.lessThan=rt.lt=function(e){return this.cmp(e)<0};rt.lessThanOrEqualTo=rt.lte=function(e){return this.cmp(e)<1};rt.logarithm=rt.log=function(e){var t,r=this,n=r.constructor,i=n.precision,s=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(bs))throw Error(ao+"NaN");if(r.s<1)throw Error(ao+(r.s?"NaN":"-Infinity"));return r.eq(bs)?new n(0):(jr=!1,t=ml(Vv(r,s),Vv(e,s),s),jr=!0,mr(t,i))};rt.minus=rt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?oK(t,e):iK(t,(e.s=-e.s,e))};rt.modulo=rt.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(ao+"NaN");return r.s?(jr=!1,t=ml(r,e,0,1).times(e),jr=!0,r.minus(t)):mr(new n(r),i)};rt.naturalExponential=rt.exp=function(){return sK(this)};rt.naturalLogarithm=rt.ln=function(){return Vv(this)};rt.negated=rt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};rt.plus=rt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?iK(t,e):oK(t,(e.s=-e.s,e))};rt.precision=rt.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Rd+e);if(t=fn(i)+1,n=i.d.length-1,r=n*Tr+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};rt.squareRoot=rt.sqrt=function(){var e,t,r,n,i,s,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(ao+"NaN")}for(e=fn(a),jr=!1,i=Math.sqrt(+a),i==0||i==1/0?(t=xa(a.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Wf((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(i.toString()),r=l.precision,i=o=r+3;;)if(s=n,n=s.plus(ml(a,s,o+2)).times(.5),xa(s.d).slice(0,o)===(t=xa(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(mr(s,r+1,0),s.times(s).eq(a)){n=s;break}}else if(t!="9999")break;o+=4}return jr=!0,mr(n,r)};rt.times=rt.mul=function(e){var t,r,n,i,s,o,a,l,c,u=this,d=u.constructor,p=u.d,f=(e=new d(e)).d;if(!u.s||!e.s)return new d(0);for(e.s*=u.s,r=u.e+e.e,l=p.length,c=f.length,l<c&&(s=p,p=f,f=s,o=l,l=c,c=o),s=[],o=l+c,n=o;n--;)s.push(0);for(n=c;--n>=0;){for(t=0,i=l+n;i>n;)a=s[i]+f[n]*p[i-n-1]+t,s[i--]=a%_n|0,t=a/_n|0;s[i]=(s[i]+t)%_n|0}for(;!s[--o];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,jr?mr(e,d.precision):e};rt.toDecimalPlaces=rt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Va(e,0,Uf),t===void 0?t=n.rounding:Va(t,0,8),mr(r,e+fn(r)+1,t))};rt.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=rh(n,!0):(Va(e,0,Uf),t===void 0?t=i.rounding:Va(t,0,8),n=mr(new i(n),e+1,t),r=rh(n,!0,e+1)),r};rt.toFixed=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?rh(i):(Va(e,0,Uf),t===void 0?t=s.rounding:Va(t,0,8),n=mr(new s(i),e+fn(i)+1,t),r=rh(n.abs(),!1,e+fn(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};rt.toInteger=rt.toint=function(){var e=this,t=e.constructor;return mr(new t(e),fn(e)+1,t.rounding)};rt.toNumber=function(){return+this};rt.toPower=rt.pow=function(e){var t,r,n,i,s,o,a=this,l=a.constructor,c=12,u=+(e=new l(e));if(!e.s)return new l(bs);if(a=new l(a),!a.s){if(e.s<1)throw Error(ao+"Infinity");return a}if(a.eq(bs))return a;if(n=l.precision,e.eq(bs))return mr(a,n);if(t=e.e,r=e.d.length-1,o=t>=r,s=a.s,o){if((r=u<0?-u:u)<=nK){for(i=new l(bs),t=Math.ceil(n/Tr+4),jr=!1;r%2&&(i=i.times(a),wj(i.d,t)),r=Wf(r/2),r!==0;)a=a.times(a),wj(a.d,t);return jr=!0,e.s<0?new l(bs).div(i):mr(i,n)}}else if(s<0)throw Error(ao+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,a.s=1,jr=!1,i=e.times(Vv(a,n+c)),jr=!0,i=sK(i),i.s=s,i};rt.toPrecision=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?(r=fn(i),n=rh(i,r<=s.toExpNeg||r>=s.toExpPos)):(Va(e,1,Uf),t===void 0?t=s.rounding:Va(t,0,8),i=mr(new s(i),e,t),r=fn(i),n=rh(i,e<=r||r<=s.toExpNeg,e)),n};rt.toSignificantDigits=rt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Va(e,1,Uf),t===void 0?t=n.rounding:Va(t,0,8)),mr(new n(r),e,t)};rt.toString=rt.valueOf=rt.val=rt.toJSON=rt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=fn(e),r=e.constructor;return rh(e,t<=r.toExpNeg||t>=r.toExpPos)};function iK(e,t){var r,n,i,s,o,a,l,c,u=e.constructor,d=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),jr?mr(t,d):t;if(l=e.d,c=t.d,o=e.e,i=t.e,l=l.slice(),s=o-i,s){for(s<0?(n=l,s=-s,a=c.length):(n=c,i=o,a=l.length),o=Math.ceil(d/Tr),a=o>a?o+1:a+1,s>a&&(s=a,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(a=l.length,s=c.length,a-s<0&&(s=a,n=c,c=l,l=n),r=0;s;)r=(l[--s]=l[s]+c[s]+r)/_n|0,l[s]%=_n;for(r&&(l.unshift(r),++i),a=l.length;l[--a]==0;)l.pop();return t.d=l,t.e=i,jr?mr(t,d):t}function Va(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Rd+e)}function xa(e){var t,r,n,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,t=1;t<i;t++)n=e[t]+"",r=Tr-n.length,r&&(s+=fc(r)),s+=n;o=e[t],n=o+"",r=Tr-n.length,r&&(s+=fc(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var ml=function(){function e(n,i){var s,o=0,a=n.length;for(n=n.slice();a--;)s=n[a]*i+o,n[a]=s%_n|0,o=s/_n|0;return o&&n.unshift(o),n}function t(n,i,s,o){var a,l;if(s!=o)l=s>o?1:-1;else for(a=l=0;a<s;a++)if(n[a]!=i[a]){l=n[a]>i[a]?1:-1;break}return l}function r(n,i,s){for(var o=0;s--;)n[s]-=o,o=n[s]<i[s]?1:0,n[s]=o*_n+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,o){var a,l,c,u,d,p,f,m,y,C,w,b,x,E,I,k,P,A,D=n.constructor,L=n.s==i.s?1:-1,M=n.d,T=i.d;if(!n.s)return new D(n);if(!i.s)throw Error(ao+"Division by zero");for(l=n.e-i.e,P=T.length,I=M.length,f=new D(L),m=f.d=[],c=0;T[c]==(M[c]||0);)++c;if(T[c]>(M[c]||0)&&--l,s==null?b=s=D.precision:o?b=s+(fn(n)-fn(i))+1:b=s,b<0)return new D(0);if(b=b/Tr+2|0,c=0,P==1)for(u=0,T=T[0],b++;(c<I||u)&&b--;c++)x=u*_n+(M[c]||0),m[c]=x/T|0,u=x%T|0;else{for(u=_n/(T[0]+1)|0,u>1&&(T=e(T,u),M=e(M,u),P=T.length,I=M.length),E=P,y=M.slice(0,P),C=y.length;C<P;)y[C++]=0;A=T.slice(),A.unshift(0),k=T[0],T[1]>=_n/2&&++k;do u=0,a=t(T,y,P,C),a<0?(w=y[0],P!=C&&(w=w*_n+(y[1]||0)),u=w/k|0,u>1?(u>=_n&&(u=_n-1),d=e(T,u),p=d.length,C=y.length,a=t(d,y,p,C),a==1&&(u--,r(d,P<p?A:T,p))):(u==0&&(a=u=1),d=T.slice()),p=d.length,p<C&&d.unshift(0),r(y,d,C),a==-1&&(C=y.length,a=t(T,y,P,C),a<1&&(u++,r(y,P<C?A:T,C))),C=y.length):a===0&&(u++,y=[0]),m[c++]=u,a&&y[0]?y[C++]=M[E]||0:(y=[M[E]],C=1);while((E++<I||y[0]!==void 0)&&b--)}return m[0]||m.shift(),f.e=l,mr(f,o?s+fn(f)+1:s)}}();function sK(e,t){var r,n,i,s,o,a,l=0,c=0,u=e.constructor,d=u.precision;if(fn(e)>16)throw Error(_1+fn(e));if(!e.s)return new u(bs);for(jr=!1,a=d,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),c+=5;for(n=Math.log(Uu(2,c))/Math.LN10*2+5|0,a+=n,r=i=s=new u(bs),u.precision=a;;){if(i=mr(i.times(e),a),r=r.times(++l),o=s.plus(ml(i,r,a)),xa(o.d).slice(0,a)===xa(s.d).slice(0,a)){for(;c--;)s=mr(s.times(s),a);return u.precision=d,t==null?(jr=!0,mr(s,d)):s}s=o}}function fn(e){for(var t=e.e*Tr,r=e.d[0];r>=10;r/=10)t++;return t}function pR(e,t,r){if(t>e.LN10.sd())throw jr=!0,r&&(e.precision=r),Error(ao+"LN10 precision limit exceeded");return mr(new e(e.LN10),t)}function fc(e){for(var t="";e--;)t+="0";return t}function Vv(e,t){var r,n,i,s,o,a,l,c,u,d=1,p=10,f=e,m=f.d,y=f.constructor,C=y.precision;if(f.s<1)throw Error(ao+(f.s?"NaN":"-Infinity"));if(f.eq(bs))return new y(0);if(t==null?(jr=!1,c=C):c=t,f.eq(10))return t==null&&(jr=!0),pR(y,c);if(c+=p,y.precision=c,r=xa(m),n=r.charAt(0),s=fn(f),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)f=f.times(e),r=xa(f.d),n=r.charAt(0),d++;s=fn(f),n>1?(f=new y("0."+r),s++):f=new y(n+"."+r.slice(1))}else return l=pR(y,c+2,C).times(s+""),f=Vv(new y(n+"."+r.slice(1)),c-p).plus(l),y.precision=C,t==null?(jr=!0,mr(f,C)):f;for(a=o=f=ml(f.minus(bs),f.plus(bs),c),u=mr(f.times(f),c),i=3;;){if(o=mr(o.times(u),c),l=a.plus(ml(o,new y(i),c)),xa(l.d).slice(0,c)===xa(a.d).slice(0,c))return a=a.times(2),s!==0&&(a=a.plus(pR(y,c+2,C).times(s+""))),a=ml(a,new y(d),c),y.precision=C,t==null?(jr=!0,mr(a,C)):a;a=l,i+=2}}function Cj(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=Wf(r/Tr),e.d=[],n=(r+1)%Tr,r<0&&(n+=Tr),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=Tr;n<i;)e.d.push(+t.slice(n,n+=Tr));t=t.slice(n),n=Tr-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),jr&&(e.e>Ub||e.e<-Ub))throw Error(_1+r)}else e.s=0,e.e=0,e.d=[0];return e}function mr(e,t,r){var n,i,s,o,a,l,c,u,d=e.d;for(o=1,s=d[0];s>=10;s/=10)o++;if(n=t-o,n<0)n+=Tr,i=t,c=d[u=0];else{if(u=Math.ceil((n+1)/Tr),s=d.length,u>=s)return e;for(c=s=d[u],o=1;s>=10;s/=10)o++;n%=Tr,i=n-Tr+o}if(r!==void 0&&(s=Uu(10,o-i-1),a=c/s%10|0,l=t<0||d[u+1]!==void 0||c%s,l=r<4?(a||l)&&(r==0||r==(e.s<0?3:2)):a>5||a==5&&(r==4||l||r==6&&(n>0?i>0?c/Uu(10,o-i):0:d[u-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return l?(s=fn(e),d.length=1,t=t-s-1,d[0]=Uu(10,(Tr-t%Tr)%Tr),e.e=Wf(-t/Tr)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=u,s=1,u--):(d.length=u+1,s=Uu(10,Tr-n),d[u]=i>0?(c/Uu(10,o-i)%Uu(10,i)|0)*s:0),l)for(;;)if(u==0){(d[0]+=s)==_n&&(d[0]=1,++e.e);break}else{if(d[u]+=s,d[u]!=_n)break;d[u--]=0,s=1}for(n=d.length;d[--n]===0;)d.pop();if(jr&&(e.e>Ub||e.e<-Ub))throw Error(_1+fn(e));return e}function oK(e,t){var r,n,i,s,o,a,l,c,u,d,p=e.constructor,f=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),jr?mr(t,f):t;if(l=e.d,d=t.d,n=t.e,c=e.e,l=l.slice(),o=c-n,o){for(u=o<0,u?(r=l,o=-o,a=d.length):(r=d,n=c,a=l.length),i=Math.max(Math.ceil(f/Tr),a)+2,o>i&&(o=i,r.length=1),r.reverse(),i=o;i--;)r.push(0);r.reverse()}else{for(i=l.length,a=d.length,u=i<a,u&&(a=i),i=0;i<a;i++)if(l[i]!=d[i]){u=l[i]<d[i];break}o=0}for(u&&(r=l,l=d,d=r,t.s=-t.s),a=l.length,i=d.length-a;i>0;--i)l[a++]=0;for(i=d.length;i>o;){if(l[--i]<d[i]){for(s=i;s&&l[--s]===0;)l[s]=_n-1;--l[s],l[i]+=_n}l[i]-=d[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,jr?mr(t,f):t):new p(0)}function rh(e,t,r){var n,i=fn(e),s=xa(e.d),o=s.length;return t?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+fc(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+fc(-i-1)+s,r&&(n=r-o)>0&&(s+=fc(n))):i>=o?(s+=fc(i+1-o),r&&(n=r-i-1)>0&&(s=s+"."+fc(n))):((n=i+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(s+="."),s+=fc(n))),e.s<0?"-"+s:s}function wj(e,t){if(e.length>t)return e.length=t,!0}function aK(e){var t,r,n;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Rd+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return Cj(o,s.toString())}else if(typeof s!="string")throw Error(Rd+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,ebe.test(s))Cj(o,s);else throw Error(Rd+s)}if(i.prototype=rt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=aK,i.config=i.set=tbe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function tbe(e){if(!e||typeof e!="object")throw Error(ao+"Object expected");var t,r,n,i=["precision",1,Uf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(Wf(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(Rd+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Rd+r+": "+n);return this}var D1=aK(Jwe);bs=new D1(1);const lr=D1;function lK(e){var t;return e===0?t=1:t=Math.floor(new lr(e).abs().log(10).toNumber())+1,t}function cK(e,t,r){for(var n=new lr(e),i=0,s=[];n.lt(t)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var uK=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},dK=(e,t,r)=>{if(e.lte(0))return new lr(0);var n=lK(e.toNumber()),i=new lr(10).pow(n),s=e.div(i),o=n!==1?.05:.1,a=new lr(Math.ceil(s.div(o).toNumber())).add(r).mul(o),l=a.mul(i);return t?new lr(l.toNumber()):new lr(Math.ceil(l.toNumber()))},rbe=(e,t,r)=>{var n=new lr(1),i=new lr(e);if(!i.isint()&&r){var s=Math.abs(e);s<1?(n=new lr(10).pow(lK(e)-1),i=new lr(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new lr(Math.floor(e)))}else e===0?i=new lr(Math.floor((t-1)/2)):r||(i=new lr(Math.floor(e)));for(var o=Math.floor((t-1)/2),a=[],l=0;l<t;l++)a.push(i.add(new lr(l-o).mul(n)).toNumber());return a},hK=function(t,r,n,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new lr(0),tickMin:new lr(0),tickMax:new lr(0)};var o=dK(new lr(r).sub(t).div(n-1),i,s),a;t<=0&&r>=0?a=new lr(0):(a=new lr(t).add(r).div(2),a=a.sub(new lr(a).mod(o)));var l=Math.ceil(a.sub(t).div(o).toNumber()),c=Math.ceil(new lr(r).sub(a).div(o).toNumber()),u=l+c+1;return u>n?hK(t,r,n,i,s+1):(u<n&&(c=r>0?c+(n-u):c,l=r>0?l:l+(n-u)),{step:o,tickMin:a.sub(new lr(l).mul(o)),tickMax:a.add(new lr(c).mul(o))})},nbe=function(t){var[r,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),[a,l]=uK([r,n]);if(a===-1/0||l===1/0){var c=l===1/0?[a,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),l];return r>n?c.reverse():c}if(a===l)return rbe(a,i,s);var{step:u,tickMin:d,tickMax:p}=hK(a,l,o,s,0),f=cK(d,p.add(new lr(.1).mul(u)),u);return r>n?f.reverse():f},ibe=function(t,r){var[n,i]=t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,a]=uK([n,i]);if(o===-1/0||a===1/0)return[n,i];if(o===a)return[o];var l=Math.max(r,2),c=dK(new lr(a).sub(o).div(l-1),s,0),u=[...cK(new lr(o),new lr(a),c),a];return s===!1&&(u=u.map(d=>Math.round(d))),n>i?u.reverse():u},pK=e=>e.rootProps.maxBarSize,sbe=e=>e.rootProps.barGap,fK=e=>e.rootProps.barCategoryGap,obe=e=>e.rootProps.barSize,Gy=e=>e.rootProps.stackOffset,gK=e=>e.rootProps.reverseStackOrder,k1=e=>e.options.chartName,I1=e=>e.rootProps.syncId,mK=e=>e.rootProps.syncMethod,N1=e=>e.options.eventEmitter,abe=e=>e.rootProps.baseValue,pn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Fu={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},oa={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},eE=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t};function tE(e,t,r){if(r!=="auto")return r;if(e!=null)return za(e,t)?"category":"number"}function bj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Wb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bj(Object(r),!0).forEach(function(n){lbe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lbe(e,t,r){return(t=cbe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cbe(e){var t=ube(e,"string");return typeof t=="symbol"?t:t+""}function ube(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sj={allowDataOverflow:Fu.allowDataOverflow,allowDecimals:Fu.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Fu.angleAxisId,includeHidden:!1,name:void 0,reversed:Fu.reversed,scale:Fu.scale,tick:Fu.tick,tickCount:void 0,ticks:void 0,type:Fu.type,unit:void 0},xj={allowDataOverflow:oa.allowDataOverflow,allowDecimals:oa.allowDecimals,allowDuplicatedCategory:oa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:oa.radiusAxisId,includeHidden:oa.includeHidden,name:void 0,reversed:oa.reversed,scale:oa.scale,tick:oa.tick,tickCount:oa.tickCount,ticks:void 0,type:oa.type,unit:void 0},dbe=(e,t)=>{if(t!=null)return e.polarAxis.angleAxis[t]},M1=ge([dbe,Q6],(e,t)=>{var r;if(e!=null)return e;var n=(r=tE(t,"angleAxis",Sj.type))!==null&&r!==void 0?r:"category";return Wb(Wb({},Sj),{},{type:n})}),hbe=(e,t)=>e.polarAxis.radiusAxis[t],O1=ge([hbe,Q6],(e,t)=>{var r;if(e!=null)return e;var n=(r=tE(t,"radiusAxis",xj.type))!==null&&r!==void 0?r:"category";return Wb(Wb({},xj),{},{type:n})}),rE=e=>e.polarOptions,F1=ge([$l,Ul,Sn],p9),vK=ge([rE,F1],(e,t)=>{if(e!=null)return ai(e.innerRadius,t,0)}),yK=ge([rE,F1],(e,t)=>{if(e!=null)return ai(e.outerRadius,t,t*.8)}),pbe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},CK=ge([rE],pbe);ge([M1,CK],eE);var wK=ge([F1,vK,yK],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});ge([O1,wK],eE);var bK=ge([Zt,rE,vK,yK,$l,Ul],(e,t,r,n,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:a,startAngle:l,endAngle:c}=t;return{cx:ai(o,i,i/2),cy:ai(a,s,s/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:c,clockWise:!1}}}),Ur=(e,t)=>t,jy=(e,t,r)=>r;function nE(e){return e==null?void 0:e.id}function SK(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=r,o=new Map;return e.forEach(a=>{var l,c=(l=a.data)!==null&&l!==void 0?l:n;if(!(c==null||c.length===0)){var u=nE(a);c.forEach((d,p)=>{var f=s==null||i?p:String(hr(d,s,null)),m=hr(d,a.dataKey,0),y;o.has(f)?y=o.get(f):y={},Object.assign(y,{[u]:m}),o.set(f,y)})}}),Array.from(o.values())}function iE(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var sE=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function oE(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function fbe(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Ln=e=>{var t=Zt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Kf=e=>e.tooltip.settings.axisId;function gbe(e){if(e in qg)return qg[e]();var t="scale".concat(Ey(e));if(t in qg)return qg[t]()}function Ej(e){var t=e.ticks,r=e.bandwidth,n=e.range(),i=[Math.min(...n),Math.max(...n)];return{domain:()=>e.domain(),range:function(s){function o(){return s.apply(this,arguments)}return o.toString=function(){return s.toString()},o}(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(s){var o=i[0],a=i[1];return o<=a?s>=o&&s<=a:s>=a&&s<=o},bandwidth:r?()=>r.call(e):void 0,ticks:t?s=>t.call(e,s):void 0,map:(s,o)=>{var a=e(s);if(a!=null){if(e.bandwidth&&o!==null&&o!==void 0&&o.position){var l=e.bandwidth();switch(o.position){case"middle":a+=l/2;break;case"end":a+=l;break}}return a}}}}function Pj(e,t,r){if(typeof e=="function")return Ej(e.copy().domain(t).range(r));if(e!=null){var n=gbe(e);if(n!=null)return n.domain(t).range(r),Ej(n)}}var xK=(e,t)=>{if(t!=null)switch(e){case"linear":{if(!Ml(t)){for(var r,n,i=0;i<t.length;i++){var s=t[i];Bt(s)&&((r===void 0||s<r)&&(r=s),(n===void 0||s>n)&&(n=s))}return r!==void 0&&n!==void 0?[r,n]:void 0}return t}default:return t}};function Rj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Kb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rj(Object(r),!0).forEach(function(n){mbe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mbe(e,t,r){return(t=vbe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vbe(e){var t=ybe(e,"string");return typeof t=="symbol"?t:t+""}function ybe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var g_=[0,"auto"],Rn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},EK=(e,t)=>e.cartesianAxis.xAxis[t],ql=(e,t)=>{var r=EK(e,t);return r??Rn},Tn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:g_,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Ay},PK=(e,t)=>e.cartesianAxis.yAxis[t],Yl=(e,t)=>{var r=PK(e,t);return r??Tn},Cbe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},L1=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??Cbe},en=(e,t,r)=>{switch(t){case"xAxis":return ql(e,r);case"yAxis":return Yl(e,r);case"zAxis":return L1(e,r);case"angleAxis":return M1(e,r);case"radiusAxis":return O1(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},wbe=(e,t,r)=>{switch(t){case"xAxis":return ql(e,r);case"yAxis":return Yl(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},qf=(e,t,r)=>{switch(t){case"xAxis":return ql(e,r);case"yAxis":return Yl(e,r);case"angleAxis":return M1(e,r);case"radiusAxis":return O1(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},RK=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function G1(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var aE=e=>e.graphicalItems.cartesianItems,bbe=ge([Ur,jy],G1),j1=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),By=ge([aE,en,bbe],j1,{memoizeOptions:{resultEqualityCheck:oE}}),TK=ge([By],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(iE)),AK=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Sbe=ge([By],AK),B1=e=>e.map(t=>t.data).filter(Boolean).flat(1),xbe=ge([By],B1,{memoizeOptions:{resultEqualityCheck:oE}}),V1=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},H1=ge([xbe,eK],V1),z1=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:hr(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(i=>({value:hr(i,n)}))):e.map(n=>({value:n})),lE=ge([H1,en,By],z1);function _K(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function M0(e){if(ja(e)||e instanceof Date){var t=Number(e);if(Bt(t))return t}}function Tj(e){if(Array.isArray(e)){var t=[M0(e[0]),M0(e[1])];return Ml(t)?t:void 0}var r=M0(e);if(r!=null)return[r,r]}function Ol(e){return e.map(M0).filter(Zi)}function Ebe(e,t,r){return!r||typeof t!="number"||Zo(t)?[]:r.length?Ol(r.flatMap(n=>{var i=hr(e,n.dataKey),s,o;if(Array.isArray(i)?[s,o]=i:s=o=i,!(!Bt(s)||!Bt(o)))return[t-s,t+o]})):[]}var En=e=>{var t=Ln(e),r=Kf(e);return qf(e,t,r)},Vy=ge([En],e=>e==null?void 0:e.dataKey),Pbe=ge([TK,eK,En],SK),DK=(e,t,r,n)=>{var i={},s=t.reduce((o,a)=>{if(a.stackId==null)return o;var l=o[a.stackId];return l==null&&(l=[]),l.push(a),o[a.stackId]=l,o},i);return Object.fromEntries(Object.entries(s).map(o=>{var[a,l]=o,c=n?[...l].reverse():l,u=c.map(nE);return[a,{stackedData:eve(e,u,r),graphicalItems:c}]}))},qb=ge([Pbe,TK,Gy,gK],DK),kK=(e,t,r,n)=>{var{dataStartIndex:i,dataEndIndex:s}=t;if(n==null&&r!=="zAxis"){var o=ive(e,i,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},Rbe=ge([en],e=>e.allowDataOverflow),$1=e=>{var t;if(e==null||!("domain"in e))return g_;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=Ol(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:g_},U1=ge([en],$1),W1=ge([U1,Rbe],rK),Tbe=ge([qb,Kl,Ur,W1],kK,{memoizeOptions:{resultEqualityCheck:sE}}),cE=e=>e.errorBars,Abe=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>_K(r,n)),Yb=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var s=i.flat(),o=Math.min(...s),a=Math.max(...s);return[o,a]}},K1=(e,t,r,n,i)=>{var s,o;if(r.length>0&&e.forEach(a=>{r.forEach(l=>{var c,u,d=(c=n[l.id])===null||c===void 0?void 0:c.filter(w=>_K(i,w)),p=hr(a,(u=t.dataKey)!==null&&u!==void 0?u:l.dataKey),f=Ebe(a,p,d);if(f.length>=2){var m=Math.min(...f),y=Math.max(...f);(s==null||m<s)&&(s=m),(o==null||y>o)&&(o=y)}var C=Tj(p);C!=null&&(s=s==null?C[0]:Math.min(s,C[0]),o=o==null?C[1]:Math.max(o,C[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(a=>{var l=Tj(hr(a,t.dataKey));l!=null&&(s=s==null?l[0]:Math.min(s,l[0]),o=o==null?l[1]:Math.max(o,l[1]))}),Bt(s)&&Bt(o))return[s,o]},_be=ge([H1,en,Sbe,cE,Ur],K1,{memoizeOptions:{resultEqualityCheck:sE}});function Dbe(e){var{value:t}=e;if(ja(t)||t instanceof Date)return t}var kbe=(e,t,r)=>{var n=e.map(Dbe).filter(i=>i!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&D5(n))?w9(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},IK=e=>e.referenceElements.dots,Yf=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),Ibe=ge([IK,Ur,jy],Yf),NK=e=>e.referenceElements.areas,Nbe=ge([NK,Ur,jy],Yf),MK=e=>e.referenceElements.lines,Mbe=ge([MK,Ur,jy],Yf),OK=(e,t)=>{if(e!=null){var r=Ol(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},Obe=ge(Ibe,Ur,OK),FK=(e,t)=>{if(e!=null){var r=Ol(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},Fbe=ge([Nbe,Ur],FK);function Lbe(e){var t;if(e.x!=null)return Ol([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:Ol(r)}function Gbe(e){var t;if(e.y!=null)return Ol([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:Ol(r)}var LK=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?Lbe(n):Gbe(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},jbe=ge([Mbe,Ur],LK),Bbe=ge(Obe,jbe,Fbe,(e,t,r)=>Yb(e,r,t)),q1=(e,t,r,n,i,s,o,a)=>{if(r!=null)return r;var l=o==="vertical"&&a==="xAxis"||o==="horizontal"&&a==="yAxis",c=l?Yb(n,s,i):Yb(s,i);return Zwe(t,c,e.allowDataOverflow)},Vbe=ge([en,U1,W1,Tbe,_be,Bbe,Zt,Ur],q1,{memoizeOptions:{resultEqualityCheck:sE}}),Hbe=[0,1],Y1=(e,t,r,n,i,s,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:a,type:l}=e,c=za(t,s);if(c&&a==null){var u;return w9(0,(u=r==null?void 0:r.length)!==null&&u!==void 0?u:0)}return l==="category"?kbe(n,e,c):i==="expand"?Hbe:o}},Q1=ge([en,Zt,H1,lE,Gy,Ur,Vbe],Y1);function zbe(e){return e in qg}var GK=(e,t,r)=>{if(e!=null){var{scale:n,type:i}=e;if(n==="auto")return i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!t)?"point":i==="category"?"band":"linear";if(typeof n=="string"){var s="scale".concat(Ey(n));return zbe(s)?s:"point"}}},Tu=ge([en,RK,k1],GK);function X1(e,t,r,n){if(!(r==null||n==null))return typeof e.scale=="function"?Pj(e.scale,r,n):Pj(t,r,n)}var Z1=(e,t,r)=>{var n=$1(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Ml(e))return nbe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Ml(e))return ibe(e,t.tickCount,t.allowDecimals)}},J1=ge([Q1,qf,Tu],Z1),eN=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Ml(t)&&Array.isArray(r)&&r.length>0){var i,s,o=t[0],a=(i=r[0])!==null&&i!==void 0?i:0,l=t[1],c=(s=r[r.length-1])!==null&&s!==void 0?s:0;return[Math.min(o,a),Math.max(l,c)]}return t},$be=ge([en,Q1,J1,Ur],eN),Ube=ge(lE,en,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Ol(e.map(d=>d.value))).sort((d,p)=>d-p),i=n[0],s=n[n.length-1];if(i==null||s==null)return 1/0;var o=s-i;if(o===0)return 1/0;for(var a=0;a<n.length-1;a++){var l=n[a],c=n[a+1];if(!(l==null||c==null)){var u=c-l;r=Math.min(r,u)}}return r/o}}),jK=ge(Ube,Zt,fK,Sn,(e,t,r,n,i)=>i,(e,t,r,n,i)=>{if(!Bt(e))return 0;var s=t==="vertical"?n.height:n.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var o=ai(r,e*s),a=e*s/2;return a-o-(a-o)/s*o}return 0}),Wbe=(e,t,r)=>{var n=ql(e,t);return n==null||typeof n.padding!="string"?0:jK(e,"xAxis",t,r,n.padding)},Kbe=(e,t,r)=>{var n=Yl(e,t);return n==null||typeof n.padding!="string"?0:jK(e,"yAxis",t,r,n.padding)},qbe=ge(ql,Wbe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((r=i.left)!==null&&r!==void 0?r:0)+t,right:((n=i.right)!==null&&n!==void 0?n:0)+t}}),Ybe=ge(Yl,Kbe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((r=i.top)!==null&&r!==void 0?r:0)+t,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+t}}),Qbe=ge([Sn,qbe,Hx,Vx,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:s}=n;return i?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),Xbe=ge([Sn,Zt,Ybe,Hx,Vx,(e,t,r)=>r],(e,t,r,n,i,s)=>{var{padding:o}=i;return s?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Hy=(e,t,r,n)=>{var i;switch(t){case"xAxis":return Qbe(e,r,n);case"yAxis":return Xbe(e,r,n);case"zAxis":return(i=L1(e,r))===null||i===void 0?void 0:i.range;case"angleAxis":return CK(e);case"radiusAxis":return wK(e,r);default:return}},BK=ge([en,Hy],eE),Zbe=ge([Tu,$be],xK),uE=ge([en,Tu,Zbe,BK],X1);ge([By,cE,Ur],Abe);function VK(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var dE=(e,t)=>t,hE=(e,t,r)=>r,Jbe=ge(jx,dE,hE,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(VK)),eSe=ge(Bx,dE,hE,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(VK)),HK=(e,t)=>({width:e.width,height:t.height}),tSe=(e,t)=>{var r=typeof t.width=="number"?t.width:Ay;return{width:r,height:e.height}},zK=ge(Sn,ql,HK),rSe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},nSe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},iSe=ge(Ul,Sn,Jbe,dE,hE,(e,t,r,n,i)=>{var s={},o;return r.forEach(a=>{var l=HK(t,a);o==null&&(o=rSe(t,n,e));var c=n==="top"&&!i||n==="bottom"&&i;s[a.id]=o-Number(c)*l.height,o+=(c?-1:1)*l.height}),s}),sSe=ge($l,Sn,eSe,dE,hE,(e,t,r,n,i)=>{var s={},o;return r.forEach(a=>{var l=tSe(t,a);o==null&&(o=nSe(t,n,e));var c=n==="left"&&!i||n==="right"&&i;s[a.id]=o-Number(c)*l.width,o+=(c?-1:1)*l.width}),s}),oSe=(e,t)=>{var r=ql(e,t);if(r!=null)return iSe(e,r.orientation,r.mirror)},aSe=ge([Sn,ql,oSe,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r==null?void 0:r[n];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),lSe=(e,t)=>{var r=Yl(e,t);if(r!=null)return sSe(e,r.orientation,r.mirror)},cSe=ge([Sn,Yl,lSe,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r==null?void 0:r[n];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),$K=ge(Sn,Yl,(e,t)=>{var r=typeof t.width=="number"?t.width:Ay;return{width:r,height:e.height}}),Aj=(e,t,r)=>{switch(t){case"xAxis":return zK(e,r).width;case"yAxis":return $K(e,r).height;default:return}},UK=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:s,dataKey:o}=r,a=za(e,n),l=t.map(c=>c.value);if(o&&a&&s==="category"&&i&&D5(l))return l}},tN=ge([Zt,lE,en,Ur],UK),WK=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:s}=r,o=za(e,n);if(o&&(i==="number"||s!=="auto"))return t.map(a=>a.value)}},rN=ge([Zt,lE,qf,Ur],WK),_j=ge([Zt,wbe,Tu,uE,tN,rN,Hy,J1,Ur],(e,t,r,n,i,s,o,a,l)=>{if(t!=null){var c=za(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:s,duplicateDomain:i,isCategorical:c,niceTicks:a,range:o,realScaleType:r,scale:n}}}),uSe=(e,t,r,n,i,s,o,a,l)=>{if(!(t==null||n==null)){var c=za(e,l),{type:u,ticks:d,tickCount:p}=t,f=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,m=u==="category"&&n.bandwidth?n.bandwidth()/f:0;m=l==="angleAxis"&&s!=null&&s.length>=2?In(s[0]-s[1])*2*m:m;var y=d||i;return y?y.map((C,w)=>{var b=o?o.indexOf(C):C,x=n.map(b);return Bt(x)?{index:w,coordinate:x+m,value:C,offset:m}:null}).filter(Zi):c&&a?a.map((C,w)=>{var b=n.map(C);return Bt(b)?{coordinate:b+m,value:C,index:w,offset:m}:null}).filter(Zi):n.ticks?n.ticks(p).map((C,w)=>{var b=n.map(C);return Bt(b)?{coordinate:b+m,value:C,index:w,offset:m}:null}).filter(Zi):n.domain().map((C,w)=>{var b=n.map(C);return Bt(b)?{coordinate:b+m,value:o?o[C]:C,index:w,offset:m}:null}).filter(Zi)}},KK=ge([Zt,qf,Tu,uE,J1,Hy,tN,rN,Ur],uSe),dSe=(e,t,r,n,i,s,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var a=za(e,o),{tickCount:l}=t,c=0;return c=o==="angleAxis"&&(n==null?void 0:n.length)>=2?In(n[0]-n[1])*2*c:c,a&&s?s.map((u,d)=>{var p=r.map(u);return Bt(p)?{coordinate:p+c,value:u,index:d,offset:c}:null}).filter(Zi):r.ticks?r.ticks(l).map((u,d)=>{var p=r.map(u);return Bt(p)?{coordinate:p+c,value:u,index:d,offset:c}:null}).filter(Zi):r.domain().map((u,d)=>{var p=r.map(u);return Bt(p)?{coordinate:p+c,value:i?i[u]:u,index:d,offset:c}:null}).filter(Zi)}},au=ge([Zt,qf,uE,Hy,tN,rN,Ur],dSe),lu=ge(en,uE,(e,t)=>{if(!(e==null||t==null))return Kb(Kb({},e),{},{scale:t})}),hSe=ge([en,Tu,Q1,BK],X1);ge((e,t,r)=>L1(e,r),hSe,(e,t)=>{if(!(e==null||t==null))return Kb(Kb({},e),{},{scale:t})});var pSe=ge([Zt,jx,Bx],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),qK=e=>e.options.defaultTooltipEventType,YK=e=>e.options.validateTooltipEventTypes;function QK(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function nN(e,t){var r=qK(e),n=YK(e);return QK(t,r,n)}function fSe(e){return it(t=>nN(t,e))}var XK=(e,t)=>{var r,n=Number(t);if(!(Zo(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},gSe=e=>e.tooltip.settings,xc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},mSe={itemInteraction:{click:xc,hover:xc},axisInteraction:{click:xc,hover:xc},keyboardInteraction:xc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},ZK=cs({name:"tooltip",initialState:mSe,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Or()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Wo(e).tooltipItemPayloads.indexOf(r);i>-1&&(e.tooltipItemPayloads[i]=n)},prepare:Or()},removeTooltipEntrySettings:{reducer(e,t){var r=Wo(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Or()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:vSe,replaceTooltipEntrySettings:ySe,removeTooltipEntrySettings:CSe,setTooltipSettingsState:wSe,setActiveMouseOverItemIndex:JK,mouseLeaveItem:bSe,mouseLeaveChart:e8,setActiveClickItemIndex:SSe,setMouseOverAxisIndex:t8,setMouseClickAxisIndex:xSe,setSyncInteraction:m_,setKeyboardInteraction:v_}=ZK.actions,ESe=ZK.reducer;function Dj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dj(Object(r),!0).forEach(function(n){PSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PSe(e,t,r){return(t=RSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RSe(e){var t=TSe(e,"string");return typeof t=="symbol"?t:t+""}function TSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ASe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function _Se(e){return e.index!=null}var r8=(e,t,r,n)=>{if(t==null)return xc;var i=ASe(e,t,r);if(i==null)return xc;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(_Se(i)){if(s)return zC(zC({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return zC(zC({},xc),{},{coordinate:i.coordinate})};function DSe(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function kSe(e,t){var r=DSe(e),n=t[0],i=t[1];if(r===void 0)return!1;var s=Math.min(n,i),o=Math.max(n,i);return r>=s&&r<=o}function ISe(e,t,r){if(r==null||t==null)return!0;var n=hr(e,t);return n==null||!Ml(r)?!0:kSe(n,r)}var iN=(e,t,r,n)=>{var i=e==null?void 0:e.index;if(i==null)return null;var s=Number(i);if(!Bt(s))return i;var o=0,a=1/0;t.length>0&&(a=t.length-1);var l=Math.max(o,Math.min(s,a)),c=t[l];return c==null||ISe(c,r,n)?String(l):null},n8=(e,t,r,n,i,s,o)=>{if(s!=null){var a=o[0],l=a==null?void 0:a.getPosition(s);if(l!=null)return l;var c=i==null?void 0:i[Number(s)];if(c)switch(r){case"horizontal":return{x:c.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:c.coordinate}}}},i8=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;if(r==="hover"?i=e.itemInteraction.hover.graphicalItemId:i=e.itemInteraction.click.graphicalItemId,i==null&&n!=null){var s=e.tooltipItemPayloads[0];return s!=null?[s]:[]}return e.tooltipItemPayloads.filter(o=>{var a;return((a=o.settings)===null||a===void 0?void 0:a.graphicalItemId)===i})},s8=e=>e.options.tooltipPayloadSearcher,Qf=e=>e.tooltip;function kj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ij(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kj(Object(r),!0).forEach(function(n){NSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NSe(e,t,r){return(t=MSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MSe(e){var t=OSe(e,"string");return typeof t=="symbol"?t:t+""}function OSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FSe(e,t){return e??t}var o8=(e,t,r,n,i,s,o)=>{if(!(t==null||s==null)){var{chartData:a,computedData:l,dataStartIndex:c,dataEndIndex:u}=r,d=[];return e.reduce((p,f)=>{var m,{dataDefinedOnItem:y,settings:C}=f,w=FSe(y,a),b=Array.isArray(w)?F6(w,c,u):w,x=(m=C==null?void 0:C.dataKey)!==null&&m!==void 0?m:n,E=C==null?void 0:C.nameKey,I;if(n&&Array.isArray(b)&&!Array.isArray(b[0])&&o==="axis"?I=k5(b,n,i):I=s(b,t,l,E),Array.isArray(I))I.forEach(P=>{var A=Ij(Ij({},C),{},{name:P.name,unit:P.unit,color:void 0,fill:void 0});p.push(G2({tooltipEntrySettings:A,dataKey:P.dataKey,payload:P.payload,value:hr(P.payload,P.dataKey),name:P.name}))});else{var k;p.push(G2({tooltipEntrySettings:C,dataKey:x,payload:I,value:hr(I,x),name:(k=hr(I,E))!==null&&k!==void 0?k:C==null?void 0:C.name}))}return p},d)}},sN=ge([En,RK,k1],GK),LSe=ge([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),GSe=ge([Ln,Kf],G1),Xf=ge([LSe,En,GSe],j1,{memoizeOptions:{resultEqualityCheck:oE}}),jSe=ge([Xf],e=>e.filter(iE)),BSe=ge([Xf],B1,{memoizeOptions:{resultEqualityCheck:oE}}),Zf=ge([BSe,Kl],V1),VSe=ge([jSe,Kl,En],SK),oN=ge([Zf,En,Xf],z1),a8=ge([En],$1),HSe=ge([En],e=>e.allowDataOverflow),l8=ge([a8,HSe],rK),zSe=ge([Xf],e=>e.filter(iE)),$Se=ge([VSe,zSe,Gy,gK],DK),USe=ge([$Se,Kl,Ln,l8],kK),WSe=ge([Xf],AK),KSe=ge([Zf,En,WSe,cE,Ln],K1,{memoizeOptions:{resultEqualityCheck:sE}}),qSe=ge([IK,Ln,Kf],Yf),YSe=ge([qSe,Ln],OK),QSe=ge([NK,Ln,Kf],Yf),XSe=ge([QSe,Ln],FK),ZSe=ge([MK,Ln,Kf],Yf),JSe=ge([ZSe,Ln],LK),exe=ge([YSe,JSe,XSe],Yb),txe=ge([En,a8,l8,USe,KSe,exe,Zt,Ln],q1),zy=ge([En,Zt,Zf,oN,Gy,Ln,txe],Y1),rxe=ge([zy,En,sN],Z1),nxe=ge([En,zy,rxe,Ln],eN),c8=e=>{var t=Ln(e),r=Kf(e),n=!1;return Hy(e,t,r,n)},u8=ge([En,c8],eE),d8=ge([En,sN,nxe,u8],X1),ixe=ge([Zt,oN,En,Ln],UK),sxe=ge([Zt,oN,En,Ln],WK),oxe=(e,t,r,n,i,s,o,a)=>{if(t){var{type:l}=t,c=za(e,a);if(n){var u=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,d=l==="category"&&n.bandwidth?n.bandwidth()/u:0;return d=a==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?In(i[0]-i[1])*2*d:d,c&&o?o.map((p,f)=>{var m=n.map(p);return Bt(m)?{coordinate:m+d,value:p,index:f,offset:d}:null}).filter(Zi):n.domain().map((p,f)=>{var m=n.map(p);return Bt(m)?{coordinate:m+d,value:s?s[p]:p,index:f,offset:d}:null}).filter(Zi)}}},Ql=ge([Zt,En,sN,d8,c8,ixe,sxe,Ln],oxe),aN=ge([qK,YK,gSe],(e,t,r)=>QK(r.shared,e,t)),h8=e=>e.tooltip.settings.trigger,lN=e=>e.tooltip.settings.defaultIndex,$y=ge([Qf,aN,h8,lN],r8),cu=ge([$y,Zf,Vy,zy],iN),p8=ge([Ql,cu],XK),cN=ge([$y],e=>{if(e)return e.dataKey}),axe=ge([$y],e=>{if(e)return e.graphicalItemId}),f8=ge([Qf,aN,h8,lN],i8),lxe=ge([$l,Ul,Zt,Sn,Ql,lN,f8],n8),cxe=ge([$y,lxe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),uxe=ge([$y],e=>{var t;return(t=e==null?void 0:e.active)!==null&&t!==void 0?t:!1}),dxe=ge([f8,cu,Kl,Vy,p8,s8,aN],o8),hxe=ge([dxe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function Nj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Mj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nj(Object(r),!0).forEach(function(n){pxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pxe(e,t,r){return(t=fxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fxe(e){var t=gxe(e,"string");return typeof t=="symbol"?t:t+""}function gxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mxe=()=>it(En),vxe=()=>{var e=mxe(),t=it(Ql),r=it(d8);return uf(!e||!r?void 0:Mj(Mj({},e),{},{scale:r}),t)};function Oj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Nh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Oj(Object(r),!0).forEach(function(n){yxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yxe(e,t,r){return(t=Cxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cxe(e){var t=wxe(e,"string");return typeof t=="symbol"?t:t+""}function wxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bxe=(e,t,r,n)=>{var i=t.find(s=>s&&s.index===r);if(i){if(e==="horizontal")return{x:i.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},Sxe=(e,t,r,n)=>{var i=t.find(c=>c&&c.index===r);if(i){if(e==="centric"){var s=i.coordinate,{radius:o}=n;return Nh(Nh(Nh({},n),hn(n.cx,n.cy,o,s)),{},{angle:s,radius:o})}var a=i.coordinate,{angle:l}=n;return Nh(Nh(Nh({},n),hn(n.cx,n.cy,a,l)),{},{angle:l,radius:a})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function xxe(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var g8=(e,t,r,n,i)=>{var s,o=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var a=0;a<o;a++){var l,c,u,d,p,f=a>0?(l=r[a-1])===null||l===void 0?void 0:l.coordinate:(c=r[o-1])===null||c===void 0?void 0:c.coordinate,m=(u=r[a])===null||u===void 0?void 0:u.coordinate,y=a>=o-1?(d=r[0])===null||d===void 0?void 0:d.coordinate:(p=r[a+1])===null||p===void 0?void 0:p.coordinate,C=void 0;if(!(f==null||m==null||y==null))if(In(m-f)!==In(y-m)){var w=[];if(In(y-m)===In(i[1]-i[0])){C=y;var b=m+i[1]-i[0];w[0]=Math.min(b,(b+f)/2),w[1]=Math.max(b,(b+f)/2)}else{C=f;var x=y+i[1]-i[0];w[0]=Math.min(m,(x+m)/2),w[1]=Math.max(m,(x+m)/2)}var E=[Math.min(m,(C+m)/2),Math.max(m,(C+m)/2)];if(e>E[0]&&e<=E[1]||e>=w[0]&&e<=w[1]){var I;return(I=r[a])===null||I===void 0?void 0:I.index}}else{var k=Math.min(f,y),P=Math.max(f,y);if(e>(k+m)/2&&e<=(P+m)/2){var A;return(A=r[a])===null||A===void 0?void 0:A.index}}}else if(t)for(var D=0;D<o;D++){var L=t[D];if(L!=null){var M=t[D+1],T=t[D-1];if(D===0&&M!=null&&e<=(L.coordinate+M.coordinate)/2||D===o-1&&T!=null&&e>(L.coordinate+T.coordinate)/2||D>0&&D<o-1&&T!=null&&M!=null&&e>(L.coordinate+T.coordinate)/2&&e<=(L.coordinate+M.coordinate)/2)return L.index}}return-1},m8=()=>it(k1),uN=(e,t)=>t,v8=(e,t,r)=>r,dN=(e,t,r,n)=>n,Exe=ge(Ql,e=>_x(e,t=>t.coordinate)),hN=ge([Qf,uN,v8,dN],r8),pN=ge([hN,Zf,Vy,zy],iN),Pxe=(e,t,r)=>{if(t!=null){var n=Qf(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},y8=ge([Qf,uN,v8,dN],i8),Qb=ge([$l,Ul,Zt,Sn,Ql,dN,y8],n8),Rxe=ge([hN,Qb],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),C8=ge([Ql,pN],XK),Txe=ge([y8,pN,Kl,Vy,C8,s8,uN],o8),Axe=ge([hN,pN],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),_xe=(e,t,r,n,i,s,o)=>{if(!(!e||!r||!n||!i)&&xxe(e,o)){var a=sve(e,t),l=g8(a,s,i,r,n),c=bxe(t,i,l,e);return{activeIndex:String(l),activeCoordinate:c}}},Dxe=(e,t,r,n,i,s,o)=>{if(!(!e||!n||!i||!s||!r)){var a=yCe(e,r);if(a){var l=ove(a,t),c=g8(l,o,s,n,i),u=Sxe(t,s,c,a);return{activeIndex:String(c),activeCoordinate:u}}}},kxe=(e,t,r,n,i,s,o,a)=>{if(!(!e||!t||!n||!i||!s))return t==="horizontal"||t==="vertical"?_xe(e,t,n,i,s,o,a):Dxe(e,t,r,n,i,s,o)},Ixe=ge(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),Nxe=ge(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(pn)),r=Array.from(new Set(t));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:fbe}});function Fj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Lj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fj(Object(r),!0).forEach(function(n){Mxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mxe(e,t,r){return(t=Oxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oxe(e){var t=Fxe(e,"string");return typeof t=="symbol"?t:t+""}function Fxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lxe={},Gxe={zIndexMap:Object.values(pn).reduce((e,t)=>Lj(Lj({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),Lxe)},jxe=new Set(Object.values(pn));function Bxe(e){return jxe.has(e)}var w8=cs({name:"zIndex",initialState:Gxe,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Or()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!Bxe(r)&&delete e.zIndexMap[r])},prepare:Or()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:i}=t.payload;e.zIndexMap[r]?i?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:i?void 0:n,panoramaElement:i?n:void 0}},prepare:Or()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:Or()}}}),{registerZIndexPortal:Vxe,unregisterZIndexPortal:Hxe,registerZIndexPortalElement:zxe,unregisterZIndexPortalElement:$xe}=w8.actions,Uxe=w8.reducer;function us(e){var{zIndex:t,children:r}=e,n=Nve(),i=n&&t!==void 0&&t!==0,s=hi(),o=Er();v.useLayoutEffect(()=>i?(o(Vxe({zIndex:t})),()=>{o(Hxe({zIndex:t}))}):wh,[o,t,i]);var a=it(l=>Ixe(l,t,s));return i?a?oh.createPortal(r,a):null:r}function y_(){return y_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y_.apply(null,arguments)}function Gj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $C(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gj(Object(r),!0).forEach(function(n){Wxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wxe(e,t,r){return(t=Kxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kxe(e){var t=qxe(e,"string");return typeof t=="symbol"?t:t+""}function qxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yxe(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return v.isValidElement(t)?v.cloneElement(t,n):v.createElement(r,n)}function Qxe(e){var t,{coordinate:r,payload:n,index:i,offset:s,tooltipAxisBandSize:o,layout:a,cursor:l,tooltipEventType:c,chartName:u}=e,d=r,p=n,f=i;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var m,y,C;if(u==="ScatterChart")m=d,y=Iye,C=pn.cursorLine;else if(u==="BarChart")m=Nye(a,d,s,o),y=h9,C=pn.cursorRectangle;else if(a==="radial"&&N5(d)){var{cx:w,cy:b,radius:x,startAngle:E,endAngle:I}=f9(d);m={cx:w,cy:b,startAngle:E,endAngle:I,innerRadius:x,outerRadius:x},y=m9,C=pn.cursorLine}else m={points:SCe(a,d,s)},y=bp,C=pn.cursorLine;var k=typeof l=="object"&&"className"in l?l.className:void 0,P=$C($C($C($C({stroke:"#ccc",pointerEvents:"none"},s),m),Yd(l)),{},{payload:p,payloadIndex:f,className:er("recharts-tooltip-cursor",k)});return v.createElement(us,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:C},v.createElement(Yxe,{cursor:l,cursorComp:y,cursorProps:P}))}function Xxe(e){var t=vxe(),r=Y6(),n=bh(),i=m8();return t==null||r==null||n==null||i==null?null:v.createElement(Qxe,y_({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var b8=v.createContext(null),Zxe=()=>v.useContext(b8),S8={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,d,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||l,p),m=r?r+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],f]:l._events[m].push(f):(l._events[m]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)t.call(u,d)&&c.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=r?r+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var p=0,f=d.length,m=new Array(f);p<f;p++)m[p]=d[p].fn;return m},a.prototype.listenerCount=function(c){var u=r?r+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,p,f,m){var y=r?r+c:c;if(!this._events[y])return!1;var C=this._events[y],w=arguments.length,b,x;if(C.fn){switch(C.once&&this.removeListener(c,C.fn,void 0,!0),w){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,u),!0;case 3:return C.fn.call(C.context,u,d),!0;case 4:return C.fn.call(C.context,u,d,p),!0;case 5:return C.fn.call(C.context,u,d,p,f),!0;case 6:return C.fn.call(C.context,u,d,p,f,m),!0}for(x=1,b=new Array(w-1);x<w;x++)b[x-1]=arguments[x];C.fn.apply(C.context,b)}else{var E=C.length,I;for(x=0;x<E;x++)switch(C[x].once&&this.removeListener(c,C[x].fn,void 0,!0),w){case 1:C[x].fn.call(C[x].context);break;case 2:C[x].fn.call(C[x].context,u);break;case 3:C[x].fn.call(C[x].context,u,d);break;case 4:C[x].fn.call(C[x].context,u,d,p);break;default:if(!b)for(I=1,b=new Array(w-1);I<w;I++)b[I-1]=arguments[I];C[x].fn.apply(C[x].context,b)}}return!0},a.prototype.on=function(c,u,d){return s(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return s(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,p){var f=r?r+c:c;if(!this._events[f])return this;if(!u)return o(this,f),this;var m=this._events[f];if(m.fn)m.fn===u&&(!p||m.once)&&(!d||m.context===d)&&o(this,f);else{for(var y=0,C=[],w=m.length;y<w;y++)(m[y].fn!==u||p&&!m[y].once||d&&m[y].context!==d)&&C.push(m[y]);C.length?this._events[f]=C.length===1?C[0]:C:o(this,f)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=r?r+c:c,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(S8);var Jxe=S8.exports;const eEe=lo(Jxe);var Hv=new eEe,C_="recharts.syncEvent.tooltip",jj="recharts.syncEvent.brush",fN=(e,t)=>{if(t&&Array.isArray(e)){var r=Number.parseInt(t,10);if(!Zo(r))return e[r]}},tEe={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},x8=cs({name:"options",initialState:tEe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),rEe=x8.reducer,{createEventEmitter:nEe}=x8.actions;function iEe(e){return e.tooltip.syncInteraction}var sEe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},E8=cs({name:"chartData",initialState:sEe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:Bj,setDataStartEndIndexes:oEe,setComputedData:TIe}=E8.actions,aEe=E8.reducer,lEe=["x","y"];function Vj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Mh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vj(Object(r),!0).forEach(function(n){cEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cEe(e,t,r){return(t=uEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uEe(e){var t=dEe(e,"string");return typeof t=="symbol"?t:t+""}function dEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hEe(e,t){if(e==null)return{};var r,n,i=pEe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function pEe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fEe(){var e=it(I1),t=it(N1),r=Er(),n=it(mK),i=it(Ql),s=bh(),o=zx(),a=it(l=>l.rootProps.className);v.useEffect(()=>{if(e==null)return wh;var l=(c,u,d)=>{if(t!==d&&e===c){if(n==="index"){var p;if(o&&u!==null&&u!==void 0&&(p=u.payload)!==null&&p!==void 0&&p.coordinate&&u.payload.sourceViewBox){var f=u.payload.coordinate,{x:m,y}=f,C=hEe(f,lEe),{x:w,y:b,width:x,height:E}=u.payload.sourceViewBox,I=Mh(Mh({},C),{},{x:o.x+(x?(m-w)/x:0)*o.width,y:o.y+(E?(y-b)/E:0)*o.height});r(Mh(Mh({},u),{},{payload:Mh(Mh({},u.payload),{},{coordinate:I})}))}else r(u);return}if(i!=null){var k;if(typeof n=="function"){var P={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},A=n(i,P);k=i[A]}else n==="value"&&(k=i.find(B=>String(B.value)===u.payload.label));var{coordinate:D}=u.payload;if(k==null||u.payload.active===!1||D==null||o==null){r(m_({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:L,y:M}=D,T=Math.min(L,o.x+o.width),O=Math.min(M,o.y+o.height),Q={x:s==="horizontal"?k.coordinate:T,y:s==="horizontal"?O:k.coordinate},X=m_({active:u.payload.active,coordinate:Q,dataKey:u.payload.dataKey,index:String(k.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox,graphicalItemId:u.payload.graphicalItemId});r(X)}}};return Hv.on(C_,l),()=>{Hv.off(C_,l)}},[a,r,t,e,n,i,s,o])}function gEe(){var e=it(I1),t=it(N1),r=Er();v.useEffect(()=>{if(e==null)return wh;var n=(i,s,o)=>{t!==o&&e===i&&r(oEe(s))};return Hv.on(jj,n),()=>{Hv.off(jj,n)}},[r,t,e])}function mEe(){var e=Er();v.useEffect(()=>{e(nEe())},[e]),fEe(),gEe()}function vEe(e,t,r,n,i,s){var o=it(f=>Pxe(f,e,t)),a=it(N1),l=it(I1),c=it(mK),u=it(iEe),d=u==null?void 0:u.active,p=zx();v.useEffect(()=>{if(!d&&l!=null&&a!=null){var f=m_({active:s,coordinate:r,dataKey:o,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:p,graphicalItemId:void 0});Hv.emit(C_,l,f,a)}},[d,r,o,i,n,a,l,c,s,p])}function Hj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hj(Object(r),!0).forEach(function(n){yEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yEe(e,t,r){return(t=CEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CEe(e){var t=wEe(e,"string");return typeof t=="symbol"?t:t+""}function wEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bEe(e){return e.dataKey}function SEe(e,t){return v.isValidElement(e)?v.cloneElement(e,t):typeof e=="function"?v.createElement(e,t):v.createElement(dye,t)}var $j=[],xEe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Bs(e){var t,r,n=gn(e,xEe),{active:i,allowEscapeViewBox:s,animationDuration:o,animationEasing:a,content:l,filterNull:c,isAnimationActive:u,offset:d,payloadUniqBy:p,position:f,reverseDirection:m,useTranslate3d:y,wrapperStyle:C,cursor:w,shared:b,trigger:x,defaultIndex:E,portal:I,axisId:k}=n,P=Er(),A=typeof E=="number"?String(E):E;v.useEffect(()=>{P(wSe({shared:b,trigger:x,axisId:k,active:i,defaultIndex:A}))},[P,b,x,k,i,A]);var D=zx(),L=a9(),M=fSe(b),{activeIndex:T,isActive:O}=(t=it(je=>Axe(je,M,x,A)))!==null&&t!==void 0?t:{},Q=it(je=>Txe(je,M,x,A)),X=it(je=>C8(je,M,x,A)),B=it(je=>Rxe(je,M,x,A)),W=Q,ne=Zxe(),J=(r=i??O)!==null&&r!==void 0?r:!1,[ye,Pe]=o6([W,J]),ue=M==="axis"?X:void 0;vEe(M,x,B,ue,T,J);var Z=I??ne;if(Z==null||D==null||M==null)return null;var Ve=W??$j;J||(Ve=$j),c&&Ve.length&&(Ve=Z5(Ve.filter(je=>je.value!=null&&(je.hide!==!0||n.includeHidden)),p,bEe));var ve=Ve.length>0,Ze=v.createElement(yye,{allowEscapeViewBox:s,animationDuration:o,animationEasing:a,isAnimationActive:u,active:J,coordinate:B,hasPayload:ve,offset:d,position:f,reverseDirection:m,useTranslate3d:y,viewBox:D,wrapperStyle:C,lastBoundingBox:ye,innerRef:Pe,hasPortalFromProps:!!I},SEe(l,zj(zj({},n),{},{payload:Ve,label:ue,active:J,activeIndex:T,coordinate:B,accessibilityLayer:L})));return v.createElement(v.Fragment,null,oh.createPortal(Ze,Z),J&&v.createElement(Xxe,{cursor:w,tooltipEventType:M,coordinate:B,payload:Ve,index:T}))}var Td=e=>null;Td.displayName="Cell";function EEe(e,t,r){return(t=PEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PEe(e){var t=REe(e,"string");return typeof t=="symbol"?t:t+""}function REe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class TEe{constructor(t){EEe(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function Uj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function AEe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uj(Object(r),!0).forEach(function(n){_Ee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Ee(e,t,r){return(t=DEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DEe(e){var t=kEe(e,"string");return typeof t=="symbol"?t:t+""}function kEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IEe={cacheSize:2e3,enableCache:!0},P8=AEe({},IEe),Wj=new TEe(P8.cacheSize),NEe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Kj="recharts_measurement_span";function MEe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",o=t.letterSpacing||"",a=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(s,"|").concat(o,"|").concat(a)}var qj=(e,t)=>{try{var r=document.getElementById(Kj);r||(r=document.createElement("span"),r.setAttribute("id",Kj),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,NEe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},hm=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||ky.isSsr)return{width:0,height:0};if(!P8.enableCache)return qj(t,r);var n=MEe(t,r),i=Wj.get(n);if(i)return i;var s=qj(t,r);return Wj.set(n,s),s},R8;function OEe(e,t,r){return(t=FEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FEe(e){var t=LEe(e,"string");return typeof t=="symbol"?t:t+""}function LEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Qj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,GEe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,jEe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,BEe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},VEe=["cm","mm","pt","pc","in","Q","px"];function HEe(e){return VEe.includes(e)}var sp="NaN";function zEe(e,t){return e*BEe[t]}class zn{static parse(t){var r,[,n,i]=(r=jEe.exec(t))!==null&&r!==void 0?r:[];return n==null?zn.NaN:new zn(parseFloat(n),i??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Zo(t)&&(this.unit=""),r!==""&&!GEe.test(r)&&(this.num=NaN,this.unit=""),HEe(r)&&(this.num=zEe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new zn(NaN,""):new zn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new zn(NaN,""):new zn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new zn(NaN,""):new zn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new zn(NaN,""):new zn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Zo(this.num)}}R8=zn;OEe(zn,"NaN",new R8(NaN,""));function T8(e){if(e==null||e.includes(sp))return sp;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,s]=(r=Yj.exec(t))!==null&&r!==void 0?r:[],o=zn.parse(n??""),a=zn.parse(s??""),l=i==="*"?o.multiply(a):o.divide(a);if(l.isNaN())return sp;t=t.replace(Yj,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,u,d,p]=(c=Qj.exec(t))!==null&&c!==void 0?c:[],f=zn.parse(u??""),m=zn.parse(p??""),y=d==="+"?f.add(m):f.subtract(m);if(y.isNaN())return sp;t=t.replace(Qj,y.toString())}return t}var Xj=/\(([^()]*)\)/;function $Ee(e){for(var t=e,r;(r=Xj.exec(t))!=null;){var[,n]=r;t=t.replace(Xj,T8(n))}return t}function UEe(e){var t=e.replace(/\s+/g,"");return t=$Ee(t),t=T8(t),t}function WEe(e){try{return UEe(e)}catch{return sp}}function fR(e){var t=WEe(e.slice(5,-1));return t===sp?"":t}var KEe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],qEe=["dx","dy","angle","className","breakAll"];function w_(){return w_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w_.apply(null,arguments)}function Zj(e,t){if(e==null)return{};var r,n,i=YEe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function YEe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var A8=/[ \f\n\r\t\v\u2028\u2029]+/,_8=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];Jr(t)||(r?i=t.toString().split(""):i=t.toString().split(A8));var s=i.map(a=>({word:a,width:hm(a,n).width})),o=r?0:hm("",n).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}};function QEe(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var D8=(e,t,r,n)=>e.reduce((i,s)=>{var{word:o,width:a}=s,l=i[i.length-1];if(l&&a!=null&&(t==null||n||l.width+a+r<Number(t)))l.words.push(o),l.width+=a+r;else{var c={words:[o],width:a};i.push(c)}return i},[]),k8=e=>e.reduce((t,r)=>t.width>r.width?t:r),XEe="",Jj=(e,t,r,n,i,s,o,a)=>{var l=e.slice(0,t),c=_8({breakAll:r,style:n,children:l+XEe});if(!c)return[!1,[]];var u=D8(c.wordsWithComputedWidth,s,o,a),d=u.length>i||k8(u).width>Number(s);return[d,u]},ZEe=(e,t,r,n,i)=>{var{maxLines:s,children:o,style:a,breakAll:l}=e,c=Xe(s),u=String(o),d=D8(t,n,r,i);if(!c||i)return d;var p=d.length>s||k8(d).width>Number(n);if(!p)return d;for(var f=0,m=u.length-1,y=0,C;f<=m&&y<=u.length-1;){var w=Math.floor((f+m)/2),b=w-1,[x,E]=Jj(u,b,l,a,s,n,r,i),[I]=Jj(u,w,l,a,s,n,r,i);if(!x&&!I&&(f=w+1),x&&I&&(m=w-1),!x&&I){C=E;break}y++}return C||d},eB=e=>{var t=Jr(e)?[]:e.toString().split(A8);return[{words:t,width:void 0}]},JEe=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:s,maxLines:o}=e;if((t||r)&&!ky.isSsr){var a,l,c=_8({breakAll:s,children:n,style:i});if(c){var{wordsWithComputedWidth:u,spaceWidth:d}=c;a=u,l=d}else return eB(n);return ZEe({breakAll:s,children:n,maxLines:o,style:i},a,l,t,!!r)}return eB(n)},I8="#808080",ePe={angle:0,breakAll:!1,capHeight:"0.71em",fill:I8,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},pE=v.forwardRef((e,t)=>{var r=gn(e,ePe),{x:n,y:i,lineHeight:s,capHeight:o,fill:a,scaleToFit:l,textAnchor:c,verticalAnchor:u}=r,d=Zj(r,KEe),p=v.useMemo(()=>JEe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:l,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,l,d.style,d.width]),{dx:f,dy:m,angle:y,className:C,breakAll:w}=d,b=Zj(d,qEe);if(!ja(n)||!ja(i)||p.length===0)return null;var x=Number(n)+(Xe(f)?f:0),E=Number(i)+(Xe(m)?m:0);if(!Bt(x)||!Bt(E))return null;var I;switch(u){case"start":I=fR("calc(".concat(o,")"));break;case"middle":I=fR("calc(".concat((p.length-1)/2," * -").concat(s," + (").concat(o," / 2))"));break;default:I=fR("calc(".concat(p.length-1," * -").concat(s,")"));break}var k=[],P=p[0];if(l&&P!=null){var A=P.width,{width:D}=d;k.push("scale(".concat(Xe(D)&&Xe(A)?D/A:1,")"))}return y&&k.push("rotate(".concat(y,", ").concat(x,", ").concat(E,")")),k.length&&(b.transform=k.join(" ")),v.createElement("text",w_({},_i(b),{ref:t,x,y:E,className:er("recharts-text",C),textAnchor:c,fill:a.includes("url")?I8:a}),p.map((L,M)=>{var T=L.words.join(w?"":" ");return v.createElement("tspan",{x,dy:M===0?I:s,key:"".concat(T,"-").concat(M)},T)}))});pE.displayName="Text";function tB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function aa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tB(Object(r),!0).forEach(function(n){tPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tPe(e,t,r){return(t=rPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rPe(e){var t=nPe(e,"string");return typeof t=="symbol"?t:t+""}function nPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iPe=e=>{var{viewBox:t,position:r,offset:n=0,parentViewBox:i}=e,{x:s,y:o,height:a,upperWidth:l,lowerWidth:c}=e1(t),u=s,d=s+(l-c)/2,p=(u+d)/2,f=(l+c)/2,m=u+l/2,y=a>=0?1:-1,C=y*n,w=y>0?"end":"start",b=y>0?"start":"end",x=l>=0?1:-1,E=x*n,I=x>0?"end":"start",k=x>0?"start":"end",P=i;if(r==="top"){var A={x:u+l/2,y:o-C,horizontalAnchor:"middle",verticalAnchor:w};return P&&(A.height=Math.max(o-P.y,0),A.width=l),A}if(r==="bottom"){var D={x:d+c/2,y:o+a+C,horizontalAnchor:"middle",verticalAnchor:b};return P&&(D.height=Math.max(P.y+P.height-(o+a),0),D.width=c),D}if(r==="left"){var L={x:p-E,y:o+a/2,horizontalAnchor:I,verticalAnchor:"middle"};return P&&(L.width=Math.max(L.x-P.x,0),L.height=a),L}if(r==="right"){var M={x:p+f+E,y:o+a/2,horizontalAnchor:k,verticalAnchor:"middle"};return P&&(M.width=Math.max(P.x+P.width-M.x,0),M.height=a),M}var T=P?{width:f,height:a}:{};return r==="insideLeft"?aa({x:p+E,y:o+a/2,horizontalAnchor:k,verticalAnchor:"middle"},T):r==="insideRight"?aa({x:p+f-E,y:o+a/2,horizontalAnchor:I,verticalAnchor:"middle"},T):r==="insideTop"?aa({x:u+l/2,y:o+C,horizontalAnchor:"middle",verticalAnchor:b},T):r==="insideBottom"?aa({x:d+c/2,y:o+a-C,horizontalAnchor:"middle",verticalAnchor:w},T):r==="insideTopLeft"?aa({x:u+E,y:o+C,horizontalAnchor:k,verticalAnchor:b},T):r==="insideTopRight"?aa({x:u+l-E,y:o+C,horizontalAnchor:I,verticalAnchor:b},T):r==="insideBottomLeft"?aa({x:d+E,y:o+a-C,horizontalAnchor:k,verticalAnchor:w},T):r==="insideBottomRight"?aa({x:d+c-E,y:o+a-C,horizontalAnchor:I,verticalAnchor:w},T):r&&typeof r=="object"&&(Xe(r.x)||Zd(r.x))&&(Xe(r.y)||Zd(r.y))?aa({x:s+ai(r.x,f),y:o+ai(r.y,a),horizontalAnchor:"end",verticalAnchor:"end"},T):aa({x:m,y:o+a/2,horizontalAnchor:"middle",verticalAnchor:"middle"},T)},sPe=["labelRef"],oPe=["content"];function rB(e,t){if(e==null)return{};var r,n,i=aPe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function aPe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function nB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Yg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nB(Object(r),!0).forEach(function(n){lPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lPe(e,t,r){return(t=cPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cPe(e){var t=uPe(e,"string");return typeof t=="symbol"?t:t+""}function uPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function il(){return il=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},il.apply(null,arguments)}var N8=v.createContext(null),dPe=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:i,width:s,height:o,children:a}=e,l=v.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:i,width:s,height:o}),[t,r,n,i,s,o]);return v.createElement(N8.Provider,{value:l},a)},M8=()=>{var e=v.useContext(N8),t=zx();return e||(t?e1(t):void 0)},hPe=v.createContext(null),pPe=()=>{var e=v.useContext(hPe),t=it(bK);return e||t},fPe=e=>{var{value:t,formatter:r}=e,n=Jr(e.children)?t:e.children;return typeof r=="function"?r(n):n},gN=e=>e!=null&&typeof e=="function",gPe=(e,t)=>{var r=In(t-e),n=Math.min(Math.abs(t-e),360);return r*n},mPe=(e,t,r,n,i)=>{var{offset:s,className:o}=e,{cx:a,cy:l,innerRadius:c,outerRadius:u,startAngle:d,endAngle:p,clockWise:f}=i,m=(c+u)/2,y=gPe(d,p),C=y>=0?1:-1,w,b;switch(t){case"insideStart":w=d+C*s,b=f;break;case"insideEnd":w=p-C*s,b=!f;break;case"end":w=p+C*s,b=f;break;default:throw new Error("Unsupported position ".concat(t))}b=y<=0?b:!b;var x=hn(a,l,m,w),E=hn(a,l,m,w+(b?1:-1)*359),I="M".concat(x.x,",").concat(x.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(b?0:1,`,
    `).concat(E.x,",").concat(E.y),k=Jr(e.id)?_v("recharts-radial-line-"):e.id;return v.createElement("text",il({},n,{dominantBaseline:"central",className:er("recharts-radial-bar-label",o)}),v.createElement("defs",null,v.createElement("path",{id:k,d:I})),v.createElement("textPath",{xlinkHref:"#".concat(k)},r))},vPe=(e,t,r)=>{var{cx:n,cy:i,innerRadius:s,outerRadius:o,startAngle:a,endAngle:l}=e,c=(a+l)/2;if(r==="outside"){var{x:u,y:d}=hn(n,i,o+t,c);return{x:u,y:d,textAnchor:u>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var p=(s+o)/2,{x:f,y:m}=hn(n,i,p,c);return{x:f,y:m,textAnchor:"middle",verticalAnchor:"middle"}},O0=e=>e!=null&&"cx"in e&&Xe(e.cx),yPe={angle:0,offset:5,zIndex:pn.label,position:"middle",textBreakAll:!1};function CPe(e){if(!O0(e))return e;var{cx:t,cy:r,outerRadius:n}=e,i=n*2;return{x:t-n,y:r-n,width:i,upperWidth:i,lowerWidth:i,height:i}}function gc(e){var t=gn(e,yPe),{viewBox:r,parentViewBox:n,position:i,value:s,children:o,content:a,className:l="",textBreakAll:c,labelRef:u}=t,d=pPe(),p=M8(),f=i==="center"?p:d??p,m,y,C;r==null?m=f:O0(r)?m=r:m=e1(r);var w=CPe(m);if(!m||Jr(s)&&Jr(o)&&!v.isValidElement(a)&&typeof a!="function")return null;var b=Yg(Yg({},t),{},{viewBox:m});if(v.isValidElement(a)){var{labelRef:x}=b,E=rB(b,sPe);return v.cloneElement(a,E)}if(typeof a=="function"){var{content:I}=b,k=rB(b,oPe);if(y=v.createElement(a,k),v.isValidElement(y))return y}else y=fPe(t);var P=_i(t);if(O0(m)){if(i==="insideStart"||i==="insideEnd"||i==="end")return mPe(t,i,y,P,m);C=vPe(m,t.offset,t.position)}else{if(!w)return null;var A=iPe({viewBox:w,position:i,offset:t.offset,parentViewBox:O0(n)?void 0:n});C=Yg(Yg({x:A.x,y:A.y,textAnchor:A.horizontalAnchor,verticalAnchor:A.verticalAnchor},A.width!==void 0?{width:A.width}:{}),A.height!==void 0?{height:A.height}:{})}return v.createElement(us,{zIndex:t.zIndex},v.createElement(pE,il({ref:u,className:er("recharts-label",l)},P,C,{textAnchor:QEe(P.textAnchor)?P.textAnchor:C.textAnchor,breakAll:c}),y))}gc.displayName="Label";var wPe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?v.createElement(gc,il({key:"label-implicit"},n)):ja(e)?v.createElement(gc,il({key:"label-implicit",value:e},n)):v.isValidElement(e)?e.type===gc?v.cloneElement(e,Yg({key:"label-implicit"},n)):v.createElement(gc,il({key:"label-implicit",content:e},n)):gN(e)?v.createElement(gc,il({key:"label-implicit",content:e},n)):e&&typeof e=="object"?v.createElement(gc,il({},e,{key:"label-implicit"},n)):null};function bPe(e){var{label:t,labelRef:r}=e,n=M8();return wPe(t,n,r)||null}var O8={},F8={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(F8);var L8={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(L8);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=F8,r=L8,n=Tx;function i(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=i})(O8);var SPe=O8.last;const xPe=lo(SPe);var EPe=["valueAccessor"],PPe=["dataKey","clockWise","id","textBreakAll","zIndex"];function Xb(){return Xb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xb.apply(null,arguments)}function iB(e,t){if(e==null)return{};var r,n,i=RPe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function RPe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var TPe=e=>Array.isArray(e.value)?xPe(e.value):e.value,G8=v.createContext(void 0),j8=G8.Provider,B8=v.createContext(void 0),APe=B8.Provider;function _Pe(){return v.useContext(G8)}function DPe(){return v.useContext(B8)}function F0(e){var{valueAccessor:t=TPe}=e,r=iB(e,EPe),{dataKey:n,clockWise:i,id:s,textBreakAll:o,zIndex:a}=r,l=iB(r,PPe),c=_Pe(),u=DPe(),d=c||u;return!d||!d.length?null:v.createElement(us,{zIndex:a??pn.label},v.createElement(an,{className:"recharts-label-list"},d.map((p,f)=>{var m,y=Jr(n)?t(p,f):hr(p.payload,n),C=Jr(s)?{}:{id:"".concat(s,"-").concat(f)};return v.createElement(gc,Xb({key:"label-".concat(f)},_i(p),l,C,{fill:(m=r.fill)!==null&&m!==void 0?m:p.fill,parentViewBox:p.parentViewBox,value:y,textBreakAll:o,viewBox:p.viewBox,index:f,zIndex:0}))})))}F0.displayName="LabelList";function mN(e){var{label:t}=e;return t?t===!0?v.createElement(F0,{key:"labelList-implicit"}):v.isValidElement(t)||gN(t)?v.createElement(F0,{key:"labelList-implicit",content:t}):typeof t=="object"?v.createElement(F0,Xb({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function b_(){return b_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b_.apply(null,arguments)}var V8=e=>{var{cx:t,cy:r,r:n,className:i}=e,s=er("recharts-dot",i);return Xe(t)&&Xe(r)&&Xe(n)?v.createElement("circle",b_({},ss(e),MI(e),{className:s,cx:t,cy:r,r:n})):null},H8=e=>e.graphicalItems.polarItems,kPe=ge([Ur,jy],G1),fE=ge([H8,en,kPe],j1),IPe=ge([fE],B1),gE=ge([IPe,Jx],V1),NPe=ge([gE,en,fE],z1);ge([gE,en,fE],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(i=>{var s,o=hr(n,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:hr(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var sB=()=>{},MPe=ge([gE,en,fE,cE,Ur],K1),OPe=ge([en,U1,W1,sB,MPe,sB,Zt,Ur],q1),z8=ge([en,Zt,gE,NPe,Gy,Ur,OPe],Y1),FPe=ge([z8,qf,Tu],Z1),LPe=ge([en,z8,FPe,Ur],eN);ge([Tu,LPe],xK);var GPe={radiusAxis:{},angleAxis:{}},$8=cs({name:"polarAxis",initialState:GPe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:AIe,removeRadiusAxis:_Ie,addAngleAxis:DIe,removeAngleAxis:kIe}=$8.actions,jPe=$8.reducer;function U8(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}function oB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function aB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oB(Object(r),!0).forEach(function(n){BPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BPe(e,t,r){return(t=VPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VPe(e){var t=HPe(e,"string");return typeof t=="symbol"?t:t+""}function HPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zPe=(e,t)=>t,vN=ge([H8,zPe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),$Pe=[],yN=(e,t,r)=>(r==null?void 0:r.length)===0?$Pe:r,W8=ge([Jx,vN,yN],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var i;if((t==null?void 0:t.data)!=null&&t.data.length>0?i=t.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(s=>aB(aB({},t.presentationProps),s.props))),i!=null)return i}}),UPe=ge([W8,vN,yN],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,i)=>{var s,o=hr(n,t.nameKey,t.name),a;return r!=null&&(s=r[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?a=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?a=n.fill:a=t.fill,{value:zf(o,t.dataKey),color:a,payload:n,type:t.legendType}})}),WPe=ge([W8,vN,yN,Sn],(e,t,r,n)=>{if(!(t==null||e==null))return qRe({offset:n,pieSettings:t,displayedData:e,cells:r})}),K8={exports:{}},ur={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gn=typeof Symbol=="function"&&Symbol.for,CN=Gn?Symbol.for("react.element"):60103,wN=Gn?Symbol.for("react.portal"):60106,mE=Gn?Symbol.for("react.fragment"):60107,vE=Gn?Symbol.for("react.strict_mode"):60108,yE=Gn?Symbol.for("react.profiler"):60114,CE=Gn?Symbol.for("react.provider"):60109,wE=Gn?Symbol.for("react.context"):60110,bN=Gn?Symbol.for("react.async_mode"):60111,bE=Gn?Symbol.for("react.concurrent_mode"):60111,SE=Gn?Symbol.for("react.forward_ref"):60112,xE=Gn?Symbol.for("react.suspense"):60113,KPe=Gn?Symbol.for("react.suspense_list"):60120,EE=Gn?Symbol.for("react.memo"):60115,PE=Gn?Symbol.for("react.lazy"):60116,qPe=Gn?Symbol.for("react.block"):60121,YPe=Gn?Symbol.for("react.fundamental"):60117,QPe=Gn?Symbol.for("react.responder"):60118,XPe=Gn?Symbol.for("react.scope"):60119;function Ms(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case CN:switch(e=e.type,e){case bN:case bE:case mE:case yE:case vE:case xE:return e;default:switch(e=e&&e.$$typeof,e){case wE:case SE:case PE:case EE:case CE:return e;default:return t}}case wN:return t}}}function q8(e){return Ms(e)===bE}ur.AsyncMode=bN;ur.ConcurrentMode=bE;ur.ContextConsumer=wE;ur.ContextProvider=CE;ur.Element=CN;ur.ForwardRef=SE;ur.Fragment=mE;ur.Lazy=PE;ur.Memo=EE;ur.Portal=wN;ur.Profiler=yE;ur.StrictMode=vE;ur.Suspense=xE;ur.isAsyncMode=function(e){return q8(e)||Ms(e)===bN};ur.isConcurrentMode=q8;ur.isContextConsumer=function(e){return Ms(e)===wE};ur.isContextProvider=function(e){return Ms(e)===CE};ur.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===CN};ur.isForwardRef=function(e){return Ms(e)===SE};ur.isFragment=function(e){return Ms(e)===mE};ur.isLazy=function(e){return Ms(e)===PE};ur.isMemo=function(e){return Ms(e)===EE};ur.isPortal=function(e){return Ms(e)===wN};ur.isProfiler=function(e){return Ms(e)===yE};ur.isStrictMode=function(e){return Ms(e)===vE};ur.isSuspense=function(e){return Ms(e)===xE};ur.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===mE||e===bE||e===yE||e===vE||e===xE||e===KPe||typeof e=="object"&&e!==null&&(e.$$typeof===PE||e.$$typeof===EE||e.$$typeof===CE||e.$$typeof===wE||e.$$typeof===SE||e.$$typeof===YPe||e.$$typeof===QPe||e.$$typeof===XPe||e.$$typeof===qPe)};ur.typeOf=Ms;K8.exports=ur;var ZPe=K8.exports,lB=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",cB=null,gR=null,Y8=e=>{if(e===cB&&Array.isArray(gR))return gR;var t=[];return v.Children.forEach(e,r=>{Jr(r)||(ZPe.isFragment(r)?t=t.concat(Y8(r.props.children)):t.push(r))}),gR=t,cB=e,t};function SN(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(i=>lB(i)):n=[lB(t)],Y8(e).forEach(i=>{var s=Xd(i,"type.displayName")||Xd(i,"type.name");s&&n.indexOf(s)!==-1&&r.push(i)}),r}var Q8=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,X8={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var i;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((i=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&i.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(X8);var JPe=X8.isPlainObject;const eRe=lo(JPe);var uB,dB,hB,pB,fB;function gB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gB(Object(r),!0).forEach(function(n){tRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tRe(e,t,r){return(t=rRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rRe(e){var t=nRe(e,"string");return typeof t=="symbol"?t:t+""}function nRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zb(){return Zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zb.apply(null,arguments)}function Rg(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var vB=(e,t,r,n,i)=>{var s=r-n,o;return o=Yr(uB||(uB=Rg(["M ",",",""])),e,t),o+=Yr(dB||(dB=Rg(["L ",",",""])),e+r,t),o+=Yr(hB||(hB=Rg(["L ",",",""])),e+r-s/2,t+i),o+=Yr(pB||(pB=Rg(["L ",",",""])),e+r-s/2-n,t+i),o+=Yr(fB||(fB=Rg(["L ",","," Z"])),e,t),o},iRe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},sRe=e=>{var t=gn(e,iRe),{x:r,y:n,upperWidth:i,lowerWidth:s,height:o,className:a}=t,{animationEasing:l,animationDuration:c,animationBegin:u,isUpdateAnimationActive:d}=t,p=v.useRef(null),[f,m]=v.useState(-1),y=v.useRef(i),C=v.useRef(s),w=v.useRef(o),b=v.useRef(r),x=v.useRef(n),E=Ny(e,"trapezoid-");if(v.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var Q=p.current.getTotalLength();Q&&m(Q)}catch{}},[]),r!==+r||n!==+n||i!==+i||s!==+s||o!==+o||i===0&&s===0||o===0)return null;var I=er("recharts-trapezoid",a);if(!d)return v.createElement("g",null,v.createElement("path",Zb({},_i(t),{className:I,d:vB(r,n,i,s,o)})));var k=y.current,P=C.current,A=w.current,D=b.current,L=x.current,M="0px ".concat(f===-1?1:f,"px"),T="".concat(f,"px 0px"),O=l9(["strokeDasharray"],c,l);return v.createElement(Iy,{animationId:E,key:E,canBegin:f>0,duration:c,easing:l,isActive:d,begin:u},Q=>{var X=Ar(k,i,Q),B=Ar(P,s,Q),W=Ar(A,o,Q),ne=Ar(D,r,Q),J=Ar(L,n,Q);p.current&&(y.current=X,C.current=B,w.current=W,b.current=ne,x.current=J);var ye=Q>0?{transition:O,strokeDasharray:T}:{strokeDasharray:M};return v.createElement("path",Zb({},_i(t),{className:I,d:vB(ne,J,X,B,W),ref:p,style:mB(mB({},ye),t.style)}))})},oRe=["option","shapeType","activeClassName"];function aRe(e,t){if(e==null)return{};var r,n,i=lRe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function lRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function yB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Jb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yB(Object(r),!0).forEach(function(n){cRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cRe(e,t,r){return(t=uRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uRe(e){var t=dRe(e,"string");return typeof t=="symbol"?t:t+""}function dRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hRe(e,t){return Jb(Jb({},t),e)}function pRe(e,t){return e==="symbols"}function CB(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return v.createElement(h9,r);case"trapezoid":return v.createElement(sRe,r);case"sector":return v.createElement(m9,r);case"symbols":if(pRe(t))return v.createElement(NI,r);break;case"curve":return v.createElement(bp,r);default:return null}}function fRe(e){return v.isValidElement(e)?e.props:e}function Z8(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,i=aRe(e,oRe),s;if(v.isValidElement(t))s=v.cloneElement(t,Jb(Jb({},i),fRe(t)));else if(typeof t=="function")s=t(i,i.index);else if(eRe(t)&&typeof t!="boolean"){var o=hRe(t,i);s=v.createElement(CB,{shapeType:r,elementProps:o})}else{var a=i;s=v.createElement(CB,{shapeType:r,elementProps:a})}return i.isActive?v.createElement(an,{className:n},s):s}var xN=(e,t,r)=>{var n=Er();return(i,s)=>o=>{e==null||e(i,s,o),n(JK({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}},EN=e=>{var t=Er();return(r,n)=>i=>{e==null||e(r,n,i),t(bSe())}},PN=(e,t,r)=>{var n=Er();return(i,s)=>o=>{e==null||e(i,s,o),n(SSe({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}};function RN(e){var{tooltipEntrySettings:t}=e,r=Er(),n=hi(),i=v.useRef(null);return v.useLayoutEffect(()=>{n||(i.current===null?r(vSe(t)):i.current!==t&&r(ySe({prev:i.current,next:t})),i.current=t)},[t,r,n]),v.useLayoutEffect(()=>()=>{i.current&&(r(CSe(i.current)),i.current=null)},[r]),null}function J8(e){var{legendPayload:t}=e,r=Er(),n=hi(),i=v.useRef(null);return v.useLayoutEffect(()=>{n||(i.current===null?r(i9(t)):i.current!==t&&r(s9({prev:i.current,next:t})),i.current=t)},[r,n,t]),v.useLayoutEffect(()=>()=>{i.current&&(r(o9(i.current)),i.current=null)},[r]),null}function gRe(e){var{legendPayload:t}=e,r=Er(),n=it(Zt),i=v.useRef(null);return v.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(i.current===null?r(i9(t)):i.current!==t&&r(s9({prev:i.current,next:t})),i.current=t)},[r,n,t]),v.useLayoutEffect(()=>()=>{i.current&&(r(o9(i.current)),i.current=null)},[r]),null}var mR,mRe=()=>{var[e]=v.useState(()=>_v("uid-"));return e},vRe=(mR=yq.useId)!==null&&mR!==void 0?mR:mRe;function yRe(e,t){var r=vRe();return t||(e?"".concat(e,"-").concat(r):r)}var CRe=v.createContext(void 0),TN=e=>{var{id:t,type:r,children:n}=e,i=yRe("recharts-".concat(r),t);return v.createElement(CRe.Provider,{value:i},n(i))},wRe={cartesianItems:[],polarItems:[]},e7=cs({name:"graphicalItems",initialState:wRe,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Or()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Wo(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},prepare:Or()},removeCartesianGraphicalItem:{reducer(e,t){var r=Wo(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Or()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Or()},removePolarGraphicalItem:{reducer(e,t){var r=Wo(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Or()}}}),{addCartesianGraphicalItem:bRe,replaceCartesianGraphicalItem:SRe,removeCartesianGraphicalItem:xRe,addPolarGraphicalItem:ERe,removePolarGraphicalItem:PRe}=e7.actions,RRe=e7.reducer,TRe=e=>{var t=Er(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?t(bRe(e)):r.current!==e&&t(SRe({prev:r.current,next:e})),r.current=e},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(t(xRe(r.current)),r.current=null)},[t]),null},t7=v.memo(TRe);function ARe(e){var t=Er();return v.useLayoutEffect(()=>(t(ERe(e)),()=>{t(PRe(e))}),[t,e]),null}var _Re=["key"],DRe=["onMouseEnter","onClick","onMouseLeave"],kRe=["id"],IRe=["id"];function wB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wB(Object(r),!0).forEach(function(n){NRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NRe(e,t,r){return(t=MRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MRe(e){var t=ORe(e,"string");return typeof t=="symbol"?t:t+""}function ORe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uu(){return uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uu.apply(null,arguments)}function RE(e,t){if(e==null)return{};var r,n,i=FRe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function FRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function LRe(e){var t=v.useMemo(()=>SN(e.children,Td),[e.children]),r=it(n=>UPe(n,e.id,t));return r==null?null:v.createElement(gRe,{legendPayload:r})}var GRe=v.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:i,strokeWidth:s,fill:o,name:a,hide:l,tooltipType:c,id:u}=e,d={dataDefinedOnItem:n.map(p=>p.tooltipPayload),getPosition:p=>{var f;return(f=n[Number(p)])===null||f===void 0?void 0:f.tooltipPosition},settings:{stroke:i,strokeWidth:s,fill:o,dataKey:t,nameKey:r,name:zf(a,t),hide:l,type:c,color:o,unit:"",graphicalItemId:u}};return v.createElement(RN,{tooltipEntrySettings:d})}),jRe=(e,t)=>e>t?"start":e<t?"end":"middle",BRe=(e,t,r)=>ai(typeof t=="function"?t(e):t,r,r*.8),VRe=(e,t,r)=>{var{top:n,left:i,width:s,height:o}=t,a=p9(s,o),l=i+ai(e.cx,s,s/2),c=n+ai(e.cy,o,o/2),u=ai(e.innerRadius,a,0),d=BRe(r,e.outerRadius,a),p=e.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:p}},HRe=(e,t)=>{var r=In(t-e),n=Math.min(Math.abs(t-e),360);return r*n},zRe=(e,t)=>{if(v.isValidElement(e))return v.cloneElement(e,t);if(typeof e=="function")return e(t);var r=er("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,i=RE(t,_Re);return v.createElement(bp,uu({},i,{type:"linear",className:r}))},$Re=(e,t,r)=>{if(v.isValidElement(e))return v.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),v.isValidElement(n)))return n;var i=er("recharts-pie-label-text",U8(e));return v.createElement(pE,uu({},t,{alignmentBaseline:"middle",className:i}),n)};function URe(e){var{sectors:t,props:r,showLabels:n}=e,{label:i,labelLine:s,dataKey:o}=r;if(!n||!i||!t)return null;var a=ss(r),l=Yd(i),c=Yd(s),u=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,d=t.map((p,f)=>{var m=(p.startAngle+p.endAngle)/2,y=hn(p.cx,p.cy,p.outerRadius+u,m),C=Xr(Xr(Xr(Xr({},a),p),{},{stroke:"none"},l),{},{index:f,textAnchor:jRe(y.x,p.cx)},y),w=Xr(Xr(Xr(Xr({},a),p),{},{fill:"none",stroke:p.fill},c),{},{index:f,points:[hn(p.cx,p.cy,p.outerRadius,m),y],key:"line"});return v.createElement(us,{zIndex:pn.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(f)},v.createElement(an,null,s&&zRe(s,w),$Re(i,C,hr(p,o))))});return v.createElement(an,{className:"recharts-pie-labels"},d)}function WRe(e){var{sectors:t,props:r,showLabels:n}=e,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?v.createElement(mN,{label:i}):v.createElement(URe,{sectors:t,props:r,showLabels:n})}function KRe(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:i,shape:s,id:o}=e,a=it(cu),l=it(cN),c=it(axe),{onMouseEnter:u,onClick:d,onMouseLeave:p}=i,f=RE(i,DRe),m=xN(u,i.dataKey,o),y=EN(p),C=PN(d,i.dataKey,o);return t==null||t.length===0?null:v.createElement(v.Fragment,null,t.map((w,b)=>{if((w==null?void 0:w.startAngle)===0&&(w==null?void 0:w.endAngle)===0&&t.length!==1)return null;var x=c==null||c===o,E=String(b)===a&&(l==null||i.dataKey===l)&&x,I=a?n:null,k=r&&E?r:I,P=Xr(Xr({},w),{},{stroke:w.stroke,tabIndex:-1,[V6]:b,[H6]:o});return v.createElement(an,uu({key:"sector-".concat(w==null?void 0:w.startAngle,"-").concat(w==null?void 0:w.endAngle,"-").concat(w.midAngle,"-").concat(b),tabIndex:-1,className:"recharts-pie-sector"},Py(f,w,b),{onMouseEnter:m(w,b),onMouseLeave:y(w,b),onClick:C(w,b)}),v.createElement(Z8,uu({option:s??k,index:b,shapeType:"sector",isActive:E},P)))}))}function qRe(e){var t,{pieSettings:r,displayedData:n,cells:i,offset:s}=e,{cornerRadius:o,startAngle:a,endAngle:l,dataKey:c,nameKey:u,tooltipType:d}=r,p=Math.abs(r.minAngle),f=HRe(a,l),m=Math.abs(f),y=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,C=n.filter(k=>hr(k,c,0)!==0).length,w=(m>=360?C:C-1)*y,b=m-C*p-w,x=n.reduce((k,P)=>{var A=hr(P,c,0);return k+(Xe(A)?A:0)},0),E;if(x>0){var I;E=n.map((k,P)=>{var A=hr(k,c,0),D=hr(k,u,P),L=VRe(r,s,k),M=(Xe(A)?A:0)/x,T,O=Xr(Xr({},k),i&&i[P]&&i[P].props);P?T=I.endAngle+In(f)*y*(A!==0?1:0):T=a;var Q=T+In(f)*((A!==0?p:0)+M*b),X=(T+Q)/2,B=(L.innerRadius+L.outerRadius)/2,W=[{name:D,value:A,payload:O,dataKey:c,type:d,graphicalItemId:r.id}],ne=hn(L.cx,L.cy,B,X);return I=Xr(Xr(Xr(Xr({},r.presentationProps),{},{percent:M,cornerRadius:typeof o=="string"?parseFloat(o):o,name:D,tooltipPayload:W,midAngle:X,middleRadius:B,tooltipPosition:ne},O),L),{},{value:A,dataKey:c,startAngle:T,endAngle:Q,payload:O,paddingAngle:In(f)*y}),I})}return E}function YRe(e){var{showLabels:t,sectors:r,children:n}=e,i=v.useMemo(()=>!t||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,t]);return v.createElement(APe,{value:t?i:void 0},n)}function QRe(e){var{props:t,previousSectorsRef:r,id:n}=e,{sectors:i,isAnimationActive:s,animationBegin:o,animationDuration:a,animationEasing:l,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:p}=t,f=Ny(t,"recharts-pie-"),m=r.current,[y,C]=v.useState(!1),w=v.useCallback(()=>{typeof p=="function"&&p(),C(!1)},[p]),b=v.useCallback(()=>{typeof d=="function"&&d(),C(!0)},[d]);return v.createElement(YRe,{showLabels:!y,sectors:i},v.createElement(Iy,{animationId:f,begin:o,duration:a,isActive:s,easing:l,onAnimationStart:b,onAnimationEnd:w,key:f},x=>{var E,I=[],k=i&&i[0],P=(E=k==null?void 0:k.startAngle)!==null&&E!==void 0?E:0;return i==null||i.forEach((A,D)=>{var L=m&&m[D],M=D>0?Xd(A,"paddingAngle",0):0;if(L){var T=Ar(L.endAngle-L.startAngle,A.endAngle-A.startAngle,x),O=Xr(Xr({},A),{},{startAngle:P+M,endAngle:P+T+M});I.push(O),P=O.endAngle}else{var{endAngle:Q,startAngle:X}=A,B=Ar(0,Q-X,x),W=Xr(Xr({},A),{},{startAngle:P+M,endAngle:P+B+M});I.push(W),P=W.endAngle}}),r.current=I,v.createElement(an,null,v.createElement(KRe,{sectors:I,activeShape:c,inactiveShape:u,allOtherPieProps:t,shape:t.shape,id:n}))}),v.createElement(WRe,{showLabels:!y,sectors:i,props:t}),t.children)}var XRe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:pn.area};function ZRe(e){var{id:t}=e,r=RE(e,kRe),{hide:n,className:i,rootTabIndex:s}=e,o=v.useMemo(()=>SN(e.children,Td),[e.children]),a=it(u=>WPe(u,t,o)),l=v.useRef(null),c=er("recharts-pie",i);return n||a==null?(l.current=null,v.createElement(an,{tabIndex:s,className:c})):v.createElement(us,{zIndex:e.zIndex},v.createElement(GRe,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:a,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),v.createElement(an,{tabIndex:s,className:c},v.createElement(QRe,{props:Xr(Xr({},r),{},{sectors:a}),previousSectorsRef:l,id:t})))}function S_(e){var t=gn(e,XRe),{id:r}=t,n=RE(t,IRe),i=ss(n);return v.createElement(TN,{id:r,type:"pie"},s=>v.createElement(v.Fragment,null,v.createElement(ARe,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),v.createElement(LRe,uu({},n,{id:s})),v.createElement(ZRe,uu({},n,{id:s}))))}S_.displayName="Pie";var JRe=["points"];function bB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function vR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bB(Object(r),!0).forEach(function(n){eTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eTe(e,t,r){return(t=tTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tTe(e){var t=rTe(e,"string");return typeof t=="symbol"?t:t+""}function rTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eS(){return eS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eS.apply(null,arguments)}function nTe(e,t){if(e==null)return{};var r,n,i=iTe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function iTe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function sTe(e){var{option:t,dotProps:r,className:n}=e;if(v.isValidElement(t))return v.cloneElement(t,r);if(typeof t=="function")return t(r);var i=er(n,typeof t!="boolean"?t.className:""),s=r??{},{points:o}=s,a=nTe(s,JRe);return v.createElement(V8,eS({},a,{className:i}))}function oTe(e,t){return e==null?!1:t?!0:e.length===1}function aTe(e){var{points:t,dot:r,className:n,dotClassName:i,dataKey:s,baseProps:o,needClip:a,clipPathId:l,zIndex:c=pn.scatter}=e;if(!oTe(t,r))return null;var u=Q8(r),d=ffe(r),p=t.map((m,y)=>{var C,w,b=vR(vR(vR({r:3},o),d),{},{index:y,cx:(C=m.x)!==null&&C!==void 0?C:void 0,cy:(w=m.y)!==null&&w!==void 0?w:void 0,dataKey:s,value:m.value,payload:m.payload,points:t});return v.createElement(sTe,{key:"dot-".concat(y),option:r,dotProps:b,className:i})}),f={};return a&&l!=null&&(f.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(l,")")),v.createElement(us,{zIndex:c},v.createElement(an,eS({className:n},f),p))}function SB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SB(Object(r),!0).forEach(function(n){lTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lTe(e,t,r){return(t=cTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cTe(e){var t=uTe(e,"string");return typeof t=="symbol"?t:t+""}function uTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r7=0,dTe={xAxis:{},yAxis:{},zAxis:{}},n7=cs({name:"cartesianAxis",initialState:dTe,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Or()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Or()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Or()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Or()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Or()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Or()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Or()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Or()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Or()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,i=e.yAxis[r];if(i){var s,o=i.widthHistory||[];if(o.length===3&&o[0]===o[2]&&n===o[1]&&n!==i.width&&Math.abs(n-((s=o[0])!==null&&s!==void 0?s:0))<=1)return;var a=[...o,n].slice(-3);e.yAxis[r]=xB(xB({},i),{},{width:n,widthHistory:a})}}}}),{addXAxis:hTe,replaceXAxis:pTe,removeXAxis:fTe,addYAxis:gTe,replaceYAxis:mTe,removeYAxis:vTe,addZAxis:IIe,replaceZAxis:NIe,removeZAxis:MIe,updateYAxisWidth:yTe}=n7.actions,CTe=n7.reducer,wTe=ge([Sn],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),bTe=ge([wTe,$l,Ul],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),AN=()=>it(bTe),STe=()=>it(hxe);function EB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function yR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EB(Object(r),!0).forEach(function(n){xTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xTe(e,t,r){return(t=ETe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ETe(e){var t=PTe(e,"string");return typeof t=="symbol"?t:t+""}function PTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RTe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:i,dataKey:s,clipPath:o}=e;if(i===!1||t.x==null||t.y==null)return null;var a={index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},l=yR(yR(yR({},a),Yd(i)),MI(i)),c;return v.isValidElement(i)?c=v.cloneElement(i,l):typeof i=="function"?c=i(l):c=v.createElement(V8,l),v.createElement(an,{className:"recharts-active-dot",clipPath:o},c)};function PB(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:i,clipPath:s,zIndex:o=pn.activeDot}=e,a=it(cu),l=STe();if(t==null||l==null)return null;var c=t.find(u=>l.includes(u.payload));return Jr(c)?null:v.createElement(us,{zIndex:o},v.createElement(RTe,{point:c,childIndex:Number(a),mainColor:r,dataKey:i,activeDot:n,clipPath:s}))}var RB=(e,t,r)=>{var n=r??e;if(!Jr(n))return ai(n,t,0)},TTe=(e,t,r)=>{var n={},i=e.filter(iE),s=e.filter(c=>c.stackId==null),o=i.reduce((c,u)=>{var d=c[u.stackId];return d==null&&(d=[]),d.push(u),c[u.stackId]=d,c},n),a=Object.entries(o).map(c=>{var u,[d,p]=c,f=p.map(y=>y.dataKey),m=RB(t,r,(u=p[0])===null||u===void 0?void 0:u.barSize);return{stackId:d,dataKeys:f,barSize:m}}),l=s.map(c=>{var u=[c.dataKey].filter(p=>p!=null),d=RB(t,r,c.barSize);return{stackId:void 0,dataKeys:u,barSize:d}});return[...a,...l]};function TB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function UC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TB(Object(r),!0).forEach(function(n){ATe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ATe(e,t,r){return(t=_Te(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Te(e){var t=DTe(e,"string");return typeof t=="symbol"?t:t+""}function DTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kTe(e,t,r,n,i){var s,o=n.length;if(!(o<1)){var a=ai(e,r,0,!0),l,c=[];if(Bt((s=n[0])===null||s===void 0?void 0:s.barSize)){var u=!1,d=r/o,p=n.reduce((b,x)=>b+(x.barSize||0),0);p+=(o-1)*a,p>=r&&(p-=(o-1)*a,a=0),p>=r&&d>0&&(u=!0,d*=.9,p=o*d);var f=(r-p)/2>>0,m={offset:f-a,size:0};l=n.reduce((b,x)=>{var E,I={stackId:x.stackId,dataKeys:x.dataKeys,position:{offset:m.offset+m.size+a,size:u?d:(E=x.barSize)!==null&&E!==void 0?E:0}},k=[...b,I];return m=I.position,k},c)}else{var y=ai(t,r,0,!0);r-2*y-(o-1)*a<=0&&(a=0);var C=(r-2*y-(o-1)*a)/o;C>1&&(C>>=0);var w=Bt(i)?Math.min(C,i):C;l=n.reduce((b,x,E)=>[...b,{stackId:x.stackId,dataKeys:x.dataKeys,position:{offset:y+(C+a)*E+(C-w)/2,size:w}}],c)}return l}}var ITe=(e,t,r,n,i,s,o)=>{var a=Jr(o)?t:o,l=kTe(r,n,i!==s?i:s,e,a);return i!==s&&l!=null&&(l=l.map(c=>UC(UC({},c),{},{position:UC(UC({},c.position),{},{offset:c.position.offset-i/2})}))),l},NTe=(e,t)=>{var r=nE(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var i=e[n];if(i){var{stackedData:s}=i;if(s)return s.find(o=>o.key===r)}}}},MTe=(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}};function OTe(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Bt(e.zIndex)?e.zIndex:t}var i7=e=>{var{chartData:t}=e,r=Er(),n=hi();return v.useEffect(()=>n?()=>{}:(r(Bj(t)),()=>{r(Bj(void 0))}),[t,r,n]),null},AB={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},s7=cs({name:"brush",initialState:AB,reducers:{setBrushSettings(e,t){return t.payload==null?AB:t.payload}}}),{setBrushSettings:OIe}=s7.actions,FTe=s7.reducer;function LTe(e){return(e%180+180)%180}var GTe=function(t){var{width:r,height:n}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=LTe(i),o=s*Math.PI/180,a=Math.atan(n/r),l=o>a&&o<Math.PI-a?n/Math.sin(o):r/Math.cos(o);return Math.abs(l)},jTe={dots:[],areas:[],lines:[]},o7=cs({name:"referenceElements",initialState:jTe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Wo(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Wo(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Wo(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:FIe,removeDot:LIe,addArea:GIe,removeArea:jIe,addLine:BIe,removeLine:VIe}=o7.actions,BTe=o7.reducer,VTe=v.createContext(void 0),HTe=e=>{var{children:t}=e,[r]=v.useState("".concat(_v("recharts"),"-clip")),n=AN();if(n==null)return null;var{x:i,y:s,width:o,height:a}=n;return v.createElement(VTe.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:i,y:s,height:a,width:o}))),t)};function a7(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var i=e[n];i!==void 0&&r.push(i)}return r}function zTe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return GTe(n,r)}function $Te(e,t,r){var n=r==="width",{x:i,y:s,width:o,height:a}=e;return t===1?{start:n?i:s,end:n?i+o:s+a}:{start:n?i+o:s+a,end:n?i:s}}function zv(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-i)<=0}function UTe(e,t){return a7(e,t+1)}function WTe(e,t,r,n,i){for(var s=(n||[]).slice(),{start:o,end:a}=t,l=0,c=1,u=o,d=function(){var m=n==null?void 0:n[l];if(m===void 0)return{v:a7(n,c)};var y=l,C,w=()=>(C===void 0&&(C=r(m,y)),C),b=m.coordinate,x=l===0||zv(e,b,w,u,a);x||(l=0,u=o,c+=1),x&&(u=b+e*(w()/2+i),l+=c)},p;c<=s.length;)if(p=d(),p)return p.v;return[]}function KTe(e,t,r,n,i){var s=(n||[]).slice(),o=s.length;if(o===0)return[];for(var{start:a,end:l}=t,c=1;c<=o;c++){for(var u=(o-1)%c,d=a,p=!0,f=function(){var E=n[y];if(E==null)return 0;var I=y,k,P=()=>(k===void 0&&(k=r(E,I)),k),A=E.coordinate,D=y===u||zv(e,A,P,d,l);if(!D)return p=!1,1;D&&(d=A+e*(P()/2+i))},m,y=u;y<o&&(m=f(),!(m!==0&&m===1));y+=c);if(p){for(var C=[],w=u;w<o;w+=c){var b=n[w];b!=null&&C.push(b)}return C}}return[]}function _B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ni(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_B(Object(r),!0).forEach(function(n){qTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_B(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qTe(e,t,r){return(t=YTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YTe(e){var t=QTe(e,"string");return typeof t=="symbol"?t:t+""}function QTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XTe(e,t,r,n,i){for(var s=(n||[]).slice(),o=s.length,{start:a}=t,{end:l}=t,c=function(p){var f=s[p];if(f==null)return 1;var m=f,y,C=()=>(y===void 0&&(y=r(f,p)),y);if(p===o-1){var w=e*(m.coordinate+e*C()/2-l);s[p]=m=ni(ni({},m),{},{tickCoord:w>0?m.coordinate-w*e:m.coordinate})}else s[p]=m=ni(ni({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var b=zv(e,m.tickCoord,C,a,l);b&&(l=m.tickCoord-e*(C()/2+i),s[p]=ni(ni({},m),{},{isShow:!0}))}},u=o-1;u>=0;u--)c(u);return s}function ZTe(e,t,r,n,i,s){var o=(n||[]).slice(),a=o.length,{start:l,end:c}=t;if(s){var u=n[a-1];if(u!=null){var d=r(u,a-1),p=e*(u.coordinate+e*d/2-c);if(o[a-1]=u=ni(ni({},u),{},{tickCoord:p>0?u.coordinate-p*e:u.coordinate}),u.tickCoord!=null){var f=zv(e,u.tickCoord,()=>d,l,c);f&&(c=u.tickCoord-e*(d/2+i),o[a-1]=ni(ni({},u),{},{isShow:!0}))}}}for(var m=s?a-1:a,y=function(b){var x=o[b];if(x==null)return 1;var E=x,I,k=()=>(I===void 0&&(I=r(x,b)),I);if(b===0){var P=e*(E.coordinate-e*k()/2-l);o[b]=E=ni(ni({},E),{},{tickCoord:P<0?E.coordinate-P*e:E.coordinate})}else o[b]=E=ni(ni({},E),{},{tickCoord:E.coordinate});if(E.tickCoord!=null){var A=zv(e,E.tickCoord,k,l,c);A&&(l=E.tickCoord+e*(k()/2+i),o[b]=ni(ni({},E),{},{isShow:!0}))}},C=0;C<m;C++)y(C);return o}function _N(e,t,r){var{tick:n,ticks:i,viewBox:s,minTickGap:o,orientation:a,interval:l,tickFormatter:c,unit:u,angle:d}=e;if(!i||!i.length||!n)return[];if(Xe(l)||ky.isSsr){var p;return(p=UTe(i,Xe(l)?l:0))!==null&&p!==void 0?p:[]}var f=[],m=a==="top"||a==="bottom"?"width":"height",y=u&&m==="width"?hm(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},C=(I,k)=>{var P=typeof c=="function"?c(I.value,k):I.value;return m==="width"?zTe(hm(P,{fontSize:t,letterSpacing:r}),y,d):hm(P,{fontSize:t,letterSpacing:r})[m]},w=i[0],b=i[1],x=i.length>=2&&w!=null&&b!=null?In(b.coordinate-w.coordinate):1,E=$Te(s,x,m);return l==="equidistantPreserveStart"?WTe(x,E,C,i,o):l==="equidistantPreserveEnd"?KTe(x,E,C,i,o):(l==="preserveStart"||l==="preserveStartEnd"?f=ZTe(x,E,C,i,o,l==="preserveStartEnd"):f=XTe(x,E,C,i,o),f.filter(I=>I.isShow))}var JTe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:s=0}=e,o=0;if(t){Array.from(t).forEach(u=>{if(u){var d=u.getBoundingClientRect();d.width>o&&(o=d.width)}});var a=r?r.getBoundingClientRect().width:0,l=i+s,c=o+l+a+(r?n:0);return Math.round(c)}return 0},eAe=["axisLine","width","height","className","hide","ticks","axisType"];function tAe(e,t){if(e==null)return{};var r,n,i=rAe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function rAe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function nh(){return nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nh.apply(null,arguments)}function DB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function qr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DB(Object(r),!0).forEach(function(n){nAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nAe(e,t,r){return(t=iAe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iAe(e){var t=sAe(e,"string");return typeof t=="symbol"?t:t+""}function sAe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vl={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:pn.axis};function oAe(e){var{x:t,y:r,width:n,height:i,orientation:s,mirror:o,axisLine:a,otherSvgProps:l}=e;if(!a)return null;var c=qr(qr(qr({},l),ss(a)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!o||s==="bottom"&&o);c=qr(qr({},c),{},{x1:t,y1:r+u*i,x2:t+n,y2:r+u*i})}else{var d=+(s==="left"&&!o||s==="right"&&o);c=qr(qr({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+i})}return v.createElement("line",nh({},c,{className:er("recharts-cartesian-axis-line",Xd(a,"className"))}))}function aAe(e,t,r,n,i,s,o,a,l){var c,u,d,p,f,m,y=a?-1:1,C=e.tickSize||o,w=Xe(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":c=u=e.coordinate,p=r+ +!a*i,d=p-y*C,m=d-y*l,f=w;break;case"left":d=p=e.coordinate,u=t+ +!a*n,c=u-y*C,f=c-y*l,m=w;break;case"right":d=p=e.coordinate,u=t+ +a*n,c=u+y*C,f=c+y*l,m=w;break;default:c=u=e.coordinate,p=r+ +a*i,d=p+y*C,m=d+y*l,f=w;break}return{line:{x1:c,y1:d,x2:u,y2:p},tick:{x:f,y:m}}}function lAe(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function cAe(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function uAe(e){var{option:t,tickProps:r,value:n}=e,i,s=er(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(t))i=v.cloneElement(t,qr(qr({},r),{},{className:s}));else if(typeof t=="function")i=t(qr(qr({},r),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=er(o,U8(t))),i=v.createElement(pE,nh({},r,{className:o}),n)}return i}var dAe=v.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:s,tickFormatter:o,unit:a,padding:l,tickTextProps:c,orientation:u,mirror:d,x:p,y:f,width:m,height:y,tickSize:C,tickMargin:w,fontSize:b,letterSpacing:x,getTicksConfig:E,events:I,axisType:k}=e,P=_N(qr(qr({},E),{},{ticks:r}),b,x),A=lAe(u,d),D=cAe(u,d),L=ss(E),M=Yd(n),T={};typeof i=="object"&&(T=i);var O=qr(qr({},L),{},{fill:"none"},T),Q=P.map(W=>qr({entry:W},aAe(W,p,f,m,y,u,C,d,w))),X=Q.map(W=>{var{entry:ne,line:J}=W;return v.createElement(an,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ne.value,"-").concat(ne.coordinate,"-").concat(ne.tickCoord)},i&&v.createElement("line",nh({},O,J,{className:er("recharts-cartesian-axis-tick-line",Xd(i,"className"))})))}),B=Q.map((W,ne)=>{var J,ye,{entry:Pe,tick:ue}=W,Z=qr(qr(qr(qr({verticalAnchor:D},L),{},{textAnchor:A,stroke:"none",fill:s},ue),{},{index:ne,payload:Pe,visibleTicksCount:P.length,tickFormatter:o,padding:l},c),{},{angle:(J=(ye=c==null?void 0:c.angle)!==null&&ye!==void 0?ye:L.angle)!==null&&J!==void 0?J:0}),Ve=qr(qr({},Z),M);return v.createElement(an,nh({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Pe.value,"-").concat(Pe.coordinate,"-").concat(Pe.tickCoord)},Py(I,Pe,ne)),n&&v.createElement(uAe,{option:n,tickProps:Ve,value:"".concat(typeof o=="function"?o(Pe.value,ne):Pe.value).concat(a||"")}))});return v.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(k,"-ticks")},B.length>0&&v.createElement(us,{zIndex:pn.label},v.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(k,"-tick-labels"),ref:t},B)),X.length>0&&v.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(k,"-tick-lines")},X))}),hAe=v.forwardRef((e,t)=>{var{axisLine:r,width:n,height:i,className:s,hide:o,ticks:a,axisType:l}=e,c=tAe(e,eAe),[u,d]=v.useState(""),[p,f]=v.useState(""),m=v.useRef(null);v.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var C;return JTe({ticks:m.current,label:(C=e.labelRef)===null||C===void 0?void 0:C.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var y=v.useCallback(C=>{if(C){var w=C.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=w;var b=w[0];if(b){var x=window.getComputedStyle(b),E=x.fontSize,I=x.letterSpacing;(E!==u||I!==p)&&(d(E),f(I))}}},[u,p]);return o||n!=null&&n<=0||i!=null&&i<=0?null:v.createElement(us,{zIndex:e.zIndex},v.createElement(an,{className:er("recharts-cartesian-axis",s)},v.createElement(oAe,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:ss(e)}),v.createElement(dAe,{ref:y,axisType:l,events:c,fontSize:u,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:a,unit:e.unit,width:e.width,x:e.x,y:e.y}),v.createElement(dPe,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},v.createElement(bPe,{label:e.label,labelRef:e.labelRef}),e.children)))}),DN=v.forwardRef((e,t)=>{var r=gn(e,vl);return v.createElement(hAe,nh({},r,{ref:t}))});DN.displayName="CartesianAxis";var pAe=["x1","y1","x2","y2","key"],fAe=["offset"],gAe=["xAxisId","yAxisId"],mAe=["xAxisId","yAxisId"];function kB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function si(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kB(Object(r),!0).forEach(function(n){vAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vAe(e,t,r){return(t=yAe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yAe(e){var t=CAe(e,"string");return typeof t=="symbol"?t:t+""}function CAe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ad(){return ad=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ad.apply(null,arguments)}function tS(e,t){if(e==null)return{};var r,n,i=wAe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function wAe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bAe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:i,width:s,height:o,ry:a}=e;return v.createElement("rect",{x:n,y:i,ry:a,width:s,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function l7(e){var{option:t,lineItemProps:r}=e,n;if(v.isValidElement(t))n=v.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var i,{x1:s,y1:o,x2:a,y2:l,key:c}=r,u=tS(r,pAe),d=(i=ss(u))!==null&&i!==void 0?i:{},{offset:p}=d,f=tS(d,fAe);n=v.createElement("line",ad({},f,{x1:s,y1:o,x2:a,y2:l,fill:"none",key:c}))}return n}function SAe(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=e,a=tS(e,gAe),l=i.map((c,u)=>{var d=si(si({},a),{},{x1:t,y1:c,x2:t+r,y2:c,key:"line-".concat(u),index:u});return v.createElement(l7,{key:"line-".concat(u),option:n,lineItemProps:d})});return v.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function xAe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=e,a=tS(e,mAe),l=i.map((c,u)=>{var d=si(si({},a),{},{x1:c,y1:t,x2:c,y2:t+r,key:"line-".concat(u),index:u});return v.createElement(l7,{option:n,lineItemProps:d,key:"line-".concat(u)})});return v.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function EAe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:s,height:o,horizontalPoints:a,horizontal:l=!0}=e;if(!l||!t||!t.length||a==null)return null;var c=a.map(d=>Math.round(d+i-i)).sort((d,p)=>d-p);i!==c[0]&&c.unshift(0);var u=c.map((d,p)=>{var f=c[p+1],m=f==null,y=m?i+o-d:f-d;if(y<=0)return null;var C=p%t.length;return v.createElement("rect",{key:"react-".concat(p),y:d,x:n,height:y,width:s,stroke:"none",fill:t[C],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return v.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function PAe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:s,width:o,height:a,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var c=l.map(d=>Math.round(d+i-i)).sort((d,p)=>d-p);i!==c[0]&&c.unshift(0);var u=c.map((d,p)=>{var f=c[p+1],m=f==null,y=m?i+o-d:f-d;if(y<=0)return null;var C=p%r.length;return v.createElement("rect",{key:"react-".concat(p),x:d,y:s,width:y,height:a,stroke:"none",fill:r[C],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return v.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var RAe=(e,t)=>{var{xAxis:r,width:n,height:i,offset:s}=e;return L6(_N(si(si(si({},vl),r),{},{ticks:G6(r),viewBox:{x:0,y:0,width:n,height:i}})),s.left,s.left+s.width,t)},TAe=(e,t)=>{var{yAxis:r,width:n,height:i,offset:s}=e;return L6(_N(si(si(si({},vl),r),{},{ticks:G6(r),viewBox:{x:0,y:0,width:n,height:i}})),s.top,s.top+s.height,t)},AAe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:pn.grid};function Eo(e){var t=t1(),r=r1(),n=Y6(),i=si(si({},gn(e,AAe)),{},{x:Xe(e.x)?e.x:n.left,y:Xe(e.y)?e.y:n.top,width:Xe(e.width)?e.width:n.width,height:Xe(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:o,x:a,y:l,width:c,height:u,syncWithTicks:d,horizontalValues:p,verticalValues:f}=i,m=hi(),y=it(D=>_j(D,"xAxis",s,m)),C=it(D=>_j(D,"yAxis",o,m));if(!Ba(c)||!Ba(u)||!Xe(a)||!Xe(l))return null;var w=i.verticalCoordinatesGenerator||RAe,b=i.horizontalCoordinatesGenerator||TAe,{horizontalPoints:x,verticalPoints:E}=i;if((!x||!x.length)&&typeof b=="function"){var I=p&&p.length,k=b({yAxis:C?si(si({},C),{},{ticks:I?p:C.ticks}):void 0,width:t??c,height:r??u,offset:n},I?!0:d);Rb(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(x=k)}if((!E||!E.length)&&typeof w=="function"){var P=f&&f.length,A=w({xAxis:y?si(si({},y),{},{ticks:P?f:y.ticks}):void 0,width:t??c,height:r??u,offset:n},P?!0:d);Rb(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(E=A)}return v.createElement(us,{zIndex:i.zIndex},v.createElement("g",{className:"recharts-cartesian-grid"},v.createElement(bAe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),v.createElement(EAe,ad({},i,{horizontalPoints:x})),v.createElement(PAe,ad({},i,{verticalPoints:E})),v.createElement(SAe,ad({},i,{offset:n,horizontalPoints:x,xAxis:y,yAxis:C})),v.createElement(xAe,ad({},i,{offset:n,verticalPoints:E,xAxis:y,yAxis:C}))))}Eo.displayName="CartesianGrid";var _Ae={},c7=cs({name:"errorBars",initialState:_Ae,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:HIe,replaceErrorBar:zIe,removeErrorBar:$Ie}=c7.actions,DAe=c7.reducer,kAe=["children"];function IAe(e,t){if(e==null)return{};var r,n,i=NAe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function NAe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var MAe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},OAe=v.createContext(MAe);function FAe(e){var{children:t}=e,r=IAe(e,kAe);return v.createElement(OAe.Provider,{value:r},t)}function kN(e,t){var r,n,i=it(c=>ql(c,e)),s=it(c=>Yl(c,t)),o=(r=i==null?void 0:i.allowDataOverflow)!==null&&r!==void 0?r:Rn.allowDataOverflow,a=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Tn.allowDataOverflow,l=o||a;return{needClip:l,needClipX:o,needClipY:a}}function u7(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=AN(),{needClipX:s,needClipY:o,needClip:a}=kN(t,r);if(!a||!i)return null;var{x:l,y:c,width:u,height:d}=i;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:s?l:l-u/2,y:o?c:c-d/2,width:s?u:u*2,height:o?d:d*2}))}function LAe(e){var t=Yd(e),r=3,n=2;if(t!=null){var{r:i,strokeWidth:s}=t,o=Number(i),a=Number(s);return(Number.isNaN(o)||o<0)&&(o=r),(Number.isNaN(a)||a<0)&&(a=n),{r:o,strokeWidth:a}}return{r,strokeWidth:n}}var GAe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy=v;function jAe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var BAe=typeof Object.is=="function"?Object.is:jAe,VAe=Uy.useSyncExternalStore,HAe=Uy.useRef,zAe=Uy.useEffect,$Ae=Uy.useMemo,UAe=Uy.useDebugValue;GAe.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var s=HAe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=$Ae(function(){function l(f){if(!c){if(c=!0,u=f,f=n(f),i!==void 0&&o.hasValue){var m=o.value;if(i(m,f))return d=m}return d=f}if(m=d,BAe(u,f))return m;var y=n(f);return i!==void 0&&i(m,y)?(u=f,m):(u=f,d=y)}var c=!1,u,d,p=r===void 0?null:r;return[function(){return l(t())},p===null?void 0:function(){return l(p())}]},[t,r,n,i]);var a=VAe(e,s[0],s[1]);return zAe(function(){o.hasValue=!0,o.value=a},[a]),UAe(a),a};function WAe(e){e()}function KAe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){WAe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var IB={notify(){},get:()=>[]};function qAe(e,t){let r,n=IB,i=0,s=!1;function o(y){u();const C=n.subscribe(y);let w=!1;return()=>{w||(w=!0,C(),d())}}function a(){n.notify()}function l(){m.onStateChange&&m.onStateChange()}function c(){return s}function u(){i++,r||(r=e.subscribe(l),n=KAe())}function d(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=IB)}function p(){s||(s=!0,u())}function f(){s&&(s=!1,d())}const m={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:p,tryUnsubscribe:f,getListeners:()=>n};return m}var YAe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QAe=YAe(),XAe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",ZAe=XAe(),JAe=()=>QAe||ZAe?v.useLayoutEffect:v.useEffect,e_e=JAe();function NB(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function t_e(e,t){if(NB(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!NB(e[r[i]],t[r[i]]))return!1;return!0}var CR=Symbol.for("react-redux-context"),wR=typeof globalThis<"u"?globalThis:{};function r_e(){if(!v.createContext)return{};const e=wR[CR]??(wR[CR]=new Map);let t=e.get(v.createContext);return t||(t=v.createContext(null),e.set(v.createContext,t)),t}var n_e=r_e();function i_e(e){const{children:t,context:r,serverState:n,store:i}=e,s=v.useMemo(()=>{const l=qAe(i);return{store:i,subscription:l,getServerState:n?()=>n:void 0}},[i,n]),o=v.useMemo(()=>i.getState(),[i]);e_e(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,o]);const a=r||n_e;return v.createElement(a.Provider,{value:s},t)}var s_e=i_e,o_e=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function a_e(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function TE(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(o_e.has(n)){if(e[n]==null&&t[n]==null)continue;if(!t_e(e[n],t[n]))return!1}else if(!a_e(e[n],t[n]))return!1;return!0}function $a(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:r7}function Ua(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:r7}var d7=(e,t,r)=>lu(e,"xAxis",$a(e,t),r),h7=(e,t,r)=>au(e,"xAxis",$a(e,t),r),p7=(e,t,r)=>lu(e,"yAxis",Ua(e,t),r),f7=(e,t,r)=>au(e,"yAxis",Ua(e,t),r),l_e=ge([Zt,d7,p7,h7,f7],(e,t,r,n,i)=>za(e,"xAxis")?uf(t,n,!1):uf(r,i,!1)),c_e=(e,t)=>t,g7=ge([aE,c_e],(e,t)=>e.filter(r=>r.type==="area").find(r=>r.id===t)),m7=e=>{var t=Zt(e),r=za(t,"xAxis");return r?"yAxis":"xAxis"},u_e=(e,t)=>{var r=m7(e);return r==="yAxis"?Ua(e,t):$a(e,t)},d_e=(e,t,r)=>qb(e,m7(e),u_e(e,t),r),h_e=ge([g7,d_e],(e,t)=>{var r;if(!(e==null||t==null)){var{stackId:n}=e,i=nE(e);if(!(n==null||i==null)){var s=(r=t[n])===null||r===void 0?void 0:r.stackedData,o=s==null?void 0:s.find(a=>a.key===i);if(o!=null)return o.map(a=>[a[0],a[1]])}}}),p_e=ge([Zt,d7,p7,h7,f7,h_e,tK,l_e,g7,abe],(e,t,r,n,i,s,o,a,l,c)=>{var{chartData:u,dataStartIndex:d,dataEndIndex:p}=o;if(!(l==null||e!=="horizontal"&&e!=="vertical"||t==null||r==null||n==null||i==null||n.length===0||i.length===0||a==null)){var{data:f}=l,m;if(f&&f.length>0?m=f:m=u==null?void 0:u.slice(d,p+1),m!=null)return I_e({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataStartIndex:d,areaSettings:l,stackedData:s,displayedData:m,chartBaseValue:c,bandSize:a})}}),f_e=["id"],g_e=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Ad(){return Ad=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ad.apply(null,arguments)}function v7(e,t){if(e==null)return{};var r,n,i=m_e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function m_e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function MB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function op(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MB(Object(r),!0).forEach(function(n){v_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function v_e(e,t,r){return(t=y_e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y_e(e){var t=C_e(e,"string");return typeof t=="symbol"?t:t+""}function C_e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rS(e,t){return e&&e!=="none"?e:t}var w_e=e=>{var{dataKey:t,name:r,stroke:n,fill:i,legendType:s,hide:o}=e;return[{inactive:o,dataKey:t,type:s,color:rS(n,i),value:zf(r,t),payload:e}]},b_e=v.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:i,fill:s,name:o,hide:a,unit:l,tooltipType:c,id:u}=e,d={dataDefinedOnItem:r,getPosition:wh,settings:{stroke:n,strokeWidth:i,fill:s,dataKey:t,nameKey:void 0,name:zf(o,t),hide:a,type:c,color:rS(n,s),unit:l,graphicalItemId:u}};return v.createElement(RN,{tooltipEntrySettings:d})});function S_e(e){var{clipPathId:t,points:r,props:n}=e,{needClip:i,dot:s,dataKey:o}=n,a=ss(n);return v.createElement(aTe,{points:r,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:a,needClip:i,clipPathId:t})}function x_e(e){var{showLabels:t,children:r,points:n}=e,i=n.map(s=>{var o,a,l={x:(o=s.x)!==null&&o!==void 0?o:0,y:(a=s.y)!==null&&a!==void 0?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return op(op({},l),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:l,fill:void 0})});return v.createElement(j8,{value:t?i:void 0},r)}function OB(e){var{points:t,baseLine:r,needClip:n,clipPathId:i,props:s}=e,{layout:o,type:a,stroke:l,connectNulls:c,isRange:u}=s,{id:d}=s,p=v7(s,f_e),f=ss(p),m=_i(p);return v.createElement(v.Fragment,null,(t==null?void 0:t.length)>1&&v.createElement(an,{clipPath:n?"url(#clipPath-".concat(i,")"):void 0},v.createElement(bp,Ad({},m,{id:d,points:t,connectNulls:c,type:a,baseLine:r,layout:o,stroke:"none",className:"recharts-area-area"})),l!=="none"&&v.createElement(bp,Ad({},f,{className:"recharts-area-curve",layout:o,type:a,connectNulls:c,fill:"none",points:t})),l!=="none"&&u&&v.createElement(bp,Ad({},f,{className:"recharts-area-curve",layout:o,type:a,connectNulls:c,fill:"none",points:r}))),v.createElement(S_e,{points:t,props:p,clipPathId:i}))}function E_e(e){var t,r,{alpha:n,baseLine:i,points:s,strokeWidth:o}=e,a=(t=s[0])===null||t===void 0?void 0:t.y,l=(r=s[s.length-1])===null||r===void 0?void 0:r.y;if(!Bt(a)||!Bt(l))return null;var c=n*Math.abs(a-l),u=Math.max(...s.map(d=>d.x||0));return Xe(i)?u=Math.max(i,u):i&&Array.isArray(i)&&i.length&&(u=Math.max(...i.map(d=>d.x||0),u)),Xe(u)?v.createElement("rect",{x:0,y:a<l?a:a-c,width:u+(o?parseInt("".concat(o),10):1),height:Math.floor(c)}):null}function P_e(e){var t,r,{alpha:n,baseLine:i,points:s,strokeWidth:o}=e,a=(t=s[0])===null||t===void 0?void 0:t.x,l=(r=s[s.length-1])===null||r===void 0?void 0:r.x;if(!Bt(a)||!Bt(l))return null;var c=n*Math.abs(a-l),u=Math.max(...s.map(d=>d.y||0));return Xe(i)?u=Math.max(i,u):i&&Array.isArray(i)&&i.length&&(u=Math.max(...i.map(d=>d.y||0),u)),Xe(u)?v.createElement("rect",{x:a<l?a:a-c,y:0,width:c,height:Math.floor(u+(o?parseInt("".concat(o),10):1))}):null}function R_e(e){var{alpha:t,layout:r,points:n,baseLine:i,strokeWidth:s}=e;return r==="vertical"?v.createElement(E_e,{alpha:t,points:n,baseLine:i,strokeWidth:s}):v.createElement(P_e,{alpha:t,points:n,baseLine:i,strokeWidth:s})}function T_e(e){var{needClip:t,clipPathId:r,props:n,previousPointsRef:i,previousBaselineRef:s}=e,{points:o,baseLine:a,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:d,onAnimationStart:p,onAnimationEnd:f}=n,m=v.useMemo(()=>({points:o,baseLine:a}),[o,a]),y=Ny(m,"recharts-area-"),C=n1(),[w,b]=v.useState(!1),x=!w,E=v.useCallback(()=>{typeof f=="function"&&f(),b(!1)},[f]),I=v.useCallback(()=>{typeof p=="function"&&p(),b(!0)},[p]);if(C==null)return null;var k=i.current,P=s.current;return v.createElement(x_e,{showLabels:x,points:o},n.children,v.createElement(Iy,{animationId:y,begin:c,duration:u,isActive:l,easing:d,onAnimationEnd:E,onAnimationStart:I,key:y},A=>{if(k){var D=k.length/o.length,L=A===1?o:o.map((T,O)=>{var Q=Math.floor(O*D);if(k[Q]){var X=k[Q];return op(op({},T),{},{x:Ar(X.x,T.x,A),y:Ar(X.y,T.y,A)})}return T}),M;return Xe(a)?M=Ar(P,a,A):Jr(a)||Zo(a)?M=Ar(P,0,A):M=a.map((T,O)=>{var Q=Math.floor(O*D);if(Array.isArray(P)&&P[Q]){var X=P[Q];return op(op({},T),{},{x:Ar(X.x,T.x,A),y:Ar(X.y,T.y,A)})}return T}),A>0&&(i.current=L,s.current=M),v.createElement(OB,{points:L,baseLine:M,needClip:t,clipPathId:r,props:n})}return A>0&&(i.current=o,s.current=a),v.createElement(an,null,l&&v.createElement("defs",null,v.createElement("clipPath",{id:"animationClipPath-".concat(r)},v.createElement(R_e,{alpha:A,points:o,baseLine:a,layout:C,strokeWidth:n.strokeWidth}))),v.createElement(an,{clipPath:"url(#animationClipPath-".concat(r,")")},v.createElement(OB,{points:o,baseLine:a,needClip:t,clipPathId:r,props:n})))}),v.createElement(mN,{label:n.label}))}function A_e(e){var{needClip:t,clipPathId:r,props:n}=e,i=v.useRef(null),s=v.useRef();return v.createElement(T_e,{needClip:t,clipPathId:r,props:n,previousPointsRef:i,previousBaselineRef:s})}class __e extends v.PureComponent{render(){var{hide:t,dot:r,points:n,className:i,top:s,left:o,needClip:a,xAxisId:l,yAxisId:c,width:u,height:d,id:p,baseLine:f,zIndex:m}=this.props;if(t)return null;var y=er("recharts-area",i),C=p,{r:w,strokeWidth:b}=LAe(r),x=Q8(r),E=w*2+b,I=a?"url(#clipPath-".concat(x?"":"dots-").concat(C,")"):void 0;return v.createElement(us,{zIndex:m},v.createElement(an,{className:y},a&&v.createElement("defs",null,v.createElement(u7,{clipPathId:C,xAxisId:l,yAxisId:c}),!x&&v.createElement("clipPath",{id:"clipPath-dots-".concat(C)},v.createElement("rect",{x:o-E/2,y:s-E/2,width:u+E,height:d+E}))),v.createElement(A_e,{needClip:a,clipPathId:C,props:this.props})),v.createElement(PB,{points:n,mainColor:rS(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:I}),this.props.isRange&&Array.isArray(f)&&v.createElement(PB,{points:f,mainColor:rS(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:I}))}}var y7={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:pn.area};function D_e(e){var t,r=gn(e,y7),{activeDot:n,animationBegin:i,animationDuration:s,animationEasing:o,connectNulls:a,dot:l,fill:c,fillOpacity:u,hide:d,isAnimationActive:p,legendType:f,stroke:m,xAxisId:y,yAxisId:C}=r,w=v7(r,g_e),b=bh(),x=m8(),{needClip:E}=kN(y,C),I=hi(),{points:k,isRange:P,baseLine:A}=(t=it(Q=>p_e(Q,e.id,I)))!==null&&t!==void 0?t:{},D=AN();if(b!=="horizontal"&&b!=="vertical"||D==null||x!=="AreaChart"&&x!=="ComposedChart")return null;var{height:L,width:M,x:T,y:O}=D;return!k||!k.length?null:v.createElement(__e,Ad({},w,{activeDot:n,animationBegin:i,animationDuration:s,animationEasing:o,baseLine:A,connectNulls:a,dot:l,fill:c,fillOpacity:u,height:L,hide:d,layout:b,isAnimationActive:p==="auto"?!ky.isSsr:p,isRange:P,legendType:f,needClip:E,points:k,stroke:m,width:M,left:T,top:O,xAxisId:y,yAxisId:C}))}var k_e=(e,t,r,n,i)=>{var s=r??t;if(Xe(s))return s;var o=e==="horizontal"?i:n,a=o.scale.domain();if(o.type==="number"){var l=Math.max(a[0],a[1]),c=Math.min(a[0],a[1]);return s==="dataMin"?c:s==="dataMax"||l<0?l:Math.max(Math.min(a[0],a[1]),0)}return s==="dataMin"?a[0]:s==="dataMax"?a[1]:a[0]};function I_e(e){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:n},stackedData:i,layout:s,chartBaseValue:o,xAxis:a,yAxis:l,displayedData:c,dataStartIndex:u,xAxisTicks:d,yAxisTicks:p,bandSize:f}=e,m=i&&i.length,y=k_e(s,o,r,a,l),C=s==="horizontal",w=!1,b=c.map((E,I)=>{var k,P,A,D;if(m)D=i[u+I];else{var L=hr(E,n);Array.isArray(L)?(D=L,w=!0):D=[y,L]}var M=(k=(P=D)===null||P===void 0?void 0:P[1])!==null&&k!==void 0?k:null,T=M==null||m&&!t&&hr(E,n)==null;if(C){var O;return{x:M2({axis:a,ticks:d,bandSize:f,entry:E,index:I}),y:T?null:(O=l.scale.map(M))!==null&&O!==void 0?O:null,value:D,payload:E}}return{x:T?null:(A=a.scale.map(M))!==null&&A!==void 0?A:null,y:M2({axis:l,ticks:p,bandSize:f,entry:E,index:I}),value:D,payload:E}}),x;return m||w?x=b.map(E=>{var I,k=Array.isArray(E.value)?E.value[0]:null;if(C){var P;return{x:E.x,y:k!=null&&E.y!=null&&(P=l.scale.map(k))!==null&&P!==void 0?P:null,payload:E.payload}}return{x:k!=null&&(I=a.scale.map(k))!==null&&I!==void 0?I:null,y:E.y,payload:E.payload}}):x=C?l.scale.map(y):a.scale.map(y),{points:b,baseLine:x??0,isRange:w}}function N_e(e){var t=gn(e,y7),r=hi();return v.createElement(TN,{id:t.id,type:"area"},n=>v.createElement(v.Fragment,null,v.createElement(J8,{legendPayload:w_e(t)}),v.createElement(b_e,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:n}),v.createElement(t7,{type:"area",id:n,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:j6(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:r,connectNulls:t.connectNulls}),v.createElement(D_e,Ad({},t,{id:n}))))}var L0=v.memo(N_e,TE);L0.displayName="Area";var M_e="Invariant failed";function O_e(e,t){throw new Error(M_e)}function x_(){return x_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x_.apply(null,arguments)}function nS(e){return v.createElement(Z8,x_({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var F_e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(Xe(t))return t;var s=Xe(n)||Jr(n);return s?t(n,i):(s||O_e(),r)}},L_e=(e,t,r)=>r,G_e=(e,t)=>t,Wy=ge([aE,G_e],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),j_e=ge([Wy],e=>e==null?void 0:e.maxBarSize),B_e=(e,t,r,n)=>n,V_e=ge([Zt,aE,$a,Ua,L_e],(e,t,r,n,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),H_e=(e,t,r)=>{var n=Zt(e),i=$a(e,t),s=Ua(e,t);if(!(i==null||s==null))return n==="horizontal"?qb(e,"yAxis",s,r):qb(e,"xAxis",i,r)},z_e=(e,t)=>{var r=Zt(e),n=$a(e,t),i=Ua(e,t);if(!(n==null||i==null))return r==="horizontal"?Aj(e,"xAxis",n):Aj(e,"yAxis",i)},$_e=ge([V_e,obe,z_e],TTe),U_e=(e,t,r)=>{var n,i,s=Wy(e,t);if(s==null)return 0;var o=$a(e,t),a=Ua(e,t);if(o==null||a==null)return 0;var l=Zt(e),c=pK(e),{maxBarSize:u}=s,d=Jr(u)?c:u,p,f;return l==="horizontal"?(p=lu(e,"xAxis",o,r),f=au(e,"xAxis",o,r)):(p=lu(e,"yAxis",a,r),f=au(e,"yAxis",a,r)),(n=(i=uf(p,f,!0))!==null&&i!==void 0?i:d)!==null&&n!==void 0?n:0},C7=(e,t,r)=>{var n=Zt(e),i=$a(e,t),s=Ua(e,t);if(!(i==null||s==null)){var o,a;return n==="horizontal"?(o=lu(e,"xAxis",i,r),a=au(e,"xAxis",i,r)):(o=lu(e,"yAxis",s,r),a=au(e,"yAxis",s,r)),uf(o,a)}},W_e=ge([$_e,pK,sbe,fK,U_e,C7,j_e],ITe),K_e=(e,t,r)=>{var n=$a(e,t);if(n!=null)return lu(e,"xAxis",n,r)},q_e=(e,t,r)=>{var n=Ua(e,t);if(n!=null)return lu(e,"yAxis",n,r)},Y_e=(e,t,r)=>{var n=$a(e,t);if(n!=null)return au(e,"xAxis",n,r)},Q_e=(e,t,r)=>{var n=Ua(e,t);if(n!=null)return au(e,"yAxis",n,r)},X_e=ge([W_e,Wy],MTe),Z_e=ge([H_e,Wy],NTe),J_e=ge([Sn,ZI,K_e,q_e,Y_e,Q_e,X_e,Zt,tK,C7,Z_e,Wy,B_e],(e,t,r,n,i,s,o,a,l,c,u,d,p)=>{var{chartData:f,dataStartIndex:m,dataEndIndex:y}=l;if(!(d==null||o==null||t==null||a!=="horizontal"&&a!=="vertical"||r==null||n==null||i==null||s==null||c==null)){var{data:C}=d,w;if(C!=null&&C.length>0?w=C:w=f==null?void 0:f.slice(m,y+1),w!=null)return TDe({layout:a,barSettings:d,pos:o,parentViewBox:t,bandSize:c,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:s,stackedData:u,displayedData:w,offset:e,cells:p,dataStartIndex:m})}}),eDe=["index"];function E_(){return E_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E_.apply(null,arguments)}function tDe(e,t){if(e==null)return{};var r,n,i=rDe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function rDe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var w7=v.createContext(void 0),nDe=e=>{var t=v.useContext(w7);if(t!=null)return t.stackId;if(e!=null)return j6(e)},iDe=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),sDe=e=>{var t=v.useContext(w7);if(t!=null){var{stackId:r}=t;return"url(#".concat(iDe(r,e),")")}},b7=e=>{var{index:t}=e,r=tDe(e,eDe),n=sDe(t);return v.createElement(an,E_({className:"recharts-bar-stack-layer",clipPath:n},r))},oDe=["onMouseEnter","onMouseLeave","onClick"],aDe=["value","background","tooltipPosition"],lDe=["id"],cDe=["onMouseEnter","onClick","onMouseLeave"];function Fl(){return Fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fl.apply(null,arguments)}function FB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ci(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FB(Object(r),!0).forEach(function(n){uDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uDe(e,t,r){return(t=dDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dDe(e){var t=hDe(e,"string");return typeof t=="symbol"?t:t+""}function hDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iS(e,t){if(e==null)return{};var r,n,i=pDe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function pDe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var fDe=e=>{var{dataKey:t,name:r,fill:n,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:n,value:zf(r,t),payload:e}]},gDe=v.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:i,name:s,hide:o,unit:a,tooltipType:l,id:c}=e,u={dataDefinedOnItem:void 0,getPosition:wh,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:zf(s,t),hide:o,type:l,color:i,unit:a,graphicalItemId:c}};return v.createElement(RN,{tooltipEntrySettings:u})});function mDe(e){var t=it(cu),{data:r,dataKey:n,background:i,allOtherBarProps:s}=e,{onMouseEnter:o,onMouseLeave:a,onClick:l}=s,c=iS(s,oDe),u=xN(o,n,s.id),d=EN(a),p=PN(l,n,s.id);if(!i||r==null)return null;var f=Yd(i);return v.createElement(us,{zIndex:OTe(i,pn.barBackground)},r.map((m,y)=>{var{value:C,background:w,tooltipPosition:b}=m,x=iS(m,aDe);if(!w)return null;var E=u(m,y),I=d(m,y),k=p(m,y),P=Ci(Ci(Ci(Ci(Ci({option:i,isActive:String(y)===t},x),{},{fill:"#eee"},w),f),Py(c,m,y)),{},{onMouseEnter:E,onMouseLeave:I,onClick:k,dataKey:n,index:y,className:"recharts-bar-background-rectangle"});return v.createElement(nS,Fl({key:"background-bar-".concat(y)},P))}))}function vDe(e){var{showLabels:t,children:r,rects:n}=e,i=n==null?void 0:n.map(s=>{var o={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return Ci(Ci({},o),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:o,fill:s.fill})});return v.createElement(j8,{value:t?i:void 0},r)}function yDe(e){var{shape:t,activeBar:r,baseProps:n,entry:i,index:s,dataKey:o}=e,a=it(cu),l=it(cN),c=r&&String(s)===a&&(l==null||o===l),u=c?r:t;return c?v.createElement(us,{zIndex:pn.activeBar},v.createElement(b7,{index:s},v.createElement(nS,Fl({},n,{name:String(n.name)},i,{isActive:c,option:u,index:s,dataKey:o})))):v.createElement(nS,Fl({},n,{name:String(n.name)},i,{isActive:c,option:u,index:s,dataKey:o}))}function CDe(e){var{shape:t,baseProps:r,entry:n,index:i,dataKey:s}=e;return v.createElement(nS,Fl({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:i,dataKey:s}))}function wDe(e){var t,{data:r,props:n}=e,i=(t=ss(n))!==null&&t!==void 0?t:{},{id:s}=i,o=iS(i,lDe),{shape:a,dataKey:l,activeBar:c}=n,{onMouseEnter:u,onClick:d,onMouseLeave:p}=n,f=iS(n,cDe),m=xN(u,l,s),y=EN(p),C=PN(d,l,s);return r?v.createElement(v.Fragment,null,r.map((w,b)=>v.createElement(b7,Fl({index:b,key:"rectangle-".concat(w==null?void 0:w.x,"-").concat(w==null?void 0:w.y,"-").concat(w==null?void 0:w.value,"-").concat(b),className:"recharts-bar-rectangle"},Py(f,w,b),{onMouseEnter:m(w,b),onMouseLeave:y(w,b),onClick:C(w,b)}),c?v.createElement(yDe,{shape:a,activeBar:c,baseProps:o,entry:w,index:b,dataKey:l}):v.createElement(CDe,{shape:a,baseProps:o,entry:w,index:b,dataKey:l})))):null}function bDe(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:i,isAnimationActive:s,animationBegin:o,animationDuration:a,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=t,d=r.current,p=Ny(t,"recharts-bar-"),[f,m]=v.useState(!1),y=!f,C=v.useCallback(()=>{typeof c=="function"&&c(),m(!1)},[c]),w=v.useCallback(()=>{typeof u=="function"&&u(),m(!0)},[u]);return v.createElement(vDe,{showLabels:y,rects:n},v.createElement(Iy,{animationId:p,begin:o,duration:a,isActive:s,easing:l,onAnimationEnd:C,onAnimationStart:w,key:p},b=>{var x=b===1?n:n==null?void 0:n.map((E,I)=>{var k=d&&d[I];if(k)return Ci(Ci({},E),{},{x:Ar(k.x,E.x,b),y:Ar(k.y,E.y,b),width:Ar(k.width,E.width,b),height:Ar(k.height,E.height,b)});if(i==="horizontal"){var P=Ar(0,E.height,b),A=Ar(E.stackedBarStart,E.y,b);return Ci(Ci({},E),{},{y:A,height:P})}var D=Ar(0,E.width,b),L=Ar(E.stackedBarStart,E.x,b);return Ci(Ci({},E),{},{width:D,x:L})});return b>0&&(r.current=x??null),x==null?null:v.createElement(an,null,v.createElement(wDe,{props:t,data:x}))}),v.createElement(mN,{label:t.label}),t.children)}function SDe(e){var t=v.useRef(null);return v.createElement(bDe,{previousRectanglesRef:t,props:e})}var S7=0,xDe=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:hr(e,t)}};class EDe extends v.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:i,xAxisId:s,yAxisId:o,needClip:a,background:l,id:c}=this.props;if(t||r==null)return null;var u=er("recharts-bar",i),d=c;return v.createElement(an,{className:u,id:c},a&&v.createElement("defs",null,v.createElement(u7,{clipPathId:d,xAxisId:s,yAxisId:o})),v.createElement(an,{className:"recharts-bar-rectangles",clipPath:a?"url(#clipPath-".concat(d,")"):void 0},v.createElement(mDe,{data:r,dataKey:n,background:l,allOtherBarProps:this.props}),v.createElement(SDe,this.props)))}}var PDe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:S7,xAxisId:0,yAxisId:0,zIndex:pn.bar};function RDe(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:s,activeBar:o,animationBegin:a,animationDuration:l,animationEasing:c,isAnimationActive:u}=e,{needClip:d}=kN(t,r),p=bh(),f=hi(),m=SN(e.children,Td),y=it(b=>J_e(b,e.id,f,m));if(p!=="vertical"&&p!=="horizontal")return null;var C,w=y==null?void 0:y[0];return w==null||w.height==null||w.width==null?C=0:C=p==="vertical"?w.height/2:w.width/2,v.createElement(FAe,{xAxisId:t,yAxisId:r,data:y,dataPointFormatter:xDe,errorBarOffset:C},v.createElement(EDe,Fl({},e,{layout:p,needClip:d,data:y,xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:s,activeBar:o,animationBegin:a,animationDuration:l,animationEasing:c,isAnimationActive:u})))}function TDe(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:s,xAxis:o,yAxis:a,xAxisTicks:l,yAxisTicks:c,stackedData:u,displayedData:d,offset:p,cells:f,parentViewBox:m,dataStartIndex:y}=e,C=t==="horizontal"?a:o,w=u?C.scale.domain():null,b=tve({numericAxis:C}),x=C.scale.map(b);return d.map((E,I)=>{var k,P,A,D,L,M;if(u){var T=u[I+y];if(T==null)return null;k=Qme(T,w)}else k=hr(E,r),Array.isArray(k)||(k=[b,k]);var O=F_e(n,S7)(k[1],I);if(t==="horizontal"){var Q,X=a.scale.map(k[0]),B=a.scale.map(k[1]);if(X==null||B==null)return null;P=O2({axis:o,ticks:l,bandSize:s,offset:i.offset,entry:E,index:I}),A=(Q=B??X)!==null&&Q!==void 0?Q:void 0,D=i.size;var W=X-B;if(L=Zo(W)?0:W,M={x:P,y:p.top,width:D,height:p.height},Math.abs(O)>0&&Math.abs(L)<Math.abs(O)){var ne=In(L||O)*(Math.abs(O)-Math.abs(L));A-=ne,L+=ne}}else{var J=o.scale.map(k[0]),ye=o.scale.map(k[1]);if(J==null||ye==null)return null;if(P=J,A=O2({axis:a,ticks:c,bandSize:s,offset:i.offset,entry:E,index:I}),D=ye-J,L=i.size,M={x:p.left,y:A,width:p.width,height:L},Math.abs(O)>0&&Math.abs(D)<Math.abs(O)){var Pe=In(D||O)*(Math.abs(O)-Math.abs(D));D+=Pe}}if(P==null||A==null||D==null||L==null)return null;var ue=Ci(Ci({},E),{},{stackedBarStart:x,x:P,y:A,width:D,height:L,value:u?k:k[1],payload:E,background:M,tooltipPosition:{x:P+D/2,y:A+L/2},parentViewBox:m},f&&f[I]&&f[I].props);return ue}).filter(Boolean)}function ADe(e){var t=gn(e,PDe),r=nDe(t.stackId),n=hi();return v.createElement(TN,{id:t.id,type:"bar"},i=>v.createElement(v.Fragment,null,v.createElement(J8,{legendPayload:fDe(t)}),v.createElement(gDe,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:i}),v.createElement(t7,{type:"bar",id:i,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),v.createElement(us,{zIndex:t.zIndex},v.createElement(RDe,Fl({},t,{id:i})))))}var pa=v.memo(ADe,TE);pa.displayName="Bar";var _De=["domain","range"],DDe=["domain","range"];function LB(e,t){if(e==null)return{};var r,n,i=kDe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function kDe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function GB(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function x7(e,t){if(e===t)return!0;var{domain:r,range:n}=e,i=LB(e,_De),{domain:s,range:o}=t,a=LB(t,DDe);return!GB(r,s)||!GB(n,o)?!1:TE(i,a)}var IDe=["type"],NDe=["dangerouslySetInnerHTML","ticks","scale"],MDe=["id","scale"];function P_(){return P_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P_.apply(null,arguments)}function jB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function BB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jB(Object(r),!0).forEach(function(n){ODe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ODe(e,t,r){return(t=FDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FDe(e){var t=LDe(e,"string");return typeof t=="symbol"?t:t+""}function LDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R_(e,t){if(e==null)return{};var r,n,i=GDe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function GDe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function jDe(e){var t=Er(),r=v.useRef(null),n=n1(),{type:i}=e,s=R_(e,IDe),o=tE(n,"xAxis",i),a=v.useMemo(()=>{if(o!=null)return BB(BB({},s),{},{type:o})},[s,o]);return v.useLayoutEffect(()=>{a!=null&&(r.current===null?t(hTe(a)):r.current!==a&&t(pTe({prev:r.current,next:a})),r.current=a)},[a,t]),v.useLayoutEffect(()=>()=>{r.current&&(t(fTe(r.current)),r.current=null)},[t]),null}var BDe=e=>{var{xAxisId:t,className:r}=e,n=it(ZI),i=hi(),s="xAxis",o=it(w=>KK(w,s,t,i)),a=it(w=>zK(w,t)),l=it(w=>aSe(w,t)),c=it(w=>EK(w,t));if(a==null||l==null||c==null)return null;var{dangerouslySetInnerHTML:u,ticks:d,scale:p}=e,f=R_(e,NDe),{id:m,scale:y}=c,C=R_(c,MDe);return v.createElement(DN,P_({},f,C,{x:l.x,y:l.y,width:a.width,height:a.height,className:er("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o,axisType:s}))},VDe={allowDataOverflow:Rn.allowDataOverflow,allowDecimals:Rn.allowDecimals,allowDuplicatedCategory:Rn.allowDuplicatedCategory,angle:Rn.angle,axisLine:vl.axisLine,height:Rn.height,hide:!1,includeHidden:Rn.includeHidden,interval:Rn.interval,label:!1,minTickGap:Rn.minTickGap,mirror:Rn.mirror,orientation:Rn.orientation,padding:Rn.padding,reversed:Rn.reversed,scale:Rn.scale,tick:Rn.tick,tickCount:Rn.tickCount,tickLine:vl.tickLine,tickSize:vl.tickSize,type:Rn.type,xAxisId:0},HDe=e=>{var t=gn(e,VDe);return v.createElement(v.Fragment,null,v.createElement(jDe,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),v.createElement(BDe,t))},Po=v.memo(HDe,x7);Po.displayName="XAxis";var zDe=["type"],$De=["dangerouslySetInnerHTML","ticks","scale"],UDe=["id","scale"];function T_(){return T_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T_.apply(null,arguments)}function VB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function HB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VB(Object(r),!0).forEach(function(n){WDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WDe(e,t,r){return(t=KDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KDe(e){var t=qDe(e,"string");return typeof t=="symbol"?t:t+""}function qDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A_(e,t){if(e==null)return{};var r,n,i=YDe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function YDe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function QDe(e){var t=Er(),r=v.useRef(null),n=n1(),{type:i}=e,s=A_(e,zDe),o=tE(n,"yAxis",i),a=v.useMemo(()=>{if(o!=null)return HB(HB({},s),{},{type:o})},[o,s]);return v.useLayoutEffect(()=>{a!=null&&(r.current===null?t(gTe(a)):r.current!==a&&t(mTe({prev:r.current,next:a})),r.current=a)},[a,t]),v.useLayoutEffect(()=>()=>{r.current&&(t(vTe(r.current)),r.current=null)},[t]),null}function XDe(e){var{yAxisId:t,className:r,width:n,label:i}=e,s=v.useRef(null),o=v.useRef(null),a=it(ZI),l=hi(),c=Er(),u="yAxis",d=it(k=>$K(k,t)),p=it(k=>cSe(k,t)),f=it(k=>KK(k,u,t,l)),m=it(k=>PK(k,t));if(v.useLayoutEffect(()=>{if(!(n!=="auto"||!d||gN(i)||v.isValidElement(i)||m==null)){var k=s.current;if(k){var P=k.getCalculatedWidth();Math.round(d.width)!==Math.round(P)&&c(yTe({id:t,width:P}))}}},[f,d,c,i,t,n,m]),d==null||p==null||m==null)return null;var{dangerouslySetInnerHTML:y,ticks:C,scale:w}=e,b=A_(e,$De),{id:x,scale:E}=m,I=A_(m,UDe);return v.createElement(DN,T_({},b,I,{ref:s,labelRef:o,x:p.x,y:p.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:d.width,height:d.height,className:er("recharts-".concat(u," ").concat(u),r),viewBox:a,ticks:f,axisType:u}))}var ZDe={allowDataOverflow:Tn.allowDataOverflow,allowDecimals:Tn.allowDecimals,allowDuplicatedCategory:Tn.allowDuplicatedCategory,angle:Tn.angle,axisLine:vl.axisLine,hide:!1,includeHidden:Tn.includeHidden,interval:Tn.interval,label:!1,minTickGap:Tn.minTickGap,mirror:Tn.mirror,orientation:Tn.orientation,padding:Tn.padding,reversed:Tn.reversed,scale:Tn.scale,tick:Tn.tick,tickCount:Tn.tickCount,tickLine:vl.tickLine,tickSize:vl.tickSize,type:Tn.type,width:Tn.width,yAxisId:0},JDe=e=>{var t=gn(e,ZDe);return v.createElement(v.Fragment,null,v.createElement(QDe,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),v.createElement(XDe,t))},Ro=v.memo(JDe,x7);Ro.displayName="YAxis";var eke=(e,t)=>t,IN=ge([eke,Zt,bK,Ln,u8,Ql,Exe,Sn],kxe),NN=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},E7=oo("mouseClick"),P7=Ty();P7.startListening({actionCreator:E7,effect:(e,t)=>{var r=e.payload,n=IN(t.getState(),NN(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(xSe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var __=oo("mouseMove"),R7=Ty(),WC=null;R7.startListening({actionCreator:__,effect:(e,t)=>{var r=e.payload;WC!==null&&cancelAnimationFrame(WC);var n=NN(r);WC=requestAnimationFrame(()=>{var i=t.getState(),s=nN(i,i.tooltip.settings.shared);if(s==="axis"){var o=IN(i,n);(o==null?void 0:o.activeIndex)!=null?t.dispatch(t8({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(e8())}WC=null})}});function tke(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var zB={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},T7=cs({name:"rootProps",initialState:zB,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:zB.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),rke=T7.reducer,{updateOptions:nke}=T7.actions,ike=null,ske={updatePolarOptions:(e,t)=>t.payload},A7=cs({name:"polarOptions",initialState:ike,reducers:ske}),{updatePolarOptions:oke}=A7.actions,ake=A7.reducer,_7=oo("keyDown"),D7=oo("focus"),MN=Ty();MN.startListening({actionCreator:_7,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=iN(i,Zf(r),Vy(r),zy(r)),a=o==null?-1:Number(o);if(!(!Number.isFinite(a)||a<0)){var l=Ql(r);if(s==="Enter"){var c=Qb(r,"axis","hover",String(i.index));t.dispatch(v_({active:!i.active,activeIndex:i.index,activeCoordinate:c}));return}var u=pSe(r),d=u==="left-to-right"?1:-1,p=s==="ArrowRight"?1:-1,f=a+p*d;if(!(l==null||f>=l.length||f<0)){var m=Qb(r,"axis","hover",String(f));t.dispatch(v_({active:!0,activeIndex:f.toString(),activeCoordinate:m}))}}}}}});MN.startListening({actionCreator:D7,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var s="0",o=Qb(r,"axis","hover",String(s));t.dispatch(v_({active:!0,activeIndex:s,activeCoordinate:o}))}}}});var Vs=oo("externalEvent"),k7=Ty(),bR=new Map;k7.startListening({actionCreator:Vs,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var i=n.type,s=bR.get(i);s!==void 0&&cancelAnimationFrame(s);var o=requestAnimationFrame(()=>{try{var a=t.getState(),l={activeCoordinate:cxe(a),activeDataKey:cN(a),activeIndex:cu(a),activeLabel:p8(a),activeTooltipIndex:cu(a),isTooltipActive:uxe(a)};r(l,n)}finally{bR.delete(i)}});bR.set(i,o)}}});var lke=ge([Qf],e=>e.tooltipItemPayloads),cke=ge([lke,(e,t)=>t,(e,t,r)=>r],(e,t,r)=>{if(t!=null){var n=e.find(s=>s.settings.graphicalItemId===r);if(n!=null){var{getPosition:i}=n;if(i!=null)return i(t)}}}),I7=oo("touchMove"),N7=Ty();N7.startListening({actionCreator:I7,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),i=nN(n,n.tooltip.settings.shared);if(i==="axis"){var s=r.touches[0];if(s==null)return;var o=IN(n,NN({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&t.dispatch(t8({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var a,l=r.touches[0];if(document.elementFromPoint==null||l==null)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(V6),d=(a=c.getAttribute(H6))!==null&&a!==void 0?a:void 0,p=Xf(n).find(y=>y.id===d);if(u==null||p==null||d==null)return;var{dataKey:f}=p,m=cke(n,u,d);t.dispatch(JK({activeDataKey:f,activeIndex:u,activeCoordinate:m,activeGraphicalItemId:d}))}}}});var uke=l6({brush:FTe,cartesianAxis:CTe,chartData:aEe,errorBars:DAe,graphicalItems:RRe,layout:Ume,legend:Kve,options:rEe,polarAxis:jPe,polarOptions:ake,referenceElements:BTe,rootProps:rke,tooltip:ESe,zIndex:Uxe}),dke=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return mme({reducer:uke,preloadedState:t,middleware:n=>{var i;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([P7.middleware,R7.middleware,MN.middleware,k7.middleware,N7.middleware])},enhancers:n=>{var i=n;return typeof n=="function"&&(i=n()),i.concat(x6({type:"raf"}))},devTools:{serialize:{replacer:tke},name:"recharts-".concat(r)}})};function M7(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=hi(),s=v.useRef(null);if(i)return r;s.current==null&&(s.current=dke(t,n));var o=zI;return v.createElement(s_e,{context:o,store:s.current},r)}function hke(e){var{layout:t,margin:r}=e,n=Er(),i=hi();return v.useEffect(()=>{i||(n(Hme(t)),n(Vme(r)))},[n,i,t,r]),null}var O7=v.memo(hke,TE);function F7(e){var t=Er();return v.useEffect(()=>{t(nke(e))},[t,e]),null}function $B(e){var{zIndex:t,isPanorama:r}=e,n=v.useRef(null),i=Er();return v.useLayoutEffect(()=>(n.current&&i(zxe({zIndex:t,element:n.current,isPanorama:r})),()=>{i($xe({zIndex:t,isPanorama:r}))}),[i,t,r]),v.createElement("g",{tabIndex:-1,ref:n})}function UB(e){var{children:t,isPanorama:r}=e,n=it(Nxe);if(!n||n.length===0)return t;var i=n.filter(o=>o<0),s=n.filter(o=>o>0);return v.createElement(v.Fragment,null,i.map(o=>v.createElement($B,{key:o,zIndex:o,isPanorama:r})),t,s.map(o=>v.createElement($B,{key:o,zIndex:o,isPanorama:r})))}var pke=["children"];function fke(e,t){if(e==null)return{};var r,n,i=gke(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function gke(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function sS(){return sS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sS.apply(null,arguments)}var mke={width:"100%",height:"100%",display:"block"},vke=v.forwardRef((e,t)=>{var r=t1(),n=r1(),i=a9();if(!Ba(r)||!Ba(n))return null;var{children:s,otherAttributes:o,title:a,desc:l}=e,c,u;return o!=null&&(typeof o.tabIndex=="number"?c=o.tabIndex:c=i?0:void 0,typeof o.role=="string"?u=o.role:u=i?"application":void 0),v.createElement(AI,sS({},o,{title:a,desc:l,role:u,tabIndex:c,width:r,height:n,style:mke,ref:t}),s)}),yke=e=>{var{children:t}=e,r=it(Hx);if(!r)return null;var{width:n,height:i,y:s,x:o}=r;return v.createElement(AI,{width:n,height:i,x:o,y:s},t)},WB=v.forwardRef((e,t)=>{var{children:r}=e,n=fke(e,pke),i=hi();return i?v.createElement(yke,null,v.createElement(UB,{isPanorama:!0},r)):v.createElement(vke,sS({ref:t},n),v.createElement(UB,{isPanorama:!1},r))});function Cke(){var e=Er(),[t,r]=v.useState(null),n=it(ave);return v.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;Bt(s)&&s!==n&&e($me(s))}},[t,e,n]),r}function KB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wke(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KB(Object(r),!0).forEach(function(n){bke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bke(e,t,r){return(t=Ske(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ske(e){var t=xke(e,"string");return typeof t=="symbol"?t:t+""}function xke(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qc(){return qc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qc.apply(null,arguments)}var Eke=()=>(mEe(),null);function oS(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var Pke=v.forwardRef((e,t)=>{var r,n,i=v.useRef(null),[s,o]=v.useState({containerWidth:oS((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:oS((n=e.style)===null||n===void 0?void 0:n.height)}),a=v.useCallback((c,u)=>{o(d=>{var p=Math.round(c),f=Math.round(u);return d.containerWidth===p&&d.containerHeight===f?d:{containerWidth:p,containerHeight:f}})},[]),l=v.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null&&typeof ResizeObserver<"u"){var{width:u,height:d}=c.getBoundingClientRect();a(u,d);var p=m=>{var y=m[0];if(y!=null){var{width:C,height:w}=y.contentRect;a(C,w)}},f=new ResizeObserver(p);f.observe(c),i.current=f}},[t,a]);return v.useEffect(()=>()=>{var c=i.current;c!=null&&c.disconnect()},[a]),v.createElement(v.Fragment,null,v.createElement(_y,{width:s.containerWidth,height:s.containerHeight}),v.createElement("div",qc({ref:l},e)))}),Rke=v.forwardRef((e,t)=>{var{width:r,height:n}=e,[i,s]=v.useState({containerWidth:oS(r),containerHeight:oS(n)}),o=v.useCallback((l,c)=>{s(u=>{var d=Math.round(l),p=Math.round(c);return u.containerWidth===d&&u.containerHeight===p?u:{containerWidth:d,containerHeight:p}})},[]),a=v.useCallback(l=>{if(typeof t=="function"&&t(l),l!=null){var{width:c,height:u}=l.getBoundingClientRect();o(c,u)}},[t,o]);return v.createElement(v.Fragment,null,v.createElement(_y,{width:i.containerWidth,height:i.containerHeight}),v.createElement("div",qc({ref:a},e)))}),Tke=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return v.createElement(v.Fragment,null,v.createElement(_y,{width:r,height:n}),v.createElement("div",qc({ref:t},e)))}),Ake=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return typeof r=="string"||typeof n=="string"?v.createElement(Rke,qc({},e,{ref:t})):typeof r=="number"&&typeof n=="number"?v.createElement(Tke,qc({},e,{width:r,height:n,ref:t})):v.createElement(v.Fragment,null,v.createElement(_y,{width:r,height:n}),v.createElement("div",qc({ref:t},e)))});function _ke(e){return e?Pke:Ake}var Dke=v.forwardRef((e,t)=>{var{children:r,className:n,height:i,onClick:s,onContextMenu:o,onDoubleClick:a,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:d,onMouseUp:p,onTouchEnd:f,onTouchMove:m,onTouchStart:y,style:C,width:w,responsive:b,dispatchTouchEvents:x=!0}=e,E=v.useRef(null),I=Er(),[k,P]=v.useState(null),[A,D]=v.useState(null),L=Cke(),M=JI(),T=(M==null?void 0:M.width)>0?M.width:w,O=(M==null?void 0:M.height)>0?M.height:i,Q=v.useCallback(q=>{L(q),typeof t=="function"&&t(q),P(q),D(q),q!=null&&(E.current=q)},[L,t,P,D]),X=v.useCallback(q=>{I(E7(q)),I(Vs({handler:s,reactEvent:q}))},[I,s]),B=v.useCallback(q=>{I(__(q)),I(Vs({handler:c,reactEvent:q}))},[I,c]),W=v.useCallback(q=>{I(e8()),I(Vs({handler:u,reactEvent:q}))},[I,u]),ne=v.useCallback(q=>{I(__(q)),I(Vs({handler:d,reactEvent:q}))},[I,d]),J=v.useCallback(()=>{I(D7())},[I]),ye=v.useCallback(q=>{I(_7(q.key))},[I]),Pe=v.useCallback(q=>{I(Vs({handler:o,reactEvent:q}))},[I,o]),ue=v.useCallback(q=>{I(Vs({handler:a,reactEvent:q}))},[I,a]),Z=v.useCallback(q=>{I(Vs({handler:l,reactEvent:q}))},[I,l]),Ve=v.useCallback(q=>{I(Vs({handler:p,reactEvent:q}))},[I,p]),ve=v.useCallback(q=>{I(Vs({handler:y,reactEvent:q}))},[I,y]),Ze=v.useCallback(q=>{x&&I(I7(q)),I(Vs({handler:m,reactEvent:q}))},[I,x,m]),je=v.useCallback(q=>{I(Vs({handler:f,reactEvent:q}))},[I,f]),de=_ke(b);return v.createElement(b8.Provider,{value:k},v.createElement(d5.Provider,{value:A},v.createElement(de,{width:T??(C==null?void 0:C.width),height:O??(C==null?void 0:C.height),className:er("recharts-wrapper",n),style:wke({position:"relative",cursor:"default",width:T,height:O},C),onClick:X,onContextMenu:Pe,onDoubleClick:ue,onFocus:J,onKeyDown:ye,onMouseDown:Z,onMouseEnter:B,onMouseLeave:W,onMouseMove:ne,onMouseUp:Ve,onTouchEnd:je,onTouchMove:Ze,onTouchStart:ve,ref:Q},v.createElement(Eke,null),r)))}),kke=["width","height","responsive","children","className","style","compact","title","desc"];function Ike(e,t){if(e==null)return{};var r,n,i=Nke(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Nke(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var L7=v.forwardRef((e,t)=>{var{width:r,height:n,responsive:i,children:s,className:o,style:a,compact:l,title:c,desc:u}=e,d=Ike(e,kke),p=ss(d);return l?v.createElement(v.Fragment,null,v.createElement(_y,{width:r,height:n}),v.createElement(WB,{otherAttributes:p,title:c,desc:u},s)):v.createElement(Dke,{className:o,style:a,width:r,height:n,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},v.createElement(WB,{otherAttributes:p,title:c,desc:u,ref:t},v.createElement(HTe,null,s)))});function D_(){return D_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D_.apply(null,arguments)}var Mke={top:5,right:5,bottom:5,left:5},Oke={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Mke,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},G7=v.forwardRef(function(t,r){var n,i=gn(t.categoricalChartProps,Oke),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:l,categoricalChartProps:c}=t,u={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:l,eventEmitter:void 0};return v.createElement(M7,{preloadedState:{options:u},reduxStoreName:(n=c.id)!==null&&n!==void 0?n:s},v.createElement(i7,{chartData:c.data}),v.createElement(O7,{layout:i.layout,margin:i.margin}),v.createElement(F7,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),v.createElement(L7,D_({},i,{ref:r})))}),Fke=["axis","item"],oc=v.forwardRef((e,t)=>v.createElement(G7,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Fke,tooltipPayloadSearcher:fN,categoricalChartProps:e,ref:t}));function Lke(e){var t=Er();return v.useEffect(()=>{t(oke(e))},[t,e]),null}var Gke=["layout"];function k_(){return k_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k_.apply(null,arguments)}function jke(e,t){if(e==null)return{};var r,n,i=Bke(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Bke(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Vke={top:5,right:5,bottom:5,left:5},j7={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Vke,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Hke=v.forwardRef(function(t,r){var n,i=gn(t.categoricalChartProps,j7),{layout:s}=i,o=jke(i,Gke),{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u}=t,d={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return v.createElement(M7,{preloadedState:{options:d},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:a},v.createElement(i7,{chartData:i.data}),v.createElement(O7,{layout:s,margin:i.margin}),v.createElement(F7,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),v.createElement(Lke,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),v.createElement(L7,k_({},o,{ref:r})))});function qB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function YB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qB(Object(r),!0).forEach(function(n){zke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zke(e,t,r){return(t=$ke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $ke(e){var t=Uke(e,"string");return typeof t=="symbol"?t:t+""}function Uke(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wke=["item"],Kke=YB(YB({},j7),{},{layout:"centric",startAngle:0,endAngle:360}),QB=v.forwardRef((e,t)=>{var r=gn(e,Kke);return v.createElement(Hke,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Wke,tooltipPayloadSearcher:fN,categoricalChartProps:r,ref:t})}),qke=["axis"],XB=v.forwardRef((e,t)=>v.createElement(G7,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:qke,tooltipPayloadSearcher:fN,categoricalChartProps:e,ref:t}));const ON="https://us-central1-nutrasafe-705c7.cloudfunctions.net";async function Yke(){const t=await(await fetch(`${ON}/getOverviewStats`)).json();if(!t.success)throw new Error(t.error||"Failed to get overview stats");return t.stats}async function Qke(){const t=await(await fetch(`${ON}/getAnalyticsData`)).json();if(!t.success)throw new Error(t.error||"Failed to get analytics data");return t.analytics}async function Xke(){console.log("getUserAnalytics: Starting...");const e=w3(),t=C3(e,"getUserAnalytics");try{console.log("getUserAnalytics: Calling function...");const r=await t({});console.log("getUserAnalytics: Got result:",r);const n=r.data;if(!n.success)throw console.error("getUserAnalytics: Failed:",n.error),new Error(n.error||"Failed to get user analytics");return console.log("getUserAnalytics: Success!",n.analytics),n.analytics}catch(r){throw console.error("getUserAnalytics: Error:",r),r}}async function Zke(){console.log("getGA4Analytics: Starting...");const e=w3(),t=C3(e,"getGA4Analytics");try{console.log("getGA4Analytics: Calling function...");const r=await t({});console.log("getGA4Analytics: Got result:",r);const n=r.data;if(!n.success){console.error("getGA4Analytics: Failed:",n.error);const i=n.error||"Failed to get GA4 analytics";throw n.setupInstructions?new Error(`${i}

Setup: ${JSON.stringify(n.setupInstructions,null,2)}`):new Error(i)}return console.log("getGA4Analytics: Success!",n.analytics),n.analytics}catch(r){throw console.error("getGA4Analytics: Error:",r),r}}async function Jke(){const t=await(await fetch(`${ON}/getWebsiteAnalytics`)).json();if(!t.success)throw new Error(t.error||"Failed to get website analytics");return t.analytics}const B7=v.createContext(null);function FN(){const e=v.useContext(B7);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}const eIe=({children:e})=>{const[t,r]=v.useState(null),[n,i]=v.useState(!0),[s,o]=v.useState(null);v.useEffect(()=>bce(u=>{r(u),i(!1)}),[]);const a=async(c,u)=>{o(null),i(!0);try{await Cce(c,u)}catch(d){throw o(d.message||"Failed to sign in"),d}finally{i(!1)}},l=async()=>{o(null);try{await wce()}catch(c){o(c.message||"Failed to sign out")}};return h.jsx(B7.Provider,{value:{user:t,isLoading:n,error:s,signIn:a,signOut:l},children:e})},tIe=({onSuccess:e})=>{const{signIn:t,isLoading:r,error:n}=FN(),[i,s]=v.useState(""),[o,a]=v.useState(""),[l,c]=v.useState(null),u=async d=>{if(d.preventDefault(),c(null),!i||!o){c("Please enter email and password");return}try{await t(i,o),e==null||e()}catch(p){c(p.message||"Sign in failed")}};return h.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[h.jsxs("div",{className:"text-center mb-6",children:[h.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),h.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Admin Sign In"}),h.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Sign in to access user analytics"})]}),h.jsxs("form",{onSubmit:u,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),h.jsx("input",{id:"email",type:"email",value:i,onChange:d=>s(d.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"admin@example.com",disabled:r})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),h.jsx("input",{id:"password",type:"password",value:o,onChange:d=>a(d.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter password",disabled:r})]}),(l||n)&&h.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:l||n}),h.jsx("button",{type:"submit",disabled:r,className:"w-full py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:r?h.jsxs(h.Fragment,{children:[h.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),h.jsx("span",{children:"Signing in..."})]}):h.jsx("span",{children:"Sign In"})})]})]})},rIe=()=>{const{user:e,signOut:t}=FN();return e?h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"flex items-center gap-2 bg-green-50 px-3 py-1.5 rounded-full",children:[h.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),h.jsx("span",{className:"text-sm text-green-700 font-medium",children:e.email})]}),h.jsx("button",{onClick:t,className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Sign Out"})]}):null},ac=["#2563eb","#8b5cf6","#22c55e","#f59e0b","#ef4444","#06b6d4","#ec4899","#14b8a6","#f97316","#6366f1"],Ut=({title:e,value:t,subtitle:r,trend:n,color:i="default"})=>{const s={default:"text-gray-900",success:"text-green-600",warning:"text-yellow-600",danger:"text-red-600",info:"text-blue-600"};return h.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[h.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:e}),h.jsx("div",{className:`text-3xl font-bold ${s[i]}`,children:typeof t=="number"?t.toLocaleString():t}),r&&h.jsx("div",{className:"text-sm text-gray-500 mt-1",children:r}),n&&h.jsxs("div",{className:`text-sm mt-1 ${n.isPositive?"text-green-600":"text-red-600"}`,children:[n.isPositive?"":""," ",Math.abs(n.value),"% vs last period"]})]})},hs=({title:e,children:t,className:r=""})=>h.jsxs("div",{className:`bg-white rounded-lg shadow p-4 ${r}`,children:[h.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-4",children:e}),t]}),KC=({className:e=""})=>h.jsx("div",{className:`animate-pulse bg-gray-200 rounded ${e}`}),nIe=({onBack:e})=>{const[t,r]=v.useState("website"),[n,i]=v.useState(!0),[s,o]=v.useState(null),[a,l]=v.useState(null),[c,u]=v.useState(!1),{user:d}=FN(),[p,f]=v.useState(null),[m,y]=v.useState(null),[C,w]=v.useState(null),[b,x]=v.useState(null),[E,I]=v.useState(null),[k,P]=v.useState(null),[A,D]=v.useState(null),{stats:L}=gl(),M=v.useCallback(async()=>{var B,W;i(!0),o(null);try{console.log("fetchData called, user:",d==null?void 0:d.email);const ne=[Jke(),Yke(),Qke()];d?(console.log("Adding getUserAnalytics and getGA4Analytics to promises..."),ne.push(Xke()),ne.push(Zke())):console.log("No user, skipping getUserAnalytics and getGA4Analytics");const J=await Promise.allSettled(ne);if(J[0].status==="fulfilled"?f(J[0].value):console.warn("Website analytics failed:",J[0].reason),J[1].status==="fulfilled"?x(J[1].value):console.warn("Overview stats failed:",J[1].reason),J[2].status==="fulfilled"?I(J[2].value):console.warn("Analytics data failed:",J[2].reason),d&&J[3])if(J[3].status==="fulfilled")y(J[3].value),P(null);else{const ye=((B=J[3].reason)==null?void 0:B.message)||J[3].reason||"Unknown error";console.error("User analytics failed:",ye),y(null),P(String(ye))}else d||(y(null),P(null));if(d&&J[4])if(J[4].status==="fulfilled")w(J[4].value),D(null);else{const ye=((W=J[4].reason)==null?void 0:W.message)||J[4].reason||"Unknown error";console.error("GA4 analytics failed:",ye),w(null),D(String(ye))}else d||(w(null),D(null));l(new Date)}catch(ne){o(ne instanceof Error?ne.message:"Failed to fetch analytics")}finally{i(!1)}},[d]);v.useEffect(()=>{M()},[M]),v.useEffect(()=>{console.log("Auth state:",{user:d==null?void 0:d.email,appUserData:!!m,ga4Data:!!C,isLoading:n,appUserError:k}),d&&!m&&!C&&!n&&(console.log("User signed in, fetching user analytics and GA4..."),M())},[d,m,C,n,M,k]),v.useEffect(()=>{if(!c)return;const B=setInterval(M,3e4);return()=>clearInterval(B)},[c,M]);const T=[{id:"website",label:"Website",icon:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})})},{id:"app",label:"App Users",icon:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})},{id:"database",label:"Database",icon:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})})}],O=()=>p?h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[h.jsx(Ut,{title:"Total Visitors",value:p.totalVisitors,subtitle:"All time"}),h.jsx(Ut,{title:"Consent Rate",value:`${p.consentRate}%`,subtitle:`${p.acceptedConsent} accepted`,color:p.consentRate>=70?"success":p.consentRate>=50?"warning":"danger"}),h.jsx(Ut,{title:"Accepted",value:p.acceptedConsent,color:"success"}),h.jsx(Ut,{title:"Rejected",value:p.rejectedConsent,color:"danger"})]}),h.jsx(hs,{title:"Daily Visitors (Last 30 Days)",className:"col-span-2",children:h.jsx(js,{width:"100%",height:300,children:h.jsxs(XB,{data:p.visitorsByDay,children:[h.jsx(Eo,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),h.jsx(Po,{dataKey:"date",tickFormatter:B=>new Date(B).toLocaleDateString("en-GB",{day:"numeric",month:"short"}),stroke:"#9ca3af",fontSize:12}),h.jsx(Ro,{stroke:"#9ca3af",fontSize:12}),h.jsx(Bs,{labelFormatter:B=>new Date(B).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"}),contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),h.jsx(L0,{type:"monotone",dataKey:"count",name:"Visitors",stroke:"#2563eb",fill:"#3b82f6",fillOpacity:.2})]})})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsx(hs,{title:"Top Pages",children:h.jsx(js,{width:"100%",height:250,children:h.jsxs(oc,{data:p.visitorsByPage,layout:"vertical",children:[h.jsx(Eo,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),h.jsx(Po,{type:"number",stroke:"#9ca3af",fontSize:12}),h.jsx(Ro,{dataKey:"page",type:"category",width:120,stroke:"#9ca3af",fontSize:11,tickFormatter:B=>B.length>20?B.substring(0,20)+"...":B}),h.jsx(Bs,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),h.jsx(pa,{dataKey:"count",name:"Visitors",fill:"#2563eb",radius:[0,4,4,0]})]})})}),h.jsx(hs,{title:"Device Types",children:h.jsx(js,{width:"100%",height:250,children:h.jsxs(QB,{children:[h.jsx(S_,{data:p.deviceBreakdown,dataKey:"count",nameKey:"device",cx:"50%",cy:"50%",outerRadius:80,label:({name:B,percent:W})=>`${B} ${((W||0)*100).toFixed(0)}%`,labelLine:!1,children:p.deviceBreakdown.map((B,W)=>h.jsx(Td,{fill:ac[W%ac.length]},`cell-${W}`))}),h.jsx(Bs,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}})]})})})]}),h.jsx(hs,{title:"Top Referrers",children:h.jsx("div",{className:"space-y-2",children:p.topReferrers.map((B,W)=>h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-6 text-center text-sm font-medium text-gray-400",children:W+1}),h.jsxs("div",{className:"flex-1 bg-gray-100 rounded-full h-6 relative overflow-hidden",children:[h.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${B.count/p.topReferrers[0].count*100}%`,backgroundColor:ac[W%ac.length]}}),h.jsx("span",{className:"absolute inset-0 flex items-center px-3 text-sm font-medium text-gray-700",children:B.referrer})]}),h.jsx("div",{className:"w-16 text-right text-sm font-medium text-gray-600",children:B.count})]},B.referrer))})})]}):h.jsxs("div",{className:"text-center py-12 text-gray-500",children:[h.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),h.jsx("p",{children:"Website analytics not available"}),h.jsx("p",{className:"text-sm mt-1",children:"Make sure the getWebsiteAnalytics Cloud Function is deployed"})]}),Q=()=>d?!C&&!m&&n?h.jsxs("div",{className:"text-center py-12 text-gray-500",children:[h.jsxs("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-400 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),h.jsx("p",{children:"Loading analytics..."}),h.jsx("p",{className:"text-sm mt-1",children:"Fetching data from Google Analytics 4"})]}):A&&A.includes("not configured")?h.jsxs("div",{className:"max-w-2xl mx-auto py-12",children:[h.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("svg",{className:"w-8 h-8 text-yellow-500 flex-shrink-0 mt-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-yellow-800 text-lg mb-2",children:"GA4 Setup Required"}),h.jsx("p",{className:"text-yellow-700 mb-4",children:"To see real app analytics, you need to configure Google Analytics 4:"}),h.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-yellow-700 text-sm",children:[h.jsxs("li",{children:["Go to ",h.jsx("strong",{children:"Google Analytics > Admin > Property Settings"})]}),h.jsxs("li",{children:["Copy the ",h.jsx("strong",{children:"Property ID"})," (numeric, e.g., 123456789)"]}),h.jsxs("li",{children:["Run: ",h.jsx("code",{className:"bg-yellow-100 px-2 py-0.5 rounded font-mono text-xs",children:'firebase functions:config:set ga4.property_id="YOUR_PROPERTY_ID"'})]}),h.jsxs("li",{children:["Run: ",h.jsx("code",{className:"bg-yellow-100 px-2 py-0.5 rounded font-mono text-xs",children:"firebase deploy --only functions"})]}),h.jsxs("li",{children:["In GA4 > Admin > Property Access Management, grant your Firebase service account ",h.jsx("strong",{children:"Viewer"})," role"]})]})]})]})}),m&&h.jsxs("div",{className:"mt-8",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Firestore User Data (Fallback)"}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[h.jsx(Ut,{title:"Total Users",value:m.totalUsers,color:"info"}),h.jsx(Ut,{title:"Active (7 days)",value:m.recentlyActiveUsers,color:"success"}),h.jsx(Ut,{title:"New Today",value:m.newUsersToday}),h.jsx(Ut,{title:"New This Week",value:m.newUsersThisWeek})]})]})]}):!C&&!n&&A?h.jsxs("div",{className:"text-center py-12 text-gray-500",children:[h.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),h.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Failed to load GA4 analytics"}),h.jsxs("p",{className:"text-sm mb-2",children:["Signed in as: ",d.email]}),h.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4 max-w-md mx-auto text-left",children:h.jsx("p",{className:"text-sm text-red-700 font-mono break-all whitespace-pre-wrap",children:A})}),h.jsx("button",{onClick:M,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry Loading Analytics"})]}):C?h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-700",children:[" Showing data from ",h.jsx("strong",{children:C.dateRange.start})," to ",h.jsx("strong",{children:C.dateRange.end}),h.jsx("span",{className:"ml-2 text-blue-500",children:"(Last 30 days)"})]}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[h.jsx(Ut,{title:"Active Users",value:C.summary.activeUsers,subtitle:"Last 30 days",color:"info"}),h.jsx(Ut,{title:"New Users",value:C.summary.newUsers,subtitle:"Last 30 days",color:"success"}),h.jsx(Ut,{title:"Sessions",value:C.summary.sessions,subtitle:`${C.summary.engagementRate}% engaged`}),h.jsx(Ut,{title:"Avg Session",value:C.summary.avgSessionDurationFormatted,subtitle:"Duration"})]}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[h.jsx(Ut,{title:"Screen Views",value:C.summary.screenViews}),h.jsx(Ut,{title:"Total Events",value:C.summary.totalEvents}),h.jsx(Ut,{title:"Engaged Sessions",value:C.summary.engagedSessions,color:"success"}),h.jsx(Ut,{title:"Engagement Rate",value:`${C.summary.engagementRate}%`,color:C.summary.engagementRate>=50?"success":C.summary.engagementRate>=30?"warning":"danger"})]}),h.jsx(hs,{title:"Daily Active Users (Last 30 Days)",children:h.jsx(js,{width:"100%",height:300,children:h.jsxs(XB,{data:C.dailyUsers,children:[h.jsx(Eo,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),h.jsx(Po,{dataKey:"date",tickFormatter:B=>{const W=B.toString();return W.length===8?`${W.slice(6,8)}/${W.slice(4,6)}`:W},stroke:"#9ca3af",fontSize:12}),h.jsx(Ro,{stroke:"#9ca3af",fontSize:12}),h.jsx(Bs,{labelFormatter:B=>{const W=B.toString();return W.length===8?`${W.slice(6,8)}/${W.slice(4,6)}/${W.slice(0,4)}`:W},contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),h.jsx(N0,{}),h.jsx(L0,{type:"monotone",dataKey:"activeUsers",name:"Active Users",stroke:"#2563eb",fill:"#3b82f6",fillOpacity:.2}),h.jsx(L0,{type:"monotone",dataKey:"newUsers",name:"New Users",stroke:"#22c55e",fill:"#22c55e",fillOpacity:.2})]})})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsx(hs,{title:"Top Events",children:h.jsx(js,{width:"100%",height:300,children:h.jsxs(oc,{data:C.topEvents.slice(0,10),layout:"vertical",children:[h.jsx(Eo,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),h.jsx(Po,{type:"number",stroke:"#9ca3af",fontSize:12}),h.jsx(Ro,{dataKey:"event",type:"category",width:140,stroke:"#9ca3af",fontSize:11,tickFormatter:B=>B.length>20?B.substring(0,20)+"...":B}),h.jsx(Bs,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),h.jsx(pa,{dataKey:"count",name:"Event Count",fill:"#8b5cf6",radius:[0,4,4,0]})]})})}),h.jsx(hs,{title:"Top Screens",children:h.jsx(js,{width:"100%",height:300,children:h.jsxs(oc,{data:C.topScreens,layout:"vertical",children:[h.jsx(Eo,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),h.jsx(Po,{type:"number",stroke:"#9ca3af",fontSize:12}),h.jsx(Ro,{dataKey:"screen",type:"category",width:140,stroke:"#9ca3af",fontSize:11,tickFormatter:B=>B.length>20?B.substring(0,20)+"...":B}),h.jsx(Bs,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),h.jsx(pa,{dataKey:"views",name:"Screen Views",fill:"#22c55e",radius:[0,4,4,0]})]})})})]}),h.jsx(hs,{title:"Engagement by Day of Week",children:h.jsx(js,{width:"100%",height:250,children:h.jsxs(oc,{data:C.engagementByDay,children:[h.jsx(Eo,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),h.jsx(Po,{dataKey:"day",stroke:"#9ca3af",fontSize:12}),h.jsx(Ro,{stroke:"#9ca3af",fontSize:12}),h.jsx(Bs,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),h.jsx(N0,{}),h.jsx(pa,{dataKey:"activeUsers",name:"Active Users",fill:"#2563eb",radius:[4,4,0,0]}),h.jsx(pa,{dataKey:"sessions",name:"Sessions",fill:"#06b6d4",radius:[4,4,0,0]})]})})}),m&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"border-t border-gray-200 pt-6 mt-6",children:h.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:" App-Specific Metrics (from Firestore)"})}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[h.jsx(Ut,{title:"Registered Users",value:m.totalUsers,subtitle:"In Firestore"}),h.jsx(Ut,{title:"Total Scans",value:m.totalScans,subtitle:`${m.avgScansPerUser} avg/user`}),h.jsx(Ut,{title:"Total Searches",value:m.totalSearches,subtitle:`${m.avgSearchesPerUser} avg/user`}),h.jsx(Ut,{title:"Reactions Logged",value:m.totalReactionsLogged})]}),m.topAllergens.length>0&&h.jsx(hs,{title:"Top Tracked Allergens",children:h.jsx(js,{width:"100%",height:300,children:h.jsxs(oc,{data:m.topAllergens,children:[h.jsx(Eo,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),h.jsx(Po,{dataKey:"allergen",stroke:"#9ca3af",fontSize:12,angle:-45,textAnchor:"end",height:80}),h.jsx(Ro,{stroke:"#9ca3af",fontSize:12}),h.jsx(Bs,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),h.jsx(pa,{dataKey:"count",name:"Users",fill:"#ef4444",radius:[4,4,0,0]})]})})})]})]}):m?h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-sm text-yellow-700",children:" GA4 analytics unavailable. Showing Firestore user data only."}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[h.jsx(Ut,{title:"Total Users",value:m.totalUsers,color:"info"}),h.jsx(Ut,{title:"Active (7 days)",value:m.recentlyActiveUsers,color:"success"}),h.jsx(Ut,{title:"New Today",value:m.newUsersToday}),h.jsx(Ut,{title:"New This Week",value:m.newUsersThisWeek})]}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[h.jsx(Ut,{title:"Total Scans",value:m.totalScans,subtitle:`${m.avgScansPerUser} avg/user`}),h.jsx(Ut,{title:"Total Searches",value:m.totalSearches,subtitle:`${m.avgSearchesPerUser} avg/user`}),h.jsx(Ut,{title:"Foods Logged",value:m.totalFoodsLogged}),h.jsx(Ut,{title:"Reactions Logged",value:m.totalReactionsLogged})]})]}):h.jsxs("div",{className:"text-center py-12 text-gray-500",children:[h.jsx("p",{children:"No analytics data available"}),h.jsx("button",{onClick:M,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry Loading"})]}):h.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:h.jsx(tIe,{onSuccess:()=>{console.log("Sign in success, will refetch...")}})}),X=()=>h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[h.jsx(Ut,{title:"Total Foods",value:(b==null?void 0:b.totalFoods)??(L==null?void 0:L.totalFoods)??0,color:"info"}),h.jsx(Ut,{title:"Verified",value:((b==null?void 0:b.humanVerifiedFoods)??0)+((b==null?void 0:b.aiVerifiedFoods)??0),subtitle:`${(b==null?void 0:b.humanVerifiedFoods)??0} human, ${(b==null?void 0:b.aiVerifiedFoods)??0} AI`,color:"success"}),h.jsx(Ut,{title:"Unverified",value:(b==null?void 0:b.unverifiedFoods)??0,color:(b==null?void 0:b.unverifiedFoods)??!1?"warning":"default"}),h.jsx(Ut,{title:"Data Completeness",value:`${(b==null?void 0:b.dataCompleteness)??0}%`,color:((b==null?void 0:b.dataCompleteness)??0)>=80?"success":((b==null?void 0:b.dataCompleteness)??0)>=50?"warning":"danger"})]}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[h.jsx(Ut,{title:"With Ingredients",value:(b==null?void 0:b.foodsWithIngredients)??0,subtitle:`${b!=null&&b.totalFoods?Math.round(b.foodsWithIngredients/b.totalFoods*100):0}% of total`}),h.jsx(Ut,{title:"With Nutrition",value:(b==null?void 0:b.foodsWithNutrition)??0,subtitle:`${b!=null&&b.totalFoods?Math.round(b.foodsWithNutrition/b.totalFoods*100):0}% of total`}),h.jsx(Ut,{title:"Pending Verification",value:(b==null?void 0:b.pendingVerifications)??0,color:(b==null?void 0:b.pendingVerifications)??!1?"warning":"default"})]}),E&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsx(hs,{title:"Top Brands",children:h.jsx(js,{width:"100%",height:300,children:h.jsxs(oc,{data:E.topBrands,layout:"vertical",children:[h.jsx(Eo,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),h.jsx(Po,{type:"number",stroke:"#9ca3af",fontSize:12}),h.jsx(Ro,{dataKey:"brand",type:"category",width:100,stroke:"#9ca3af",fontSize:11,tickFormatter:B=>B.length>15?B.substring(0,15)+"...":B}),h.jsx(Bs,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),h.jsx(pa,{dataKey:"count",name:"Products",fill:"#8b5cf6",radius:[0,4,4,0]})]})})}),h.jsx(hs,{title:"Top Categories",children:h.jsx(js,{width:"100%",height:300,children:h.jsxs(oc,{data:E.topCategories,layout:"vertical",children:[h.jsx(Eo,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),h.jsx(Po,{type:"number",stroke:"#9ca3af",fontSize:12}),h.jsx(Ro,{dataKey:"category",type:"category",width:100,stroke:"#9ca3af",fontSize:11,tickFormatter:B=>B.length>15?B.substring(0,15)+"...":B}),h.jsx(Bs,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),h.jsx(pa,{dataKey:"count",name:"Products",fill:"#22c55e",radius:[0,4,4,0]})]})})})]}),E.nutritionGrades&&Object.keys(E.nutritionGrades).length>0&&h.jsx(hs,{title:"Nutrition Grades Distribution",children:h.jsx(js,{width:"100%",height:300,children:h.jsxs(oc,{data:Object.entries(E.nutritionGrades).map(([B,W])=>({grade:B,count:W})).sort((B,W)=>{const ne=["A+","A","B","C","D","E","F"];return ne.indexOf(B.grade)-ne.indexOf(W.grade)}),children:[h.jsx(Eo,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),h.jsx(Po,{dataKey:"grade",stroke:"#9ca3af",fontSize:12}),h.jsx(Ro,{stroke:"#9ca3af",fontSize:12}),h.jsx(Bs,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),h.jsx(pa,{dataKey:"count",name:"Foods",radius:[4,4,0,0],children:Object.entries(E.nutritionGrades).map(([B],W)=>{const ne={"A+":"#22c55e",A:"#4ade80",B:"#a3e635",C:"#fbbf24",D:"#fb923c",E:"#f87171",F:"#ef4444"};return h.jsx(Td,{fill:ne[B]||ac[W%ac.length]},`cell-${W}`)})})]})})})]}),(L==null?void 0:L.byIndex)&&h.jsx(hs,{title:"Index Distribution",children:h.jsx(js,{width:"100%",height:300,children:h.jsxs(QB,{children:[h.jsx(S_,{data:Object.entries(L.byIndex).filter(([B,W])=>W>0).map(([B,W])=>({name:B.replace(/_/g," ").replace(/foods?/gi,"").trim()||B,value:W})),dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,label:({name:B,percent:W})=>`${B} ${((W||0)*100).toFixed(0)}%`,labelLine:!0,children:Object.entries(L.byIndex).filter(([B,W])=>W>0).map((B,W)=>h.jsx(Td,{fill:ac[W%ac.length]},`cell-${W}`))}),h.jsx(Bs,{formatter:B=>typeof B=="number"?B.toLocaleString():B,contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),h.jsx(N0,{})]})})})]});return h.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[h.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),h.jsx("span",{children:"Back"})]}),h.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Analytics Dashboard"})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx(rIe,{}),a&&h.jsxs("span",{className:"text-sm text-gray-500",children:["Updated ",a.toLocaleTimeString()]}),h.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600 cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:c,onChange:B=>u(B.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Auto-refresh"]}),h.jsxs("button",{onClick:M,disabled:n,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[n?h.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),h.jsx("span",{children:"Refresh"})]})]})]})}),h.jsx("div",{className:"bg-white border-b border-gray-200 px-6",children:h.jsx("div",{className:"flex gap-1 py-2",children:T.map(B=>h.jsxs("button",{onClick:()=>r(B.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t===B.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[B.icon,h.jsx("span",{children:B.label})]},B.id))})}),h.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[s&&h.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),h.jsx("span",{children:s})]})}),n&&!p&&!m&&!b?h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[...Array(4)].map((B,W)=>h.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[h.jsx(KC,{className:"h-4 w-20 mb-2"}),h.jsx(KC,{className:"h-8 w-24"})]},W))}),h.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[h.jsx(KC,{className:"h-4 w-32 mb-4"}),h.jsx(KC,{className:"h-64 w-full"})]})]}):h.jsxs(h.Fragment,{children:[t==="website"&&O(),t==="app"&&Q(),t==="database"&&X()]})]})]})},Yc=[{id:"milk",name:"Milk & Milk Alternatives",description:"Liquid milk products and plant-based alternatives for drinking",keywords:["milk","semi-skimmed","skimmed","whole milk","oat milk","almond milk","soy milk","soya milk","lactofree"],excludeKeywords:["chocolate","milkshake","milk chocolate","milky bar","milky way","condensed","evaporated","powder","dried"],defaultServingG:200,servingSizes:[{name:"Small glass",grams:150},{name:"Medium glass",grams:200},{name:"Large glass",grams:300}],toleranceMin:100,toleranceMax:500,examples:["Whole Milk","Semi-Skimmed Milk","Oatly Oat Milk","Alpro Soya Milk","Lactofree Semi-Skimmed"],notExamples:["Cadbury Dairy Milk","Milk Chocolate Digestives","Chocolate Milkshake","Milky Bar","Milky Way"]},{id:"cheese",name:"Cheese",description:"Hard and soft cheeses",keywords:["cheese","cheddar","mozzarella","brie","camembert","stilton","parmesan","feta","halloumi","gouda","edam","red leicester","wensleydale"],excludeKeywords:["cheesecake","cheese and onion","cheese sandwich","macaroni cheese","cheese string"],defaultServingG:30,toleranceMin:15,toleranceMax:100,examples:["Cathedral City Mature Cheddar","Philadelphia Cream Cheese","Babybel","Boursin","Grated Mozzarella"],notExamples:["New York Cheesecake","Cheese and Onion Crisps","Cheese Sandwich","Mac and Cheese"]},{id:"yoghurt",name:"Yoghurt & Fromage Frais",description:"Yoghurts, fromage frais, and cultured dairy desserts",keywords:["yoghurt","yogurt","fromage frais","skyr","kefir","activia","muller","yeo valley","fage"],excludeKeywords:["yoghurt coated","yogurt raisins"],defaultServingG:125,servingSizes:[{name:"Small pot",grams:100},{name:"Standard pot",grams:125},{name:"Large pot",grams:150}],toleranceMin:50,toleranceMax:500,examples:["Muller Corner","Activia Strawberry","Fage Total 0%","Yeo Valley Organic","Petits Filous"],notExamples:["Yoghurt Coated Raisins","Yoghurt Covered Nuts"]},{id:"butter_spread",name:"Butter & Spreads",description:'Butter, margarine, spreadable fats, and butter alternatives. Includes "Creamy and Buttery" products like Elmlea which are plant-based butter substitutes.',keywords:["butter","margarine","spread","flora","lurpak","anchor","bertolli","clover","utterly butterly","elmlea","creamy and buttery","buttery salted","buttery unsalted"],excludeKeywords:["peanut butter","almond butter","chocolate spread","jam","marmalade","marmite"],defaultServingG:10,toleranceMin:5,toleranceMax:30,examples:["Lurpak Spreadable","Flora Original","Anchor Butter","Clover","Bertolli","Elmlea Creamy and Buttery Salted","Elmlea Creamy and Buttery Unsalted"],notExamples:["Peanut Butter","Nutella","Biscoff Spread","Marmite","Elmlea Double (cream alternative)","Elmlea Single (cream alternative)"]},{id:"cream",name:"Cream",description:"Single, double, whipping, and clotted cream (REAL dairy cream only)",keywords:["cream","single cream","double cream","whipping cream","clotted cream","soured cream","creme fraiche"],excludeKeywords:["ice cream","cream cheese","cream cracker","cream of","cream liqueur","cream egg","elmlea","cream alternative","plant cream","creamy"],defaultServingG:30,toleranceMin:15,toleranceMax:100,examples:["Rodda's Clotted Cream","Creme Fraiche","Soured Cream","Tesco Double Cream","Sainsbury's Single Cream"],notExamples:["Ice Cream","Cream Crackers","Cream of Tomato Soup","Cream Egg","Irish Cream Liqueur","Elmlea (cream alternative)"]},{id:"cream_alternatives",name:"Cream Alternatives",description:'Plant-based and non-dairy cream for pouring/cooking/whipping (NOT butter substitutes). Elmlea Single/Double are cream alternatives. But "Creamy and Buttery" Elmlea = butter substitute  goes in butter_spreads.',keywords:["cream alternative","plant cream","vegan cream","oat cream","soy cream","elmlea single","elmlea double","elmlea plant"],excludeKeywords:["ice cream","cream cheese","creamy and buttery","buttery salted","buttery unsalted"],defaultServingG:30,toleranceMin:15,toleranceMax:100,examples:["Elmlea Double","Elmlea Single","Elmlea Plant Double","Oatly Oat Cream","Alpro Soya Cream"],notExamples:["Tesco Double Cream","Rodda's Clotted Cream","Real dairy cream","Elmlea Creamy and Buttery (butter substitute)"]},{id:"eggs",name:"Eggs",description:"Whole eggs - chicken, duck, quail",keywords:["egg","eggs","free range","barn eggs","organic eggs"],excludeKeywords:["egg fried rice","egg sandwich","egg mayo","scotch egg","easter egg","cream egg","creme egg"],defaultServingG:60,servingSizes:[{name:"Medium egg",grams:50},{name:"Large egg",grams:60},{name:"Very large egg",grams:70}],toleranceMin:35,toleranceMax:100,examples:["Large Free Range Eggs","Organic Eggs","Clarence Court Eggs","Quail Eggs"],notExamples:["Scotch Egg","Cadbury Creme Egg","Easter Egg","Egg Fried Rice","Egg Mayo Sandwich"]},{id:"bread_sliced",name:"Sliced Bread",description:"Pre-sliced bread loaves - white, wholemeal, seeded",keywords:["bread","loaf","sliced","white bread","wholemeal bread","brown bread","warburtons","hovis","kingsmill"],excludeKeywords:["garlic bread","bread roll","bread stick","naan bread","pitta","flatbread","breadcrumbs","bread sauce"],defaultServingG:38,servingSizes:[{name:"Thin slice",grams:25},{name:"Medium slice",grams:38},{name:"Thick slice",grams:50}],toleranceMin:20,toleranceMax:80,examples:["Warburtons Toastie White","Hovis Best of Both","Kingsmill 50/50","Roberts Bakery Wholemeal"],notExamples:["Garlic Bread","Ciabatta Roll","Breadsticks","Stuffing"]},{id:"bread_rolls",name:"Bread Rolls & Buns",description:"Individual bread rolls, baps, buns, bagels",keywords:["roll","bun","bap","bagel","brioche bun","ciabatta roll","sub roll","hot dog bun","burger bun"],excludeKeywords:["sausage roll","spring roll","swiss roll","cinnamon roll","iced bun"],defaultServingG:60,servingSizes:[{name:"Small roll",grams:45},{name:"Medium roll",grams:60},{name:"Large roll/bagel",grams:85}],toleranceMin:30,toleranceMax:120,examples:["White Bread Rolls","Warburtons Sandwich Thins","New York Bagels","Brioche Burger Buns"],notExamples:["Sausage Roll","Spring Roll","Cinnamon Roll","Chelsea Bun"]},{id:"crumpets",name:"Crumpets & English Muffins",description:"Crumpets, English muffins, pikelet",keywords:["crumpet","english muffin","muffin","pikelet"],excludeKeywords:["muffin chocolate","blueberry muffin","chocolate chip muffin","breakfast muffin"],defaultServingG:55,toleranceMin:40,toleranceMax:80,examples:["Warburtons Crumpets","Kingsmill Crumpets","Warburtons English Muffins"],notExamples:["Chocolate Muffin","Blueberry Muffin","McDonalds McMuffin"]},{id:"wraps_tortillas",name:"Wraps & Tortillas",description:"Flour tortillas, wraps, flatbreads for filling",keywords:["wrap","tortilla","flatbread","naan","pitta","pita","chapati","roti"],excludeKeywords:["tortilla chips","wrap meal","chicken wrap"],defaultServingG:60,servingSizes:[{name:"Small wrap",grams:40},{name:"Medium wrap",grams:60},{name:"Large wrap",grams:80}],toleranceMin:30,toleranceMax:120,examples:["Old El Paso Flour Tortillas","Mission Deli Wraps","Warburtons Wraps","Mini Naans"],notExamples:["Doritos","Tortilla Chips","Chicken Fajita Wrap Meal"]},{id:"croissants_pastries",name:"Croissants & Pastries",description:"Croissants, pain au chocolat, danish pastries",keywords:["croissant","pain au chocolat","danish","pastry","almond croissant"],excludeKeywords:["pastry case","puff pastry","filo pastry","shortcrust"],defaultServingG:60,toleranceMin:40,toleranceMax:120,examples:["All Butter Croissant","Pain au Chocolat","Almond Croissant","Cinnamon Swirl"],notExamples:["Jus-Rol Puff Pastry","Filo Pastry Sheets","Cornish Pasty"]},{id:"cereal_cold",name:"Breakfast Cereals (Cold)",description:"Cold cereals - flakes, puffs, clusters, granola",keywords:["cereal","cornflakes","weetabix","shreddies","cheerios","special k","bran flakes","granola","muesli","crunchy nut","coco pops","frosties","rice krispies","shredded wheat"],excludeKeywords:["cereal bar"],defaultServingG:40,servingSizes:[{name:"Small bowl",grams:30},{name:"Medium bowl",grams:40},{name:"Large bowl",grams:60}],toleranceMin:20,toleranceMax:100,examples:["Kelloggs Corn Flakes","Weetabix","Nestle Shreddies","Jordans Granola","Alpen Muesli"],notExamples:["Nutri-Grain Cereal Bar","Kelloggs Crunchy Nut Bar"]},{id:"porridge_oats",name:"Porridge & Oats",description:"Oats, porridge, overnight oats, instant oats",keywords:["oats","porridge","oatmeal","oat so simple","ready brek","overnight oats","rolled oats","steel cut oats"],excludeKeywords:["oat milk","oat cake","flapjack"],defaultServingG:40,toleranceMin:25,toleranceMax:80,examples:["Quaker Oats","Oat So Simple","Ready Brek","Flahavans Porridge Oats"],notExamples:["Oatly Oat Milk","Nairns Oatcakes","Oat Flapjack"]},{id:"chicken_breast",name:"Chicken Breast",description:"Raw and cooked chicken breast fillets",keywords:["chicken breast","chicken fillet","mini fillets","chicken escalope"],excludeKeywords:["chicken kiev","chicken nugget","chicken burger","chicken pie","stuffed chicken"],defaultServingG:150,servingSizes:[{name:"Small breast",grams:120},{name:"Medium breast",grams:150},{name:"Large breast",grams:200}],toleranceMin:80,toleranceMax:300,examples:["Chicken Breast Fillets","Chargrilled Chicken Breast","Chicken Mini Fillets"],notExamples:["Chicken Kiev","Chicken Nuggets","KFC Chicken","Nandos Chicken"]},{id:"chicken_thigh_drumstick",name:"Chicken Thighs & Drumsticks",description:"Chicken thighs and drumsticks, bone-in or boneless",keywords:["chicken thigh","chicken drumstick","chicken leg","thigh fillet"],excludeKeywords:[],defaultServingG:120,toleranceMin:60,toleranceMax:200,examples:["Chicken Thigh Fillets","Chicken Drumsticks","Skin-On Chicken Thighs"],notExamples:["Chicken Breast","Whole Chicken"]},{id:"beef_mince",name:"Beef Mince",description:"Minced beef of various fat percentages",keywords:["beef mince","minced beef","ground beef","lean mince","extra lean mince","steak mince"],excludeKeywords:["bolognese","lasagne","chilli con carne","burger"],defaultServingG:125,toleranceMin:80,toleranceMax:250,examples:["Lean Beef Mince 5% Fat","Beef Steak Mince","Extra Lean Minced Beef"],notExamples:["Spaghetti Bolognese","Beef Burgers","Beef Lasagne"]},{id:"beef_steak",name:"Beef Steak",description:"Steak cuts - sirloin, ribeye, fillet, rump",keywords:["steak","sirloin","ribeye","fillet steak","rump steak","bavette","onglet"],excludeKeywords:["steak pie","steak slice","steak bake","steak mince"],defaultServingG:225,servingSizes:[{name:"Small steak",grams:170},{name:"Medium steak",grams:225},{name:"Large steak",grams:300}],toleranceMin:120,toleranceMax:450,examples:["Ribeye Steak","Sirloin Steak","Rump Steak","Fillet Steak"],notExamples:["Steak and Kidney Pie","Greggs Steak Bake","Pukka Steak Pie"]},{id:"bacon",name:"Bacon",description:"Streaky and back bacon, smoked and unsmoked",keywords:["bacon","streaky bacon","back bacon","smoked bacon","unsmoked bacon","bacon rashers","pancetta"],excludeKeywords:["bacon sandwich","bacon roll","bacon bits","bacon flavour"],defaultServingG:60,toleranceMin:25,toleranceMax:150,examples:["Smoked Back Bacon","Unsmoked Streaky Bacon","Thick Cut Bacon","Pancetta Cubes"],notExamples:["Bacon Sandwich","Bacon Flavour Crisps","Turkey Bacon"]},{id:"sausages",name:"Sausages",description:"Pork, beef, chicken, and vegetarian sausages",keywords:["sausage","sausages","cumberland","lincolnshire","chipolata","banger"],excludeKeywords:["sausage roll","sausage meat","sausage casserole","hot dog"],defaultServingG:67,servingSizes:[{name:"1 sausage",grams:67},{name:"2 sausages",grams:134},{name:"3 sausages",grams:200}],toleranceMin:40,toleranceMax:250,examples:["Cumberland Sausages","Pork Chipolatas","Richmond Thick Sausages","Linda McCartney Sausages"],notExamples:["Greggs Sausage Roll","Sausage Casserole","Toad in the Hole"]},{id:"ham_sliced",name:"Sliced Ham & Cooked Meats",description:"Sliced ham, turkey, chicken, and deli meats",keywords:["ham","sliced ham","cooked ham","turkey slices","chicken slices","pastrami","salami","chorizo slices","prosciutto"],excludeKeywords:["ham sandwich","ham and cheese","gammon"],defaultServingG:35,toleranceMin:15,toleranceMax:100,examples:["Tesco Honey Roast Ham","Wafer Thin Turkey","Sliced Chicken Breast","Parma Ham"],notExamples:["Ham and Cheese Toastie","Gammon Steak","Christmas Ham"]},{id:"fish_fillets",name:"Fish Fillets (Fresh)",description:"Fresh fish fillets - salmon, cod, haddock, sea bass",keywords:["salmon fillet","cod fillet","haddock fillet","sea bass","trout fillet","mackerel fillet","tuna steak"],excludeKeywords:["fish fingers","fish cake","fish pie","battered fish"],defaultServingG:130,toleranceMin:80,toleranceMax:250,examples:["Salmon Fillet","Cod Loin","Sea Bass Fillets","Smoked Haddock"],notExamples:["Birds Eye Fish Fingers","Fish Cakes","Chip Shop Fish"]},{id:"tinned_fish",name:"Tinned Fish",description:"Canned tuna, salmon, sardines, mackerel",keywords:["tinned","canned","tuna chunks","tuna flakes","sardines","mackerel fillets","salmon pink","salmon red"],excludeKeywords:[],defaultServingG:80,toleranceMin:40,toleranceMax:200,examples:["John West Tuna Chunks","Princes Salmon","Sardines in Tomato Sauce","Mackerel in Sunflower Oil"],notExamples:["Fresh Tuna Steak","Salmon Fillet"]},{id:"prawns_seafood",name:"Prawns & Seafood",description:"Prawns, shrimp, mussels, squid",keywords:["prawn","shrimp","king prawn","tiger prawn","mussel","squid","calamari","scallop","crab","lobster"],excludeKeywords:["prawn cocktail","prawn cracker","seafood stick"],defaultServingG:80,toleranceMin:40,toleranceMax:200,examples:["King Prawns","Cooked Prawns","Mussels in Garlic","Squid Rings"],notExamples:["Prawn Cocktail Crisps","Prawn Crackers","Seafood Sticks"]},{id:"lasagne",name:"Lasagne",description:"Beef lasagne, vegetable lasagne ready meals",keywords:["lasagne","lasagna"],excludeKeywords:["lasagne sheets","lasagne pasta"],defaultServingG:400,servingSizes:[{name:"Small portion",grams:300},{name:"Standard portion",grams:400},{name:"Large portion",grams:450}],toleranceMin:280,toleranceMax:500,examples:["Beef Lasagne","Vegetable Lasagne","Tesco Finest Lasagne","M&S Lasagne"],notExamples:["Lasagne Sheets","Dried Lasagne Pasta"]},{id:"chicken_ready_meal",name:"Chicken Ready Meal",description:"Chicken-based ready meals - satay, kiev, hunter's chicken, etc.",keywords:["satay chicken","hunter's chicken","hunters chicken","chicken kiev","chicken dinner","chicken and rice","chicken with rice","roast chicken meal","chicken casserole ready meal","lemon chicken","teriyaki chicken","honey chicken","garlic chicken"],excludeKeywords:["raw chicken","chicken breast","chicken thigh","chicken drumstick"],defaultServingG:400,servingSizes:[{name:"Small portion",grams:300},{name:"Standard portion",grams:400},{name:"Large portion",grams:450}],toleranceMin:280,toleranceMax:500,examples:["Tesco Finest Satay Chicken With Jasmine Rice","Chicken Kiev","Hunter's Chicken","Lemon & Herb Chicken"],notExamples:["Raw Chicken Breast","Chicken Thighs","Fresh Chicken"]},{id:"curry_ready_meal",name:"Curry (Ready Meal)",description:"Indian curry ready meals - tikka masala, korma, jalfrezi",keywords:["curry","tikka masala","korma","madras","vindaloo","jalfrezi","balti","bhuna","rogan josh","butter chicken","biryani"],excludeKeywords:["curry paste","curry sauce","curry powder","curry pot noodle","curry leaves"],defaultServingG:400,servingSizes:[{name:"Small portion",grams:300},{name:"Standard portion",grams:400},{name:"Large portion",grams:450}],toleranceMin:280,toleranceMax:500,examples:["Chicken Tikka Masala","Lamb Rogan Josh","Vegetable Korma","M&S Chicken Jalfrezi","Chicken Biryani"],notExamples:["Patak's Curry Paste","Curry Powder","Pot Noodle Chicken Korma"]},{id:"chinese_ready_meal",name:"Chinese Ready Meal",description:"Chinese takeaway style ready meals - chow mein, sweet & sour, etc.",keywords:["chow mein","sweet and sour","sweet & sour","kung pao","crispy chilli","szechuan","cantonese","black bean","oyster sauce","egg fried rice","special fried rice","chinese chicken","chinese pork","chinese beef","char siu","hoisin"],excludeKeywords:["sauce","paste","powder","noodles dry","stir fry sauce"],defaultServingG:400,servingSizes:[{name:"Small portion",grams:300},{name:"Standard portion",grams:400},{name:"Large portion",grams:450}],toleranceMin:280,toleranceMax:500,examples:["Chicken Chow Mein","Sweet & Sour Chicken","Beef in Black Bean Sauce","Special Fried Rice","Crispy Chilli Beef"],notExamples:["Chow Mein Noodles Dry","Sweet & Sour Sauce","Hoisin Sauce"]},{id:"cottage_shepherds_pie",name:"Cottage Pie / Shepherd's Pie",description:"Minced meat with mashed potato topping ready meals",keywords:["cottage pie","shepherd pie","shepherds pie","shepherd's pie","beef pie mash","lamb pie mash"],excludeKeywords:[],defaultServingG:400,servingSizes:[{name:"Small portion",grams:300},{name:"Standard portion",grams:400},{name:"Large portion",grams:450}],toleranceMin:280,toleranceMax:500,examples:["Cottage Pie","Shepherd's Pie","M&S Cottage Pie","Tesco Shepherd's Pie"],notExamples:[]},{id:"fish_pie",name:"Fish Pie",description:"Fish pie with mashed potato topping ready meals",keywords:["fish pie","fisherman pie","fishermans pie","fisherman's pie","ocean pie","seafood pie"],excludeKeywords:[],defaultServingG:400,servingSizes:[{name:"Small portion",grams:300},{name:"Standard portion",grams:400},{name:"Large portion",grams:450}],toleranceMin:280,toleranceMax:500,examples:["Fish Pie","Fisherman's Pie","M&S Fish Pie","Charlie Bigham's Fish Pie"],notExamples:[]},{id:"pasta_bake_ready_meal",name:"Pasta Bake / Mac & Cheese",description:"Pasta bake, macaroni cheese ready meals",keywords:["pasta bake","macaroni cheese","mac and cheese","mac & cheese","mac n cheese","tuna pasta bake","chicken pasta bake","carbonara ready meal"],excludeKeywords:["pasta bake sauce","pasta bake mix"],defaultServingG:400,servingSizes:[{name:"Small portion",grams:300},{name:"Standard portion",grams:400},{name:"Large portion",grams:450}],toleranceMin:280,toleranceMax:500,examples:["Macaroni Cheese","Tuna Pasta Bake","Chicken Pasta Bake","M&S Mac & Cheese"],notExamples:["Pasta Bake Sauce","Dolmio Pasta Bake"]},{id:"spaghetti_bolognese_ready_meal",name:"Spaghetti Bolognese (Ready Meal)",description:"Spaghetti bolognese, meat sauce pasta ready meals",keywords:["spaghetti bolognese","spag bol","bolognaise","meat sauce pasta","beef ragu"],excludeKeywords:["bolognese sauce","ragu sauce","jar"],defaultServingG:400,servingSizes:[{name:"Small portion",grams:300},{name:"Standard portion",grams:400},{name:"Large portion",grams:450}],toleranceMin:280,toleranceMax:500,examples:["Spaghetti Bolognese","Spag Bol Ready Meal","Beef Ragu with Pasta"],notExamples:["Dolmio Bolognese Sauce","Ragu Sauce Jar"]},{id:"chilli_con_carne_ready_meal",name:"Chilli Con Carne (Ready Meal)",description:"Chilli con carne ready meals with rice",keywords:["chilli con carne","chili con carne","beef chilli","beef chili","chilli with rice"],excludeKeywords:["chilli sauce","chilli powder","chilli flakes"],defaultServingG:400,servingSizes:[{name:"Small portion",grams:300},{name:"Standard portion",grams:400},{name:"Large portion",grams:450}],toleranceMin:280,toleranceMax:500,examples:["Chilli Con Carne","Beef Chilli with Rice","M&S Chilli Con Carne"],notExamples:["Chilli Sauce","Chilli Powder","Chilli Con Carne Spice Mix"]},{id:"roast_dinner_ready_meal",name:"Roast Dinner (Ready Meal)",description:"Sunday roast style ready meals with meat and veg",keywords:["roast dinner","sunday roast","roast beef dinner","roast chicken dinner","roast pork dinner","carvery","roast lamb"],excludeKeywords:["roast potatoes only","roast chicken breast raw"],defaultServingG:400,servingSizes:[{name:"Small portion",grams:300},{name:"Standard portion",grams:400},{name:"Large portion",grams:500}],toleranceMin:300,toleranceMax:550,examples:["Roast Beef Dinner","Roast Chicken Dinner","Sunday Roast Ready Meal","Carvery Meal"],notExamples:["Roast Potatoes","Raw Roast Chicken"]},{id:"stew_casserole_ready_meal",name:"Stew / Casserole (Ready Meal)",description:"Beef stew, chicken casserole, hotpot ready meals",keywords:["stew","casserole","hotpot","hot pot","lancashire hotpot","beef stew","lamb stew","chicken casserole","irish stew"],excludeKeywords:["casserole mix","stewing steak raw","casserole dish"],defaultServingG:400,servingSizes:[{name:"Small portion",grams:300},{name:"Standard portion",grams:400},{name:"Large portion",grams:450}],toleranceMin:280,toleranceMax:500,examples:["Beef Stew","Lancashire Hotpot","Chicken Casserole","Irish Stew"],notExamples:["Stewing Steak Raw","Casserole Mix Packet"]},{id:"pizza",name:"Pizza",description:"Fresh, frozen, and takeaway pizzas",keywords:["pizza","margherita","pepperoni pizza","pizza express","goodfellas","chicago town","dr oetker"],excludeKeywords:["pizza base","pizza dough","pizza sauce","pizza flavour"],defaultServingG:200,servingSizes:[{name:"1/4 pizza",grams:150},{name:"1/3 pizza",grams:200},{name:"1/2 pizza",grams:300}],toleranceMin:80,toleranceMax:500,examples:["Pepperoni Pizza","Margherita","Chicago Town Deep Dish","Goodfellas Thin"],notExamples:["Pizza Base","Pizza Express Dough Balls","Pizza Flavour Pringles"]},{id:"pie_savoury",name:"Savoury Pies & Pasties",description:"Meat pies, pasties, quiches",keywords:["pie","pasty","pastie","quiche","pukka pie","fray bentos","steak pie","chicken pie","pork pie","cornish pasty"],excludeKeywords:["pie filling","apple pie","cherry pie","banoffee pie","pie crust"],defaultServingG:200,toleranceMin:100,toleranceMax:400,examples:["Pukka Steak Pie","Cornish Pasty","Pork Pie","Quiche Lorraine","Chicken & Mushroom Pie"],notExamples:["Apple Pie","Mr Kipling Pies","Mince Pie"]},{id:"sandwich_prepared",name:"Prepared Sandwiches",description:"Pre-made sandwiches, meal deal sandwiches",keywords:["sandwich","sarnie","blt","club sandwich","triple sandwich","sub"],excludeKeywords:["sandwich thins","sandwich spread","sandwich pickle"],defaultServingG:180,toleranceMin:100,toleranceMax:350,examples:["BLT Sandwich","Chicken & Bacon Triple","Prawn Mayo Sandwich","Tesco Meal Deal Sandwich"],notExamples:["Warburtons Sandwich Thins","Sandwich Spread","Branston Pickle"]},{id:"soup",name:"Soup",description:"Tinned, fresh, and packet soups",keywords:["soup","broth","chowder","heinz soup","baxters","covent garden"],excludeKeywords:["soup mix","soup maker"],defaultServingG:300,servingSizes:[{name:"Cup/mug",grams:200},{name:"Bowl",grams:300},{name:"Large bowl",grams:400}],toleranceMin:150,toleranceMax:500,examples:["Heinz Tomato Soup","Baxters Chicken Broth","New Covent Garden Soup"],notExamples:["Soup and Shake","Dried Soup Mix"]},{id:"pasta_dried",name:"Pasta (Dried)",description:"Dried pasta - spaghetti, penne, fusilli, etc.",keywords:["pasta","spaghetti","penne","fusilli","tagliatelle","rigatoni","farfalle","linguine","macaroni","orzo"],excludeKeywords:["pasta sauce","pasta bake","pot pasta","pasta salad","ready meal"],defaultServingG:75,servingSizes:[{name:"Small portion",grams:60},{name:"Medium portion",grams:75},{name:"Large portion",grams:100}],toleranceMin:40,toleranceMax:150,examples:["Napolina Spaghetti","De Cecco Penne","Barilla Fusilli","Own Brand Pasta"],notExamples:["Dolmio Pasta Sauce","Pot Pasta","Pasta King"]},{id:"rice_dried",name:"Rice (Dried)",description:"Dried rice - basmati, long grain, jasmine, risotto",keywords:["rice","basmati","long grain","jasmine rice","risotto rice","arborio","wild rice","brown rice"],excludeKeywords:["rice pudding","rice cake","rice cracker","microwave rice","rice krispies","fried rice"],defaultServingG:75,servingSizes:[{name:"Small portion",grams:60},{name:"Medium portion",grams:75},{name:"Large portion",grams:100}],toleranceMin:40,toleranceMax:150,examples:["Tilda Basmati Rice","Uncle Bens Long Grain","Arborio Risotto Rice"],notExamples:["Rice Pudding","Rice Cakes","Egg Fried Rice","Ben's Original Microwave Rice"]},{id:"rice_microwave",name:"Microwave Rice (Cooked)",description:"Pre-cooked microwave rice pouches",keywords:["microwave rice","uncle bens","bens original","tilda steamed","express rice"],excludeKeywords:[],defaultServingG:125,toleranceMin:100,toleranceMax:300,examples:["Ben's Original Microwave Rice","Tilda Steamed Rice","Sainsburys Microwave Rice"],notExamples:["Dried Rice","Risotto"]},{id:"noodles",name:"Noodles",description:"Dried and fresh noodles - egg noodles, rice noodles, udon",keywords:["noodle","egg noodle","rice noodle","udon","ramen","chow mein","vermicelli"],excludeKeywords:["pot noodle","noodle pot","super noodles","instant noodles"],defaultServingG:65,toleranceMin:40,toleranceMax:150,examples:["Blue Dragon Egg Noodles","Rice Noodles","Fresh Udon","Straight to Wok Noodles"],notExamples:["Pot Noodle","Super Noodles","Naked Noodle"]},{id:"instant_noodles",name:"Instant Noodles & Pot Noodles",description:"Pot noodles, super noodles, instant ramen",keywords:["pot noodle","super noodles","instant noodle","cup noodle","naked noodle","nissin","kabuto"],excludeKeywords:[],defaultServingG:90,toleranceMin:60,toleranceMax:150,examples:["Pot Noodle Chicken & Mushroom","Batchelors Super Noodles","Kabuto Ramen"],notExamples:["Fresh Noodles","Dried Egg Noodles"]},{id:"apple",name:"Apple",description:"Fresh apples - all varieties",keywords:["apple","granny smith","gala","braeburn","pink lady","jazz apple","cox"],excludeKeywords:["apple juice","apple pie","apple sauce","apple crumble","toffee apple","apple cider"],defaultServingG:150,servingSizes:[{name:"Small apple",grams:120},{name:"Medium apple",grams:150},{name:"Large apple",grams:200}],toleranceMin:80,toleranceMax:250,examples:["Pink Lady Apple","Gala Apple","Granny Smith","Braeburn"],notExamples:["Apple Juice","Apple Pie","Dried Apple"]},{id:"banana",name:"Banana",description:"Fresh bananas",keywords:["banana","fairtrade banana"],excludeKeywords:["banana bread","banana chip","dried banana","banana milkshake","banana split"],defaultServingG:120,servingSizes:[{name:"Small banana",grams:90},{name:"Medium banana",grams:120},{name:"Large banana",grams:150}],toleranceMin:60,toleranceMax:200,examples:["Loose Bananas","Fairtrade Bananas","Organic Bananas"],notExamples:["Banana Bread","Banana Chips","Banana Milkshake"]},{id:"berries",name:"Berries",description:"Strawberries, blueberries, raspberries, blackberries",keywords:["strawberry","strawberries","blueberry","blueberries","raspberry","raspberries","blackberry","blackberries","mixed berries"],excludeKeywords:["jam","compote","yoghurt","smoothie","ice cream"],defaultServingG:80,toleranceMin:40,toleranceMax:200,examples:["Fresh Strawberries","Blueberries","Raspberries","Mixed Berry Pack"],notExamples:["Strawberry Jam","Strawberry Yoghurt","Berry Smoothie"]},{id:"citrus",name:"Citrus Fruits",description:"Oranges, lemons, limes, grapefruit, satsumas",keywords:["orange","lemon","lime","grapefruit","satsuma","clementine","tangerine","mandarin"],excludeKeywords:["juice","marmalade","squash","lemon curd","orange chocolate"],defaultServingG:130,servingSizes:[{name:"Small/satsuma",grams:70},{name:"Medium orange",grams:130},{name:"Large orange",grams:180}],toleranceMin:50,toleranceMax:250,examples:["Navel Oranges","Easy Peeler Satsumas","Lemons","Pink Grapefruit"],notExamples:["Orange Juice","Lemon Curd","Terry's Chocolate Orange"]},{id:"grapes",name:"Grapes",description:"Fresh grapes - red, green, black",keywords:["grape","grapes","seedless grapes","red grapes","green grapes","black grapes"],excludeKeywords:["grape juice","raisins","sultanas","wine"],defaultServingG:80,toleranceMin:40,toleranceMax:200,examples:["Green Seedless Grapes","Red Grapes","Black Grapes","Cotton Candy Grapes"],notExamples:["Raisins","Sultanas","Grape Juice"]},{id:"melon",name:"Melon",description:"Watermelon, cantaloupe, honeydew, galia",keywords:["melon","watermelon","cantaloupe","honeydew","galia"],excludeKeywords:[],defaultServingG:150,toleranceMin:80,toleranceMax:300,examples:["Watermelon Slices","Cantaloupe Melon","Honeydew Melon","Galia Melon"],notExamples:[]},{id:"tropical_fruit",name:"Tropical Fruits",description:"Mango, pineapple, papaya, kiwi, passion fruit",keywords:["mango","pineapple","papaya","kiwi","passion fruit","coconut","lychee","dragon fruit"],excludeKeywords:["juice","dried","smoothie"],defaultServingG:80,toleranceMin:50,toleranceMax:200,examples:["Fresh Mango","Pineapple Chunks","Kiwi Fruit","Papaya"],notExamples:["Pineapple Juice","Dried Mango","Coconut Milk"]},{id:"dried_fruit",name:"Dried Fruit",description:"Raisins, sultanas, dates, apricots, cranberries",keywords:["dried","raisins","sultanas","currants","dates","dried apricot","dried mango","prunes","cranberries","dried fig"],excludeKeywords:["trail mix","fruit and nut"],defaultServingG:30,toleranceMin:15,toleranceMax:80,examples:["Sun-Maid Raisins","Medjool Dates","Dried Apricots","Dried Cranberries"],notExamples:["Fresh Dates","Fresh Apricots","Trail Mix"]},{id:"potato",name:"Potatoes",description:"Fresh potatoes - baking, mashing, roasting",keywords:["potato","potatoes","maris piper","king edward","jersey royal","new potato","baby potato","baking potato"],excludeKeywords:["chips","crisps","mash","wedges","roast potato","hash brown","potato waffle"],defaultServingG:175,servingSizes:[{name:"Small potato",grams:100},{name:"Medium potato",grams:175},{name:"Large baking potato",grams:300}],toleranceMin:60,toleranceMax:400,examples:["Maris Piper Potatoes","Baking Potatoes","Jersey Royals","Baby New Potatoes"],notExamples:["Oven Chips","Crisps","Mashed Potato","Potato Waffles"]},{id:"chips_frozen",name:"Chips & Wedges (Frozen/Prepared)",description:"Oven chips, frozen chips, potato wedges",keywords:["chips","oven chips","frozen chips","chunky chips","wedges","potato wedges","fries","mccain","aunt bessies"],excludeKeywords:["fish and chips","chip shop","crisps","tortilla chips"],defaultServingG:165,toleranceMin:100,toleranceMax:300,examples:["McCain Oven Chips","Aunt Bessie's Homestyle Chips","Sweet Potato Wedges"],notExamples:["Walkers Crisps","Doritos","Fish and Chips"]},{id:"carrot",name:"Carrots",description:"Fresh carrots - whole, baby, batons",keywords:["carrot","carrots","baby carrot","carrot batons","chantenay"],excludeKeywords:["carrot cake","carrot juice","carrot soup"],defaultServingG:80,toleranceMin:40,toleranceMax:200,examples:["Loose Carrots","Baby Carrots","Chantenay Carrots","Carrot Batons"],notExamples:["Carrot Cake","Carrot and Coriander Soup"]},{id:"broccoli",name:"Broccoli",description:"Fresh and frozen broccoli",keywords:["broccoli","tenderstem","broccoli florets"],excludeKeywords:["broccoli soup","broccoli cheese"],defaultServingG:85,toleranceMin:50,toleranceMax:200,examples:["Broccoli Florets","Tenderstem Broccoli","Frozen Broccoli"],notExamples:["Broccoli and Stilton Soup","Broccoli Cheese Bake"]},{id:"onion",name:"Onions",description:"Fresh onions - white, red, spring",keywords:["onion","onions","red onion","white onion","spring onion","shallot","leek"],excludeKeywords:["onion rings","onion bhaji","onion gravy","crispy onion"],defaultServingG:80,toleranceMin:30,toleranceMax:200,examples:["Brown Onions","Red Onions","Spring Onions","Shallots"],notExamples:["Onion Rings","Onion Bhajis","Bisto Onion Gravy"]},{id:"tomato",name:"Tomatoes (Fresh)",description:"Fresh tomatoes - cherry, plum, vine",keywords:["tomato","tomatoes","cherry tomato","plum tomato","vine tomato","beef tomato"],excludeKeywords:["tomato sauce","tomato soup","tinned tomato","chopped tomato","passata","ketchup","puree"],defaultServingG:85,toleranceMin:40,toleranceMax:200,examples:["Cherry Tomatoes","Vine Ripened Tomatoes","Plum Tomatoes","Beef Tomatoes"],notExamples:["Chopped Tomatoes","Tomato Puree","Tomato Ketchup","Tomato Soup"]},{id:"tinned_tomato",name:"Tinned Tomatoes & Passata",description:"Chopped, whole, and passata tomatoes",keywords:["tinned tomato","canned tomato","chopped tomato","plum tomato tin","passata","tomato puree"],excludeKeywords:["tomato soup","tomato sauce"],defaultServingG:100,toleranceMin:50,toleranceMax:400,examples:["Napolina Chopped Tomatoes","Whole Plum Tomatoes","Passata","Tomato Puree"],notExamples:["Fresh Tomatoes","Tomato Soup","Dolmio Sauce"]},{id:"salad_leaves",name:"Salad Leaves & Lettuce",description:"Lettuce, spinach, rocket, mixed leaves",keywords:["lettuce","salad","rocket","spinach","watercress","mixed leaves","iceberg","romaine","cos","little gem"],excludeKeywords:["salad dressing","caesar salad","pasta salad","potato salad","coleslaw"],defaultServingG:35,toleranceMin:15,toleranceMax:100,examples:["Iceberg Lettuce","Baby Spinach","Rocket Salad","Mixed Salad Leaves"],notExamples:["Caesar Salad with Dressing","Pasta Salad","Coleslaw"]},{id:"beans_green",name:"Green Beans & Peas",description:"Green beans, runner beans, peas, mange tout",keywords:["green bean","runner bean","pea","garden pea","petit pois","mange tout","sugar snap","edamame"],excludeKeywords:["baked beans","bean salad","bean chilli"],defaultServingG:80,toleranceMin:40,toleranceMax:200,examples:["Fine Beans","Garden Peas","Mange Tout","Sugar Snap Peas","Frozen Peas"],notExamples:["Heinz Baked Beans","Three Bean Salad"]},{id:"baked_beans",name:"Baked Beans",description:"Tinned baked beans in tomato sauce",keywords:["baked beans","heinz beans","branston beans"],excludeKeywords:[],defaultServingG:200,toleranceMin:100,toleranceMax:420,examples:["Heinz Baked Beans","Branston Baked Beans","Reduced Sugar Baked Beans"],notExamples:["Green Beans","Kidney Beans","Bean Salad"]},{id:"sweetcorn",name:"Sweetcorn",description:"Tinned, frozen, and fresh sweetcorn",keywords:["sweetcorn","corn on the cob","corn kernels","baby corn"],excludeKeywords:["cornflakes","corn chips","popcorn"],defaultServingG:80,toleranceMin:40,toleranceMax:200,examples:["Green Giant Sweetcorn","Frozen Sweetcorn","Corn on the Cob","Baby Corn"],notExamples:["Popcorn","Corn Flakes","Doritos"]},{id:"mushroom",name:"Mushrooms",description:"Fresh and tinned mushrooms",keywords:["mushroom","button mushroom","chestnut mushroom","portobello","shiitake","oyster mushroom"],excludeKeywords:["mushroom soup","mushroom sauce","mushroom risotto"],defaultServingG:65,toleranceMin:30,toleranceMax:200,examples:["Button Mushrooms","Chestnut Mushrooms","Portobello Mushrooms","Sliced Mushrooms"],notExamples:["Cream of Mushroom Soup","Mushroom Stroganoff"]},{id:"pepper",name:"Peppers",description:"Bell peppers - red, green, yellow, orange",keywords:["pepper","bell pepper","red pepper","green pepper","yellow pepper","mixed pepper","romano pepper"],excludeKeywords:["pepper steak","black pepper","chilli pepper","pepper sauce"],defaultServingG:80,toleranceMin:40,toleranceMax:200,examples:["Red Peppers","Mixed Peppers","Yellow Pepper","Romano Peppers"],notExamples:["Black Pepper","Jalapeno Peppers","Pepper Steak"]},{id:"cucumber",name:"Cucumber",description:"Fresh cucumber",keywords:["cucumber","mini cucumber"],excludeKeywords:["tzatziki","cucumber salad"],defaultServingG:80,toleranceMin:40,toleranceMax:200,examples:["Whole Cucumber","Mini Cucumbers","Sliced Cucumber"],notExamples:["Tzatziki Dip"]},{id:"courgette",name:"Courgette & Squash",description:"Courgettes, butternut squash, aubergine",keywords:["courgette","zucchini","butternut squash","squash","aubergine","eggplant"],excludeKeywords:["courgette soup","squash soup"],defaultServingG:90,toleranceMin:50,toleranceMax:250,examples:["Courgettes","Butternut Squash","Aubergine","Diced Butternut"],notExamples:["Butternut Squash Soup","Moussaka"]},{id:"cabbage",name:"Cabbage & Kale",description:"White cabbage, red cabbage, savoy, kale",keywords:["cabbage","white cabbage","red cabbage","savoy","kale","cavolo nero","spring greens"],excludeKeywords:["coleslaw","sauerkraut"],defaultServingG:90,toleranceMin:40,toleranceMax:200,examples:["White Cabbage","Red Cabbage","Savoy Cabbage","Curly Kale"],notExamples:["Coleslaw","Sauerkraut"]},{id:"cauliflower",name:"Cauliflower",description:"Fresh and frozen cauliflower",keywords:["cauliflower","cauliflower florets","cauliflower rice"],excludeKeywords:["cauliflower cheese","cauliflower soup"],defaultServingG:85,toleranceMin:50,toleranceMax:200,examples:["Cauliflower Florets","Whole Cauliflower","Cauliflower Rice","Frozen Cauliflower"],notExamples:["Cauliflower Cheese","Cauliflower Soup"]},{id:"avocado",name:"Avocado",description:"Fresh avocados",keywords:["avocado","ripe avocado","hass avocado"],excludeKeywords:["guacamole","avocado oil"],defaultServingG:75,servingSizes:[{name:"Half avocado",grams:75},{name:"Whole avocado",grams:150}],toleranceMin:50,toleranceMax:200,examples:["Ripe Avocado","Ripen at Home Avocado","Hass Avocado"],notExamples:["Guacamole","Avocado Oil"]},{id:"crisps",name:"Crisps & Tortilla Chips",description:"Potato crisps, tortilla chips, vegetable crisps (single bag ~25g)",keywords:["crisps","walkers","pringles","kettle chips","sensations","tyrrells","doritos","tortilla chips","nachos"],excludeKeywords:["oven chips","frozen chips","fish and chips"],defaultServingG:25,toleranceMin:15,toleranceMax:50,examples:["Walkers Ready Salted","Pringles Original","Doritos","Kettle Chips","Sensations"],notExamples:["Oven Chips","McCain Chips"]},{id:"popcorn",name:"Popcorn",description:"Ready-made and microwave popcorn",keywords:["popcorn","butterkist","metcalfe","propercorn","skinny popcorn"],excludeKeywords:["popcorn chicken"],defaultServingG:25,toleranceMin:15,toleranceMax:80,examples:["Butterkist Sweet Popcorn","Propercorn","Metcalfe's Skinny Popcorn"],notExamples:["KFC Popcorn Chicken"]},{id:"nuts_plain",name:"Nuts (Plain & Roasted)",description:"Almonds, cashews, peanuts, mixed nuts",keywords:["nuts","almond","cashew","peanut","walnut","pistachio","brazil nut","macadamia","hazelnut","mixed nuts","dry roasted"],excludeKeywords:["nut butter","chocolate nuts","honey roasted","praline"],defaultServingG:30,toleranceMin:15,toleranceMax:80,examples:["KP Dry Roasted Peanuts","Whole Almonds","Cashew Nuts","Mixed Nuts"],notExamples:["Peanut Butter","Snickers","Chocolate Brazils","Honey Roasted Peanuts"]},{id:"chocolate_bar",name:"Chocolate Bars",description:"Chocolate bars, blocks, and countlines",keywords:["chocolate","dairy milk","galaxy","cadbury","mars","snickers","twix","kitkat","bounty","maltesers","milky way","milkybar","aero","wispa","crunchie","flake","yorkie","toblerone","lindt"],excludeKeywords:["chocolate milk","chocolate milkshake","hot chocolate","chocolate spread","chocolate cake","chocolate biscuit","chocolate ice cream","truffles","box"],defaultServingG:40,toleranceMin:20,toleranceMax:60,examples:["Cadbury Dairy Milk","Galaxy Smooth Milk","Mars Bar","Snickers","KitKat","Maltesers"],notExamples:["Chocolate Milk","Hot Chocolate","Chocolate Spread","Chocolate Digestive","Lindt Lindor Truffles Box"]},{id:"chocolate_sharing",name:"Chocolate (Sharing Bags)",description:"Sharing bags of small chocolates like M&Ms, Maltesers pouches",keywords:["sharing bag","pouch","m&ms","maltesers bag","minstrels","revels","peanut m&m"],excludeKeywords:["box","truffles","lindor","ferrero"],defaultServingG:40,toleranceMin:25,toleranceMax:60,examples:["M&M's Sharing Bag","Maltesers Pouch","Minstrels Bag","Revels"],notExamples:["Lindt Lindor Box","Ferrero Rocher","Celebrations Tub"]},{id:"chocolate_selection_box",name:"Chocolate Selection Boxes",description:"Selection tubs and boxes - Celebrations, Roses, Heroes, Quality Street",keywords:["celebrations","heroes","roses","quality street","selection","tub","miniatures"],excludeKeywords:["truffles","lindor","ferrero"],defaultServingG:30,toleranceMin:20,toleranceMax:50,examples:["Celebrations","Heroes","Quality Street","Cadbury Roses","Cadbury Miniatures"],notExamples:["Lindt Lindor","Ferrero Rocher","Single Bar"]},{id:"chocolate_truffles_box",name:"Boxed Chocolates & Truffles",description:"Premium boxed chocolates - Lindor, Ferrero Rocher, Belgian chocolates",keywords:["truffles","lindor","ferrero","rocher","belgian","praline","boxed chocolate","gift box","assorted chocolate"],excludeKeywords:["sharing bag","multipack"],defaultServingG:25,toleranceMin:12,toleranceMax:40,examples:["Lindt Lindor Truffles","Ferrero Rocher","Belgian Chocolate Selection","Hotel Chocolat"],notExamples:["Celebrations","Heroes","Chocolate Bar","M&Ms"]},{id:"sweets",name:"Sweets & Candy",description:"Boiled sweets, gummies, jellies, mints",keywords:["sweet","candy","gummy","haribo","jelly baby","wine gums","fruit pastille","skittles","starburst","polo","mints","toffee","fudge","chews","bonbon"],excludeKeywords:["sweet potato","sweetcorn","sweet chilli"],defaultServingG:25,toleranceMin:10,toleranceMax:50,examples:["Haribo Starmix","Bassetts Wine Gums","Rowntree's Fruit Pastilles","Skittles"],notExamples:["Sweet Potato","Chocolate Bar"]},{id:"biscuits",name:"Biscuits",description:"Sweet biscuits - digestives, bourbons, custard creams (2 biscuits typical)",keywords:["biscuit","digestive","hobnob","bourbon","custard cream","rich tea","shortbread","oreo","maryland","cookie","jammie dodger","malted milk"],excludeKeywords:["biscuit base","biscuit tin"],defaultServingG:25,toleranceMin:10,toleranceMax:40,examples:["McVitie's Digestives","Chocolate Hobnobs","Bourbon Creams","Oreos","Maryland Cookies"],notExamples:["Cheesecake Biscuit Base"]},{id:"cake",name:"Cakes & Gateaux",description:"Large cakes, sliced cakes, gateaux",keywords:["cake","sponge","victoria sponge","chocolate cake","carrot cake","cheesecake","gateau","birthday cake","coffee cake","lemon drizzle"],excludeKeywords:["cake mix","cake bar","jaffa cake","rice cake","fish cake","potato cake"],defaultServingG:80,toleranceMin:40,toleranceMax:200,examples:["Victoria Sponge","Chocolate Fudge Cake","Carrot Cake","New York Cheesecake"],notExamples:["Jaffa Cakes","Rice Cakes","Cake Mix"]},{id:"cake_bars",name:"Cake Bars & Individual Cakes",description:"Mr Kipling cakes, French Fancies, cake bars",keywords:["cake bar","mr kipling","french fancy","fondant fancy","mini roll","swiss roll","jaffa cake","angel slice","bakewell","brownie"],excludeKeywords:[],defaultServingG:35,toleranceMin:20,toleranceMax:100,examples:["Mr Kipling French Fancies","Cadbury Mini Rolls","Jaffa Cakes","Bakewell Tart","Brownie"],notExamples:["Whole Cake","Large Victoria Sponge"]},{id:"muffins_sweet",name:"Muffins (Sweet)",description:"Chocolate chip, blueberry, and other sweet muffins",keywords:["muffin chocolate","blueberry muffin","double chocolate muffin","banana muffin","lemon muffin"],excludeKeywords:["english muffin"],defaultServingG:100,toleranceMin:60,toleranceMax:180,examples:["Chocolate Chip Muffin","Blueberry Muffin","Starbucks Muffin","Costa Muffin"],notExamples:["English Muffin","Warburtons Muffins"]},{id:"doughnuts",name:"Doughnuts",description:"Ring doughnuts, jam doughnuts, filled doughnuts",keywords:["doughnut","donut","jam doughnut","ring doughnut","krispy kreme","dunkin"],excludeKeywords:[],defaultServingG:70,toleranceMin:40,toleranceMax:150,examples:["Krispy Kreme Original","Jam Doughnut","Ring Doughnut","Yum Yums"],notExamples:[]},{id:"soft_drinks",name:"Soft Drinks",description:"Fizzy drinks, cola, lemonade, squash",keywords:["cola","coke","pepsi","fanta","sprite","7up","lemonade","orangeade","fizzy","soda","dr pepper","irn bru","lucozade","energy drink","red bull","monster"],excludeKeywords:["diet","zero","no sugar","sugar free"],defaultServingG:330,servingSizes:[{name:"Small can",grams:250},{name:"Standard can",grams:330},{name:"Large bottle",grams:500}],toleranceMin:150,toleranceMax:750,examples:["Coca-Cola","Pepsi","Fanta Orange","Sprite","Lucozade Original","Red Bull"],notExamples:["Diet Coke","Coke Zero","Pepsi Max"]},{id:"soft_drinks_diet",name:"Diet & Zero Soft Drinks",description:"Sugar-free fizzy drinks",keywords:["diet coke","coke zero","pepsi max","diet pepsi","fanta zero","sprite zero","sugar free","no sugar","zero sugar"],excludeKeywords:[],defaultServingG:330,toleranceMin:150,toleranceMax:750,examples:["Diet Coke","Coke Zero","Pepsi Max","Fanta Zero","7Up Free"],notExamples:["Regular Coca-Cola","Full Sugar Fanta"]},{id:"fruit_juice",name:"Fruit Juice",description:"Orange juice, apple juice, fruit juices",keywords:["juice","orange juice","apple juice","tropicana","innocent","pure juice","freshly squeezed","cranberry juice","grape juice"],excludeKeywords:["squash","cordial","concentrate","juice drink"],defaultServingG:200,toleranceMin:100,toleranceMax:500,examples:["Tropicana Orange Juice","Innocent Apple Juice","Fresh Orange Juice","Cranberry Juice"],notExamples:["Robinsons Squash","Capri Sun","Um Bongo"]},{id:"smoothie",name:"Smoothies",description:"Fruit smoothies, protein smoothies",keywords:["smoothie","innocent smoothie","naked juice","protein smoothie"],excludeKeywords:[],defaultServingG:250,toleranceMin:150,toleranceMax:500,examples:["Innocent Strawberry & Banana","Naked Green Machine","M&S Super Smoothie"],notExamples:["Fruit Juice","Milkshake"]},{id:"milkshake",name:"Milkshakes",description:"Flavoured milkshakes - chocolate, strawberry, banana",keywords:["milkshake","frijj","yazoo","chocolate milk","strawberry milk","banana milkshake"],excludeKeywords:["milkshake powder","milkshake mix"],defaultServingG:400,toleranceMin:200,toleranceMax:600,examples:["Frijj Chocolate Milkshake","Yazoo Strawberry","McDonald's Milkshake"],notExamples:["Semi-Skimmed Milk","Milkshake Powder"]},{id:"hot_drinks",name:"Hot Drinks (Prepared)",description:"Coffee shop drinks - lattes, cappuccinos, hot chocolates (ready to drink)",keywords:["latte","cappuccino","americano","mocha","flat white","macchiato","starbucks","costa","nero"],excludeKeywords:["coffee beans","instant coffee","ground coffee","powder","flakes","drinking chocolate","cocoa","mix","sachet"],defaultServingG:350,toleranceMin:200,toleranceMax:500,examples:["Starbucks Latte","Costa Cappuccino","Caffe Nero Mocha","Costa Hot Chocolate RTD"],notExamples:["Nescafe Instant","Ground Coffee","Coffee Beans","Hot Chocolate Powder","Cadbury Drinking Chocolate","Galaxy Hot Chocolate Flakes"]},{id:"tea_coffee_instant",name:"Tea & Coffee (Instant/Dry)",description:"Tea bags, instant coffee, ground coffee",keywords:["tea bag","instant coffee","nescafe","kenco","pg tips","yorkshire tea","tetley","twinings","ground coffee"],excludeKeywords:[],defaultServingG:2,toleranceMin:1,toleranceMax:10,examples:["PG Tips Tea Bags","Yorkshire Tea","Nescafe Gold","Kenco Millicano"],notExamples:["Costa Latte","Starbucks Iced Coffee"]},{id:"hot_chocolate_powder",name:"Hot Chocolate Powder/Mix",description:"Hot chocolate powder, drinking chocolate, cocoa powder mixes",keywords:["hot chocolate","drinking chocolate","cocoa","chocolate flakes","chocolate powder","options","cadbury hot chocolate","galaxy hot chocolate","ovaltine"],excludeKeywords:["ready to drink","prepared","rtd","carton"],defaultServingG:25,toleranceMin:15,toleranceMax:40,examples:["Cadbury Drinking Chocolate","Galaxy Hot Chocolate","Options Hot Chocolate","Ovaltine","Green & Blacks Cocoa"],notExamples:["Costa Hot Chocolate","Starbucks Hot Chocolate","Ready Made Hot Chocolate"]},{id:"squash_cordial",name:"Squash & Cordial",description:"Concentrated squash and cordials (undiluted)",keywords:["squash","cordial","robinsons","ribena","vimto","dilute","concentrate"],excludeKeywords:["no added sugar","sugar free"],defaultServingG:50,toleranceMin:25,toleranceMax:100,examples:["Robinsons Orange Squash","Ribena","Vimto Cordial","Elderflower Cordial"],notExamples:["Ready to Drink","Carton Drink"]},{id:"alcohol_beer",name:"Beer & Lager",description:"Beer, lager, ale, cider",keywords:["beer","lager","ale","cider","stout","ipa","pilsner","guinness","stella","heineken","carling","fosters","budweiser","corona","peroni","craft beer"],excludeKeywords:["non alcoholic","alcohol free","0%"],defaultServingG:500,servingSizes:[{name:"Half pint",grams:284},{name:"Can/bottle",grams:440},{name:"Pint",grams:568}],toleranceMin:250,toleranceMax:700,examples:["Stella Artois","Heineken","Guinness","Magners Cider","BrewDog Punk IPA"],notExamples:["Heineken 0.0","Alcohol-Free Peroni"]},{id:"alcohol_wine",name:"Wine",description:"Red, white, ros, sparkling wine",keywords:["wine","red wine","white wine","rose","prosecco","champagne","sauvignon","chardonnay","merlot","pinot","rioja","malbec"],excludeKeywords:["wine gums","cooking wine","non alcoholic"],defaultServingG:175,servingSizes:[{name:"Small glass",grams:125},{name:"Medium glass",grams:175},{name:"Large glass",grams:250}],toleranceMin:100,toleranceMax:300,examples:["Sauvignon Blanc","Merlot","Prosecco","Pinot Grigio","House Red"],notExamples:["Wine Gums","Cooking Wine"]},{id:"alcohol_spirits",name:"Spirits",description:"Vodka, gin, rum, whisky, tequila",keywords:["vodka","gin","rum","whisky","whiskey","tequila","brandy","bourbon","cognac","liqueur","baileys","amaretto","sambuca"],excludeKeywords:[],defaultServingG:25,servingSizes:[{name:"Single measure",grams:25},{name:"Double measure",grams:50}],toleranceMin:20,toleranceMax:100,examples:["Smirnoff Vodka","Gordon's Gin","Captain Morgan Rum","Jack Daniel's","Baileys"],notExamples:["Rum and Coke","Cocktail"]},{id:"ketchup_sauces",name:"Ketchup & Table Sauces",description:"Ketchup, brown sauce, BBQ sauce",keywords:["ketchup","tomato ketchup","heinz","brown sauce","hp sauce","bbq sauce","burger sauce"],excludeKeywords:[],defaultServingG:15,toleranceMin:10,toleranceMax:50,examples:["Heinz Tomato Ketchup","HP Brown Sauce","Heinz BBQ Sauce","Nandos Sauce"],notExamples:["Tomato Puree","Pasta Sauce"]},{id:"mayonnaise",name:"Mayonnaise & Salad Cream",description:"Mayonnaise, salad cream, aioli",keywords:["mayonnaise","mayo","hellmanns","salad cream","aioli","garlic mayo"],excludeKeywords:["egg mayo sandwich","prawn mayo"],defaultServingG:15,toleranceMin:10,toleranceMax:50,examples:["Hellmann's Mayonnaise","Heinz Salad Cream","Garlic Aioli","Light Mayo"],notExamples:["Egg Mayo Sandwich","Coleslaw"]},{id:"mustard",name:"Mustard",description:"English mustard, Dijon, wholegrain",keywords:["mustard","english mustard","dijon","wholegrain mustard","french mustard","colmans"],excludeKeywords:["mustard powder"],defaultServingG:10,toleranceMin:5,toleranceMax:30,examples:["Colman's English Mustard","Maille Dijon","Wholegrain Mustard"],notExamples:["Mustard Powder","Honey Mustard Dressing"]},{id:"salad_dressing",name:"Salad Dressings",description:"Caesar dressing, vinaigrette, ranch",keywords:["dressing","caesar dressing","vinaigrette","ranch","thousand island","balsamic glaze","french dressing"],excludeKeywords:["salad cream"],defaultServingG:30,toleranceMin:15,toleranceMax:60,examples:["Newman's Own Caesar","Balsamic Vinaigrette","Ranch Dressing","Blue Cheese Dressing"],notExamples:["Salad Cream","Mayonnaise"]},{id:"cooking_sauce",name:"Cooking Sauces",description:"Pasta sauces, curry sauces, stir fry sauces",keywords:["pasta sauce","dolmio","ragu","curry sauce","korma sauce","tikka sauce","stir fry sauce","oyster sauce","teriyaki","pesto"],excludeKeywords:[],defaultServingG:125,toleranceMin:50,toleranceMax:250,examples:["Dolmio Bolognese Sauce","Loyd Grossman Tomato & Basil","Patak's Tikka Sauce","Blue Dragon Stir Fry"],notExamples:["Tomato Ketchup","Mayonnaise"]},{id:"oil",name:"Cooking Oils",description:"Olive oil, vegetable oil, coconut oil",keywords:["oil","olive oil","vegetable oil","sunflower oil","coconut oil","rapeseed oil","sesame oil","fry light"],excludeKeywords:["oily fish","essential oil"],defaultServingG:15,toleranceMin:5,toleranceMax:30,examples:["Filippo Berio Olive Oil","Crisp n Dry","Fry Light","Coconut Oil"],notExamples:["Fish Oil Capsules","CBD Oil"]},{id:"vinegar",name:"Vinegar",description:"Balsamic, white wine, malt vinegar",keywords:["vinegar","balsamic","white wine vinegar","red wine vinegar","malt vinegar","apple cider vinegar","rice vinegar"],excludeKeywords:[],defaultServingG:15,toleranceMin:5,toleranceMax:30,examples:["Balsamic Vinegar","Sarson's Malt Vinegar","White Wine Vinegar"],notExamples:["Balsamic Glaze","Vinaigrette"]},{id:"jam_honey",name:"Jam, Honey & Sweet Spreads",description:"Jam, marmalade, honey, Nutella, peanut butter",keywords:["jam","marmalade","honey","nutella","chocolate spread","peanut butter","almond butter","lemon curd","biscoff spread","marmite","bovril"],excludeKeywords:["jam doughnut","jammie dodger"],defaultServingG:15,toleranceMin:10,toleranceMax:40,examples:["Bonne Maman Strawberry Jam","Nutella","Sun-Pat Peanut Butter","Rowse Honey","Marmite"],notExamples:["Jam Doughnut","PB&J Sandwich"]},{id:"hummus_dips",name:"Hummus & Dips",description:"Hummus, guacamole, tzatziki, salsa",keywords:["hummus","houmous","guacamole","tzatziki","salsa","sour cream dip","taramasalata","baba ganoush"],excludeKeywords:[],defaultServingG:50,toleranceMin:25,toleranceMax:100,examples:["Sabra Hummus","Fresh Guacamole","Doritos Salsa","Tzatziki"],notExamples:["Avocado","Soured Cream"]},{id:"pickle_chutney",name:"Pickles & Chutneys",description:"Pickled onions, gherkins, mango chutney",keywords:["pickle","pickled","gherkin","chutney","branston","relish","piccalilli","sauerkraut","kimchi"],excludeKeywords:[],defaultServingG:25,toleranceMin:15,toleranceMax:60,examples:["Branston Pickle","Pickled Onions","Mango Chutney","Gherkins"],notExamples:["Fresh Cucumber","Fresh Onion"]},{id:"ice_cream",name:"Ice Cream",description:"Tubs, cones, lollies, magnums (1-2 scoops or 1 lolly)",keywords:["ice cream","gelato","magnum","ben and jerrys","haagen dazs","cornetto","twister","solero","ice lolly","fab","calippo","mini milk"],excludeKeywords:["ice cream maker","ice cream scoop"],defaultServingG:75,servingSizes:[{name:"Small scoop",grams:60},{name:"Standard scoop",grams:75},{name:"Large scoop",grams:100}],toleranceMin:40,toleranceMax:120,examples:["Ben & Jerry's Cookie Dough","Magnum Classic","Haagen-Dazs","Cornetto"],notExamples:["Frozen Yoghurt","Sorbet"]},{id:"frozen_veg",name:"Frozen Vegetables",description:"Frozen peas, sweetcorn, mixed veg",keywords:["frozen pea","frozen sweetcorn","frozen vegetable","birds eye","frozen mixed","frozen spinach","frozen broccoli"],excludeKeywords:[],defaultServingG:80,toleranceMin:40,toleranceMax:200,examples:["Birds Eye Garden Peas","Frozen Sweetcorn","Frozen Mixed Vegetables","Frozen Spinach"],notExamples:["Fresh Peas","Tinned Peas"]},{id:"frozen_fish_products",name:"Frozen Fish Products",description:"Fish fingers, fish cakes, breaded fish",keywords:["fish finger","fish cake","battered fish","breaded fish","fish fillet frozen","birds eye fish","youngs"],excludeKeywords:[],defaultServingG:100,toleranceMin:50,toleranceMax:200,examples:["Birds Eye Fish Fingers","Young's Fish Cakes","Battered Cod","Breaded Haddock"],notExamples:["Fresh Salmon Fillet","Tinned Tuna"]},{id:"frozen_chicken_products",name:"Frozen Chicken Products",description:"Chicken nuggets, chicken kievs, chicken dippers",keywords:["chicken nugget","chicken dipper","chicken kiev","chicken goujons","breaded chicken","southern fried chicken","chicken bites"],excludeKeywords:[],defaultServingG:100,toleranceMin:50,toleranceMax:200,examples:["Birds Eye Chicken Dippers","Chicken Nuggets","Chicken Kievs","Southern Fried Chicken"],notExamples:["Fresh Chicken Breast","Rotisserie Chicken"]},{id:"cereal_bar",name:"Cereal & Protein Bars",description:"Cereal bars, protein bars, flapjacks",keywords:["cereal bar","protein bar","flapjack","nutri-grain","nakd","trek","grenade","fulfil","kind bar","nature valley","belvita"],excludeKeywords:[],defaultServingG:40,toleranceMin:20,toleranceMax:80,examples:["Nature Valley Crunchy","Nakd Cocoa Orange","Grenade Carb Killa","Trek Protein Flapjack"],notExamples:["Chocolate Bar","Cereal Box"]},{id:"baby_food",name:"Baby Food",description:"Baby purees, baby cereals, toddler snacks",keywords:["baby food","baby puree","ella's kitchen","cow and gate","aptamil","hipp organic","baby cereal","baby rice"],excludeKeywords:[],defaultServingG:70,toleranceMin:40,toleranceMax:150,examples:["Ella's Kitchen Pouch","Cow & Gate Jar","Baby Rice","Organix Snacks"],notExamples:[]},{id:"supplements",name:"Supplements & Vitamins",description:"Vitamin tablets, protein powder, supplements",keywords:["vitamin","supplement","protein powder","whey","creatine","omega 3","fish oil capsule","multivitamin","centrum","berocca"],excludeKeywords:[],defaultServingG:30,toleranceMin:1,toleranceMax:100,examples:["Optimum Nutrition Whey","Centrum Multivitamins","Omega 3 Capsules","Berocca"],notExamples:["Fresh Fish","Orange Juice with Vitamins"]},{id:"tofu_meat_alternatives",name:"Tofu & Meat Alternatives",description:"Tofu, tempeh, Quorn, plant-based meat",keywords:["tofu","tempeh","quorn","beyond meat","impossible","this isn't","plant based","meat free","vegan mince","vegan burger","seitan"],excludeKeywords:[],defaultServingG:100,toleranceMin:50,toleranceMax:200,examples:["Cauldron Tofu","Quorn Mince","Beyond Burger","THIS Isn't Chicken"],notExamples:["Chicken Breast","Beef Mince"]},{id:"flour_baking",name:"Flour & Baking Ingredients",description:"Flour, sugar, baking powder, yeast",keywords:["flour","plain flour","self raising","bread flour","sugar","caster sugar","icing sugar","brown sugar","baking powder","yeast","cornflour"],excludeKeywords:["sugar free","no added sugar"],defaultServingG:30,toleranceMin:5,toleranceMax:100,examples:["Allinson Plain Flour","Tate & Lyle Caster Sugar","Baking Powder","Dried Yeast"],notExamples:["Cake","Bread","Biscuits"]},{id:"crackers_crispbreads",name:"Crackers & Crispbreads",description:"Cream crackers, rice cakes, oatcakes, Ryvita",keywords:["cracker","cream cracker","rice cake","ryvita","crispbread","oatcake","water biscuit","carr's","tuc"],excludeKeywords:["prawn cracker","christmas cracker"],defaultServingG:20,toleranceMin:10,toleranceMax:60,examples:["Jacob's Cream Crackers","Ryvita Original","Rice Cakes","Nairn's Oatcakes"],notExamples:["Prawn Crackers","Christmas Crackers"]},{id:"crisps_savoury_snacks",name:"Crisps & Savoury Snacks",description:"Crisps, nuts, pretzels, popcorn",keywords:["crisps","chips","pretzels","twiglets","mini cheddars","pork scratchings","bombay mix","wasabi peas"],excludeKeywords:[],defaultServingG:30,toleranceMin:15,toleranceMax:80,examples:["Walkers Ready Salted","Mini Cheddars","Twiglets","Pretzels"],notExamples:["Oven Chips","Potato Wedges"]},{id:"other",name:"Other / Uncategorized",description:"Foods that don't fit other categories",keywords:[],excludeKeywords:[],defaultServingG:100,toleranceMin:10,toleranceMax:500,examples:[],notExamples:[]}];function xp(e){const t=e.match(/(\d+)\s*x\s*(\d+)\s*g\b/i);if(t)return parseInt(t[2],10);const r=e.match(/(\d+)\s*g\b/gi);if(r&&r.length>0){const n=r.map(i=>parseInt(i.replace(/[^\d]/g,""),10)).filter(i=>i>50);if(n.length>0)return Math.max(...n)}return null}function iIe(){return`You are a food categorization expert for a UK nutrition app. Your job is to categorize food products into the correct category.

CRITICAL RULES:
1. Read the FULL product name carefully. "Cadbury Dairy Milk" is CHOCOLATE, not DAIRY.
2. "Milk Chocolate" means chocolate made with milk, NOT milk. Categorize as chocolate_bar.
3. "Chocolate Milkshake" is a milkshake flavored with chocolate. Categorize as milkshake.
4. Brand names matter: "Galaxy" = chocolate, "Yazoo" = milkshake, "Warburtons" = bread
5. If unsure between two categories, pick the more specific one.
6. Consider UK products and brands specifically.

CATEGORIES:
${Yc.map(t=>`
## ${t.name} (ID: ${t.id})
${t.description}
- Default serving: ${t.defaultServingG}g
- Acceptable T0 range: ${t.toleranceMin}g - ${t.toleranceMax}g
- Examples: ${t.examples.join(", ")}
- NOT this category: ${t.notExamples.join(", ")}
`).join(`
`)}

For each food, respond with JSON in this exact format:
{
  "categoryId": "the_category_id",
  "confidence": 85,
  "reasoning": "Brief explanation of why this category"
}`}function sIe(e){const t=e.map((r,n)=>{const i=r.brand?` (${r.brand})`:"",s=r.servingSizeG?` [current serving: ${r.servingSizeG}g]`:"";return`${n+1}. ${r.name}${i}${s}`}).join(`
`);return`Categorize these ${e.length} food products. Return a JSON array with one object per food in the same order:

${t}

Respond with ONLY a JSON array, no other text:
[
  {"categoryId": "...", "confidence": 85, "reasoning": "..."},
  ...
]`}async function V7(e,t,r){const n=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":r,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:8e3,system:e,messages:[{role:"user",content:t}]})});if(!n.ok){const s=await n.text();throw new Error(`Claude API error: ${n.status} - ${s}`)}const i=await n.json();return{content:i.content[0].text,inputTokens:i.usage.input_tokens,outputTokens:i.usage.output_tokens}}async function H7(e,t,r){const n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({model:"gpt-4o",messages:[{role:"system",content:e},{role:"user",content:t}],max_tokens:8e3,temperature:.3})});if(!n.ok){const s=await n.text();throw new Error(`OpenAI API error: ${n.status} - ${s}`)}const i=await n.json();return{content:i.choices[0].message.content,inputTokens:i.usage.prompt_tokens,outputTokens:i.usage.completion_tokens}}function oIe(e,t){const r=e.match(/\[[\s\S]*\]/);if(!r)throw new Error("Could not find JSON array in response");const n=JSON.parse(r[0]);if(!Array.isArray(n)||n.length!==t.length)throw new Error(`Expected ${t.length} results, got ${n.length}`);return n.map((i,s)=>{const o=t[s],a=Yc.find(p=>p.id===i.categoryId)||Yc.find(p=>p.id==="other"),l=xp(o.name),c=o.servingSizeG!==null&&o.servingSizeG>=a.toleranceMin&&o.servingSizeG<=a.toleranceMax;let u,d;return c&&o.servingSizeG!==null?(u=o.servingSizeG,d="validated"):(u=a.defaultServingG,d="category_default"),{foodId:o.id,foodName:o.name,brand:o.brand,categoryId:a.id,categoryName:a.name,confidence:i.confidence||80,reasoning:i.reasoning||"",suggestedServingG:u,currentServingG:o.servingSizeG,servingValidated:c,packSizeG:l,servingSource:d}})}async function aIe(e,t,r,n){const i=Date.now(),s=[];let o=0,a=0,l=0;const c=iIe(),u=50;for(let m=0;m<e.length;m+=u){const y=e.slice(m,m+u),C=sIe(y);try{const w=t==="claude-sonnet"?await V7(c,C,r):await H7(c,C,r);o+=w.inputTokens,a+=w.outputTokens;const b=oIe(w.content,y);s.push(...b)}catch(w){console.error(`Batch ${m/u+1} failed:`,w),l+=y.length,y.forEach(b=>{s.push({foodId:b.id,foodName:b.name,brand:b.brand,categoryId:"other",categoryName:"Other / Uncategorized",confidence:0,reasoning:"Categorization failed",suggestedServingG:100,currentServingG:b.servingSizeG,servingValidated:!1,packSizeG:xp(b.name),servingSource:"category_default"})})}n==null||n(Math.min(m+u,e.length),e.length),m+u<e.length&&await new Promise(w=>setTimeout(w,500))}const d=t==="claude-sonnet"?3:2.5,p=t==="claude-sonnet"?15:10,f=o/1e6*d+a/1e6*p;return{results:s,totalProcessed:e.length,totalSuccessful:e.length-l,totalFailed:l,processingTimeMs:Date.now()-i,model:t,cost:{inputTokens:o,outputTokens:a,estimatedCost:f}}}async function lIe(e,t,r,n){const i=Date.now(),s=[];let o=0,a=0,l=0;const u=`You categorize UK food products. Output JSON only.

Categories: ${Yc.map(y=>y.id).join(", ")}

Rules:
- CRITICAL: Read the FULL product name carefully - it determines the category, not the brand
- Brands make multiple products: Elmlea makes cream AND butter, Lurpak makes butter AND spreads, etc.
- Product name keywords like "Butter", "Spread", "Cream", "Milk" override any brand assumptions
- Use snake_case category IDs exactly as listed
- Include typical UK serving size in grams
- Confidence 0-100 based on certainty`,d=100;for(let y=0;y<e.length;y+=d){const C=e.slice(y,y+d),w=C.map((x,E)=>{const I=x.brand?` | ${x.brand}`:"";return`${E+1}. ${x.name}${I}`}).join(`
`),b=`Categorize these ${C.length} foods. Return JSON array:
[{"id":1,"cat":"category_id","serv":30,"conf":90,"why":"brief reason"},...]

${w}`;try{const x=t==="claude-sonnet"?await V7(u,b,r):await H7(u,b,r);o+=x.inputTokens,a+=x.outputTokens;const E=cIe(x.content,C);s.push(...E)}catch(x){console.error(`Smart batch ${y/d+1} failed:`,x),l+=C.length,C.forEach(E=>{s.push({foodId:E.id,foodName:E.name,brand:E.brand,categoryId:"other",categoryName:"Other / Uncategorized",confidence:0,reasoning:"Smart categorization failed",suggestedServingG:100,currentServingG:E.servingSizeG,servingValidated:!1,packSizeG:xp(E.name),servingSource:"category_default"})})}n==null||n(Math.min(y+d,e.length),e.length),y+d<e.length&&await new Promise(x=>setTimeout(x,300))}const p=t==="claude-sonnet"?3:2.5,f=t==="claude-sonnet"?15:10,m=o/1e6*p+a/1e6*f;return{results:s,totalProcessed:e.length,totalSuccessful:e.length-l,totalFailed:l,processingTimeMs:Date.now()-i,model:t,cost:{inputTokens:o,outputTokens:a,estimatedCost:m}}}function cIe(e,t){const r=[];try{const n=e.match(/\[[\s\S]*\]/);if(!n)throw new Error("No JSON array found in response");const i=JSON.parse(n[0]);for(let s=0;s<t.length;s++){const o=t[s],a=i.find(l=>l.id===s+1)||i[s];if(a){const l=Yc.find(y=>y.id===a.cat),c=l?a.cat:"other",u=(l==null?void 0:l.name)||"Other / Uncategorized";l||console.warn(` Unknown category ID from AI: "${a.cat}" for food: ${o.name}`);const d=xp(o.name);let p=a.serv||100,f=!1,m="category_default";l&&(o.servingSizeG!==null&&o.servingSizeG>=l.toleranceMin&&o.servingSizeG<=l.toleranceMax?(p=o.servingSizeG,f=!0,m="validated"):d!=null&&d<l.defaultServingG&&d>=l.toleranceMin?(p=d,m="pack_size"):(p=a.serv||l.defaultServingG,m="category_default")),r.push({foodId:o.id,foodName:o.name,brand:o.brand,categoryId:c,categoryName:u,confidence:a.conf||50,reasoning:a.why||"AI categorization",suggestedServingG:p,currentServingG:o.servingSizeG,servingValidated:f,packSizeG:d,servingSource:m})}else r.push({foodId:o.id,foodName:o.name,brand:o.brand,categoryId:"other",categoryName:"Other / Uncategorized",confidence:0,reasoning:"No AI response",suggestedServingG:100,currentServingG:o.servingSizeG,servingValidated:!1,packSizeG:xp(o.name),servingSource:"category_default"})}}catch(n){console.error("Failed to parse smart response:",n,e),t.forEach(i=>{r.push({foodId:i.id,foodName:i.name,brand:i.brand,categoryId:"other",categoryName:"Other / Uncategorized",confidence:0,reasoning:`Parse error: ${n}`,suggestedServingG:100,currentServingG:i.servingSizeG,servingValidated:!1,packSizeG:xp(i.name),servingSource:"category_default"})})}return r}const ZB="https://us-central1-nutrasafe-705c7.cloudfunctions.net",uIe=({onBack:e})=>{const[t,r]=v.useState(localStorage.getItem("claude_api_key")||""),[n,i]=v.useState(localStorage.getItem("openai_api_key")||""),[s,o]=v.useState("claude-sonnet"),[a,l]=v.useState(new Set),[c,u]=v.useState(!1),[d,p]=v.useState([]),[f,m]=v.useState(0),[y,C]=v.useState(!1),[w,b]=v.useState({current:0,total:0}),[x,E]=v.useState([]),[I,k]=v.useState(null),[P,A]=v.useState(!0),[D,L]=v.useState(500),[M,T]=v.useState(!0),[O,Q]=v.useState(!0),[X,B]=v.useState("all"),[W,ne]=v.useState("all"),[J,ye]=v.useState(""),[Pe,ue]=v.useState(0),Z=50;v.useEffect(()=>{t&&localStorage.setItem("claude_api_key",t),n&&localStorage.setItem("openai_api_key",n)},[t,n]);const Ve=v.useCallback(async()=>{if(a.size===0)return;u(!0),m(0);const U=[];try{const j=Array.from(a),re=5e3,se=2e3;for(let Ce=0;Ce<j.length;Ce++){const be=j[Ce];console.log(` Loading ${be}...`);let me=0,ie=!0,he=[],Se=0,De=0;for(;ie&&De<se;){De++;const Be=await fetch(`${ZB}/browseAllIndices`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({indices:[be],offset:me,pageSize:re})});if(!Be.ok){console.error(` ${be}: HTTP ${Be.status}`);break}const Et=await Be.json();if(Et.success&&Et.products){const ut=Et.products||[],ct=Et.pagination||{};if(ut.length===0){console.log(`   ${be}: Reached end (0 products returned)`),ie=!1;break}ut.length<re&&(console.log(`   ${be}: Last page (${ut.length} products)`),ie=!1);const vt=ut.map(kt=>({objectID:kt.objectID,name:kt.name||kt.foodName||"Unknown",brand:kt.brand||void 0,brandName:kt.brandName||void 0,servingSizeG:kt.servingSizeG||void 0,serving_size_g:kt.serving_size_g||void 0,category:kt.category||void 0,foodCategory:kt.foodCategory||void 0,sourceIndex:be}));he.push(...vt),Se=(ct==null?void 0:ct.total)||he.length;const nt=Ce/j.length*100,oe=Se>0?he.length/Se*100/j.length:0;m(Math.round(nt+oe)),console.log(`   ${be}: ${he.length.toLocaleString()} / ${Se.toLocaleString()}`),ct.hasMore?me+=re:ie=!1,Se>0&&he.length>=Se&&(ie=!1)}else{console.error(` ${be}: ${Et.error||"Failed"}`);break}}De>=se&&console.warn(` ${be}: Hit safety limit`),console.log(` ${be}: Loaded ${he.length.toLocaleString()} products`),U.push(...he),m(Math.round((Ce+1)/j.length*100))}p(U),m(100),console.log(` Total foods loaded: ${U.length.toLocaleString()}`)}catch(j){console.error("Error loading foods:",j),alert(`Error loading foods: ${j}`)}finally{u(!1)}},[a]),ve=v.useCallback((U,j)=>{const re=["milk","chocolate","milkshake","dairy","cream","bread","muffin","crumpet","brioche","chicken","nugget","kiev","fruit","juice","smoothie","cake","biscuit","cookie"],se=[],Ce=[];U.forEach(ie=>{const he=ie.name.toLowerCase();re.some(De=>he.includes(De))&&se.length<j*.4?se.push(ie):Ce.push(ie)});const be=Ce.sort(()=>Math.random()-.5);return[...se,...be].slice(0,j)},[]),Ze=v.useCallback(async()=>{const U=s==="claude-sonnet"?t:n;if(!U){alert(`Please enter your ${s==="claude-sonnet"?"Claude":"OpenAI"} API key`);return}if(d.length===0){alert("Please load foods first");return}C(!0),E([]),k(null);try{let j=d;if(M&&(j=d.filter(he=>!he.category&&!he.foodCategory),console.log(`Skipping ${d.length-j.length} already categorized foods`)),j.length===0){alert("No uncategorized foods found. All foods already have categories."),C(!1);return}const re=P?ve(j,D):j;b({current:0,total:re.length});const se=new Map(re.map(he=>[he.objectID,he.sourceIndex])),Ce=re.map(he=>({id:he.objectID,name:he.name,brand:he.brand||he.brandName||null,servingSizeG:he.servingSizeG||he.serving_size_g||null})),me=await(O?lIe:aIe)(Ce,s,U,(he,Se)=>b({current:he,total:Se})),ie=me.results.map(he=>({...he,reviewStatus:"pending",sourceIndex:se.get(he.foodId)}));console.log(" Categorization complete:",{totalResults:ie.length,sampleResults:ie.slice(0,5).map(he=>({foodName:he.foodName,categoryId:he.categoryId,categoryName:he.categoryName})),uniqueCategories:[...new Set(ie.map(he=>he.categoryId))]}),E(ie),k(me)}catch(j){console.error("Categorization failed:",j),alert(`Categorization failed: ${j}`)}finally{C(!1)}},[s,t,n,d,P,D,ve]),je=v.useCallback((U,j,re)=>{E(se=>se.map(Ce=>Ce.foodId===U?{...Ce,reviewStatus:j,editedCategoryId:re}:Ce))},[]),de=v.useCallback(()=>{const U=new Set(x.filter(j=>{var re;if(X!=="all"&&j.categoryId!==X||W!=="all"&&j.reviewStatus!==W)return!1;if(J){const se=J.toLowerCase();if(!j.foodName.toLowerCase().includes(se)&&!((re=j.brand)!=null&&re.toLowerCase().includes(se)))return!1}return!0}).map(j=>j.foodId));E(j=>j.map(re=>U.has(re.foodId)&&re.reviewStatus==="pending"?{...re,reviewStatus:"approved"}:re))},[x,X,W,J]),[q,le]=v.useState(!1),G=v.useCallback(async()=>{const U=x.filter(j=>j.reviewStatus==="approved"||j.reviewStatus==="edited");if(U.length===0){alert("No approved or edited items to save.");return}if(confirm(`Save ${U.length} categorizations to the database?

This will update:
- Category
- Serving size (validated or estimated)`)){le(!0);try{const j=U.map(ie=>({objectID:ie.foodId,sourceIndex:ie.sourceIndex||"unknown",categoryId:ie.editedCategoryId||ie.categoryId,servingSizeG:ie.suggestedServingG,servingValidated:ie.servingValidated||!1,servingSource:ie.servingSource||"category_default"})),re=await fetch(`${ZB}/batchSaveFoodCategories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({foods:j})}),se=await re.json();if(!re.ok)throw new Error(se.error||"Failed to save");const Ce=se.firestoreUpdated>0?`Firestore: ${se.firestoreUpdated} ( Algolia syncs automatically)`:"",be=se.algoliaUpdated>0?`Algolia-only: ${se.algoliaUpdated}`:"",me=[Ce,be].filter(Boolean).join(`
`);alert(`Successfully saved ${se.total} categorizations!

${me}`),E(ie=>ie.filter(he=>he.reviewStatus!=="approved"&&he.reviewStatus!=="edited"))}catch(j){console.error("Save failed:",j),alert(`Save failed: ${j}`)}finally{le(!1)}}},[x]),H=x.filter(U=>{var j;if(X!=="all"&&U.categoryId!==X||W!=="all"&&U.reviewStatus!==W)return!1;if(J){const re=J.toLowerCase();if(!U.foodName.toLowerCase().includes(re)&&!((j=U.brand)!=null&&j.toLowerCase().includes(re)))return!1}return!0}),ce=Math.ceil(H.length/Z),te=H.slice(Pe*Z,(Pe+1)*Z),ee={pending:x.filter(U=>U.reviewStatus==="pending").length,approved:x.filter(U=>U.reviewStatus==="approved").length,rejected:x.filter(U=>U.reviewStatus==="rejected").length,edited:x.filter(U=>U.reviewStatus==="edited").length},K=Yc.map(U=>({...U,count:x.filter(j=>j.categoryId===U.id).length})).filter(U=>U.count>0).sort((U,j)=>j.count-U.count);return h.jsxs("div",{style:{padding:"24px",maxWidth:"1600px",margin:"0 auto"},children:[h.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:h.jsxs("div",{children:[h.jsx("button",{onClick:e,style:{padding:"8px 16px",background:"#6b7280",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",marginBottom:"8px"},children:" Back"}),h.jsx("h1",{style:{margin:0,fontSize:"28px",fontWeight:"bold"},children:"Food Categorizer"}),h.jsx("p",{style:{margin:"8px 0 0",color:"#6b7280"},children:"AI-powered food categorization with tiered serving sizes"})]})}),h.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[h.jsx("h2",{style:{margin:"0 0 16px",fontSize:"18px"},children:"Configuration"}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:[h.jsxs("div",{children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"AI Model"}),h.jsxs("div",{style:{display:"flex",gap:"12px"},children:[h.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[h.jsx("input",{type:"radio",checked:s==="claude-sonnet",onChange:()=>o("claude-sonnet")}),"Claude 3.5 Sonnet"]}),h.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[h.jsx("input",{type:"radio",checked:s==="gpt-4o",onChange:()=>o("gpt-4o")}),"GPT-4o"]})]})]}),h.jsxs("div",{children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:s==="claude-sonnet"?"Claude API Key":"OpenAI API Key"}),s==="claude-sonnet"?h.jsx("input",{type:"password",value:t,onChange:U=>r(U.target.value),placeholder:"sk-ant-...",style:{width:"100%",padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}}):h.jsx("input",{type:"password",value:n,onChange:U=>i(U.target.value),placeholder:"sk-...",style:{width:"100%",padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})]}),h.jsxs("div",{children:[h.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[h.jsx("input",{type:"checkbox",checked:P,onChange:U=>A(U.target.checked)}),h.jsx("span",{style:{fontWeight:"500"},children:"Test Mode"}),h.jsxs("span",{style:{color:"#6b7280",fontSize:"14px"},children:["(Process ",D," foods first)"]})]}),P&&h.jsx("input",{type:"number",value:D,onChange:U=>L(Math.max(50,Math.min(1e3,parseInt(U.target.value)||500))),min:50,max:1e3,style:{marginTop:"8px",width:"120px",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px"}}),h.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",marginTop:"12px"},children:[h.jsx("input",{type:"checkbox",checked:M,onChange:U=>T(U.target.checked)}),h.jsx("span",{style:{fontWeight:"500"},children:"Skip Already Categorized"}),h.jsx("span",{style:{color:"#6b7280",fontSize:"14px"},children:"(Ignore foods with existing category)"})]}),h.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",marginTop:"12px"},children:[h.jsx("input",{type:"checkbox",checked:O,onChange:U=>Q(U.target.checked)}),h.jsx("span",{style:{fontWeight:"500",color:"#059669"},children:" Smart Mode"}),h.jsx("span",{style:{color:"#6b7280",fontSize:"14px"},children:"(Minimal prompts - ~50% cheaper, lets AI use its knowledge)"})]})]})]}),h.jsxs("div",{style:{marginTop:"20px"},children:[h.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Select Databases"}),h.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:gr.map(U=>h.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:a.has(U)?"#dbeafe":"#f3f4f6",borderRadius:"6px",cursor:"pointer",border:a.has(U)?"1px solid #3b82f6":"1px solid transparent"},children:[h.jsx("input",{type:"checkbox",checked:a.has(U),onChange:j=>{const re=new Set(a);j.target.checked?re.add(U):re.delete(U),l(re)}}),U.replace(/_/g," ")]},U))})]}),h.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[h.jsx("button",{onClick:Ve,disabled:c||a.size===0,style:{padding:"12px 24px",background:c?"#9ca3af":"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"15px",fontWeight:"500",cursor:c?"not-allowed":"pointer"},children:c?`Loading... ${f}%`:"Load Foods"}),h.jsx("button",{onClick:Ze,disabled:y||d.length===0,style:{padding:"12px 24px",background:y?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"15px",fontWeight:"500",cursor:y?"not-allowed":"pointer"},children:y?`Processing... ${w.current}/${w.total}`:P?`Run Test (${D} foods)`:`Categorize All (${d.length} foods)`}),d.length>0&&h.jsxs("span",{style:{display:"flex",alignItems:"center",color:"#6b7280"},children:[d.length.toLocaleString()," foods loaded"]})]})]}),x.length>0&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[h.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[h.jsx("div",{style:{fontSize:"14px",color:"#6b7280"},children:"Total Processed"}),h.jsx("div",{style:{fontSize:"28px",fontWeight:"bold"},children:x.length})]}),h.jsxs("div",{style:{background:"#fef3c7",borderRadius:"12px",padding:"16px"},children:[h.jsx("div",{style:{fontSize:"14px",color:"#92400e"},children:"Pending Review"}),h.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#92400e"},children:ee.pending})]}),h.jsxs("div",{style:{background:"#d1fae5",borderRadius:"12px",padding:"16px"},children:[h.jsx("div",{style:{fontSize:"14px",color:"#065f46"},children:"Approved"}),h.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#065f46"},children:ee.approved})]}),h.jsxs("div",{style:{background:"#fee2e2",borderRadius:"12px",padding:"16px"},children:[h.jsx("div",{style:{fontSize:"14px",color:"#991b1b"},children:"Rejected"}),h.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#991b1b"},children:ee.rejected})]}),I&&h.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[h.jsx("div",{style:{fontSize:"14px",color:"#6b7280"},children:"Estimated Cost"}),h.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold"},children:["$",I.cost.estimatedCost.toFixed(2)]}),h.jsxs("div",{style:{fontSize:"12px",color:"#9ca3af"},children:[I.cost.inputTokens.toLocaleString()," in / ",I.cost.outputTokens.toLocaleString()," out"]})]})]}),h.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[h.jsx("h3",{style:{margin:"0 0 16px",fontSize:"16px"},children:"Category Distribution"}),h.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:K.slice(0,20).map(U=>h.jsxs("span",{onClick:()=>B(X===U.id?"all":U.id),style:{padding:"6px 12px",background:X===U.id?"#3b82f6":"#f3f4f6",color:X===U.id?"white":"#374151",borderRadius:"16px",fontSize:"13px",cursor:"pointer"},children:[U.name,": ",U.count]},U.id))})]}),h.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"16px",alignItems:"center",flexWrap:"wrap"},children:[h.jsx("input",{type:"text",placeholder:"Search foods...",value:J,onChange:U=>{ye(U.target.value),ue(0)},style:{padding:"10px 14px",border:"1px solid #d1d5db",borderRadius:"6px",width:"250px"}}),h.jsxs("select",{value:W,onChange:U=>{ne(U.target.value),ue(0)},style:{padding:"10px 14px",border:"1px solid #d1d5db",borderRadius:"6px"},children:[h.jsx("option",{value:"all",children:"All Status"}),h.jsx("option",{value:"pending",children:"Pending"}),h.jsx("option",{value:"approved",children:"Approved"}),h.jsx("option",{value:"rejected",children:"Rejected"}),h.jsx("option",{value:"edited",children:"Edited"})]}),h.jsxs("select",{value:X,onChange:U=>{B(U.target.value),ue(0)},style:{padding:"10px 14px",border:"1px solid #d1d5db",borderRadius:"6px"},children:[h.jsx("option",{value:"all",children:"All Categories"}),Yc.map(U=>h.jsx("option",{value:U.id,children:U.name},U.id))]}),h.jsxs("button",{onClick:de,style:{padding:"10px 16px",background:"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:["Approve All Visible (",H.filter(U=>U.reviewStatus==="pending").length,")"]}),h.jsx("button",{onClick:G,disabled:q||ee.approved+ee.edited===0,style:{padding:"10px 16px",background:ee.approved+ee.edited>0?"#3b82f6":"#9ca3af",color:"white",border:"none",borderRadius:"6px",cursor:ee.approved+ee.edited>0?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"8px"},children:q?h.jsx(h.Fragment,{children:"Saving..."}):h.jsxs(h.Fragment,{children:[" Save to Database (",ee.approved+ee.edited,")"]})}),h.jsxs("span",{style:{color:"#6b7280",marginLeft:"auto"},children:["Showing ",H.length," of ",x.length]})]}),h.jsx("div",{style:{background:"white",borderRadius:"12px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:h.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[h.jsx("thead",{children:h.jsxs("tr",{style:{background:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[h.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",fontSize:"13px"},children:"Food"}),h.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",fontSize:"13px"},children:"Category"}),h.jsx("th",{style:{padding:"12px 16px",textAlign:"center",fontWeight:"600",fontSize:"13px"},children:"Confidence"}),h.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",fontSize:"13px"},children:"Serving"}),h.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",fontSize:"13px"},children:"Reasoning"}),h.jsx("th",{style:{padding:"12px 16px",textAlign:"center",fontWeight:"600",fontSize:"13px"},children:"Actions"})]})}),h.jsx("tbody",{children:te.map((U,j)=>h.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb",background:U.reviewStatus==="approved"?"#f0fdf4":U.reviewStatus==="rejected"?"#fef2f2":U.reviewStatus==="edited"?"#fefce8":j%2===0?"white":"#f9fafb"},children:[h.jsxs("td",{style:{padding:"12px 16px"},children:[h.jsx("div",{style:{fontWeight:"500"},children:U.foodName}),U.brand&&h.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:U.brand})]}),h.jsx("td",{style:{padding:"12px 16px"},children:h.jsx("select",{value:U.editedCategoryId||U.categoryId,onChange:re=>{re.target.value!==U.categoryId&&je(U.foodId,"edited",re.target.value)},style:{padding:"6px 10px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"13px",maxWidth:"200px"},children:Yc.map(re=>h.jsx("option",{value:re.id,children:re.name},re.id))})}),h.jsx("td",{style:{padding:"12px 16px",textAlign:"center"},children:h.jsxs("span",{style:{display:"inline-block",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"500",background:U.confidence>=90?"#d1fae5":U.confidence>=70?"#fef3c7":"#fee2e2",color:U.confidence>=90?"#065f46":U.confidence>=70?"#92400e":"#991b1b"},children:[U.confidence,"%"]})}),h.jsxs("td",{style:{padding:"12px 16px",fontSize:"13px"},children:[h.jsx("div",{children:U.servingSource==="validated"?h.jsxs(h.Fragment,{children:[h.jsx("span",{style:{display:"inline-block",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",fontWeight:"500",background:"#d1fae5",color:"#065f46",marginRight:"6px"},children:"Validated"}),U.suggestedServingG,"g"]}):U.servingSource==="pack_size"?h.jsxs(h.Fragment,{children:[h.jsx("span",{style:{display:"inline-block",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",fontWeight:"500",background:"#dbeafe",color:"#1e40af",marginRight:"4px"},children:"Pack Size"}),h.jsx("span",{title:"Using pack size from product name to prevent over-portioning. The category default was higher than the actual pack size.",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"14px",height:"14px",borderRadius:"50%",background:"#bfdbfe",color:"#1e40af",fontSize:"10px",fontWeight:"600",cursor:"help",marginRight:"6px"},children:"i"}),U.suggestedServingG,"g"]}):h.jsxs(h.Fragment,{children:[h.jsx("span",{style:{display:"inline-block",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",fontWeight:"500",background:"#fef3c7",color:"#92400e",marginRight:"4px"},children:"Estimated"}),h.jsx("span",{title:"We couldn't guarantee the serving size. Check on the label and edit before you add.",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"14px",height:"14px",borderRadius:"50%",background:"#d1d5db",color:"#4b5563",fontSize:"10px",fontWeight:"600",cursor:"help",marginRight:"6px"},children:"i"}),U.suggestedServingG,"g"]})}),U.packSizeG&&U.servingSource!=="pack_size"&&h.jsxs("div",{style:{fontSize:"11px",color:"#6b7280"},children:["Pack: ",U.packSizeG,"g"]}),U.currentServingG&&!U.servingValidated&&h.jsxs("div",{style:{fontSize:"11px",color:"#9ca3af"},children:["DB: ",U.currentServingG,"g (out of range)"]}),!U.currentServingG&&h.jsx("div",{style:{fontSize:"11px",color:"#9ca3af"},children:"No DB serving"})]}),h.jsx("td",{style:{padding:"12px 16px",fontSize:"12px",color:"#6b7280",maxWidth:"250px"},children:U.reasoning}),h.jsx("td",{style:{padding:"12px 16px",textAlign:"center"},children:h.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[h.jsx("button",{onClick:()=>je(U.foodId,"approved"),title:"Approve",style:{padding:"6px 10px",background:U.reviewStatus==="approved"?"#10b981":"#e5e7eb",color:U.reviewStatus==="approved"?"white":"#374151",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:""}),h.jsx("button",{onClick:()=>je(U.foodId,"rejected"),title:"Reject",style:{padding:"6px 10px",background:U.reviewStatus==="rejected"?"#ef4444":"#e5e7eb",color:U.reviewStatus==="rejected"?"white":"#374151",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:""})]})})]},U.foodId))})]})}),ce>1&&h.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"8px",marginTop:"16px"},children:[h.jsx("button",{onClick:()=>ue(U=>Math.max(0,U-1)),disabled:Pe===0,style:{padding:"8px 16px",background:Pe===0?"#e5e7eb":"#3b82f6",color:Pe===0?"#9ca3af":"white",border:"none",borderRadius:"6px",cursor:Pe===0?"not-allowed":"pointer"},children:"Previous"}),h.jsxs("span",{style:{color:"#6b7280"},children:["Page ",Pe+1," of ",ce]}),h.jsx("button",{onClick:()=>ue(U=>Math.min(ce-1,U+1)),disabled:Pe>=ce-1,style:{padding:"8px 16px",background:Pe>=ce-1?"#e5e7eb":"#3b82f6",color:Pe>=ce-1?"#9ca3af":"white",border:"none",borderRadius:"6px",cursor:Pe>=ce-1?"not-allowed":"pointer"},children:"Next"})]})]})]})},dIe=new tX({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});yI();const hIe=()=>{const{setFoods:e,setLoading:t,setLoadingProgress:r,setStats:n,setDuplicateGroups:i,getDirtyFoods:s,clearDirty:o,foods:a,isLoading:l,loadingMessage:c,loadingProgress:u,selectedFoodIds:d,getFoodById:p,deselectAll:f,setFoodReportIds:m}=gl(),[y,C]=v.useState(!1),[w,b]=v.useState(!1),[x,E]=v.useState(!1),[I,k]=v.useState(!1),[P,A]=v.useState(!1),[D,L]=v.useState(!1),[M,T]=v.useState("grid"),[O,Q]=v.useState(0);v.useEffect(()=>{(async()=>{try{const Ve=await(await fetch("https://us-central1-nutrasafe-705c7.cloudfunctions.net/getUserReports")).json();if(Ve.success){const ve=Ve.reports||[],Ze=ve.filter(de=>de.status==="pending").length;Q(Ze);const je=new Set;ve.forEach(de=>{var le,G;const q=((le=de.food)==null?void 0:le.id)||((G=de.food)==null?void 0:G.objectID)||de.foodId;q&&je.add(q)}),m(je)}}catch(Z){console.error("Error loading reports count:",Z)}})()},[m]);const X=Ne.useRef(!1),B=v.useCallback(async()=>{if(!X.current){X.current=!0,t(!0,"Loading food database..."),r(0);try{console.log("Starting data load..."),t(!0,"Getting index stats...");const ue=await Fie();console.log("Index stats:",ue);let Z=0;const Ve={};gr.forEach(je=>{var de;Ve[je]=((de=ue[je])==null?void 0:de.entries)||0,Z+=Ve[je]}),r(10),console.log(`Total foods across indices: ${Z}`),t(!0,"Loading foods from indices...");const{foods:ve}=await bW("",[...gr],{hitsPerPage:10});console.log(`Loaded ${ve.length} foods`),r(80);const Ze={totalFoods:Z,byIndex:Ve,verified:ve.filter(je=>je.isVerified).length,unverified:ve.filter(je=>!je.isVerified).length,withIssues:ve.filter(je=>je._reviewFlags.length>0).length,duplicateGroups:0,lastUpdated:new Date};n(Ze),e(ve),r(100),console.log("Data load complete")}catch(ue){console.error("Error loading data:",ue),alert(`Error loading data: ${ue instanceof Error?ue.message:String(ue)}`)}finally{t(!1)}}},[t,r,n,e]);v.useEffect(()=>{B()},[]);const W=v.useCallback(async()=>{const ue=s();if(ue.length!==0){C(!0);try{const Z=ue.map(ve=>({food:ve,updates:{name:ve.name,brandName:ve.brandName,barcode:ve.barcode,ingredientsText:ve.ingredientsText,calories:ve.calories,protein:ve.protein,carbs:ve.carbs,fat:ve.fat,saturatedFat:ve.saturatedFat,fiber:ve.fiber,sugar:ve.sugar,sodium:ve.sodium,salt:ve.salt,servingDescription:ve.servingDescription,servingSizeG:ve.servingSizeG,isPerUnit:ve.isPerUnit}})),Ve=await xce(Z);Ve.success>0&&(o(),console.log(`Saved ${Ve.success} foods`)),Ve.failed>0&&(console.error(`Failed to save ${Ve.failed} foods:`,Ve.errors),alert(`Failed to save ${Ve.failed} foods. Check console for details.`))}catch(Z){console.error("Error saving:",Z),alert("Error saving changes. Please try again.")}finally{C(!1)}}},[s,o]),ne=v.useCallback(async()=>{if(!(d.length===0||!window.confirm(`Are you sure you want to delete ${d.length} food(s)? This action cannot be undone.`))){b(!0);try{const Z=d.map(ve=>p(ve)).filter(ve=>ve!==void 0);if(Z.length===0){alert("No foods found to delete.");return}const Ve=await Ece(Z);if(Ve.success>0){const ve=new Set(Z.map(je=>je._id)),Ze=a.filter(je=>!ve.has(je._id));e(Ze),f(),console.log(`Deleted ${Ve.success} foods`)}Ve.failed>0&&(console.error(`Failed to delete ${Ve.failed} foods:`,Ve.errors),alert(`Failed to delete ${Ve.failed} foods. Check console for details.`))}catch(Z){console.error("Error deleting:",Z),alert("Error deleting foods. Please try again.")}finally{b(!1)}}},[d,p,a,e,f]),J=v.useCallback(async ue=>{if(!(d.length===0||!window.confirm(`Move ${d.length} food(s) to ${ue}? This will remove them from their current index.`))){E(!0);try{const Ve=d.map(Ze=>p(Ze)).filter(Ze=>Ze!==void 0);if(Ve.length===0){alert("No foods found to move.");return}console.log(`Moving ${Ve.length} foods to ${ue}`);const ve=await Rce(Ve,ue);ve.success>0&&(console.log(` Moved ${ve.success} foods to ${ue}`),await B(),f(),alert(`Successfully moved ${ve.success} food(s) to ${ue}!`)),ve.failed>0&&(console.error(`Failed to move ${ve.failed} foods:`,ve.errors),alert(`Failed to move ${ve.failed} foods. Check console for details.`))}catch(Ve){console.error("Error moving:",Ve),alert("Error moving foods. Please try again.")}finally{E(!1)}}},[d,p,f,B]),ye=v.useCallback(async()=>{k(!0);try{const ue=qpe(a,{minScore:30,maxGroups:500});i(ue),console.log(`Found ${ue.length} duplicate groups`),L(!0)}catch(ue){console.error("Error detecting duplicates:",ue)}finally{k(!1)}},[a,i]),Pe=v.useCallback(()=>{A(!0)},[]);return M==="image-processing"?h.jsx("div",{className:"h-screen flex flex-col bg-gray-50",children:h.jsx(Jpe,{onBack:()=>T("grid")})}):M==="google-scraper"?h.jsx("div",{className:"h-screen flex flex-col bg-gray-50",children:h.jsx(lfe,{onBack:()=>T("grid")})}):M==="reports"?h.jsx("div",{className:"h-screen flex flex-col bg-gray-50",children:h.jsx(cfe,{onBack:()=>{T("grid"),fetch("https://us-central1-nutrasafe-705c7.cloudfunctions.net/getUserReports").then(ue=>ue.json()).then(ue=>{if(ue.success){const Z=ue.reports||[],Ve=Z.filter(Ze=>Ze.status==="pending").length;Q(Ve);const ve=new Set;Z.forEach(Ze=>{var de,q;const je=((de=Ze.food)==null?void 0:de.id)||((q=Ze.food)==null?void 0:q.objectID)||Ze.foodId;je&&ve.add(je)}),m(ve)}}).catch(()=>{})}})}):M==="master-builder"?h.jsx("div",{className:"h-screen flex flex-col bg-gray-50",children:h.jsx(ufe,{onBack:()=>T("grid")})}):M==="food-categorizer"?h.jsx("div",{className:"h-screen flex flex-col bg-gray-50",children:h.jsx(uIe,{onBack:()=>T("grid")})}):M==="analytics"?h.jsx("div",{className:"h-screen flex flex-col bg-gray-50",children:h.jsx(nIe,{onBack:()=>T("grid")})}):h.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[h.jsx(Lie,{onSave:W,onRefresh:B,onDeleteSelected:ne,onMoveSelected:J,onReports:()=>T("reports"),pendingReportsCount:O,isSaving:y,isDeleting:w,isMoving:x}),h.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[h.jsx(Gie,{onDetectDuplicates:ye,onLookupOFF:Pe,onImageProcessing:()=>T("image-processing"),onGoogleScraper:()=>T("google-scraper"),onReports:()=>T("reports"),onMasterBuilder:()=>T("master-builder"),onFoodCategorizer:()=>T("food-categorizer"),onAnalytics:()=>T("analytics"),isDetectingDuplicates:I,pendingReportsCount:O}),h.jsx("main",{className:"flex-1 overflow-hidden",children:h.jsx(_ie,{})})]}),l&&h.jsx(jie,{message:c,progress:u}),P&&h.jsx(tpe,{onClose:()=>A(!1),onImport:()=>{B(),A(!1),console.log("Imported food from OpenFoodFacts")},selectedFoods:d.map(ue=>p(ue)).filter(ue=>ue!==void 0)}),D&&h.jsx(Qpe,{onClose:()=>L(!1)})]})},pIe=()=>h.jsx(nX,{client:dIe,children:h.jsx(eIe,{children:h.jsx(hIe,{})})});SR.createRoot(document.getElementById("root")).render(h.jsx(Ne.StrictMode,{children:h.jsx(pIe,{})}));
//# sourceMappingURL=index-DX0aKYsH.js.map
