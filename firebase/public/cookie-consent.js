!function(){"use strict";const n="nutrasafe_cookie_consent",e="https://firestore.googleapis.com/v1/projects/nutrasafe-705c7/databases/(default)/documents/cookie_consents",t=localStorage.getItem(n);if(t)return void("accepted"===t&&i());function o(t){const o=t?"accepted":"rejected",r=(new Date).toISOString();localStorage.setItem(n,o),localStorage.setItem("nutrasafe_consent_timestamp",r),async function(n,t){try{const o={fields:{choice:{stringValue:n},timestamp:{timestampValue:t},userAgent:{stringValue:navigator.userAgent},anonymizedIp:{stringValue:await a()},page:{stringValue:window.location.pathname},referrer:{stringValue:document.referrer||"direct"}}},i=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});i.ok?console.log("✅ Consent logged to Firebase"):console.warn("⚠️ Failed to log consent:",i.status)}catch(n){console.error("❌ Error logging consent:",n)}}(o,r),t&&i(),function(){const n=document.getElementById("cookie-consent-overlay");n&&(n.style.animation="fadeOut 0.3s ease",setTimeout(()=>n.remove(),300))}(),document.body.style.overflow="",console.log(`✅ Cookie consent: ${o}`)}async function a(){try{const n=new AbortController,e=setTimeout(()=>n.abort(),2e3),t=await fetch("https://api.ipify.org?format=json",{signal:n.signal});clearTimeout(e);const o=(await t.json()).ip;if(o.includes("."))return o.split(".").slice(0,3).join(".")+".0";if(o.includes(":")){return o.split(":").slice(0,3).join(":")+":0000:0000:0000:0000"}return"unknown"}catch(n){return"unavailable"}}function i(){if("undefined"==typeof gtag){const n=document.createElement("script");function e(){dataLayer.push(arguments)}n.async=!0,n.src="https://www.googletagmanager.com/gtag/js?id=G-YZNJZ4C1MV",document.head.appendChild(n),window.dataLayer=window.dataLayer||[],window.gtag=e,e("js",new Date),e("config","G-YZNJZ4C1MV",{anonymize_ip:!0,cookie_flags:"SameSite=None;Secure"}),console.log("✅ Google Analytics loaded (with consent)")}}!function(){const n=document.createElement("div");n.id="cookie-consent-overlay",n.innerHTML='\n            <div id="cookie-consent-modal">\n                <div class="consent-header">\n                    <h2><img src="/app-icon-2026.png" alt="NutraSafe" class="consent-logo">Cookie Consent</h2>\n                </div>\n                <div class="consent-body">\n                    <p>We use cookies to improve your experience and analyze site traffic. This includes Google Analytics to understand how visitors use our site.</p>\n                    <p><strong>Your choice matters:</strong></p>\n                    <ul>\n                        <li><strong>Accept</strong> - Enable analytics to help us improve</li>\n                        <li><strong>Reject</strong> - Browse without tracking (essential cookies only)</li>\n                    </ul>\n                    <p class="consent-legal">We\'ll log your choice (anonymized) for compliance purposes. Read our <a href="/privacy-policy" target="_blank">Privacy Policy</a> and <a href="/terms-of-service" target="_blank">Terms of Service</a> for details.</p>\n                </div>\n                <div class="consent-actions">\n                    <button id="cookie-reject" class="btn-reject">Reject</button>\n                    <button id="cookie-accept" class="btn-accept">Accept</button>\n                </div>\n            </div>\n        ';const e=document.createElement("style");e.textContent="\n            @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600;700&family=Inter:wght@400;500;600&display=swap');\n\n            #cookie-consent-overlay {\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background: rgba(61, 122, 122, 0.15);\n                backdrop-filter: blur(8px);\n                z-index: 999999;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                padding: 20px;\n                animation: fadeIn 0.3s ease;\n            }\n\n            @keyframes fadeIn {\n                from { opacity: 0; }\n                to { opacity: 1; }\n            }\n\n            #cookie-consent-modal {\n                background: rgba(255, 255, 255, 0.95);\n                backdrop-filter: blur(20px);\n                border: 1px solid rgba(255, 255, 255, 0.9);\n                border-radius: 20px;\n                box-shadow: 0 20px 60px rgba(61, 122, 122, 0.15), 0 8px 24px rgba(0, 0, 0, 0.08);\n                max-width: 560px;\n                width: 100%;\n                padding: 32px;\n                animation: slideUp 0.4s ease;\n            }\n\n            @keyframes slideUp {\n                from {\n                    opacity: 0;\n                    transform: translateY(20px);\n                }\n                to {\n                    opacity: 1;\n                    transform: translateY(0);\n                }\n            }\n\n            .consent-header h2 {\n                margin: 0 0 20px 0;\n                font-size: 26px;\n                font-weight: 600;\n                color: #3d7a7a;\n                display: flex;\n                align-items: center;\n                gap: 12px;\n                font-family: 'Playfair Display', Georgia, serif;\n            }\n\n            .consent-logo {\n                width: 36px;\n                height: 36px;\n                border-radius: 8px;\n            }\n\n            .consent-body {\n                color: #4a4a4a;\n                line-height: 1.7;\n                margin-bottom: 24px;\n                font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n            }\n\n            .consent-body p {\n                margin: 0 0 16px 0;\n            }\n\n            .consent-body ul {\n                margin: 0 0 16px 0;\n                padding-left: 24px;\n            }\n\n            .consent-body li {\n                margin: 8px 0;\n            }\n\n            .consent-body strong {\n                color: #1a1a1a;\n            }\n\n            .consent-legal {\n                font-size: 13px;\n                color: #7a7a7a;\n                border-top: 1px solid rgba(61, 122, 122, 0.15);\n                padding-top: 16px;\n                margin-top: 16px;\n            }\n\n            .consent-legal a {\n                color: #3d7a7a;\n                text-decoration: none;\n                border-bottom: 1px solid transparent;\n                transition: border-color 0.2s;\n            }\n\n            .consent-legal a:hover {\n                border-bottom-color: #3d7a7a;\n            }\n\n            .consent-actions {\n                display: flex;\n                gap: 12px;\n            }\n\n            .consent-actions button {\n                flex: 1;\n                padding: 14px 24px;\n                border: none;\n                border-radius: 12px;\n                font-size: 16px;\n                font-weight: 600;\n                cursor: pointer;\n                transition: all 0.2s ease;\n                font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n            }\n\n            .btn-reject {\n                background: rgba(61, 122, 122, 0.08);\n                color: #4a4a4a;\n                border: 1px solid rgba(61, 122, 122, 0.2);\n            }\n\n            .btn-reject:hover {\n                background: rgba(61, 122, 122, 0.12);\n                border-color: rgba(61, 122, 122, 0.3);\n                transform: translateY(-1px);\n            }\n\n            .btn-accept {\n                background: linear-gradient(135deg, #3d7a7a 0%, #5a9a9a 100%);\n                color: white;\n                box-shadow: 0 4px 14px rgba(61, 122, 122, 0.3);\n            }\n\n            .btn-accept:hover {\n                transform: translateY(-2px);\n                box-shadow: 0 6px 20px rgba(61, 122, 122, 0.4);\n            }\n\n            .btn-accept:active,\n            .btn-reject:active {\n                transform: translateY(0);\n            }\n\n            @media (max-width: 600px) {\n                #cookie-consent-modal {\n                    padding: 24px;\n                }\n\n                .consent-header h2 {\n                    font-size: 22px;\n                }\n\n                .consent-actions {\n                    flex-direction: column;\n                }\n            }\n        ",document.head.appendChild(e),document.body.appendChild(n),document.getElementById("cookie-accept").addEventListener("click",()=>o(!0)),document.getElementById("cookie-reject").addEventListener("click",()=>o(!1)),document.body.style.overflow="hidden"}();const r=document.createElement("style");r.textContent="\n        @keyframes fadeOut {\n            from { opacity: 1; }\n            to { opacity: 0; }\n        }\n    ",document.head.appendChild(r)}();